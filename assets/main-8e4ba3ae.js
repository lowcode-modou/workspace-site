var Wu=Object.defineProperty;var Uu=(e,t,n)=>t in e?Wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var tt=(e,t,n)=>(Uu(e,typeof t!="symbol"?t+"":t,n),n);import{I as Vu,H as ju,F as Xu,C as Yu,S as Gu,r as m,a as Fo,c as Lo,R as ye,b as Ku,d as qn,g as qu,m as Ju,e as Zu,f as Qu,P as ed,_ as ro,u as td,h as ma,i as ii,D as nd,j as zo,k as rd,l as id,n as od,o as ad,p as sd,s as ld,q as cd,t as ud,v as ga,A as Ys,w as He,x as g,y as ie,z as dd,B as io,E as oi,G as ai,J as Gs,K as Ks,L as fd,M as Tn,N as ya,O as Ni,Q as va,T as hd,U as pd,V as md,W as ba,X as Ft,Y as _t,Z as Rt,$ as de,a0 as qe,a1 as Re,a2 as wa,a3 as gd,a4 as Lt,a5 as ht,a6 as Vt,a7 as G,a8 as ve,a9 as qs,aa as yd,ab as Oe,ac as si,ad as Js,ae as it,af as vd,ag as St,ah as bd,ai as Ue,aj as wd,ak as xd,al as Sd,am as Hn,an as Zs,ao as Ed,ap as _d,aq as Md,ar as Qs,as as Cd,at as Nd,au as Or,av as Td,aw as Pd,ax as Ad,ay as Id,az as el,aA as Xt,aB as Rd,aC as Jn,aD as tl,aE as $d,aF as oo,aG as Od,aH as kd,aI as Dd,aJ as Fd,aK as Ld,aL as zd,aM as Bd,aN as Hd,aO as Wd,aP as Ud,aQ as Vd,aR as jd}from"./client-69160c7d.js";const lr=Vu;lr.Header=ju;lr.Footer=Xu;lr.Content=Yu;lr.Sider=Gu;const $t=lr;var nl=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Xd=e=>{var{prefixCls:t,className:n,avatar:r,title:i,description:o}=e,a=nl(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=m.useContext(Fo),c=l("list",t),s=Lo(`${c}-item-meta`,n),u=ye.createElement("div",{className:`${c}-item-meta-content`},i&&ye.createElement("h4",{className:`${c}-item-meta-title`},i),o&&ye.createElement("div",{className:`${c}-item-meta-description`},o));return ye.createElement("div",Object.assign({},a,{className:s}),r&&ye.createElement("div",{className:`${c}-item-meta-avatar`},r),(i||o)&&u)},Yd=(e,t)=>{var{prefixCls:n,children:r,actions:i,extra:o,className:a,colStyle:l}=e,c=nl(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:s,itemLayout:u}=m.useContext(Bo),{getPrefixCls:f}=m.useContext(Fo),d=()=>{let w;return m.Children.forEach(r,E=>{typeof E=="string"&&(w=!0)}),w&&m.Children.count(r)>1},h=()=>u==="vertical"?!!o:!d(),x=f("list",n),v=i&&i.length>0&&ye.createElement("ul",{className:`${x}-item-action`,key:"actions"},i.map((w,E)=>ye.createElement("li",{key:`${x}-item-action-${E}`},w,E!==i.length-1&&ye.createElement("em",{className:`${x}-item-action-split`})))),S=s?"div":"li",p=ye.createElement(S,Object.assign({},c,s?{}:{ref:t},{className:Lo(`${x}-item`,{[`${x}-item-no-flex`]:!h()},a)}),u==="vertical"&&o?[ye.createElement("div",{className:`${x}-item-main`,key:"content"},r,v),ye.createElement("div",{className:`${x}-item-extra`,key:"extra"},o)]:[r,v,Ku(o,{key:"extra"})]);return s?ye.createElement(qn,{ref:t,flex:1,style:l},p):p},rl=m.forwardRef(Yd);rl.Meta=Xd;const Gd=rl,Kd=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:i,padding:o,listItemPaddingSM:a,marginLG:l,borderRadiusLG:c}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${i}px ${l}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:a}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:`${o}px ${r}px`}}}},qd=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:i,marginSM:o,margin:a}=e;return{[`@media screen and (max-width:${r})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${a}px`}}}}}},Jd=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:i,paddingSM:o,marginLG:a,padding:l,listItemPadding:c,colorPrimary:s,listItemPaddingSM:u,listItemPaddingLG:f,paddingXS:d,margin:h,colorText:x,colorTextDescription:v,motionDurationSlow:S,lineWidth:p}=e;return{[`${t}`]:Object.assign(Object.assign({},Zu(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:a,textAlign:"end",[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:x,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:l},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:x},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:x,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:x,transition:`all ${S}`,["&:hover"]:{color:s}}},[`${t}-item-meta-description`]:{color:v,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${d}px`,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:p,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${l}px 0`,color:v,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:l,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:h,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:a},[`${t}-item-meta`]:{marginBlockEnd:l,[`${t}-item-meta-title`]:{marginBlockEnd:o,color:x,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:f},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Zd=qu("List",e=>{const t=Ju(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[Jd(t),Kd(t),qd(t)]},{contentWidth:220});var Qd=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bo=m.createContext({});Bo.Consumer;function ao(e){var{pagination:t=!1,prefixCls:n,bordered:r=!1,split:i=!0,className:o,children:a,itemLayout:l,loadMore:c,grid:s,dataSource:u=[],size:f,header:d,footer:h,loading:x=!1,rowKey:v,renderItem:S,locale:p}=e,w=Qd(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const E=t&&typeof t=="object"?t:{},[y,_]=m.useState(E.defaultCurrent||1),[M,N]=m.useState(E.defaultPageSize||10),{getPrefixCls:R,renderEmpty:F,direction:O}=m.useContext(Fo),W={current:1,total:0},q=Q=>(ce,ae)=>{_(ce),N(ae),t&&t[Q]&&t[Q](ce,ae)},K=q("onChange"),b=q("onShowSizeChange"),T=(Q,ce)=>{if(!S)return null;let ae;return typeof v=="function"?ae=v(Q):v?ae=Q[v]:ae=Q.key,ae||(ae=`list-item-${ce}`),m.createElement(m.Fragment,{key:ae},S(Q,ce))},C=()=>!!(c||t||h),P=R("list",n),[k,z]=Zd(P);let I=x;typeof I=="boolean"&&(I={spinning:I});const D=I&&I.spinning;let H="";switch(f){case"large":H="lg";break;case"small":H="sm";break}const j=Lo(P,{[`${P}-vertical`]:l==="vertical",[`${P}-${H}`]:H,[`${P}-split`]:i,[`${P}-bordered`]:r,[`${P}-loading`]:D,[`${P}-grid`]:!!s,[`${P}-something-after-last-item`]:C(),[`${P}-rtl`]:O==="rtl"},o,z),U=Qu(W,{total:u.length,current:y,pageSize:M},t||{}),J=Math.ceil(U.total/U.pageSize);U.current>J&&(U.current=J);const se=t?m.createElement("div",{className:`${P}-pagination`},m.createElement(ed,Object.assign({},U,{onChange:K,onShowSizeChange:b}))):null;let ee=ro(u);t&&u.length>(U.current-1)*U.pageSize&&(ee=ro(u).splice((U.current-1)*U.pageSize,U.pageSize));const te=Object.keys(s||{}).some(Q=>["xs","sm","md","lg","xl","xxl"].includes(Q)),le=td(te),V=m.useMemo(()=>{for(let Q=0;Q<ma.length;Q+=1){const ce=ma[Q];if(le[ce])return ce}},[le]),_e=m.useMemo(()=>{if(!s)return;const Q=V&&s[V]?s[V]:s.column;if(Q)return{width:`${100/Q}%`,maxWidth:`${100/Q}%`}},[s==null?void 0:s.column,V]);let we=D&&m.createElement("div",{style:{minHeight:53}});if(ee.length>0){const Q=ee.map((ce,ae)=>T(ce,ae));we=s?m.createElement(ii,{gutter:s.gutter},m.Children.map(Q,ce=>m.createElement("div",{key:ce==null?void 0:ce.key,style:_e},ce))):m.createElement("ul",{className:`${P}-items`},Q)}else!a&&!D&&(we=m.createElement("div",{className:`${P}-empty-text`},p&&p.emptyText||(F==null?void 0:F("List"))||m.createElement(nd,{componentName:"List"})));const he=U.position||"bottom",$e=m.useMemo(()=>({grid:s,itemLayout:l}),[JSON.stringify(s),l]);return k(m.createElement(Bo.Provider,{value:$e},m.createElement("div",Object.assign({className:j},w),(he==="top"||he==="both")&&se,d&&m.createElement("div",{className:`${P}-header`},d),m.createElement(zo,Object.assign({},I),we,a),h&&m.createElement("div",{className:`${P}-footer`},h),c||(he==="bottom"||he==="both")&&se)))}ao.Item=Gd;var ef=function(e){rd(n,e);var t=id(n);function n(){return od(this,n),t.apply(this,arguments)}return ad(n,[{key:"render",value:function(){return this.props.children}}]),n}(ye.Component),tf={subtree:!0,childList:!0,attributeFilter:["style","class"]},nf=function(t){var n=t.children,r=t.options,i=r===void 0?tf:r,o=t.onMutate,a=o===void 0?function(){}:o,l=sd(a),c=m.useRef(null),s=ye.useRef(null),u=ye.isValidElement(n)&&ld(n),f=u?n==null?void 0:n.ref:null,d=ye.useMemo(function(){return cd(f,s)},[f,s]);return m.useEffect(function(){if(ud()){var h,x=ga(f==null?void 0:f.current)||ga(c==null?void 0:c.current);return x&&"MutationObserver"in window&&(h=new MutationObserver(l),h.observe(x,i)),function(){var v,S;(v=h)===null||v===void 0||v.takeRecords(),(S=h)===null||S===void 0||S.disconnect()}}},[i,f]),n?ye.createElement(ef,{ref:c},u?ye.cloneElement(n,{ref:d}):n):null};function rf(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function of(e){return Object.keys(e).map(t=>`${rf(t)}: ${e[t]};`).join(" ")}function xa(){return window.devicePixelRatio||1}function Ti(e,t,n,r){e.translate(t,n),e.rotate(Math.PI/180*Number(r)),e.translate(-t,-n)}const af=(e,t)=>{let n=!1;return e.removedNodes.length&&(n=Array.from(e.removedNodes).some(r=>r===t)),e.type==="attributes"&&e.target===t&&(n=!0),n},Pi=2,Sa=3,sf=e=>{var t,n;const{zIndex:r=9,rotate:i=-22,width:o,height:a,image:l,content:c,font:s={},style:u,className:f,gap:d=[100,100],offset:h,children:x}=e,{color:v="rgba(0,0,0,.15)",fontSize:S=16,fontWeight:p="normal",fontStyle:w="normal",fontFamily:E="sans-serif"}=s,[y,_]=d,M=y/2,N=_/2,R=(t=h==null?void 0:h[0])!==null&&t!==void 0?t:M,F=(n=h==null?void 0:h[1])!==null&&n!==void 0?n:N,O=()=>{const I={zIndex:r,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let D=R-M,H=F-N;return D>0&&(I.left=`${D}px`,I.width=`calc(100% - ${D}px)`,D=0),H>0&&(I.top=`${H}px`,I.height=`calc(100% - ${H}px)`,H=0),I.backgroundPosition=`${D}px ${H}px`,I},W=m.useRef(null),q=m.useRef(),K=m.useRef(!1),b=()=>{q.current&&(q.current.remove(),q.current=void 0)},T=(I,D)=>{var H;W.current&&q.current&&(K.current=!0,q.current.setAttribute("style",of(Object.assign(Object.assign({},O()),{backgroundImage:`url('${I}')`,backgroundSize:`${(y+D)*Pi}px`}))),(H=W.current)===null||H===void 0||H.append(q.current),setTimeout(()=>{K.current=!1}))},C=I=>{let D=120,H=64;if(!l&&I.measureText){I.font=`${Number(S)}px ${E}`;const j=Array.isArray(c)?c:[c],U=j.map(J=>I.measureText(J).width);D=Math.ceil(Math.max.apply(Math,ro(U))),H=Number(S)*j.length+(j.length-1)*Sa}return[o??D,a??H]},P=(I,D,H,j,U)=>{const J=xa(),se=Number(S)*J;I.font=`${w} normal ${p} ${se}px/${U}px ${E}`,I.fillStyle=v,I.textAlign="center",I.textBaseline="top",I.translate(j/2,0);const ee=Array.isArray(c)?c:[c];ee==null||ee.forEach((te,le)=>{I.fillText(te??"",D,H+le*(se+Sa*J))})},k=()=>{const I=document.createElement("canvas"),D=I.getContext("2d");if(D){q.current||(q.current=document.createElement("div"));const H=xa(),[j,U]=C(D),J=(y+j)*H,se=(_+U)*H;I.setAttribute("width",`${J*Pi}px`),I.setAttribute("height",`${se*Pi}px`);const ee=y*H/2,te=_*H/2,le=j*H,V=U*H,_e=(le+y*H)/2,we=(V+_*H)/2,he=ee+J,$e=te+se,Q=_e+J,ce=we+se;if(D.save(),Ti(D,_e,we,i),l){const ae=new Image;ae.onload=()=>{D.drawImage(ae,ee,te,le,V),D.restore(),Ti(D,Q,ce,i),D.drawImage(ae,he,$e,le,V),T(I.toDataURL(),j)},ae.crossOrigin="anonymous",ae.referrerPolicy="no-referrer",ae.src=l}else P(D,ee,te,le,V),D.restore(),Ti(D,Q,ce,i),P(D,he,$e,le,V),T(I.toDataURL(),j)}},z=I=>{K.current||I.forEach(D=>{af(D,q.current)&&(b(),k())})};return m.useEffect(k,[i,r,o,a,l,c,v,S,p,w,E,y,_,R,F]),ye.createElement(nf,{onMutate:z},ye.createElement("div",{ref:W,className:f,style:Object.assign({position:"relative"},u)},x))},lf=sf;var cf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const uf=cf;var il=function(t,n){return m.createElement(Ys,He(He({},t),{},{ref:n,icon:uf}))};il.displayName="DatabaseOutlined";const df=m.forwardRef(il);var ff={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const hf=ff;var ol=function(t,n){return m.createElement(Ys,He(He({},t),{},{ref:n,icon:hf}))};ol.displayName="MoreOutlined";const pf=m.forwardRef(ol),mf=()=>g("div",{className:gf.wrapper,children:g(zo,{size:"large"})}),gf={wrapper:ie({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},yf="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",vf=dd({scriptUrl:yf}),bf=({type:e})=>g(vf,{type:`icon-modou-${e}`}),Be={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Se.apply(this,arguments)}var be;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(be||(be={}));const Ea="popstate";function al(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,i;i=t.map((d,h)=>u(d,typeof d=="string"?null:d.state,h===0?"default":void 0));let o=c(n??i.length-1),a=be.Pop,l=null;function c(d){return Math.min(Math.max(d,0),i.length-1)}function s(){return i[o]}function u(d,h,x){h===void 0&&(h=null);let v=Ot(i?s().pathname:"/",d,h,x);return xf(v.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(d)),v}return{get index(){return o},get action(){return a},get location(){return s()},createHref(d){return typeof d=="string"?d:Zn(d)},push(d,h){a=be.Push;let x=u(d,h);o+=1,i.splice(o,i.length,x),r&&l&&l({action:a,location:x})},replace(d,h){a=be.Replace;let x=u(d,h);i[o]=x,r&&l&&l({action:a,location:x})},go(d){a=be.Pop,o=c(o+d),l&&l({action:a,location:s()})},listen(d){return l=d,()=>{l=null}}}}function wf(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:l}=r.location;return Ot("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zn(i)}return Ef(t,n,null,e)}function xf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sf(){return Math.random().toString(36).substr(2,8)}function _a(e){return{usr:e.state,key:e.key}}function Ot(e,t,n,r){return n===void 0&&(n=null),Se({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vt(t):t,{state:n,key:t&&t.key||r||Sf()})}function Zn(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function vt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Ef(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=be.Pop,c=null;function s(){l=be.Pop,c&&c({action:l,location:d.location})}function u(h,x){l=be.Push;let v=Ot(d.location,h,x);n&&n(v,h);let S=_a(v),p=d.createHref(v);try{a.pushState(S,"",p)}catch{i.location.assign(p)}o&&c&&c({action:l,location:v})}function f(h,x){l=be.Replace;let v=Ot(d.location,h,x);n&&n(v,h);let S=_a(v),p=d.createHref(v);a.replaceState(S,"",p),o&&c&&c({action:l,location:v})}let d={get action(){return l},get location(){return e(i,a)},listen(h){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Ea,s),c=h,()=>{i.removeEventListener(Ea,s),c=null}},createHref(h){return t(i,h)},push:u,replace:f,go(h){return a.go(h)}};return d}var Fe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fe||(Fe={}));function _f(e){return e.index===!0}function sl(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((r,i)=>{let o=[...t,i],a=typeof r.id=="string"?r.id:o.join("-");return ne(r.index!==!0||!r.children,"Cannot specify children on an index route"),ne(!n.has(a),'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),n.add(a),_f(r)?Se({},r,{id:a}):Se({},r,{id:a,children:r.children?sl(r.children,o,n):void 0})})}function sn(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?vt(t):t,i=ul(r.pathname||"/",n);if(i==null)return null;let o=ll(e);Mf(o);let a=null;for(let l=0;a==null&&l<o.length;++l)a=Of(o[l],i);return a}function ll(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((i,o)=>{let a={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(ne(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let l=kt([r,a.relativePath]),c=n.concat(a);i.children&&i.children.length>0&&(ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),ll(i.children,t,c,l)),!(i.path==null&&!i.index)&&t.push({path:l,score:Rf(l,i.index),routesMeta:c})}),t}function Mf(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$f(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Cf=/^:\w+$/,Nf=3,Tf=2,Pf=1,Af=10,If=-2,Ma=e=>e==="*";function Rf(e,t){let n=e.split("/"),r=n.length;return n.some(Ma)&&(r+=If),t&&(r+=Tf),n.filter(i=>!Ma(i)).reduce((i,o)=>i+(Cf.test(o)?Nf:o===""?Pf:Af),r)}function $f(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Of(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,s=i==="/"?t:t.slice(i.length)||"/",u=Yt({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},s);if(!u)return null;Object.assign(r,u.params);let f=l.route;o.push({params:r,pathname:kt([i,u.pathname]),pathnameBase:Lf(kt([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=kt([i,u.pathnameBase]))}return o}function cl(e,t){return t===void 0&&(t={}),e.replace(/:(\w+)/g,(n,r)=>(ne(t[r]!=null,'Missing ":'+r+'" param'),t[r])).replace(/(\/?)\*/,(n,r,i,o)=>{const a="*";return t[a]==null?o==="/*"?"/":"":""+r+t[a]})}function Yt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=kf(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((s,u,f)=>{if(u==="*"){let d=l[f]||"";a=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return s[u]=Df(l[f]||"",u),s},{}),pathname:o,pathnameBase:a,pattern:e}}function kf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),dl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,l)=>(r.push(l),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Df(e,t){try{return decodeURIComponent(e)}catch(n){return dl(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function ul(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function ne(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fl(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?vt(e):e;return{pathname:n?n.startsWith("/")?n:Ff(n,t):t,search:zf(r),hash:Bf(i)}}function Ff(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ai(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hl(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=vt(e):(i=Se({},e),ne(!i.pathname||!i.pathname.includes("?"),Ai("?","pathname","search",i)),ne(!i.pathname||!i.pathname.includes("#"),Ai("#","pathname","hash",i)),ne(!i.search||!i.search.includes("#"),Ai("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,l;if(r||a==null)l=n;else{let f=t.length-1;if(a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}l=f>=0?t[f]:"/"}let c=fl(i,l),s=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(s||u)&&(c.pathname+="/"),c}const kt=e=>e.join("/").replace(/\/\/+/g,"/"),Lf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),zf=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Bf=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Hf=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,i=new Headers(r.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),Se({},r,{headers:i}))};class kr extends Error{}class pl{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,ne(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new kr("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce((i,o)=>{let[a,l]=o;return Object.assign(i,{[a]:this.trackPromise(a,l)})},{})}trackPromise(t,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(t);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,t,null,i),i=>this.onSettle(r,t,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,i){if(this.controller.signal.aborted&&r instanceof kr)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(t,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let t=this.subscriber;t&&t(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{t.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return ne(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,i]=n;return Object.assign(t,{[r]:Uf(i)})},{})}}function Wf(e){return e instanceof Promise&&e._tracked===!0}function Uf(e){if(!Wf(e))return e;if(e._error)throw e._error;return e._data}function Vf(e){return new pl(e)}const jf=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,Se({},r,{headers:i}))};class _n{constructor(t,n,r){this.status=t,this.statusText=n||"",this.data=r}}function Ho(e){return e instanceof _n}const Ii={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Xf={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function Yf(e){ne(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=sl(e.routes),n=null,r=new Set,i=null,o=null,a=null,l=!1,c=sn(t,e.history.location,e.basename),s=null;if(c==null){let{matches:A,route:$,error:L}=Aa(t);c=A,s={[$.id]:L}}let u=!c.some(A=>A.route.loader)||e.hydrationData!=null,f,d={historyAction:e.history.action,location:e.history.location,matches:c,initialized:u,navigation:Ii,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||s,fetchers:new Map},h=be.Pop,x=!1,v,S=!1,p=!1,w=[],E=[],y=new Map,_=0,M=-1,N=new Map,R=new Set,F=new Map,O=new Map;function W(){return n=e.history.listen(A=>{let{action:$,location:L}=A;return k($,L)}),d.initialized||k(be.Pop,d.location),f}function q(){n&&n(),r.clear(),v&&v.abort(),d.fetchers.forEach((A,$)=>le($))}function K(A){return r.add(A),()=>r.delete(A)}function b(A){d=Se({},d,A),r.forEach($=>$(d))}function T(A,$){var L;let X=d.actionData!=null&&d.navigation.formMethod!=null&&d.navigation.state==="loading"&&((L=d.navigation.formAction)==null?void 0:L.split("?")[0])===A.pathname,Z=$.loaderData?{loaderData:$i(d.loaderData,$.loaderData,$.matches||[])}:{};b(Se({},X?{}:{actionData:null},$,Z,{historyAction:h,location:A,initialized:!0,navigation:Ii,revalidation:"idle",restoreScrollPosition:d.navigation.formData?!1:ae(A,$.matches||d.matches),preventScrollReset:x})),S||h===be.Pop||(h===be.Push?e.history.push(A,A.state):h===be.Replace&&e.history.replace(A,A.state)),h=be.Pop,x=!1,S=!1,p=!1,w=[],E=[]}async function C(A,$){if(typeof A=="number"){e.history.go(A);return}let{path:L,submission:X,error:Z}=Ca(A,$),pe=Ot(d.location,L,$&&$.state),oe=($&&$.replace)===!0||X!=null?be.Replace:be.Push,re=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0;return await k(oe,pe,{submission:X,pendingError:Z,preventScrollReset:re,replace:$&&$.replace})}function P(){if(ee(),b({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){k(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}k(h||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function k(A,$,L){v&&v.abort(),v=null,h=A,S=(L&&L.startUninterruptedRevalidation)===!0,ce(d.location,d.matches),x=(L&&L.preventScrollReset)===!0;let X=L&&L.overrideNavigation,Z=sn(t,$,e.basename);if(!Z){let{matches:Xe,route:xe,error:Te}=Aa(t);$e(),T($,{matches:Xe,loaderData:{},errors:{[xe.id]:Te}});return}if(Jf(d.location,$)){T($,{matches:Z});return}v=new AbortController;let pe=An($,v.signal,L&&L.submission),oe,re;if(L&&L.pendingError)re={[ln(Z).route.id]:L.pendingError};else if(L&&L.submission){let Xe=await z(pe,$,L.submission,Z,{replace:L.replace});if(Xe.shortCircuited)return;oe=Xe.pendingActionData,re=Xe.pendingActionError,X=Se({state:"loading",location:$},L.submission)}let{shortCircuited:ue,loaderData:ge,errors:Ce}=await I(pe,$,Z,X,L&&L.submission,L&&L.replace,oe,re);ue||(v=null,T($,{matches:Z,loaderData:ge,errors:Ce}))}async function z(A,$,L,X,Z){ee();let pe=Se({state:"submitting",location:$},L);b({navigation:pe});let oe,re=ka(X,$);if(!re.route.action)oe=Ia($);else if(oe=await Pn("action",A,re),A.signal.aborted)return{shortCircuited:!0};if(fn(oe)){let ue=Se({state:"loading",location:Ot(d.location,oe.location)},L);return await J(oe,ue,Z&&Z.replace),{shortCircuited:!0}}if(Xn(oe)){let ue=ln(X,re.route.id);return(Z&&Z.replace)!==!0&&(h=be.Push),{pendingActionError:{[ue.route.id]:oe.error}}}if(Gt(oe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[re.route.id]:oe.data}}}async function I(A,$,L,X,Z,pe,oe,re){let ue=X;ue||(ue={state:"loading",location:$,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[ge,Ce]=Na(d,L,Z,$,p,w,E,oe,re,F);if($e(Me=>!(L&&L.some(Ne=>Ne.route.id===Me))||ge&&ge.some(Ne=>Ne.route.id===Me)),ge.length===0&&Ce.length===0)return T($,{matches:L,loaderData:$i(d.loaderData,{},L),errors:re||null,actionData:oe||null}),{shortCircuited:!0};S||(Ce.forEach(Me=>{let[Ne]=Me;const et=d.fetchers.get(Ne);let Ht={state:"loading",data:et&&et.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(Ne,Ht)}),b(Se({navigation:ue,actionData:oe||d.actionData||null},Ce.length>0?{fetchers:new Map(d.fetchers)}:{}))),M=++_,Ce.forEach(Me=>{let[Ne]=Me;return y.set(Ne,v)});let{results:Xe,loaderResults:xe,fetcherResults:Te}=await se(d.matches,ge,Ce,A);if(A.signal.aborted)return{shortCircuited:!0};Ce.forEach(Me=>{let[Ne]=Me;return y.delete(Ne)});let Ye=Ra(Xe);if(Ye){let Me=Ri(d,Ye);return await J(Ye,Me,pe),{shortCircuited:!0}}let{loaderData:Qe,errors:De}=Pa(d,L,ge,xe,re,Ce,Te,O);O.forEach((Me,Ne)=>{Me.subscribe(et=>{(et||Me.done)&&O.delete(Ne)})}),we();let Tt=he(M);return Se({loaderData:Qe,errors:De},Tt||Ce.length>0?{fetchers:new Map(d.fetchers)}:{})}function D(A){return d.fetchers.get(A)||Xf}function H(A,$,L,X){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");y.has(A)&&V(A);let Z=sn(t,L,e.basename);if(!Z){te(A,$,new _n(404,"Not Found",null));return}let{path:pe,submission:oe}=Ca(L,X,!0),re=ka(Z,pe);if(oe){j(A,$,pe,re,oe);return}F.set(A,[pe,re]),U(A,$,pe,re)}async function j(A,$,L,X,Z){if(ee(),F.delete(A),!X.route.action){let{error:Ge}=Ia(L);te(A,$,Ge);return}let pe=d.fetchers.get(A),oe=Se({state:"submitting"},Z,{data:pe&&pe.data});d.fetchers.set(A,oe),b({fetchers:new Map(d.fetchers)});let re=new AbortController,ue=An(L,re.signal,Z);y.set(A,re);let ge=await Pn("action",ue,X);if(ue.signal.aborted){y.get(A)===re&&y.delete(A);return}if(fn(ge)){y.delete(A),R.add(A);let Ge=Se({state:"loading"},Z,{data:void 0});d.fetchers.set(A,Ge),b({fetchers:new Map(d.fetchers)});let st=Se({state:"loading",location:Ot(d.location,ge.location)},Z);await J(ge,st);return}if(Xn(ge)){te(A,$,ge.error);return}Gt(ge)&&ne(!1,"defer() is not supported in actions");let Ce=d.navigation.location||d.location,Xe=An(Ce,re.signal),xe=d.navigation.state!=="idle"?sn(t,d.navigation.location,e.basename):d.matches;ne(xe,"Didn't find any matches after fetcher action");let Te=++_;N.set(A,Te);let Ye=Se({state:"loading",data:ge.data},Z);d.fetchers.set(A,Ye);let[Qe,De]=Na(d,xe,Z,Ce,p,w,E,{[X.route.id]:ge.data},void 0,F);De.filter(Ge=>{let[st]=Ge;return st!==A}).forEach(Ge=>{let[st]=Ge,mr=d.fetchers.get(st),Mi={state:"loading",data:mr&&mr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(st,Mi),y.set(st,re)}),b({fetchers:new Map(d.fetchers)});let{results:Tt,loaderResults:Me,fetcherResults:Ne}=await se(d.matches,Qe,De,Xe);if(re.signal.aborted)return;N.delete(A),y.delete(A),De.forEach(Ge=>{let[st]=Ge;return y.delete(st)});let et=Ra(Tt);if(et){let Ge=Ri(d,et);await J(et,Ge);return}let{loaderData:Ht,errors:gt}=Pa(d,d.matches,Qe,Me,void 0,De,Ne,O),Ei={state:"idle",data:ge.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(A,Ei);let _i=he(Te);d.navigation.state==="loading"&&Te>M?(ne(h,"Expected pending action"),v&&v.abort(),T(d.navigation.location,{matches:xe,loaderData:Ht,errors:gt,fetchers:new Map(d.fetchers)})):(b(Se({errors:gt,loaderData:$i(d.loaderData,Ht,xe)},_i?{fetchers:new Map(d.fetchers)}:{})),p=!1)}async function U(A,$,L,X){let Z=d.fetchers.get(A),pe={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:Z&&Z.data};d.fetchers.set(A,pe),b({fetchers:new Map(d.fetchers)});let oe=new AbortController,re=An(L,oe.signal);y.set(A,oe);let ue=await Pn("loader",re,X);if(Gt(ue)&&(ue=await yl(ue,re.signal,!0)||ue),y.get(A)===oe&&y.delete(A),re.signal.aborted)return;if(fn(ue)){let Ce=Ri(d,ue);await J(ue,Ce);return}if(Xn(ue)){let Ce=ln(d.matches,$);d.fetchers.delete(A),b({fetchers:new Map(d.fetchers),errors:{[Ce.route.id]:ue.error}});return}ne(!Gt(ue),"Unhandled fetcher deferred data");let ge={state:"idle",data:ue.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(A,ge),b({fetchers:new Map(d.fetchers)})}async function J(A,$,L){A.revalidate&&(p=!0),ne($.location,"Expected a location on the redirect navigation"),v=null;let X=L===!0?be.Replace:be.Push;await k(X,$.location,{overrideNavigation:$})}async function se(A,$,L,X){let Z=await Promise.all([...$.map(re=>Pn("loader",X,re)),...L.map(re=>{let[,ue,ge]=re;return Pn("loader",An(ue,X.signal),ge)})]),pe=Z.slice(0,$.length),oe=Z.slice($.length);return await Promise.all([$a(A,$,pe,X.signal,!1,d.loaderData),$a(A,L.map(re=>{let[,,ue]=re;return ue}),oe,X.signal,!0)]),{results:Z,loaderResults:pe,fetcherResults:oe}}function ee(){p=!0,w.push(...$e()),F.forEach((A,$)=>{y.has($)&&(E.push($),V($))})}function te(A,$,L){let X=ln(d.matches,$);le(A),b({errors:{[X.route.id]:L},fetchers:new Map(d.fetchers)})}function le(A){y.has(A)&&V(A),F.delete(A),N.delete(A),R.delete(A),d.fetchers.delete(A)}function V(A){let $=y.get(A);ne($,"Expected fetch controller: "+A),$.abort(),y.delete(A)}function _e(A){for(let $ of A){let X={state:"idle",data:D($).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set($,X)}}function we(){let A=[];for(let $ of R){let L=d.fetchers.get($);ne(L,"Expected fetcher: "+$),L.state==="loading"&&(R.delete($),A.push($))}_e(A)}function he(A){let $=[];for(let[L,X]of N)if(X<A){let Z=d.fetchers.get(L);ne(Z,"Expected fetcher: "+L),Z.state==="loading"&&(V(L),N.delete(L),$.push(L))}return _e($),$.length>0}function $e(A){let $=[];return O.forEach((L,X)=>{(!A||A(X))&&(L.cancel(),$.push(X),O.delete(X))}),$}function Q(A,$,L){if(i=A,a=$,o=L||(X=>X.key),!l&&d.navigation===Ii){l=!0;let X=ae(d.location,d.matches);X!=null&&b({restoreScrollPosition:X})}return()=>{i=null,a=null,o=null}}function ce(A,$){if(i&&o&&a){let L=$.map(Z=>Oa(Z,d.loaderData)),X=o(A,L)||A.key;i[X]=a()}}function ae(A,$){if(i&&o&&a){let L=$.map(pe=>Oa(pe,d.loaderData)),X=o(A,L)||A.key,Z=i[X];if(typeof Z=="number")return Z}return null}return f={get basename(){return e.basename},get state(){return d},get routes(){return t},initialize:W,subscribe:K,enableScrollRestoration:Q,navigate:C,fetch:H,revalidate:P,createHref:li,getFetcher:D,deleteFetcher:le,dispose:q,_internalFetchControllers:y,_internalActiveDeferreds:O},f}function Ca(e,t,n){n===void 0&&(n=!1);let r=typeof e=="string"?e:Zn(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(t.formMethod!=null&&t.formMethod!=="get")return{path:r,submission:{formMethod:t.formMethod,formAction:li(vt(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};let i=vt(r);try{let o=gl(t.formData);n&&i.search&&vl(i.search)&&o.append("index",""),i.search="?"+o}catch{return{path:r,error:new _n(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Zn(i)}}function Ri(e,t){let{formMethod:n,formAction:r,formEncType:i,formData:o}=e.navigation;return{state:"loading",location:Ot(e.location,t.location),formMethod:n||void 0,formAction:r||void 0,formEncType:i||void 0,formData:o||void 0}}function Gf(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function Na(e,t,n,r,i,o,a,l,c,s){let u=c?Object.values(c)[0]:l?Object.values(l)[0]:null,f=c?Object.keys(c)[0]:void 0,h=Gf(t,f).filter((v,S)=>v.route.loader!=null&&(Kf(e.loaderData,e.matches[S],v)||o.some(p=>p===v.route.id)||Ta(e.location,e.matches[S],n,r,v,i,u))),x=[];return s&&s.forEach((v,S)=>{let[p,w]=v;a.includes(S)?x.push([S,p,w]):i&&Ta(p,w,n,p,w,i,u)&&x.push([S,p,w])}),[h,x]}function Kf(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function ml(e,t){let n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ta(e,t,n,r,i,o,a){let l=so(e),c=t.params,s=so(r),u=i.params,f=ml(t,i)||l.toString()===s.toString()||l.search!==s.search||o;if(i.route.shouldRevalidate){let d=i.route.shouldRevalidate(Se({currentUrl:l,currentParams:c,nextUrl:s,nextParams:u},n,{actionResult:a,defaultShouldRevalidate:f}));if(typeof d=="boolean")return d}return f}async function Pn(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1);let o,a,l,c=new Promise((u,f)=>l=f),s=()=>l();t.signal.addEventListener("abort",s);try{let u=n.route[e];ne(u,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),a=await Promise.race([u({request:t,params:n.params}),c])}catch(u){o=Fe.error,a=u}finally{t.signal.removeEventListener("abort",s)}if(a instanceof Response){let u=a.status,f=a.headers.get("Location");if(i)throw a;if(u>=300&&u<=399&&f!=null){if(r)throw a;return{type:Fe.redirect,status:u,location:f,revalidate:a.headers.get("X-Remix-Revalidate")!==null}}let d,h=a.headers.get("Content-Type");return h&&h.startsWith("application/json")?d=await a.json():d=await a.text(),o===Fe.error?{type:o,error:new _n(u,a.statusText,d),headers:a.headers}:{type:Fe.data,data:d,statusCode:a.status,headers:a.headers}}return o===Fe.error?{type:o,error:a}:a instanceof pl?{type:Fe.deferred,deferredData:a}:{type:Fe.data,data:a}}function An(e,t,n){let r=so(e).toString(),i={signal:t};if(n){let{formMethod:o,formEncType:a,formData:l}=n;i.method=o.toUpperCase(),i.body=a==="application/x-www-form-urlencoded"?gl(l):l}return new Request(r,i)}function gl(e){let t=new URLSearchParams;for(let[n,r]of e.entries())ne(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(n,r);return t}function qf(e,t,n,r,i){let o={},a=null,l,c=!1,s={};return n.forEach((u,f)=>{let d=t[f].route.id;if(ne(!fn(u),"Cannot handle redirect results in processLoaderData"),Xn(u)){let h=ln(e,d),x=u.error;r&&(x=Object.values(r)[0],r=void 0),a=Object.assign(a||{},{[h.route.id]:x}),c||(c=!0,l=Ho(u.error)?u.error.status:500),u.headers&&(s[d]=u.headers)}else Gt(u)?(i&&i.set(d,u.deferredData),o[d]=u.deferredData.data):(o[d]=u.data,u.statusCode!=null&&u.statusCode!==200&&!c&&(l=u.statusCode),u.headers&&(s[d]=u.headers))}),r&&(a=r),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:s}}function Pa(e,t,n,r,i,o,a,l){let{loaderData:c,errors:s}=qf(t,n,r,i,l);for(let u=0;u<o.length;u++){let[f,,d]=o[u];ne(a!==void 0&&a[u]!==void 0,"Did not find corresponding fetcher result");let h=a[u];if(Xn(h)){let x=ln(e.matches,d.route.id);s&&s[x.route.id]||(s=Se({},s,{[x.route.id]:h.error})),e.fetchers.delete(f)}else{if(fn(h))throw new Error("Unhandled fetcher revalidation redirect");if(Gt(h))throw new Error("Unhandled fetcher deferred data");{let x={state:"idle",data:h.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(f,x)}}}return{loaderData:c,errors:s}}function $i(e,t,n){let r=Se({},t);return n.forEach(i=>{let o=i.route.id;t[o]===void 0&&e[o]!==void 0&&(r[o]=e[o])}),r}function ln(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function Aa(e){let t=e.find(n=>n.index||n.path===""||n.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new _n(404,"Not Found",null)}}function Ia(e){let t=typeof e=="string"?e:li(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+t+"]")),{type:Fe.error,error:new _n(405,"Method Not Allowed","No action found for ["+t+"]")}}function Ra(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(fn(n))return n}}function li(e){return(e.pathname||"")+(e.search||"")}function Jf(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Gt(e){return e.type===Fe.deferred}function Xn(e){return e.type===Fe.error}function fn(e){return(e&&e.type)===Fe.redirect}async function $a(e,t,n,r,i,o){for(let a=0;a<n.length;a++){let l=n[a],c=t[a],s=e.find(f=>f.route.id===c.route.id),u=s!=null&&!ml(s,c)&&(o&&o[c.route.id])!==void 0;Gt(l)&&(i||u)&&await yl(l,r,i).then(f=>{f&&(n[a]=f||n[a])})}}async function yl(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Fe.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Fe.error,error:i}}return{type:Fe.data,data:e.deferredData.data}}}function vl(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Oa(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function ka(e,t){let n=typeof t=="string"?vt(t).search:t.search;return e[e.length-1].route.index&&!vl(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function so(e){let t=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",n=typeof e=="string"?e:li(e);return new URL(n,t)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dr(){return Dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dr.apply(this,arguments)}function Zf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Qf=typeof Object.is=="function"?Object.is:Zf,{useState:eh,useEffect:th,useLayoutEffect:nh,useDebugValue:rh}=io;function ih(e,t,n){const r=t(),[{inst:i},o]=eh({inst:{value:r,getSnapshot:t}});return nh(()=>{i.value=r,i.getSnapshot=t,Oi(i)&&o({inst:i})},[e,r,t]),th(()=>(Oi(i)&&o({inst:i}),e(()=>{Oi(i)&&o({inst:i})})),[e]),rh(r),r}function Oi(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!Qf(n,r)}catch{return!0}}function oh(e,t,n){return t()}const ah=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sh=!ah,lh=sh?oh:ih,ch="useSyncExternalStore"in io?(e=>e.useSyncExternalStore)(io):lh,bl=m.createContext(null),ci=m.createContext(null),cr=m.createContext(null),Fr=m.createContext(null),ui=m.createContext(null),Mn=m.createContext(null),bt=m.createContext({outlet:null,matches:[]}),wl=m.createContext(null);function uh(e,t){let{relative:n}=t===void 0?{}:t;zt()||ne(!1);let{basename:r,navigator:i}=m.useContext(ui),{hash:o,pathname:a,search:l}=_l(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:kt([r,a])),i.createHref({pathname:c,search:l,hash:o})}function zt(){return m.useContext(Mn)!=null}function Cn(){return zt()||ne(!1),m.useContext(Mn).location}function dh(){return m.useContext(Mn).navigationType}function fh(e){zt()||ne(!1);let{pathname:t}=Cn();return m.useMemo(()=>Yt(e,t),[t,e])}function xl(e){return e.filter((t,n)=>n===0||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase)}function Bt(){zt()||ne(!1);let{basename:e,navigator:t}=m.useContext(ui),{matches:n}=m.useContext(bt),{pathname:r}=Cn(),i=JSON.stringify(xl(n).map(l=>l.pathnameBase)),o=m.useRef(!1);return m.useEffect(()=>{o.current=!0}),m.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let s=hl(l,JSON.parse(i),r,c.relative==="path");e!=="/"&&(s.pathname=s.pathname==="/"?e:kt([e,s.pathname])),(c.replace?t.replace:t.push)(s,c.state,c)},[e,t,i,r])}const Sl=m.createContext(null);function hh(){return m.useContext(Sl)}function El(e){let t=m.useContext(bt).outlet;return t&&m.createElement(Sl.Provider,{value:e},t)}function tn(){let{matches:e}=m.useContext(bt),t=e[e.length-1];return t?t.params:{}}function _l(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=m.useContext(bt),{pathname:i}=Cn(),o=JSON.stringify(xl(r).map(a=>a.pathnameBase));return m.useMemo(()=>hl(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function Wo(e,t){zt()||ne(!1);let n=m.useContext(cr),{matches:r}=m.useContext(bt),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Cn(),c;if(t){var s;let x=typeof t=="string"?vt(t):t;a==="/"||(s=x.pathname)!=null&&s.startsWith(a)||ne(!1),c=x}else c=l;let u=c.pathname||"/",f=a==="/"?u:u.slice(a.length)||"/",d=sn(e,{pathname:f}),h=Ml(d&&d.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:kt([a,x.pathname]),pathnameBase:x.pathnameBase==="/"?a:kt([a,x.pathnameBase])})),r,n||void 0);return t?m.createElement(Mn.Provider,{value:{location:Dr({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:be.Pop}},h):h}function ph(){let e=Cl(),t=Ho(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unhandled Thrown Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:i},n):null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:o},"errorElement")," props on ",m.createElement("code",{style:o},"<Route>")))}class mh extends m.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?m.createElement(wl.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function gh(e){let{routeContext:t,match:n,children:r}=e,i=m.useContext(bl);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),m.createElement(bt.Provider,{value:t},r)}function Ml(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id]));o>=0||ne(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,a,l)=>{let c=a.route.id?i==null?void 0:i[a.route.id]:null,s=n?a.route.errorElement||m.createElement(ph,null):null,u=()=>m.createElement(gh,{match:a,routeContext:{outlet:o,matches:t.concat(r.slice(0,l+1))}},c?s:a.route.element!==void 0?a.route.element:o);return n&&(a.route.errorElement||l===0)?m.createElement(mh,{location:n.location,component:s,error:c,children:u()}):u()},null)}var lo;(function(e){e.UseRevalidator="useRevalidator"})(lo||(lo={}));var Ct;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Ct||(Ct={}));function yh(e){let t=m.useContext(ci);return t||ne(!1),t}function nn(e){let t=m.useContext(cr);return t||ne(!1),t}function vh(){return nn(Ct.UseNavigation).navigation}function bh(){let e=yh(lo.UseRevalidator),t=nn(Ct.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function wh(){let{matches:e,loaderData:t}=nn(Ct.UseMatches);return m.useMemo(()=>e.map(n=>{let{pathname:r,params:i}=n;return{id:n.route.id,pathname:r,params:i,data:t[n.route.id],handle:n.route.handle}}),[e,t])}function xh(){let e=nn(Ct.UseLoaderData),t=m.useContext(bt);t||ne(!1);let n=t.matches[t.matches.length-1];return n.route.id||ne(!1),e.loaderData[n.route.id]}function Sh(e){return nn(Ct.UseRouteLoaderData).loaderData[e]}function Eh(){let e=nn(Ct.UseActionData);return m.useContext(bt)||ne(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function Cl(){var e;let t=m.useContext(wl),n=nn(Ct.UseRouteError),r=m.useContext(bt),i=r.matches[r.matches.length-1];return t||(r||ne(!1),i.route.id||ne(!1),(e=n.errors)==null?void 0:e[i.route.id])}function Nl(){let e=m.useContext(Fr);return e==null?void 0:e._data}function _h(){let e=m.useContext(Fr);return e==null?void 0:e._error}function Mh(e){let{fallbackElement:t,router:n}=e,r=ch(n.subscribe,()=>n.state,()=>n.state),i=m.useMemo(()=>({createHref:n.createHref,go:a=>n.navigate(a),push:(a,l,c)=>n.navigate(a,{state:l,preventScrollReset:c==null?void 0:c.preventScrollReset}),replace:(a,l,c)=>n.navigate(a,{replace:!0,state:l,preventScrollReset:c==null?void 0:c.preventScrollReset})}),[n]),o=n.basename||"/";return m.createElement(ci.Provider,{value:{router:n,navigator:i,static:!1,basename:o}},m.createElement(cr.Provider,{value:r},m.createElement(di,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?m.createElement(Al,null):t)))}function Ch(e){let{basename:t,children:n,initialEntries:r,initialIndex:i}=e,o=m.useRef();o.current==null&&(o.current=al({initialEntries:r,initialIndex:i,v5Compat:!0}));let a=o.current,[l,c]=m.useState({action:a.action,location:a.location});return m.useLayoutEffect(()=>a.listen(c),[a]),m.createElement(di,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a})}function Nh(e){let{to:t,replace:n,state:r,relative:i}=e;zt()||ne(!1);let o=m.useContext(cr),a=Bt();return m.useEffect(()=>{o&&o.navigation.state!=="idle"||a(t,{replace:n,state:r,relative:i})}),null}function Tl(e){return El(e.context)}function Pl(e){ne(!1)}function di(e){let{basename:t="/",children:n=null,location:r,navigationType:i=be.Pop,navigator:o,static:a=!1}=e;zt()&&ne(!1);let l=t.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:l,navigator:o,static:a}),[l,o,a]);typeof r=="string"&&(r=vt(r));let{pathname:s="/",search:u="",hash:f="",state:d=null,key:h="default"}=r,x=m.useMemo(()=>{let v=ul(s,l);return v==null?null:{pathname:v,search:u,hash:f,state:d,key:h}},[l,s,u,f,d,h]);return x==null?null:m.createElement(ui.Provider,{value:c},m.createElement(Mn.Provider,{children:n,value:{location:x,navigationType:i}}))}function Al(e){let{children:t,location:n}=e,r=m.useContext(ci),i=r&&!t?r.router.routes:Qn(t);return Wo(i,n)}function Th(e){let{children:t,errorElement:n,resolve:r}=e;return m.createElement(Ah,{resolve:r,errorElement:n},m.createElement(Ih,null,t))}var Ke;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Ke||(Ke={}));const Ph=new Promise(()=>{});class Ah extends m.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,n){console.error("<Await> caught the following error during render",t,n)}render(){let{children:t,errorElement:n,resolve:r}=this.props,i=null,o=Ke.pending;if(!(r instanceof Promise))o=Ke.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>r});else if(this.state.error){o=Ke.error;let a=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>a})}else r._tracked?(i=r,o=i._error!==void 0?Ke.error:i._data!==void 0?Ke.success:Ke.pending):(o=Ke.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),i=r.then(a=>Object.defineProperty(r,"_data",{get:()=>a}),a=>Object.defineProperty(r,"_error",{get:()=>a})));if(o===Ke.error&&i._error instanceof kr)throw Ph;if(o===Ke.error&&!n)throw i._error;if(o===Ke.error)return m.createElement(Fr.Provider,{value:i,children:n});if(o===Ke.success)return m.createElement(Fr.Provider,{value:i,children:t});throw i}}function Ih(e){let{children:t}=e,n=Nl();return typeof t=="function"?t(n):m.createElement(m.Fragment,null,t)}function Qn(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,i)=>{if(!m.isValidElement(r))return;if(r.type===m.Fragment){n.push.apply(n,Qn(r.props.children,t));return}r.type!==Pl&&ne(!1),!r.props.index||!r.props.children||ne(!1);let o=[...t,i],a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(a.children=Qn(r.props.children,o)),n.push(a)}),n}function Rh(e){return Ml(e)}function Uo(e){return e.map(t=>{let n=Dr({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=Uo(n.children)),n})}function $h(e,t){return Yf({basename:t==null?void 0:t.basename,history:al({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:Uo(e)}).initialize()}const Oh=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:kr,Await:Th,MemoryRouter:Ch,Navigate:Nh,get NavigationType(){return be},Outlet:Tl,Route:Pl,Router:di,RouterProvider:Mh,Routes:Al,UNSAFE_DataRouterContext:ci,UNSAFE_DataRouterStateContext:cr,UNSAFE_DataStaticRouterContext:bl,UNSAFE_LocationContext:Mn,UNSAFE_NavigationContext:ui,UNSAFE_RouteContext:bt,UNSAFE_enhanceManualRouteObjects:Uo,createMemoryRouter:$h,createPath:Zn,createRoutesFromChildren:Qn,createRoutesFromElements:Qn,defer:Vf,generatePath:cl,isRouteErrorResponse:Ho,json:Hf,matchPath:Yt,matchRoutes:sn,parsePath:vt,redirect:jf,renderMatches:Rh,resolvePath:fl,useActionData:Eh,useAsyncError:_h,useAsyncValue:Nl,useHref:uh,useInRouterContext:zt,useLoaderData:xh,useLocation:Cn,useMatch:fh,useMatches:wh,useNavigate:Bt,useNavigation:vh,useNavigationType:dh,useOutlet:El,useOutletContext:hh,useParams:tn,useResolvedPath:_l,useRevalidator:bh,useRouteError:Cl,useRouteLoaderData:Sh,useRoutes:Wo},Symbol.toStringTag,{value:"Module"}));/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kh(e){let{basename:t,children:n,window:r}=e,i=m.useRef();i.current==null&&(i.current=wf({window:r,v5Compat:!0}));let o=i.current,[a,l]=m.useState({action:o.action,location:o.location});return m.useLayoutEffect(()=>o.listen(l),[o]),m.createElement(di,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var Da;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Da||(Da={}));var Fa;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fa||(Fa={}));function vn(e,t){return cl(e,t)}var Dh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Fh(e,t){e===void 0&&(e=!1);var n=Dh(m.useState(e),2),r=n[0],i=n[1],o=m.useMemo(function(){var a=t===void 0?!e:t,l=function(){return i(function(d){return d===e?a:e})},c=function(d){return i(d)},s=function(){return i(e)},u=function(){return i(a)};return{toggle:l,set:c,setLeft:s,setRight:u}},[]);return[r,o]}var Lh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function zh(e){e===void 0&&(e=!1);var t=Lh(Fh(e),2),n=t[0],r=t[1],i=r.toggle,o=r.set,a=m.useMemo(function(){var l=function(){return o(!0)},c=function(){return o(!1)};return{toggle:i,set:function(u){return o(!!u)},setTrue:l,setFalse:c}},[]);return[n,a]}var Bh=["fieldProps","min","proFieldProps","max"],Hh=function(t,n){var r=t.fieldProps,i=t.min,o=t.proFieldProps,a=t.max,l=oi(t,Bh);return g(ai,He({valueType:"digit",fieldProps:He({min:i,max:a},r),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},l))};const In=ye.forwardRef(Hh);var Wh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Uh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],Vh=ye.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,a=e.mode,l=e.valueEnum,c=e.request,s=e.showSearch,u=e.options,f=oi(e,Wh),d=m.useContext(Gs);return g(ai,He(He({valueEnum:Ks(l),request:c,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:He({options:u,mode:a,showSearch:s,getPopupContainer:d.getPopupContainer},n),ref:t,proFieldProps:o},f),{},{children:r}))}),jh=ye.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,a=e.mode,l=e.valueEnum,c=e.request,s=e.options,u=oi(e,Uh),f=He({options:s,mode:a||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},n),d=m.useContext(Gs);return g(ai,He(He({valueEnum:Ks(l),request:c,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:He({getPopupContainer:d.getPopupContainer},f),ref:t,proFieldProps:o},u),{},{children:r}))}),Xh=Vh,Yh=jh,Vo=Xh;Vo.SearchSelect=Yh;Vo.displayName="ProFormComponent";const Il=Vo;var Gh=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],Kh=ye.forwardRef(function(e,t){var n=e.fieldProps,r=e.unCheckedChildren,i=e.checkedChildren,o=e.proFieldProps,a=oi(e,Gh);return g(ai,He({valueType:"switch",fieldProps:He({unCheckedChildren:r,checkedChildren:i},n),ref:t,valuePropName:"checked",proFieldProps:o,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},a))});const co=Kh;var uo=new Map;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var jt={},qh={};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Jh=function(e){return new Date().getTime()+e},Zh=function(e){var t=new Date().getTime(),n=new Date(e).getTime();return n<=t},Qh=function(e){return Boolean(e)&&Array.isArray(e)===!1&&typeof e=="object"},ki=function(e){return e&&e instanceof Function},ep=function(e){return typeof Storage<"u"&&e instanceof Storage?!0:[e==null?void 0:e.hasOwnProperty("getItem"),e==null?void 0:e.hasOwnProperty("removeItem"),e==null?void 0:e.hasOwnProperty("setItem"),ki(e==null?void 0:e.getItem),ki(e==null?void 0:e.removeItem),ki(e==null?void 0:e.setItem)].every(Boolean)},ur=typeof window<"u",dr=!1,tp=function(e,t){ur&&dr&&!ep(e)&&console.warn("mobx-persist-store: ".concat(t,` does not have a valid storage adaptor.

* Make sure the storage controller has 'getItem', 'setItem' and 'removeItem' methods."`))},np=function(e,t){ur&&dr&&e&&console.warn(`mobx-persist-store: 'makePersistable' was called was called with the same storage name "`.concat(t,`".

 * Make sure you call "stopPersisting" before recreating "`).concat(t,`" to avoid memory leaks. 
 * Or double check you did not have two stores with the same name.`))},rp=function(e,t){ur&&dr&&e&&console.warn("mobx-persist-store: The property '".concat(t,"' is computed and will not persist."))},ip=function(e,t){ur&&dr&&e&&console.warn("mobx-persist-store: The property '".concat(t,"' is an action and will not persist."))},We=function(e,t,n){n===void 0&&(n=""),e&&ur&&dr&&console.info("%c mobx-persist-store: (Debug Mode) ".concat(t," "),"background: #4B8CC5; color: black; display: block;",n)},op=function(e){return Array.isArray(e)?e.every(function(t){return Array.isArray(t)}):!1},Di=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(u){try{s(r.next(u))}catch(f){a(f)}}function c(u){try{s(r.throw(u))}catch(f){a(f)}}function s(u){u.done?o(u.value):i(u.value).then(l,c)}s((r=r.apply(e,t||[])).next())})},Fi=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ap=function(){function e(t){this.options=t}return e.prototype.setItem=function(t,n){var r;return Di(this,void 0,void 0,function(){var i,o,a,l,c,s,u;return Fi(this,function(f){switch(f.label){case 0:return i=this.options,o=i.stringify,a=o===void 0?!0:o,l=i.debugMode,c=l===void 0?!1:l,s=this.options.expireIn?Object.assign({},n,{__mps__:{expireInTimestamp:Jh(this.options.expireIn)}}):n,u=a?JSON.stringify(s):s,We(c,"".concat(t," - setItem:"),u),[4,(r=this.options.storage)===null||r===void 0?void 0:r.setItem(t,u)];case 1:return f.sent(),[2]}})})},e.prototype.getItem=function(t){var n,r;return Di(this,void 0,void 0,function(){var i,o,a,l,c,s,u,f;return Fi(this,function(d){switch(d.label){case 0:return i=this.options,o=i.removeOnExpiration,a=o===void 0?!0:o,l=i.debugMode,c=l===void 0?!1:l,[4,(n=this.options.storage)===null||n===void 0?void 0:n.getItem(t)];case 1:s=d.sent();try{u=JSON.parse(s)||{}}catch{u=s||{}}return f=Zh((r=u.__mps__)===null||r===void 0?void 0:r.expireInTimestamp),We(c,"".concat(t," - hasExpired"),f),f&&a?[4,this.removeItem(t)]:[3,3];case 2:d.sent(),d.label=3;case 3:return u=f?{}:u,We(c,"".concat(t," - (getItem):"),u),[2,u]}})})},e.prototype.removeItem=function(t){var n;return Di(this,void 0,void 0,function(){var r,i;return Fi(this,function(o){switch(o.label){case 0:return r=this.options.debugMode,i=r===void 0?!1:r,We(i,"".concat(t," - (removeItem): storage was removed")),[4,(n=this.options.storage)===null||n===void 0?void 0:n.removeItem(t)];case 1:return o.sent(),[2]}})})},e}(),sp=function(e){var t=["key","serialize","deserialize"];return Qh(e)?t.every(function(n){return e.hasOwnProperty(n)&&typeof n<"u"?!0:(We(!!jt.debugMode,"".concat(String(n)," not found in SerializableProperty"),{key:n,obj:e}),!1)}):(We(!!jt.debugMode,"passed value is not an object",{obj:e}),!1)},lp=function(e){return e.reduce(function(t,n){return typeof n=="string"?(t.push({key:n,serialize:function(r){return r},deserialize:function(r){return r}}),t):(sp(n)&&t.push(n),t)},[])},Rn=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(u){try{s(r.next(u))}catch(f){a(f)}}function c(u){try{s(r.throw(u))}catch(f){a(f)}}function s(u){u.done?o(u.value):i(u.value).then(l,c)}s((r=r.apply(e,t||[])).next())})},$n=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},cp=function(){function e(t,n,r){r===void 0&&(r={});var i,o,a,l,c,s,u;this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null,this.debugMode=!1,this.isHydrated=!1,this.isPersisting=!1,this.storageName="",this.target=t,this.storageName=n.name,this.properties=lp(n.properties),this.reactionOptions=Object.assign({fireImmediately:!0},qh,r),this.debugMode=(o=(i=n.debugMode)!==null&&i!==void 0?i:jt.debugMode)!==null&&o!==void 0?o:!1,this.storageAdapter=new ap({expireIn:(a=n.expireIn)!==null&&a!==void 0?a:jt.expireIn,removeOnExpiration:(c=(l=n.removeOnExpiration)!==null&&l!==void 0?l:jt.removeOnExpiration)!==null&&c!==void 0?c:!0,stringify:(u=(s=n.stringify)!==null&&s!==void 0?s:jt.stringify)!==null&&u!==void 0?u:!0,storage:n.storage?n.storage:jt.storage,debugMode:this.debugMode}),fd(this,{clearPersistedStore:Tn,hydrateStore:Tn,isHydrated:ya,isPersisting:ya,pausePersisting:Tn,startPersisting:Tn,stopPersisting:Tn},{autoBind:!0,deep:!1}),tp(this.storageAdapter.options.storage,this.storageName),We(this.debugMode,"".concat(this.storageName," - (makePersistable)"),{properties:this.properties,storageAdapter:this.storageAdapter,reactionOptions:this.reactionOptions})}return e.prototype.init=function(){return Rn(this,void 0,void 0,function(){return $n(this,function(t){switch(t.label){case 0:return[4,this.hydrateStore()];case 1:return t.sent(),this.startPersisting(),[2,this]}})})},e.prototype.hydrateStore=function(){return Rn(this,void 0,void 0,function(){var t,n,r,i=this;return $n(this,function(o){switch(o.label){case 0:return t=Boolean(this.cancelWatch),this.isPersisting&&this.pausePersisting(),Ni(function(){i.isHydrated=!1,We(i.debugMode,"".concat(i.storageName," - (hydrateStore) isHydrated:"),i.isHydrated)}),this.storageAdapter&&this.target?[4,this.storageAdapter.getItem(this.storageName)]:[3,2];case 1:n=o.sent(),r=this.target,n&&Ni(function(){i.properties.forEach(function(a){var l=[r.hasOwnProperty(a.key),typeof n[a.key]<"u"].every(Boolean);if(l){var c=n[a.key];r[a.key]instanceof va&&op(c)?r[a.key]=a.deserialize(new Map(c)):r[a.key]=a.deserialize(c)}})}),o.label=2;case 2:return Ni(function(){i.isHydrated=!0,We(i.debugMode,"".concat(i.storageName," - isHydrated:"),i.isHydrated)}),t&&this.startPersisting(),[2]}})})},e.prototype.startPersisting=function(){var t=this;if(!(!this.storageAdapter||!this.target||this.cancelWatch)){var n=this.target;this.cancelWatch=hd(function(){var r={};return t.properties.forEach(function(i){var o=pd(n,i.key),a=md(n[i.key]);if(rp(o,String(i.key)),ip(a,String(i.key)),!o&&!a){var l=i.serialize(n[i.key]);if(l instanceof va){var c=[];l.forEach(function(s,u){c.push([u,ba(s)])}),l=c}r[i.key]=ba(l)}}),r},function(r){return Rn(t,void 0,void 0,function(){return $n(this,function(i){switch(i.label){case 0:return this.storageAdapter?[4,this.storageAdapter.setItem(this.storageName,r)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},this.reactionOptions),this.isPersisting=!0,We(this.debugMode,"".concat(this.storageName," - (startPersisting) isPersisting:"),this.isPersisting)}},e.prototype.pausePersisting=function(){this.isPersisting=!1,We(this.debugMode,"".concat(this.storageName," - pausePersisting (isPersisting):"),this.isPersisting),this.cancelWatch&&(this.cancelWatch(),this.cancelWatch=null)},e.prototype.stopPersisting=function(){this.pausePersisting(),We(this.debugMode,"".concat(this.storageName," - (stopPersisting)")),uo.delete(this.target),this.cancelWatch=null,this.properties=[],this.reactionOptions={},this.storageAdapter=null,this.target=null},e.prototype.clearPersistedStore=function(){return Rn(this,void 0,void 0,function(){return $n(this,function(t){switch(t.label){case 0:return this.storageAdapter?(We(this.debugMode,"".concat(this.storageName," - (clearPersistedStore)")),[4,this.storageAdapter.removeItem(this.storageName)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.getPersistedStore=function(){return Rn(this,void 0,void 0,function(){return $n(this,function(t){return this.storageAdapter?(We(this.debugMode,"".concat(this.storageName," - (getPersistedStore)")),[2,this.storageAdapter.getItem(this.storageName)]):[2,null]})})},e}(),up=globalThis&&globalThis.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(u){try{s(r.next(u))}catch(f){a(f)}}function c(u){try{s(r.throw(u))}catch(f){a(f)}}function s(u){u.done?o(u.value):i(u.value).then(l,c)}s((r=r.apply(e,t||[])).next())})},dp=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(s){return function(u){return c([s,u])}}function c(s){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return n.label++,{value:s[1],done:!1};case 5:n.label++,i=s[1],s=[0];continue;case 7:s=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){n=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){n.label=s[1];break}if(s[0]===6&&n.label<o[1]){n.label=o[1],o=s;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(s);break}o[2]&&n.ops.pop(),n.trys.pop();continue}s=t.call(e,n)}catch(u){s=[6,u],i=0}finally{r=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},fp=function(e,t,n){return up(void 0,void 0,void 0,function(){var r,i;return dp(this,function(o){return r=new cp(e,t,n),i=Array.from(uo.values()).map(function(a){return a.storageName}).includes(r.storageName),np(i,r.storageName),uo.set(e,r),[2,r.init()]})})};class Nn{constructor({fileType:t,meta:n,parentFile:r}){tt(this,"parentFile");tt(this,"fileType");tt(this,"meta");this.fileType=t,this.meta=n,this.parentFile=r,Ft(this,{meta:_t,fileType:_t,parentFile:_t,updateMeta:Rt})}updateMeta(t){de.isFunction(t)?this.meta=t(this.meta):this.meta=t}subFileMapToJson(){return de.mapValues(this.subFileMap,t=>t.map(n=>n.toJSON()))}static fromJSON(){throw new Error(`【${this.name}】未实现formJson方法`)}static create(t,n){throw new Error(`【${this.name}】未实现create方法`)}}var B=(e=>(e.Text="Text",e.LongText="LongText",e.Date="Date",e.DateTime="DateTime",e.Enum="Enum",e.Number="Number",e.AutoNumber="AutoNumber",e.PhoneNumber="PhoneNumber",e.Email="Email",e.URL="URL",e.Image="Image",e))(B||{}),fi=(e=>(e.MasterDetail="MasterDetail",e.Lookup="Lookup",e))(fi||{}),Wn=(e=>(e.ManyToOne="ManyToOne",e.OneToOne="OneToOne",e))(Wn||{}),Kt=(e=>(e.ManyToMany="ManyToMany",e.ManyToOne="ManyToOne",e))(Kt||{}),rn=(e=>(e.App="App",e.Page="Page",e.Widget="Widget",e.View="View",e.Entity="Entity",e.EntityRelation="EntityRelation",e.EntityField="EntityField",e.Flow="Flow",e.FlowNode="FlowNode",e.FlowEdge="FlowEdge",e))(rn||{});class Zt extends Nn{constructor(n,r){super({fileType:rn.EntityField,meta:n,parentFile:r});tt(this,"subFileMap",{});Ft(this,{subFileMap:_t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return qe(()=>{const i=new Zt({...n,version:"0.0.1"},r);return r.entityFields.push(i),i})}static formJSON(n,r){return Zt.create(de.omit(n,"fileType"),r)}}class er extends Nn{constructor(n,r){super({fileType:rn.EntityRelation,meta:n,parentFile:r});tt(this,"subFileMap",{});Ft(this,{subFileMap:_t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return qe(()=>{const i=new er(n,r);return r.entityRelations.push(i),i})}static formJSON(n,r){return er.create(de.omit(n,"fileType"),r)}}const ri=class extends Nn{constructor(n,r){super({fileType:rn.Entity,meta:n,parentFile:r});tt(this,"subFileMap",{entityFields:[],entityRelations:[]});Ft(this,{subFileMap:_t,entityFields:Re,entityRelations:Re,deleteEntityField:Rt})}get entityFields(){return this.subFileMap.entityFields}deleteEntityField(n){const r=[...this.subFileMap.entityFields];this.subFileMap.entityFields.length=0,this.subFileMap.entityFields.push(...r.filter(i=>i.meta.id!==n))}get entityRelations(){return this.subFileMap.entityRelations}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return qe(()=>{const i=new ri({...n,version:"0.0.1"},r);return r.entities.push(i),i})}static formJSON(n,r){return qe(()=>{const i=ri.create(de.omit(n,["fileType","entityFields","entityRelations"]),r),o=n.entityFields.map(l=>Zt.formJSON(l,i)),a=n.entityRelations.map(l=>er.formJSON(l,i));return i.subFileMap.entityFields.push(...o),i.subFileMap.entityRelations.push(...a),i})}};let Pe=ri;tt(Pe,"getEntityFieldTypeLabel",n=>{switch(n){case B.AutoNumber:return"自动编号";case B.Date:return"日期";case B.DateTime:return"日期时间";case B.Number:return"数字";case B.Email:return"邮箱";case B.Enum:return"枚举";case B.LongText:return"长文本";case B.Text:return"单行文本";case B.PhoneNumber:return"手机号";case B.URL:return"网址";case B.Image:return"图片";default:return"未知"}});function hp(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Li=()=>!1,jo=Object.assign,Rl=Array.isArray,Mt=e=>typeof e=="string",pp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},mp=/\B([A-Z])/g,gp=pp(e=>e.replace(mp,"-$1").toLowerCase());function yp(e){throw e}function vp(e){}function hn(e,t,n,r){const i=e,o=new SyntaxError(String(i));return o.code=e,o.loc=t,o}const fo=Symbol(""),bp=Symbol(""),wp=Symbol(""),xp=Symbol(""),Sp=Symbol(""),Lr=Symbol(""),Ep=Symbol(""),_p=Symbol(""),Mp=Symbol(""),Cp=Symbol(""),$l=Symbol(""),Np=Symbol(""),Tp=Symbol(""),Pp=Symbol(""),La=Symbol(""),Ap=Symbol(""),Ol=Symbol(""),Ip=Symbol(""),Rp=Symbol(""),$p=Symbol(""),pt={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Op(e,t=pt){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function ho(e,t,n,r,i,o,a,l=!1,c=!1,s=!1,u=pt){return e&&(l?(e.helper(Lr),e.helper(Ur(e.inSSR,s))):e.helper(Wr(e.inSSR,s)),a&&e.helper(Np)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:o,directives:a,isBlock:l,disableTracking:c,isComponent:s,loc:u}}function cn(e,t=pt){return{type:15,loc:t,properties:e}}function kl(e,t){return{type:16,loc:pt,key:Mt(e)?ct(e,!0):e,value:t}}function ct(e,t=!1,n=pt,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function zi(e,t=pt){return{type:8,loc:t,children:e}}function zr(e,t=[],n=pt){return{type:14,loc:n,callee:e,arguments:t}}function za(e,t=void 0,n=!1,r=!1,i=pt){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function kp(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:pt}}function Dp(e){return{type:21,body:e,loc:pt}}const Fp=e=>e.type===4&&e.isStatic,gr=(e,t)=>e===t||e===gp(t);function Lp(e){if(gr(e,"Teleport"))return bp;if(gr(e,"Suspense"))return wp;if(gr(e,"KeepAlive"))return xp;if(gr(e,"BaseTransition"))return Sp}function zp(e,t,n){const i={source:e.source.slice(t,t+n),start:Br(e.start,e.source,t),end:e.end};return n!=null&&(i.end=Br(e.start,e.source,t+n)),i}function Br(e,t,n=t.length){return Hr(jo({},e),t,n)}function Hr(e,t,n=t.length){let r=0,i=-1;for(let o=0;o<n;o++)t.charCodeAt(o)===10&&(r++,i=o);return e.offset+=n,e.line+=r,e.column=i===-1?e.column+n:n-i,e}function Dl(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&(n||i.exp)&&(Mt(t)?i.name===t:t.test(i.name)))return i}}function Fl(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const o=e.props[i];if(o.type===6){if(n)continue;if(o.name===t&&(o.value||r))return o}else if(o.name==="bind"&&(o.exp||r)&&Ll(o.arg,t))return o}}function Ll(e,t){return!!(e&&Fp(e)&&e.content===t)}function Bp(e){return e.type===7&&e.name==="slot"}function zl(e){return e.type===1&&e.tagType===3}function Ba(e){return e.type===1&&e.tagType===2}function Wr(e,t){return e||t?Mp:Cp}function Ur(e,t){return e||t?Ep:_p}const Hp=new Set([Ap,Ol]);function Bl(e,t=[]){if(e&&!Mt(e)&&e.type===14){const n=e.callee;if(!Mt(n)&&Hp.has(n))return Bl(e.arguments[0],t.concat(e))}return[e,t]}function Vr(e,t,n){let r,i=e.type===13?e.props:e.arguments[2],o=[],a;if(i&&!Mt(i)&&i.type===14){const l=Bl(i);i=l[0],o=l[1],a=o[o.length-1]}if(i==null||Mt(i))r=cn([t]);else if(i.type===14){const l=i.arguments[0];!Mt(l)&&l.type===15?Ha(t,l)||l.properties.unshift(t):i.callee===Ip?r=zr(n.helper(La),[cn([t]),i]):i.arguments.unshift(cn([t])),!r&&(r=i)}else i.type===15?(Ha(t,i)||i.properties.unshift(t),r=i):(r=zr(n.helper(La),[cn([t]),i]),a&&a.callee===Ol&&(a=o[o.length-2]));e.type===13?a?a.arguments[0]=r:e.props=r:a?a.arguments[0]=r:e.arguments[2]=r}function Ha(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(i=>i.key.type===4&&i.key.content===r)}return n}function Wp(e){return e.type===14&&e.callee===Rp?e.arguments[1].returns:e}function Up(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(Wr(r,e.isComponent)),t(Lr),t(Ur(r,e.isComponent)))}function Wa(e,t){const n=t.options?t.options.compatConfig:t.compatConfig,r=n&&n[e];return e==="MODE"?r||3:r}function Hl(e,t){const n=Wa("MODE",t),r=Wa(e,t);return n===3?r===!0:r!==!1}function jr(e,t,n,...r){return Hl(e,t)}const Vp=/&(gt|lt|amp|apos|quot);/g,jp={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Ua={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Li,isPreTag:Li,isCustomElement:Li,decodeEntities:e=>e.replace(Vp,(t,n)=>jp[n]),onError:yp,onWarn:vp,comments:!1};function Xp(e,t={}){const n=Yp(e,t),r=Je(n);return Op(Xo(n,0,[]),at(n,r))}function Yp(e,t){const n=jo({},Ua);let r;for(r in t)n[r]=t[r]===void 0?Ua[r]:t[r];return{options:n,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:n.onWarn}}function Xo(e,t,n){const r=hi(n),i=r?r.ns:0,o=[];for(;!nm(e,t,n);){const l=e.source;let c;if(t===0||t===1){if(!e.inVPre&&Le(l,e.options.delimiters[0]))c=em(e,t);else if(t===0&&l[0]==="<")if(l.length===1)me(e,5,1);else if(l[1]==="!")Le(l,"<!--")?c=Kp(e):Le(l,"<!DOCTYPE")?c=On(e):Le(l,"<![CDATA[")?i!==0?c=Gp(e,n):(me(e,1),c=On(e)):(me(e,11),c=On(e));else if(l[1]==="/")if(l.length===2)me(e,5,2);else if(l[2]===">"){me(e,14,2),Ae(e,3);continue}else if(/[a-z]/i.test(l[2])){me(e,23),po(e,1,r);continue}else me(e,12,2),c=On(e);else/[a-z]/i.test(l[1])?(c=qp(e,n),Hl("COMPILER_NATIVE_TEMPLATE",e)&&c&&c.tag==="template"&&!c.props.some(s=>s.type===7&&Wl(s.name))&&(c=c.children)):l[1]==="?"?(me(e,21,1),c=On(e)):me(e,12,1)}if(c||(c=tm(e,t)),Rl(c))for(let s=0;s<c.length;s++)Va(o,c[s]);else Va(o,c)}let a=!1;if(t!==2&&t!==1){const l=e.options.whitespace!=="preserve";for(let c=0;c<o.length;c++){const s=o[c];if(s.type===2)if(e.inPre)s.content=s.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(s.content))l&&(s.content=s.content.replace(/[\t\r\n\f ]+/g," "));else{const u=o[c-1],f=o[c+1];!u||!f||l&&(u.type===3&&f.type===3||u.type===3&&f.type===1||u.type===1&&f.type===3||u.type===1&&f.type===1&&/[\r\n]/.test(s.content))?(a=!0,o[c]=null):s.content=" "}else s.type===3&&!e.options.comments&&(a=!0,o[c]=null)}if(e.inPre&&r&&e.options.isPreTag(r.tag)){const c=o[0];c&&c.type===2&&(c.content=c.content.replace(/^\r?\n/,""))}}return a?o.filter(Boolean):o}function Va(e,t){if(t.type===2){const n=hi(e);if(n&&n.type===2&&n.loc.end.offset===t.loc.start.offset){n.content+=t.content,n.loc.end=t.loc.end,n.loc.source+=t.loc.source;return}}e.push(t)}function Gp(e,t){Ae(e,9);const n=Xo(e,3,t);return e.source.length===0?me(e,6):Ae(e,3),n}function Kp(e){const t=Je(e);let n;const r=/--(\!)?>/.exec(e.source);if(!r)n=e.source.slice(4),Ae(e,e.source.length),me(e,7);else{r.index<=3&&me(e,0),r[1]&&me(e,10),n=e.source.slice(4,r.index);const i=e.source.slice(0,r.index);let o=1,a=0;for(;(a=i.indexOf("<!--",o))!==-1;)Ae(e,a-o+1),a+4<i.length&&me(e,16),o=a+1;Ae(e,r.index+r[0].length-o+1)}return{type:3,content:n,loc:at(e,t)}}function On(e){const t=Je(e),n=e.source[1]==="?"?1:2;let r;const i=e.source.indexOf(">");return i===-1?(r=e.source.slice(n),Ae(e,e.source.length)):(r=e.source.slice(n,i),Ae(e,i+1)),{type:3,content:r,loc:at(e,t)}}function qp(e,t){const n=e.inPre,r=e.inVPre,i=hi(t),o=po(e,0,i),a=e.inPre&&!n,l=e.inVPre&&!r;if(o.isSelfClosing||e.options.isVoidTag(o.tag))return a&&(e.inPre=!1),l&&(e.inVPre=!1),o;t.push(o);const c=e.options.getTextMode(o,i),s=Xo(e,c,t);t.pop();{const u=o.props.find(f=>f.type===6&&f.name==="inline-template");if(u&&jr("COMPILER_INLINE_TEMPLATE",e,u.loc)){const f=at(e,o.loc.end);u.value={type:2,content:f.source,loc:f}}}if(o.children=s,mo(e.source,o.tag))po(e,1,i);else if(me(e,24,0,o.loc.start),e.source.length===0&&o.tag.toLowerCase()==="script"){const u=s[0];u&&Le(u.loc.source,"<!--")&&me(e,8)}return o.loc=at(e,o.loc.start),a&&(e.inPre=!1),l&&(e.inVPre=!1),o}const Wl=hp("if,else,else-if,for,slot");function po(e,t,n){const r=Je(e),i=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),o=i[1],a=e.options.getNamespace(o,n);Ae(e,i[0].length),tr(e);const l=Je(e),c=e.source;e.options.isPreTag(o)&&(e.inPre=!0);let s=ja(e,t);t===0&&!e.inVPre&&s.some(d=>d.type===7&&d.name==="pre")&&(e.inVPre=!0,jo(e,l),e.source=c,s=ja(e,t).filter(d=>d.name!=="v-pre"));let u=!1;if(e.source.length===0?me(e,9):(u=Le(e.source,"/>"),t===1&&u&&me(e,4),Ae(e,u?2:1)),t===1)return;let f=0;return e.inVPre||(o==="slot"?f=2:o==="template"?s.some(d=>d.type===7&&Wl(d.name))&&(f=3):Jp(o,s,e)&&(f=1)),{type:1,ns:a,tag:o,tagType:f,props:s,isSelfClosing:u,children:[],loc:at(e,r),codegenNode:void 0}}function Jp(e,t,n){const r=n.options;if(r.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||Lp(e)||r.isBuiltInComponent&&r.isBuiltInComponent(e)||r.isNativeTag&&!r.isNativeTag(e))return!0;for(let i=0;i<t.length;i++){const o=t[i];if(o.type===6){if(o.name==="is"&&o.value){if(o.value.content.startsWith("vue:"))return!0;if(jr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}else{if(o.name==="is")return!0;if(o.name==="bind"&&Ll(o.arg,"is")&&jr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}}function ja(e,t){const n=[],r=new Set;for(;e.source.length>0&&!Le(e.source,">")&&!Le(e.source,"/>");){if(Le(e.source,"/")){me(e,22),Ae(e,1),tr(e);continue}t===1&&me(e,3);const i=Zp(e,r);i.type===6&&i.value&&i.name==="class"&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),t===0&&n.push(i),/^[^\t\r\n\f />]/.test(e.source)&&me(e,15),tr(e)}return n}function Zp(e,t){const n=Je(e),i=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(i)&&me(e,2),t.add(i),i[0]==="="&&me(e,19);{const l=/["'<]/g;let c;for(;c=l.exec(i);)me(e,17,c.index)}Ae(e,i.length);let o;/^[\t\r\n\f ]*=/.test(e.source)&&(tr(e),Ae(e,1),tr(e),o=Qp(e),o||me(e,13));const a=at(e,n);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(i)){const l=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(i);let c=Le(i,"."),s=l[1]||(c||Le(i,":")?"bind":Le(i,"@")?"on":"slot"),u;if(l[2]){const d=s==="slot",h=i.lastIndexOf(l[2]),x=at(e,Xa(e,n,h),Xa(e,n,h+l[2].length+(d&&l[3]||"").length));let v=l[2],S=!0;v.startsWith("[")?(S=!1,v.endsWith("]")?v=v.slice(1,v.length-1):(me(e,27),v=v.slice(1))):d&&(v+=l[3]||""),u={type:4,content:v,isStatic:S,constType:S?3:0,loc:x}}if(o&&o.isQuoted){const d=o.loc;d.start.offset++,d.start.column++,d.end=Br(d.start,o.content),d.source=d.source.slice(1,-1)}const f=l[3]?l[3].slice(1).split("."):[];return c&&f.push("prop"),s==="bind"&&u&&f.includes("sync")&&jr("COMPILER_V_BIND_SYNC",e,a,u.loc.source)&&(s="model",f.splice(f.indexOf("sync"),1)),{type:7,name:s,exp:o&&{type:4,content:o.content,isStatic:!1,constType:0,loc:o.loc},arg:u,modifiers:f,loc:a}}return!e.inVPre&&Le(i,"v-")&&me(e,26),{type:6,name:i,value:o&&{type:2,content:o.content,loc:o.loc},loc:a}}function Qp(e){const t=Je(e);let n;const r=e.source[0],i=r==='"'||r==="'";if(i){Ae(e,1);const o=e.source.indexOf(r);o===-1?n=Yn(e,e.source.length,4):(n=Yn(e,o,4),Ae(e,1))}else{const o=/^[^\t\r\n\f >]+/.exec(e.source);if(!o)return;const a=/["'<=`]/g;let l;for(;l=a.exec(o[0]);)me(e,18,l.index);n=Yn(e,o[0].length,4)}return{content:n,isQuoted:i,loc:at(e,t)}}function em(e,t){const[n,r]=e.options.delimiters,i=e.source.indexOf(r,n.length);if(i===-1){me(e,25);return}const o=Je(e);Ae(e,n.length);const a=Je(e),l=Je(e),c=i-n.length,s=e.source.slice(0,c),u=Yn(e,c,t),f=u.trim(),d=u.indexOf(f);d>0&&Hr(a,s,d);const h=c-(u.length-f.length-d);return Hr(l,s,h),Ae(e,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:f,loc:at(e,a,l)},loc:at(e,o)}}function tm(e,t){const n=t===3?["]]>"]:["<",e.options.delimiters[0]];let r=e.source.length;for(let a=0;a<n.length;a++){const l=e.source.indexOf(n[a],1);l!==-1&&r>l&&(r=l)}const i=Je(e);return{type:2,content:Yn(e,r,t),loc:at(e,i)}}function Yn(e,t,n){const r=e.source.slice(0,t);return Ae(e,t),n===2||n===3||!r.includes("&")?r:e.options.decodeEntities(r,n===4)}function Je(e){const{column:t,line:n,offset:r}=e;return{column:t,line:n,offset:r}}function at(e,t,n){return n=n||Je(e),{start:t,end:n,source:e.originalSource.slice(t.offset,n.offset)}}function hi(e){return e[e.length-1]}function Le(e,t){return e.startsWith(t)}function Ae(e,t){const{source:n}=e;Hr(e,n,t),e.source=n.slice(t)}function tr(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Ae(e,t[0].length)}function Xa(e,t,n){return Br(t,e.originalSource.slice(t.offset,n),n)}function me(e,t,n,r=Je(e)){n&&(r.offset+=n,r.column+=n),e.options.onError(hn(t,{start:r,end:r,source:""}))}function nm(e,t,n){const r=e.source;switch(t){case 0:if(Le(r,"</")){for(let i=n.length-1;i>=0;--i)if(mo(r,n[i].tag))return!0}break;case 1:case 2:{const i=hi(n);if(i&&mo(r,i.tag))return!0;break}case 3:if(Le(r,"]]>"))return!0;break}return!r}function mo(e,t){return Le(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function rm(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];Mt(i)||(t.parent=e,t.childIndex=n,t.onNodeRemoved=r,Yo(i,t))}}function Yo(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let o=0;o<n.length;o++){const a=n[o](e,t);if(a&&(Rl(a)?r.push(...a):r.push(a)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper($l);break;case 5:t.ssr||t.helper(Pp);break;case 9:for(let o=0;o<e.branches.length;o++)Yo(e.branches[o],t);break;case 10:case 11:case 1:case 0:rm(e,t);break}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function Ul(e,t){const n=Mt(e)?r=>r===e:r=>e.test(r);return(r,i)=>{if(r.type===1){const{props:o}=r;if(r.tagType===3&&o.some(Bp))return;const a=[];for(let l=0;l<o.length;l++){const c=o[l];if(c.type===7&&n(c.name)){o.splice(l,1),l--;const s=t(r,c,i);s&&a.push(s)}}return a}}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");Ul(/^(if|else|else-if)$/,(e,t,n)=>im(e,t,n,(r,i,o)=>{const a=n.parent.children;let l=a.indexOf(r),c=0;for(;l-->=0;){const s=a[l];s&&s.type===9&&(c+=s.branches.length)}return()=>{if(o)r.codegenNode=Ga(i,c,n);else{const s=om(r.codegenNode);s.alternate=Ga(i,c+r.branches.length-1,n)}}}));function im(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(hn(28,t.loc)),t.exp=ct("true",!1,i)}if(t.name==="if"){const i=Ya(e,t),o={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(o),r)return r(o,i,!0)}else{const i=n.parent.children;let o=i.indexOf(e);for(;o-->=-1;){const a=i[o];if(a&&a.type===3){n.removeNode(a);continue}if(a&&a.type===2&&!a.content.trim().length){n.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&n.onError(hn(30,e.loc)),n.removeNode();const l=Ya(e,t);a.branches.push(l);const c=r&&r(a,l,!1);Yo(l,n),c&&c(),n.currentNode=null}else n.onError(hn(30,e.loc));break}}}function Ya(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!Dl(e,"for")?e.children:[e],userKey:Fl(e,"key"),isTemplateIf:n}}function Ga(e,t,n){return e.condition?kp(e.condition,Ka(e,t,n),zr(n.helper($l),['""',"true"])):Ka(e,t,n)}function Ka(e,t,n){const{helper:r}=n,i=kl("key",ct(`${t}`,!1,pt,2)),{children:o}=e,a=o[0];if(o.length!==1||a.type!==1)if(o.length===1&&a.type===11){const c=a.codegenNode;return Vr(c,i,n),c}else{let c=64;return ho(n,r(fo),cn([i]),o,c+"",void 0,void 0,!0,!1,!1,e.loc)}else{const c=a.codegenNode,s=Wp(c);return s.type===13&&Up(s,n),Vr(s,i,n),c}}function om(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}Ul("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return am(e,t,n,o=>{const a=zr(r(Tp),[o.source]),l=zl(e),c=Dl(e,"memo"),s=Fl(e,"key"),u=s&&(s.type===6?ct(s.value.content,!0):s.exp),f=s?kl("key",u):null,d=o.source.type===4&&o.source.constType>0,h=d?64:s?128:256;return o.codegenNode=ho(n,r(fo),void 0,a,h+"",void 0,void 0,!0,!d,!1,e.loc),()=>{let x;const{children:v}=o,S=v.length!==1||v[0].type!==1,p=Ba(e)?e:l&&e.children.length===1&&Ba(e.children[0])?e.children[0]:null;if(p?(x=p.codegenNode,l&&f&&Vr(x,f,n)):S?x=ho(n,r(fo),f?cn([f]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(x=v[0].codegenNode,l&&f&&Vr(x,f,n),x.isBlock!==!d&&(x.isBlock?(i(Lr),i(Ur(n.inSSR,x.isComponent))):i(Wr(n.inSSR,x.isComponent))),x.isBlock=!d,x.isBlock?(r(Lr),r(Ur(n.inSSR,x.isComponent))):r(Wr(n.inSSR,x.isComponent))),c){const w=za(Ja(o.parseResult,[ct("_cached")]));w.body=Dp([zi(["const _memo = (",c.exp,")"]),zi(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${n.helperString($p)}(_cached, _memo)) return _cached`]),zi(["const _item = ",x]),ct("_item.memo = _memo"),ct("return _item")]),a.arguments.push(w,ct("_cache"),ct(String(n.cached++)))}else a.arguments.push(za(Ja(o.parseResult),x,!0))}})});function am(e,t,n,r){if(!t.exp){n.onError(hn(31,t.loc));return}const i=cm(t.exp);if(!i){n.onError(hn(32,t.loc));return}const{addIdentifiers:o,removeIdentifiers:a,scopes:l}=n,{source:c,value:s,key:u,index:f}=i,d={type:11,loc:t.loc,source:c,valueAlias:s,keyAlias:u,objectIndexAlias:f,parseResult:i,children:zl(e)?e.children:[e]};n.replaceNode(d),l.vFor++;const h=r&&r(d);return()=>{l.vFor--,h&&h()}}const sm=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,qa=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,lm=/^\(|\)$/g;function cm(e,t){const n=e.loc,r=e.content,i=r.match(sm);if(!i)return;const[,o,a]=i,l={source:yr(n,a.trim(),r.indexOf(a,o.length)),value:void 0,key:void 0,index:void 0};let c=o.trim().replace(lm,"").trim();const s=o.indexOf(c),u=c.match(qa);if(u){c=c.replace(qa,"").trim();const f=u[1].trim();let d;if(f&&(d=r.indexOf(f,s+c.length),l.key=yr(n,f,d)),u[2]){const h=u[2].trim();h&&(l.index=yr(n,h,r.indexOf(h,l.key?d+f.length:s+c.length)))}}return c&&(l.value=yr(n,c,s)),l}function yr(e,t,n){return ct(t,!1,zp(e,n,t.length))}function Ja({value:e,key:t,index:n},r=[]){return um([e,t,n,...r])}function um(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||ct("_".repeat(r+1),!1))}const dm=/[\s\S]*{{[\s\S]*}}[\s\S]*/m,fm=e=>typeof e=="string"&&dm.test(e);var go=(e=>(e[e.ROOT=0]="ROOT",e[e.ELEMENT=1]="ELEMENT",e[e.TEXT=2]="TEXT",e[e.COMMENT=3]="COMMENT",e[e.SIMPLE_EXPRESSION=4]="SIMPLE_EXPRESSION",e[e.INTERPOLATION=5]="INTERPOLATION",e[e.ATTRIBUTE=6]="ATTRIBUTE",e[e.DIRECTIVE=7]="DIRECTIVE",e[e.COMPOUND_EXPRESSION=8]="COMPOUND_EXPRESSION",e[e.IF=9]="IF",e[e.IF_BRANCH=10]="IF_BRANCH",e[e.FOR=11]="FOR",e[e.TEXT_CALL=12]="TEXT_CALL",e[e.VNODE_CALL=13]="VNODE_CALL",e[e.JS_CALL_EXPRESSION=14]="JS_CALL_EXPRESSION",e[e.JS_OBJECT_EXPRESSION=15]="JS_OBJECT_EXPRESSION",e[e.JS_PROPERTY=16]="JS_PROPERTY",e[e.JS_ARRAY_EXPRESSION=17]="JS_ARRAY_EXPRESSION",e[e.JS_FUNCTION_EXPRESSION=18]="JS_FUNCTION_EXPRESSION",e[e.JS_CONDITIONAL_EXPRESSION=19]="JS_CONDITIONAL_EXPRESSION",e[e.JS_CACHE_EXPRESSION=20]="JS_CACHE_EXPRESSION",e[e.JS_BLOCK_STATEMENT=21]="JS_BLOCK_STATEMENT",e[e.JS_TEMPLATE_LITERAL=22]="JS_TEMPLATE_LITERAL",e[e.JS_IF_STATEMENT=23]="JS_IF_STATEMENT",e[e.JS_ASSIGNMENT_EXPRESSION=24]="JS_ASSIGNMENT_EXPRESSION",e[e.JS_SEQUENCE_EXPRESSION=25]="JS_SEQUENCE_EXPRESSION",e[e.JS_RETURN_STATEMENT=26]="JS_RETURN_STATEMENT",e))(go||{});class Qt extends Nn{constructor(n,r){super({fileType:rn.Widget,meta:n,parentFile:r});tt(this,"subFileMap",{});Ft(this,{subFileMap:_t,flattenedMetaValMap:Re.struct})}get flattenedMetaValMap(){return de.mapValues(this.meta.props,n=>{if(fm(n)){const r=Xp(n);return{type:"Expression",raw:n,ast:r,evalString:`\`${r.children.map(i=>{if(i.type===go.TEXT)return i.content;if(i.type===go.INTERPOLATION){const o=i.content.content;return o?`\${${o}}`:""}return i.loc.source}).join("")}\``}}else return{type:"Normal",raw:n}})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return qe(()=>{const i=new Qt({...n,version:"0.0.1"},r);return r.widgets.push(i),i})}static formJSON(n,r){return Qt.create(de.omit(n,"fileType"),r)}}class bn extends Nn{constructor(n,r){super({fileType:rn.App,meta:n,parentFile:r});tt(this,"subFileMap",{widgets:[]});Ft(this,{subFileMap:_t,widgets:Re,widgetMap:Re.struct,widgetRelationById:Re.struct,addWidget:Rt,deleteWidget:Rt,updateWidgets:Rt,moveWidget:Rt})}get widgets(){return this.subFileMap.widgets}get widgetMap(){return de.keyBy(this.subFileMap.widgets,n=>n.meta.id)}get widgetRelationById(){return this.widgets.reduce((n,r)=>{const i=r.meta.id;Reflect.has(n,i)||(n[i]={props:r.meta,slotPath:""});const o=n[i];return de.isEmpty(r.meta.slots)||Object.entries(r.meta.slots).forEach(([a,l])=>{l.forEach(c=>{Reflect.has(n,c)?(n[c].parent=o,n[c].slotPath=a):n[c]={props:this.widgetMap[c].meta,parent:o,slotPath:a}})}),n},{})}addWidget({sourceWidgetMeta:n,targetPosition:r,targetSlotPath:i,targetWidgetId:o}){const a=this.widgetMap[o];if(!a)return;const l=Qt.create(n,this);a.meta.slots[i].splice(r,0,l.meta.id)}moveWidget({sourceWidgetId:n,targetWidgetId:r,targetPosition:i,targetSlotPath:o}){this.updateWidgets(wa(a=>{let l=-1;a.forEach(c=>{var s,u;de.isObject(c.meta.slots)&&Object.keys(c.meta.slots).forEach(f=>{l===-1&&(l=c.meta.slots[f].findIndex(d=>d===n),l!==-1&&c.meta.slots[f].splice(l,1))}),c.meta.id===r&&(((u=(s=this.widgetRelationById[n])==null?void 0:s.parent)==null?void 0:u.props.id)===r&&this.widgetRelationById[n].slotPath===o?c.meta.slots[o].splice(l<i?i-1:i,0,n):c.meta.slots[o].splice(i,0,n))})}))}deleteWidget(n,r=!0){this.updateWidgets(wa(i=>{i.forEach(l=>{de.isObject(l.meta.slots)&&Object.keys(l.meta.slots).forEach(c=>{const s=l.meta.slots[c].findIndex(u=>u===n);s!==-1&&l.meta.slots[c].splice(s,1)})});const o=[n],a=[i.find(l=>l.meta.id===n)];for(;!de.isEmpty(a);){const l=a.shift();de.isObject(l.slots)&&Object.values(l.slots).forEach(c=>{c.forEach(s=>{o.push(s),a.push(i.find(u=>u.meta.id===s))})})}o.forEach(l=>{const c=i.findIndex(s=>s.meta.id===l);c!==-1&&i.splice(c,1)})}))}updateWidgets(n){const r=[...this.subFileMap.widgets];this.subFileMap.widgets.length=0,de.isFunction(n)?this.subFileMap.widgets.push(...n(r)):this.subFileMap.widgets.push(...n)}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return qe(()=>{const i=new bn({...n,version:"0.0.1"},r);return r.pages.push(i),i})}static formJSON(n,r){return qe(()=>{const i=bn.create(de.omit(n,["fileType","widgets"]),r),o=n.widgets.map(a=>Qt.formJSON(a,i));return i.subFileMap.widgets.push(...o),i})}}class Xr extends Nn{constructor(n){super({fileType:rn.App,meta:n,parentFile:null});tt(this,"subFileMap",{pages:[],entities:[]});Ft(this,{subFileMap:_t,entities:Re.struct,pages:Re.struct,entityMap:Re.struct,entityRelationMap:Re.struct,entityRelationsByTargetEntityNameMap:Re.struct,entityRelationsBySourceEntityNameMap:Re.struct,deleteEntity:Rt,deletePage:Rt}),fp(this,{name:`${n.id}`,properties:[{key:"meta",serialize:()=>this.toJSON(),deserialize:()=>({})}],storage:window.localStorage})}get pages(){return this.subFileMap.pages}set pages(n){qe(()=>{this.subFileMap.pages.length=0,this.subFileMap.pages.push(...n)})}deletePage(n){const r=[...this.subFileMap.pages];this.subFileMap.pages.length=0,this.subFileMap.pages.push(...r.filter(i=>i.meta.id!==n))}get entities(){return this.subFileMap.entities}set entities(n){qe(()=>{this.subFileMap.entities.length=0,this.subFileMap.entities.push(...n)})}get entityMap(){return de.keyBy(this.entities,n=>n.meta.id)}deleteEntity(n){const r=[...this.subFileMap.entities];this.subFileMap.entities.length=0,this.subFileMap.entities.push(...r.filter(i=>i.meta.id!==n))}get entityRelationMap(){return this.entities.reduce((n,r)=>({...n,...de.keyBy(r.subFileMap.entityRelations,i=>i.meta.id)}),{})}get entityRelationsByTargetEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.targetEntity;return de.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}get entityRelationsBySourceEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.sourceEntity;return de.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n){return new Xr(n)}static formJSON(n){return qe(()=>{const r=Xr.create({name:n.name,id:n.id,version:n.version}),i=n.entities.map(a=>Pe.formJSON(a,r)),o=n.pages.map(a=>bn.formJSON(a,r));return qe(()=>{r.subFileMap.entities.push(...i),r.subFileMap.pages.push(...o)}),r})}}class hm{constructor(t){tt(this,"root");this.root=t,Ft(this,{app:Re,pageMap:Re.struct,entityMap:Re.struct,widgetMap:Re.struct,entityFieldMap:Re.struct,entityRelationMap:Re.struct})}get app(){return this.root}get pageMap(){return new Map(this.app.pages.map(t=>[t.meta.id,t]))}get entityMap(){return new Map(this.app.entities.map(t=>[t.meta.id,t]))}get widgetMap(){return this.app.pages.reduce((t,n)=>({...t,...n.widgetMap}),{})}get entityFieldMap(){return new Map(de.flatten(this.app.entities.map(t=>t.subFileMap.entityFields.map(n=>[n.meta.id,n]))))}get entityRelationMap(){return new Map(de.flatten(this.app.entities.map(t=>t.subFileMap.entityRelations.map(n=>[n.meta.id,n]))))}}gd({useProxies:"never",enforceActions:"always",reactionRequiresObservable:!0});var dt=(e=>(e.Page="Page",e.Entity="Entity",e))(dt||{});const pm=()=>g("div",{children:"ModuleManagerEntity"}),mm=({searchVal:e,itemAddRef:t})=>{const{app:n}=ht(),{appId:r,pageId:i}=tn(),o=Bt(),l=ht().app.pages.filter(u=>u.meta.name.includes(e)),[c]=Vt.useForm(),s=u=>g(bd,{children:()=>g(ao.Item,{className:Bi.listItem,onClick:()=>{o(vn(Be.PAGE,{appId:r,pageId:u.meta.id}))},children:G("div",{className:Bi.listItemContent,children:[u.meta.id===i?g(Ue.Link,{children:u.meta.name}):g(Ue.Text,{children:u.meta.name}),g(wd,{trigger:["hover"],menu:{onClick:({key:f})=>{switch(f){case"Delete":n.deletePage(u.meta.id);break}},items:[{label:g(Ue.Text,{children:"复制"}),key:"Copy"},{label:g(Ue.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:g(pf,{className:`${Bi.moreAction} mm_p-list_item_more_action`})},u.meta.id)]})})});return G(ve,{children:[t&&qs.createPortal(g(yd,{form:c,layout:"horizontal",title:"创建页面",modalProps:{mask:!1},onFinish:async u=>{await c.validateFields(),console.log(u);const f=Oe(),d=bn.create({id:Oe(),name:u.name,rootWidgetId:f},n);return Qt.create({...si.mrSchemeToDefaultJson(Js.jsonPropsSchema),id:f,slots:{children:[]}},d),c.resetFields(),!0},trigger:g(it,{type:"text",shape:"circle",size:"small",children:g(vd,{})}),children:g(St,{rules:[{required:!0,message:"请输入页面名称"}],name:"name",label:"页面名称",placeholder:"请输入页面名称"})}),t),g(ao,{dataSource:l,size:"small",rowKey:u=>u.meta.id,renderItem:s})]})},gm=Lt(mm),Bi={listItem:ie({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:ie({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:ie({name:"eivff4",styles:"display:none"})},ym=({visible:e,module:t,onClose:n})=>{const r=xd(t).with(dt.Page,()=>"页面").with(dt.Entity,()=>"数据模型").otherwise(()=>"");m.useEffect(()=>{o("")},[t]);const[i,o]=m.useState(""),a=m.useRef(null),[l,c]=m.useState(!1);return m.useEffect(()=>{e&&c(!0)},[e]),g("div",{className:Hi.drawerWrapper,children:g(Sd,{zIndex:8,title:G("div",{children:[G("div",{className:Hi.drawerTitleWrapper,children:[g("span",{children:r}),g("span",{ref:a})]}),g(Hn,{onChange:s=>o(s.target.value),value:i,allowClear:!0,placeholder:"搜索"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:Hi.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:n,open:e,children:l&&G(ve,{children:[t===dt.Page&&g(gm,{itemAddRef:a.current,searchVal:i}),t===dt.Entity&&g(pm,{itemAddRef:a.current,searchVal:i})]})})})},Hi={drawerWrapper:ie({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:ie({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:ie({name:"a4hmbt",styles:"position:absolute"})},vm=()=>G($t.Header,{className:Wi.header,children:[g("div",{className:Wi.headerLogoWrapper,children:g("img",{src:"/modou.svg",alt:""})}),G("div",{className:Wi.headerRight,children:[g(it,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"预览"}),g(Zs,{src:"https://api.multiavatar.com/modou.png"})]})]}),Wi={header:ie({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:ie({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:ie({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},bm=()=>{const e=tn(),t=Bt(),{app:n}=ht(),r=de.isEmpty(n.pages);return m.useEffect(()=>{var i,o,a,l;r?de.isEmpty(n.entities)||t(vn(Be.Entity,{...e,entityId:(l=(a=de.head(n.entities))==null?void 0:a.meta)==null?void 0:l.id}),{replace:!0}):t(vn(Be.PAGE,{...e,pageId:(o=(i=de.head(n.pages))==null?void 0:i.meta)==null?void 0:o.id}),{replace:!0})},[n.entities,n.pages,r,t,e]),g("div",{className:xm.wrapper,children:g(zo,{size:"large"})})},wm=Lt(bm),xm={wrapper:ie({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},Sm="MOCK_PAGE_ID",Vl="MOCK_ROOT_WIDGET_ID",pi=Xr.create({id:"app_id_mock",name:"app_name_mock",version:"0.0.1"}),Za=si.mrSchemeToDefaultJson(Ed.jsonPropsSchema),jl={...Za,props:{...Za.props,title:"按钮-{{colDSL.span}}-大漠孤烟直哈哈"},id:"buttonDSL"},Xl={...si.mrSchemeToDefaultJson(_d.jsonPropsSchema),id:"colDSL",slots:{children:[jl.id]}},Em={...si.mrSchemeToDefaultJson(Js.jsonPropsSchema),id:Vl,slots:{children:[Xl.id]}},_m=[Em,Xl,jl],Mm=bn.create({name:"大漠孤烟直",id:Sm,rootWidgetId:Vl},pi);_m.forEach(e=>Qt.create({...e,id:e.id},Mm));const Yl=[{id:Oe(),type:B.AutoNumber,name:B.AutoNumber,title:B.AutoNumber,description:Pe.getEntityFieldTypeLabel(B.AutoNumber),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Date,name:B.Date,title:B.Date,description:Pe.getEntityFieldTypeLabel(B.Date),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.DateTime,name:B.DateTime,title:B.DateTime,description:Pe.getEntityFieldTypeLabel(B.DateTime),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Email,name:B.Email,title:B.Email,description:Pe.getEntityFieldTypeLabel(B.Email),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Image,name:B.Image,title:B.Image,description:Pe.getEntityFieldTypeLabel(B.Image),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.LongText,name:B.LongText,title:B.LongText,description:Pe.getEntityFieldTypeLabel(B.LongText),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Number,name:B.Number,title:B.Number,description:Pe.getEntityFieldTypeLabel(B.Number),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.PhoneNumber,name:B.PhoneNumber,title:B.PhoneNumber,description:Pe.getEntityFieldTypeLabel(B.PhoneNumber),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Text,name:B.Text,title:B.Text,description:Pe.getEntityFieldTypeLabel(B.Text),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.URL,name:B.URL,title:B.URL,description:Pe.getEntityFieldTypeLabel(B.URL),required:!1,config:{},version:"0.0.1"},{id:Oe(),type:B.Enum,name:B.Enum,title:B.Enum,description:Pe.getEntityFieldTypeLabel(B.Enum),required:!1,config:{enumCode:"",multiple:!0},version:"0.0.1"}],Gl=Pe.create({version:"0.0.1",id:"user",name:"user",title:"人员",description:"人员",position:{x:400,y:100}},pi);Yl.forEach(e=>{Zt.create({...e},Gl)});const Qa=Pe.create({version:"0.0.1",id:"department",name:"department",title:"部门",description:"部门",position:{x:800,y:100}},pi);er.create({id:Oe(),name:"department",title:"部门",type:fi.Lookup,relationType:Kt.ManyToOne,description:"部门",sourceEntity:"user",targetEntity:"department",targetName:"user",targetTitle:"用户",targetDescription:"用户",version:"0.0.1"},Gl);Yl.forEach(e=>{Zt.create({...e,required:!0,id:e.id+Qa.meta.id},Qa)});const Cm=[{title:"页面",icon:g(Md,{}),key:dt.Page},{title:"数据模型",icon:g(df,{}),key:dt.Entity}],Nm=qe(()=>new hm(pi)),Tm=()=>{const e=tn(),[t,n]=m.useState(""),r=Bt(),{pathname:i}=Cn(),o=Yt(Be.PAGE,i),a=Yt(Be.Entity,i)??Yt(Be.Entities,i),l=m.useCallback(()=>{n(o?dt.Page:a?dt.Entity:"")},[a,o]);Qs(l);const[c,s]=m.useState(!1),u=({key:d})=>{switch(d){case dt.Page:d===t?s(h=>!h):(n(d),s(!0));break;case dt.Entity:s(!1),n(d),r(vn(Be.Entities,{appId:e.appId}));break}},f=Yt(Be.APP,i);return g(Cd,{value:Nm,children:f?g(wm,{}):G($t,{className:vr.layout,children:[g(vm,{}),G($t,{children:[g($t.Sider,{className:vr.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!c,children:g(Nd,{className:vr.menu,style:{width:"60px"},mode:"inline",selectedKeys:[t],onClick:u,items:Cm})}),G($t.Content,{className:vr.layoutContent,children:[g(ym,{onClose:()=>{s(!1),l()},module:t,visible:c}),g(Tl,{})]})]})]})})},vr={layout:ie({name:"13udsys",styles:"height:100%"}),menu:ie({name:"13udsys",styles:"height:100%"}),layoutContent:ie({name:"bjn8wh",styles:"position:relative"}),sider:ie({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},Ui={header:ie({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:ie({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:ie({name:"s0vnfv",styles:"height:32px"})},Pm=()=>g($t.Header,{className:Ui.header,children:g("div",{className:Ui.logoWrapper,children:g("img",{src:"/modou.svg",className:Ui.logo,alt:""})})}),Vi={content:ie({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:ie({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:ie({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},Am=()=>{const e=Bt();return g($t.Content,{className:Vi.content,children:g(ii,{gutter:[0,0],children:Array(13).fill(1).map((t,n)=>g(qn,{className:Vi.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:g(Or,{onClick:()=>e("/app/appId"),className:Vi.card,actions:[g(Td,{},"setting"),g(Pd,{},"edit"),g(Ad,{},"ellipsis")],children:g(Or.Meta,{avatar:g(Zs,{shape:"square",src:`https://api.multiavatar.com/modou_app_logo_${n}.png`}),title:"APP NAME",description:"我是 APP 描述"})})},n))})})},es=()=>G($t,{className:ie({name:"1d3w5wq",styles:"width:100%"}),children:[g(Pm,{}),g(Am,{})]});var Im=function(t){return typeof t=="function"},Rm=!1;const $m=Rm;function Om(e){$m&&(Im(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var t=m.useRef(e);t.current=m.useMemo(function(){return e},[e]);var n=m.useRef();return n.current||(n.current=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.current.apply(this,r)}),n.current}var km=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){a={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Dm=function(){var t=km(m.useState({}),2),n=t[1];return m.useCallback(function(){return n({})},[])};const Fm=Dm;var Pr={},Lm=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Kl="%[a-f0-9]{2}",ts=new RegExp(Kl,"gi"),ns=new RegExp("("+Kl+")+","gi");function yo(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],yo(n),yo(r))}function zm(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(ts),n=1;n<t.length;n++)e=yo(t,n).join(""),t=e.match(ts);return e}}function Bm(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=ns.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=zm(n[0]);r!==n[0]&&(t[n[0]]=r)}n=ns.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var a=i[o];e=e.replace(new RegExp(a,"g"),t[a])}return e}var Hm=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Bm(e)}},Wm=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const n=e.indexOf(t);return n===-1?[e]:[e.slice(0,n),e.slice(n+t.length)]},Um=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],l=e[a];(i?t.indexOf(a)!==-1:t(a,l,e))&&(n[a]=l)}return n};(function(e){const t=Lm,n=Hm,r=Wm,i=Um,o=p=>p==null;function a(p){switch(p.arrayFormat){case"index":return w=>(E,y)=>{const _=E.length;return y===void 0||p.skipNull&&y===null||p.skipEmptyString&&y===""?E:y===null?[...E,[s(w,p),"[",_,"]"].join("")]:[...E,[s(w,p),"[",s(_,p),"]=",s(y,p)].join("")]};case"bracket":return w=>(E,y)=>y===void 0||p.skipNull&&y===null||p.skipEmptyString&&y===""?E:y===null?[...E,[s(w,p),"[]"].join("")]:[...E,[s(w,p),"[]=",s(y,p)].join("")];case"comma":case"separator":return w=>(E,y)=>y==null||y.length===0?E:E.length===0?[[s(w,p),"=",s(y,p)].join("")]:[[E,s(y,p)].join(p.arrayFormatSeparator)];default:return w=>(E,y)=>y===void 0||p.skipNull&&y===null||p.skipEmptyString&&y===""?E:y===null?[...E,s(w,p)]:[...E,[s(w,p),"=",s(y,p)].join("")]}}function l(p){let w;switch(p.arrayFormat){case"index":return(E,y,_)=>{if(w=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!w){_[E]=y;return}_[E]===void 0&&(_[E]={}),_[E][w[1]]=y};case"bracket":return(E,y,_)=>{if(w=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!w){_[E]=y;return}if(_[E]===void 0){_[E]=[y];return}_[E]=[].concat(_[E],y)};case"comma":case"separator":return(E,y,_)=>{const M=typeof y=="string"&&y.includes(p.arrayFormatSeparator),N=typeof y=="string"&&!M&&u(y,p).includes(p.arrayFormatSeparator);y=N?u(y,p):y;const R=M||N?y.split(p.arrayFormatSeparator).map(F=>u(F,p)):y===null?y:u(y,p);_[E]=R};default:return(E,y,_)=>{if(_[E]===void 0){_[E]=y;return}_[E]=[].concat(_[E],y)}}}function c(p){if(typeof p!="string"||p.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function s(p,w){return w.encode?w.strict?t(p):encodeURIComponent(p):p}function u(p,w){return w.decode?n(p):p}function f(p){return Array.isArray(p)?p.sort():typeof p=="object"?f(Object.keys(p)).sort((w,E)=>Number(w)-Number(E)).map(w=>p[w]):p}function d(p){const w=p.indexOf("#");return w!==-1&&(p=p.slice(0,w)),p}function h(p){let w="";const E=p.indexOf("#");return E!==-1&&(w=p.slice(E)),w}function x(p){p=d(p);const w=p.indexOf("?");return w===-1?"":p.slice(w+1)}function v(p,w){return w.parseNumbers&&!Number.isNaN(Number(p))&&typeof p=="string"&&p.trim()!==""?p=Number(p):w.parseBooleans&&p!==null&&(p.toLowerCase()==="true"||p.toLowerCase()==="false")&&(p=p.toLowerCase()==="true"),p}function S(p,w){w=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},w),c(w.arrayFormatSeparator);const E=l(w),y=Object.create(null);if(typeof p!="string"||(p=p.trim().replace(/^[?#&]/,""),!p))return y;for(const _ of p.split("&")){if(_==="")continue;let[M,N]=r(w.decode?_.replace(/\+/g," "):_,"=");N=N===void 0?null:["comma","separator"].includes(w.arrayFormat)?N:u(N,w),E(u(M,w),N,y)}for(const _ of Object.keys(y)){const M=y[_];if(typeof M=="object"&&M!==null)for(const N of Object.keys(M))M[N]=v(M[N],w);else y[_]=v(M,w)}return w.sort===!1?y:(w.sort===!0?Object.keys(y).sort():Object.keys(y).sort(w.sort)).reduce((_,M)=>{const N=y[M];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?_[M]=f(N):_[M]=N,_},Object.create(null))}e.extract=x,e.parse=S,e.stringify=(p,w)=>{if(!p)return"";w=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},w),c(w.arrayFormatSeparator);const E=N=>w.skipNull&&o(p[N])||w.skipEmptyString&&p[N]==="",y=a(w),_={};for(const N of Object.keys(p))E(N)||(_[N]=p[N]);const M=Object.keys(_);return w.sort!==!1&&M.sort(w.sort),M.map(N=>{const R=p[N];return R===void 0?"":R===null?s(N,w):Array.isArray(R)?R.reduce(y(N),[]).join("&"):s(N,w)+"="+s(R,w)}).filter(N=>N.length>0).join("&")},e.parseUrl=(p,w)=>{w=Object.assign({decode:!0},w);const[E,y]=r(p,"#");return Object.assign({url:E.split("?")[0]||"",query:S(x(p),w)},w&&w.parseFragmentIdentifier&&y?{fragmentIdentifier:u(y,w)}:{})},e.stringifyUrl=(p,w)=>{w=Object.assign({encode:!0,strict:!0},w);const E=d(p.url).split("?")[0]||"",y=e.extract(p.url),_=e.parse(y,{sort:!1}),M=Object.assign(_,p.query);let N=e.stringify(M,w);N&&(N=`?${N}`);let R=h(p.url);return p.fragmentIdentifier&&(R=`#${s(p.fragmentIdentifier,w)}`),`${E}${N}${R}`},e.pick=(p,w,E)=>{E=Object.assign({parseFragmentIdentifier:!0},E);const{url:y,query:_,fragmentIdentifier:M}=e.parseUrl(p,E);return e.stringifyUrl({url:y,query:i(_,w),fragmentIdentifier:M},E)},e.exclude=(p,w,E)=>{const y=Array.isArray(w)?_=>!w.includes(_):(_,M)=>!w(_,M);return e.pick(p,y,E)}})(Pr);var nt=globalThis&&globalThis.__assign||function(){return nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},nt.apply(this,arguments)},kn=Oh,Vm={parseNumbers:!1,parseBooleans:!1},jm={skipNull:!1,skipEmptyString:!1},ql=function(t,n){var r,i,o=n||{},a=o.navigateMode,l=a===void 0?"push":a,c=o.parseOptions,s=o.stringifyOptions,u=nt(nt({},Vm),c),f=nt(nt({},jm),s),d=kn.useLocation(),h=(r=kn.useHistory)===null||r===void 0?void 0:r.call(kn),x=(i=kn.useNavigate)===null||i===void 0?void 0:i.call(kn),v=Fm(),S=m.useRef(typeof t=="function"?t():t||{}),p=m.useMemo(function(){return Pr.parse(d.search,u)},[d.search]),w=m.useMemo(function(){return nt(nt({},S.current),p)},[p]),E=function(_){var M=typeof _=="function"?_(w):_;v(),h&&h[l]({hash:d.hash,search:Pr.stringify(nt(nt({},p),M),f)||"?"}),x&&x({hash:d.hash,search:Pr.stringify(nt(nt({},p),M),f)||"?"},{replace:l==="replace"})};return[w,Om(E)]};function ze(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ze(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const rs=e=>{let t;const n=new Set,r=(c,s)=>{const u=typeof c=="function"?c(t):c;if(u!==t){const f=t;t=s??typeof u!="object"?u:Object.assign({},t,u),n.forEach(d=>d(t,f))}},i=()=>t,l={setState:r,getState:i,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(r,i,l),l},Xm=e=>e?rs(e):rs;var vo={},Ym={get exports(){return vo},set exports(e){vo=e}},Jl={},bo={},Gm={get exports(){return bo},set exports(e){bo=e}},Zl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=m;function Km(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qm=typeof Object.is=="function"?Object.is:Km,Jm=wn.useState,Zm=wn.useEffect,Qm=wn.useLayoutEffect,eg=wn.useDebugValue;function tg(e,t){var n=t(),r=Jm({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Qm(function(){i.value=n,i.getSnapshot=t,ji(i)&&o({inst:i})},[e,n,t]),Zm(function(){return ji(i)&&o({inst:i}),e(function(){ji(i)&&o({inst:i})})},[e]),eg(n),n}function ji(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qm(e,n)}catch{return!0}}function ng(e,t){return t()}var rg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ng:tg;Zl.useSyncExternalStore=wn.useSyncExternalStore!==void 0?wn.useSyncExternalStore:rg;(function(e){e.exports=Zl})(Gm);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=m,ig=bo;function og(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ag=typeof Object.is=="function"?Object.is:og,sg=ig.useSyncExternalStore,lg=mi.useRef,cg=mi.useEffect,ug=mi.useMemo,dg=mi.useDebugValue;Jl.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=lg(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=ug(function(){function c(h){if(!s){if(s=!0,u=h,h=r(h),i!==void 0&&a.hasValue){var x=a.value;if(i(x,h))return f=x}return f=h}if(x=f,ag(u,h))return x;var v=r(h);return i!==void 0&&i(x,v)?x:(u=h,f=v)}var s=!1,u,f,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,i]);var l=sg(e,o[0],o[1]);return cg(function(){a.hasValue=!0,a.value=l},[l]),dg(l),l};(function(e){e.exports=Jl})(Ym);const fg=Id(vo),{useSyncExternalStoreWithSelector:hg}=fg;function pg(e,t=e.getState,n){const r=hg(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return m.useDebugValue(r),r}function je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var mg={value:()=>{}};function gi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ar(n)}function Ar(e){this._=e}function gg(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ar.prototype=gi.prototype={constructor:Ar,on:function(e,t){var n=this._,r=gg(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=yg(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=is(n[i],e.name,t);else if(t==null)for(i in n)n[i]=is(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ar(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function yg(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function is(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=mg,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wo="http://www.w3.org/1999/xhtml";const os={svg:"http://www.w3.org/2000/svg",xhtml:wo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),os.hasOwnProperty(t)?{space:os[t],local:e}:e}function vg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wo&&t.documentElement.namespaceURI===wo?t.createElement(e):t.createElementNS(n,e)}}function bg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ql(e){var t=yi(e);return(t.local?bg:vg)(t)}function wg(){}function Go(e){return e==null?wg:function(){return this.querySelector(e)}}function xg(e){typeof e!="function"&&(e=Go(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=new Array(a),c,s,u=0;u<a;++u)(c=o[u])&&(s=e.call(c,c.__data__,u,o))&&("__data__"in c&&(s.__data__=c.__data__),l[u]=s);return new Ze(r,this._parents)}function Sg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Eg(){return[]}function ec(e){return e==null?Eg:function(){return this.querySelectorAll(e)}}function _g(e){return function(){return Sg(e.apply(this,arguments))}}function Mg(e){typeof e=="function"?e=_g(e):e=ec(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],l=a.length,c,s=0;s<l;++s)(c=a[s])&&(r.push(e.call(c,c.__data__,s,a)),i.push(c));return new Ze(r,i)}function tc(e){return function(){return this.matches(e)}}function nc(e){return function(t){return t.matches(e)}}var Cg=Array.prototype.find;function Ng(e){return function(){return Cg.call(this.children,e)}}function Tg(){return this.firstElementChild}function Pg(e){return this.select(e==null?Tg:Ng(typeof e=="function"?e:nc(e)))}var Ag=Array.prototype.filter;function Ig(){return Array.from(this.children)}function Rg(e){return function(){return Ag.call(this.children,e)}}function $g(e){return this.selectAll(e==null?Ig:Rg(typeof e=="function"?e:nc(e)))}function Og(e){typeof e!="function"&&(e=tc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],c,s=0;s<a;++s)(c=o[s])&&e.call(c,c.__data__,s,o)&&l.push(c);return new Ze(r,this._parents)}function rc(e){return new Array(e.length)}function kg(){return new Ze(this._enter||this._groups.map(rc),this._parents)}function Yr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yr.prototype={constructor:Yr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Dg(e){return function(){return e}}function Fg(e,t,n,r,i,o){for(var a=0,l,c=t.length,s=o.length;a<s;++a)(l=t[a])?(l.__data__=o[a],r[a]=l):n[a]=new Yr(e,o[a]);for(;a<c;++a)(l=t[a])&&(i[a]=l)}function Lg(e,t,n,r,i,o,a){var l,c,s=new Map,u=t.length,f=o.length,d=new Array(u),h;for(l=0;l<u;++l)(c=t[l])&&(d[l]=h=a.call(c,c.__data__,l,t)+"",s.has(h)?i[l]=c:s.set(h,c));for(l=0;l<f;++l)h=a.call(e,o[l],l,o)+"",(c=s.get(h))?(r[l]=c,c.__data__=o[l],s.delete(h)):n[l]=new Yr(e,o[l]);for(l=0;l<u;++l)(c=t[l])&&s.get(d[l])===c&&(i[l]=c)}function zg(e){return e.__data__}function Bg(e,t){if(!arguments.length)return Array.from(this,zg);var n=t?Lg:Fg,r=this._parents,i=this._groups;typeof e!="function"&&(e=Dg(e));for(var o=i.length,a=new Array(o),l=new Array(o),c=new Array(o),s=0;s<o;++s){var u=r[s],f=i[s],d=f.length,h=Hg(e.call(u,u&&u.__data__,s,r)),x=h.length,v=l[s]=new Array(x),S=a[s]=new Array(x),p=c[s]=new Array(d);n(u,f,v,S,p,h,t);for(var w=0,E=0,y,_;w<x;++w)if(y=v[w]){for(w>=E&&(E=w+1);!(_=S[E])&&++E<x;);y._next=_||null}}return a=new Ze(a,r),a._enter=l,a._exit=c,a}function Hg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wg(){return new Ze(this._exit||this._groups.map(rc),this._parents)}function Ug(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Vg(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),l=new Array(i),c=0;c<a;++c)for(var s=n[c],u=r[c],f=s.length,d=l[c]=new Array(f),h,x=0;x<f;++x)(h=s[x]||u[x])&&(d[x]=h);for(;c<i;++c)l[c]=n[c];return new Ze(l,this._parents)}function jg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Xg(e){e||(e=Yg);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,c=i[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(c[u]=s);c.sort(t)}return new Ze(i,this._parents).order()}function Yg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Kg(){return Array.from(this)}function qg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Jg(){let e=0;for(const t of this)++e;return e}function Zg(){return!this.node()}function Qg(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&e.call(l,l.__data__,o,i);return this}function e0(e){return function(){this.removeAttribute(e)}}function t0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n0(e,t){return function(){this.setAttribute(e,t)}}function r0(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function i0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function o0(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function a0(e,t){var n=yi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?t0:e0:typeof t=="function"?n.local?o0:i0:n.local?r0:n0)(n,t))}function ic(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function s0(e){return function(){this.style.removeProperty(e)}}function l0(e,t,n){return function(){this.style.setProperty(e,t,n)}}function c0(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function u0(e,t,n){return arguments.length>1?this.each((t==null?s0:typeof t=="function"?c0:l0)(e,t,n??"")):xn(this.node(),e)}function xn(e,t){return e.style.getPropertyValue(t)||ic(e).getComputedStyle(e,null).getPropertyValue(t)}function d0(e){return function(){delete this[e]}}function f0(e,t){return function(){this[e]=t}}function h0(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function p0(e,t){return arguments.length>1?this.each((t==null?d0:typeof t=="function"?h0:f0)(e,t)):this.node()[e]}function oc(e){return e.trim().split(/^|\s+/)}function Ko(e){return e.classList||new ac(e)}function ac(e){this._node=e,this._names=oc(e.getAttribute("class")||"")}ac.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function sc(e,t){for(var n=Ko(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function lc(e,t){for(var n=Ko(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function m0(e){return function(){sc(this,e)}}function g0(e){return function(){lc(this,e)}}function y0(e,t){return function(){(t.apply(this,arguments)?sc:lc)(this,e)}}function v0(e,t){var n=oc(e+"");if(arguments.length<2){for(var r=Ko(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?y0:t?m0:g0)(n,t))}function b0(){this.textContent=""}function w0(e){return function(){this.textContent=e}}function x0(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function S0(e){return arguments.length?this.each(e==null?b0:(typeof e=="function"?x0:w0)(e)):this.node().textContent}function E0(){this.innerHTML=""}function _0(e){return function(){this.innerHTML=e}}function M0(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function C0(e){return arguments.length?this.each(e==null?E0:(typeof e=="function"?M0:_0)(e)):this.node().innerHTML}function N0(){this.nextSibling&&this.parentNode.appendChild(this)}function T0(){return this.each(N0)}function P0(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function A0(){return this.each(P0)}function I0(e){var t=typeof e=="function"?e:Ql(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function R0(){return null}function $0(e,t){var n=typeof e=="function"?e:Ql(e),r=t==null?R0:typeof t=="function"?t:Go(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function O0(){var e=this.parentNode;e&&e.removeChild(this)}function k0(){return this.each(O0)}function D0(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function F0(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function L0(e){return this.select(e?F0:D0)}function z0(e){return arguments.length?this.property("__data__",e):this.node().__data__}function B0(e){return function(t){e.call(this,t,this.__data__)}}function H0(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function W0(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function U0(e,t,n){return function(){var r=this.__on,i,o=B0(t);if(r){for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function V0(e,t,n){var r=H0(e+""),i,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,s=l.length,u;c<s;++c)for(i=0,u=l[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(l=t?U0:W0,i=0;i<o;++i)this.each(l(r[i],t,n));return this}function cc(e,t,n){var r=ic(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function j0(e,t){return function(){return cc(this,e,t)}}function X0(e,t){return function(){return cc(this,e,t.apply(this,arguments))}}function Y0(e,t){return this.each((typeof t=="function"?X0:j0)(e,t))}function*G0(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var uc=[null];function Ze(e,t){this._groups=e,this._parents=t}function fr(){return new Ze([[document.documentElement]],uc)}function K0(){return this}Ze.prototype=fr.prototype={constructor:Ze,select:xg,selectAll:Mg,selectChild:Pg,selectChildren:$g,filter:Og,data:Bg,enter:kg,exit:Wg,join:Ug,merge:Vg,selection:K0,order:jg,sort:Xg,call:Gg,nodes:Kg,node:qg,size:Jg,empty:Zg,each:Qg,attr:a0,style:u0,property:p0,classed:v0,text:S0,html:C0,raise:T0,lower:A0,append:I0,insert:$0,remove:k0,clone:L0,datum:z0,on:V0,dispatch:Y0,[Symbol.iterator]:G0};function rt(e){return typeof e=="string"?new Ze([[document.querySelector(e)]],[document.documentElement]):new Ze([[e]],uc)}function q0(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lt(e,t){if(e=q0(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const J0={passive:!1},nr={capture:!0,passive:!1};function Xi(e){e.stopImmediatePropagation()}function pn(e){e.preventDefault(),e.stopImmediatePropagation()}function dc(e){var t=e.document.documentElement,n=rt(e).on("dragstart.drag",pn,nr);"onselectstart"in t?n.on("selectstart.drag",pn,nr):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function fc(e,t){var n=e.document.documentElement,r=rt(e).on("dragstart.drag",null);t&&(r.on("click.drag",pn,nr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const br=e=>()=>e;function xo(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:l,dx:c,dy:s,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:u}})}xo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Z0(e){return!e.ctrlKey&&!e.button}function Q0(){return this.parentNode}function ey(e,t){return t??{x:e.x,y:e.y}}function ty(){return navigator.maxTouchPoints||"ontouchstart"in this}function ny(){var e=Z0,t=Q0,n=ey,r=ty,i={},o=gi("start","drag","end"),a=0,l,c,s,u,f=0;function d(y){y.on("mousedown.drag",h).filter(r).on("touchstart.drag",S).on("touchmove.drag",p,J0).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,_){if(!(u||!e.call(this,y,_))){var M=E(this,t.call(this,y,_),y,_,"mouse");M&&(rt(y.view).on("mousemove.drag",x,nr).on("mouseup.drag",v,nr),dc(y.view),Xi(y),s=!1,l=y.clientX,c=y.clientY,M("start",y))}}function x(y){if(pn(y),!s){var _=y.clientX-l,M=y.clientY-c;s=_*_+M*M>f}i.mouse("drag",y)}function v(y){rt(y.view).on("mousemove.drag mouseup.drag",null),fc(y.view,s),pn(y),i.mouse("end",y)}function S(y,_){if(e.call(this,y,_)){var M=y.changedTouches,N=t.call(this,y,_),R=M.length,F,O;for(F=0;F<R;++F)(O=E(this,N,y,_,M[F].identifier,M[F]))&&(Xi(y),O("start",y,M[F]))}}function p(y){var _=y.changedTouches,M=_.length,N,R;for(N=0;N<M;++N)(R=i[_[N].identifier])&&(pn(y),R("drag",y,_[N]))}function w(y){var _=y.changedTouches,M=_.length,N,R;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<M;++N)(R=i[_[N].identifier])&&(Xi(y),R("end",y,_[N]))}function E(y,_,M,N,R,F){var O=o.copy(),W=lt(F||M,_),q,K,b;if((b=n.call(y,new xo("beforestart",{sourceEvent:M,target:d,identifier:R,active:a,x:W[0],y:W[1],dx:0,dy:0,dispatch:O}),N))!=null)return q=b.x-W[0]||0,K=b.y-W[1]||0,function T(C,P,k){var z=W,I;switch(C){case"start":i[R]=T,I=a++;break;case"end":delete i[R],--a;case"drag":W=lt(k||P,_),I=a;break}O.call(C,y,new xo(C,{sourceEvent:P,subject:b,target:d,identifier:R,active:I,x:W[0]+q,y:W[1]+K,dx:W[0]-z[0],dy:W[1]-z[1],dispatch:O}),N)}}return d.filter=function(y){return arguments.length?(e=typeof y=="function"?y:br(!!y),d):e},d.container=function(y){return arguments.length?(t=typeof y=="function"?y:br(y),d):t},d.subject=function(y){return arguments.length?(n=typeof y=="function"?y:br(y),d):n},d.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:br(!!y),d):r},d.on=function(){var y=o.on.apply(o,arguments);return y===o?d:y},d.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,d):Math.sqrt(f)},d}function qo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function hc(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function hr(){}var rr=.7,Gr=1/rr,mn="\\s*([+-]?\\d+)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ry=/^#([0-9a-f]{3,8})$/,iy=new RegExp(`^rgb\\(${mn},${mn},${mn}\\)$`),oy=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),ay=new RegExp(`^rgba\\(${mn},${mn},${mn},${ir}\\)$`),sy=new RegExp(`^rgba\\(${yt},${yt},${yt},${ir}\\)$`),ly=new RegExp(`^hsl\\(${ir},${yt},${yt}\\)$`),cy=new RegExp(`^hsla\\(${ir},${yt},${yt},${ir}\\)$`),as={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qo(hr,or,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ss,formatHex:ss,formatHex8:uy,formatHsl:dy,formatRgb:ls,toString:ls});function ss(){return this.rgb().formatHex()}function uy(){return this.rgb().formatHex8()}function dy(){return pc(this).formatHsl()}function ls(){return this.rgb().formatRgb()}function or(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ry.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?cs(t):n===3?new Ve(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iy.exec(e))?new Ve(t[1],t[2],t[3],1):(t=oy.exec(e))?new Ve(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ay.exec(e))?wr(t[1],t[2],t[3],t[4]):(t=sy.exec(e))?wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ly.exec(e))?fs(t[1],t[2]/100,t[3]/100,1):(t=cy.exec(e))?fs(t[1],t[2]/100,t[3]/100,t[4]):as.hasOwnProperty(e)?cs(as[e]):e==="transparent"?new Ve(NaN,NaN,NaN,0):null}function cs(e){return new Ve(e>>16&255,e>>8&255,e&255,1)}function wr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ve(e,t,n,r)}function fy(e){return e instanceof hr||(e=or(e)),e?(e=e.rgb(),new Ve(e.r,e.g,e.b,e.opacity)):new Ve}function So(e,t,n,r){return arguments.length===1?fy(e):new Ve(e,t,n,r??1)}function Ve(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}qo(Ve,So,hc(hr,{brighter(e){return e=e==null?Gr:Math.pow(Gr,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new Ve(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ve(Jt(this.r),Jt(this.g),Jt(this.b),Kr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:us,formatHex:us,formatHex8:hy,formatRgb:ds,toString:ds}));function us(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function hy(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ds(){const e=Kr(this.opacity);return`${e===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${e===1?")":`, ${e})`}`}function Kr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qt(e){return e=Jt(e),(e<16?"0":"")+e.toString(16)}function fs(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ut(e,t,n,r)}function pc(e){if(e instanceof ut)return new ut(e.h,e.s,e.l,e.opacity);if(e instanceof hr||(e=or(e)),!e)return new ut;if(e instanceof ut)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,l=o-i,c=(o+i)/2;return l?(t===o?a=(n-r)/l+(n<r)*6:n===o?a=(r-t)/l+2:a=(t-n)/l+4,l/=c<.5?o+i:2-o-i,a*=60):l=c>0&&c<1?0:a,new ut(a,l,c,e.opacity)}function py(e,t,n,r){return arguments.length===1?pc(e):new ut(e,t,n,r??1)}function ut(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}qo(ut,py,hc(hr,{brighter(e){return e=e==null?Gr:Math.pow(Gr,e),new ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rr:Math.pow(rr,e),new ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ve(Yi(e>=240?e-240:e+120,i,r),Yi(e,i,r),Yi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ut(hs(this.h),xr(this.s),xr(this.l),Kr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kr(this.opacity);return`${e===1?"hsl(":"hsla("}${hs(this.h)}, ${xr(this.s)*100}%, ${xr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hs(e){return e=(e||0)%360,e<0?e+360:e}function xr(e){return Math.max(0,Math.min(1,e||0))}function Yi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mc=e=>()=>e;function my(e,t){return function(n){return e+n*t}}function gy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yy(e){return(e=+e)==1?gc:function(t,n){return n-t?gy(t,n,e):mc(isNaN(t)?n:t)}}function gc(e,t){var n=t-e;return n?my(e,n):mc(isNaN(e)?t:e)}const ps=function e(t){var n=yy(t);function r(i,o){var a=n((i=So(i)).r,(o=So(o)).r),l=n(i.g,o.g),c=n(i.b,o.b),s=gc(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=l(u),i.b=c(u),i.opacity=s(u),i+""}}return r.gamma=e,r}(1);function Pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gi=new RegExp(Eo.source,"g");function vy(e){return function(){return e}}function by(e){return function(t){return e(t)+""}}function wy(e,t){var n=Eo.lastIndex=Gi.lastIndex=0,r,i,o,a=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Eo.exec(e))&&(i=Gi.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:Pt(r,i)})),n=Gi.lastIndex;return n<t.length&&(o=t.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?c[0]?by(c[0].x):vy(t):(t=c.length,function(s){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(s);return l.join("")})}var ms=180/Math.PI,_o={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yc(e,t,n,r,i,o){var a,l,c;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ms,skewX:Math.atan(c)*ms,scaleX:a,scaleY:l}}var Sr;function xy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_o:yc(t.a,t.b,t.c,t.d,t.e,t.f)}function Sy(e){return e==null||(Sr||(Sr=document.createElementNS("http://www.w3.org/2000/svg","g")),Sr.setAttribute("transform",e),!(e=Sr.transform.baseVal.consolidate()))?_o:(e=e.matrix,yc(e.a,e.b,e.c,e.d,e.e,e.f))}function vc(e,t,n,r){function i(s){return s.length?s.pop()+" ":""}function o(s,u,f,d,h,x){if(s!==f||u!==d){var v=h.push("translate(",null,t,null,n);x.push({i:v-4,x:Pt(s,f)},{i:v-2,x:Pt(u,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function a(s,u,f,d){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Pt(s,u)})):u&&f.push(i(f)+"rotate("+u+r)}function l(s,u,f,d){s!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Pt(s,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(s,u,f,d,h,x){if(s!==f||u!==d){var v=h.push(i(h)+"scale(",null,",",null,")");x.push({i:v-4,x:Pt(s,f)},{i:v-2,x:Pt(u,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(s,u){var f=[],d=[];return s=e(s),u=e(u),o(s.translateX,s.translateY,u.translateX,u.translateY,f,d),a(s.rotate,u.rotate,f,d),l(s.skewX,u.skewX,f,d),c(s.scaleX,s.scaleY,u.scaleX,u.scaleY,f,d),s=u=null,function(h){for(var x=-1,v=d.length,S;++x<v;)f[(S=d[x]).i]=S.x(h);return f.join("")}}}var Ey=vc(xy,"px, ","px)","deg)"),_y=vc(Sy,", ",")",")"),My=1e-12;function gs(e){return((e=Math.exp(e))+1/e)/2}function Cy(e){return((e=Math.exp(e))-1/e)/2}function Ny(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ty=function e(t,n,r){function i(o,a){var l=o[0],c=o[1],s=o[2],u=a[0],f=a[1],d=a[2],h=u-l,x=f-c,v=h*h+x*x,S,p;if(v<My)p=Math.log(d/s)/t,S=function(N){return[l+N*h,c+N*x,s*Math.exp(t*N*p)]};else{var w=Math.sqrt(v),E=(d*d-s*s+r*v)/(2*s*n*w),y=(d*d-s*s-r*v)/(2*d*n*w),_=Math.log(Math.sqrt(E*E+1)-E),M=Math.log(Math.sqrt(y*y+1)-y);p=(M-_)/t,S=function(N){var R=N*p,F=gs(_),O=s/(n*w)*(F*Ny(t*R+_)-Cy(_));return[l+O*h,c+O*x,s*F/gs(t*R+_)]}}return S.duration=p*1e3*t/Math.SQRT2,S}return i.rho=function(o){var a=Math.max(.001,+o),l=a*a,c=l*l;return e(a,l,c)},i}(Math.SQRT2,2,4);var Sn=0,Un=0,Dn=0,bc=1e3,qr,Vn,Jr=0,en=0,vi=0,ar=typeof performance=="object"&&performance.now?performance:Date,wc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Jo(){return en||(wc(Py),en=ar.now()+vi)}function Py(){en=0}function Zr(){this._call=this._time=this._next=null}Zr.prototype=xc.prototype={constructor:Zr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Jo():+n)+(t==null?0:+t),!this._next&&Vn!==this&&(Vn?Vn._next=this:qr=this,Vn=this),this._call=e,this._time=n,Mo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Mo())}};function xc(e,t,n){var r=new Zr;return r.restart(e,t,n),r}function Ay(){Jo(),++Sn;for(var e=qr,t;e;)(t=en-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sn}function ys(){en=(Jr=ar.now())+vi,Sn=Un=0;try{Ay()}finally{Sn=0,Ry(),en=0}}function Iy(){var e=ar.now(),t=e-Jr;t>bc&&(vi-=t,Jr=e)}function Ry(){for(var e,t=qr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:qr=n);Vn=e,Mo(r)}function Mo(e){if(!Sn){Un&&(Un=clearTimeout(Un));var t=e-en;t>24?(e<1/0&&(Un=setTimeout(ys,e-ar.now()-vi)),Dn&&(Dn=clearInterval(Dn))):(Dn||(Jr=ar.now(),Dn=setInterval(Iy,bc)),Sn=1,wc(ys))}}function vs(e,t,n){var r=new Zr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var $y=gi("start","end","cancel","interrupt"),Oy=[],Sc=0,bs=1,Co=2,Ir=3,ws=4,No=5,Rr=6;function bi(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;ky(e,n,{name:t,index:r,group:i,on:$y,tween:Oy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Sc})}function Zo(e,t){var n=mt(e,t);if(n.state>Sc)throw new Error("too late; already scheduled");return n}function wt(e,t){var n=mt(e,t);if(n.state>Ir)throw new Error("too late; already running");return n}function mt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ky(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=xc(o,0,n.time);function o(s){n.state=bs,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,f,d,h;if(n.state!==bs)return c();for(u in r)if(h=r[u],h.name===n.name){if(h.state===Ir)return vs(a);h.state===ws?(h.state=Rr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[u]):+u<t&&(h.state=Rr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[u])}if(vs(function(){n.state===Ir&&(n.state=ws,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Co,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Co){for(n.state=Ir,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(h=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(c),n.state=No,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===No&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Rr,n.timer.stop(),delete r[t];for(var s in r)return;delete e.__transition}}function $r(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Co&&r.state<No,r.state=Rr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Dy(e){return this.each(function(){$r(this,e)})}function Fy(e,t){var n,r;return function(){var i=wt(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ly(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=wt(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:t,value:n},c=0,s=i.length;c<s;++c)if(i[c].name===t){i[c]=l;break}c===s&&i.push(l)}o.tween=i}}function zy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=mt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Fy:Ly)(n,e,t))}function Qo(e,t,n){var r=e._id;return e.each(function(){var i=wt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return mt(i,r).value[t]}}function Ec(e,t){var n;return(typeof t=="number"?Pt:t instanceof or?ps:(n=or(t))?(t=n,ps):wy)(e,t)}function By(e){return function(){this.removeAttribute(e)}}function Hy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Wy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Uy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function Vy(e,t,n){var r,i,o;return function(){var a,l=n(this),c;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),c=l+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,l)))}}function jy(e,t,n){var r,i,o;return function(){var a,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),c=l+"",a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,l)))}}function Xy(e,t){var n=yi(e),r=n==="transform"?_y:Ec;return this.attrTween(e,typeof t=="function"?(n.local?jy:Vy)(n,r,Qo(this,"attr."+e,t)):t==null?(n.local?Hy:By)(n):(n.local?Uy:Wy)(n,r,t))}function Yy(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Gy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ky(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Gy(e,o)),n}return i._value=t,i}function qy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Yy(e,o)),n}return i._value=t,i}function Jy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=yi(e);return this.tween(n,(r.local?Ky:qy)(r,t))}function Zy(e,t){return function(){Zo(this,e).delay=+t.apply(this,arguments)}}function Qy(e,t){return t=+t,function(){Zo(this,e).delay=t}}function ev(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zy:Qy)(t,e)):mt(this.node(),t).delay}function tv(e,t){return function(){wt(this,e).duration=+t.apply(this,arguments)}}function nv(e,t){return t=+t,function(){wt(this,e).duration=t}}function rv(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tv:nv)(t,e)):mt(this.node(),t).duration}function iv(e,t){if(typeof t!="function")throw new Error;return function(){wt(this,e).ease=t}}function ov(e){var t=this._id;return arguments.length?this.each(iv(t,e)):mt(this.node(),t).ease}function av(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,e).ease=n}}function sv(e){if(typeof e!="function")throw new Error;return this.each(av(this._id,e))}function lv(e){typeof e!="function"&&(e=tc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,l=r[i]=[],c,s=0;s<a;++s)(c=o[s])&&e.call(c,c.__data__,s,o)&&l.push(c);return new Nt(r,this._parents,this._name,this._id)}function cv(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var c=t[l],s=n[l],u=c.length,f=a[l]=new Array(u),d,h=0;h<u;++h)(d=c[h]||s[h])&&(f[h]=d);for(;l<r;++l)a[l]=t[l];return new Nt(a,this._parents,this._name,this._id)}function uv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function dv(e,t,n){var r,i,o=uv(t)?Zo:wt;return function(){var a=o(this,e),l=a.on;l!==r&&(i=(r=l).copy()).on(t,n),a.on=i}}function fv(e,t){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(e):this.each(dv(n,e,t))}function hv(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pv(){return this.on("end.remove",hv(this._id))}function mv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Go(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],c=l.length,s=o[a]=new Array(c),u,f,d=0;d<c;++d)(u=l[d])&&(f=e.call(u,u.__data__,d,l))&&("__data__"in u&&(f.__data__=u.__data__),s[d]=f,bi(s[d],t,n,d,s,mt(u,n)));return new Nt(o,this._parents,t,n)}function gv(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ec(e));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var c=r[l],s=c.length,u,f=0;f<s;++f)if(u=c[f]){for(var d=e.call(u,u.__data__,f,c),h,x=mt(u,n),v=0,S=d.length;v<S;++v)(h=d[v])&&bi(h,t,n,v,d,x);o.push(d),a.push(u)}return new Nt(o,a,t,n)}var yv=fr.prototype.constructor;function vv(){return new yv(this._groups,this._parents)}function bv(e,t){var n,r,i;return function(){var o=xn(this,e),a=(this.style.removeProperty(e),xn(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function _c(e){return function(){this.style.removeProperty(e)}}function wv(e,t,n){var r,i=n+"",o;return function(){var a=xn(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function xv(e,t,n){var r,i,o;return function(){var a=xn(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),xn(this,e))),a===c?null:a===r&&c===i?o:(i=c,o=t(r=a,l))}}function Sv(e,t){var n,r,i,o="style."+t,a="end."+o,l;return function(){var c=wt(this,e),s=c.on,u=c.value[o]==null?l||(l=_c(t)):void 0;(s!==n||i!==u)&&(r=(n=s).copy()).on(a,i=u),c.on=r}}function Ev(e,t,n){var r=(e+="")=="transform"?Ey:Ec;return t==null?this.styleTween(e,bv(e,r)).on("end.style."+e,_c(e)):typeof t=="function"?this.styleTween(e,xv(e,r,Qo(this,"style."+e,t))).each(Sv(this._id,e)):this.styleTween(e,wv(e,r,t),n).on("end.style."+e,null)}function _v(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Mv(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&_v(e,a,n)),r}return o._value=t,o}function Cv(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Mv(e,t,n??""))}function Nv(e){return function(){this.textContent=e}}function Tv(e){return function(){var t=e(this);this.textContent=t??""}}function Pv(e){return this.tween("text",typeof e=="function"?Tv(Qo(this,"text",e)):Nv(e==null?"":e+""))}function Av(e){return function(t){this.textContent=e.call(this,t)}}function Iv(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Av(i)),t}return r._value=e,r}function Rv(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Iv(e))}function $v(){for(var e=this._name,t=this._id,n=Mc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,c,s=0;s<l;++s)if(c=a[s]){var u=mt(c,t);bi(c,e,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Nt(r,this._parents,e,n)}function Ov(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var l={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var s=wt(this,r),u=s.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),s.on=t}),i===0&&o()})}var kv=0;function Nt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Mc(){return++kv}var xt=fr.prototype;Nt.prototype={constructor:Nt,select:mv,selectAll:gv,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:lv,merge:cv,selection:vv,transition:$v,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:fv,attr:Xy,attrTween:Jy,style:Ev,styleTween:Cv,text:Pv,textTween:Rv,remove:pv,tween:zy,delay:ev,duration:rv,ease:ov,easeVarying:sv,end:Ov,[Symbol.iterator]:xt[Symbol.iterator]};function Dv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fv={time:null,delay:0,duration:250,ease:Dv};function Lv(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function zv(e){var t,n;e instanceof Nt?(t=e._id,e=e._name):(t=Mc(),(n=Fv).time=Jo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,c,s=0;s<l;++s)(c=a[s])&&bi(c,e,t,s,a,n||Lv(c,t));return new Nt(r,this._parents,e,t)}fr.prototype.interrupt=Dy;fr.prototype.transition=zv;const Er=e=>()=>e;function Bv(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Et(e,t,n){this.k=e,this.x=t,this.y=n}Et.prototype={constructor:Et,scale:function(e){return e===1?this:new Et(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Et(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new Et(1,0,0);Et.prototype;function Ki(e){e.stopImmediatePropagation()}function Fn(e){e.preventDefault(),e.stopImmediatePropagation()}function Hv(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Wv(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function xs(){return this.__zoom||Dt}function Uv(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Vv(){return navigator.maxTouchPoints||"ontouchstart"in this}function jv(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function Cc(){var e=Hv,t=Wv,n=jv,r=Uv,i=Vv,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,c=Ty,s=gi("start","zoom","end"),u,f,d,h=500,x=150,v=0,S=10;function p(b){b.property("__zoom",xs).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",O).filter(i).on("touchstart.zoom",W).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",K).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(b,T,C,P){var k=b.selection?b.selection():b;k.property("__zoom",xs),b!==k?_(b,T,C,P):k.interrupt().each(function(){M(this,arguments).event(P).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},p.scaleBy=function(b,T,C,P){p.scaleTo(b,function(){var k=this.__zoom.k,z=typeof T=="function"?T.apply(this,arguments):T;return k*z},C,P)},p.scaleTo=function(b,T,C,P){p.transform(b,function(){var k=t.apply(this,arguments),z=this.__zoom,I=C==null?y(k):typeof C=="function"?C.apply(this,arguments):C,D=z.invert(I),H=typeof T=="function"?T.apply(this,arguments):T;return n(E(w(z,H),I,D),k,a)},C,P)},p.translateBy=function(b,T,C,P){p.transform(b,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),a)},null,P)},p.translateTo=function(b,T,C,P,k){p.transform(b,function(){var z=t.apply(this,arguments),I=this.__zoom,D=P==null?y(z):typeof P=="function"?P.apply(this,arguments):P;return n(Dt.translate(D[0],D[1]).scale(I.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof C=="function"?-C.apply(this,arguments):-C),z,a)},P,k)};function w(b,T){return T=Math.max(o[0],Math.min(o[1],T)),T===b.k?b:new Et(T,b.x,b.y)}function E(b,T,C){var P=T[0]-C[0]*b.k,k=T[1]-C[1]*b.k;return P===b.x&&k===b.y?b:new Et(b.k,P,k)}function y(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function _(b,T,C,P){b.on("start.zoom",function(){M(this,arguments).event(P).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(P).end()}).tween("zoom",function(){var k=this,z=arguments,I=M(k,z).event(P),D=t.apply(k,z),H=C==null?y(D):typeof C=="function"?C.apply(k,z):C,j=Math.max(D[1][0]-D[0][0],D[1][1]-D[0][1]),U=k.__zoom,J=typeof T=="function"?T.apply(k,z):T,se=c(U.invert(H).concat(j/U.k),J.invert(H).concat(j/J.k));return function(ee){if(ee===1)ee=J;else{var te=se(ee),le=j/te[2];ee=new Et(le,H[0]-te[0]*le,H[1]-te[1]*le)}I.zoom(null,ee)}})}function M(b,T,C){return!C&&b.__zooming||new N(b,T)}function N(b,T){this.that=b,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,T),this.taps=0}N.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,T){return this.mouse&&b!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var T=rt(this.that).datum();s.call(b,this.that,new Bv(b,{sourceEvent:this.sourceEvent,target:p,type:b,transform:this.that.__zoom,dispatch:s}),T)}};function R(b,...T){if(!e.apply(this,arguments))return;var C=M(this,T).event(b),P=this.__zoom,k=Math.max(o[0],Math.min(o[1],P.k*Math.pow(2,r.apply(this,arguments)))),z=lt(b);if(C.wheel)(C.mouse[0][0]!==z[0]||C.mouse[0][1]!==z[1])&&(C.mouse[1]=P.invert(C.mouse[0]=z)),clearTimeout(C.wheel);else{if(P.k===k)return;C.mouse=[z,P.invert(z)],$r(this),C.start()}Fn(b),C.wheel=setTimeout(I,x),C.zoom("mouse",n(E(w(P,k),C.mouse[0],C.mouse[1]),C.extent,a));function I(){C.wheel=null,C.end()}}function F(b,...T){if(d||!e.apply(this,arguments))return;var C=b.currentTarget,P=M(this,T,!0).event(b),k=rt(b.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",j,!0),z=lt(b,C),I=b.clientX,D=b.clientY;dc(b.view),Ki(b),P.mouse=[z,this.__zoom.invert(z)],$r(this),P.start();function H(U){if(Fn(U),!P.moved){var J=U.clientX-I,se=U.clientY-D;P.moved=J*J+se*se>v}P.event(U).zoom("mouse",n(E(P.that.__zoom,P.mouse[0]=lt(U,C),P.mouse[1]),P.extent,a))}function j(U){k.on("mousemove.zoom mouseup.zoom",null),fc(U.view,P.moved),Fn(U),P.event(U).end()}}function O(b,...T){if(e.apply(this,arguments)){var C=this.__zoom,P=lt(b.changedTouches?b.changedTouches[0]:b,this),k=C.invert(P),z=C.k*(b.shiftKey?.5:2),I=n(E(w(C,z),P,k),t.apply(this,T),a);Fn(b),l>0?rt(this).transition().duration(l).call(_,I,P,b):rt(this).call(p.transform,I,P,b)}}function W(b,...T){if(e.apply(this,arguments)){var C=b.touches,P=C.length,k=M(this,T,b.changedTouches.length===P).event(b),z,I,D,H;for(Ki(b),I=0;I<P;++I)D=C[I],H=lt(D,this),H=[H,this.__zoom.invert(H),D.identifier],k.touch0?!k.touch1&&k.touch0[2]!==H[2]&&(k.touch1=H,k.taps=0):(k.touch0=H,z=!0,k.taps=1+!!u);u&&(u=clearTimeout(u)),z&&(k.taps<2&&(f=H[0],u=setTimeout(function(){u=null},h)),$r(this),k.start())}}function q(b,...T){if(this.__zooming){var C=M(this,T).event(b),P=b.changedTouches,k=P.length,z,I,D,H;for(Fn(b),z=0;z<k;++z)I=P[z],D=lt(I,this),C.touch0&&C.touch0[2]===I.identifier?C.touch0[0]=D:C.touch1&&C.touch1[2]===I.identifier&&(C.touch1[0]=D);if(I=C.that.__zoom,C.touch1){var j=C.touch0[0],U=C.touch0[1],J=C.touch1[0],se=C.touch1[1],ee=(ee=J[0]-j[0])*ee+(ee=J[1]-j[1])*ee,te=(te=se[0]-U[0])*te+(te=se[1]-U[1])*te;I=w(I,Math.sqrt(ee/te)),D=[(j[0]+J[0])/2,(j[1]+J[1])/2],H=[(U[0]+se[0])/2,(U[1]+se[1])/2]}else if(C.touch0)D=C.touch0[0],H=C.touch0[1];else return;C.zoom("touch",n(E(I,D,H),C.extent,a))}}function K(b,...T){if(this.__zooming){var C=M(this,T).event(b),P=b.changedTouches,k=P.length,z,I;for(Ki(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),z=0;z<k;++z)I=P[z],C.touch0&&C.touch0[2]===I.identifier?delete C.touch0:C.touch1&&C.touch1[2]===I.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(I=lt(I,this),Math.hypot(f[0]-I[0],f[1]-I[1])<S)){var D=rt(this).on("dblclick.zoom");D&&D.apply(this,arguments)}}}return p.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:Er(+b),p):r},p.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Er(!!b),p):e},p.touchable=function(b){return arguments.length?(i=typeof b=="function"?b:Er(!!b),p):i},p.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Er([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),p):t},p.scaleExtent=function(b){return arguments.length?(o[0]=+b[0],o[1]=+b[1],p):[o[0],o[1]]},p.translateExtent=function(b){return arguments.length?(a[0][0]=+b[0][0],a[1][0]=+b[1][0],a[0][1]=+b[0][1],a[1][1]=+b[1][1],p):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},p.constrain=function(b){return arguments.length?(n=b,p):n},p.duration=function(b){return arguments.length?(l=+b,p):l},p.interpolate=function(b){return arguments.length?(c=b,p):c},p.on=function(){var b=s.on.apply(s,arguments);return b===s?p:b},p.clickDistance=function(b){return arguments.length?(v=(b=+b)*b,p):Math.sqrt(v)},p.tapDistance=function(b){return arguments.length?(S=+b,p):S},p}const ea=m.createContext(null),Xv=ea.Provider,Nc="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100";function Ee(e,t){const n=m.useContext(ea);if(n===null)throw new Error(Nc);return pg(n,e,t)}const Ie=()=>{const e=m.useContext(ea);if(e===null)throw new Error(Nc);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Yv=e=>e.userSelectionActive?"none":"all";function ta({position:e,children:t,className:n,style:r,...i}){const o=Ee(Yv),a=`${e}`.split("-");return g("div",{className:ze(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i,children:t})}function Gv({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g(ta,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kv=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:l=2,children:c,className:s,...u})=>{const f=m.useRef(null),[d,h]=m.useState({x:0,y:0,width:0,height:0}),x=ze(["react-flow__edge-textwrapper",s]);return m.useEffect(()=>{if(f.current){const v=f.current.getBBox();h({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:G("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:x,visibility:d.width?"visible":"hidden",...u,children:[i&&g("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:l,ry:l}),g("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r,children:n}),c]})};var qv=m.memo(Kv);const pr=({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:s,markerEnd:u,markerStart:f,interactionWidth:d=20})=>G(ve,{children:[g("path",{style:s,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:f}),d&&g("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r?g(qv,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c}):null]});pr.displayName="BaseEdge";function Ln(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function Tc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,l=r<t?r+a:r-a;return[o,l,i,a]}function Pc({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:l}){const c=e*.125+i*.375+a*.375+n*.125,s=t*.125+o*.375+l*.375+r*.125,u=Math.abs(c-e),f=Math.abs(s-t);return[c,s,u,f]}var En;(function(e){e.Strict="strict",e.Loose="loose"})(En||(En={}));var gn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(gn||(gn={}));const na=e=>({width:e.offsetWidth,height:e.offsetHeight}),yn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ra=(e={x:0,y:0},t)=>({x:yn(e.x,t[0][0],t[1][0]),y:yn(e.y,t[0][1],t[1][1])}),Ac=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ic=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Rc=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ss=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Jv=(e,t)=>Rc(Ic(Qr(e),Qr(t))),To=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Zv=e=>!!e.width&&!!e.height&&!!e.x&&!!e.y,$c=e=>!isNaN(e)&&isFinite(e),ke=Symbol.for("internals"),Oc=["Enter"," ","Escape"],Qv=e=>{};var It;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(It||(It={}));var ei;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ei||(ei={}));var Y;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Y||(Y={}));function Es({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Y.Left||e===Y.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function kc({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top}){const[a,l]=Es({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,s]=Es({pos:o,x1:r,y1:i,x2:e,y2:t}),[u,f,d,h]=Pc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:s});return[`M${e},${t} C${a},${l} ${c},${s} ${r},${i}`,u,f,d,h]}const ia=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:v})=>{const[S,p,w]=kc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return g(pr,{path:S,labelX:p,labelY:w,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:v})});ia.displayName="SimpleBezierEdge";const _s={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},eb=({source:e,sourcePosition:t=Y.Bottom,target:n})=>t===Y.Left||t===Y.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Ms=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function tb({source:e,sourcePosition:t=Y.Bottom,target:n,targetPosition:r=Y.Top,center:i,offset:o}){const a=_s[t],l=_s[r],c={x:e.x+a.x*o,y:e.y+a.y*o},s={x:n.x+l.x*o,y:n.y+l.y*o},u=eb({source:c,sourcePosition:t,target:s}),f=u.x!==0?"x":"y",d=u[f];let h=[],x,v;const[S,p,w,E]=Tc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*l[f]===-1){x=i.x||S,v=i.y||p;const _=[{x,y:c.y},{x,y:s.y}],M=[{x:c.x,y:v},{x:s.x,y:v}];a[f]===d?h=f==="x"?_:M:h=f==="x"?M:_}else{const _=[{x:c.x,y:s.y}],M=[{x:s.x,y:c.y}];if(f==="x"?h=a.x===d?M:_:h=a.y===d?_:M,t!==r){const N=f==="x"?"y":"x",R=a[f]===l[N],F=c[N]>s[N],O=c[N]<s[N];(a[f]===1&&(!R&&F||R&&O)||a[f]!==1&&(!R&&O||R&&F))&&(h=f==="x"?_:M)}x=h[0].x,v=h[0].y}return[[e,c,...h,s,n],x,v,w,E]}function nb(e,t,n,r){const i=Math.min(Ms(e,t)/2,Ms(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const s=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*s},${a}Q ${o},${a} ${o},${a+i*u}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${o},${a+i*c}Q ${o},${a} ${o+i*l},${a}`}function Po({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,borderRadius:a=5,centerX:l,centerY:c,offset:s=20}){const[u,f,d,h,x]=tb({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:l,y:c},offset:s});return[u.reduce((S,p,w)=>{let E="";return w>0&&w<u.length-1?E=nb(u[w-1],p,u[w+1],a):E=`${w===0?"M":"L"}${p.x} ${p.y}`,S+=E,S},""),f,d,h,x]}const wi=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:s,style:u,sourcePosition:f=Y.Bottom,targetPosition:d=Y.Top,markerEnd:h,markerStart:x,pathOptions:v,interactionWidth:S})=>{const[p,w,E]=Po({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return g(pr,{path:p,labelX:w,labelY:E,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:s,style:u,markerEnd:h,markerStart:x,interactionWidth:S})});wi.displayName="SmoothStepEdge";const oa=m.memo(e=>{var t;return g(wi,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});oa.displayName="StepEdge";function rb({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,l]=Tc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,l]}const aa=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:s,style:u,markerEnd:f,markerStart:d,interactionWidth:h})=>{const[x,v,S]=rb({sourceX:e,sourceY:t,targetX:n,targetY:r});return g(pr,{path:x,labelX:v,labelY:S,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:l,labelBgPadding:c,labelBgBorderRadius:s,style:u,markerEnd:f,markerStart:d,interactionWidth:h})});aa.displayName="StraightEdge";function _r(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Cs({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case Y.Left:return[t-_r(t-r,o),n];case Y.Right:return[t+_r(r-t,o),n];case Y.Top:return[t,n-_r(n-i,o)];case Y.Bottom:return[t,n+_r(i-n,o)]}}function Dc({sourceX:e,sourceY:t,sourcePosition:n=Y.Bottom,targetX:r,targetY:i,targetPosition:o=Y.Top,curvature:a=.25}){const[l,c]=Cs({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[s,u]=Cs({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[f,d,h,x]=Pc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:s,targetControlY:u});return[`M${e},${t} C${l},${c} ${s},${u} ${r},${i}`,f,d,h,x]}const ti=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=Y.Bottom,targetPosition:o=Y.Top,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,pathOptions:v,interactionWidth:S})=>{const[p,w,E]=Dc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:v==null?void 0:v.curvature});return g(pr,{path:p,labelX:w,labelY:E,label:a,labelStyle:l,labelShowBg:c,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:h,markerStart:x,interactionWidth:S})});ti.displayName="BezierEdge";const sa=m.createContext(null),ib=sa.Provider;sa.Consumer;function Ao(e,t,n,r,i,o,a){const l=a.elementFromPoint(e.clientX,e.clientY),c=(l==null?void 0:l.classList.contains("target"))||!1,s=(l==null?void 0:l.classList.contains("source"))||!1,u={elementBelow:l,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(l&&(c||s)){u.isHoveringHandle=!0;const f=l.getAttribute("data-nodeid"),d=l.getAttribute("data-handleid"),h=n?{source:f,sourceHandle:d,target:r,targetHandle:i}:{source:r,sourceHandle:i,target:f,targetHandle:d};u.connection=h,(t===En.Strict?n&&s||!n&&c:!0)&&(u.isValid=o(h))}return u}function qi(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Fc({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:l,elementEdgeUpdaterType:c,onEdgeUpdateEnd:s}){const u=e.target.closest(".react-flow"),f=Ac(e.target);if(!f)return;const d=f.elementFromPoint(e.clientX,e.clientY),h=d==null?void 0:d.classList.contains("target"),x=d==null?void 0:d.classList.contains("source");if(!u||!h&&!x&&!c)return;const{onConnectStart:v,connectionMode:S}=o(),p=c||(h?"target":"source"),w=u.getBoundingClientRect();let E;a({connectionPosition:{x:e.clientX-w.left,y:e.clientY-w.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:p}),v==null||v(e,{nodeId:n,handleId:t,handleType:p});function y(M){a({connectionPosition:{x:M.clientX-w.left,y:M.clientY-w.top}});const{connection:N,elementBelow:R,isValid:F,isHoveringHandle:O}=Ao(M,S,i,n,t,l,f);if(!O)return qi(E);N.source!==N.target&&R&&(qi(E),E=R,R.classList.add("react-flow__handle-connecting"),R.classList.toggle("react-flow__handle-valid",F))}function _(M){var F,O;const{connection:N,isValid:R}=Ao(M,S,i,n,t,l,f);R&&(r==null||r(N)),(O=(F=o()).onConnectEnd)==null||O.call(F,M),c&&s&&s(M),qi(E),a({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",y),f.removeEventListener("mouseup",_)}f.addEventListener("mousemove",y),f.addEventListener("mouseup",_)}const ob=e=>"id"in e&&"source"in e&&"target"in e,ab=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Io=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,sb=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Lc=(e,t)=>{if(!e.source||!e.target)return t;let n;return ob(e)?n={...e}:n={...e,id:ab(e)},sb(n,t)?t:t.concat(n)},lb=({x:e,y:t},[n,r,i],o,[a,l])=>{const c={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(c.x/a),y:l*Math.round(c.y/l)}:c},xi=e=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const t=e.reduce((n,{positionAbsolute:r,position:i,width:o,height:a})=>Ic(n,Qr({x:r?r.x:i.x,y:r?r.y:i.y,width:o||0,height:a||0})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Rc(t)},zc=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},c=[];return e.forEach(s=>{const{positionAbsolute:u={x:0,y:0},width:f,height:d,selectable:h=!0}=s;if(a&&!h)return!1;const x={...u,width:f||0,height:d||0},v=To(l,x),S=typeof f>"u"||typeof d>"u"||f===null||d===null,p=o&&v>0,w=(f||0)*(d||0);(S||p||v>=w||s.dragging)&&c.push(s)}),c},Bc=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Hc=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),l=n/(e.height*(1+o)),c=Math.min(a,l),s=yn(c,r,i),u=e.x+e.width/2,f=e.y+e.height/2,d=t/2-u*s,h=n/2-f*s;return[d,h,s]},Ut=(e,t=0)=>e.transition().duration(t),cb=()=>!0,ub=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Wc=m.forwardRef(({type:e="source",position:t=Y.Top,isValidConnection:n=cb,isConnectable:r=!0,id:i,onConnect:o,children:a,className:l,onMouseDown:c,...s},u)=>{const f=Ie(),d=m.useContext(sa),{connectionStartHandle:h,connectOnClick:x,noPanClassName:v}=Ee(ub,je),S=i||null,p=e==="target",w=_=>{const{defaultEdgeOptions:M,onConnect:N,hasDefaultEdges:R}=f.getState(),F={...M,..._};if(R){const{edges:O}=f.getState();f.setState({edges:Lc(F,O)})}N==null||N(F),o==null||o(F)},E=_=>{_.button===0&&Fc({event:_,handleId:S,nodeId:d,onConnect:w,isTarget:p,getState:f.getState,setState:f.setState,isValidConnection:n}),c==null||c(_)},y=_=>{const{onClickConnectStart:M,onClickConnectEnd:N,connectionMode:R}=f.getState();if(!h){M==null||M(_,{nodeId:d,handleId:S,handleType:e}),f.setState({connectionStartHandle:{nodeId:d,type:e,handleId:S}});return}const F=Ac(_.target),{connection:O,isValid:W}=Ao(_,R,h.type==="target",h.nodeId,h.handleId||null,n,F);W&&w(O),N==null||N(_),f.setState({connectionStartHandle:null})};return g("div",{"data-handleid":S,"data-nodeid":d,"data-handlepos":t,className:ze(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,l,{source:!p,target:p,connectable:r,connecting:(h==null?void 0:h.nodeId)===d&&(h==null?void 0:h.handleId)===S&&(h==null?void 0:h.type)===e}]),onMouseDown:E,onClick:x?y:void 0,ref:u,...s,children:a})});Wc.displayName="Handle";var sr=m.memo(Wc);const Uc=({data:e,isConnectable:t,targetPosition:n=Y.Top,sourcePosition:r=Y.Bottom})=>G(ve,{children:[g(sr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g(sr,{type:"source",position:r,isConnectable:t})]});Uc.displayName="DefaultNode";var Ro=m.memo(Uc);const Vc=({data:e,isConnectable:t,sourcePosition:n=Y.Bottom})=>G(ve,{children:[e==null?void 0:e.label,g(sr,{type:"source",position:n,isConnectable:t})]});Vc.displayName="InputNode";var jc=m.memo(Vc);const Xc=({data:e,isConnectable:t,targetPosition:n=Y.Top})=>G(ve,{children:[g(sr,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});Xc.displayName="OutputNode";var Yc=m.memo(Xc);const la=()=>null;la.displayName="GroupNode";const db=e=>({selectedNodes:Array.from(e.nodeInternals.values()).filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Mr=e=>e.id;function fb(e,t){return je(e.selectedNodes.map(Mr),t.selectedNodes.map(Mr))&&je(e.selectedEdges.map(Mr),t.selectedEdges.map(Mr))}const Gc=m.memo(({onSelectionChange:e})=>{const t=Ie(),{selectedNodes:n,selectedEdges:r}=Ee(db,fb);return m.useEffect(()=>{var o,a;const i={nodes:n,edges:r};e==null||e(i),(a=(o=t.getState()).onSelectionChange)==null||a.call(o,i)},[n,r,e]),null});Gc.displayName="SelectionListener";const hb=e=>!!e.onSelectionChange;function pb({onSelectionChange:e}){const t=Ee(hb);return e||t?g(Gc,{onSelectionChange:e}):null}const mb=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function on(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function fe(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const gb=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:s,nodesConnectable:u,nodesFocusable:f,edgesFocusable:d,minZoom:h,maxZoom:x,nodeExtent:v,onNodesChange:S,onEdgesChange:p,elementsSelectable:w,connectionMode:E,snapGrid:y,snapToGrid:_,translateExtent:M,connectOnClick:N,defaultEdgeOptions:R,fitView:F,fitViewOptions:O,onNodesDelete:W,onEdgesDelete:q,onNodeDrag:K,onNodeDragStart:b,onNodeDragStop:T,onSelectionDrag:C,onSelectionDragStart:P,onSelectionDragStop:k,noPanClassName:z,nodeOrigin:I,rfId:D})=>{const{setNodes:H,setEdges:j,setDefaultNodesAndEdges:U,setMinZoom:J,setMaxZoom:se,setTranslateExtent:ee,setNodeExtent:te,reset:le}=Ee(mb,je),V=Ie();return m.useEffect(()=>{const _e=r==null?void 0:r.map(we=>({...we,...R}));return U(n,_e),()=>{le()}},[]),fe("defaultEdgeOptions",R,V.setState),fe("connectionMode",E,V.setState),fe("onConnect",i,V.setState),fe("onConnectStart",o,V.setState),fe("onConnectEnd",a,V.setState),fe("onClickConnectStart",l,V.setState),fe("onClickConnectEnd",c,V.setState),fe("nodesDraggable",s,V.setState),fe("nodesConnectable",u,V.setState),fe("nodesFocusable",f,V.setState),fe("edgesFocusable",d,V.setState),fe("elementsSelectable",w,V.setState),fe("snapToGrid",_,V.setState),fe("snapGrid",y,V.setState),fe("onNodesChange",S,V.setState),fe("onEdgesChange",p,V.setState),fe("connectOnClick",N,V.setState),fe("fitViewOnInit",F,V.setState),fe("fitViewOnInitOptions",O,V.setState),fe("onNodesDelete",W,V.setState),fe("onEdgesDelete",q,V.setState),fe("onNodeDrag",K,V.setState),fe("onNodeDragStart",b,V.setState),fe("onNodeDragStop",T,V.setState),fe("onSelectionDrag",C,V.setState),fe("onSelectionDragStart",P,V.setState),fe("onSelectionDragStop",k,V.setState),fe("noPanClassName",z,V.setState),fe("nodeOrigin",I,V.setState),fe("rfId",D,V.setState),on(e,H),on(t,j),on(h,J),on(x,se),on(M,ee),on(v,te),null},Ns={display:"none"},yb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Kc="react-flow__node-desc",qc="react-flow__edge-desc",vb="react-flow__aria-live",bb=e=>e.ariaLiveMessage;function wb({rfId:e}){const t=Ee(bb);return g("div",{id:`${vb}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:yb,children:t})}function xb({rfId:e,disableKeyboardA11y:t}){return G(ve,{children:[G("div",{id:`${Kc}-${e}`,style:Ns,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g("div",{id:`${qc}-${e}`,style:Ns,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g(wb,{rfId:e})]})}const Sb=(e,t,n)=>n===Y.Left?e-t:n===Y.Right?e+t:e,Eb=(e,t,n)=>n===Y.Top?e-t:n===Y.Bottom?e+t:e,Ts="react-flow__edgeupdater",Ps=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:l})=>g("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:ze([Ts,`${Ts}-${l}`]),cx:Sb(t,r,e),cy:Eb(n,r,e),r,stroke:"transparent",fill:"transparent"});var an=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:l,selected:c,animated:s,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:v,style:S,source:p,target:w,sourceX:E,sourceY:y,targetX:_,targetY:M,sourcePosition:N,targetPosition:R,elementsSelectable:F,hidden:O,sourceHandleId:W,targetHandleId:q,onContextMenu:K,onMouseEnter:b,onMouseMove:T,onMouseLeave:C,edgeUpdaterRadius:P,onEdgeUpdate:k,onEdgeUpdateStart:z,onEdgeUpdateEnd:I,markerEnd:D,markerStart:H,rfId:j,ariaLabel:U,isFocusable:J,pathOptions:se,interactionWidth:ee})=>{const te=m.useRef(null),[le,V]=m.useState(!1),[_e,we]=m.useState(!1),he=Ie(),$e=m.useMemo(()=>`url(#${Io(H,j)})`,[H,j]),Q=m.useMemo(()=>`url(#${Io(D,j)})`,[D,j]);if(O)return null;const ce=xe=>{const{edges:Te,addSelectedEdges:Ye}=he.getState();if(F&&(he.setState({nodesSelectionActive:!1}),Ye([n])),a){const Qe=Te.find(De=>De.id===n);a(xe,Qe)}},ae=Ln(n,he.getState,l),A=Ln(n,he.getState,K),$=Ln(n,he.getState,b),L=Ln(n,he.getState,T),X=Ln(n,he.getState,C),Z=(xe,Te)=>{const Ye=Te?w:p,Qe=(Te?q:W)||null,De=Te?"target":"source",Tt=()=>!0,Me=Te,Ne=he.getState().edges.find(gt=>gt.id===n);we(!0),z==null||z(xe,Ne,De);const et=gt=>{we(!1),I==null||I(gt,Ne,De)};Fc({event:xe,handleId:Qe,nodeId:Ye,onConnect:gt=>k==null?void 0:k(Ne,gt),isTarget:Me,getState:he.getState,setState:he.setState,isValidConnection:Tt,elementEdgeUpdaterType:De,onEdgeUpdateEnd:et})},pe=xe=>Z(xe,!0),oe=xe=>Z(xe,!1),re=()=>V(!0),ue=()=>V(!1),ge=!F&&!a,Ce=typeof k<"u",Xe=xe=>{var Te;if(Oc.includes(xe.key)&&F){const{unselectNodesAndEdges:Ye,addSelectedEdges:Qe,edges:De}=he.getState();xe.key==="Escape"?((Te=te.current)==null||Te.blur(),Ye({edges:[De.find(Me=>Me.id===n)]})):Qe([n])}};return G("g",{className:ze(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:c,animated:s,inactive:ge,updating:le}]),onClick:ce,onDoubleClick:ae,onContextMenu:A,onMouseEnter:$,onMouseMove:L,onMouseLeave:X,onKeyDown:J?Xe:void 0,tabIndex:J?0:void 0,role:J?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${p} to ${w}`,"aria-describedby":J?`${qc}-${j}`:void 0,ref:te,children:[!_e&&g(e,{id:n,source:p,target:w,selected:c,animated:s,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:v,data:o,style:S,sourceX:E,sourceY:y,targetX:_,targetY:M,sourcePosition:N,targetPosition:R,sourceHandleId:W,targetHandleId:q,markerStart:$e,markerEnd:Q,pathOptions:se,interactionWidth:ee}),Ce&&G(ve,{children:[g(Ps,{position:N,centerX:E,centerY:y,radius:P,onMouseDown:pe,onMouseEnter:re,onMouseOut:ue,type:"source"}),g(Ps,{position:R,centerX:_,centerY:M,radius:P,onMouseDown:oe,onMouseEnter:re,onMouseOut:ue,type:"target"})]})]})};return t.displayName="EdgeWrapper",m.memo(t)};function _b(e){const t={default:an(e.default||ti),straight:an(e.bezier||aa),step:an(e.step||oa),smoothstep:an(e.step||wi),simplebezier:an(e.simplebezier||ia)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=an(e[o]||ti),i),n);return{...t,...r}}function As(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case Y.Top:return{x:r+o/2,y:i};case Y.Right:return{x:r+o,y:i+a/2};case Y.Bottom:return{x:r+o/2,y:i+a};case Y.Left:return{x:r,y:i+a/2}}}function Is(e,t){if(!e)return null;let n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(r=>r.id===t)),typeof n>"u"?null:n}const Mb=(e,t,n,r,i,o)=>{const a=As(n,e,t),l=As(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:l.x,targetY:l.y}};function Cb({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:l,transform:c}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const u=Qr({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:a/c[2],height:l/c[2]}),f=Math.max(0,Math.min(u.x2,s.x2)-Math.max(u.x,s.x)),d=Math.max(0,Math.min(u.y2,s.y2)-Math.max(u.y,s.y));return Math.ceil(f*d)>0}function Rs(e){var r,i,o,a,l;const t=((r=e==null?void 0:e[ke])==null?void 0:r.handleBounds)||null,n=!e||!t||!e.width||!e.height||typeof((i=e.positionAbsolute)==null?void 0:i.x)>"u"||typeof((o=e.positionAbsolute)==null?void 0:o.y)>"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((l=e==null?void 0:e.positionAbsolute)==null?void 0:l.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!n]}function Jc(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Jc(n,t):!1}function $s(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Nb(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!Jc(r,e))).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:t.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function Zc(e,t,n,r){var l,c,s,u;let i=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const f=n.get(e.parentNode);i=f!=null&&f.positionAbsolute&&(f!=null&&f.width)&&(f!=null&&f.height)?[[f.positionAbsolute.x,f.positionAbsolute.y],[f.positionAbsolute.x+f.width-e.width,f.positionAbsolute.y+f.height-e.height]]:i}else i=r;else if(e.extent&&e.parentNode){const f=n.get(e.parentNode),d=((l=f==null?void 0:f.positionAbsolute)==null?void 0:l.x)??0,h=((c=f==null?void 0:f.positionAbsolute)==null?void 0:c.y)??0;i=[[e.extent[0][0]+d,e.extent[0][1]+h],[e.extent[1][0]+d,e.extent[1][1]+h]]}let o={x:0,y:0};if(e.parentNode){const f=n.get(e.parentNode);o={x:((s=f==null?void 0:f.positionAbsolute)==null?void 0:s.x)??0,y:((u=f==null?void 0:f.positionAbsolute)==null?void 0:u.y)??0}}const a=i?ra(t,i):t;return{position:{x:a.x-o.x,y:a.y-o.y},positionAbsolute:a}}function Ji({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const Os=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),l={x:a.width*r[0],y:a.height*r[1]};return o.map(c=>{const s=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(s.left-a.left-l.x)/n,y:(s.top-a.top-l.y)/n,...na(c)}})};function zn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);n(r,{...i})}}function $o({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a}=t.getState(),l=a.get(e);t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&i({nodes:[l]}):r([e])}function Zi(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Qc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const[l,c]=m.useState(!1),s=Ie(),u=m.useRef(),f=m.useRef({x:null,y:null}),d=m.useCallback(({sourceEvent:h})=>{const{transform:x,snapGrid:v,snapToGrid:S}=s.getState(),p=h.touches?h.touches[0].clientX:h.clientX,w=h.touches?h.touches[0].clientY:h.clientY,E={x:(p-x[0])/x[2],y:(w-x[1])/x[2]};return{xSnapped:S?v[0]*Math.round(E.x/v[0]):E.x,ySnapped:S?v[1]*Math.round(E.y/v[1]):E.y,...E}},[]);return m.useEffect(()=>{if(e!=null&&e.current){const h=rt(e.current);if(t)h.on(".drag",null);else{const x=ny().on("start",v=>{var N;const{nodeInternals:S,multiSelectionActive:p,unselectNodesAndEdges:w,onNodeDragStart:E,onSelectionDragStart:y}=s.getState(),_=i?E:Zi(y);!a&&!p&&i&&((N=S.get(i))!=null&&N.selected||w()),i&&o&&a&&$o({id:i,store:s});const M=d(v);if(f.current=M,u.current=Nb(S,M,i),_&&u.current){const[R,F]=Ji({nodeId:i,dragItems:u.current,nodeInternals:S});_(v.sourceEvent,R,F)}}).on("drag",v=>{const{updateNodePositions:S,nodeInternals:p,nodeExtent:w,onNodeDrag:E,onSelectionDrag:y,snapGrid:_,snapToGrid:M}=s.getState(),N=d(v);if((f.current.x!==N.xSnapped||f.current.y!==N.ySnapped)&&u.current){f.current={x:N.xSnapped,y:N.ySnapped},u.current=u.current.map(F=>{const O={x:N.x-F.distance.x,y:N.y-F.distance.y};M&&(O.x=_[0]*Math.round(O.x/_[0]),O.y=_[1]*Math.round(O.y/_[1]));const W=Zc(F,O,p,w);return F.position=W.position,F.positionAbsolute=W.positionAbsolute,F});const R=i?E:Zi(y);if(S(u.current,!0,!0),c(!0),R){const[F,O]=Ji({nodeId:i,dragItems:u.current,nodeInternals:p});R(v.sourceEvent,F,O)}}}).on("end",v=>{if(c(!1),u.current){const{updateNodePositions:S,nodeInternals:p,onNodeDragStop:w,onSelectionDragStop:E}=s.getState(),y=i?w:Zi(E);if(S(u.current,!1,!1),y){const[_,M]=Ji({nodeId:i,dragItems:u.current,nodeInternals:p});y(v.sourceEvent,_,M)}}}).filter(v=>{const S=v.target;return!v.button&&(!n||!$s(S,`.${n}`,e))&&(!r||$s(S,r,e))});return h.call(x),()=>{h.on(".drag",null)}}}},[e,t,n,r,o,s,i,a,d]),l}function eu(){const e=Ie();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,snapToGrid:a,snapGrid:l}=e.getState(),s=Array.from(r.values()).filter(u=>u.selected).map(u=>{if(u.positionAbsolute){const f={x:u.positionAbsolute.x+n.x,y:u.positionAbsolute.y+n.y};a&&(f.x=l[0]*Math.round(f.x/l[0]),f.y=l[1]*Math.round(f.y/l[1]));const d=Zc(u,f,r,i);u.position=d.position,u.positionAbsolute=d.positionAbsolute}return u});o(s,!0,!0)},[])}const Gn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Bn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:l,yPosOrigin:c,selected:s,onClick:u,onMouseEnter:f,onMouseMove:d,onMouseLeave:h,onContextMenu:x,onDoubleClick:v,style:S,className:p,isDraggable:w,isSelectable:E,isConnectable:y,isFocusable:_,selectNodesOnDrag:M,sourcePosition:N,targetPosition:R,hidden:F,resizeObserver:O,dragHandle:W,zIndex:q,isParent:K,noDragClassName:b,noPanClassName:T,initialized:C,disableKeyboardA11y:P,ariaLabel:k,rfId:z})=>{const I=Ie(),D=m.useRef(null),H=m.useRef(N),j=m.useRef(R),U=m.useRef(r),J=E||w||u||f||d||h,se=eu(),ee=zn(n,I.getState,f),te=zn(n,I.getState,d),le=zn(n,I.getState,h),V=zn(n,I.getState,x),_e=zn(n,I.getState,v),we=Q=>{if(E&&(!M||!w)&&$o({id:n,store:I}),u){const ce=I.getState().nodeInternals.get(n);u(Q,{...ce})}},he=Q=>{var A;const{snapGrid:ce,snapToGrid:ae}=I.getState();if(Oc.includes(Q.key)&&E){const $=Q.key==="Escape";$&&((A=D.current)==null||A.blur()),$o({id:n,store:I,unselect:$})}else if(!P&&w&&s&&Object.prototype.hasOwnProperty.call(Gn,Q.key)){I.setState({ariaLiveMessage:`Moved selected node ${Q.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`});const $=ae?ce[0]:5,L=ae?ce[1]:5,X=Q.shiftKey?4:1;se({x:Gn[Q.key].x*$*X,y:Gn[Q.key].y*L*X})}};m.useEffect(()=>{if(D.current&&!F){const Q=D.current;return O==null||O.observe(Q),()=>O==null?void 0:O.unobserve(Q)}},[F]),m.useEffect(()=>{const Q=U.current!==r,ce=H.current!==N,ae=j.current!==R;D.current&&(Q||ce||ae)&&(Q&&(U.current=r),ce&&(H.current=N),ae&&(j.current=R),I.getState().updateNodeDimensions([{id:n,nodeElement:D.current,forceUpdate:!0}]))},[n,r,N,R]);const $e=Qc({nodeRef:D,disabled:F||!w,noDragClassName:b,handleSelector:W,nodeId:n,isSelectable:E,selectNodesOnDrag:M});return F?null:g("div",{className:ze(["react-flow__node",`react-flow__node-${r}`,{[T]:w},p,{selected:s,selectable:E,parent:K,dragging:$e}]),ref:D,style:{zIndex:q,transform:`translate(${l}px,${c}px)`,pointerEvents:J?"all":"none",visibility:C?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ee,onMouseMove:te,onMouseLeave:le,onContextMenu:V,onClick:we,onDoubleClick:_e,onKeyDown:_?he:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":P?void 0:`${Kc}-${z}`,"aria-label":k,children:g(ib,{value:n,children:g(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:s,isConnectable:y,sourcePosition:N,targetPosition:R,dragging:$e,dragHandle:W,zIndex:q})})})};return t.displayName="NodeWrapper",m.memo(t)};function Tb(e){const t={input:Bn(e.input||jc),default:Bn(e.default||Ro),output:Bn(e.output||Yc),group:Bn(e.group||la)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Bn(e[o]||Ro),i),n);return{...t,...r}}const Pb=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Ab=typeof document<"u"?document:null;var ni=(e=null,t={target:Ab})=>{const[n,r]=m.useState(!1),i=m.useRef(new Set([])),[o,a]=m.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.split("+")),s=c.reduce((u,f)=>u.concat(...f),[]);return[c,s]}return[[],[]]},[e]);return m.useEffect(()=>{var l,c;if(e!==null){const s=d=>{if(Fs(d))return!1;const h=Ds(d.code,a);i.current.add(d[h]),ks(o,i.current,!1)&&(d.preventDefault(),r(!0))},u=d=>{if(Fs(d))return!1;const h=Ds(d.code,a);ks(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(d[h])},f=()=>{i.current.clear(),r(!1)};return(l=t==null?void 0:t.target)==null||l.addEventListener("keydown",s),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",u),window.addEventListener("blur",f),()=>{var d,h;(d=t==null?void 0:t.target)==null||d.removeEventListener("keydown",s),(h=t==null?void 0:t.target)==null||h.removeEventListener("keyup",u),window.removeEventListener("blur",f)}}},[e,r]),n};function ks(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Ds(e,t){return t.includes(e)?"code":"key"}function Fs(e){var n;const t=((n=e.composedPath)==null?void 0:n.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}function tu(e,t,n,r){var o,a,l,c;if(!e.parentNode)return r;const i=t.get(e.parentNode);return tu(i,t,n,{x:(r.x??0)+(((o=i.position)==null?void 0:o.x)??0),y:(r.y??0)+(((a=i.position)==null?void 0:a.y)??0),z:(((l=i[ke])==null?void 0:l.z)??0)>(r.z??0)?((c=i[ke])==null?void 0:c.z)??0:r.z??0})}function Qi(e,t){const n=new Map,r={};return e.forEach(i=>{var c;const o=$c(i.zIndex)?i.zIndex:i.selected?1e3:0,a=t.get(i.id),l={width:a==null?void 0:a.width,height:a==null?void 0:a.height,...i,positionAbsolute:{x:i.position.x,y:i.position.y}};i.parentNode&&(l.parentNode=i.parentNode,r[i.parentNode]=!0),Object.defineProperty(l,ke,{enumerable:!1,value:{handleBounds:(c=a==null?void 0:a[ke])==null?void 0:c.handleBounds,z:o}}),n.set(i.id,l)}),n.forEach(i=>{var o;if(i.parentNode&&!n.has(i.parentNode))throw new Error(`Parent node ${i.parentNode} not found`);if(i.parentNode||r[i.id]){const{x:a,y:l,z:c}=tu(i,n,r,{...i.position,z:((o=i[ke])==null?void 0:o.z)??0});i.positionAbsolute={x:a,y:l},i[ke].z=c,r[i.id]&&(i[ke].isParent=!0)}}),n}function nu(e,t={}){const{nodeInternals:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:l,d3Selection:c,fitViewOnInitDone:s,fitViewOnInit:u}=e();if((t.initial&&!s&&u||!t.initial)&&l&&c){const f=Array.from(n.values()).filter(h=>t.includeHiddenNodes?h.width&&h.height:!h.hidden),d=f.every(h=>h.width&&h.height);if(f.length>0&&d){const h=xi(f),[x,v,S]=Hc(h,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),p=Dt.translate(x,v).scale(S);return typeof t.duration=="number"&&t.duration>0?l.transform(Ut(c,t.duration),p):l.transform(c,p),!0}}return!1}function Ib(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ke]:r[ke],selected:n.selected})}),new Map(t)}function Rb(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Cr({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:l,hasDefaultNodes:c,hasDefaultEdges:s}=n();e!=null&&e.length&&(c&&r({nodeInternals:Ib(e,i)}),a==null||a(e)),t!=null&&t.length&&(s&&r({edges:Rb(t,o)}),l==null||l(t))}const Wt=()=>{},$b={zoomIn:Wt,zoomOut:Wt,zoomTo:Wt,getZoom:()=>1,setViewport:Wt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:Wt,setCenter:Wt,fitBounds:Wt,project:e=>e,viewportInitialized:!1},Ob=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),kb=()=>{const e=Ie(),{d3Zoom:t,d3Selection:n}=Ee(Ob,je);return m.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Ut(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Ut(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(Ut(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,l,c]=e.getState().transform,s=Dt.translate(i.x??a,i.y??l).scale(i.zoom??c);t.transform(Ut(n,o==null?void 0:o.duration),s)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>nu(e.getState,i),setCenter:(i,o,a)=>{const{width:l,height:c,maxZoom:s}=e.getState(),u=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:s,f=l/2-i*u,d=c/2-o*u,h=Dt.translate(f,d).scale(u);t.transform(Ut(n,a==null?void 0:a.duration),h)},fitBounds:(i,o)=>{const{width:a,height:l,minZoom:c,maxZoom:s}=e.getState(),[u,f,d]=Hc(i,a,l,c,s,(o==null?void 0:o.padding)??.1),h=Dt.translate(u,f).scale(d);t.transform(Ut(n,o==null?void 0:o.duration),h)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:l}=e.getState();return lb(i,o,a,l)},viewportInitialized:!0}:$b,[t,n])};function Si(){const e=kb(),t=Ie(),n=m.useCallback(()=>{const{nodeInternals:v}=t.getState();return Array.from(v.values()).map(p=>({...p}))},[]),r=m.useCallback(v=>{const{nodeInternals:S}=t.getState();return S.get(v)},[]),i=m.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(S=>({...S}))},[]),o=m.useCallback(v=>{const{edges:S=[]}=t.getState();return S.find(p=>p.id===v)},[]),a=m.useCallback(v=>{const{nodeInternals:S,setNodes:p,hasDefaultNodes:w,onNodesChange:E}=t.getState(),y=Array.from(S.values()),_=typeof v=="function"?v(y):v;if(w)p(_);else if(E){const M=_.length===0?y.map(N=>({type:"remove",id:N.id})):_.map(N=>({item:N,type:"reset"}));E(M)}},[]),l=m.useCallback(v=>{const{edges:S=[],setEdges:p,hasDefaultEdges:w,onEdgesChange:E}=t.getState(),y=typeof v=="function"?v(S):v;if(w)p(y);else if(E){const _=y.length===0?S.map(M=>({type:"remove",id:M.id})):y.map(M=>({item:M,type:"reset"}));E(_)}},[]),c=m.useCallback(v=>{const S=Array.isArray(v)?v:[v],{nodeInternals:p,setNodes:w,hasDefaultNodes:E,onNodesChange:y}=t.getState();if(E){const M=[...Array.from(p.values()),...S];w(M)}else if(y){const _=S.map(M=>({item:M,type:"add"}));y(_)}},[]),s=m.useCallback(v=>{const S=Array.isArray(v)?v:[v],{edges:p=[],setEdges:w,hasDefaultEdges:E,onEdgesChange:y}=t.getState();if(E)w([...p,...S]);else if(y){const _=S.map(M=>({item:M,type:"add"}));y(_)}},[]),u=m.useCallback(()=>{const{nodeInternals:v,edges:S=[],transform:p}=t.getState(),w=Array.from(v.values()),[E,y,_]=p;return{nodes:w.map(M=>({...M})),edges:S.map(M=>({...M})),viewport:{x:E,y,zoom:_}}},[]),f=m.useCallback(({nodes:v,edges:S})=>{const{nodeInternals:p,edges:w,hasDefaultNodes:E,hasDefaultEdges:y,onNodesDelete:_,onEdgesDelete:M,onNodesChange:N,onEdgesChange:R}=t.getState(),F=Array.from(p.values()),O=(v||[]).map(T=>T.id),W=(S||[]).map(T=>T.id),q=F.reduce((T,C)=>{const P=!O.includes(C.id)&&C.parentNode&&T.find(z=>z.id===C.parentNode);return(typeof C.deletable=="boolean"?C.deletable:!0)&&(O.includes(C.id)||P)&&T.push(C),T},[]),K=w.filter(T=>typeof T.deletable=="boolean"?T.deletable:!0),b=K.filter(T=>W.includes(T.id));if(q||b){const T=Bc(q,K),C=[...b,...T],P=C.reduce((k,z)=>(k.includes(z.id)||k.push(z.id),k),[]);if((y||E)&&(y&&t.setState({edges:w.filter(k=>!P.includes(k.id))}),E&&(q.forEach(k=>{p.delete(k.id)}),t.setState({nodeInternals:new Map(p)}))),P.length>0&&(M==null||M(C),R&&R(P.map(k=>({id:k,type:"remove"})))),q.length>0&&(_==null||_(q),N)){const k=q.map(z=>({id:z.id,type:"remove"}));N(k)}}},[]),d=m.useCallback(v=>{const S=Zv(v),p=S?null:t.getState().nodeInternals.get(v.id);return[S?v:Ss(p),p,S]},[]),h=m.useCallback((v,S=!0,p)=>{const[w,E,y]=d(v);return w?(p||Array.from(t.getState().nodeInternals.values())).filter(_=>{if(!y&&(_.id===E.id||!_.positionAbsolute))return!1;const M=Ss(_),N=To(M,w);return S&&N>0||N>=v.width*v.height}):[]},[]),x=m.useCallback((v,S,p=!0)=>{const[w]=d(v);if(!w)return!1;const E=To(w,S);return p&&E>0||E>=v.width*v.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:l,addNodes:c,addEdges:s,toObject:u,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:x}),[e,n,r,i,o,a,l,c,s,u,f,h,x])}var Db=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ie(),{deleteElements:r}=Si(),i=ni(e),o=ni(t);m.useEffect(()=>{if(i){const{nodeInternals:a,edges:l}=n.getState(),s=Array.from(a.values()).filter(f=>f.selected),u=l.filter(f=>f.selected);r({nodes:s,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),m.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Fb(e){const t=Ie();m.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const i=na(e.current);i.height===0||i.width,t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const ca={position:"absolute",width:"100%",height:"100%",top:0,left:0},Lb=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,eo=e=>({x:e.x,y:e.y,zoom:e.k}),Nr=(e,t)=>e.target.closest(`.${t}`),zb=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler}),Bb=({onMove:e,onMoveStart:t,onMoveEnd:n,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=gn.Free,zoomOnDoubleClick:c=!0,selectionKeyPressed:s,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:d,translateExtent:h,minZoom:x,maxZoom:v,zoomActivationKeyCode:S,preventScrolling:p=!0,children:w,noWheelClassName:E,noPanClassName:y})=>{const _=m.useRef(),M=Ie(),N=m.useRef(!1),R=m.useRef(null),F=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:W,d3ZoomHandler:q}=Ee(zb,je),K=ni(S);return Fb(R),m.useEffect(()=>{if(R.current){const b=Cc().scaleExtent([x,v]).translateExtent(h),T=rt(R.current).call(b),C=yn(d.x,h[0][0],h[1][0]),P=yn(d.y,h[0][1],h[1][1]),k=yn(d.zoom,x,v),z=Dt.translate(C,P).scale(k);b.transform(T,z),M.setState({d3Zoom:b,d3Selection:T,d3ZoomHandler:T.on("wheel.zoom"),transform:[C,P,k],domNode:R.current.closest(".react-flow")})}},[]),m.useEffect(()=>{W&&O&&(o&&!K?W.on("wheel.zoom",b=>{if(Nr(b,E))return!1;b.preventDefault(),b.stopImmediatePropagation();const T=W.property("__zoom").k||1;if(b.ctrlKey&&i){const z=lt(b),I=-b.deltaY*(b.deltaMode===1?.05:b.deltaMode?1:.002)*10,D=T*Math.pow(2,I);O.scaleTo(W,D,z);return}const C=b.deltaMode===1?20:1,P=l===gn.Vertical?0:b.deltaX*C,k=l===gn.Horizontal?0:b.deltaY*C;O.translateBy(W,-(P/T)*a,-(k/T)*a)}):typeof q<"u"&&W.on("wheel.zoom",function(b,T){if(!p||Nr(b,E))return null;b.preventDefault(),q.call(this,b,T)}))},[o,l,W,O,q,K,i,p,E]),m.useEffect(()=>{O&&(s&&!N.current?O.on("zoom",null):s||O.on("zoom",b=>{const{onViewportChange:T}=M.getState();if(M.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),e||T){const C=eo(b.transform);T==null||T(C),e==null||e(b.sourceEvent,C)}}))},[s,O,e]),m.useEffect(()=>{O&&O.on("start",b=>{var C;if(!b.sourceEvent)return null;const{onViewportChangeStart:T}=M.getState();if(N.current=!0,((C=b.sourceEvent)==null?void 0:C.type)==="mousedown"&&M.setState({paneDragging:!0}),t||T){const P=eo(b.transform);F.current=P,T==null||T(P),t==null||t(b.sourceEvent,P)}})},[O,t]),m.useEffect(()=>{O&&O.on("end",b=>{if(!b.sourceEvent)return null;const{onViewportChangeEnd:T}=M.getState();if(N.current=!1,M.setState({paneDragging:!1}),(n||T)&&Lb(F.current,b.transform)){const C=eo(b.transform);F.current=C,clearTimeout(_.current),_.current=setTimeout(()=>{T==null||T(C),n==null||n(b.sourceEvent,C)},o?150:0)}})},[O,n,o]),m.useEffect(()=>{O&&O.filter(b=>{const T=K||r,C=i&&b.ctrlKey;return b.button===1&&b.type==="mousedown"&&b.target.closest(".react-flow__node")?!0:!f&&!T&&!o&&!c&&!i||s||!c&&b.type==="dblclick"||Nr(b,E)&&b.type==="wheel"||Nr(b,y)&&b.type!=="wheel"||!i&&b.ctrlKey&&b.type==="wheel"||!T&&!o&&!C&&b.type==="wheel"||!f&&(b.type==="mousedown"||b.type==="touchstart")?!1:(!b.ctrlKey||b.type==="wheel")&&(!b.button||b.button<=1)})},[O,r,i,o,c,f,s,u,K]),g("div",{className:"react-flow__renderer",ref:R,style:ca,children:w})};function Ls(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function ru(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.find(a=>a.id===i.id);if(o)switch(o.type){case"select":return r.push({...i,selected:o.selected}),r;case"position":{const a={...i};return typeof o.position<"u"&&(a.position=o.position),typeof o.positionAbsolute<"u"&&(a.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(a.dragging=o.dragging),a.expandParent&&Ls(r,a),r.push(a),r}case"dimensions":{const a={...i};return typeof o.dimensions<"u"&&(a.width=o.dimensions.width,a.height=o.dimensions.height),a.expandParent&&Ls(r,a),r.push(a),r}case"remove":return r}return r.push(i),r},n)}function ua(e,t){return ru(e,t)}function Hb(e,t){return ru(e,t)}const At=(e,t)=>({id:e,type:"select",selected:t});function un(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(At(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(At(r.id,!1))),n},[])}function zs(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Wb=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable}),Bs={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},iu=m.memo(({selectionKeyPressed:e})=>{const t=Ie(),n=m.useRef(0),r=m.useRef(0),i=m.useRef(),[o,a]=m.useState(Bs),{userSelectionActive:l,elementsSelectable:c}=Ee(Wb,je);if(!c||!(l||e))return null;const u=()=>{a(Bs),t.setState({userSelectionActive:!1}),n.current=0,r.current=0};return g("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:v=>{const S=v.target.closest(".react-flow");i.current=S.getBoundingClientRect();const p=zs(v,i.current);a({width:0,height:0,startX:p.x,startY:p.y,x:p.x,y:p.y,draw:!0}),t.setState({userSelectionActive:!0,nodesSelectionActive:!1})},onMouseMove:v=>{if(!e||!o.draw||!i.current)return;const S=zs(v,i.current),p=o.startX??0,w=o.startY??0,E={...o,x:S.x<p?S.x:p,y:S.y<w?S.y:w,width:Math.abs(S.x-p),height:Math.abs(S.y-w)},{nodeInternals:y,edges:_,transform:M,onNodesChange:N,onEdgesChange:R}=t.getState(),F=Array.from(y.values()),O=zc(y,E,M,!1,!0),W=Bc(O,_).map(K=>K.id),q=O.map(K=>K.id);if(n.current!==q.length){n.current=q.length;const K=un(F,q);K.length&&(N==null||N(K))}if(r.current!==W.length){r.current=W.length;const K=un(_,W);K.length&&(R==null||R(K))}a(E)},onMouseUp:()=>{t.setState({nodesSelectionActive:n.current>0}),u()},onMouseLeave:()=>{t.setState({nodesSelectionActive:!1}),u()},children:o.draw&&g("div",{className:"react-flow__selection react-flow__container",style:{width:o.width,height:o.height,transform:`translate(${o.x}px, ${o.y}px)`}})})});iu.displayName="UserSelection";const Ub=e=>({transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive,...xi(Array.from(e.nodeInternals.values()).filter(t=>t.selected))}),Vb=e=>{const t=Array.from(e.nodeInternals.values()).filter(n=>n.selected);return xi(t)};function jb({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ie(),{transformString:i,userSelectionActive:o}=Ee(Ub,je),{width:a,height:l,x:c,y:s}=Ee(Vb,je),u=eu(),f=m.useRef(null);if(m.useEffect(()=>{var x;n||(x=f.current)==null||x.focus()},[n]),Qc({nodeRef:f}),o||!a||!l)return null;const d=e?x=>{const v=Array.from(r.getState().nodeInternals.values()).filter(S=>S.selected);e(x,v)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(Gn,x.key)&&u(Gn[x.key])};return g("div",{className:ze(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:g("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:a,height:l,top:s,left:c}})})}var Xb=m.memo(jb);const Yb=e=>e.paneDragging;function Gb({onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:i,onWheel:o}){const a=Ee(Yb);return g("div",{className:ze(["react-flow__pane",{dragging:a}]),onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:i,onWheel:o,style:ca})}const Kb=e=>e.nodesSelectionActive,ou=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:l,onMove:c,onMoveStart:s,onMoveEnd:u,selectionKeyCode:f,multiSelectionKeyCode:d,zoomActivationKeyCode:h,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:p,panOnScrollSpeed:w,panOnScrollMode:E,zoomOnDoubleClick:y,panOnDrag:_,defaultViewport:M,translateExtent:N,minZoom:R,maxZoom:F,preventScrolling:O,onSelectionContextMenu:W,noWheelClassName:q,noPanClassName:K,disableKeyboardA11y:b})=>{const T=Ie(),C=Ee(Kb),P=ni(f);Db({deleteKeyCode:l,multiSelectionKeyCode:d});const k=D=>{t==null||t(D),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},z=o?D=>o(D):void 0,I=a?D=>a(D):void 0;return G(Bb,{onMove:c,onMoveStart:s,onMoveEnd:u,selectionKeyPressed:P,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:p,panOnScrollSpeed:w,panOnScrollMode:E,zoomOnDoubleClick:y,panOnDrag:_,defaultViewport:M,translateExtent:N,minZoom:R,maxZoom:F,zoomActivationKeyCode:h,preventScrolling:O,noWheelClassName:q,noPanClassName:K,children:[e,g(iu,{selectionKeyPressed:P}),C&&g(Xb,{onSelectionContextMenu:W,noPanClassName:K,disableKeyboardA11y:b}),g(Gb,{onClick:k,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:z,onWheel:I})]})};ou.displayName="FlowRenderer";var qb=m.memo(ou);function Jb(e){return Ee(m.useCallback(n=>e?zc(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values()),[e]))}const Zb=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions}),au=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o}=Ee(Zb,je),a=Jb(e.onlyRenderVisibleElements),l=m.useRef(),c=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const s=new ResizeObserver(u=>{const f=u.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));o(f)});return l.current=s,s},[]);return m.useEffect(()=>()=>{var s;(s=l==null?void 0:l.current)==null||s.disconnect()},[]),g("div",{className:"react-flow__nodes",style:ca,children:a.map(s=>{var y,_;let u=s.type||"default";e.nodeTypes[u]||(u="default");const f=e.nodeTypes[u]||e.nodeTypes.default,d=!!(s.draggable||t&&typeof s.draggable>"u"),h=!!(s.selectable||i&&typeof s.selectable>"u"),x=!!(s.connectable||n&&typeof s.connectable>"u"),v=!!(s.focusable||r&&typeof s.focusable>"u"),S=e.nodeExtent?ra(s.positionAbsolute,e.nodeExtent):s.positionAbsolute,p=(S==null?void 0:S.x)??0,w=(S==null?void 0:S.y)??0,E=Pb({x:p,y:w,width:s.width??0,height:s.height??0,origin:e.nodeOrigin});return g(f,{id:s.id,className:s.className,style:s.style,type:u,data:s.data,sourcePosition:s.sourcePosition||Y.Bottom,targetPosition:s.targetPosition||Y.Top,hidden:s.hidden,xPos:p,yPos:w,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!s.selected,isDraggable:d,isSelectable:h,isConnectable:x,isFocusable:v,resizeObserver:c,dragHandle:s.dragHandle,zIndex:((y=s[ke])==null?void 0:y.z)??0,isParent:!!((_=s[ke])!=null&&_.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!s.width&&!!s.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:s.ariaLabel},s.id)})})};au.displayName="NodeRenderer";var Qb=m.memo(au);const ew=[{level:0,isMaxLevel:!0,edges:[]}];function tw(e,t,n=!1){let r=-1;const i=e.reduce((a,l)=>{var u,f,d,h;const c=$c(l.zIndex);let s=c?l.zIndex:0;return n&&(s=c?l.zIndex:Math.max(((f=(u=t.get(l.source))==null?void 0:u[ke])==null?void 0:f.z)||0,((h=(d=t.get(l.target))==null?void 0:d[ke])==null?void 0:h.z)||0)),a[s]?a[s].push(l):a[s]=[l],r=s>r?s:r,a},{}),o=Object.entries(i).map(([a,l])=>{const c=+a;return{edges:l,level:c,isMaxLevel:c===r}});return o.length===0?ew:o}function nw(e,t,n){const r=Ee(m.useCallback(i=>e?i.edges.filter(o=>{const a=t.get(o.source),l=t.get(o.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Cb({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:l.width,targetHeight:l.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return tw(r,t,n)}const rw={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top},su=({connectionNodeId:e,connectionHandleType:t,connectionLineStyle:n,connectionLineType:r=It.Bezier,isConnectable:i,CustomConnectionLineComponent:o})=>{var _,M,N;const{fromNode:a,handleId:l,toX:c,toY:s}=Ee(m.useCallback(R=>({fromNode:R.nodeInternals.get(e),handleId:R.connectionHandleId,toX:(R.connectionPosition.x-R.transform[0])/R.transform[2],toY:(R.connectionPosition.y-R.transform[1])/R.transform[2]}),[e]),je),u=(_=a==null?void 0:a[ke])==null?void 0:_.handleBounds;if(!a||!i||!(u!=null&&u[t]))return null;const f=u[t],d=l?f.find(R=>R.id===l):f[0],h=d?d.x+d.width/2:((a==null?void 0:a.width)??0)/2,x=d?d.y+d.height/2:(a==null?void 0:a.height)??0,v=(((M=a==null?void 0:a.positionAbsolute)==null?void 0:M.x)||0)+h,S=(((N=a==null?void 0:a.positionAbsolute)==null?void 0:N.y)||0)+x,p=d==null?void 0:d.position;if(!p)return null;const w=rw[p];if(o)return g("g",{className:"react-flow__connection",children:g(o,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:d,fromX:v,fromY:S,toX:c,toY:s,fromPosition:p,toPosition:w})});let E="";const y={sourceX:v,sourceY:S,sourcePosition:p,targetX:c,targetY:s,targetPosition:w};return r===It.Bezier?[E]=Dc(y):r===It.Step?[E]=Po({...y,borderRadius:0}):r===It.SmoothStep?[E]=Po(y):r===It.SimpleBezier?[E]=kc(y):E=`M${v},${S} ${c},${s}`,g("g",{className:"react-flow__connection",children:g("path",{d:E,fill:"none",className:"react-flow__connection-path",style:n})})};su.displayName="ConnectionLine";const iw=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),ow=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Hs={[ei.Arrow]:iw,[ei.ArrowClosed]:ow};function aw(e){return m.useMemo(()=>Object.prototype.hasOwnProperty.call(Hs,e)?Hs[e]:null,[e])}const sw=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:l="auto-start-reverse"})=>{const c=aw(t);return c?g("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:l,refX:"0",refY:"0",children:g(c,{color:n,strokeWidth:a})}):null},lw=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const l=Io(a,t);r.includes(l)||(i.push({id:l,color:a.color||e,...a}),r.push(l))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},lu=({defaultColor:e,rfId:t})=>{const n=Ee(m.useCallback(lw({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return g("defs",{children:n.map(r=>g(sw,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};lu.displayName="MarkerDefinitions";var cw=m.memo(lu);const uw=e=>({connectionNodeId:e.connectionNodeId,connectionHandleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals}),cu=e=>{const{connectionNodeId:t,connectionHandleType:n,nodesConnectable:r,edgesFocusable:i,elementsSelectable:o,width:a,height:l,connectionMode:c,nodeInternals:s}=Ee(uw,je),u=nw(e.onlyRenderVisibleElements,s,e.elevateEdgesOnSelect);if(!a)return null;const{connectionLineType:f,defaultMarkerColor:d,connectionLineStyle:h,connectionLineComponent:x,connectionLineContainerStyle:v}=e,S=t&&n;return G(ve,{children:[u.map(({level:p,edges:w,isMaxLevel:E})=>G("svg",{style:{zIndex:p},width:a,height:l,className:"react-flow__edges react-flow__container",children:[E&&g(cw,{defaultColor:d,rfId:e.rfId}),g("g",{children:w.map(y=>{const[_,M,N]=Rs(s.get(y.source)),[R,F,O]=Rs(s.get(y.target));if(!N||!O)return null;let W=y.type||"default";e.edgeTypes[W]||(W="default");const q=e.edgeTypes[W]||e.edgeTypes.default,K=c===En.Strict?F.target:F.target||F.source,b=Is(M.source,y.sourceHandle||null),T=Is(K,y.targetHandle||null),C=(b==null?void 0:b.position)||Y.Bottom,P=(T==null?void 0:T.position)||Y.Top,k=!!(y.focusable||i&&typeof y.focusable>"u");if(!b||!T)return Qv(`Couldn't create edge for ${b?"target":"source"} handle id: ${b?y.targetHandle:y.sourceHandle}; edge id: ${y.id}. Help: https://reactflow.dev/error#800`),null;const{sourceX:z,sourceY:I,targetX:D,targetY:H}=Mb(_,b,C,R,T,P);return g(q,{id:y.id,className:ze([y.className,e.noPanClassName]),type:W,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:z,sourceY:I,targetX:D,targetY:H,sourcePosition:C,targetPosition:P,elementsSelectable:o,onEdgeUpdate:e.onEdgeUpdate,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,onClick:e.onEdgeClick,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick,onEdgeUpdateStart:e.onEdgeUpdateStart,onEdgeUpdateEnd:e.onEdgeUpdateEnd,rfId:e.rfId,ariaLabel:y.ariaLabel,isFocusable:k,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth},y.id)})})]},p)),S&&g("svg",{style:v,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:g(su,{connectionNodeId:t,connectionHandleType:n,connectionLineStyle:h,connectionLineType:f,isConnectable:r,CustomConnectionLineComponent:x})})]})};cu.displayName="EdgeRenderer";var dw=m.memo(cu);const fw=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function hw({children:e}){const t=Ee(fw);return g("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function pw(e){const t=Si(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const uu=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:s,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:x,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:p,connectionLineContainerStyle:w,selectionKeyCode:E,multiSelectionKeyCode:y,zoomActivationKeyCode:_,deleteKeyCode:M,onlyRenderVisibleElements:N,elementsSelectable:R,selectNodesOnDrag:F,defaultViewport:O,translateExtent:W,minZoom:q,maxZoom:K,preventScrolling:b,defaultMarkerColor:T,zoomOnScroll:C,zoomOnPinch:P,panOnScroll:k,panOnScrollSpeed:z,panOnScrollMode:I,zoomOnDoubleClick:D,panOnDrag:H,onPaneClick:j,onPaneMouseEnter:U,onPaneMouseMove:J,onPaneMouseLeave:se,onPaneScroll:ee,onPaneContextMenu:te,onEdgeUpdate:le,onEdgeContextMenu:V,onEdgeMouseEnter:_e,onEdgeMouseMove:we,onEdgeMouseLeave:he,edgeUpdaterRadius:$e,onEdgeUpdateStart:Q,onEdgeUpdateEnd:ce,noDragClassName:ae,noWheelClassName:A,noPanClassName:$,elevateEdgesOnSelect:L,disableKeyboardA11y:X,nodeOrigin:Z,nodeExtent:pe,rfId:oe})=>(pw(o),g(qb,{onPaneClick:j,onPaneMouseEnter:U,onPaneMouseMove:J,onPaneMouseLeave:se,onPaneContextMenu:te,onPaneScroll:ee,deleteKeyCode:M,selectionKeyCode:E,multiSelectionKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:R,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:C,zoomOnPinch:P,zoomOnDoubleClick:D,panOnScroll:k,panOnScrollSpeed:z,panOnScrollMode:I,panOnDrag:H,defaultViewport:O,translateExtent:W,minZoom:q,maxZoom:K,onSelectionContextMenu:x,preventScrolling:b,noDragClassName:ae,noWheelClassName:A,noPanClassName:$,disableKeyboardA11y:X,children:G(hw,{children:[g(dw,{edgeTypes:t,onEdgeClick:l,onEdgeDoubleClick:s,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:p,connectionLineContainerStyle:w,onEdgeUpdate:le,onlyRenderVisibleElements:N,onEdgeContextMenu:V,onEdgeMouseEnter:_e,onEdgeMouseMove:we,onEdgeMouseLeave:he,onEdgeUpdateStart:Q,onEdgeUpdateEnd:ce,edgeUpdaterRadius:$e,defaultMarkerColor:T,noPanClassName:$,elevateEdgesOnSelect:!!L,disableKeyboardA11y:X,rfId:oe}),g("div",{className:"react-flow__edgelabel-renderer",id:"edgelabel-portal"}),g(Qb,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:h,selectNodesOnDrag:F,onlyRenderVisibleElements:N,noPanClassName:$,noDragClassName:ae,disableKeyboardA11y:X,nodeOrigin:Z,nodeExtent:pe,rfId:oe})]})}));uu.displayName="GraphView";var mw=m.memo(uu);const Oo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Tr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Oo,nodeExtent:Oo,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:En.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:""},gw=()=>Xm((e,t)=>({...Tr,setNodes:n=>{e({nodeInternals:Qi(n,t().nodeInternals)})},setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?Qi(n,new Map):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:l,domNode:c,nodeOrigin:s}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((v,S)=>{const p=i.get(S.id);if(p){const w=na(S.nodeElement);!!(w.width&&w.height&&(p.width!==w.width||p.height!==w.height||S.forceUpdate))&&(i.set(p.id,{...p,[ke]:{...p[ke],handleBounds:{source:Os(".source",S.nodeElement,d,s),target:Os(".target",S.nodeElement,d,s)}},...w}),v.push({id:p.id,type:"dimensions",dimensions:w}))}return v},[]),x=a||o&&!a&&nu(t,{initial:!0,...l});e({nodeInternals:new Map(i),fitViewOnInitDone:x}),(h==null?void 0:h.length)>0&&(r==null||r(h))},updateNodePositions:(n,r=!0,i=!1)=>{const{onNodesChange:o,nodeInternals:a,hasDefaultNodes:l}=t();if(l||o){const c=n.map(s=>{const u={id:s.id,type:"position",dragging:i};return r&&(u.positionAbsolute=s.positionAbsolute,u.position=s.position),u});if(c!=null&&c.length){if(l){const s=ua(c,Array.from(a.values())),u=Qi(s,a);e({nodeInternals:u})}o==null||o(c)}}},addSelectedNodes:n=>{const{multiSelectionActive:r,nodeInternals:i,edges:o}=t();let a,l=null;r?a=n.map(c=>At(c,!0)):(a=un(Array.from(i.values()),n),l=un(o,[])),Cr({changedNodes:a,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,nodeInternals:o}=t();let a,l=null;r?a=n.map(c=>At(c,!0)):(a=un(i,n),l=un(Array.from(o.values()),[])),Cr({changedNodes:l,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{nodeInternals:i,edges:o}=t(),a=n||Array.from(i.values()),l=r||o,c=a.map(u=>(u.selected=!1,At(u.id,!1))),s=l.map(u=>At(u.id,!1));Cr({changedNodes:c,changedEdges:s,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{const{d3Zoom:r}=t();r==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{nodeInternals:n,edges:r}=t(),o=Array.from(n.values()).filter(l=>l.selected).map(l=>At(l.id,!1)),a=r.filter(l=>l.selected).map(l=>At(l.id,!1));Cr({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=ra(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},cancelConnection:()=>e({connectionNodeId:Tr.connectionNodeId,connectionHandleId:Tr.connectionHandleId}),reset:()=>e({...Tr})})),du=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=gw()),g(Xv,{value:t.current,children:e})};du.displayName="ReactFlowProvider";const fu=({children:e})=>{let t=!0;try{Ie()}catch{t=!1}return t?g(ve,{children:e}):g(du,{children:e})};fu.displayName="ReactFlowWrapper";function Ws(e,t){return m.useRef(null),m.useMemo(()=>t(e),[e])}const yw={input:jc,default:Ro,output:Yc,group:la},vw={default:ti,straight:aa,step:oa,smoothstep:wi,simplebezier:ia},bw=[0,0],ww=[15,15],xw={x:0,y:0,zoom:1},Sw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},hu=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=yw,edgeTypes:a=vw,onNodeClick:l,onEdgeClick:c,onInit:s,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:h,onConnectStart:x,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:p,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:M,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:F,onNodesDelete:O,onEdgesDelete:W,onSelectionChange:q,onSelectionDragStart:K,onSelectionDrag:b,onSelectionDragStop:T,onSelectionContextMenu:C,connectionMode:P=En.Strict,connectionLineType:k=It.Bezier,connectionLineStyle:z,connectionLineComponent:I,connectionLineContainerStyle:D,deleteKeyCode:H="Backspace",selectionKeyCode:j="Shift",multiSelectionKeyCode:U="Meta",zoomActivationKeyCode:J="Meta",snapToGrid:se=!1,snapGrid:ee=ww,onlyRenderVisibleElements:te=!1,selectNodesOnDrag:le=!0,nodesDraggable:V,nodesConnectable:_e,nodesFocusable:we,nodeOrigin:he=bw,edgesFocusable:$e,elementsSelectable:Q,defaultViewport:ce=xw,minZoom:ae=.5,maxZoom:A=2,translateExtent:$=Oo,preventScrolling:L=!0,nodeExtent:X,defaultMarkerColor:Z="#b1b1b7",zoomOnScroll:pe=!0,zoomOnPinch:oe=!0,panOnScroll:re=!1,panOnScrollSpeed:ue=.5,panOnScrollMode:ge=gn.Free,zoomOnDoubleClick:Ce=!0,panOnDrag:Xe=!0,onPaneClick:xe,onPaneMouseEnter:Te,onPaneMouseMove:Ye,onPaneMouseLeave:Qe,onPaneScroll:De,onPaneContextMenu:Tt,children:Me,onEdgeUpdate:Ne,onEdgeContextMenu:et,onEdgeDoubleClick:Ht,onEdgeMouseEnter:gt,onEdgeMouseMove:Ei,onEdgeMouseLeave:_i,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:st,edgeUpdaterRadius:mr=10,onNodesChange:Mi,onEdgesChange:Nu,noDragClassName:Tu="nodrag",noWheelClassName:Pu="nowheel",noPanClassName:fa="nopan",fitView:Au=!1,fitViewOptions:Iu,connectOnClick:Ru=!0,attributionPosition:$u,proOptions:Ou,defaultEdgeOptions:ku,elevateEdgesOnSelect:Du=!1,disableKeyboardA11y:ha=!1,style:Fu,id:pa,...Lu},zu)=>{const Bu=Ws(o,Tb),Hu=Ws(a,_b),Ci=pa||"1";return g("div",{...Lu,style:{...Fu,...Sw},ref:zu,className:ze(["react-flow",i]),"data-testid":"rf__wrapper",id:pa,children:G(fu,{children:[g(mw,{onInit:s,onMove:u,onMoveStart:f,onMoveEnd:d,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:M,nodeTypes:Bu,edgeTypes:Hu,connectionLineType:k,connectionLineStyle:z,connectionLineComponent:I,connectionLineContainerStyle:D,selectionKeyCode:j,deleteKeyCode:H,multiSelectionKeyCode:U,zoomActivationKeyCode:J,onlyRenderVisibleElements:te,selectNodesOnDrag:le,defaultViewport:ce,translateExtent:$,minZoom:ae,maxZoom:A,preventScrolling:L,zoomOnScroll:pe,zoomOnPinch:oe,zoomOnDoubleClick:Ce,panOnScroll:re,panOnScrollSpeed:ue,panOnScrollMode:ge,panOnDrag:Xe,onPaneClick:xe,onPaneMouseEnter:Te,onPaneMouseMove:Ye,onPaneMouseLeave:Qe,onPaneScroll:De,onPaneContextMenu:Tt,onSelectionContextMenu:C,onEdgeUpdate:Ne,onEdgeContextMenu:et,onEdgeDoubleClick:Ht,onEdgeMouseEnter:gt,onEdgeMouseMove:Ei,onEdgeMouseLeave:_i,onEdgeUpdateStart:Ge,onEdgeUpdateEnd:st,edgeUpdaterRadius:mr,defaultMarkerColor:Z,noDragClassName:Tu,noWheelClassName:Pu,noPanClassName:fa,elevateEdgesOnSelect:Du,rfId:Ci,disableKeyboardA11y:ha,nodeOrigin:he,nodeExtent:X}),g(gb,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:h,onConnectStart:x,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:p,nodesDraggable:V,nodesConnectable:_e,nodesFocusable:we,edgesFocusable:$e,elementsSelectable:Q,minZoom:ae,maxZoom:A,nodeExtent:X,onNodesChange:Mi,onEdgesChange:Nu,snapToGrid:se,snapGrid:ee,connectionMode:P,translateExtent:$,connectOnClick:Ru,defaultEdgeOptions:ku,fitView:Au,fitViewOptions:Iu,onNodesDelete:O,onEdgesDelete:W,onNodeDragStart:N,onNodeDrag:R,onNodeDragStop:F,onSelectionDrag:b,onSelectionDragStart:K,onSelectionDragStop:T,noPanClassName:fa,nodeOrigin:he,rfId:Ci}),g(pb,{onSelectionChange:q}),Me,g(Gv,{proOptions:Ou,position:$u}),g(xb,{rfId:Ci,disableKeyboardA11y:ha})]})})});hu.displayName="ReactFlow";function Ew(){const e=Ie();return m.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),i=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${t}"]`);i&&requestAnimationFrame(()=>r([{id:t,nodeElement:i,forceUpdate:!0}]))},[])}function pu(e){return t=>{const[n,r]=m.useState(t),i=m.useCallback(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const _w=pu(ua),Mw=pu(Hb),mu=({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:l,strokeWidth:c,className:s,borderRadius:u,shapeRendering:f,onClick:d})=>{const{background:h,backgroundColor:x}=o||{},v=a||h||x;return g("rect",{className:ze(["react-flow__minimap-node",s]),x:t,y:n,rx:u,ry:u,width:r,height:i,fill:v,stroke:l,strokeWidth:c,shapeRendering:f,onClick:d?S=>d(S,e):void 0})};mu.displayName="MiniMapNode";var Cw=m.memo(mu);const Nw=200,Tw=150,Pw=e=>{const t=Array.from(e.nodeInternals.values()),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?Jv(xi(t),n):n,rfId:e.rfId}},to=e=>e instanceof Function?e:()=>e,Aw="react-flow__minimap-desc";function gu({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,maskColor:l="rgb(240, 240, 240, 0.6)",position:c="bottom-right",onClick:s,onNodeClick:u,pannable:f=!1,zoomable:d=!1}){const h=Ie(),x=m.useRef(null),{boundingRect:v,viewBB:S,nodes:p,rfId:w}=Ee(Pw,je),E=(e==null?void 0:e.width)??Nw,y=(e==null?void 0:e.height)??Tw,_=to(r),M=to(n),N=to(i),R=v.width/E,F=v.height/y,O=Math.max(R,F),W=O*E,q=O*y,K=5*O,b=v.x-(W-v.width)/2-K,T=v.y-(q-v.height)/2-K,C=W+K*2,P=q+K*2,k=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",z=`${Aw}-${w}`,I=m.useRef(0);I.current=O,m.useEffect(()=>{if(x.current){const j=rt(x.current),U=ee=>{const{transform:te,d3Selection:le,d3Zoom:V}=h.getState();if(ee.sourceEvent.type!=="wheel"||!le||!V)return;const _e=-ee.sourceEvent.deltaY*(ee.sourceEvent.deltaMode===1?.05:ee.sourceEvent.deltaMode?1:.002)*10,we=te[2]*Math.pow(2,_e);V.scaleTo(le,we)},J=ee=>{const{transform:te,d3Selection:le,d3Zoom:V}=h.getState();if(ee.sourceEvent.type!=="mousemove"||!le||!V)return;const _e={x:te[0]-ee.sourceEvent.movementX*I.current*Math.max(1,te[2]),y:te[1]-ee.sourceEvent.movementY*I.current*Math.max(1,te[2])},we=Dt.translate(_e.x,_e.y).scale(te[2]);V.transform(le,we)},se=Cc().on("zoom",f?J:null).on("zoom.wheel",d?U:null);return j.call(se),()=>{j.on("zoom",null)}}},[f,d]);const D=s?j=>{const U=lt(j);s(j,{x:U[0],y:U[1]})}:void 0,H=u?(j,U)=>{const J=h.getState().nodeInternals.get(U);u(j,J)}:void 0;return g(ta,{position:c,style:e,className:ze(["react-flow__minimap",t]),children:G("svg",{width:E,height:y,viewBox:`${b} ${T} ${C} ${P}`,role:"img","aria-labelledby":z,ref:x,onClick:D,children:[g("title",{id:z,children:"React Flow mini map"}),p.map(j=>{var U,J;return g(Cw,{x:((U=j.positionAbsolute)==null?void 0:U.x)??0,y:((J=j.positionAbsolute)==null?void 0:J.y)??0,width:j.width,height:j.height,style:j.style,className:N(j),color:_(j),borderRadius:o,strokeColor:M(j),strokeWidth:a,shapeRendering:k,onClick:H,id:j.id},j.id)}),g("path",{className:"react-flow__minimap-mask",d:`M${b-K},${T-K}h${C+K*2}v${P+K*2}h${-C-K*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fill:l,fillRule:"evenodd"})]})})}gu.displayName="MiniMap";var Iw=m.memo(gu);function Rw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function $w(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g("path",{d:"M0 0h32v4.2H0z"})})}function Ow(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function kw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Dw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const jn=({children:e,className:t,...n})=>g("button",{type:"button",className:ze(["react-flow__controls-button",t]),...n,children:e});jn.displayName="ControlButton";const Fw=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,yu=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:l,onInteractiveChange:c,className:s,children:u,position:f="bottom-left"})=>{const d=Ie(),[h,x]=m.useState(!1),v=Ee(Fw),{zoomIn:S,zoomOut:p,fitView:w}=Si();if(m.useEffect(()=>{x(!0)},[]),!h)return null;const E=()=>{S(),o==null||o()},y=()=>{p(),a==null||a()},_=()=>{w(i),l==null||l()},M=()=>{d.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return G(ta,{className:ze(["react-flow__controls",s]),position:f,style:e,children:[t&&G(ve,{children:[g(jn,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:g(Rw,{})}),g(jn,{onClick:y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:g($w,{})})]}),n&&g(jn,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view",children:g(Ow,{})}),r&&g(jn,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:v?g(Dw,{}):g(kw,{})}),u]})};yu.displayName="Controls";var Lw=m.memo(yu),ot;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ot||(ot={}));function zw({color:e,dimensions:t,lineWidth:n}){return g("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Bw({color:e,radius:t}){return g("circle",{cx:t,cy:t,r:t,fill:e})}const Hw={[ot.Dots]:"#91919a",[ot.Lines]:"#eee",[ot.Cross]:"#e2e2e2"},Ww={[ot.Dots]:1,[ot.Lines]:1,[ot.Cross]:6},Uw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function vu({variant:e=ot.Dots,gap:t=20,size:n,lineWidth:r=1,color:i,style:o,className:a}){const l=m.useRef(null),{transform:c,patternId:s}=Ee(Uw,je),u=i||Hw[e],f=n||Ww[e],d=e===ot.Dots,h=e===ot.Cross,x=Array.isArray(t)?t:[t,t],v=[x[0]*c[2]||1,x[1]*c[2]||1],S=f*c[2],p=h?[S,S]:v,w=d?[S/2,S/2]:[p[0]/2,p[1]/2];return G("svg",{className:ze(["react-flow__background",a]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,children:[g("pattern",{id:s,x:c[0]%v[0],y:c[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`,children:d?g(Bw,{color:u,radius:S/2}):g(zw,{dimensions:p,color:u,lineWidth:r})}),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${s})`})]})}vu.displayName="Background";var Vw=m.memo(vu);function jw(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const dn=jw(),ko=e=>`${e.sourceEntity}_${e.name}`,Xw=e=>`${e.targetEntity}_${e.targetName}`,da=e=>`entity_er_node_id_${e.id}`,Do=(e,t)=>`${da(e)}_${t.id}`,bu=e=>e.type===fi.Lookup&&e.relationType===Kt.ManyToOne,wu=e=>e.type===fi.Lookup?"green":"red",Yw=22,Kn=18,Gw=40,Kw=({entity:e,relation:t,passive:n})=>{const r=Si(),i=Ew(),[o,a]=m.useState(Number.MAX_SAFE_INTEGER);return m.useEffect(()=>{var l,c;if(n&&bu(t))a(Gw/2-Kn/2);else{const s=(l=document.getElementById(da(e)))==null?void 0:l.getClientRects()[0],u=(c=document.getElementById(Do(e,t)))==null?void 0:c.getClientRects()[0],f=((u==null?void 0:u.top)??0)-((s==null?void 0:s.top)??0);a(f)}setTimeout(()=>i(e.name))},[e,n,r,t,i]),{top:o,left:n?-Kn:"auto",right:n?"auto":-Kn}},qw=({relation:e,passive:t})=>{const[n,r]=m.useState("relation-one-many");return m.useEffect(()=>{if(t)switch(e.relationType){case Kt.ManyToMany:r("relation-one-many");break;case Kt.ManyToOne:case Wn.ManyToOne:case Wn.OneToOne:r("relation-one-one");break}else switch(e.relationType){case Kt.ManyToMany:case Kt.ManyToOne:case Wn.ManyToOne:r("relation-one-many");break;case Wn.OneToOne:r("relation-one-one");break}},[t,e.relationType]),{icon:n,color:wu(e)}},Us=({data:{entity:e},relation:t,passive:n})=>{const r=n?Xw(t.meta):ko(t.meta),{top:i,left:o,right:a}=Kw({entity:e.meta,relation:t.meta,passive:n}),{icon:l,color:c}=qw({relation:t.meta,passive:n});return g(sr,{className:Jw.wrapper,id:r,type:n?"target":"source",position:n?Y.Left:Y.Right,style:{left:o,right:a,top:i+Yw/2},onConnect:s=>console.log("handle onConnect",s),isConnectable:!1,children:g("span",{style:{color:c,transform:n?"rotateY(0deg)":"rotateY(180deg)"},children:g(bf,{type:l})})},t.meta.id)},Jw={wrapper:ie("height:",Kn,"px!important;width:",Kn,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},Zw=e=>{const{data:{entity:t,passiveEntityRelations:n}}=e;return G(ve,{children:[t.entityRelations.map(r=>g(Us,{...e,passive:!1,relation:r},r.meta.id)),n.map(r=>g(Us,{...e,passive:!0,relation:r},r.meta.id))]})},Qw=({data:{entity:e}})=>G("div",{className:Xt(ft.section),children:[g(Ue.Title,{className:Xt(ft.sectionTitle),level:5,children:"字段"}),de.isEmpty(e.entityFields)?g(Rd,{description:"暂无字段"}):e.entityFields.map(t=>G("div",{className:Xt(ft.sectionItem),children:[G(Jn,{size:"small",children:[G(Ue.Text,{children:[t.meta.description,"(",t.meta.name,")"]}),t.meta.required&&g(Ue.Text,{type:"danger",children:"*"})]}),g(Ue.Text,{children:t.meta.type})]},t.meta.name))]}),ex=({data:{entity:e,passiveEntityRelations:t}})=>{const n=t.filter(i=>!bu(i.meta)),r=[...e.entityRelations,...n];return de.isEmpty(r)?null:G("div",{className:Xt(ft.section),children:[g(Ue.Title,{className:Xt(ft.sectionTitle),level:5,children:"关系"}),e.entityRelations.map(i=>G("div",{className:Xt(ft.sectionItem),id:Do(e.meta,i.meta),children:[g(Jn,{size:"small",children:G(Ue.Text,{children:[i.meta.description,"(",i.meta.name,")"]})}),g(Ue.Text,{children:i.meta.type})]},i.meta.name)),n.map(i=>G("div",{className:Xt(ft.sectionItem),id:Do(e.meta,i.meta),children:[g(Jn,{size:"small",children:G(Ue.Text,{disabled:!0,children:[i.meta.targetDescription,"(",i.meta.targetName,")"]})}),g(Ue.Text,{disabled:!0,children:i.meta.type})]},i.meta.targetName))]})},tx=e=>{const{data:{entity:t}}=e,n=el();return G(ve,{children:[g(Zw,{...e}),G("div",{id:da(t.meta),style:{"--header-bg-color":n.colorPrimary},className:ft.wrapper,children:[g("div",{className:ft.header,children:g(Ue.Title,{level:5,children:t.meta.title})}),G("div",{className:ft.body,children:[g(Qw,{...e}),g(ex,{...e})]}),G(ii,{className:ft.footer,children:[g(qn,{span:12,children:g(it,{block:!0,type:"link",onClick:()=>dn.emit("onClickEditEntity",t.meta.id),children:"编辑"})}),g(qn,{span:12,children:g(it,{block:!0,type:"text",danger:!0,onClick:()=>dn.emit("onDelete",t.meta.id),children:"删除"})})]})]})]})},ft={wrapper:ie({name:"b271j2",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:1px solid rgba(0,0,0,.1)"}),header:ie({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:ie({name:"1jb4mpp",styles:"padding:4px 0"}),section:ie("",""),sectionTitle:ie({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:ie({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:ie({name:"3rejxs",styles:"border-top:1px solid rgba(0,0,0,.1)"})},nx={EntityNode:m.memo(tx)},rx=()=>{const{app:e}=ht(),t=e.entityRelationsByTargetEntityNameMap,[n,r,i]=_w(e.entities.map(a=>({id:a.meta.name,type:"EntityNode",data:{entity:a,passiveEntityRelations:t[a.meta.name]||[]},position:a.meta.position}))),o=m.useCallback(a=>{i(a);const l=ua(a,n),c=de.keyBy(a.filter(u=>u.type==="position"),"id"),s=de.keyBy(l,u=>u.id);qe(()=>{e.entities.forEach(u=>{var f;Reflect.has(c,u.meta.name)&&u.updateMeta({...u.meta,position:((f=s[u.meta.name])==null?void 0:f.positionAbsolute)??u.meta.position})})})},[e,n,i]);return m.useEffect(()=>{r(a=>{const l=de.keyBy(a,c=>c.id);return e.entities.map(c=>l[c.meta.name]?{...l[c.meta.name],data:{entity:c,passiveEntityRelations:t[c.meta.name]||[]},position:c.meta.position}:{id:c.meta.name,type:"EntityNode",data:{entity:c,passiveEntityRelations:t[c.meta.name]||[]},position:c.meta.position})})},[e.entities,t,r]),{nodes:n,onNodesChange:o}},ix=({onClickEditEntity:e})=>{const t=el(),{app:n,appManager:r}=ht(),i=[...r.entityRelationMap.values()],{nodes:o,onNodesChange:a}=rx(),[l,c,s]=Mw(i.map(f=>({id:f.meta.id,source:f.meta.sourceEntity,target:f.meta.targetEntity,sourceHandle:ko(f.meta),targetHandle:ko(f.meta),style:{stroke:wu(f.meta),zIndex:999999}}))),u=m.useCallback(f=>c(d=>Lc({...f,animated:!0,style:{stroke:"green"}},d)),[c]);return m.useEffect(()=>(dn.on("onDelete",n.deleteEntity),dn.on("onClickEditEntity",e),()=>{dn.off("onDelete",n.deleteEntity),dn.off("onClickEditEntity",e)}),[n.deleteEntity,e]),g("div",{className:ax.wrapper,children:G(hu,{nodes:o,edges:l,onNodesChange:a,onEdgesChange:s,onConnect:u,style:{background:"#fff"},nodeTypes:nx,connectionLineStyle:{stroke:t.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[g(Vw,{variant:ot.Cross,gap:10,size:2}),g(Lw,{}),g(Iw,{pannable:!0,zoomable:!0})]})})},ox=Lt(ix),ax={wrapper:ie({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},sx=({onClickEditEntity:e})=>{const{app:t}=ht(),n=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(r,i)=>G(Jn,{size:"small",children:[g(it,{size:"small",type:"link",onClick:()=>e(i.id),children:"编辑"}),g(it,{size:"small",danger:!0,type:"text",onClick:()=>t.deleteEntity(i.id),children:"删除"})]})}];return g("div",{className:cx.wrapper,children:g(tl,{rowKey:"id",size:"small",columns:n,dataSource:t.entities.map(r=>r.meta)})})},lx=Lt(sx),cx={wrapper:ie("","")},xu=({onOk:e,onCancel:t,open:n,mode:r,form:i})=>g(ve,{children:g($d,{title:r==="create"?"创建数据模型":"编辑数据模型",onCancel:()=>{t(),i.resetFields()},onOk:async()=>{await i.validateFields(),e(i.getFieldsValue()),i.resetFields()},open:n,destroyOnClose:!0,children:G(Vt,{form:i,labelCol:{style:{width:"50px"}},children:[g(Vt.Item,{label:"ID",name:"id",hidden:!0,children:g(Hn,{})}),g(Vt.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入数据模型名称"}],children:g(Hn,{})}),g(Vt.Item,{label:"标识",name:"name",rules:[{required:!0,message:"请输入数据模型标识"},{pattern:/^[a-zA-Z]\w+$/,message:"只能由英文、数字、下划线组成，且必须英文开头"}],children:g(Hn,{disabled:r==="edit"})}),g(Vt.Item,{label:"描述",name:"description",children:g(Hn,{})})]})})}),Su=Oe(),Eu=({children:e})=>{const[t,n]=m.useState(null);return Qs(()=>{setTimeout(()=>{n(document.getElementById(Su))})}),t?qs.createPortal(e,t):null},ux=()=>g("span",{id:Su}),dx=({entity:e,onEditEntity:t})=>G(ve,{children:[g(Eu,{children:g(it,{type:"link",onClick:()=>t(e),children:"编辑"})}),g("div",{className:hx.wrapper,children:G(oo,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[g(St,{label:"名称",fieldProps:{value:e.title}}),g(St,{label:"标识",fieldProps:{value:e.name}}),g(St,{label:"描述",fieldProps:{value:e.description}})]})})]}),fx=Lt(dx),hx={wrapper:ie({name:"10rtstj",styles:"padding:16px"})},px=e=>{switch(e){case B.Text:case B.LongText:return G(ve,{children:[g(In,{name:["config","max"],label:"最大长度",max:255,fieldProps:{precision:0}}),g(In,{name:["config","min"],label:"最小长度",min:0,fieldProps:{precision:0}})]});case B.Enum:return G(ve,{children:[g(Il,{name:["config","enumCode"],label:"枚举类型",placeholder:"请选择枚举类型",options:_u,allowClear:!1,rules:[{required:!0,message:"请选择枚举类型"}]}),g(co,{name:["config","multiple"],label:"多选"})]});case B.Number:return G(ve,{children:[g(In,{name:["config","max"],label:"最大值",max:255,fieldProps:{precision:0}}),g(In,{name:["config","min"],label:"最小值",min:0,fieldProps:{precision:0}}),g(In,{name:["config","precision"],label:"小数位数",min:0,fieldProps:{precision:0}})]});case B.AutoNumber:return g(ve,{children:g(St,{name:["config","format"],label:"显示格式",placeholder:"请输入显示格式"})});case B.Image:return g(ve,{children:g(co,{name:["config","multiple"],label:"多选"})});case B.PhoneNumber:case B.URL:case B.Email:case B.Date:case B.DateTime:default:return null}},_u=Object.values(B).map(e=>({label:Pe.getEntityFieldTypeLabel(e),value:e})),mx=(e,t)=>{const{app:n,appManager:r}=ht(),[i]=oo.useForm(),o=oo.useWatch("type",i),[a,l]=m.useState(""),[c,s]=m.useState(""),[u,f]=m.useState("detail"),[d,h]=m.useState(!1);return m.useImperativeHandle(t,()=>({create:({entityId:x})=>{l(x),s(""),f("create"),h(!0)},edit:({entityId:x,fieldId:v})=>{l(x),s(v),f("edit"),i.setFieldsValue(r.entityFieldMap.get(v).meta),h(!0)},showDetail:({entityId:x,fieldId:v})=>{l(x),s(v),f("detail"),i.setFieldsValue(r.entityFieldMap.get(v).meta),h(!0)}}),[r.entityFieldMap,i]),G(Od,{readonly:u==="detail",title:"新建字段",width:500,form:i,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:d,onOpenChange:h,onFinish:async x=>{switch(u){case"create":{const v=n.entityMap[a];Zt.create({...x,id:Oe()},v);break}case"edit":{n.entityMap[a].entityFields.forEach(S=>{S.meta.id===c&&S.updateMeta({...S.meta,...x})});break}}return!0},children:[g(St,{hidden:!0,name:"id",label:"字段id"}),g(Il,{name:"type",label:"字段类型",placeholder:"请选择字段类型",options:_u,allowClear:!1,rules:[{required:!0,message:"请选择字段类型"}]}),g(St,{name:"title",label:"字段名称",placeholder:"请输入字段类型",rules:[{required:!0,message:"请输入字段名称"}]}),g(St,{name:"name",label:"字段标识",placeholder:"请输入字段标识",rules:[{required:!0,message:"请输入字段标识"}]}),g(St,{name:"description",label:"字段描述",placeholder:"请输入字段描述"}),o!==B.AutoNumber&&g(co,{name:"required",label:"必填"}),px(o)]})},gx=m.forwardRef(mx),yx=({entityId:e})=>{const t=m.useRef(null),{app:n}=ht(),r=n.entityMap[e],i=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,a)=>G(Jn,{size:"small",children:[g(it,{size:"small",type:"link",onClick:()=>{var l;(l=t.current)==null||l.edit({entityId:r.meta.id,fieldId:a.id})},children:"编辑"}),g(it,{size:"small",type:"link",onClick:()=>{var l;(l=t.current)==null||l.showDetail({entityId:r.meta.id,fieldId:a.id})},children:"详情"}),g(it,{size:"small",danger:!0,type:"text",onClick:()=>{r.deleteEntityField(a.id)},children:"删除"})]})}];return G(ve,{children:[g(gx,{ref:t}),g(Eu,{children:g(it,{type:"link",onClick:()=>{var o;(o=t.current)==null||o.create({entityId:r.meta.id})},children:"添加字段"})}),g("div",{children:g(tl,{size:"small",dataSource:r.entityFields.map(o=>o.meta),rowKey:"id",columns:i,pagination:!1})})]})},no=Lt(yx),Mu=()=>{const[e,{setFalse:t,setTrue:n}]=zh(!1),[r]=Vt.useForm(),{app:i}=ht();return{setTrue:n,setFalse:t,onSubmitEntity:a=>{if(a.id)i.entityMap[a.id].updateMeta(a);else{const l=Math.max(...i.entities.map(c=>c.meta.position.x));Pe.create({...a,id:Oe(),position:{x:l+400,y:100}},i)}t()},form:r,open:e}},vx=[{key:"List",tab:"列表"},{key:"ER",tab:"ER图"}],bx=()=>{const[e,t]=ql({activeTabKey:"List"}),[n,r]=m.useState("edit"),{open:i,setFalse:o,setTrue:a,onSubmitEntity:l,form:c}=Mu(),s=Bt(),u=tn(),f=h=>{s(vn(Be.Entity,{entityId:h,appId:u.appId}))},d=()=>{r("create"),a()};return G(ve,{children:[g(xu,{onOk:l,onCancel:o,open:i,mode:n,form:c}),g("div",{className:Vs.wrapper,children:g(Or,{size:"small",tabProps:{size:"small"},className:Vs.card,title:g("span",{children:"数据模型"}),tabList:vx,tabBarExtraContent:g(it,{type:"link",onClick:d,children:"添加模型"}),activeTabKey:e.activeTabKey,onTabChange:h=>t({activeTabKey:h}),children:e.activeTabKey==="List"?g(lx,{onClickEditEntity:f}):g(ox,{onClickEditEntity:f})})})]})},Vs={wrapper:ie({name:"13udsys",styles:"height:100%"}),card:ie({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},wx=[{key:"Base",tab:"基础信息"},{key:"Field",tab:"字段和关系"},{key:"Method",tab:"方法"},{key:"View",tab:"视图"}],xx=()=>{const[e,t]=ql({activeTabKey:"Base"}),{app:n}=ht(),{entityId:r}=tn(),i=n.entityMap[r],{open:o,setFalse:a,setTrue:l,onSubmitEntity:c,form:s}=Mu(),u=f=>{switch(f){case"Base":return g(fx,{entity:i.meta,onEditEntity:()=>{s.setFieldsValue(i.meta),l()}});case"Field":return g(no,{entityId:i.meta.id});case"Method":return g(no,{entityId:i.meta.id});case"View":return g(no,{entityId:i.meta.id});default:return g("div",{children:"未知模块"})}};return G(ve,{children:[g(ve,{children:g(xu,{onOk:c,onCancel:a,open:o,mode:"edit",form:s})}),g("div",{className:js.wrapper,children:g(Or,{size:"small",tabProps:{size:"small"},title:`${i.meta.title}(${i.meta.name})`,tabList:wx,tabBarExtraContent:g(ux,{}),className:js.card,activeTabKey:e.activeTabKey,onTabChange:f=>t({activeTabKey:f}),children:u(e.activeTabKey)})})]})},Sx=Lt(xx),js={wrapper:ie({name:"13udsys",styles:"height:100%"}),card:ie({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Ex=({file:e,children:t})=>g(kd,{value:e,children:g(Dd,{children:g(Fd,{backend:Ld,children:g(zd,{children:t})})})}),Cu=m.forwardRef(({onLoad:e,src:t},n)=>g("iframe",{ref:n,className:_x.iframe,src:t,onLoad:e}));Cu.displayName="SimulatorPC";const _x={iframe:ie`
    height: 100%;
    width: 100%;
    border: none;
    display: block;
  `},Mx=()=>{const{pageId:e,appId:t}=tn(),{appManager:n}=ht(),r=n.pageMap.get(e),i=Bt();return m.useLayoutEffect(()=>{var a;const o=de.head(n.app.pages);!r&&o&&i(vn(Be.PAGE,{appId:t,pageId:(a=o.meta)==null?void 0:a.id}),{replace:!0})},[t,n.app.pages,i,r]),g(ii,{justify:"center",align:"middle",className:Xs.page,children:g(qn,{span:24,className:Xs.container,children:r&&g(Bd.Provider,{value:Hd,children:g(Ex,{file:r,children:g(Cu,{src:"/simulator/pc/index.html"})})})})})},Cx=Lt(Mx),Xs={page:ie({name:"13udsys",styles:"height:100%"}),container:ie({name:"13udsys",styles:"height:100%"})},Nx=()=>{const e=Wo([{path:Be.APPS,element:g(es,{})},{path:Be.APP,element:g(Tm,{}),children:[{path:Be.PAGE,element:g(Cx,{})},{path:Be.Entities,element:g(bx,{})},{path:Be.Entity,element:g(Sx,{})}]},{path:"/",element:g(es,{})}]);return g(ve,{children:e})},Tx=()=>g(m.Suspense,{fallback:g(mf,{}),children:g(Wd,{locale:Ud,children:g(Vd,{children:g(kh,{children:g(lf,{content:"Celebrating Lunar New Year",style:{height:"100%"},zIndex:9999999,font:{color:"#aa381e"},children:g(Nx,{})})})})})});jd.createRoot(document.getElementById("root")).render(g(ye.StrictMode,{children:g(Tx,{})}));
