var Du=Object.defineProperty;var Fu=(e,t,n)=>t in e?Du(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Oe=(e,t,n)=>(Fu(e,typeof t!="symbol"?t+"":t,n),n);import{I as ku,H as Lu,F as zu,C as Bu,S as Hu,r as m,a as Mo,c as No,R as Fe,b as Vu,d as Jn,g as Uu,m as Wu,e as Xu,f as ju,P as Yu,_ as is,u as Ku,h as os,i as ri,D as qu,j as To,A as Aa,k as Ue,l as g,n as ie,o as Gu,p as Ki,q as ii,s as oi,t as $a,v as Ia,w as Oa,x as Lt,y as _t,z as It,B as ss,E as Da,G as Q,J as it,K as Re,L as Ju,M as Zu,N as Qu,O as zt,Q as ht,T as jt,U as Y,V as ye,W as Fa,X as ed,Y as De,Z as Pr,$ as ka,a0 as nt,a1 as td,a2 as Et,a3 as nd,a4 as Xe,a5 as rd,a6 as id,a7 as od,a8 as Un,a9 as La,aa as sd,ab as ad,ac as ld,ad as za,ae as cd,af as ud,ag as Dr,ah as dd,ai as fd,aj as hd,ak as pd,al as md,am as Ba,an as Yt,ao as gd,ap as Zn,aq as Ha,ar as yd,as as qi,at as vd,au as wd,av as bd,aw as xd,ax as Ed,ay as Sd,az as _d,aA as Cd,aB as Md,aC as Nd,aD as Td,aE as Pd}from"./client-07994138.js";const fr=ku;fr.Header=Lu;fr.Footer=zu;fr.Content=Bu;fr.Sider=Hu;const Ot=fr;var Va=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Rd=e=>{var{prefixCls:t,className:n,avatar:r,title:i,description:o}=e,s=Va(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:a}=m.useContext(Mo),l=a("list",t),u=No(`${l}-item-meta`,n),c=Fe.createElement("div",{className:`${l}-item-meta-content`},i&&Fe.createElement("h4",{className:`${l}-item-meta-title`},i),o&&Fe.createElement("div",{className:`${l}-item-meta-description`},o));return Fe.createElement("div",Object.assign({},s,{className:u}),r&&Fe.createElement("div",{className:`${l}-item-meta-avatar`},r),(i||o)&&c)},Ad=(e,t)=>{var{prefixCls:n,children:r,actions:i,extra:o,className:s,colStyle:a}=e,l=Va(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:u,itemLayout:c}=m.useContext(Po),{getPrefixCls:f}=m.useContext(Mo),d=()=>{let b;return m.Children.forEach(r,S=>{typeof S=="string"&&(b=!0)}),b&&m.Children.count(r)>1},p=()=>c==="vertical"?!!o:!d(),v=f("list",n),y=i&&i.length>0&&Fe.createElement("ul",{className:`${v}-item-action`,key:"actions"},i.map((b,S)=>Fe.createElement("li",{key:`${v}-item-action-${S}`},b,S!==i.length-1&&Fe.createElement("em",{className:`${v}-item-action-split`})))),C=u?"div":"li",h=Fe.createElement(C,Object.assign({},l,u?{}:{ref:t},{className:No(`${v}-item`,{[`${v}-item-no-flex`]:!p()},s)}),c==="vertical"&&o?[Fe.createElement("div",{className:`${v}-item-main`,key:"content"},r,y),Fe.createElement("div",{className:`${v}-item-extra`,key:"extra"},o)]:[r,y,Vu(o,{key:"extra"})]);return u?Fe.createElement(Jn,{ref:t,flex:1,style:a},h):h},Ua=m.forwardRef(Ad);Ua.Meta=Rd;const $d=Ua,Id=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:i,padding:o,listItemPaddingSM:s,marginLG:a,borderRadiusLG:l}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:l,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${i}px ${a}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:s}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:`${o}px ${r}px`}}}},Od=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:i,marginSM:o,margin:s}=e;return{[`@media screen and (max-width:${r})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${s}px`}}}}}},Dd=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:i,paddingSM:o,marginLG:s,padding:a,listItemPadding:l,colorPrimary:u,listItemPaddingSM:c,listItemPaddingLG:f,paddingXS:d,margin:p,colorText:v,colorTextDescription:y,motionDurationSlow:C,lineWidth:h}=e;return{[`${t}`]:Object.assign(Object.assign({},Xu(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:s,textAlign:"end",[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:l,color:v,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:a},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:v},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:v,transition:`all ${C}`,["&:hover"]:{color:u}}},[`${t}-item-meta-description`]:{color:y,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${d}px`,color:y,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:h,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${a}px 0`,color:y,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:a,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:s},[`${t}-item-meta`]:{marginBlockEnd:a,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:o,color:v,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:a,marginInlineStart:"auto","> li":{padding:`0 ${a}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:f},[`${t}-sm ${t}-item`]:{padding:c},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Fd=Uu("List",e=>{const t=Wu(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[Dd(t),Id(t),Od(t)]},{contentWidth:220});var kd=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Po=m.createContext({});Po.Consumer;function Gi(e){var{pagination:t=!1,prefixCls:n,bordered:r=!1,split:i=!0,className:o,children:s,itemLayout:a,loadMore:l,grid:u,dataSource:c=[],size:f,header:d,footer:p,loading:v=!1,rowKey:y,renderItem:C,locale:h}=e,b=kd(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const S=t&&typeof t=="object"?t:{},[w,_]=m.useState(S.defaultCurrent||1),[M,N]=m.useState(S.defaultPageSize||10),{getPrefixCls:I,renderEmpty:k,direction:B}=m.useContext(Mo),H={current:1,total:0},O=L=>(ae,he)=>{_(ae),N(he),t&&t[L]&&t[L](ae,he)},W=O("onChange"),x=O("onShowSizeChange"),R=(L,ae)=>{if(!C)return null;let he;return typeof y=="function"?he=y(L):y?he=L[y]:he=L.key,he||(he=`list-item-${ae}`),m.createElement(m.Fragment,{key:he},C(L,ae))},T=()=>!!(l||t||p),E=I("list",n),[P,$]=Fd(E);let D=v;typeof D=="boolean"&&(D={spinning:D});const V=D&&D.spinning;let X="";switch(f){case"large":X="lg";break;case"small":X="sm";break}const Z=No(E,{[`${E}-vertical`]:a==="vertical",[`${E}-${X}`]:X,[`${E}-split`]:i,[`${E}-bordered`]:r,[`${E}-loading`]:V,[`${E}-grid`]:!!u,[`${E}-something-after-last-item`]:T(),[`${E}-rtl`]:B==="rtl"},o,$),j=ju(H,{total:c.length,current:w,pageSize:M},t||{}),ne=Math.ceil(j.total/j.pageSize);j.current>ne&&(j.current=ne);const fe=t?m.createElement("div",{className:`${E}-pagination`},m.createElement(Yu,Object.assign({},j,{onChange:W,onShowSizeChange:x}))):null;let G=is(c);t&&c.length>(j.current-1)*j.pageSize&&(G=is(c).splice((j.current-1)*j.pageSize,j.pageSize));const re=Object.keys(u||{}).some(L=>["xs","sm","md","lg","xl","xxl"].includes(L)),de=Ku(re),ce=m.useMemo(()=>{for(let L=0;L<os.length;L+=1){const ae=os[L];if(de[ae])return ae}},[de]),be=m.useMemo(()=>{if(!u)return;const L=ce&&u[ce]?u[ce]:u.column;if(L)return{width:`${100/L}%`,maxWidth:`${100/L}%`}},[u==null?void 0:u.column,ce]);let ve=V&&m.createElement("div",{style:{minHeight:53}});if(G.length>0){const L=G.map((ae,he)=>R(ae,he));ve=u?m.createElement(ri,{gutter:u.gutter},m.Children.map(L,ae=>m.createElement("div",{key:ae==null?void 0:ae.key,style:be},ae))):m.createElement("ul",{className:`${E}-items`},L)}else!s&&!V&&(ve=m.createElement("div",{className:`${E}-empty-text`},h&&h.emptyText||(k==null?void 0:k("List"))||m.createElement(qu,{componentName:"List"})));const ue=j.position||"bottom",xe=m.useMemo(()=>({grid:u,itemLayout:a}),[JSON.stringify(u),a]);return P(m.createElement(Po.Provider,{value:xe},m.createElement("div",Object.assign({className:Z},b),(ue==="top"||ue==="both")&&fe,d&&m.createElement("div",{className:`${E}-header`},d),m.createElement(To,Object.assign({},D),ve,s),p&&m.createElement("div",{className:`${E}-footer`},p),l||(ue==="bottom"||ue==="both")&&fe)))}Gi.Item=$d;var Ld={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const zd=Ld;var Wa=function(t,n){return m.createElement(Aa,Ue(Ue({},t),{},{ref:n,icon:zd}))};Wa.displayName="DatabaseOutlined";const Bd=m.forwardRef(Wa);var Hd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const Vd=Hd;var Xa=function(t,n){return m.createElement(Aa,Ue(Ue({},t),{},{ref:n,icon:Vd}))};Xa.displayName="MoreOutlined";const Ud=m.forwardRef(Xa),Wd=()=>g("div",{className:Xd.wrapper,children:g(To,{size:"large"})}),Xd={wrapper:ie({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},jd="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",Yd=Gu({scriptUrl:jd}),Kd=({type:e})=>g(Yd,{type:`icon-modou-${e}`}),Ve={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}var we;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(we||(we={}));const as="popstate";function ja(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,i;i=t.map((d,p)=>c(d,typeof d=="string"?null:d.state,p===0?"default":void 0));let o=l(n??i.length-1),s=we.Pop,a=null;function l(d){return Math.min(Math.max(d,0),i.length-1)}function u(){return i[o]}function c(d,p,v){p===void 0&&(p=null);let y=Dt(i?u().pathname:"/",d,p,v);return Gd(y.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(d)),y}return{get index(){return o},get action(){return s},get location(){return u()},createHref(d){return typeof d=="string"?d:Qn(d)},push(d,p){s=we.Push;let v=c(d,p);o+=1,i.splice(o,i.length,v),r&&a&&a({action:s,location:v})},replace(d,p){s=we.Replace;let v=c(d,p);i[o]=v,r&&a&&a({action:s,location:v})},go(d){s=we.Pop,o=l(o+d),a&&a({action:s,location:u()})},listen(d){return a=d,()=>{a=null}}}}function qd(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return Dt("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Qn(i)}return Zd(t,n,null,e)}function Gd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Jd(){return Math.random().toString(36).substr(2,8)}function ls(e){return{usr:e.state,key:e.key}}function Dt(e,t,n,r){return n===void 0&&(n=null),_e({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?vt(t):t,{state:n,key:t&&t.key||r||Jd()})}function Qn(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function vt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Zd(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=we.Pop,l=null;function u(){a=we.Pop,l&&l({action:a,location:d.location})}function c(p,v){a=we.Push;let y=Dt(d.location,p,v);n&&n(y,p);let C=ls(y),h=d.createHref(y);try{s.pushState(C,"",h)}catch{i.location.assign(h)}o&&l&&l({action:a,location:y})}function f(p,v){a=we.Replace;let y=Dt(d.location,p,v);n&&n(y,p);let C=ls(y),h=d.createHref(y);s.replaceState(C,"",h),o&&l&&l({action:a,location:y})}let d={get action(){return a},get location(){return e(i,s)},listen(p){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(as,u),l=p,()=>{i.removeEventListener(as,u),l=null}},createHref(p){return t(i,p)},push:c,replace:f,go(p){return s.go(p)}};return d}var ze;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ze||(ze={}));function Qd(e){return e.index===!0}function Ya(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((r,i)=>{let o=[...t,i],s=typeof r.id=="string"?r.id:o.join("-");return te(r.index!==!0||!r.children,"Cannot specify children on an index route"),te(!n.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),n.add(s),Qd(r)?_e({},r,{id:s}):_e({},r,{id:s,children:r.children?Ya(r.children,o,n):void 0})})}function fn(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?vt(t):t,i=Ga(r.pathname||"/",n);if(i==null)return null;let o=Ka(e);ef(o);let s=null;for(let a=0;s==null&&a<o.length;++a)s=uf(o[a],i);return s}function Ka(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((i,o)=>{let s={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};s.relativePath.startsWith("/")&&(te(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(r.length));let a=Ft([r,s.relativePath]),l=n.concat(s);i.children&&i.children.length>0&&(te(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),Ka(i.children,t,l,a)),!(i.path==null&&!i.index)&&t.push({path:a,score:lf(a,i.index),routesMeta:l})}),t}function ef(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cf(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tf=/^:\w+$/,nf=3,rf=2,of=1,sf=10,af=-2,cs=e=>e==="*";function lf(e,t){let n=e.split("/"),r=n.length;return n.some(cs)&&(r+=af),t&&(r+=rf),n.filter(i=>!cs(i)).reduce((i,o)=>i+(tf.test(o)?nf:o===""?of:sf),r)}function cf(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function uf(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],l=s===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",c=Kt({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let f=a.route;o.push({params:r,pathname:Ft([i,c.pathname]),pathnameBase:pf(Ft([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=Ft([i,c.pathnameBase]))}return o}function qa(e,t){return t===void 0&&(t={}),e.replace(/:(\w+)/g,(n,r)=>(te(t[r]!=null,'Missing ":'+r+'" param'),t[r])).replace(/(\/?)\*/,(n,r,i,o)=>{const s="*";return t[s]==null?o==="/*"?"/":"":""+r+t[s]})}function Kt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=df(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,f)=>{if(c==="*"){let d=a[f]||"";s=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return u[c]=ff(a[f]||"",c),u},{}),pathname:o,pathnameBase:s,pattern:e}}function df(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ja(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,a)=>(r.push(a),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function ff(e,t){try{return decodeURIComponent(e)}catch(n){return Ja(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Ga(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ja(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Za(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?vt(e):e;return{pathname:n?n.startsWith("/")?n:hf(n,t):t,search:mf(r),hash:gf(i)}}function hf(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _i(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qa(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=vt(e):(i=_e({},e),te(!i.pathname||!i.pathname.includes("?"),_i("?","pathname","search",i)),te(!i.pathname||!i.pathname.includes("#"),_i("#","pathname","hash",i)),te(!i.search||!i.search.includes("#"),_i("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(r||s==null)a=n;else{let f=t.length-1;if(s.startsWith("..")){let d=s.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let l=Za(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ft=e=>e.join("/").replace(/\/\/+/g,"/"),pf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mf=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gf=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,yf=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,i=new Headers(r.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),_e({},r,{headers:i}))};class Fr extends Error{}class el{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,te(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new Fr("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce((i,o)=>{let[s,a]=o;return Object.assign(i,{[s]:this.trackPromise(s,a)})},{})}trackPromise(t,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(t);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,t,null,i),i=>this.onSettle(r,t,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,i){if(this.controller.signal.aborted&&r instanceof Fr)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(t,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let t=this.subscriber;t&&t(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{t.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return te(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,i]=n;return Object.assign(t,{[r]:wf(i)})},{})}}function vf(e){return e instanceof Promise&&e._tracked===!0}function wf(e){if(!vf(e))return e;if(e._error)throw e._error;return e._data}function bf(e){return new el(e)}const xf=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,_e({},r,{headers:i}))};class Tn{constructor(t,n,r){this.status=t,this.statusText=n||"",this.data=r}}function Ro(e){return e instanceof Tn}const Ci={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Ef={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function Sf(e){te(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Ya(e.routes),n=null,r=new Set,i=null,o=null,s=null,a=!1,l=fn(t,e.history.location,e.basename),u=null;if(l==null){let{matches:A,route:F,error:z}=ps(t);l=A,u={[F.id]:z}}let c=!l.some(A=>A.route.loader)||e.hydrationData!=null,f,d={historyAction:e.history.action,location:e.history.location,matches:l,initialized:c,navigation:Ci,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||u,fetchers:new Map},p=we.Pop,v=!1,y,C=!1,h=!1,b=[],S=[],w=new Map,_=0,M=-1,N=new Map,I=new Set,k=new Map,B=new Map;function H(){return n=e.history.listen(A=>{let{action:F,location:z}=A;return P(F,z)}),d.initialized||P(we.Pop,d.location),f}function O(){n&&n(),r.clear(),y&&y.abort(),d.fetchers.forEach((A,F)=>de(F))}function W(A){return r.add(A),()=>r.delete(A)}function x(A){d=_e({},d,A),r.forEach(F=>F(d))}function R(A,F){var z;let q=d.actionData!=null&&d.navigation.formMethod!=null&&d.navigation.state==="loading"&&((z=d.navigation.formAction)==null?void 0:z.split("?")[0])===A.pathname,J=F.loaderData?{loaderData:Ni(d.loaderData,F.loaderData,F.matches||[])}:{};x(_e({},q?{}:{actionData:null},F,J,{historyAction:p,location:A,initialized:!0,navigation:Ci,revalidation:"idle",restoreScrollPosition:d.navigation.formData?!1:he(A,F.matches||d.matches),preventScrollReset:v})),C||p===we.Pop||(p===we.Push?e.history.push(A,A.state):p===we.Replace&&e.history.replace(A,A.state)),p=we.Pop,v=!1,C=!1,h=!1,b=[],S=[]}async function T(A,F){if(typeof A=="number"){e.history.go(A);return}let{path:z,submission:q,error:J}=us(A,F),pe=Dt(d.location,z,F&&F.state),oe=(F&&F.replace)===!0||q!=null?we.Replace:we.Push,ee=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0;return await P(oe,pe,{submission:q,pendingError:J,preventScrollReset:ee,replace:F&&F.replace})}function E(){if(G(),x({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){P(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}P(p||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function P(A,F,z){y&&y.abort(),y=null,p=A,C=(z&&z.startUninterruptedRevalidation)===!0,ae(d.location,d.matches),v=(z&&z.preventScrollReset)===!0;let q=z&&z.overrideNavigation,J=fn(t,F,e.basename);if(!J){let{matches:ke,route:Se,error:Te}=ps(t);xe(),R(F,{matches:ke,loaderData:{},errors:{[Se.id]:Te}});return}if(Nf(d.location,F)){R(F,{matches:J});return}y=new AbortController;let pe=In(F,y.signal,z&&z.submission),oe,ee;if(z&&z.pendingError)ee={[hn(J).route.id]:z.pendingError};else if(z&&z.submission){let ke=await $(pe,F,z.submission,J,{replace:z.replace});if(ke.shortCircuited)return;oe=ke.pendingActionData,ee=ke.pendingActionError,q=_e({state:"loading",location:F},z.submission)}let{shortCircuited:se,loaderData:ge,errors:Ee}=await D(pe,F,J,q,z&&z.submission,z&&z.replace,oe,ee);se||(y=null,R(F,{matches:J,loaderData:ge,errors:Ee}))}async function $(A,F,z,q,J){G();let pe=_e({state:"submitting",location:F},z);x({navigation:pe});let oe,ee=ws(q,F);if(!ee.route.action)oe=ms(F);else if(oe=await $n("action",A,ee),A.signal.aborted)return{shortCircuited:!0};if(yn(oe)){let se=_e({state:"loading",location:Dt(d.location,oe.location)},z);return await ne(oe,se,J&&J.replace),{shortCircuited:!0}}if(Kn(oe)){let se=hn(q,ee.route.id);return(J&&J.replace)!==!0&&(p=we.Push),{pendingActionError:{[se.route.id]:oe.error}}}if(qt(oe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[ee.route.id]:oe.data}}}async function D(A,F,z,q,J,pe,oe,ee){let se=q;se||(se={state:"loading",location:F,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[ge,Ee]=ds(d,z,J,F,h,b,S,oe,ee,k);if(xe(Me=>!(z&&z.some(Ne=>Ne.route.id===Me))||ge&&ge.some(Ne=>Ne.route.id===Me)),ge.length===0&&Ee.length===0)return R(F,{matches:z,loaderData:Ni(d.loaderData,{},z),errors:ee||null,actionData:oe||null}),{shortCircuited:!0};C||(Ee.forEach(Me=>{let[Ne]=Me;const Qe=d.fetchers.get(Ne);let Vt={state:"loading",data:Qe&&Qe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(Ne,Vt)}),x(_e({navigation:se,actionData:oe||d.actionData||null},Ee.length>0?{fetchers:new Map(d.fetchers)}:{}))),M=++_,Ee.forEach(Me=>{let[Ne]=Me;return w.set(Ne,y)});let{results:ke,loaderResults:Se,fetcherResults:Te}=await fe(d.matches,ge,Ee,A);if(A.signal.aborted)return{shortCircuited:!0};Ee.forEach(Me=>{let[Ne]=Me;return w.delete(Ne)});let Ye=gs(ke);if(Ye){let Me=Mi(d,Ye);return await ne(Ye,Me,pe),{shortCircuited:!0}}let{loaderData:Ze,errors:Le}=hs(d,z,ge,Se,ee,Ee,Te,B);B.forEach((Me,Ne)=>{Me.subscribe(Qe=>{(Qe||Me.done)&&B.delete(Ne)})}),ve();let Pt=ue(M);return _e({loaderData:Ze,errors:Le},Pt||Ee.length>0?{fetchers:new Map(d.fetchers)}:{})}function V(A){return d.fetchers.get(A)||Ef}function X(A,F,z,q){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");w.has(A)&&ce(A);let J=fn(t,z,e.basename);if(!J){re(A,F,new Tn(404,"Not Found",null));return}let{path:pe,submission:oe}=us(z,q,!0),ee=ws(J,pe);if(oe){Z(A,F,pe,ee,oe);return}k.set(A,[pe,ee]),j(A,F,pe,ee)}async function Z(A,F,z,q,J){if(G(),k.delete(A),!q.route.action){let{error:Ke}=ms(z);re(A,F,Ke);return}let pe=d.fetchers.get(A),oe=_e({state:"submitting"},J,{data:pe&&pe.data});d.fetchers.set(A,oe),x({fetchers:new Map(d.fetchers)});let ee=new AbortController,se=In(z,ee.signal,J);w.set(A,ee);let ge=await $n("action",se,q);if(se.signal.aborted){w.get(A)===ee&&w.delete(A);return}if(yn(ge)){w.delete(A),I.add(A);let Ke=_e({state:"loading"},J,{data:void 0});d.fetchers.set(A,Ke),x({fetchers:new Map(d.fetchers)});let at=_e({state:"loading",location:Dt(d.location,ge.location)},J);await ne(ge,at);return}if(Kn(ge)){re(A,F,ge.error);return}qt(ge)&&te(!1,"defer() is not supported in actions");let Ee=d.navigation.location||d.location,ke=In(Ee,ee.signal),Se=d.navigation.state!=="idle"?fn(t,d.navigation.location,e.basename):d.matches;te(Se,"Didn't find any matches after fetcher action");let Te=++_;N.set(A,Te);let Ye=_e({state:"loading",data:ge.data},J);d.fetchers.set(A,Ye);let[Ze,Le]=ds(d,Se,J,Ee,h,b,S,{[q.route.id]:ge.data},void 0,k);Le.filter(Ke=>{let[at]=Ke;return at!==A}).forEach(Ke=>{let[at]=Ke,yr=d.fetchers.get(at),Ei={state:"loading",data:yr&&yr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(at,Ei),w.set(at,ee)}),x({fetchers:new Map(d.fetchers)});let{results:Pt,loaderResults:Me,fetcherResults:Ne}=await fe(d.matches,Ze,Le,ke);if(ee.signal.aborted)return;N.delete(A),w.delete(A),Le.forEach(Ke=>{let[at]=Ke;return w.delete(at)});let Qe=gs(Pt);if(Qe){let Ke=Mi(d,Qe);await ne(Qe,Ke);return}let{loaderData:Vt,errors:gt}=hs(d,d.matches,Ze,Me,void 0,Le,Ne,B),bi={state:"idle",data:ge.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(A,bi);let xi=ue(Te);d.navigation.state==="loading"&&Te>M?(te(p,"Expected pending action"),y&&y.abort(),R(d.navigation.location,{matches:Se,loaderData:Vt,errors:gt,fetchers:new Map(d.fetchers)})):(x(_e({errors:gt,loaderData:Ni(d.loaderData,Vt,Se)},xi?{fetchers:new Map(d.fetchers)}:{})),h=!1)}async function j(A,F,z,q){let J=d.fetchers.get(A),pe={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:J&&J.data};d.fetchers.set(A,pe),x({fetchers:new Map(d.fetchers)});let oe=new AbortController,ee=In(z,oe.signal);w.set(A,oe);let se=await $n("loader",ee,q);if(qt(se)&&(se=await rl(se,ee.signal,!0)||se),w.get(A)===oe&&w.delete(A),ee.signal.aborted)return;if(yn(se)){let Ee=Mi(d,se);await ne(se,Ee);return}if(Kn(se)){let Ee=hn(d.matches,F);d.fetchers.delete(A),x({fetchers:new Map(d.fetchers),errors:{[Ee.route.id]:se.error}});return}te(!qt(se),"Unhandled fetcher deferred data");let ge={state:"idle",data:se.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(A,ge),x({fetchers:new Map(d.fetchers)})}async function ne(A,F,z){A.revalidate&&(h=!0),te(F.location,"Expected a location on the redirect navigation"),y=null;let q=z===!0?we.Replace:we.Push;await P(q,F.location,{overrideNavigation:F})}async function fe(A,F,z,q){let J=await Promise.all([...F.map(ee=>$n("loader",q,ee)),...z.map(ee=>{let[,se,ge]=ee;return $n("loader",In(se,q.signal),ge)})]),pe=J.slice(0,F.length),oe=J.slice(F.length);return await Promise.all([ys(A,F,pe,q.signal,!1,d.loaderData),ys(A,z.map(ee=>{let[,,se]=ee;return se}),oe,q.signal,!0)]),{results:J,loaderResults:pe,fetcherResults:oe}}function G(){h=!0,b.push(...xe()),k.forEach((A,F)=>{w.has(F)&&(S.push(F),ce(F))})}function re(A,F,z){let q=hn(d.matches,F);de(A),x({errors:{[q.route.id]:z},fetchers:new Map(d.fetchers)})}function de(A){w.has(A)&&ce(A),k.delete(A),N.delete(A),I.delete(A),d.fetchers.delete(A)}function ce(A){let F=w.get(A);te(F,"Expected fetch controller: "+A),F.abort(),w.delete(A)}function be(A){for(let F of A){let q={state:"idle",data:V(F).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(F,q)}}function ve(){let A=[];for(let F of I){let z=d.fetchers.get(F);te(z,"Expected fetcher: "+F),z.state==="loading"&&(I.delete(F),A.push(F))}be(A)}function ue(A){let F=[];for(let[z,q]of N)if(q<A){let J=d.fetchers.get(z);te(J,"Expected fetcher: "+z),J.state==="loading"&&(ce(z),N.delete(z),F.push(z))}return be(F),F.length>0}function xe(A){let F=[];return B.forEach((z,q)=>{(!A||A(q))&&(z.cancel(),F.push(q),B.delete(q))}),F}function L(A,F,z){if(i=A,s=F,o=z||(q=>q.key),!a&&d.navigation===Ci){a=!0;let q=he(d.location,d.matches);q!=null&&x({restoreScrollPosition:q})}return()=>{i=null,s=null,o=null}}function ae(A,F){if(i&&o&&s){let z=F.map(J=>vs(J,d.loaderData)),q=o(A,z)||A.key;i[q]=s()}}function he(A,F){if(i&&o&&s){let z=F.map(pe=>vs(pe,d.loaderData)),q=o(A,z)||A.key,J=i[q];if(typeof J=="number")return J}return null}return f={get basename(){return e.basename},get state(){return d},get routes(){return t},initialize:H,subscribe:W,enableScrollRestoration:L,navigate:T,fetch:X,revalidate:E,createHref:si,getFetcher:V,deleteFetcher:de,dispose:O,_internalFetchControllers:w,_internalActiveDeferreds:B},f}function us(e,t,n){n===void 0&&(n=!1);let r=typeof e=="string"?e:Qn(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(t.formMethod!=null&&t.formMethod!=="get")return{path:r,submission:{formMethod:t.formMethod,formAction:si(vt(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};let i=vt(r);try{let o=nl(t.formData);n&&i.search&&il(i.search)&&o.append("index",""),i.search="?"+o}catch{return{path:r,error:new Tn(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Qn(i)}}function Mi(e,t){let{formMethod:n,formAction:r,formEncType:i,formData:o}=e.navigation;return{state:"loading",location:Dt(e.location,t.location),formMethod:n||void 0,formAction:r||void 0,formEncType:i||void 0,formData:o||void 0}}function _f(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function ds(e,t,n,r,i,o,s,a,l,u){let c=l?Object.values(l)[0]:a?Object.values(a)[0]:null,f=l?Object.keys(l)[0]:void 0,p=_f(t,f).filter((y,C)=>y.route.loader!=null&&(Cf(e.loaderData,e.matches[C],y)||o.some(h=>h===y.route.id)||fs(e.location,e.matches[C],n,r,y,i,c))),v=[];return u&&u.forEach((y,C)=>{let[h,b]=y;s.includes(C)?v.push([C,h,b]):i&&fs(h,b,n,h,b,i,c)&&v.push([C,h,b])}),[p,v]}function Cf(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function tl(e,t){let n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function fs(e,t,n,r,i,o,s){let a=Ji(e),l=t.params,u=Ji(r),c=i.params,f=tl(t,i)||a.toString()===u.toString()||a.search!==u.search||o;if(i.route.shouldRevalidate){let d=i.route.shouldRevalidate(_e({currentUrl:a,currentParams:l,nextUrl:u,nextParams:c},n,{actionResult:s,defaultShouldRevalidate:f}));if(typeof d=="boolean")return d}return f}async function $n(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1);let o,s,a,l=new Promise((c,f)=>a=f),u=()=>a();t.signal.addEventListener("abort",u);try{let c=n.route[e];te(c,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),s=await Promise.race([c({request:t,params:n.params}),l])}catch(c){o=ze.error,s=c}finally{t.signal.removeEventListener("abort",u)}if(s instanceof Response){let c=s.status,f=s.headers.get("Location");if(i)throw s;if(c>=300&&c<=399&&f!=null){if(r)throw s;return{type:ze.redirect,status:c,location:f,revalidate:s.headers.get("X-Remix-Revalidate")!==null}}let d,p=s.headers.get("Content-Type");return p&&p.startsWith("application/json")?d=await s.json():d=await s.text(),o===ze.error?{type:o,error:new Tn(c,s.statusText,d),headers:s.headers}:{type:ze.data,data:d,statusCode:s.status,headers:s.headers}}return o===ze.error?{type:o,error:s}:s instanceof el?{type:ze.deferred,deferredData:s}:{type:ze.data,data:s}}function In(e,t,n){let r=Ji(e).toString(),i={signal:t};if(n){let{formMethod:o,formEncType:s,formData:a}=n;i.method=o.toUpperCase(),i.body=s==="application/x-www-form-urlencoded"?nl(a):a}return new Request(r,i)}function nl(e){let t=new URLSearchParams;for(let[n,r]of e.entries())te(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(n,r);return t}function Mf(e,t,n,r,i){let o={},s=null,a,l=!1,u={};return n.forEach((c,f)=>{let d=t[f].route.id;if(te(!yn(c),"Cannot handle redirect results in processLoaderData"),Kn(c)){let p=hn(e,d),v=c.error;r&&(v=Object.values(r)[0],r=void 0),s=Object.assign(s||{},{[p.route.id]:v}),l||(l=!0,a=Ro(c.error)?c.error.status:500),c.headers&&(u[d]=c.headers)}else qt(c)?(i&&i.set(d,c.deferredData),o[d]=c.deferredData.data):(o[d]=c.data,c.statusCode!=null&&c.statusCode!==200&&!l&&(a=c.statusCode),c.headers&&(u[d]=c.headers))}),r&&(s=r),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:u}}function hs(e,t,n,r,i,o,s,a){let{loaderData:l,errors:u}=Mf(t,n,r,i,a);for(let c=0;c<o.length;c++){let[f,,d]=o[c];te(s!==void 0&&s[c]!==void 0,"Did not find corresponding fetcher result");let p=s[c];if(Kn(p)){let v=hn(e.matches,d.route.id);u&&u[v.route.id]||(u=_e({},u,{[v.route.id]:p.error})),e.fetchers.delete(f)}else{if(yn(p))throw new Error("Unhandled fetcher revalidation redirect");if(qt(p))throw new Error("Unhandled fetcher deferred data");{let v={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(f,v)}}}return{loaderData:l,errors:u}}function Ni(e,t,n){let r=_e({},t);return n.forEach(i=>{let o=i.route.id;t[o]===void 0&&e[o]!==void 0&&(r[o]=e[o])}),r}function hn(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function ps(e){let t=e.find(n=>n.index||n.path===""||n.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new Tn(404,"Not Found",null)}}function ms(e){let t=typeof e=="string"?e:si(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+t+"]")),{type:ze.error,error:new Tn(405,"Method Not Allowed","No action found for ["+t+"]")}}function gs(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(yn(n))return n}}function si(e){return(e.pathname||"")+(e.search||"")}function Nf(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function qt(e){return e.type===ze.deferred}function Kn(e){return e.type===ze.error}function yn(e){return(e&&e.type)===ze.redirect}async function ys(e,t,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],l=t[s],u=e.find(f=>f.route.id===l.route.id),c=u!=null&&!tl(u,l)&&(o&&o[l.route.id])!==void 0;qt(a)&&(i||c)&&await rl(a,r,i).then(f=>{f&&(n[s]=f||n[s])})}}async function rl(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ze.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ze.error,error:i}}return{type:ze.data,data:e.deferredData.data}}}function il(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function vs(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function ws(e,t){let n=typeof t=="string"?vt(t).search:t.search;return e[e.length-1].route.index&&!il(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function Ji(e){let t=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",n=typeof e=="string"?e:si(e);return new URL(n,t)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kr.apply(this,arguments)}function Tf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Pf=typeof Object.is=="function"?Object.is:Tf,{useState:Rf,useEffect:Af,useLayoutEffect:$f,useDebugValue:If}=Ki;function Of(e,t,n){const r=t(),[{inst:i},o]=Rf({inst:{value:r,getSnapshot:t}});return $f(()=>{i.value=r,i.getSnapshot=t,Ti(i)&&o({inst:i})},[e,r,t]),Af(()=>(Ti(i)&&o({inst:i}),e(()=>{Ti(i)&&o({inst:i})})),[e]),If(r),r}function Ti(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!Pf(n,r)}catch{return!0}}function Df(e,t,n){return t()}const Ff=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kf=!Ff,Lf=kf?Df:Of,zf="useSyncExternalStore"in Ki?(e=>e.useSyncExternalStore)(Ki):Lf,ol=m.createContext(null),ai=m.createContext(null),hr=m.createContext(null),Lr=m.createContext(null),li=m.createContext(null),Pn=m.createContext(null),wt=m.createContext({outlet:null,matches:[]}),sl=m.createContext(null);function Bf(e,t){let{relative:n}=t===void 0?{}:t;Bt()||te(!1);let{basename:r,navigator:i}=m.useContext(li),{hash:o,pathname:s,search:a}=ul(e,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Ft([r,s])),i.createHref({pathname:l,search:a,hash:o})}function Bt(){return m.useContext(Pn)!=null}function Rn(){return Bt()||te(!1),m.useContext(Pn).location}function Hf(){return m.useContext(Pn).navigationType}function Vf(e){Bt()||te(!1);let{pathname:t}=Rn();return m.useMemo(()=>Kt(e,t),[t,e])}function al(e){return e.filter((t,n)=>n===0||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase)}function Ht(){Bt()||te(!1);let{basename:e,navigator:t}=m.useContext(li),{matches:n}=m.useContext(wt),{pathname:r}=Rn(),i=JSON.stringify(al(n).map(a=>a.pathnameBase)),o=m.useRef(!1);return m.useEffect(()=>{o.current=!0}),m.useCallback(function(a,l){if(l===void 0&&(l={}),!o.current)return;if(typeof a=="number"){t.go(a);return}let u=Qa(a,JSON.parse(i),r,l.relative==="path");e!=="/"&&(u.pathname=u.pathname==="/"?e:Ft([e,u.pathname])),(l.replace?t.replace:t.push)(u,l.state,l)},[e,t,i,r])}const ll=m.createContext(null);function Uf(){return m.useContext(ll)}function cl(e){let t=m.useContext(wt).outlet;return t&&m.createElement(ll.Provider,{value:e},t)}function sn(){let{matches:e}=m.useContext(wt),t=e[e.length-1];return t?t.params:{}}function ul(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=m.useContext(wt),{pathname:i}=Rn(),o=JSON.stringify(al(r).map(s=>s.pathnameBase));return m.useMemo(()=>Qa(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function Ao(e,t){Bt()||te(!1);let n=m.useContext(hr),{matches:r}=m.useContext(wt),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let s=i?i.pathnameBase:"/";i&&i.route;let a=Rn(),l;if(t){var u;let v=typeof t=="string"?vt(t):t;s==="/"||(u=v.pathname)!=null&&u.startsWith(s)||te(!1),l=v}else l=a;let c=l.pathname||"/",f=s==="/"?c:c.slice(s.length)||"/",d=fn(e,{pathname:f}),p=dl(d&&d.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Ft([s,v.pathname]),pathnameBase:v.pathnameBase==="/"?s:Ft([s,v.pathnameBase])})),r,n||void 0);return t?m.createElement(Pn.Provider,{value:{location:kr({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:we.Pop}},p):p}function Wf(){let e=fl(),t=Ro(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unhandled Thrown Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:i},n):null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:o},"errorElement")," props on ",m.createElement("code",{style:o},"<Route>")))}class Xf extends m.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?m.createElement(sl.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function jf(e){let{routeContext:t,match:n,children:r}=e,i=m.useContext(ol);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),m.createElement(wt.Provider,{value:t},r)}function dl(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(s=>s.route.id&&(i==null?void 0:i[s.route.id]));o>=0||te(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,s,a)=>{let l=s.route.id?i==null?void 0:i[s.route.id]:null,u=n?s.route.errorElement||m.createElement(Wf,null):null,c=()=>m.createElement(jf,{match:s,routeContext:{outlet:o,matches:t.concat(r.slice(0,a+1))}},l?u:s.route.element!==void 0?s.route.element:o);return n&&(s.route.errorElement||a===0)?m.createElement(Xf,{location:n.location,component:u,error:l,children:c()}):c()},null)}var Zi;(function(e){e.UseRevalidator="useRevalidator"})(Zi||(Zi={}));var Nt;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Nt||(Nt={}));function Yf(e){let t=m.useContext(ai);return t||te(!1),t}function an(e){let t=m.useContext(hr);return t||te(!1),t}function Kf(){return an(Nt.UseNavigation).navigation}function qf(){let e=Yf(Zi.UseRevalidator),t=an(Nt.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function Gf(){let{matches:e,loaderData:t}=an(Nt.UseMatches);return m.useMemo(()=>e.map(n=>{let{pathname:r,params:i}=n;return{id:n.route.id,pathname:r,params:i,data:t[n.route.id],handle:n.route.handle}}),[e,t])}function Jf(){let e=an(Nt.UseLoaderData),t=m.useContext(wt);t||te(!1);let n=t.matches[t.matches.length-1];return n.route.id||te(!1),e.loaderData[n.route.id]}function Zf(e){return an(Nt.UseRouteLoaderData).loaderData[e]}function Qf(){let e=an(Nt.UseActionData);return m.useContext(wt)||te(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function fl(){var e;let t=m.useContext(sl),n=an(Nt.UseRouteError),r=m.useContext(wt),i=r.matches[r.matches.length-1];return t||(r||te(!1),i.route.id||te(!1),(e=n.errors)==null?void 0:e[i.route.id])}function hl(){let e=m.useContext(Lr);return e==null?void 0:e._data}function eh(){let e=m.useContext(Lr);return e==null?void 0:e._error}function th(e){let{fallbackElement:t,router:n}=e,r=zf(n.subscribe,()=>n.state,()=>n.state),i=m.useMemo(()=>({createHref:n.createHref,go:s=>n.navigate(s),push:(s,a,l)=>n.navigate(s,{state:a,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(s,a,l)=>n.navigate(s,{replace:!0,state:a,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[n]),o=n.basename||"/";return m.createElement(ai.Provider,{value:{router:n,navigator:i,static:!1,basename:o}},m.createElement(hr.Provider,{value:r},m.createElement(ci,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?m.createElement(gl,null):t)))}function nh(e){let{basename:t,children:n,initialEntries:r,initialIndex:i}=e,o=m.useRef();o.current==null&&(o.current=ja({initialEntries:r,initialIndex:i,v5Compat:!0}));let s=o.current,[a,l]=m.useState({action:s.action,location:s.location});return m.useLayoutEffect(()=>s.listen(l),[s]),m.createElement(ci,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s})}function rh(e){let{to:t,replace:n,state:r,relative:i}=e;Bt()||te(!1);let o=m.useContext(hr),s=Ht();return m.useEffect(()=>{o&&o.navigation.state!=="idle"||s(t,{replace:n,state:r,relative:i})}),null}function pl(e){return cl(e.context)}function ml(e){te(!1)}function ci(e){let{basename:t="/",children:n=null,location:r,navigationType:i=we.Pop,navigator:o,static:s=!1}=e;Bt()&&te(!1);let a=t.replace(/^\/*/,"/"),l=m.useMemo(()=>({basename:a,navigator:o,static:s}),[a,o,s]);typeof r=="string"&&(r=vt(r));let{pathname:u="/",search:c="",hash:f="",state:d=null,key:p="default"}=r,v=m.useMemo(()=>{let y=Ga(u,a);return y==null?null:{pathname:y,search:c,hash:f,state:d,key:p}},[a,u,c,f,d,p]);return v==null?null:m.createElement(li.Provider,{value:l},m.createElement(Pn.Provider,{children:n,value:{location:v,navigationType:i}}))}function gl(e){let{children:t,location:n}=e,r=m.useContext(ai),i=r&&!t?r.router.routes:er(t);return Ao(i,n)}function ih(e){let{children:t,errorElement:n,resolve:r}=e;return m.createElement(sh,{resolve:r,errorElement:n},m.createElement(ah,null,t))}var qe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(qe||(qe={}));const oh=new Promise(()=>{});class sh extends m.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,n){console.error("<Await> caught the following error during render",t,n)}render(){let{children:t,errorElement:n,resolve:r}=this.props,i=null,o=qe.pending;if(!(r instanceof Promise))o=qe.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>r});else if(this.state.error){o=qe.error;let s=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>s})}else r._tracked?(i=r,o=i._error!==void 0?qe.error:i._data!==void 0?qe.success:qe.pending):(o=qe.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),i=r.then(s=>Object.defineProperty(r,"_data",{get:()=>s}),s=>Object.defineProperty(r,"_error",{get:()=>s})));if(o===qe.error&&i._error instanceof Fr)throw oh;if(o===qe.error&&!n)throw i._error;if(o===qe.error)return m.createElement(Lr.Provider,{value:i,children:n});if(o===qe.success)return m.createElement(Lr.Provider,{value:i,children:t});throw i}}function ah(e){let{children:t}=e,n=hl();return typeof t=="function"?t(n):m.createElement(m.Fragment,null,t)}function er(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,i)=>{if(!m.isValidElement(r))return;if(r.type===m.Fragment){n.push.apply(n,er(r.props.children,t));return}r.type!==ml&&te(!1),!r.props.index||!r.props.children||te(!1);let o=[...t,i],s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(s.children=er(r.props.children,o)),n.push(s)}),n}function lh(e){return dl(e)}function $o(e){return e.map(t=>{let n=kr({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=$o(n.children)),n})}function ch(e,t){return Sf({basename:t==null?void 0:t.basename,history:ja({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:$o(e)}).initialize()}const uh=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:Fr,Await:ih,MemoryRouter:nh,Navigate:rh,get NavigationType(){return we},Outlet:pl,Route:ml,Router:ci,RouterProvider:th,Routes:gl,UNSAFE_DataRouterContext:ai,UNSAFE_DataRouterStateContext:hr,UNSAFE_DataStaticRouterContext:ol,UNSAFE_LocationContext:Pn,UNSAFE_NavigationContext:li,UNSAFE_RouteContext:wt,UNSAFE_enhanceManualRouteObjects:$o,createMemoryRouter:ch,createPath:Qn,createRoutesFromChildren:er,createRoutesFromElements:er,defer:bf,generatePath:qa,isRouteErrorResponse:Ro,json:yf,matchPath:Kt,matchRoutes:fn,parsePath:vt,redirect:xf,renderMatches:lh,resolvePath:Za,useActionData:Qf,useAsyncError:eh,useAsyncValue:hl,useHref:Bf,useInRouterContext:Bt,useLoaderData:Jf,useLocation:Rn,useMatch:Vf,useMatches:Gf,useNavigate:Ht,useNavigation:Kf,useNavigationType:Hf,useOutlet:cl,useOutletContext:Uf,useParams:sn,useResolvedPath:ul,useRevalidator:qf,useRouteError:fl,useRouteLoaderData:Zf,useRoutes:Ao},Symbol.toStringTag,{value:"Module"}));/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dh(e){let{basename:t,children:n,window:r}=e,i=m.useRef();i.current==null&&(i.current=qd({window:r,v5Compat:!0}));let o=i.current,[s,a]=m.useState({action:o.action,location:o.location});return m.useLayoutEffect(()=>o.listen(a),[o]),m.createElement(ci,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:o})}var bs;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(bs||(bs={}));var xs;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xs||(xs={}));function Sn(e,t){return qa(e,t)}var fh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};function hh(e,t){e===void 0&&(e=!1);var n=fh(m.useState(e),2),r=n[0],i=n[1],o=m.useMemo(function(){var s=t===void 0?!e:t,a=function(){return i(function(d){return d===e?s:e})},l=function(d){return i(d)},u=function(){return i(e)},c=function(){return i(s)};return{toggle:a,set:l,setLeft:u,setRight:c}},[]);return[r,o]}var ph=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};function mh(e){e===void 0&&(e=!1);var t=ph(hh(e),2),n=t[0],r=t[1],i=r.toggle,o=r.set,s=m.useMemo(function(){var a=function(){return o(!0)},l=function(){return o(!1)};return{toggle:i,set:function(c){return o(!!c)},setTrue:a,setFalse:l}},[]);return[n,s]}var gh=["fieldProps","min","proFieldProps","max"],yh=function(t,n){var r=t.fieldProps,i=t.min,o=t.proFieldProps,s=t.max,a=ii(t,gh);return g(oi,Ue({valueType:"digit",fieldProps:Ue({min:i,max:s},r),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},a))};const On=Fe.forwardRef(yh);var vh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],wh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],bh=Fe.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,s=e.mode,a=e.valueEnum,l=e.request,u=e.showSearch,c=e.options,f=ii(e,vh),d=m.useContext($a);return g(oi,Ue(Ue({valueEnum:Ia(a),request:l,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Ue({options:c,mode:s,showSearch:u,getPopupContainer:d.getPopupContainer},n),ref:t,proFieldProps:o},f),{},{children:r}))}),xh=Fe.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,s=e.mode,a=e.valueEnum,l=e.request,u=e.options,c=ii(e,wh),f=Ue({options:u,mode:s||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},n),d=m.useContext($a);return g(oi,Ue(Ue({valueEnum:Ia(a),request:l,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Ue({getPopupContainer:d.getPopupContainer},f),ref:t,proFieldProps:o},c),{},{children:r}))}),Eh=bh,Sh=xh,Io=Eh;Io.SearchSelect=Sh;Io.displayName="ProFormComponent";const yl=Io;var _h=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],Ch=Fe.forwardRef(function(e,t){var n=e.fieldProps,r=e.unCheckedChildren,i=e.checkedChildren,o=e.proFieldProps,s=ii(e,_h);return g(oi,Ue({valueType:"switch",fieldProps:Ue({unCheckedChildren:r,checkedChildren:i},n),ref:t,valuePropName:"checked",proFieldProps:o,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},s))});const Qi=Ch,eo=Oa();class An{constructor({fileType:t,meta:n,parentFile:r}){Oe(this,"parentFile");Oe(this,"fileType");Oe(this,"meta");Oe(this,"disposer");this.fileType=t,this.meta=n,this.parentFile=r,Lt(this,{meta:_t,fileType:_t,parentFile:_t,updateMeta:It});const i=ss(()=>Da(this.meta),s=>{eo.emit("updateFileMeta",s)},{fireImmediately:!0,delay:300}),o=ss(()=>Q.mapValues(this.subFileMap,s=>s.reduce((a,l)=>(a[l.meta.id]=l,a),{})),(s,a)=>{a&&Object.entries(a).forEach(([l,u])=>Object.entries(u).forEach(([c,f])=>{Q.get(s,[l,c])||f.disposer()}))},{fireImmediately:!0,delay:300});this.disposer=()=>{i(),o()}}updateMeta(t){Q.isFunction(t)?this.meta=t(this.meta):this.meta=t}subFileMapToJson(){return Q.mapValues(this.subFileMap,t=>t.map(n=>n.toJSON()))}static fromJSON(){throw new Error(`【${this.name}】未实现formJson方法`)}static create(t,n){throw new Error(`【${this.name}】未实现create方法`)}}var U=(e=>(e.Text="Text",e.LongText="LongText",e.Date="Date",e.DateTime="DateTime",e.Enum="Enum",e.Number="Number",e.AutoNumber="AutoNumber",e.PhoneNumber="PhoneNumber",e.Email="Email",e.URL="URL",e.Image="Image",e))(U||{}),ui=(e=>(e.MasterDetail="MasterDetail",e.Lookup="Lookup",e))(ui||{}),Wn=(e=>(e.ManyToOne="ManyToOne",e.OneToOne="OneToOne",e))(Wn||{}),Gt=(e=>(e.ManyToMany="ManyToMany",e.ManyToOne="ManyToOne",e))(Gt||{}),ln=(e=>(e.App="App",e.Page="Page",e.Widget="Widget",e.View="View",e.Entity="Entity",e.EntityRelation="EntityRelation",e.EntityField="EntityField",e.Flow="Flow",e.FlowNode="FlowNode",e.FlowEdge="FlowEdge",e))(ln||{});class tn extends An{constructor(n,r){super({fileType:ln.EntityField,meta:n,parentFile:r});Oe(this,"subFileMap",{});Lt(this,{subFileMap:_t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return it(()=>{const i=new tn({...n,version:"0.0.1"},r);return r.entityFields.push(i),i})}static formJSON(n,r){return tn.create(Q.omit(n,"fileType"),r)}}class tr extends An{constructor(n,r){super({fileType:ln.EntityRelation,meta:n,parentFile:r});Oe(this,"subFileMap",{});Lt(this,{subFileMap:_t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return it(()=>{const i=new tr(n,r);return r.entityRelations.push(i),i})}static formJSON(n,r){return tr.create(Q.omit(n,"fileType"),r)}}const ni=class extends An{constructor(n,r){super({fileType:ln.Entity,meta:n,parentFile:r});Oe(this,"subFileMap",{entityFields:[],entityRelations:[]});Lt(this,{subFileMap:_t,entityFields:Re,entityRelations:Re,deleteEntityField:It})}get entityFields(){return this.subFileMap.entityFields}deleteEntityField(n){const r=[...this.subFileMap.entityFields];this.subFileMap.entityFields.length=0,this.subFileMap.entityFields.push(...r.filter(i=>i.meta.id!==n))}get entityRelations(){return this.subFileMap.entityRelations}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return it(()=>{const i=new ni({...n,version:"0.0.1"},r);return r.entities.push(i),i})}static formJSON(n,r){return it(()=>{const i=ni.create(Q.omit(n,["fileType","entityFields","entityRelations"]),r);return n.entityFields.map(o=>tn.formJSON(o,i)),n.entityRelations.map(o=>tr.formJSON(o,i)),i})}};let Pe=ni;Oe(Pe,"getEntityFieldTypeLabel",n=>{switch(n){case U.AutoNumber:return"自动编号";case U.Date:return"日期";case U.DateTime:return"日期时间";case U.Number:return"数字";case U.Email:return"邮箱";case U.Enum:return"枚举";case U.LongText:return"长文本";case U.Text:return"单行文本";case U.PhoneNumber:return"手机号";case U.URL:return"网址";case U.Image:return"图片";default:return"未知"}});function Mh(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Pi=()=>!1,Oo=Object.assign,vl=Array.isArray,Ct=e=>typeof e=="string",Nh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Th=/\B([A-Z])/g,Ph=Nh(e=>e.replace(Th,"-$1").toLowerCase());function Rh(e){throw e}function Ah(e){}function vn(e,t,n,r){const i=e,o=new SyntaxError(String(i));return o.code=e,o.loc=t,o}const to=Symbol(""),$h=Symbol(""),Ih=Symbol(""),Oh=Symbol(""),Dh=Symbol(""),zr=Symbol(""),Fh=Symbol(""),kh=Symbol(""),Lh=Symbol(""),zh=Symbol(""),wl=Symbol(""),Bh=Symbol(""),Hh=Symbol(""),Vh=Symbol(""),Es=Symbol(""),Uh=Symbol(""),bl=Symbol(""),Wh=Symbol(""),Xh=Symbol(""),jh=Symbol(""),pt={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Yh(e,t=pt){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function no(e,t,n,r,i,o,s,a=!1,l=!1,u=!1,c=pt){return e&&(a?(e.helper(zr),e.helper(Wr(e.inSSR,u))):e.helper(Ur(e.inSSR,u)),s&&e.helper(Bh)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:o,directives:s,isBlock:a,disableTracking:l,isComponent:u,loc:c}}function pn(e,t=pt){return{type:15,loc:t,properties:e}}function xl(e,t){return{type:16,loc:pt,key:Ct(e)?ct(e,!0):e,value:t}}function ct(e,t=!1,n=pt,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function Ri(e,t=pt){return{type:8,loc:t,children:e}}function Br(e,t=[],n=pt){return{type:14,loc:n,callee:e,arguments:t}}function Ss(e,t=void 0,n=!1,r=!1,i=pt){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function Kh(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:pt}}function qh(e){return{type:21,body:e,loc:pt}}const Gh=e=>e.type===4&&e.isStatic,vr=(e,t)=>e===t||e===Ph(t);function Jh(e){if(vr(e,"Teleport"))return $h;if(vr(e,"Suspense"))return Ih;if(vr(e,"KeepAlive"))return Oh;if(vr(e,"BaseTransition"))return Dh}function Zh(e,t,n){const i={source:e.source.slice(t,t+n),start:Hr(e.start,e.source,t),end:e.end};return n!=null&&(i.end=Hr(e.start,e.source,t+n)),i}function Hr(e,t,n=t.length){return Vr(Oo({},e),t,n)}function Vr(e,t,n=t.length){let r=0,i=-1;for(let o=0;o<n;o++)t.charCodeAt(o)===10&&(r++,i=o);return e.offset+=n,e.line+=r,e.column=i===-1?e.column+n:n-i,e}function El(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&(n||i.exp)&&(Ct(t)?i.name===t:t.test(i.name)))return i}}function Sl(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const o=e.props[i];if(o.type===6){if(n)continue;if(o.name===t&&(o.value||r))return o}else if(o.name==="bind"&&(o.exp||r)&&_l(o.arg,t))return o}}function _l(e,t){return!!(e&&Gh(e)&&e.content===t)}function Qh(e){return e.type===7&&e.name==="slot"}function Cl(e){return e.type===1&&e.tagType===3}function _s(e){return e.type===1&&e.tagType===2}function Ur(e,t){return e||t?Lh:zh}function Wr(e,t){return e||t?Fh:kh}const ep=new Set([Uh,bl]);function Ml(e,t=[]){if(e&&!Ct(e)&&e.type===14){const n=e.callee;if(!Ct(n)&&ep.has(n))return Ml(e.arguments[0],t.concat(e))}return[e,t]}function Xr(e,t,n){let r,i=e.type===13?e.props:e.arguments[2],o=[],s;if(i&&!Ct(i)&&i.type===14){const a=Ml(i);i=a[0],o=a[1],s=o[o.length-1]}if(i==null||Ct(i))r=pn([t]);else if(i.type===14){const a=i.arguments[0];!Ct(a)&&a.type===15?Cs(t,a)||a.properties.unshift(t):i.callee===Wh?r=Br(n.helper(Es),[pn([t]),i]):i.arguments.unshift(pn([t])),!r&&(r=i)}else i.type===15?(Cs(t,i)||i.properties.unshift(t),r=i):(r=Br(n.helper(Es),[pn([t]),i]),s&&s.callee===bl&&(s=o[o.length-2]));e.type===13?s?s.arguments[0]=r:e.props=r:s?s.arguments[0]=r:e.arguments[2]=r}function Cs(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(i=>i.key.type===4&&i.key.content===r)}return n}function tp(e){return e.type===14&&e.callee===Xh?e.arguments[1].returns:e}function np(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(Ur(r,e.isComponent)),t(zr),t(Wr(r,e.isComponent)))}function Ms(e,t){const n=t.options?t.options.compatConfig:t.compatConfig,r=n&&n[e];return e==="MODE"?r||3:r}function Nl(e,t){const n=Ms("MODE",t),r=Ms(e,t);return n===3?r===!0:r!==!1}function jr(e,t,n,...r){return Nl(e,t)}const rp=/&(gt|lt|amp|apos|quot);/g,ip={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Ns={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Pi,isPreTag:Pi,isCustomElement:Pi,decodeEntities:e=>e.replace(rp,(t,n)=>ip[n]),onError:Rh,onWarn:Ah,comments:!1};function op(e,t={}){const n=sp(e,t),r=Ge(n);return Yh(Do(n,0,[]),st(n,r))}function sp(e,t){const n=Oo({},Ns);let r;for(r in t)n[r]=t[r]===void 0?Ns[r]:t[r];return{options:n,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:n.onWarn}}function Do(e,t,n){const r=di(n),i=r?r.ns:0,o=[];for(;!mp(e,t,n);){const a=e.source;let l;if(t===0||t===1){if(!e.inVPre&&Be(a,e.options.delimiters[0]))l=hp(e,t);else if(t===0&&a[0]==="<")if(a.length===1)me(e,5,1);else if(a[1]==="!")Be(a,"<!--")?l=lp(e):Be(a,"<!DOCTYPE")?l=Dn(e):Be(a,"<![CDATA[")?i!==0?l=ap(e,n):(me(e,1),l=Dn(e)):(me(e,11),l=Dn(e));else if(a[1]==="/")if(a.length===2)me(e,5,2);else if(a[2]===">"){me(e,14,2),Ae(e,3);continue}else if(/[a-z]/i.test(a[2])){me(e,23),ro(e,1,r);continue}else me(e,12,2),l=Dn(e);else/[a-z]/i.test(a[1])?(l=cp(e,n),Nl("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(u=>u.type===7&&Tl(u.name))&&(l=l.children)):a[1]==="?"?(me(e,21,1),l=Dn(e)):me(e,12,1)}if(l||(l=pp(e,t)),vl(l))for(let u=0;u<l.length;u++)Ts(o,l[u]);else Ts(o,l)}let s=!1;if(t!==2&&t!==1){const a=e.options.whitespace!=="preserve";for(let l=0;l<o.length;l++){const u=o[l];if(u.type===2)if(e.inPre)u.content=u.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(u.content))a&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const c=o[l-1],f=o[l+1];!c||!f||a&&(c.type===3&&f.type===3||c.type===3&&f.type===1||c.type===1&&f.type===3||c.type===1&&f.type===1&&/[\r\n]/.test(u.content))?(s=!0,o[l]=null):u.content=" "}else u.type===3&&!e.options.comments&&(s=!0,o[l]=null)}if(e.inPre&&r&&e.options.isPreTag(r.tag)){const l=o[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return s?o.filter(Boolean):o}function Ts(e,t){if(t.type===2){const n=di(e);if(n&&n.type===2&&n.loc.end.offset===t.loc.start.offset){n.content+=t.content,n.loc.end=t.loc.end,n.loc.source+=t.loc.source;return}}e.push(t)}function ap(e,t){Ae(e,9);const n=Do(e,3,t);return e.source.length===0?me(e,6):Ae(e,3),n}function lp(e){const t=Ge(e);let n;const r=/--(\!)?>/.exec(e.source);if(!r)n=e.source.slice(4),Ae(e,e.source.length),me(e,7);else{r.index<=3&&me(e,0),r[1]&&me(e,10),n=e.source.slice(4,r.index);const i=e.source.slice(0,r.index);let o=1,s=0;for(;(s=i.indexOf("<!--",o))!==-1;)Ae(e,s-o+1),s+4<i.length&&me(e,16),o=s+1;Ae(e,r.index+r[0].length-o+1)}return{type:3,content:n,loc:st(e,t)}}function Dn(e){const t=Ge(e),n=e.source[1]==="?"?1:2;let r;const i=e.source.indexOf(">");return i===-1?(r=e.source.slice(n),Ae(e,e.source.length)):(r=e.source.slice(n,i),Ae(e,i+1)),{type:3,content:r,loc:st(e,t)}}function cp(e,t){const n=e.inPre,r=e.inVPre,i=di(t),o=ro(e,0,i),s=e.inPre&&!n,a=e.inVPre&&!r;if(o.isSelfClosing||e.options.isVoidTag(o.tag))return s&&(e.inPre=!1),a&&(e.inVPre=!1),o;t.push(o);const l=e.options.getTextMode(o,i),u=Do(e,l,t);t.pop();{const c=o.props.find(f=>f.type===6&&f.name==="inline-template");if(c&&jr("COMPILER_INLINE_TEMPLATE",e,c.loc)){const f=st(e,o.loc.end);c.value={type:2,content:f.source,loc:f}}}if(o.children=u,io(e.source,o.tag))ro(e,1,i);else if(me(e,24,0,o.loc.start),e.source.length===0&&o.tag.toLowerCase()==="script"){const c=u[0];c&&Be(c.loc.source,"<!--")&&me(e,8)}return o.loc=st(e,o.loc.start),s&&(e.inPre=!1),a&&(e.inVPre=!1),o}const Tl=Mh("if,else,else-if,for,slot");function ro(e,t,n){const r=Ge(e),i=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),o=i[1],s=e.options.getNamespace(o,n);Ae(e,i[0].length),nr(e);const a=Ge(e),l=e.source;e.options.isPreTag(o)&&(e.inPre=!0);let u=Ps(e,t);t===0&&!e.inVPre&&u.some(d=>d.type===7&&d.name==="pre")&&(e.inVPre=!0,Oo(e,a),e.source=l,u=Ps(e,t).filter(d=>d.name!=="v-pre"));let c=!1;if(e.source.length===0?me(e,9):(c=Be(e.source,"/>"),t===1&&c&&me(e,4),Ae(e,c?2:1)),t===1)return;let f=0;return e.inVPre||(o==="slot"?f=2:o==="template"?u.some(d=>d.type===7&&Tl(d.name))&&(f=3):up(o,u,e)&&(f=1)),{type:1,ns:s,tag:o,tagType:f,props:u,isSelfClosing:c,children:[],loc:st(e,r),codegenNode:void 0}}function up(e,t,n){const r=n.options;if(r.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||Jh(e)||r.isBuiltInComponent&&r.isBuiltInComponent(e)||r.isNativeTag&&!r.isNativeTag(e))return!0;for(let i=0;i<t.length;i++){const o=t[i];if(o.type===6){if(o.name==="is"&&o.value){if(o.value.content.startsWith("vue:"))return!0;if(jr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}else{if(o.name==="is")return!0;if(o.name==="bind"&&_l(o.arg,"is")&&jr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}}function Ps(e,t){const n=[],r=new Set;for(;e.source.length>0&&!Be(e.source,">")&&!Be(e.source,"/>");){if(Be(e.source,"/")){me(e,22),Ae(e,1),nr(e);continue}t===1&&me(e,3);const i=dp(e,r);i.type===6&&i.value&&i.name==="class"&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),t===0&&n.push(i),/^[^\t\r\n\f />]/.test(e.source)&&me(e,15),nr(e)}return n}function dp(e,t){const n=Ge(e),i=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(i)&&me(e,2),t.add(i),i[0]==="="&&me(e,19);{const a=/["'<]/g;let l;for(;l=a.exec(i);)me(e,17,l.index)}Ae(e,i.length);let o;/^[\t\r\n\f ]*=/.test(e.source)&&(nr(e),Ae(e,1),nr(e),o=fp(e),o||me(e,13));const s=st(e,n);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(i)){const a=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(i);let l=Be(i,"."),u=a[1]||(l||Be(i,":")?"bind":Be(i,"@")?"on":"slot"),c;if(a[2]){const d=u==="slot",p=i.lastIndexOf(a[2]),v=st(e,Rs(e,n,p),Rs(e,n,p+a[2].length+(d&&a[3]||"").length));let y=a[2],C=!0;y.startsWith("[")?(C=!1,y.endsWith("]")?y=y.slice(1,y.length-1):(me(e,27),y=y.slice(1))):d&&(y+=a[3]||""),c={type:4,content:y,isStatic:C,constType:C?3:0,loc:v}}if(o&&o.isQuoted){const d=o.loc;d.start.offset++,d.start.column++,d.end=Hr(d.start,o.content),d.source=d.source.slice(1,-1)}const f=a[3]?a[3].slice(1).split("."):[];return l&&f.push("prop"),u==="bind"&&c&&f.includes("sync")&&jr("COMPILER_V_BIND_SYNC",e,s,c.loc.source)&&(u="model",f.splice(f.indexOf("sync"),1)),{type:7,name:u,exp:o&&{type:4,content:o.content,isStatic:!1,constType:0,loc:o.loc},arg:c,modifiers:f,loc:s}}return!e.inVPre&&Be(i,"v-")&&me(e,26),{type:6,name:i,value:o&&{type:2,content:o.content,loc:o.loc},loc:s}}function fp(e){const t=Ge(e);let n;const r=e.source[0],i=r==='"'||r==="'";if(i){Ae(e,1);const o=e.source.indexOf(r);o===-1?n=qn(e,e.source.length,4):(n=qn(e,o,4),Ae(e,1))}else{const o=/^[^\t\r\n\f >]+/.exec(e.source);if(!o)return;const s=/["'<=`]/g;let a;for(;a=s.exec(o[0]);)me(e,18,a.index);n=qn(e,o[0].length,4)}return{content:n,isQuoted:i,loc:st(e,t)}}function hp(e,t){const[n,r]=e.options.delimiters,i=e.source.indexOf(r,n.length);if(i===-1){me(e,25);return}const o=Ge(e);Ae(e,n.length);const s=Ge(e),a=Ge(e),l=i-n.length,u=e.source.slice(0,l),c=qn(e,l,t),f=c.trim(),d=c.indexOf(f);d>0&&Vr(s,u,d);const p=l-(c.length-f.length-d);return Vr(a,u,p),Ae(e,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:f,loc:st(e,s,a)},loc:st(e,o)}}function pp(e,t){const n=t===3?["]]>"]:["<",e.options.delimiters[0]];let r=e.source.length;for(let s=0;s<n.length;s++){const a=e.source.indexOf(n[s],1);a!==-1&&r>a&&(r=a)}const i=Ge(e);return{type:2,content:qn(e,r,t),loc:st(e,i)}}function qn(e,t,n){const r=e.source.slice(0,t);return Ae(e,t),n===2||n===3||!r.includes("&")?r:e.options.decodeEntities(r,n===4)}function Ge(e){const{column:t,line:n,offset:r}=e;return{column:t,line:n,offset:r}}function st(e,t,n){return n=n||Ge(e),{start:t,end:n,source:e.originalSource.slice(t.offset,n.offset)}}function di(e){return e[e.length-1]}function Be(e,t){return e.startsWith(t)}function Ae(e,t){const{source:n}=e;Vr(e,n,t),e.source=n.slice(t)}function nr(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Ae(e,t[0].length)}function Rs(e,t,n){return Hr(t,e.originalSource.slice(t.offset,n),n)}function me(e,t,n,r=Ge(e)){n&&(r.offset+=n,r.column+=n),e.options.onError(vn(t,{start:r,end:r,source:""}))}function mp(e,t,n){const r=e.source;switch(t){case 0:if(Be(r,"</")){for(let i=n.length-1;i>=0;--i)if(io(r,n[i].tag))return!0}break;case 1:case 2:{const i=di(n);if(i&&io(r,i.tag))return!0;break}case 3:if(Be(r,"]]>"))return!0;break}return!r}function io(e,t){return Be(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function gp(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];Ct(i)||(t.parent=e,t.childIndex=n,t.onNodeRemoved=r,Fo(i,t))}}function Fo(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let o=0;o<n.length;o++){const s=n[o](e,t);if(s&&(vl(s)?r.push(...s):r.push(s)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(wl);break;case 5:t.ssr||t.helper(Vh);break;case 9:for(let o=0;o<e.branches.length;o++)Fo(e.branches[o],t);break;case 10:case 11:case 1:case 0:gp(e,t);break}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function Pl(e,t){const n=Ct(e)?r=>r===e:r=>e.test(r);return(r,i)=>{if(r.type===1){const{props:o}=r;if(r.tagType===3&&o.some(Qh))return;const s=[];for(let a=0;a<o.length;a++){const l=o[a];if(l.type===7&&n(l.name)){o.splice(a,1),a--;const u=t(r,l,i);u&&s.push(u)}}return s}}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");Pl(/^(if|else|else-if)$/,(e,t,n)=>yp(e,t,n,(r,i,o)=>{const s=n.parent.children;let a=s.indexOf(r),l=0;for(;a-->=0;){const u=s[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(o)r.codegenNode=$s(i,l,n);else{const u=vp(r.codegenNode);u.alternate=$s(i,l+r.branches.length-1,n)}}}));function yp(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(vn(28,t.loc)),t.exp=ct("true",!1,i)}if(t.name==="if"){const i=As(e,t),o={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(o),r)return r(o,i,!0)}else{const i=n.parent.children;let o=i.indexOf(e);for(;o-->=-1;){const s=i[o];if(s&&s.type===3){n.removeNode(s);continue}if(s&&s.type===2&&!s.content.trim().length){n.removeNode(s);continue}if(s&&s.type===9){t.name==="else-if"&&s.branches[s.branches.length-1].condition===void 0&&n.onError(vn(30,e.loc)),n.removeNode();const a=As(e,t);s.branches.push(a);const l=r&&r(s,a,!1);Fo(a,n),l&&l(),n.currentNode=null}else n.onError(vn(30,e.loc));break}}}function As(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!El(e,"for")?e.children:[e],userKey:Sl(e,"key"),isTemplateIf:n}}function $s(e,t,n){return e.condition?Kh(e.condition,Is(e,t,n),Br(n.helper(wl),['""',"true"])):Is(e,t,n)}function Is(e,t,n){const{helper:r}=n,i=xl("key",ct(`${t}`,!1,pt,2)),{children:o}=e,s=o[0];if(o.length!==1||s.type!==1)if(o.length===1&&s.type===11){const l=s.codegenNode;return Xr(l,i,n),l}else{let l=64;return no(n,r(to),pn([i]),o,l+"",void 0,void 0,!0,!1,!1,e.loc)}else{const l=s.codegenNode,u=tp(l);return u.type===13&&np(u,n),Xr(u,i,n),l}}function vp(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}Pl("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return wp(e,t,n,o=>{const s=Br(r(Hh),[o.source]),a=Cl(e),l=El(e,"memo"),u=Sl(e,"key"),c=u&&(u.type===6?ct(u.value.content,!0):u.exp),f=u?xl("key",c):null,d=o.source.type===4&&o.source.constType>0,p=d?64:u?128:256;return o.codegenNode=no(n,r(to),void 0,s,p+"",void 0,void 0,!0,!d,!1,e.loc),()=>{let v;const{children:y}=o,C=y.length!==1||y[0].type!==1,h=_s(e)?e:a&&e.children.length===1&&_s(e.children[0])?e.children[0]:null;if(h?(v=h.codegenNode,a&&f&&Xr(v,f,n)):C?v=no(n,r(to),f?pn([f]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(v=y[0].codegenNode,a&&f&&Xr(v,f,n),v.isBlock!==!d&&(v.isBlock?(i(zr),i(Wr(n.inSSR,v.isComponent))):i(Ur(n.inSSR,v.isComponent))),v.isBlock=!d,v.isBlock?(r(zr),r(Wr(n.inSSR,v.isComponent))):r(Ur(n.inSSR,v.isComponent))),l){const b=Ss(Ds(o.parseResult,[ct("_cached")]));b.body=qh([Ri(["const _memo = (",l.exp,")"]),Ri(["if (_cached",...c?[" && _cached.key === ",c]:[],` && ${n.helperString(jh)}(_cached, _memo)) return _cached`]),Ri(["const _item = ",v]),ct("_item.memo = _memo"),ct("return _item")]),s.arguments.push(b,ct("_cache"),ct(String(n.cached++)))}else s.arguments.push(Ss(Ds(o.parseResult),v,!0))}})});function wp(e,t,n,r){if(!t.exp){n.onError(vn(31,t.loc));return}const i=Ep(t.exp);if(!i){n.onError(vn(32,t.loc));return}const{addIdentifiers:o,removeIdentifiers:s,scopes:a}=n,{source:l,value:u,key:c,index:f}=i,d={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:c,objectIndexAlias:f,parseResult:i,children:Cl(e)?e.children:[e]};n.replaceNode(d),a.vFor++;const p=r&&r(d);return()=>{a.vFor--,p&&p()}}const bp=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Os=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,xp=/^\(|\)$/g;function Ep(e,t){const n=e.loc,r=e.content,i=r.match(bp);if(!i)return;const[,o,s]=i,a={source:wr(n,s.trim(),r.indexOf(s,o.length)),value:void 0,key:void 0,index:void 0};let l=o.trim().replace(xp,"").trim();const u=o.indexOf(l),c=l.match(Os);if(c){l=l.replace(Os,"").trim();const f=c[1].trim();let d;if(f&&(d=r.indexOf(f,u+l.length),a.key=wr(n,f,d)),c[2]){const p=c[2].trim();p&&(a.index=wr(n,p,r.indexOf(p,a.key?d+f.length:u+l.length)))}}return l&&(a.value=wr(n,l,u)),a}function wr(e,t,n){return ct(t,!1,Zh(e,n,t.length))}function Ds({value:e,key:t,index:n},r=[]){return Sp([e,t,n,...r])}function Sp(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||ct("_".repeat(r+1),!1))}const _p=/[\s\S]*{{[\s\S]*}}[\s\S]*/m,Cp=e=>typeof e=="string"&&_p.test(e);var Wt=(e=>(e[e.ROOT=0]="ROOT",e[e.ELEMENT=1]="ELEMENT",e[e.TEXT=2]="TEXT",e[e.COMMENT=3]="COMMENT",e[e.SIMPLE_EXPRESSION=4]="SIMPLE_EXPRESSION",e[e.INTERPOLATION=5]="INTERPOLATION",e[e.ATTRIBUTE=6]="ATTRIBUTE",e[e.DIRECTIVE=7]="DIRECTIVE",e[e.COMPOUND_EXPRESSION=8]="COMPOUND_EXPRESSION",e[e.IF=9]="IF",e[e.IF_BRANCH=10]="IF_BRANCH",e[e.FOR=11]="FOR",e[e.TEXT_CALL=12]="TEXT_CALL",e[e.VNODE_CALL=13]="VNODE_CALL",e[e.JS_CALL_EXPRESSION=14]="JS_CALL_EXPRESSION",e[e.JS_OBJECT_EXPRESSION=15]="JS_OBJECT_EXPRESSION",e[e.JS_PROPERTY=16]="JS_PROPERTY",e[e.JS_ARRAY_EXPRESSION=17]="JS_ARRAY_EXPRESSION",e[e.JS_FUNCTION_EXPRESSION=18]="JS_FUNCTION_EXPRESSION",e[e.JS_CONDITIONAL_EXPRESSION=19]="JS_CONDITIONAL_EXPRESSION",e[e.JS_CACHE_EXPRESSION=20]="JS_CACHE_EXPRESSION",e[e.JS_BLOCK_STATEMENT=21]="JS_BLOCK_STATEMENT",e[e.JS_TEMPLATE_LITERAL=22]="JS_TEMPLATE_LITERAL",e[e.JS_IF_STATEMENT=23]="JS_IF_STATEMENT",e[e.JS_ASSIGNMENT_EXPRESSION=24]="JS_ASSIGNMENT_EXPRESSION",e[e.JS_SEQUENCE_EXPRESSION=25]="JS_SEQUENCE_EXPRESSION",e[e.JS_RETURN_STATEMENT=26]="JS_RETURN_STATEMENT",e))(Wt||{});class nn extends An{constructor(n,r){super({fileType:ln.Widget,meta:n,parentFile:r});Oe(this,"stateTypeDefs");Oe(this,"subFileMap",{});const i=new Ju({});this.stateTypeDefs=i.appFactory.widgetByType[n.type].stateTypeDefs,Lt(this,{subFileMap:_t,flattenedMetaValMap:Re.struct,slots:Re.struct})}get flattenedMetaValMap(){return Q.mapValues(Zu.flatten(Da(this.meta.props)),n=>{var r,i,o,s,a,l,u,c;if(Cp(n)){const f=op(n);let d;return f.children.length===1&&((r=Q.head(f.children))==null?void 0:r.type)===Wt.INTERPOLATION||f.children.length===2&&((i=Q.head(f.children))==null?void 0:i.type)===Wt.INTERPOLATION&&((o=Q.last(f.children))==null?void 0:o.type)===Wt.TEXT&&((s=Q.last(f.children))==null?void 0:s.content.trim())==="}"?(d=((a=Q.head(f.children))==null?void 0:a.content).content||"",((l=Q.last(f.children))==null?void 0:l.type)===Wt.TEXT&&((u=Q.last(f.children))==null?void 0:u.content.trim())==="}"&&(d+=((c=Q.last(f.children))==null?void 0:c.content)??"")):d=`\`${f.children.map(p=>{if(p.type===Wt.TEXT)return p.content;if(p.type===Wt.INTERPOLATION){const v=p.content.content;return v?`\${${v}}`:""}return p.loc.source}).join("")}\``,{type:"Expression",raw:n,ast:f,evalString:d}}else return{type:"Normal",raw:n}})}get slots(){return{...this.meta.slots,...Q.mapValues(this.meta.dynamicSlots||{},n=>n.children)}}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return it(()=>{const i=new nn({...n,version:"0.0.1"},r);return r.widgets.push(i),i})}static formJSON(n,r){return nn.create(Q.omit(n,"fileType"),r)}}class _n extends An{constructor(n,r){super({fileType:ln.App,meta:n,parentFile:r});Oe(this,"subFileMap",{widgets:[]});Oe(this,"getWidgetStateDefs",()=>{const n="!define",r={"!name":"DATA_TREE",[n]:{},i:{"!type":"number","!doc":"组件当前所在上下文的层级"},currentRow:{"!doc":"当前行数据"}};return this.subFileMap.widgets.forEach(i=>{Reflect.set(r,i.meta.name,Q.omit(i.stateTypeDefs,n)),r[n]={...r[n],...i.stateTypeDefs[n]}}),r});Lt(this,{subFileMap:_t,widgets:Re,widgetMap:Re.struct,widgetRelationById:Re.struct,addWidget:It,deleteWidget:It,updateWidgets:It,moveWidget:It})}get widgets(){return this.subFileMap.widgets}get widgetMap(){return Q.keyBy(this.subFileMap.widgets,n=>n.meta.id)}get widgetRelationById(){return this.widgets.reduce((n,r)=>{const i=r.meta.id;Reflect.has(n,i)||(n[i]={props:r.meta,file:r,slotPath:""});const o=n[i];return Q.isEmpty(r.slots)||Object.entries(r.slots).forEach(([s,a])=>{a.forEach(l=>{Reflect.has(n,l)?(n[l].parent=o,n[l].slotPath=s):n[l]={props:this.widgetMap[l].meta,file:this.widgetMap[l],parent:o,slotPath:s}})}),n},{})}addWidget({sourceWidgetMeta:n,targetPosition:r,targetSlotPath:i,targetWidgetId:o}){const s=this.widgetMap[o];if(!s)return;const a=nn.create(n,this);s.slots[i].splice(r,0,a.meta.id)}moveWidget({sourceWidgetId:n,targetWidgetId:r,targetPosition:i,targetSlotPath:o}){let s=-1;this.subFileMap.widgets.forEach(a=>{var l,u;Q.isObject(a.slots)&&Object.keys(a.slots).forEach(c=>{s===-1&&(s=a.slots[c].findIndex(f=>f===n),s!==-1&&a.slots[c].splice(s,1))}),a.meta.id===r&&(((u=(l=this.widgetRelationById[n])==null?void 0:l.parent)==null?void 0:u.props.id)===r&&this.widgetRelationById[n].slotPath===o?a.slots[o].splice(s<i?i-1:i,0,n):a.slots[o].splice(i,0,n))})}deleteWidget(n,r=!0){this.subFileMap.widgets.forEach(s=>{Q.isObject(s.slots)&&Object.keys(s.slots).forEach(a=>{const l=s.slots[a].findIndex(u=>u===n);l!==-1&&s.slots[a].splice(l,1)})});const i=[n],o=[this.subFileMap.widgets.find(s=>s.meta.id===n)];for(;!Q.isEmpty(o);){const s=o.shift();Q.isObject(s.slots)&&Object.values(s.slots).forEach(a=>{a.forEach(l=>{i.push(l),o.push(this.subFileMap.widgets.find(u=>u.meta.id===l))})})}i.forEach(s=>{const a=this.subFileMap.widgets.findIndex(l=>l.meta.id===s);a!==-1&&this.subFileMap.widgets.splice(a,1)})}updateWidgets(n){const r=[...this.subFileMap.widgets];this.subFileMap.widgets.length=0,Q.isFunction(n)?this.subFileMap.widgets.push(...n(r)):this.subFileMap.widgets.push(...n)}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return it(()=>{const i=new _n({...n,version:"0.0.1"},r);return r.pages.push(i),i})}static formJSON(n,r){return it(()=>{const i=_n.create(Q.omit(n,["fileType","widgets"]),r);return n.widgets.map(o=>nn.formJSON(o,i)),i})}}class rr extends An{constructor(n){super({fileType:ln.App,meta:n,parentFile:null});Oe(this,"subFileMap",{pages:[],entities:[]});Oe(this,"persistMeta",()=>{typeof window>"u"||window.localStorage.setItem(this.meta.id,JSON.stringify(this.toJSON()))});Oe(this,"disposer",()=>{super.disposer(),eo.off("updateFileMeta",this.persistMeta)});Lt(this,{subFileMap:_t,entities:Re.struct,pages:Re.struct,entityMap:Re.struct,entityRelationMap:Re.struct,entityRelationsByTargetEntityNameMap:Re.struct,entityRelationsBySourceEntityNameMap:Re.struct,deleteEntity:It,deletePage:It}),eo.on("updateFileMeta",this.persistMeta)}get pages(){return this.subFileMap.pages}set pages(n){it(()=>{this.subFileMap.pages.length=0,this.subFileMap.pages.push(...n)})}deletePage(n){const r=[...this.subFileMap.pages];this.subFileMap.pages.length=0,this.subFileMap.pages.push(...r.filter(i=>i.meta.id!==n))}get entities(){return this.subFileMap.entities}set entities(n){it(()=>{this.subFileMap.entities.length=0,this.subFileMap.entities.push(...n)})}get entityMap(){return Q.keyBy(this.entities,n=>n.meta.id)}deleteEntity(n){const r=[...this.subFileMap.entities];this.subFileMap.entities.length=0,this.subFileMap.entities.push(...r.filter(i=>i.meta.id!==n))}get entityRelationMap(){return this.entities.reduce((n,r)=>({...n,...Q.keyBy(r.subFileMap.entityRelations,i=>i.meta.id)}),{})}get entityRelationsByTargetEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.targetEntity;return Q.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}get entityRelationsBySourceEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.sourceEntity;return Q.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n){return new rr(n)}static formJSON(n){return it(()=>{const r=rr.create({name:n.name,id:n.id,version:n.version});return n.entities.map(i=>Pe.formJSON(i,r)),n.pages.map(i=>_n.formJSON(i,r)),r})}}class Fs{constructor(t){Oe(this,"root");this.root=t,Lt(this,{app:Re,pageMap:Re.struct,entityMap:Re.struct,widgetMap:Re.struct,entityFieldMap:Re.struct,entityRelationMap:Re.struct})}get app(){return this.root}get pageMap(){return new Map(this.app.pages.map(t=>[t.meta.id,t]))}get entityMap(){return new Map(this.app.entities.map(t=>[t.meta.id,t]))}get widgetMap(){return this.app.pages.reduce((t,n)=>({...t,...n.widgetMap}),{})}get entityFieldMap(){return new Map(Q.flatten(this.app.entities.map(t=>t.subFileMap.entityFields.map(n=>[n.meta.id,n]))))}get entityRelationMap(){return new Map(Q.flatten(this.app.entities.map(t=>t.subFileMap.entityRelations.map(n=>[n.meta.id,n]))))}}Qu({useProxies:"always",enforceActions:"always",reactionRequiresObservable:!1});var dt=(e=>(e.Page="Page",e.Entity="Entity",e))(dt||{});const Mp=()=>g("div",{children:"ModuleManagerEntity"}),Np=({searchVal:e,itemAddRef:t})=>{const{app:n}=ht(),{appId:r,pageId:i}=sn(),o=Ht(),a=ht().app.pages.filter(c=>c.meta.name.includes(e)),[l]=jt.useForm(),u=c=>g(nd,{children:()=>g(Gi.Item,{className:Ai.listItem,onClick:()=>{o(Sn(Ve.PAGE,{appId:r,pageId:c.meta.id}))},children:Y("div",{className:Ai.listItemContent,children:[c.meta.id===i?g(Xe.Link,{children:c.meta.name}):g(Xe.Text,{children:c.meta.name}),g(rd,{trigger:["hover"],menu:{onClick:({key:f})=>{switch(f){case"Delete":n.deletePage(c.meta.id);break}},items:[{label:g(Xe.Text,{children:"复制"}),key:"Copy"},{label:g(Xe.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:g(Ud,{className:`${Ai.moreAction} mm_p-list_item_more_action`})},c.meta.id)]})})});return Y(ye,{children:[t&&Fa.createPortal(g(ed,{form:l,layout:"horizontal",title:"创建页面",modalProps:{mask:!1},onFinish:async c=>{await l.validateFields(),console.log(c);const f=De(),d=_n.create({id:De(),name:c.name,rootWidgetId:f},n);return nn.create({...Pr.mrSchemeToDefaultJson(ka.jsonPropsSchema),id:f,slots:{children:[]}},d),l.resetFields(),!0},trigger:g(nt,{type:"text",shape:"circle",size:"small",children:g(td,{})}),children:g(Et,{rules:[{required:!0,message:"请输入页面名称"}],name:"name",label:"页面名称",placeholder:"请输入页面名称"})}),t),g(Gi,{dataSource:a,size:"small",rowKey:c=>c.meta.id,renderItem:u})]})},Tp=zt(Np),Ai={listItem:ie({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:ie({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:ie({name:"eivff4",styles:"display:none"})},Pp=({visible:e,module:t,onClose:n})=>{const r=id(t).with(dt.Page,()=>"页面").with(dt.Entity,()=>"数据模型").otherwise(()=>"");m.useEffect(()=>{o("")},[t]);const[i,o]=m.useState(""),s=m.useRef(null),[a,l]=m.useState(!1);return m.useEffect(()=>{e&&l(!0)},[e]),g("div",{className:$i.drawerWrapper,children:g(od,{zIndex:8,title:Y("div",{children:[Y("div",{className:$i.drawerTitleWrapper,children:[g("span",{children:r}),g("span",{ref:s})]}),g(Un,{onChange:u=>o(u.target.value),value:i,allowClear:!0,placeholder:"搜索"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:$i.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:n,open:e,children:a&&Y(ye,{children:[t===dt.Page&&g(Tp,{itemAddRef:s.current,searchVal:i}),t===dt.Entity&&g(Mp,{itemAddRef:s.current,searchVal:i})]})})})},$i={drawerWrapper:ie({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:ie({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:ie({name:"a4hmbt",styles:"position:absolute"})},Rp=()=>Y(Ot.Header,{className:Ii.header,children:[g("div",{className:Ii.headerLogoWrapper,children:g("img",{src:"/modou.svg",alt:""})}),Y("div",{className:Ii.headerRight,children:[g(nt,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"预览"}),g(La,{src:"https://api.multiavatar.com/modou.png"})]})]}),Ii={header:ie({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:ie({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:ie({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},Ap=()=>{const e=sn(),t=Ht(),{app:n}=ht(),r=Q.isEmpty(n.pages);return m.useEffect(()=>{var i,o,s,a;r?Q.isEmpty(n.entities)||t(Sn(Ve.Entity,{...e,entityId:(a=(s=Q.head(n.entities))==null?void 0:s.meta)==null?void 0:a.id}),{replace:!0}):t(Sn(Ve.PAGE,{...e,pageId:(o=(i=Q.head(n.pages))==null?void 0:i.meta)==null?void 0:o.id}),{replace:!0})},[n.entities,n.pages,r,t,e]),g("div",{className:Ip.wrapper,children:g(To,{size:"large"})})},$p=zt(Ap),Ip={wrapper:ie({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},Op="MOCK_PAGE_ID",ks="MOCK_ROOT_WIDGET_ID",Dp=()=>{const e=rr.create({id:"app_id_mock",name:"app_name_mock",version:"0.0.1"}),t=Pr.mrSchemeToDefaultJson(sd.jsonPropsSchema),n={...t,props:{...t.props,title:"按钮-{{colDSL.span}}-大漠孤烟直哈哈"},id:"buttonDSL"},r={...Pr.mrSchemeToDefaultJson(ad.jsonPropsSchema),id:"colDSL",slots:{children:[n.id]}},o=[{...Pr.mrSchemeToDefaultJson(ka.jsonPropsSchema),id:ks,slots:{children:[r.id]}},r,n],s=_n.create({name:"大漠孤烟直",id:Op,rootWidgetId:ks},e);o.forEach(c=>nn.create({...c,id:c.id},s));const a=[{id:De(),type:U.AutoNumber,name:U.AutoNumber,title:U.AutoNumber,description:Pe.getEntityFieldTypeLabel(U.AutoNumber),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Date,name:U.Date,title:U.Date,description:Pe.getEntityFieldTypeLabel(U.Date),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.DateTime,name:U.DateTime,title:U.DateTime,description:Pe.getEntityFieldTypeLabel(U.DateTime),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Email,name:U.Email,title:U.Email,description:Pe.getEntityFieldTypeLabel(U.Email),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Image,name:U.Image,title:U.Image,description:Pe.getEntityFieldTypeLabel(U.Image),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.LongText,name:U.LongText,title:U.LongText,description:Pe.getEntityFieldTypeLabel(U.LongText),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Number,name:U.Number,title:U.Number,description:Pe.getEntityFieldTypeLabel(U.Number),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.PhoneNumber,name:U.PhoneNumber,title:U.PhoneNumber,description:Pe.getEntityFieldTypeLabel(U.PhoneNumber),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Text,name:U.Text,title:U.Text,description:Pe.getEntityFieldTypeLabel(U.Text),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.URL,name:U.URL,title:U.URL,description:Pe.getEntityFieldTypeLabel(U.URL),required:!1,config:{},version:"0.0.1"},{id:De(),type:U.Enum,name:U.Enum,title:U.Enum,description:Pe.getEntityFieldTypeLabel(U.Enum),required:!1,config:{enumCode:"",multiple:!0},version:"0.0.1"}],l=Pe.create({version:"0.0.1",id:"user",name:"user",title:"人员",description:"人员",position:{x:400,y:100}},e);a.forEach(c=>{tn.create({...c},l)});const u=Pe.create({version:"0.0.1",id:"department",name:"department",title:"部门",description:"部门",position:{x:800,y:100}},e);return tr.create({id:De(),name:"department",title:"部门",type:ui.Lookup,relationType:Gt.ManyToOne,description:"部门",sourceEntity:"user",targetEntity:"department",targetName:"user",targetTitle:"用户",targetDescription:"用户",version:"0.0.1"},l),a.forEach(c=>{tn.create({...c,required:!0,id:c.id+u.meta.id},u)}),e},Fp=[{title:"页面",icon:g(ld,{}),key:dt.Page},{title:"数据模型",icon:g(Bd,{}),key:dt.Entity}],kp=it(()=>{try{const e=JSON.parse(window.localStorage.getItem("app_id_mock"));return new Fs(rr.formJSON(e))}catch{return new Fs(Dp())}}),Lp=()=>{const e=sn(),[t,n]=m.useState(""),r=Ht(),{pathname:i}=Rn(),o=Kt(Ve.PAGE,i),s=Kt(Ve.Entity,i)??Kt(Ve.Entities,i),a=m.useCallback(()=>{n(o?dt.Page:s?dt.Entity:"")},[s,o]);za(a);const[l,u]=m.useState(!1),c=({key:d})=>{switch(d){case dt.Page:d===t?u(p=>!p):(n(d),u(!0));break;case dt.Entity:u(!1),n(d),r(Sn(Ve.Entities,{appId:e.appId}));break}},f=Kt(Ve.APP,i);return g(cd,{value:kp,children:f?g($p,{}):Y(Ot,{className:br.layout,children:[g(Rp,{}),Y(Ot,{children:[g(Ot.Sider,{className:br.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!l,children:g(ud,{className:br.menu,style:{width:"60px"},mode:"inline",selectedKeys:[t],onClick:c,items:Fp})}),Y(Ot.Content,{className:br.layoutContent,children:[g(Pp,{onClose:()=>{u(!1),a()},module:t,visible:l}),g(pl,{})]})]})]})})},br={layout:ie({name:"13udsys",styles:"height:100%"}),menu:ie({name:"13udsys",styles:"height:100%"}),layoutContent:ie({name:"bjn8wh",styles:"position:relative"}),sider:ie({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},Oi={header:ie({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:ie({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:ie({name:"s0vnfv",styles:"height:32px"})},zp=()=>g(Ot.Header,{className:Oi.header,children:g("div",{className:Oi.logoWrapper,children:g("img",{src:"/modou.svg",className:Oi.logo,alt:""})})}),Di={content:ie({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:ie({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:ie({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},Bp=()=>{const e=Ht();return g(Ot.Content,{className:Di.content,children:g(ri,{gutter:[0,0],children:Array(13).fill(1).map((t,n)=>g(Jn,{className:Di.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:g(Dr,{onClick:()=>e("/app/appId"),className:Di.card,actions:[g(dd,{},"setting"),g(fd,{},"edit"),g(hd,{},"ellipsis")],children:g(Dr.Meta,{avatar:g(La,{shape:"square",src:`https://api.multiavatar.com/modou_app_logo_${n}.png`}),title:"APP NAME",description:"我是 APP 描述"})})},n))})})},Ls=()=>Y(Ot,{className:ie({name:"1d3w5wq",styles:"width:100%"}),children:[g(zp,{}),g(Bp,{})]});var Hp=function(t){return typeof t=="function"},Vp=!1;const Up=Vp;function Wp(e){Up&&(Hp(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var t=m.useRef(e);t.current=m.useMemo(function(){return e},[e]);var n=m.useRef();return n.current||(n.current=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.current.apply(this,r)}),n.current}var Xp=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},jp=function(){var t=Xp(m.useState({}),2),n=t[1];return m.useCallback(function(){return n({})},[])};const Yp=jp;var Rr={},Kp=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Rl="%[a-f0-9]{2}",zs=new RegExp(Rl,"gi"),Bs=new RegExp("("+Rl+")+","gi");function oo(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],oo(n),oo(r))}function qp(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(zs),n=1;n<t.length;n++)e=oo(t,n).join(""),t=e.match(zs);return e}}function Gp(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=Bs.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=qp(n[0]);r!==n[0]&&(t[n[0]]=r)}n=Bs.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];e=e.replace(new RegExp(s,"g"),t[s])}return e}var Jp=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Gp(e)}},Zp=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const n=e.indexOf(t);return n===-1?[e]:[e.slice(0,n),e.slice(n+t.length)]},Qp=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var s=r[o],a=e[s];(i?t.indexOf(s)!==-1:t(s,a,e))&&(n[s]=a)}return n};(function(e){const t=Kp,n=Jp,r=Zp,i=Qp,o=h=>h==null;function s(h){switch(h.arrayFormat){case"index":return b=>(S,w)=>{const _=S.length;return w===void 0||h.skipNull&&w===null||h.skipEmptyString&&w===""?S:w===null?[...S,[u(b,h),"[",_,"]"].join("")]:[...S,[u(b,h),"[",u(_,h),"]=",u(w,h)].join("")]};case"bracket":return b=>(S,w)=>w===void 0||h.skipNull&&w===null||h.skipEmptyString&&w===""?S:w===null?[...S,[u(b,h),"[]"].join("")]:[...S,[u(b,h),"[]=",u(w,h)].join("")];case"comma":case"separator":return b=>(S,w)=>w==null||w.length===0?S:S.length===0?[[u(b,h),"=",u(w,h)].join("")]:[[S,u(w,h)].join(h.arrayFormatSeparator)];default:return b=>(S,w)=>w===void 0||h.skipNull&&w===null||h.skipEmptyString&&w===""?S:w===null?[...S,u(b,h)]:[...S,[u(b,h),"=",u(w,h)].join("")]}}function a(h){let b;switch(h.arrayFormat){case"index":return(S,w,_)=>{if(b=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!b){_[S]=w;return}_[S]===void 0&&(_[S]={}),_[S][b[1]]=w};case"bracket":return(S,w,_)=>{if(b=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!b){_[S]=w;return}if(_[S]===void 0){_[S]=[w];return}_[S]=[].concat(_[S],w)};case"comma":case"separator":return(S,w,_)=>{const M=typeof w=="string"&&w.includes(h.arrayFormatSeparator),N=typeof w=="string"&&!M&&c(w,h).includes(h.arrayFormatSeparator);w=N?c(w,h):w;const I=M||N?w.split(h.arrayFormatSeparator).map(k=>c(k,h)):w===null?w:c(w,h);_[S]=I};default:return(S,w,_)=>{if(_[S]===void 0){_[S]=w;return}_[S]=[].concat(_[S],w)}}}function l(h){if(typeof h!="string"||h.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function u(h,b){return b.encode?b.strict?t(h):encodeURIComponent(h):h}function c(h,b){return b.decode?n(h):h}function f(h){return Array.isArray(h)?h.sort():typeof h=="object"?f(Object.keys(h)).sort((b,S)=>Number(b)-Number(S)).map(b=>h[b]):h}function d(h){const b=h.indexOf("#");return b!==-1&&(h=h.slice(0,b)),h}function p(h){let b="";const S=h.indexOf("#");return S!==-1&&(b=h.slice(S)),b}function v(h){h=d(h);const b=h.indexOf("?");return b===-1?"":h.slice(b+1)}function y(h,b){return b.parseNumbers&&!Number.isNaN(Number(h))&&typeof h=="string"&&h.trim()!==""?h=Number(h):b.parseBooleans&&h!==null&&(h.toLowerCase()==="true"||h.toLowerCase()==="false")&&(h=h.toLowerCase()==="true"),h}function C(h,b){b=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},b),l(b.arrayFormatSeparator);const S=a(b),w=Object.create(null);if(typeof h!="string"||(h=h.trim().replace(/^[?#&]/,""),!h))return w;for(const _ of h.split("&")){if(_==="")continue;let[M,N]=r(b.decode?_.replace(/\+/g," "):_,"=");N=N===void 0?null:["comma","separator"].includes(b.arrayFormat)?N:c(N,b),S(c(M,b),N,w)}for(const _ of Object.keys(w)){const M=w[_];if(typeof M=="object"&&M!==null)for(const N of Object.keys(M))M[N]=y(M[N],b);else w[_]=y(M,b)}return b.sort===!1?w:(b.sort===!0?Object.keys(w).sort():Object.keys(w).sort(b.sort)).reduce((_,M)=>{const N=w[M];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?_[M]=f(N):_[M]=N,_},Object.create(null))}e.extract=v,e.parse=C,e.stringify=(h,b)=>{if(!h)return"";b=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},b),l(b.arrayFormatSeparator);const S=N=>b.skipNull&&o(h[N])||b.skipEmptyString&&h[N]==="",w=s(b),_={};for(const N of Object.keys(h))S(N)||(_[N]=h[N]);const M=Object.keys(_);return b.sort!==!1&&M.sort(b.sort),M.map(N=>{const I=h[N];return I===void 0?"":I===null?u(N,b):Array.isArray(I)?I.reduce(w(N),[]).join("&"):u(N,b)+"="+u(I,b)}).filter(N=>N.length>0).join("&")},e.parseUrl=(h,b)=>{b=Object.assign({decode:!0},b);const[S,w]=r(h,"#");return Object.assign({url:S.split("?")[0]||"",query:C(v(h),b)},b&&b.parseFragmentIdentifier&&w?{fragmentIdentifier:c(w,b)}:{})},e.stringifyUrl=(h,b)=>{b=Object.assign({encode:!0,strict:!0},b);const S=d(h.url).split("?")[0]||"",w=e.extract(h.url),_=e.parse(w,{sort:!1}),M=Object.assign(_,h.query);let N=e.stringify(M,b);N&&(N=`?${N}`);let I=p(h.url);return h.fragmentIdentifier&&(I=`#${u(h.fragmentIdentifier,b)}`),`${S}${N}${I}`},e.pick=(h,b,S)=>{S=Object.assign({parseFragmentIdentifier:!0},S);const{url:w,query:_,fragmentIdentifier:M}=e.parseUrl(h,S);return e.stringifyUrl({url:w,query:i(_,b),fragmentIdentifier:M},S)},e.exclude=(h,b,S)=>{const w=Array.isArray(b)?_=>!b.includes(_):(_,M)=>!b(_,M);return e.pick(h,w,S)}})(Rr);var et=globalThis&&globalThis.__assign||function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},et.apply(this,arguments)},Fn=uh,em={parseNumbers:!1,parseBooleans:!1},tm={skipNull:!1,skipEmptyString:!1},Al=function(t,n){var r,i,o=n||{},s=o.navigateMode,a=s===void 0?"push":s,l=o.parseOptions,u=o.stringifyOptions,c=et(et({},em),l),f=et(et({},tm),u),d=Fn.useLocation(),p=(r=Fn.useHistory)===null||r===void 0?void 0:r.call(Fn),v=(i=Fn.useNavigate)===null||i===void 0?void 0:i.call(Fn),y=Yp(),C=m.useRef(typeof t=="function"?t():t||{}),h=m.useMemo(function(){return Rr.parse(d.search,c)},[d.search]),b=m.useMemo(function(){return et(et({},C.current),h)},[h]),S=function(_){var M=typeof _=="function"?_(b):_;y(),p&&p[a]({hash:d.hash,search:Rr.stringify(et(et({},h),M),f)||"?"}),v&&v({hash:d.hash,search:Rr.stringify(et(et({},h),M),f)||"?"},{replace:a==="replace"})};return[b,Wp(S)]};function He(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=He(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const Hs=e=>{let t;const n=new Set,r=(l,u)=>{const c=typeof l=="function"?l(t):l;if(!Object.is(c,t)){const f=t;t=u??typeof c!="object"?c:Object.assign({},t,c),n.forEach(d=>d(t,f))}},i=()=>t,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The destroy method will be unsupported in the future version. You should use unsubscribe function returned by subscribe. Everything will be garbage collected if store is garbage collected."),n.clear()}};return t=e(r,i,a),a},nm=e=>e?Hs(e):Hs;var so={},rm={get exports(){return so},set exports(e){so=e}},$l={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fi=m,im=pd;function om(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sm=typeof Object.is=="function"?Object.is:om,am=im.useSyncExternalStore,lm=fi.useRef,cm=fi.useEffect,um=fi.useMemo,dm=fi.useDebugValue;$l.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=lm(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=um(function(){function l(p){if(!u){if(u=!0,c=p,p=r(p),i!==void 0&&s.hasValue){var v=s.value;if(i(v,p))return f=v}return f=p}if(v=f,sm(c,p))return v;var y=r(p);return i!==void 0&&i(v,y)?v:(c=p,f=y)}var u=!1,c,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var a=am(e,o[0],o[1]);return cm(function(){s.hasValue=!0,s.value=a},[a]),dm(a),a};(function(e){e.exports=$l})(rm);const fm=md(so),{useSyncExternalStoreWithSelector:hm}=fm;function pm(e,t=e.getState,n){const r=hm(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return m.useDebugValue(r),r}function We(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var mm={value:()=>{}};function hi(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ar(n)}function Ar(e){this._=e}function gm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ar.prototype=hi.prototype={constructor:Ar,on:function(e,t){var n=this._,r=gm(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=ym(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=Vs(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Vs(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ar(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function ym(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Vs(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=mm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ao="http://www.w3.org/1999/xhtml";const Us={svg:"http://www.w3.org/2000/svg",xhtml:ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pi(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Us.hasOwnProperty(t)?{space:Us[t],local:e}:e}function vm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ao&&t.documentElement.namespaceURI===ao?t.createElement(e):t.createElementNS(n,e)}}function wm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Il(e){var t=pi(e);return(t.local?wm:vm)(t)}function bm(){}function ko(e){return e==null?bm:function(){return this.querySelector(e)}}function xm(e){typeof e!="function"&&(e=ko(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=e.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Je(r,this._parents)}function Em(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sm(){return[]}function Ol(e){return e==null?Sm:function(){return this.querySelectorAll(e)}}function _m(e){return function(){return Em(e.apply(this,arguments))}}function Cm(e){typeof e=="function"?e=_m(e):e=Ol(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var s=t[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(e.call(l,l.__data__,u,s)),i.push(l));return new Je(r,i)}function Dl(e){return function(){return this.matches(e)}}function Fl(e){return function(t){return t.matches(e)}}var Mm=Array.prototype.find;function Nm(e){return function(){return Mm.call(this.children,e)}}function Tm(){return this.firstElementChild}function Pm(e){return this.select(e==null?Tm:Nm(typeof e=="function"?e:Fl(e)))}var Rm=Array.prototype.filter;function Am(){return Array.from(this.children)}function $m(e){return function(){return Rm.call(this.children,e)}}function Im(e){return this.selectAll(e==null?Am:$m(typeof e=="function"?e:Fl(e)))}function Om(e){typeof e!="function"&&(e=Dl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Je(r,this._parents)}function kl(e){return new Array(e.length)}function Dm(){return new Je(this._enter||this._groups.map(kl),this._parents)}function Yr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Yr.prototype={constructor:Yr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fm(e){return function(){return e}}function km(e,t,n,r,i,o){for(var s=0,a,l=t.length,u=o.length;s<u;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Yr(e,o[s]);for(;s<l;++s)(a=t[s])&&(i[s]=a)}function Lm(e,t,n,r,i,o,s){var a,l,u=new Map,c=t.length,f=o.length,d=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(d[a]=p=s.call(l,l.__data__,a,t)+"",u.has(p)?i[a]=l:u.set(p,l));for(a=0;a<f;++a)p=s.call(e,o[a],a,o)+"",(l=u.get(p))?(r[a]=l,l.__data__=o[a],u.delete(p)):n[a]=new Yr(e,o[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(d[a])===l&&(i[a]=l)}function zm(e){return e.__data__}function Bm(e,t){if(!arguments.length)return Array.from(this,zm);var n=t?Lm:km,r=this._parents,i=this._groups;typeof e!="function"&&(e=Fm(e));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,p=Hm(e.call(c,c&&c.__data__,u,r)),v=p.length,y=a[u]=new Array(v),C=s[u]=new Array(v),h=l[u]=new Array(d);n(c,f,y,C,h,p,t);for(var b=0,S=0,w,_;b<v;++b)if(w=y[b]){for(b>=S&&(S=b+1);!(_=C[S])&&++S<v;);w._next=_||null}}return s=new Je(s,r),s._enter=a,s._exit=l,s}function Hm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Vm(){return new Je(this._exit||this._groups.map(kl),this._parents)}function Um(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Wm(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=n[l],c=r[l],f=u.length,d=a[l]=new Array(f),p,v=0;v<f;++v)(p=u[v]||c[v])&&(d[v]=p);for(;l<i;++l)a[l]=n[l];return new Je(a,this._parents)}function Xm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function jm(e){e||(e=Ym);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Je(i,this._parents).order()}function Ym(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Km(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qm(){return Array.from(this)}function Gm(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Jm(){let e=0;for(const t of this)++e;return e}function Zm(){return!this.node()}function Qm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this}function eg(e){return function(){this.removeAttribute(e)}}function tg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ng(e,t){return function(){this.setAttribute(e,t)}}function rg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ig(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function og(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function sg(e,t){var n=pi(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?tg:eg:typeof t=="function"?n.local?og:ig:n.local?rg:ng)(n,t))}function Ll(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ag(e){return function(){this.style.removeProperty(e)}}function lg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cg(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ug(e,t,n){return arguments.length>1?this.each((t==null?ag:typeof t=="function"?cg:lg)(e,t,n??"")):Cn(this.node(),e)}function Cn(e,t){return e.style.getPropertyValue(t)||Ll(e).getComputedStyle(e,null).getPropertyValue(t)}function dg(e){return function(){delete this[e]}}function fg(e,t){return function(){this[e]=t}}function hg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pg(e,t){return arguments.length>1?this.each((t==null?dg:typeof t=="function"?hg:fg)(e,t)):this.node()[e]}function zl(e){return e.trim().split(/^|\s+/)}function Lo(e){return e.classList||new Bl(e)}function Bl(e){this._node=e,this._names=zl(e.getAttribute("class")||"")}Bl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hl(e,t){for(var n=Lo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Vl(e,t){for(var n=Lo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function mg(e){return function(){Hl(this,e)}}function gg(e){return function(){Vl(this,e)}}function yg(e,t){return function(){(t.apply(this,arguments)?Hl:Vl)(this,e)}}function vg(e,t){var n=zl(e+"");if(arguments.length<2){for(var r=Lo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?yg:t?mg:gg)(n,t))}function wg(){this.textContent=""}function bg(e){return function(){this.textContent=e}}function xg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Eg(e){return arguments.length?this.each(e==null?wg:(typeof e=="function"?xg:bg)(e)):this.node().textContent}function Sg(){this.innerHTML=""}function _g(e){return function(){this.innerHTML=e}}function Cg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Mg(e){return arguments.length?this.each(e==null?Sg:(typeof e=="function"?Cg:_g)(e)):this.node().innerHTML}function Ng(){this.nextSibling&&this.parentNode.appendChild(this)}function Tg(){return this.each(Ng)}function Pg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rg(){return this.each(Pg)}function Ag(e){var t=typeof e=="function"?e:Il(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function $g(){return null}function Ig(e,t){var n=typeof e=="function"?e:Il(e),r=t==null?$g:typeof t=="function"?t:ko(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Og(){var e=this.parentNode;e&&e.removeChild(this)}function Dg(){return this.each(Og)}function Fg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Lg(e){return this.select(e?kg:Fg)}function zg(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bg(e){return function(t){e.call(this,t,this.__data__)}}function Hg(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Vg(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Ug(e,t,n){return function(){var r=this.__on,i,o=Bg(t);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Wg(e,t,n){var r=Hg(e+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?Ug:Vg,i=0;i<o;++i)this.each(a(r[i],t,n));return this}function Ul(e,t,n){var r=Ll(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Xg(e,t){return function(){return Ul(this,e,t)}}function jg(e,t){return function(){return Ul(this,e,t.apply(this,arguments))}}function Yg(e,t){return this.each((typeof t=="function"?jg:Xg)(e,t))}function*Kg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Wl=[null];function Je(e,t){this._groups=e,this._parents=t}function pr(){return new Je([[document.documentElement]],Wl)}function qg(){return this}Je.prototype=pr.prototype={constructor:Je,select:xm,selectAll:Cm,selectChild:Pm,selectChildren:Im,filter:Om,data:Bm,enter:Dm,exit:Vm,join:Um,merge:Wm,selection:qg,order:Xm,sort:jm,call:Km,nodes:qm,node:Gm,size:Jm,empty:Zm,each:Qm,attr:sg,style:ug,property:pg,classed:vg,text:Eg,html:Mg,raise:Tg,lower:Rg,append:Ag,insert:Ig,remove:Dg,clone:Lg,datum:zg,on:Wg,dispatch:Yg,[Symbol.iterator]:Kg};function tt(e){return typeof e=="string"?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],Wl)}function Gg(e){let t;for(;t=e.sourceEvent;)e=t;return e}function lt(e,t){if(e=Gg(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Jg={passive:!1},ir={capture:!0,passive:!1};function Fi(e){e.stopImmediatePropagation()}function wn(e){e.preventDefault(),e.stopImmediatePropagation()}function Xl(e){var t=e.document.documentElement,n=tt(e).on("dragstart.drag",wn,ir);"onselectstart"in t?n.on("selectstart.drag",wn,ir):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function jl(e,t){var n=e.document.documentElement,r=tt(e).on("dragstart.drag",null);t&&(r.on("click.drag",wn,ir),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const xr=e=>()=>e;function lo(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}lo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Zg(e){return!e.ctrlKey&&!e.button}function Qg(){return this.parentNode}function ey(e,t){return t??{x:e.x,y:e.y}}function ty(){return navigator.maxTouchPoints||"ontouchstart"in this}function ny(){var e=Zg,t=Qg,n=ey,r=ty,i={},o=hi("start","drag","end"),s=0,a,l,u,c,f=0;function d(w){w.on("mousedown.drag",p).filter(r).on("touchstart.drag",C).on("touchmove.drag",h,Jg).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(w,_){if(!(c||!e.call(this,w,_))){var M=S(this,t.call(this,w,_),w,_,"mouse");M&&(tt(w.view).on("mousemove.drag",v,ir).on("mouseup.drag",y,ir),Xl(w.view),Fi(w),u=!1,a=w.clientX,l=w.clientY,M("start",w))}}function v(w){if(wn(w),!u){var _=w.clientX-a,M=w.clientY-l;u=_*_+M*M>f}i.mouse("drag",w)}function y(w){tt(w.view).on("mousemove.drag mouseup.drag",null),jl(w.view,u),wn(w),i.mouse("end",w)}function C(w,_){if(e.call(this,w,_)){var M=w.changedTouches,N=t.call(this,w,_),I=M.length,k,B;for(k=0;k<I;++k)(B=S(this,N,w,_,M[k].identifier,M[k]))&&(Fi(w),B("start",w,M[k]))}}function h(w){var _=w.changedTouches,M=_.length,N,I;for(N=0;N<M;++N)(I=i[_[N].identifier])&&(wn(w),I("drag",w,_[N]))}function b(w){var _=w.changedTouches,M=_.length,N,I;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),N=0;N<M;++N)(I=i[_[N].identifier])&&(Fi(w),I("end",w,_[N]))}function S(w,_,M,N,I,k){var B=o.copy(),H=lt(k||M,_),O,W,x;if((x=n.call(w,new lo("beforestart",{sourceEvent:M,target:d,identifier:I,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:B}),N))!=null)return O=x.x-H[0]||0,W=x.y-H[1]||0,function R(T,E,P){var $=H,D;switch(T){case"start":i[I]=R,D=s++;break;case"end":delete i[I],--s;case"drag":H=lt(P||E,_),D=s;break}B.call(T,w,new lo(T,{sourceEvent:E,subject:x,target:d,identifier:I,active:D,x:H[0]+O,y:H[1]+W,dx:H[0]-$[0],dy:H[1]-$[1],dispatch:B}),N)}}return d.filter=function(w){return arguments.length?(e=typeof w=="function"?w:xr(!!w),d):e},d.container=function(w){return arguments.length?(t=typeof w=="function"?w:xr(w),d):t},d.subject=function(w){return arguments.length?(n=typeof w=="function"?w:xr(w),d):n},d.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:xr(!!w),d):r},d.on=function(){var w=o.on.apply(o,arguments);return w===o?d:w},d.clickDistance=function(w){return arguments.length?(f=(w=+w)*w,d):Math.sqrt(f)},d}function zo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Yl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function mr(){}var or=.7,Kr=1/or,bn="\\s*([+-]?\\d+)\\s*",sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ry=/^#([0-9a-f]{3,8})$/,iy=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),oy=new RegExp(`^rgb\\(${yt},${yt},${yt}\\)$`),sy=new RegExp(`^rgba\\(${bn},${bn},${bn},${sr}\\)$`),ay=new RegExp(`^rgba\\(${yt},${yt},${yt},${sr}\\)$`),ly=new RegExp(`^hsl\\(${sr},${yt},${yt}\\)$`),cy=new RegExp(`^hsla\\(${sr},${yt},${yt},${sr}\\)$`),Ws={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zo(mr,ar,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xs,formatHex:Xs,formatHex8:uy,formatHsl:dy,formatRgb:js,toString:js});function Xs(){return this.rgb().formatHex()}function uy(){return this.rgb().formatHex8()}function dy(){return Kl(this).formatHsl()}function js(){return this.rgb().formatRgb()}function ar(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ry.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ys(t):n===3?new je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Er(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Er(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iy.exec(e))?new je(t[1],t[2],t[3],1):(t=oy.exec(e))?new je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sy.exec(e))?Er(t[1],t[2],t[3],t[4]):(t=ay.exec(e))?Er(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ly.exec(e))?Gs(t[1],t[2]/100,t[3]/100,1):(t=cy.exec(e))?Gs(t[1],t[2]/100,t[3]/100,t[4]):Ws.hasOwnProperty(e)?Ys(Ws[e]):e==="transparent"?new je(NaN,NaN,NaN,0):null}function Ys(e){return new je(e>>16&255,e>>8&255,e&255,1)}function Er(e,t,n,r){return r<=0&&(e=t=n=NaN),new je(e,t,n,r)}function fy(e){return e instanceof mr||(e=ar(e)),e?(e=e.rgb(),new je(e.r,e.g,e.b,e.opacity)):new je}function co(e,t,n,r){return arguments.length===1?fy(e):new je(e,t,n,r??1)}function je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zo(je,co,Yl(mr,{brighter(e){return e=e==null?Kr:Math.pow(Kr,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?or:Math.pow(or,e),new je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new je(Zt(this.r),Zt(this.g),Zt(this.b),qr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ks,formatHex:Ks,formatHex8:hy,formatRgb:qs,toString:qs}));function Ks(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}`}function hy(){return`#${Jt(this.r)}${Jt(this.g)}${Jt(this.b)}${Jt((isNaN(this.opacity)?1:this.opacity)*255)}`}function qs(){const e=qr(this.opacity);return`${e===1?"rgb(":"rgba("}${Zt(this.r)}, ${Zt(this.g)}, ${Zt(this.b)}${e===1?")":`, ${e})`}`}function qr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jt(e){return e=Zt(e),(e<16?"0":"")+e.toString(16)}function Gs(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ut(e,t,n,r)}function Kl(e){if(e instanceof ut)return new ut(e.h,e.s,e.l,e.opacity);if(e instanceof mr||(e=ar(e)),!e)return new ut;if(e instanceof ut)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ut(s,a,l,e.opacity)}function py(e,t,n,r){return arguments.length===1?Kl(e):new ut(e,t,n,r??1)}function ut(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zo(ut,py,Yl(mr,{brighter(e){return e=e==null?Kr:Math.pow(Kr,e),new ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?or:Math.pow(or,e),new ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new je(ki(e>=240?e-240:e+120,i,r),ki(e,i,r),ki(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ut(Js(this.h),Sr(this.s),Sr(this.l),qr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=qr(this.opacity);return`${e===1?"hsl(":"hsla("}${Js(this.h)}, ${Sr(this.s)*100}%, ${Sr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Js(e){return e=(e||0)%360,e<0?e+360:e}function Sr(e){return Math.max(0,Math.min(1,e||0))}function ki(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ql=e=>()=>e;function my(e,t){return function(n){return e+n*t}}function gy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function yy(e){return(e=+e)==1?Gl:function(t,n){return n-t?gy(t,n,e):ql(isNaN(t)?n:t)}}function Gl(e,t){var n=t-e;return n?my(e,n):ql(isNaN(e)?t:e)}const Zs=function e(t){var n=yy(t);function r(i,o){var s=n((i=co(i)).r,(o=co(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),u=Gl(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function Rt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var uo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Li=new RegExp(uo.source,"g");function vy(e){return function(){return e}}function wy(e){return function(t){return e(t)+""}}function by(e,t){var n=uo.lastIndex=Li.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=uo.exec(e))&&(i=Li.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Rt(r,i)})),n=Li.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?wy(l[0].x):vy(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var Qs=180/Math.PI,fo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Jl(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*Qs,skewX:Math.atan(l)*Qs,scaleX:s,scaleY:a}}var _r;function xy(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fo:Jl(t.a,t.b,t.c,t.d,t.e,t.f)}function Ey(e){return e==null||(_r||(_r=document.createElementNS("http://www.w3.org/2000/svg","g")),_r.setAttribute("transform",e),!(e=_r.transform.baseVal.consolidate()))?fo:(e=e.matrix,Jl(e.a,e.b,e.c,e.d,e.e,e.f))}function Zl(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,p,v){if(u!==f||c!==d){var y=p.push("translate(",null,t,null,n);v.push({i:y-4,x:Rt(u,f)},{i:y-2,x:Rt(c,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Rt(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Rt(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,p,v){if(u!==f||c!==d){var y=p.push(i(p)+"scale(",null,",",null,")");v.push({i:y-4,x:Rt(u,f)},{i:y-2,x:Rt(c,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=e(u),c=e(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(p){for(var v=-1,y=d.length,C;++v<y;)f[(C=d[v]).i]=C.x(p);return f.join("")}}}var Sy=Zl(xy,"px, ","px)","deg)"),_y=Zl(Ey,", ",")",")"),Cy=1e-12;function ea(e){return((e=Math.exp(e))+1/e)/2}function My(e){return((e=Math.exp(e))-1/e)/2}function Ny(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ty=function e(t,n,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],p=c-a,v=f-l,y=p*p+v*v,C,h;if(y<Cy)h=Math.log(d/u)/t,C=function(N){return[a+N*p,l+N*v,u*Math.exp(t*N*h)]};else{var b=Math.sqrt(y),S=(d*d-u*u+r*y)/(2*u*n*b),w=(d*d-u*u-r*y)/(2*d*n*b),_=Math.log(Math.sqrt(S*S+1)-S),M=Math.log(Math.sqrt(w*w+1)-w);h=(M-_)/t,C=function(N){var I=N*h,k=ea(_),B=u/(n*b)*(k*Ny(t*I+_)-My(_));return[a+B*p,l+B*v,u*k/ea(t*I+_)]}}return C.duration=h*1e3*t/Math.SQRT2,C}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i}(Math.SQRT2,2,4);var Mn=0,Xn=0,kn=0,Ql=1e3,Gr,jn,Jr=0,rn=0,mi=0,lr=typeof performance=="object"&&performance.now?performance:Date,ec=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Bo(){return rn||(ec(Py),rn=lr.now()+mi)}function Py(){rn=0}function Zr(){this._call=this._time=this._next=null}Zr.prototype=tc.prototype={constructor:Zr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Bo():+n)+(t==null?0:+t),!this._next&&jn!==this&&(jn?jn._next=this:Gr=this,jn=this),this._call=e,this._time=n,ho()},stop:function(){this._call&&(this._call=null,this._time=1/0,ho())}};function tc(e,t,n){var r=new Zr;return r.restart(e,t,n),r}function Ry(){Bo(),++Mn;for(var e=Gr,t;e;)(t=rn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mn}function ta(){rn=(Jr=lr.now())+mi,Mn=Xn=0;try{Ry()}finally{Mn=0,$y(),rn=0}}function Ay(){var e=lr.now(),t=e-Jr;t>Ql&&(mi-=t,Jr=e)}function $y(){for(var e,t=Gr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Gr=n);jn=e,ho(r)}function ho(e){if(!Mn){Xn&&(Xn=clearTimeout(Xn));var t=e-rn;t>24?(e<1/0&&(Xn=setTimeout(ta,e-lr.now()-mi)),kn&&(kn=clearInterval(kn))):(kn||(Jr=lr.now(),kn=setInterval(Ay,Ql)),Mn=1,ec(ta))}}function na(e,t,n){var r=new Zr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Iy=hi("start","end","cancel","interrupt"),Oy=[],nc=0,ra=1,po=2,$r=3,ia=4,mo=5,Ir=6;function gi(e,t,n,r,i,o){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;Dy(e,n,{name:t,index:r,group:i,on:Iy,tween:Oy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:nc})}function Ho(e,t){var n=mt(e,t);if(n.state>nc)throw new Error("too late; already scheduled");return n}function bt(e,t){var n=mt(e,t);if(n.state>$r)throw new Error("too late; already running");return n}function mt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dy(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=tc(o,0,n.time);function o(u){n.state=ra,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,f,d,p;if(n.state!==ra)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===$r)return na(s);p.state===ia?(p.state=Ir,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Ir,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(na(function(){n.state===$r&&(n.state=ia,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=po,n.on.call("start",e,e.__data__,n.index,n.group),n.state===po){for(n.state=$r,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=mo,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===mo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ir,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Or(e,t){var n=e.__transition,r,i,o=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((r=n[s]).name!==t){o=!1;continue}i=r.state>po&&r.state<mo,r.state=Ir,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]}o&&delete e.__transition}}function Fy(e){return this.each(function(){Or(this,e)})}function ky(e,t){var n,r;return function(){var i=bt(this,e),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===t){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Ly(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=bt(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function zy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=mt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((t==null?ky:Ly)(n,e,t))}function Vo(e,t,n){var r=e._id;return e.each(function(){var i=bt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return mt(i,r).value[t]}}function rc(e,t){var n;return(typeof t=="number"?Rt:t instanceof ar?Zs:(n=ar(t))?(t=n,Zs):by)(e,t)}function By(e){return function(){this.removeAttribute(e)}}function Hy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vy(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function Uy(e,t,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function Wy(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function Xy(e,t,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a)))}}function jy(e,t){var n=pi(e),r=n==="transform"?_y:rc;return this.attrTween(e,typeof t=="function"?(n.local?Xy:Wy)(n,r,Vo(this,"attr."+e,t)):t==null?(n.local?Hy:By)(n):(n.local?Uy:Vy)(n,r,t))}function Yy(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Ky(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Ky(e,o)),n}return i._value=t,i}function Gy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Yy(e,o)),n}return i._value=t,i}function Jy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=pi(e);return this.tween(n,(r.local?qy:Gy)(r,t))}function Zy(e,t){return function(){Ho(this,e).delay=+t.apply(this,arguments)}}function Qy(e,t){return t=+t,function(){Ho(this,e).delay=t}}function e0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zy:Qy)(t,e)):mt(this.node(),t).delay}function t0(e,t){return function(){bt(this,e).duration=+t.apply(this,arguments)}}function n0(e,t){return t=+t,function(){bt(this,e).duration=t}}function r0(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?t0:n0)(t,e)):mt(this.node(),t).duration}function i0(e,t){if(typeof t!="function")throw new Error;return function(){bt(this,e).ease=t}}function o0(e){var t=this._id;return arguments.length?this.each(i0(t,e)):mt(this.node(),t).ease}function s0(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bt(this,e).ease=n}}function a0(e){if(typeof e!="function")throw new Error;return this.each(s0(this._id,e))}function l0(e){typeof e!="function"&&(e=Dl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&a.push(l);return new Tt(r,this._parents,this._name,this._id)}function c0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=t[a],u=n[a],c=l.length,f=s[a]=new Array(c),d,p=0;p<c;++p)(d=l[p]||u[p])&&(f[p]=d);for(;a<r;++a)s[a]=t[a];return new Tt(s,this._parents,this._name,this._id)}function u0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function d0(e,t,n){var r,i,o=u0(t)?Ho:bt;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}function f0(e,t){var n=this._id;return arguments.length<2?mt(this.node(),n).on.on(e):this.each(d0(n,e,t))}function h0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function p0(){return this.on("end.remove",h0(this._id))}function m0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ko(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,f,d=0;d<l;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,gi(u[d],t,n,d,u,mt(c,n)));return new Tt(o,this._parents,t,n)}function g0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ol(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=e.call(c,c.__data__,f,l),p,v=mt(c,n),y=0,C=d.length;y<C;++y)(p=d[y])&&gi(p,t,n,y,d,v);o.push(d),s.push(c)}return new Tt(o,s,t,n)}var y0=pr.prototype.constructor;function v0(){return new y0(this._groups,this._parents)}function w0(e,t){var n,r,i;return function(){var o=Cn(this,e),s=(this.style.removeProperty(e),Cn(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}function ic(e){return function(){this.style.removeProperty(e)}}function b0(e,t,n){var r,i=n+"",o;return function(){var s=Cn(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}function x0(e,t,n){var r,i,o;return function(){var s=Cn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Cn(this,e))),s===l?null:s===r&&l===i?o:(i=l,o=t(r=s,a))}}function E0(e,t){var n,r,i,o="style."+t,s="end."+o,a;return function(){var l=bt(this,e),u=l.on,c=l.value[o]==null?a||(a=ic(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(s,i=c),l.on=r}}function S0(e,t,n){var r=(e+="")=="transform"?Sy:rc;return t==null?this.styleTween(e,w0(e,r)).on("end.style."+e,ic(e)):typeof t=="function"?this.styleTween(e,x0(e,r,Vo(this,"style."+e,t))).each(E0(this._id,e)):this.styleTween(e,b0(e,r,t),n).on("end.style."+e,null)}function _0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function C0(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&_0(e,s,n)),r}return o._value=t,o}function M0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,C0(e,t,n??""))}function N0(e){return function(){this.textContent=e}}function T0(e){return function(){var t=e(this);this.textContent=t??""}}function P0(e){return this.tween("text",typeof e=="function"?T0(Vo(this,"text",e)):N0(e==null?"":e+""))}function R0(e){return function(t){this.textContent=e.call(this,t)}}function A0(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&R0(i)),t}return r._value=e,r}function $0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,A0(e))}function I0(){for(var e=this._name,t=this._id,n=oc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=mt(l,t);gi(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Tt(r,this._parents,e,n)}function O0(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var u=bt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),i===0&&o()})}var D0=0;function Tt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function oc(){return++D0}var xt=pr.prototype;Tt.prototype={constructor:Tt,select:m0,selectAll:g0,selectChild:xt.selectChild,selectChildren:xt.selectChildren,filter:l0,merge:c0,selection:v0,transition:I0,call:xt.call,nodes:xt.nodes,node:xt.node,size:xt.size,empty:xt.empty,each:xt.each,on:f0,attr:jy,attrTween:Jy,style:S0,styleTween:M0,text:P0,textTween:$0,remove:p0,tween:zy,delay:e0,duration:r0,ease:o0,easeVarying:a0,end:O0,[Symbol.iterator]:xt[Symbol.iterator]};function F0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var k0={time:null,delay:0,duration:250,ease:F0};function L0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function z0(e){var t,n;e instanceof Tt?(t=e._id,e=e._name):(t=oc(),(n=k0).time=Bo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&gi(l,e,t,u,s,n||L0(l,t));return new Tt(r,this._parents,e,t)}pr.prototype.interrupt=Fy;pr.prototype.transition=z0;const Cr=e=>()=>e;function B0(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function St(e,t,n){this.k=e,this.x=t,this.y=n}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Mt=new St(1,0,0);St.prototype;function zi(e){e.stopImmediatePropagation()}function Ln(e){e.preventDefault(),e.stopImmediatePropagation()}function H0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function V0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function oa(){return this.__zoom||Mt}function U0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function W0(){return navigator.maxTouchPoints||"ontouchstart"in this}function X0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function sc(){var e=H0,t=V0,n=X0,r=U0,i=W0,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ty,u=hi("start","zoom","end"),c,f,d,p=500,v=150,y=0,C=10;function h(x){x.property("__zoom",oa).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",k).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(x,R,T,E){var P=x.selection?x.selection():x;P.property("__zoom",oa),x!==P?_(x,R,T,E):P.interrupt().each(function(){M(this,arguments).event(E).start().zoom(null,typeof R=="function"?R.apply(this,arguments):R).end()})},h.scaleBy=function(x,R,T,E){h.scaleTo(x,function(){var P=this.__zoom.k,$=typeof R=="function"?R.apply(this,arguments):R;return P*$},T,E)},h.scaleTo=function(x,R,T,E){h.transform(x,function(){var P=t.apply(this,arguments),$=this.__zoom,D=T==null?w(P):typeof T=="function"?T.apply(this,arguments):T,V=$.invert(D),X=typeof R=="function"?R.apply(this,arguments):R;return n(S(b($,X),D,V),P,s)},T,E)},h.translateBy=function(x,R,T,E){h.transform(x,function(){return n(this.__zoom.translate(typeof R=="function"?R.apply(this,arguments):R,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),s)},null,E)},h.translateTo=function(x,R,T,E,P){h.transform(x,function(){var $=t.apply(this,arguments),D=this.__zoom,V=E==null?w($):typeof E=="function"?E.apply(this,arguments):E;return n(Mt.translate(V[0],V[1]).scale(D.k).translate(typeof R=="function"?-R.apply(this,arguments):-R,typeof T=="function"?-T.apply(this,arguments):-T),$,s)},E,P)};function b(x,R){return R=Math.max(o[0],Math.min(o[1],R)),R===x.k?x:new St(R,x.x,x.y)}function S(x,R,T){var E=R[0]-T[0]*x.k,P=R[1]-T[1]*x.k;return E===x.x&&P===x.y?x:new St(x.k,E,P)}function w(x){return[(+x[0][0]+ +x[1][0])/2,(+x[0][1]+ +x[1][1])/2]}function _(x,R,T,E){x.on("start.zoom",function(){M(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(E).end()}).tween("zoom",function(){var P=this,$=arguments,D=M(P,$).event(E),V=t.apply(P,$),X=T==null?w(V):typeof T=="function"?T.apply(P,$):T,Z=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),j=P.__zoom,ne=typeof R=="function"?R.apply(P,$):R,fe=l(j.invert(X).concat(Z/j.k),ne.invert(X).concat(Z/ne.k));return function(G){if(G===1)G=ne;else{var re=fe(G),de=Z/re[2];G=new St(de,X[0]-re[0]*de,X[1]-re[1]*de)}D.zoom(null,G)}})}function M(x,R,T){return!T&&x.__zooming||new N(x,R)}function N(x,R){this.that=x,this.args=R,this.active=0,this.sourceEvent=null,this.extent=t.apply(x,R),this.taps=0}N.prototype={event:function(x){return x&&(this.sourceEvent=x),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(x,R){return this.mouse&&x!=="mouse"&&(this.mouse[1]=R.invert(this.mouse[0])),this.touch0&&x!=="touch"&&(this.touch0[1]=R.invert(this.touch0[0])),this.touch1&&x!=="touch"&&(this.touch1[1]=R.invert(this.touch1[0])),this.that.__zoom=R,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(x){var R=tt(this.that).datum();u.call(x,this.that,new B0(x,{sourceEvent:this.sourceEvent,target:h,type:x,transform:this.that.__zoom,dispatch:u}),R)}};function I(x,...R){if(!e.apply(this,arguments))return;var T=M(this,R).event(x),E=this.__zoom,P=Math.max(o[0],Math.min(o[1],E.k*Math.pow(2,r.apply(this,arguments)))),$=lt(x);if(T.wheel)(T.mouse[0][0]!==$[0]||T.mouse[0][1]!==$[1])&&(T.mouse[1]=E.invert(T.mouse[0]=$)),clearTimeout(T.wheel);else{if(E.k===P)return;T.mouse=[$,E.invert($)],Or(this),T.start()}Ln(x),T.wheel=setTimeout(D,v),T.zoom("mouse",n(S(b(E,P),T.mouse[0],T.mouse[1]),T.extent,s));function D(){T.wheel=null,T.end()}}function k(x,...R){if(d||!e.apply(this,arguments))return;var T=x.currentTarget,E=M(this,R,!0).event(x),P=tt(x.view).on("mousemove.zoom",X,!0).on("mouseup.zoom",Z,!0),$=lt(x,T),D=x.clientX,V=x.clientY;Xl(x.view),zi(x),E.mouse=[$,this.__zoom.invert($)],Or(this),E.start();function X(j){if(Ln(j),!E.moved){var ne=j.clientX-D,fe=j.clientY-V;E.moved=ne*ne+fe*fe>y}E.event(j).zoom("mouse",n(S(E.that.__zoom,E.mouse[0]=lt(j,T),E.mouse[1]),E.extent,s))}function Z(j){P.on("mousemove.zoom mouseup.zoom",null),jl(j.view,E.moved),Ln(j),E.event(j).end()}}function B(x,...R){if(e.apply(this,arguments)){var T=this.__zoom,E=lt(x.changedTouches?x.changedTouches[0]:x,this),P=T.invert(E),$=T.k*(x.shiftKey?.5:2),D=n(S(b(T,$),E,P),t.apply(this,R),s);Ln(x),a>0?tt(this).transition().duration(a).call(_,D,E,x):tt(this).call(h.transform,D,E,x)}}function H(x,...R){if(e.apply(this,arguments)){var T=x.touches,E=T.length,P=M(this,R,x.changedTouches.length===E).event(x),$,D,V,X;for(zi(x),D=0;D<E;++D)V=T[D],X=lt(V,this),X=[X,this.__zoom.invert(X),V.identifier],P.touch0?!P.touch1&&P.touch0[2]!==X[2]&&(P.touch1=X,P.taps=0):(P.touch0=X,$=!0,P.taps=1+!!c);c&&(c=clearTimeout(c)),$&&(P.taps<2&&(f=X[0],c=setTimeout(function(){c=null},p)),Or(this),P.start())}}function O(x,...R){if(this.__zooming){var T=M(this,R).event(x),E=x.changedTouches,P=E.length,$,D,V,X;for(Ln(x),$=0;$<P;++$)D=E[$],V=lt(D,this),T.touch0&&T.touch0[2]===D.identifier?T.touch0[0]=V:T.touch1&&T.touch1[2]===D.identifier&&(T.touch1[0]=V);if(D=T.that.__zoom,T.touch1){var Z=T.touch0[0],j=T.touch0[1],ne=T.touch1[0],fe=T.touch1[1],G=(G=ne[0]-Z[0])*G+(G=ne[1]-Z[1])*G,re=(re=fe[0]-j[0])*re+(re=fe[1]-j[1])*re;D=b(D,Math.sqrt(G/re)),V=[(Z[0]+ne[0])/2,(Z[1]+ne[1])/2],X=[(j[0]+fe[0])/2,(j[1]+fe[1])/2]}else if(T.touch0)V=T.touch0[0],X=T.touch0[1];else return;T.zoom("touch",n(S(D,V,X),T.extent,s))}}function W(x,...R){if(this.__zooming){var T=M(this,R).event(x),E=x.changedTouches,P=E.length,$,D;for(zi(x),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),$=0;$<P;++$)D=E[$],T.touch0&&T.touch0[2]===D.identifier?delete T.touch0:T.touch1&&T.touch1[2]===D.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(D=lt(D,this),Math.hypot(f[0]-D[0],f[1]-D[1])<C)){var V=tt(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return h.wheelDelta=function(x){return arguments.length?(r=typeof x=="function"?x:Cr(+x),h):r},h.filter=function(x){return arguments.length?(e=typeof x=="function"?x:Cr(!!x),h):e},h.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:Cr(!!x),h):i},h.extent=function(x){return arguments.length?(t=typeof x=="function"?x:Cr([[+x[0][0],+x[0][1]],[+x[1][0],+x[1][1]]]),h):t},h.scaleExtent=function(x){return arguments.length?(o[0]=+x[0],o[1]=+x[1],h):[o[0],o[1]]},h.translateExtent=function(x){return arguments.length?(s[0][0]=+x[0][0],s[1][0]=+x[1][0],s[0][1]=+x[0][1],s[1][1]=+x[1][1],h):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},h.constrain=function(x){return arguments.length?(n=x,h):n},h.duration=function(x){return arguments.length?(a=+x,h):a},h.interpolate=function(x){return arguments.length?(l=x,h):l},h.on=function(){var x=u.on.apply(u,arguments);return x===u?h:x},h.clickDistance=function(x){return arguments.length?(y=(x=+x)*x,h):Math.sqrt(y)},h.tapDistance=function(x){return arguments.length?(C=+x,h):C},h}const yi=m.createContext(null),j0=yi.Provider,kt={"001":()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001","002":()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.","003":e=>`Node type "${e}" not found. Using fallback type "default".`,"004":()=>"The React Flow parent container needs a width and a height to render the graph.","005":()=>"Only child nodes can use a parent extent.","006":()=>"Can't create edge. An edge needs a source and a target.","007":e=>`The old edge with id=${e} does not exist.`,"009":e=>`Marker type "${e}" doesn't exist.`,"008":(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,"010":()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.","011":e=>`Edge type "${e}" not found. Using fallback type "default".`},ac=kt["001"]();function Ce(e,t){const n=m.useContext(yi);if(n===null)throw new Error(ac);return pm(n,e,t)}const Ie=()=>{const e=m.useContext(yi);if(e===null)throw new Error(ac);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Y0=e=>e.userSelectionActive?"none":"all";function Uo({position:e,children:t,className:n,style:r,...i}){const o=Ce(Y0),s=`${e}`.split("-");return g("div",{className:He(["react-flow__panel",n,...s]),style:{...r,pointerEvents:o},...i,children:t})}function K0({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g(Uo,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const q0=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:l,className:u,...c})=>{const f=m.useRef(null),[d,p]=m.useState({x:0,y:0,width:0,height:0}),v=He(["react-flow__edge-textwrapper",u]);return m.useEffect(()=>{if(f.current){const y=f.current.getBBox();p({x:y.x,y:y.y,width:y.width,height:y.height})}},[n]),typeof n>"u"||!n?null:Y("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:v,visibility:d.width?"visible":"hidden",...c,children:[i&&g("rect",{width:d.width+2*s[0],x:-s[0],y:-s[1],height:d.height+2*s[1],className:"react-flow__edge-textbg",style:o,rx:a,ry:a}),g("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r,children:n}),l]})};var G0=m.memo(q0);const Wo=e=>({width:e.offsetWidth,height:e.offsetHeight}),Nn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Xo=(e={x:0,y:0},t)=>({x:Nn(e.x,t[0][0],t[1][0]),y:Nn(e.y,t[0][1],t[1][1])}),sa=(e,t,n)=>e<t?Nn(Math.abs(e-t),1,50)/50:e>n?-Nn(Math.abs(e-n),1,50)/50:0,lc=(e,t)=>{const n=sa(e.x,35,t.width-35)*20,r=sa(e.y,35,t.height-35)*20;return[n,r]},cc=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},uc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Qr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),dc=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),aa=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),J0=(e,t)=>dc(uc(Qr(e),Qr(t))),go=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Z0=e=>rt(e.width)&&rt(e.height)&&rt(e.x)&&rt(e.y),rt=e=>!isNaN(e)&&isFinite(e),$e=Symbol.for("internals"),fc=["Enter"," ","Escape"],Q0=(e,t)=>{},ev=e=>"nativeEvent"in e;function yo(e){var r,i;const t=ev(e)?e.nativeEvent:e,n=((i=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:i[0])||e.target;return e.ctrlKey||e.metaKey||e.shiftKey?!1:["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const hc=e=>"clientX"in e,Qt=(e,t)=>{var o,s;const n=hc(e),r=n?e.clientX:(o=e.touches)==null?void 0:o[0].clientX,i=n?e.clientY:(s=e.touches)==null?void 0:s[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:i-((t==null?void 0:t.top)??0)}},gr=({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l,style:u,markerEnd:c,markerStart:f,interactionWidth:d=20})=>Y(ye,{children:[g("path",{style:u,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:c,markerStart:f}),d&&g("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r&&rt(t)&&rt(n)?g(G0,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:a,labelBgBorderRadius:l}):null]});gr.displayName="BaseEdge";function zn(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function pc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,a=r<t?r+s:r-s;return[o,a,i,s]}function mc({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:s,targetControlY:a}){const l=e*.125+i*.375+s*.375+n*.125,u=t*.125+o*.375+a*.375+r*.125,c=Math.abs(l-e),f=Math.abs(u-t);return[l,u,c,f]}var on;(function(e){e.Strict="strict",e.Loose="loose"})(on||(on={}));var xn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(xn||(xn={}));var cr;(function(e){e.Partial="partial",e.Full="full"})(cr||(cr={}));var $t;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})($t||($t={}));var ei;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ei||(ei={}));var K;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(K||(K={}));function la({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===K.Left||e===K.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function gc({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:o=K.Top}){const[s,a]=la({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,u]=la({pos:o,x1:r,y1:i,x2:e,y2:t}),[c,f,d,p]=mc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${a} ${l},${u} ${r},${i}`,c,f,d,p]}const jo=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=K.Bottom,targetPosition:o=K.Top,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:v,interactionWidth:y})=>{const[C,h,b]=gc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return g(gr,{path:C,labelX:h,labelY:b,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:v,interactionWidth:y})});jo.displayName="SimpleBezierEdge";const ca={[K.Left]:{x:-1,y:0},[K.Right]:{x:1,y:0},[K.Top]:{x:0,y:-1},[K.Bottom]:{x:0,y:1}},tv=({source:e,sourcePosition:t=K.Bottom,target:n})=>t===K.Left||t===K.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ua=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nv({source:e,sourcePosition:t=K.Bottom,target:n,targetPosition:r=K.Top,center:i,offset:o}){const s=ca[t],a=ca[r],l={x:e.x+s.x*o,y:e.y+s.y*o},u={x:n.x+a.x*o,y:n.y+a.y*o},c=tv({source:l,sourcePosition:t,target:u}),f=c.x!==0?"x":"y",d=c[f];let p=[],v,y;const[C,h,b,S]=pc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[f]*a[f]===-1){v=i.x||C,y=i.y||h;const _=[{x:v,y:l.y},{x:v,y:u.y}],M=[{x:l.x,y},{x:u.x,y}];s[f]===d?p=f==="x"?_:M:p=f==="x"?M:_}else{const _=[{x:l.x,y:u.y}],M=[{x:u.x,y:l.y}];if(f==="x"?p=s.x===d?M:_:p=s.y===d?_:M,t!==r){const N=f==="x"?"y":"x",I=s[f]===a[N],k=l[N]>u[N],B=l[N]<u[N];(s[f]===1&&(!I&&k||I&&B)||s[f]!==1&&(!I&&B||I&&k))&&(p=f==="x"?_:M)}v=p[0].x,y=p[0].y}return[[e,l,...p,u,n],v,y,b,S]}function rv(e,t,n,r){const i=Math.min(ua(e,t)/2,ua(t,n)/2,r),{x:o,y:s}=t;if(e.x===o&&o===n.x||e.y===s&&s===n.y)return`L${o} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${o+i*u},${s}Q ${o},${s} ${o},${s+i*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${s+i*l}Q ${o},${s} ${o+i*a},${s}`}function vo({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:o=K.Top,borderRadius:s=5,centerX:a,centerY:l,offset:u=20}){const[c,f,d,p,v]=nv({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:a,y:l},offset:u});return[c.reduce((C,h,b)=>{let S="";return b>0&&b<c.length-1?S=rv(c[b-1],h,c[b+1],s):S=`${b===0?"M":"L"}${h.x} ${h.y}`,C+=S,C},""),f,d,p,v]}const vi=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:f=K.Bottom,targetPosition:d=K.Top,markerEnd:p,markerStart:v,pathOptions:y,interactionWidth:C})=>{const[h,b,S]=vo({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return g(gr,{path:h,labelX:b,labelY:S,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:p,markerStart:v,interactionWidth:C})});vi.displayName="SmoothStepEdge";const Yo=m.memo(e=>{var t;return g(vi,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Yo.displayName="StepEdge";function iv({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,s,a]=pc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,s,a]}const Ko=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:p})=>{const[v,y,C]=iv({sourceX:e,sourceY:t,targetX:n,targetY:r});return g(gr,{path:v,labelX:y,labelY:C,label:i,labelStyle:o,labelShowBg:s,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:d,interactionWidth:p})});Ko.displayName="StraightEdge";function Mr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function da({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case K.Left:return[t-Mr(t-r,o),n];case K.Right:return[t+Mr(r-t,o),n];case K.Top:return[t,n-Mr(n-i,o)];case K.Bottom:return[t,n+Mr(i-n,o)]}}function yc({sourceX:e,sourceY:t,sourcePosition:n=K.Bottom,targetX:r,targetY:i,targetPosition:o=K.Top,curvature:s=.25}){const[a,l]=da({pos:n,x1:e,y1:t,x2:r,y2:i,c:s}),[u,c]=da({pos:o,x1:r,y1:i,x2:e,y2:t,c:s}),[f,d,p,v]=mc({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${e},${t} C${a},${l} ${u},${c} ${r},${i}`,f,d,p,v]}const ti=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=K.Bottom,targetPosition:o=K.Top,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:v,pathOptions:y,interactionWidth:C})=>{const[h,b,S]=yc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:y==null?void 0:y.curvature});return g(gr,{path:h,labelX:b,labelY:S,label:s,labelStyle:a,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:v,interactionWidth:C})});ti.displayName="BezierEdge";const qo=m.createContext(null),ov=qo.Provider;qo.Consumer;const sv=()=>m.useContext(qo),av=e=>"id"in e&&"source"in e&&"target"in e,lv=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,wo=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,cv=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),vc=(e,t)=>{if(!e.source||!e.target)return t;let n;return av(e)?n={...e}:n={...e,id:lv(e)},cv(n,t)?t:t.concat(n)},wc=({x:e,y:t},[n,r,i],o,[s,a])=>{const l={x:(e-n)/i,y:(t-r)/i};return o?{x:s*Math.round(l.x/s),y:a*Math.round(l.y/a)}:l},uv=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r}),en=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],r=(e.height??0)*t[1],i={x:e.position.x-n,y:e.position.y-r};return{...i,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:i}},Go=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const{x:o,y:s}=en(i,t).positionAbsolute;return uc(r,Qr({x:o,y:s,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dc(n)},bc=(e,t,[n,r,i]=[0,0,1],o=!1,s=!1,a=[0,0])=>{const l={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},u=[];return e.forEach(c=>{const{width:f,height:d,selectable:p=!0,hidden:v=!1}=c;if(s&&!p||v)return!1;const{positionAbsolute:y}=en(c,a),C={x:y.x,y:y.y,width:f||0,height:d||0},h=go(l,C),b=typeof f>"u"||typeof d>"u"||f===null||d===null,S=o&&h>0,w=(f||0)*(d||0);(b||S||h>=w||c.dragging)&&u.push(c)}),u},xc=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Ec=(e,t,n,r,i,o=.1)=>{const s=t/(e.width*(1+o)),a=n/(e.height*(1+o)),l=Math.min(s,a),u=Nn(l,r,i),c=e.x+e.width/2,f=e.y+e.height/2,d=t/2-c*u,p=n/2-f*u;return[d,p,u]},Xt=(e,t=0)=>e.transition().duration(t);function fa(e,t,n,r){return(t[n]||[]).reduce((i,o)=>{var s,a;return`${e.id}-${o.id}-${n}`!==r&&i.push({id:o.id||null,type:n,nodeId:e.id,x:(((s=e.positionAbsolute)==null?void 0:s.x)??0)+o.x+o.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+o.y+o.height/2}),i},[])}function dv(e,t,n){let r=null,i=1/0;return n.forEach(o=>{const s=Math.sqrt(Math.pow(o.x-e.x,2)+Math.pow(o.y-e.y,2));s<=t&&s<i&&(i=s,r=o)}),r}function bo(e,t,n,r,i,o,s){const a=i==="target",l=s.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={handleDomNode:l,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null}};if(l){const c=e.type==="target",f=e.type==="source",d=l.getAttribute("data-nodeid"),p=l.getAttribute("data-handleid"),v={source:a?e.nodeId:n,sourceHandle:a?e.id:r,target:a?n:e.nodeId,targetHandle:a?r:e.id};u.connection=v,(t===on.Strict?a&&f||!a&&c:d!==n||p!==r)&&(u.isValid=o(v))}return u}function fv({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((i,o)=>{if(o[$e]){const{handleBounds:s}=o[$e];let a=[],l=[];s&&(a=fa(o,s,"source",`${t}-${n}-${r}`),l=fa(o,s,"target",`${t}-${n}-${r}`)),i.push(...a,...l)}return i},[])}function hv(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function Bi(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Sc({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:s,isValidConnection:a,edgeUpdaterType:l,onEdgeUpdateEnd:u}){const c=cc(e.target),{connectionMode:f,domNode:d,autoPanOnConnect:p,connectionRadius:v,onConnectStart:y,onConnectEnd:C,panBy:h,getNodes:b,cancelConnection:S}=o();let w=0,_;const{x:M,y:N}=Qt(e),I=c==null?void 0:c.elementFromPoint(M,N),k=hv(l,I),B=d==null?void 0:d.getBoundingClientRect();if(!B||!k)return;let H,O=Qt(e,B),W=!1;const x=fv({nodes:b(),nodeId:n,handleId:t,handleType:k}),R=()=>{if(!p)return;const[P,$]=lc(O,B);h({x:P,y:$}),w=requestAnimationFrame(R)};s({connectionPosition:O,connectionNodeId:n,connectionHandleId:t,connectionHandleType:k}),y==null||y(e,{nodeId:n,handleId:t,handleType:k});function T(P){const{transform:$}=o();if(O=Qt(P,B),_=dv(wc(O,$,!1,[1,1]),v,x),W||(R(),W=!0),s({connectionPosition:_?uv({x:_.x,y:_.y},$):O}),!_)return Bi(H);const{connection:D,handleDomNode:V,isValid:X}=bo(_,f,n,t,i?"target":"source",a,c);D.source!==D.target&&V&&(Bi(H),H=V,V.classList.add("react-flow__handle-connecting"),V.classList.toggle("react-flow__handle-valid",X))}function E(P){if(cancelAnimationFrame(w),W=!1,_){const{connection:$,isValid:D}=bo(_,f,n,t,i?"target":"source",a,c);D&&(r==null||r($))}C==null||C(P),l&&(u==null||u(P)),Bi(H),S(),c.removeEventListener("mousemove",T),c.removeEventListener("mouseup",E),c.removeEventListener("touchmove",T),c.removeEventListener("touchend",E)}c.addEventListener("mousemove",T),c.addEventListener("mouseup",E),c.addEventListener("touchmove",T),c.addEventListener("touchend",E)}const pv=()=>!0,mv=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),_c=m.forwardRef(({type:e="source",position:t=K.Top,isValidConnection:n=pv,isConnectable:r=!0,id:i,onConnect:o,children:s,className:a,onMouseDown:l,onTouchStart:u,...c},f)=>{var M,N;const d=Ie(),p=sv();if(!p)return(N=(M=d.getState()).onError)==null||N.call(M,"010",kt["010"]()),null;const{connectionStartHandle:v,connectOnClick:y,noPanClassName:C}=Ce(mv,We),h=i||null,b=e==="target",S=I=>{const{defaultEdgeOptions:k,onConnect:B,hasDefaultEdges:H}=d.getState(),O={...k,...I};if(H){const{edges:W}=d.getState();d.setState({edges:vc(O,W)})}B==null||B(O),o==null||o(O)},w=I=>{const k=hc(I);(k&&I.button===0||!k)&&Sc({event:I,handleId:h,nodeId:p,onConnect:S,isTarget:b,getState:d.getState,setState:d.setState,isValidConnection:n}),k?l==null||l(I):u==null||u(I)},_=I=>{const{onClickConnectStart:k,onClickConnectEnd:B,connectionMode:H}=d.getState();if(!v){k==null||k(I,{nodeId:p,handleId:h,handleType:e}),d.setState({connectionStartHandle:{nodeId:p,type:e,handleId:h}});return}const O=cc(I.target),{connection:W,isValid:x}=bo({nodeId:p,id:h,type:e},H,v.nodeId,v.handleId||null,v.type,n,O);x&&S(W),B==null||B(I),d.setState({connectionStartHandle:null})};return g("div",{"data-handleid":h,"data-nodeid":p,"data-handlepos":t,"data-id":`${p}-${h}-${e}`,className:He(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",C,a,{source:!b,target:b,connectable:r,connecting:(v==null?void 0:v.nodeId)===p&&(v==null?void 0:v.handleId)===h&&(v==null?void 0:v.type)===e}]),onMouseDown:w,onTouchStart:w,onClick:y?_:void 0,ref:f,...c,children:s})});_c.displayName="Handle";var ur=m.memo(_c);const Cc=({data:e,isConnectable:t,targetPosition:n=K.Top,sourcePosition:r=K.Bottom})=>Y(ye,{children:[g(ur,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g(ur,{type:"source",position:r,isConnectable:t})]});Cc.displayName="DefaultNode";var xo=m.memo(Cc);const Mc=({data:e,isConnectable:t,sourcePosition:n=K.Bottom})=>Y(ye,{children:[e==null?void 0:e.label,g(ur,{type:"source",position:n,isConnectable:t})]});Mc.displayName="InputNode";var Nc=m.memo(Mc);const Tc=({data:e,isConnectable:t,targetPosition:n=K.Top})=>Y(ye,{children:[g(ur,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});Tc.displayName="OutputNode";var Pc=m.memo(Tc);const Jo=()=>null;Jo.displayName="GroupNode";const gv=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Nr=e=>e.id;function yv(e,t){return We(e.selectedNodes.map(Nr),t.selectedNodes.map(Nr))&&We(e.selectedEdges.map(Nr),t.selectedEdges.map(Nr))}const Rc=m.memo(({onSelectionChange:e})=>{const t=Ie(),{selectedNodes:n,selectedEdges:r}=Ce(gv,yv);return m.useEffect(()=>{var o,s;const i={nodes:n,edges:r};e==null||e(i),(s=(o=t.getState()).onSelectionChange)==null||s.call(o,i)},[n,r,e]),null});Rc.displayName="SelectionListener";const vv=e=>!!e.onSelectionChange;function wv({onSelectionChange:e}){const t=Ce(vv);return e||t?g(Rc,{onSelectionChange:e}):null}const bv=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function cn(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function le(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const xv=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:f,edgesFocusable:d,elevateNodesOnSelect:p,minZoom:v,maxZoom:y,nodeExtent:C,onNodesChange:h,onEdgesChange:b,elementsSelectable:S,connectionMode:w,snapGrid:_,snapToGrid:M,translateExtent:N,connectOnClick:I,defaultEdgeOptions:k,fitView:B,fitViewOptions:H,onNodesDelete:O,onEdgesDelete:W,onNodeDrag:x,onNodeDragStart:R,onNodeDragStop:T,onSelectionDrag:E,onSelectionDragStart:P,onSelectionDragStop:$,noPanClassName:D,nodeOrigin:V,rfId:X,autoPanOnConnect:Z,autoPanOnNodeDrag:j,onError:ne,connectionRadius:fe})=>{const{setNodes:G,setEdges:re,setDefaultNodesAndEdges:de,setMinZoom:ce,setMaxZoom:be,setTranslateExtent:ve,setNodeExtent:ue,reset:xe}=Ce(bv,We),L=Ie();return m.useEffect(()=>{const ae=r==null?void 0:r.map(he=>({...he,...k}));return de(n,ae),()=>{xe()}},[]),le("defaultEdgeOptions",k,L.setState),le("connectionMode",w,L.setState),le("onConnect",i,L.setState),le("onConnectStart",o,L.setState),le("onConnectEnd",s,L.setState),le("onClickConnectStart",a,L.setState),le("onClickConnectEnd",l,L.setState),le("nodesDraggable",u,L.setState),le("nodesConnectable",c,L.setState),le("nodesFocusable",f,L.setState),le("edgesFocusable",d,L.setState),le("elementsSelectable",S,L.setState),le("elevateNodesOnSelect",p,L.setState),le("snapToGrid",M,L.setState),le("snapGrid",_,L.setState),le("onNodesChange",h,L.setState),le("onEdgesChange",b,L.setState),le("connectOnClick",I,L.setState),le("fitViewOnInit",B,L.setState),le("fitViewOnInitOptions",H,L.setState),le("onNodesDelete",O,L.setState),le("onEdgesDelete",W,L.setState),le("onNodeDrag",x,L.setState),le("onNodeDragStart",R,L.setState),le("onNodeDragStop",T,L.setState),le("onSelectionDrag",E,L.setState),le("onSelectionDragStart",P,L.setState),le("onSelectionDragStop",$,L.setState),le("noPanClassName",D,L.setState),le("nodeOrigin",V,L.setState),le("rfId",X,L.setState),le("autoPanOnConnect",Z,L.setState),le("autoPanOnNodeDrag",j,L.setState),le("onError",ne,L.setState),le("connectionRadius",fe,L.setState),cn(e,G),cn(t,re),cn(v,ce),cn(y,be),cn(N,ve),cn(C,ue),null},ha={display:"none"},Ev={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ac="react-flow__node-desc",$c="react-flow__edge-desc",Sv="react-flow__aria-live",_v=e=>e.ariaLiveMessage;function Cv({rfId:e}){const t=Ce(_v);return g("div",{id:`${Sv}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ev,children:t})}function Mv({rfId:e,disableKeyboardA11y:t}){return Y(ye,{children:[Y("div",{id:`${Ac}-${e}`,style:ha,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g("div",{id:`${$c}-${e}`,style:ha,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g(Cv,{rfId:e})]})}const Nv=(e,t,n)=>n===K.Left?e-t:n===K.Right?e+t:e,Tv=(e,t,n)=>n===K.Top?e-t:n===K.Bottom?e+t:e,pa="react-flow__edgeupdater",ma=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:s,type:a})=>g("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:s,className:He([pa,`${pa}-${a}`]),cx:Nv(t,r,e),cy:Tv(n,r,e),r,stroke:"transparent",fill:"transparent"});var un=e=>{const t=({id:n,className:r,type:i,data:o,onClick:s,onEdgeDoubleClick:a,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:y,style:C,source:h,target:b,sourceX:S,sourceY:w,targetX:_,targetY:M,sourcePosition:N,targetPosition:I,elementsSelectable:k,hidden:B,sourceHandleId:H,targetHandleId:O,onContextMenu:W,onMouseEnter:x,onMouseMove:R,onMouseLeave:T,edgeUpdaterRadius:E,onEdgeUpdate:P,onEdgeUpdateStart:$,onEdgeUpdateEnd:D,markerEnd:V,markerStart:X,rfId:Z,ariaLabel:j,isFocusable:ne,pathOptions:fe,interactionWidth:G})=>{const re=m.useRef(null),[de,ce]=m.useState(!1),[be,ve]=m.useState(!1),ue=Ie(),xe=m.useMemo(()=>`url(#${wo(X,Z)})`,[X,Z]),L=m.useMemo(()=>`url(#${wo(V,Z)})`,[V,Z]);if(B)return null;const ae=Se=>{const{edges:Te,addSelectedEdges:Ye}=ue.getState();if(k&&(ue.setState({nodesSelectionActive:!1}),Ye([n])),s){const Ze=Te.find(Le=>Le.id===n);s(Se,Ze)}},he=zn(n,ue.getState,a),A=zn(n,ue.getState,W),F=zn(n,ue.getState,x),z=zn(n,ue.getState,R),q=zn(n,ue.getState,T),J=(Se,Te)=>{const Ye=Te?b:h,Ze=(Te?O:H)||null,Le=Te?"target":"source",Pt=()=>!0,Me=Te,Ne=ue.getState().edges.find(gt=>gt.id===n);ve(!0),$==null||$(Se,Ne,Le);const Qe=gt=>{ve(!1),D==null||D(gt,Ne,Le)};Sc({event:Se,handleId:Ze,nodeId:Ye,onConnect:gt=>P==null?void 0:P(Ne,gt),isTarget:Me,getState:ue.getState,setState:ue.setState,isValidConnection:Pt,edgeUpdaterType:Le,onEdgeUpdateEnd:Qe})},pe=Se=>J(Se,!0),oe=Se=>J(Se,!1),ee=()=>ce(!0),se=()=>ce(!1),ge=!k&&!s,Ee=typeof P<"u",ke=Se=>{var Te;if(fc.includes(Se.key)&&k){const{unselectNodesAndEdges:Ye,addSelectedEdges:Ze,edges:Le}=ue.getState();Se.key==="Escape"?((Te=re.current)==null||Te.blur(),Ye({edges:[Le.find(Me=>Me.id===n)]})):Ze([n])}};return Y("g",{className:He(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:u,inactive:ge,updating:de}]),onClick:ae,onDoubleClick:he,onContextMenu:A,onMouseEnter:F,onMouseMove:z,onMouseLeave:q,onKeyDown:ne?ke:void 0,tabIndex:ne?0:void 0,role:ne?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":j===null?void 0:j||`Edge from ${h} to ${b}`,"aria-describedby":ne?`${$c}-${Z}`:void 0,ref:re,children:[!be&&g(e,{id:n,source:h,target:b,selected:l,animated:u,label:c,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:v,labelBgBorderRadius:y,data:o,style:C,sourceX:S,sourceY:w,targetX:_,targetY:M,sourcePosition:N,targetPosition:I,sourceHandleId:H,targetHandleId:O,markerStart:xe,markerEnd:L,pathOptions:fe,interactionWidth:G}),Ee&&Y(ye,{children:[g(ma,{position:N,centerX:S,centerY:w,radius:E,onMouseDown:pe,onMouseEnter:ee,onMouseOut:se,type:"source"}),g(ma,{position:I,centerX:_,centerY:M,radius:E,onMouseDown:oe,onMouseEnter:ee,onMouseOut:se,type:"target"})]})]})};return t.displayName="EdgeWrapper",m.memo(t)};function Pv(e){const t={default:un(e.default||ti),straight:un(e.bezier||Ko),step:un(e.step||Yo),smoothstep:un(e.step||vi),simplebezier:un(e.simplebezier||jo)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=un(e[o]||ti),i),n);return{...t,...r}}function ga(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,s=(n==null?void 0:n.height)||t.height;switch(e){case K.Top:return{x:r+o/2,y:i};case K.Right:return{x:r+o,y:i+s/2};case K.Bottom:return{x:r+o/2,y:i+s};case K.Left:return{x:r,y:i+s/2}}}function ya(e,t){return e?t?e.find(n=>n.id===t):e.length===1?e[0]:null:null}const Rv=(e,t,n,r,i,o)=>{const s=ga(n,e,t),a=ga(o,r,i);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function Av({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:s,height:a,transform:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Qr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:a/l[2]}),f=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),d=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(f*d)>0}function va(e){var r,i,o,s,a;const t=((r=e==null?void 0:e[$e])==null?void 0:r.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)<"u"&&typeof((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)<"u";return[{x:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}function Ic(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Ic(n,t):!1}function wa(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function $v(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!Ic(r,e))).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:t.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function Oc(e,t,n,r,i=[0,0],o){let s=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const u=n.get(e.parentNode),{x:c,y:f}=en(u,i).positionAbsolute;s=u&&rt(c)&&rt(f)&&rt(u.width)&&rt(u.height)?[[c+e.width*i[0],f+e.height*i[1]],[c+u.width-e.width+e.width*i[0],f+u.height-e.height+e.height*i[1]]]:s}else o==null||o("005",kt["005"]()),s=r;else if(e.extent&&e.parentNode){const u=n.get(e.parentNode),{x:c,y:f}=en(u,i).positionAbsolute;s=[[e.extent[0][0]+c,e.extent[0][1]+f],[e.extent[1][0]+c,e.extent[1][1]+f]]}let a={x:0,y:0};if(e.parentNode){const u=n.get(e.parentNode);a=en(u,i).positionAbsolute}const l=s?Xo(t,s):t;return{position:{x:l.x-a.x,y:l.y-a.y},positionAbsolute:l}}function Hi({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const ba=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),s=t.getBoundingClientRect(),a={x:s.width*r[0],y:s.height*r[1]};return o.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Wo(l)}})};function Bn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);n(r,{...i})}}function Eo({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:s}=t.getState(),a=s.get(e);t.setState({nodesSelectionActive:!1}),a.selected?(n||a.selected&&o)&&i({nodes:[a]}):r([e])}function Iv(){const e=Ie();return m.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:i,snapToGrid:o}=e.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,l={x:(s-r[0])/r[2],y:(a-r[1])/r[2]};return{xSnapped:o?i[0]*Math.round(l.x/i[0]):l.x,ySnapped:o?i[1]*Math.round(l.y/i[1]):l.y,...l}},[])}function Vi(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Dc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:s}){const a=Ie(),[l,u]=m.useState(!1),c=m.useRef([]),f=m.useRef({x:null,y:null}),d=m.useRef(0),p=m.useRef(null),v=m.useRef({x:0,y:0}),y=m.useRef(null),C=m.useRef(!1),h=Iv();return m.useEffect(()=>{if(e!=null&&e.current){const b=tt(e.current),S=({x:_,y:M})=>{const{nodeInternals:N,onNodeDrag:I,onSelectionDrag:k,updateNodePositions:B,nodeExtent:H,snapGrid:O,snapToGrid:W,nodeOrigin:x,onError:R}=a.getState();f.current={x:_,y:M};let T=!1;if(c.current=c.current.map(P=>{const $={x:_-P.distance.x,y:M-P.distance.y};W&&($.x=O[0]*Math.round($.x/O[0]),$.y=O[1]*Math.round($.y/O[1]));const D=Oc(P,$,N,H,x,R);return T=T||P.position.x!==D.position.x||P.position.y!==D.position.y,P.position=D.position,P.positionAbsolute=D.positionAbsolute,P}),!T)return;B(c.current,!0,!0),u(!0);const E=i?I:Vi(k);if(E&&y.current){const[P,$]=Hi({nodeId:i,dragItems:c.current,nodeInternals:N});E(y.current,P,$)}},w=()=>{if(!p.current)return;const[_,M]=lc(v.current,p.current);if(_!==0||M!==0){const{transform:N,panBy:I}=a.getState();f.current.x=(f.current.x??0)-_/N[2],f.current.y=(f.current.y??0)-M/N[2],S(f.current),I({x:_,y:M})}d.current=requestAnimationFrame(w)};if(t)b.on(".drag",null);else{const _=ny().on("start",M=>{var R;const{nodeInternals:N,multiSelectionActive:I,unselectNodesAndEdges:k,onNodeDragStart:B,onSelectionDragStart:H,domNode:O}=a.getState(),W=i?B:Vi(H);!s&&!I&&i&&((R=N.get(i))!=null&&R.selected||k()),i&&o&&s&&Eo({id:i,store:a});const x=h(M);if(f.current=x,c.current=$v(N,x,i),W&&c.current){const[T,E]=Hi({nodeId:i,dragItems:c.current,nodeInternals:N});W(M.sourceEvent,T,E)}p.current=(O==null?void 0:O.getBoundingClientRect())||null,v.current=Qt(M.sourceEvent,p.current)}).on("drag",M=>{const N=h(M),{autoPanOnNodeDrag:I}=a.getState();!C.current&&I&&(C.current=!0,w()),(f.current.x!==N.xSnapped||f.current.y!==N.ySnapped)&&c.current&&(y.current=M.sourceEvent,v.current=Qt(M.sourceEvent,p.current),S(N))}).on("end",M=>{if(u(!1),C.current=!1,cancelAnimationFrame(d.current),c.current){const{updateNodePositions:N,nodeInternals:I,onNodeDragStop:k,onSelectionDragStop:B}=a.getState(),H=i?k:Vi(B);if(N(c.current,!1,!1),H){const[O,W]=Hi({nodeId:i,dragItems:c.current,nodeInternals:I});H(M.sourceEvent,O,W)}}}).filter(M=>{const N=M.target;return!M.button&&(!n||!wa(N,`.${n}`,e))&&(!r||wa(N,r,e))});return b.call(_),()=>{b.on(".drag",null)}}}},[e,t,n,r,o,a,i,s,h]),l}function Fc(){const e=Ie();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,getNodes:s,snapToGrid:a,snapGrid:l,onError:u}=e.getState(),c=s().filter(h=>h.selected),f=a?l[0]:5,d=a?l[1]:5,p=n.isShiftPressed?4:1,v=n.x*f*p,y=n.y*d*p,C=c.map(h=>{if(h.positionAbsolute){const b={x:h.positionAbsolute.x+v,y:h.positionAbsolute.y+y};a&&(b.x=l[0]*Math.round(b.x/l[0]),b.y=l[1]*Math.round(b.y/l[1]));const{positionAbsolute:S,position:w}=Oc(h,b,r,i,void 0,u);h.position=w,h.positionAbsolute=S}return h});o(C,!0,!1)},[])}const En={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Hn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:s,xPosOrigin:a,yPosOrigin:l,selected:u,onClick:c,onMouseEnter:f,onMouseMove:d,onMouseLeave:p,onContextMenu:v,onDoubleClick:y,style:C,className:h,isDraggable:b,isSelectable:S,isConnectable:w,isFocusable:_,selectNodesOnDrag:M,sourcePosition:N,targetPosition:I,hidden:k,resizeObserver:B,dragHandle:H,zIndex:O,isParent:W,noDragClassName:x,noPanClassName:R,initialized:T,disableKeyboardA11y:E,ariaLabel:P,rfId:$})=>{const D=Ie(),V=m.useRef(null),X=m.useRef(N),Z=m.useRef(I),j=m.useRef(r),ne=S||b||c||f||d||p,fe=Fc(),G=Bn(n,D.getState,f),re=Bn(n,D.getState,d),de=Bn(n,D.getState,p),ce=Bn(n,D.getState,v),be=Bn(n,D.getState,y),ve=L=>{if(S&&(!M||!b)&&Eo({id:n,store:D}),c){const ae=D.getState().nodeInternals.get(n);c(L,{...ae})}},ue=L=>{var ae;if(!yo(L))if(fc.includes(L.key)&&S){const he=L.key==="Escape";he&&((ae=V.current)==null||ae.blur()),Eo({id:n,store:D,unselect:he})}else!E&&b&&u&&Object.prototype.hasOwnProperty.call(En,L.key)&&(D.setState({ariaLiveMessage:`Moved selected node ${L.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~s}`}),fe({x:En[L.key].x,y:En[L.key].y,isShiftPressed:L.shiftKey}))};m.useEffect(()=>{if(V.current&&!k){const L=V.current;return B==null||B.observe(L),()=>B==null?void 0:B.unobserve(L)}},[k]),m.useEffect(()=>{const L=j.current!==r,ae=X.current!==N,he=Z.current!==I;V.current&&(L||ae||he)&&(L&&(j.current=r),ae&&(X.current=N),he&&(Z.current=I),D.getState().updateNodeDimensions([{id:n,nodeElement:V.current,forceUpdate:!0}]))},[n,r,N,I]);const xe=Dc({nodeRef:V,disabled:k||!b,noDragClassName:x,handleSelector:H,nodeId:n,isSelectable:S,selectNodesOnDrag:M});return k?null:g("div",{className:He(["react-flow__node",`react-flow__node-${r}`,{[R]:b},h,{selected:u,selectable:S,parent:W,dragging:xe}]),ref:V,style:{zIndex:O,transform:`translate(${a}px,${l}px)`,pointerEvents:ne?"all":"none",visibility:T?"visible":"hidden",...C},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:G,onMouseMove:re,onMouseLeave:de,onContextMenu:ce,onClick:ve,onDoubleClick:be,onKeyDown:_?ue:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":E?void 0:`${Ac}-${$}`,"aria-label":P,children:g(ov,{value:n,children:g(e,{id:n,data:i,type:r,xPos:o,yPos:s,selected:u,isConnectable:w,sourcePosition:N,targetPosition:I,dragging:xe,dragHandle:H,zIndex:O})})})};return t.displayName="NodeWrapper",m.memo(t)};function Ov(e){const t={input:Hn(e.input||Nc),default:Hn(e.default||xo),output:Hn(e.output||Pc),group:Hn(e.group||Jo)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Hn(e[o]||xo),i),n);return{...t,...r}}const Dv=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Fv=typeof document<"u"?document:null;var dr=(e=null,t={target:Fv})=>{const[n,r]=m.useState(!1),i=m.useRef(new Set([])),[o,s]=m.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(c=>typeof c=="string").map(c=>c.split("+")),u=l.reduce((c,f)=>c.concat(...f),[]);return[l,u]}return[[],[]]},[e]);return m.useEffect(()=>{var a,l;if(e!==null){const u=d=>{if(yo(d))return!1;const p=Ea(d.code,s);i.current.add(d[p]),xa(o,i.current,!1)&&(d.preventDefault(),r(!0))},c=d=>{if(yo(d))return!1;const p=Ea(d.code,s);xa(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(d[p])},f=()=>{i.current.clear(),r(!1)};return(a=t==null?void 0:t.target)==null||a.addEventListener("keydown",u),(l=t==null?void 0:t.target)==null||l.addEventListener("keyup",c),window.addEventListener("blur",f),()=>{var d,p;(d=t==null?void 0:t.target)==null||d.removeEventListener("keydown",u),(p=t==null?void 0:t.target)==null||p.removeEventListener("keyup",c),window.removeEventListener("blur",f)}}},[e,r]),n};function xa(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function Ea(e,t){return t.includes(e)?"code":"key"}function kc(e,t,n,r){var s,a;if(!e.parentNode)return n;const i=t.get(e.parentNode),o=en(i,r);return kc(i,t,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(((s=i[$e])==null?void 0:s.z)??0)>(n.z??0)?((a=i[$e])==null?void 0:a.z)??0:n.z??0},r)}function Lc(e,t,n){e.forEach(r=>{var i;if(r.parentNode&&!e.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||n!=null&&n[r.id]){const{x:o,y:s,z:a}=kc(r,e,{...r.position,z:((i=r[$e])==null?void 0:i.z)??0},t);r.positionAbsolute={x:o,y:s},r[$e].z=a,n!=null&&n[r.id]&&(r[$e].isParent=!0)}})}function Ui(e,t,n,r){const i=new Map,o={},s=r?1e3:0;return e.forEach(a=>{var f;const l=(rt(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=t.get(a.id),c={width:u==null?void 0:u.width,height:u==null?void 0:u.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(c.parentNode=a.parentNode,o[a.parentNode]=!0),Object.defineProperty(c,$e,{enumerable:!1,value:{handleBounds:(f=u==null?void 0:u[$e])==null?void 0:f.handleBounds,z:l}}),i.set(a.id,c)}),Lc(i,n,o),i}function zc(e,t={}){const{getNodes:n,width:r,height:i,minZoom:o,maxZoom:s,d3Zoom:a,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:c,nodeOrigin:f}=e();if((t.initial&&!u&&c||!t.initial)&&a&&l){const d=n().filter(v=>t.includeHiddenNodes?v.width&&v.height:!v.hidden),p=d.every(v=>v.width&&v.height);if(d.length>0&&p){const v=Go(d,f),[y,C,h]=Ec(v,r,i,t.minZoom??o,t.maxZoom??s,t.padding??.1),b=Mt.translate(y,C).scale(h);return typeof t.duration=="number"&&t.duration>0?a.transform(Xt(l,t.duration),b):a.transform(l,b),!0}}return!1}function kv(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[$e]:r[$e],selected:n.selected})}),new Map(t)}function Lv(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function Tr({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:u}=n();e!=null&&e.length&&(l&&r({nodeInternals:kv(e,i)}),s==null||s(e)),t!=null&&t.length&&(u&&r({edges:Lv(t,o)}),a==null||a(t))}const Ut=()=>{},zv={zoomIn:Ut,zoomOut:Ut,zoomTo:Ut,getZoom:()=>1,setViewport:Ut,getViewport:()=>({x:0,y:0,zoom:1}),fitView:Ut,setCenter:Ut,fitBounds:Ut,project:e=>e,viewportInitialized:!1},Bv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Hv=()=>{const e=Ie(),{d3Zoom:t,d3Selection:n}=Ce(Bv,We);return m.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Xt(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Xt(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(Xt(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[s,a,l]=e.getState().transform,u=Mt.translate(i.x??s,i.y??a).scale(i.zoom??l);t.transform(Xt(n,o==null?void 0:o.duration),u)},getViewport:()=>{const[i,o,s]=e.getState().transform;return{x:i,y:o,zoom:s}},fitView:i=>zc(e.getState,i),setCenter:(i,o,s)=>{const{width:a,height:l,maxZoom:u}=e.getState(),c=typeof(s==null?void 0:s.zoom)<"u"?s.zoom:u,f=a/2-i*c,d=l/2-o*c,p=Mt.translate(f,d).scale(c);t.transform(Xt(n,s==null?void 0:s.duration),p)},fitBounds:(i,o)=>{const{width:s,height:a,minZoom:l,maxZoom:u}=e.getState(),[c,f,d]=Ec(i,s,a,l,u,(o==null?void 0:o.padding)??.1),p=Mt.translate(c,f).scale(d);t.transform(Xt(n,o==null?void 0:o.duration),p)},project:i=>{const{transform:o,snapToGrid:s,snapGrid:a}=e.getState();return wc(i,o,s,a)},viewportInitialized:!0}:zv,[t,n])};function wi(){const e=Hv(),t=Ie(),n=m.useCallback(()=>t.getState().getNodes().map(y=>({...y})),[]),r=m.useCallback(y=>t.getState().nodeInternals.get(y),[]),i=m.useCallback(()=>{const{edges:y=[]}=t.getState();return y.map(C=>({...C}))},[]),o=m.useCallback(y=>{const{edges:C=[]}=t.getState();return C.find(h=>h.id===y)},[]),s=m.useCallback(y=>{const{getNodes:C,setNodes:h,hasDefaultNodes:b,onNodesChange:S}=t.getState(),w=C(),_=typeof y=="function"?y(w):y;if(b)h(_);else if(S){const M=_.length===0?w.map(N=>({type:"remove",id:N.id})):_.map(N=>({item:N,type:"reset"}));S(M)}},[]),a=m.useCallback(y=>{const{edges:C=[],setEdges:h,hasDefaultEdges:b,onEdgesChange:S}=t.getState(),w=typeof y=="function"?y(C):y;if(b)h(w);else if(S){const _=w.length===0?C.map(M=>({type:"remove",id:M.id})):w.map(M=>({item:M,type:"reset"}));S(_)}},[]),l=m.useCallback(y=>{const C=Array.isArray(y)?y:[y],{getNodes:h,setNodes:b,hasDefaultNodes:S,onNodesChange:w}=t.getState();if(S){const M=[...h(),...C];b(M)}else if(w){const _=C.map(M=>({item:M,type:"add"}));w(_)}},[]),u=m.useCallback(y=>{const C=Array.isArray(y)?y:[y],{edges:h=[],setEdges:b,hasDefaultEdges:S,onEdgesChange:w}=t.getState();if(S)b([...h,...C]);else if(w){const _=C.map(M=>({item:M,type:"add"}));w(_)}},[]),c=m.useCallback(()=>{const{getNodes:y,edges:C=[],transform:h}=t.getState(),[b,S,w]=h;return{nodes:y().map(_=>({..._})),edges:C.map(_=>({..._})),viewport:{x:b,y:S,zoom:w}}},[]),f=m.useCallback(({nodes:y,edges:C})=>{const{nodeInternals:h,getNodes:b,edges:S,hasDefaultNodes:w,hasDefaultEdges:_,onNodesDelete:M,onEdgesDelete:N,onNodesChange:I,onEdgesChange:k}=t.getState(),B=(y||[]).map(R=>R.id),H=(C||[]).map(R=>R.id),O=b().reduce((R,T)=>{const E=!B.includes(T.id)&&T.parentNode&&R.find($=>$.id===T.parentNode);return(typeof T.deletable=="boolean"?T.deletable:!0)&&(B.includes(T.id)||E)&&R.push(T),R},[]),W=S.filter(R=>typeof R.deletable=="boolean"?R.deletable:!0),x=W.filter(R=>H.includes(R.id));if(O||x){const R=xc(O,W),T=[...x,...R],E=T.reduce((P,$)=>(P.includes($.id)||P.push($.id),P),[]);if((_||w)&&(_&&t.setState({edges:S.filter(P=>!E.includes(P.id))}),w&&(O.forEach(P=>{h.delete(P.id)}),t.setState({nodeInternals:new Map(h)}))),E.length>0&&(N==null||N(T),k&&k(E.map(P=>({id:P,type:"remove"})))),O.length>0&&(M==null||M(O),I)){const P=O.map($=>({id:$.id,type:"remove"}));I(P)}}},[]),d=m.useCallback(y=>{const C=Z0(y),h=C?null:t.getState().nodeInternals.get(y.id);return[C?y:aa(h),h,C]},[]),p=m.useCallback((y,C=!0,h)=>{const[b,S,w]=d(y);return b?(h||t.getState().getNodes()).filter(_=>{if(!w&&(_.id===S.id||!_.positionAbsolute))return!1;const M=aa(_),N=go(M,b);return C&&N>0||N>=y.width*y.height}):[]},[]),v=m.useCallback((y,C,h=!0)=>{const[b]=d(y);if(!b)return!1;const S=go(b,C);return h&&S>0||S>=y.width*y.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:s,setEdges:a,addNodes:l,addEdges:u,toObject:c,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:v}),[e,n,r,i,o,s,a,l,u,c,f,p,v])}var Vv=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ie(),{deleteElements:r}=wi(),i=dr(e),o=dr(t);m.useEffect(()=>{if(i){const{edges:s,getNodes:a}=n.getState(),l=a().filter(c=>c.selected),u=s.filter(c=>c.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),m.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Uv(e){const t=Ie();m.useEffect(()=>{let n;const r=()=>{var o,s;if(!e.current)return;const i=Wo(e.current);(i.height===0||i.width===0)&&((s=(o=t.getState()).onError)==null||s.call(o,"004",kt["004"]())),t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Zo={position:"absolute",width:"100%",height:"100%",top:0,left:0},Wv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Wi=e=>({x:e.x,y:e.y,zoom:e.k}),dn=(e,t)=>e.target.closest(`.${t}`),Sa=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Xv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),jv=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:i=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:l=xn.Free,zoomOnDoubleClick:u=!0,elementsSelectable:c,panOnDrag:f=!0,defaultViewport:d,translateExtent:p,minZoom:v,maxZoom:y,zoomActivationKeyCode:C,preventScrolling:h=!0,children:b,noWheelClassName:S,noPanClassName:w})=>{const _=m.useRef(),M=Ie(),N=m.useRef(!1),I=m.useRef(!1),k=m.useRef(null),B=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:O,d3ZoomHandler:W,userSelectionActive:x}=Ce(Xv,We),R=dr(C),T=m.useRef(0);return Uv(k),m.useEffect(()=>{if(k.current){const E=k.current.getBoundingClientRect(),P=sc().scaleExtent([v,y]).translateExtent(p),$=tt(k.current).call(P),D=Mt.translate(d.x,d.y).scale(Nn(d.zoom,v,y)),V=[[0,0],[E.width,E.height]],X=P.constrain()(D,V,p);P.transform($,X),M.setState({d3Zoom:P,d3Selection:$,d3ZoomHandler:$.on("wheel.zoom"),transform:[X.x,X.y,X.k],domNode:k.current.closest(".react-flow")})}},[]),m.useEffect(()=>{O&&H&&(s&&!R&&!x?O.on("wheel.zoom",E=>{if(dn(E,S))return!1;E.preventDefault(),E.stopImmediatePropagation();const P=O.property("__zoom").k||1;if(E.ctrlKey&&o){const X=lt(E),Z=-E.deltaY*(E.deltaMode===1?.05:E.deltaMode?1:.002)*10,j=P*Math.pow(2,Z);H.scaleTo(O,j,X);return}const $=E.deltaMode===1?20:1,D=l===xn.Vertical?0:E.deltaX*$,V=l===xn.Horizontal?0:E.deltaY*$;H.translateBy(O,-(D/P)*a,-(V/P)*a)}):typeof W<"u"&&O.on("wheel.zoom",function(E,P){if(!h||dn(E,S))return null;E.preventDefault(),W.call(this,E,P)}))},[x,s,l,O,H,W,R,o,h,S]),m.useEffect(()=>{H&&H.on("start",E=>{var $;if(!E.sourceEvent)return null;T.current=E.sourceEvent.button;const{onViewportChangeStart:P}=M.getState();if(N.current=!0,(($=E.sourceEvent)==null?void 0:$.type)==="mousedown"&&M.setState({paneDragging:!0}),t||P){const D=Wi(E.transform);B.current=D,P==null||P(D),t==null||t(E.sourceEvent,D)}})},[H,t]),m.useEffect(()=>{H&&(x&&!N.current?H.on("zoom",null):x||H.on("zoom",E=>{const{onViewportChange:P}=M.getState();if(M.setState({transform:[E.transform.x,E.transform.y,E.transform.k]}),I.current=!!(r&&Sa(f,T.current??0)),e||P){const $=Wi(E.transform);P==null||P($),e==null||e(E.sourceEvent,$)}}))},[x,H,e,f,r]),m.useEffect(()=>{H&&H.on("end",E=>{if(!E.sourceEvent)return null;const{onViewportChangeEnd:P}=M.getState();if(N.current=!1,M.setState({paneDragging:!1}),r&&Sa(f,T.current??0)&&!I.current&&r(E.sourceEvent),I.current=!1,(n||P)&&Wv(B.current,E.transform)){const $=Wi(E.transform);B.current=$,clearTimeout(_.current),_.current=setTimeout(()=>{P==null||P($),n==null||n(E.sourceEvent,$)},s?150:0)}})},[H,s,f,n,r]),m.useEffect(()=>{H&&H.filter(E=>{const P=R||i,$=o&&E.ctrlKey;if(E.button===1&&E.type==="mousedown"&&(dn(E,"react-flow__node")||dn(E,"react-flow__edge")))return!0;if(!f&&!P&&!s&&!u&&!o||x||!u&&E.type==="dblclick"||dn(E,S)&&E.type==="wheel"||dn(E,w)&&E.type!=="wheel"||!o&&E.ctrlKey&&E.type==="wheel"||!P&&!s&&!$&&E.type==="wheel"||!f&&(E.type==="mousedown"||E.type==="touchstart")||Array.isArray(f)&&!f.includes(E.button)&&(E.type==="mousedown"||E.type==="touchstart"))return!1;const D=Array.isArray(f)&&f.includes(E.button)||!E.button||E.button<=1;return(!E.ctrlKey||E.type==="wheel")&&D})},[x,H,i,o,s,u,f,c,R]),g("div",{className:"react-flow__renderer",ref:k,style:Zo,children:b})},Yv=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Kv(){const{userSelectionActive:e,userSelectionRect:t}=Ce(Yv,We);return e&&t?g("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function _a(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Bc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.filter(a=>a.id===i.id);if(o.length===0)return r.push(i),r;const s={...i};for(const a of o)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&_a(r,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&_a(r,s);break}case"remove":return r}return r.push(s),r},n)}function Qo(e,t){return Bc(e,t)}function qv(e,t){return Bc(e,t)}const At=(e,t)=>({id:e,type:"select",selected:t});function mn(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(At(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(At(r.id,!1))),n},[])}const Xi=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Gv=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Hc=m.memo(({isSelecting:e,selectionMode:t=cr.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:i,onPaneClick:o,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:c,children:f})=>{const d=m.useRef(null),p=Ie(),v=m.useRef(0),y=m.useRef(0),C=m.useRef(),{userSelectionActive:h,elementsSelectable:b,dragging:S}=Ce(Gv,We),w=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},_=W=>{o==null||o(W),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},M=W=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){W.preventDefault();return}s==null||s(W)},N=a?W=>a(W):void 0,I=W=>{const{resetSelectedElements:x,domNode:R}=p.getState();if(C.current=R==null?void 0:R.getBoundingClientRect(),!b||!e||W.button!==0||W.target!==d.current||!C.current)return;const{x:T,y:E}=Qt(W,C.current);x(),p.setState({userSelectionRect:{width:0,height:0,startX:T,startY:E,x:T,y:E}}),r==null||r(W)},k=W=>{const{userSelectionRect:x,nodeInternals:R,edges:T,transform:E,onNodesChange:P,onEdgesChange:$,nodeOrigin:D,getNodes:V}=p.getState();if(!e||!C.current||!x)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const X=Qt(W,C.current),Z=x.startX??0,j=x.startY??0,ne={...x,x:X.x<Z?X.x:Z,y:X.y<j?X.y:j,width:Math.abs(X.x-Z),height:Math.abs(X.y-j)},fe=V(),G=bc(R,ne,E,t===cr.Partial,!0,D),re=xc(G,T).map(ce=>ce.id),de=G.map(ce=>ce.id);if(v.current!==de.length){v.current=de.length;const ce=mn(fe,de);ce.length&&(P==null||P(ce))}if(y.current!==re.length){y.current=re.length;const ce=mn(T,re);ce.length&&($==null||$(ce))}p.setState({userSelectionRect:ne})},B=W=>{if(W.button!==0)return;const{userSelectionRect:x}=p.getState();!h&&x&&W.target===d.current&&(_==null||_(W)),p.setState({nodesSelectionActive:v.current>0}),w(),i==null||i(W)},H=W=>{h&&(p.setState({nodesSelectionActive:v.current>0}),i==null||i(W)),w()},O=b&&(e||h);return Y("div",{className:He(["react-flow__pane",{dragging:S,selection:e}]),onClick:O?void 0:Xi(_,d),onContextMenu:Xi(M,d),onWheel:Xi(N,d),onMouseEnter:O?void 0:l,onMouseDown:O?I:void 0,onMouseMove:O?k:u,onMouseUp:O?B:void 0,onMouseLeave:O?H:c,ref:d,style:Zo,children:[f,g(Kv,{})]})});Hc.displayName="Pane";const Jv=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Go(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Zv({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ie(),{width:i,height:o,x:s,y:a,transformString:l,userSelectionActive:u}=Ce(Jv,We),c=Fc(),f=m.useRef(null);if(m.useEffect(()=>{var v;n||(v=f.current)==null||v.focus({preventScroll:!0})},[n]),Dc({nodeRef:f}),u||!i||!o)return null;const d=e?v=>{const y=r.getState().getNodes().filter(C=>C.selected);e(v,y)}:void 0,p=v=>{Object.prototype.hasOwnProperty.call(En,v.key)&&c({x:En[v.key].x,y:En[v.key].y,isShiftPressed:v.shiftKey})};return g("div",{className:He(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:g("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:o,top:a,left:s}})})}var Qv=m.memo(Zv);const ew=e=>e.nodesSelectionActive,Vc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,deleteKeyCode:a,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:f,selectionOnDrag:d,selectionMode:p,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:C,panActivationKeyCode:h,zoomActivationKeyCode:b,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:M,panOnScrollSpeed:N,panOnScrollMode:I,zoomOnDoubleClick:k,panOnDrag:B,defaultViewport:H,translateExtent:O,minZoom:W,maxZoom:x,preventScrolling:R,onSelectionContextMenu:T,noWheelClassName:E,noPanClassName:P,disableKeyboardA11y:$})=>{const D=Ce(ew),V=dr(f),Z=dr(h)||B,j=V||d&&Z!==!0;return Vv({deleteKeyCode:a,multiSelectionKeyCode:C}),g(jv,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:S,zoomOnScroll:w,zoomOnPinch:_,panOnScroll:M,panOnScrollSpeed:N,panOnScrollMode:I,zoomOnDoubleClick:k,panOnDrag:!V&&Z,defaultViewport:H,translateExtent:O,minZoom:W,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:R,noWheelClassName:E,noPanClassName:P,children:Y(Hc,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:s,panOnDrag:Z,isSelecting:!!j,selectionMode:p,children:[e,D&&g(Qv,{onSelectionContextMenu:T,noPanClassName:P,disableKeyboardA11y:$})]})})};Vc.displayName="FlowRenderer";var tw=m.memo(Vc);function nw(e){return Ce(m.useCallback(n=>e?bc(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}const rw=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Uc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o,onError:s}=Ce(rw,We),a=nw(e.onlyRenderVisibleElements),l=m.useRef(),u=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(f=>{const d=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));o(d)});return l.current=c,c},[]);return m.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),g("div",{className:"react-flow__nodes",style:Zo,children:a.map(c=>{var _,M;let f=c.type||"default";e.nodeTypes[f]||(s==null||s("003",kt["003"](f)),f="default");const d=e.nodeTypes[f]||e.nodeTypes.default,p=!!(c.draggable||t&&typeof c.draggable>"u"),v=!!(c.selectable||i&&typeof c.selectable>"u"),y=!!(c.connectable||n&&typeof c.connectable>"u"),C=!!(c.focusable||r&&typeof c.focusable>"u"),h=e.nodeExtent?Xo(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,b=(h==null?void 0:h.x)??0,S=(h==null?void 0:h.y)??0,w=Dv({x:b,y:S,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return g(d,{id:c.id,className:c.className,style:c.style,type:f,data:c.data,sourcePosition:c.sourcePosition||K.Bottom,targetPosition:c.targetPosition||K.Top,hidden:c.hidden,xPos:b,yPos:S,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:p,isSelectable:v,isConnectable:y,isFocusable:C,resizeObserver:u,dragHandle:c.dragHandle,zIndex:((_=c[$e])==null?void 0:_.z)??0,isParent:!!((M=c[$e])!=null&&M.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel},c.id)})})};Uc.displayName="NodeRenderer";var iw=m.memo(Uc);const ow=[{level:0,isMaxLevel:!0,edges:[]}];function sw(e,t,n=!1){let r=-1;const i=e.reduce((s,a)=>{var c,f,d,p;const l=rt(a.zIndex);let u=l?a.zIndex:0;return n&&(u=l?a.zIndex:Math.max(((f=(c=t.get(a.source))==null?void 0:c[$e])==null?void 0:f.z)||0,((p=(d=t.get(a.target))==null?void 0:d[$e])==null?void 0:p.z)||0)),s[u]?s[u].push(a):s[u]=[a],r=u>r?u:r,s},{}),o=Object.entries(i).map(([s,a])=>{const l=+s;return{edges:a,level:l,isMaxLevel:l===r}});return o.length===0?ow:o}function aw(e,t,n){const r=Ce(m.useCallback(i=>e?i.edges.filter(o=>{const s=t.get(o.source),a=t.get(o.target);return(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Av({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return sw(r,t,n)}const lw=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),cw=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Ca={[ei.Arrow]:lw,[ei.ArrowClosed]:cw};function uw(e){const t=Ie();return m.useMemo(()=>{var i,o;return Object.prototype.hasOwnProperty.call(Ca,e)?Ca[e]:((o=(i=t.getState()).onError)==null||o.call(i,"009",kt["009"](e)),null)},[e])}const dw=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const l=uw(t);return l?g("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:a,refX:"0",refY:"0",children:g(l,{color:n,strokeWidth:s})}):null},fw=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=wo(s,t);r.includes(a)||(i.push({id:a,color:s.color||e,...s}),r.push(a))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},Wc=({defaultColor:e,rfId:t})=>{const n=Ce(m.useCallback(fw({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,s)=>o.id!==i[s].id)));return g("defs",{children:n.map(r=>g(dw,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};Wc.displayName="MarkerDefinitions";var hw=m.memo(Wc);const pw=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Xc=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:i,noPanClassName:o,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:p,onEdgeUpdateStart:v,onEdgeUpdateEnd:y,children:C})=>{const{edgesFocusable:h,elementsSelectable:b,width:S,height:w,connectionMode:_,nodeInternals:M,onError:N}=Ce(pw,We),I=aw(t,M,n);return S?Y(ye,{children:[I.map(({level:k,edges:B,isMaxLevel:H})=>Y("svg",{style:{zIndex:k},width:S,height:w,className:"react-flow__edges react-flow__container",children:[H&&g(hw,{defaultColor:e,rfId:r}),g("g",{children:B.map(O=>{const[W,x,R]=va(M.get(O.source)),[T,E,P]=va(M.get(O.target));if(!R||!P)return null;let $=O.type||"default";i[$]||(N==null||N("011",kt["011"]($)),$="default");const D=i[$]||i.default,V=_===on.Strict?E.target:(E.target??[]).concat(E.source??[]),X=ya(x.source,O.sourceHandle),Z=ya(V,O.targetHandle),j=(X==null?void 0:X.position)||K.Bottom,ne=(Z==null?void 0:Z.position)||K.Top,fe=!!(O.focusable||h&&typeof O.focusable>"u");if(!X||!Z)return N==null||N("008",kt["008"](X,O)),null;const{sourceX:G,sourceY:re,targetX:de,targetY:ce}=Rv(W,X,j,T,Z,ne);return g(D,{id:O.id,className:He([O.className,o]),type:$,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:G,sourceY:re,targetX:de,targetY:ce,sourcePosition:j,targetPosition:ne,elementsSelectable:b,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:f,edgeUpdaterRadius:d,onEdgeDoubleClick:p,onEdgeUpdateStart:v,onEdgeUpdateEnd:y,rfId:r,ariaLabel:O.ariaLabel,isFocusable:fe,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth},O.id)})})]},k)),C]}):null};Xc.displayName="EdgeRenderer";var mw=m.memo(Xc);const gw=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function yw({children:e}){const t=Ce(gw);return g("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function vw(e){const t=wi(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ww={[K.Left]:K.Right,[K.Right]:K.Left,[K.Top]:K.Bottom,[K.Bottom]:K.Top},jc=({nodeId:e,handleType:t,style:n,type:r=$t.Bezier,CustomComponent:i})=>{var _,M,N;const{fromNode:o,handleId:s,toX:a,toY:l,connectionMode:u}=Ce(m.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2],connectionMode:I.connectionMode}),[e]),We),c=(_=o==null?void 0:o[$e])==null?void 0:_.handleBounds;let f=c==null?void 0:c[t];if(u===on.Loose&&(f=f||(c==null?void 0:c[t==="source"?"target":"source"])),!o||!f)return null;const d=s?f.find(I=>I.id===s):f[0],p=d?d.x+d.width/2:(o.width??0)/2,v=d?d.y+d.height/2:o.height??0,y=(((M=o.positionAbsolute)==null?void 0:M.x)??0)+p,C=(((N=o.positionAbsolute)==null?void 0:N.y)??0)+v,h=d==null?void 0:d.position,b=h?ww[h]:null;if(!h||!b)return null;if(i)return g(i,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:y,fromY:C,toX:a,toY:l,fromPosition:h,toPosition:b});let S="";const w={sourceX:y,sourceY:C,sourcePosition:h,targetX:a,targetY:l,targetPosition:b};return r===$t.Bezier?[S]=yc(w):r===$t.Step?[S]=vo({...w,borderRadius:0}):r===$t.SmoothStep?[S]=vo(w):r===$t.SimpleBezier?[S]=gc(w):S=`M${y},${C} ${a},${l}`,g("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})};jc.displayName="ConnectionLine";const bw=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,width:e.width,height:e.height});function xw({containerStyle:e,style:t,type:n,component:r}){const{nodeId:i,handleType:o,nodesConnectable:s,width:a,height:l}=Ce(bw,We);return!(i&&o&&a&&s)?null:g("svg",{style:e,width:a,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:g("g",{className:"react-flow__connection",children:g(jc,{nodeId:i,handleType:o,style:t,type:n,CustomComponent:r})})})}const Yc=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:C,connectionLineType:h,connectionLineStyle:b,connectionLineComponent:S,connectionLineContainerStyle:w,selectionKeyCode:_,selectionOnDrag:M,selectionMode:N,multiSelectionKeyCode:I,panActivationKeyCode:k,zoomActivationKeyCode:B,deleteKeyCode:H,onlyRenderVisibleElements:O,elementsSelectable:W,selectNodesOnDrag:x,defaultViewport:R,translateExtent:T,minZoom:E,maxZoom:P,preventScrolling:$,defaultMarkerColor:D,zoomOnScroll:V,zoomOnPinch:X,panOnScroll:Z,panOnScrollSpeed:j,panOnScrollMode:ne,zoomOnDoubleClick:fe,panOnDrag:G,onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:ce,onPaneMouseLeave:be,onPaneScroll:ve,onPaneContextMenu:ue,onEdgeUpdate:xe,onEdgeContextMenu:L,onEdgeMouseEnter:ae,onEdgeMouseMove:he,onEdgeMouseLeave:A,edgeUpdaterRadius:F,onEdgeUpdateStart:z,onEdgeUpdateEnd:q,noDragClassName:J,noWheelClassName:pe,noPanClassName:oe,elevateEdgesOnSelect:ee,disableKeyboardA11y:se,nodeOrigin:ge,nodeExtent:Ee,rfId:ke})=>(vw(o),g(tw,{onPaneClick:re,onPaneMouseEnter:de,onPaneMouseMove:ce,onPaneMouseLeave:be,onPaneContextMenu:ue,onPaneScroll:ve,deleteKeyCode:H,selectionKeyCode:_,selectionOnDrag:M,selectionMode:N,onSelectionStart:y,onSelectionEnd:C,multiSelectionKeyCode:I,panActivationKeyCode:k,zoomActivationKeyCode:B,elementsSelectable:W,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:V,zoomOnPinch:X,zoomOnDoubleClick:fe,panOnScroll:Z,panOnScrollSpeed:j,panOnScrollMode:ne,panOnDrag:G,defaultViewport:R,translateExtent:T,minZoom:E,maxZoom:P,onSelectionContextMenu:v,preventScrolling:$,noDragClassName:J,noWheelClassName:pe,noPanClassName:oe,disableKeyboardA11y:se,children:Y(yw,{children:[g(mw,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:xe,onlyRenderVisibleElements:O,onEdgeContextMenu:L,onEdgeMouseEnter:ae,onEdgeMouseMove:he,onEdgeMouseLeave:A,onEdgeUpdateStart:z,onEdgeUpdateEnd:q,edgeUpdaterRadius:F,defaultMarkerColor:D,noPanClassName:oe,elevateEdgesOnSelect:!!ee,disableKeyboardA11y:se,rfId:ke,children:g(xw,{style:b,type:h,component:S,containerStyle:w})}),g("div",{className:"react-flow__edgelabel-renderer"}),g(iw,{nodeTypes:e,onNodeClick:s,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,selectNodesOnDrag:x,onlyRenderVisibleElements:O,noPanClassName:oe,noDragClassName:J,disableKeyboardA11y:se,nodeOrigin:ge,nodeExtent:Ee,rfId:ke})]})}));Yc.displayName="GraphView";var Ew=m.memo(Yc);const So=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Vn={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:So,nodeExtent:So,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:on.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Q0},Sw=()=>nm((e,t)=>({...Vn,setNodes:n=>{const{nodeInternals:r,nodeOrigin:i,elevateNodesOnSelect:o}=t();e({nodeInternals:Ui(n,r,i,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",s=i?Ui(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:l,nodeOrigin:u}=t(),c=l==null?void 0:l.querySelector(".react-flow__viewport");if(!c)return;const f=window.getComputedStyle(c),{m22:d}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((y,C)=>{const h=i.get(C.id);if(h){const b=Wo(C.nodeElement);!!(b.width&&b.height&&(h.width!==b.width||h.height!==b.height||C.forceUpdate))&&(i.set(h.id,{...h,[$e]:{...h[$e],handleBounds:{source:ba(".source",C.nodeElement,d,u),target:ba(".target",C.nodeElement,d,u)}},...b}),y.push({id:h.id,type:"dimensions",dimensions:b}))}return y},[]);Lc(i,u);const v=s||o&&!s&&zc(t,{initial:!0,...a});e({nodeInternals:new Map(i),fitViewOnInitDone:v}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,i=!1)=>{const{triggerNodeChanges:o}=t(),s=n.map(a=>{const l={id:a.id,type:"position",dragging:i};return r&&(l.positionAbsolute=a.positionAbsolute,l.position=a.position),l});o(s)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:i,hasDefaultNodes:o,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:l}=t();if(n!=null&&n.length){if(o){const u=Qo(n,a()),c=Ui(u,i,s,l);e({nodeInternals:c})}r==null||r(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(l=>At(l,!0)):(s=mn(o(),n),a=mn(i,[])),Tr({changedNodes:s,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,getNodes:o}=t();let s,a=null;r?s=n.map(l=>At(l,!0)):(s=mn(i,n),a=mn(o(),[])),Tr({changedNodes:a,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:i,getNodes:o}=t(),s=n||o(),a=r||i,l=s.map(c=>(c.selected=!1,At(c.id,!1))),u=a.map(c=>At(c.id,!1));Tr({changedNodes:l,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{var r;(r=t().d3Zoom)==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=t(),o=r().filter(a=>a.selected).map(a=>At(a.id,!1)),s=n.filter(a=>a.selected).map(a=>At(a.id,!1));Tr({changedNodes:o,changedEdges:s,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Xo(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:i,height:o,d3Zoom:s,d3Selection:a,translateExtent:l}=t();if(!s||!a||!n.x&&!n.y)return;const u=Mt.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),c=[[0,0],[i,o]],f=s==null?void 0:s.constrain()(u,c,l);s.transform(a,f)},cancelConnection:()=>e({connectionNodeId:Vn.connectionNodeId,connectionHandleId:Vn.connectionHandleId,connectionHandleType:Vn.connectionHandleType}),reset:()=>e({...Vn})})),Kc=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=Sw()),g(j0,{value:t.current,children:e})};Kc.displayName="ReactFlowProvider";const qc=({children:e})=>m.useContext(yi)?g(ye,{children:e}):g(Kc,{children:e});qc.displayName="ReactFlowWrapper";function Ma(e,t){return m.useRef(null),m.useMemo(()=>t(e),[e])}const _w={input:Nc,default:xo,output:Pc,group:Jo},Cw={default:ti,straight:Ko,step:Yo,smoothstep:vi,simplebezier:jo},Mw=[0,0],Nw=[15,15],Tw={x:0,y:0,zoom:1},Pw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Gc=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=_w,edgeTypes:s=Cw,onNodeClick:a,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:C,onClickConnectEnd:h,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:M,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:k,onNodesDelete:B,onEdgesDelete:H,onSelectionChange:O,onSelectionDragStart:W,onSelectionDrag:x,onSelectionDragStop:R,onSelectionContextMenu:T,onSelectionStart:E,onSelectionEnd:P,connectionMode:$=on.Strict,connectionLineType:D=$t.Bezier,connectionLineStyle:V,connectionLineComponent:X,connectionLineContainerStyle:Z,deleteKeyCode:j="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:fe=!1,selectionMode:G=cr.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:de="Meta",zoomActivationKeyCode:ce="Meta",snapToGrid:be=!1,snapGrid:ve=Nw,onlyRenderVisibleElements:ue=!1,selectNodesOnDrag:xe=!0,nodesDraggable:L,nodesConnectable:ae,nodesFocusable:he,nodeOrigin:A=Mw,edgesFocusable:F,elementsSelectable:z,defaultViewport:q=Tw,minZoom:J=.5,maxZoom:pe=2,translateExtent:oe=So,preventScrolling:ee=!0,nodeExtent:se,defaultMarkerColor:ge="#b1b1b7",zoomOnScroll:Ee=!0,zoomOnPinch:ke=!0,panOnScroll:Se=!1,panOnScrollSpeed:Te=.5,panOnScrollMode:Ye=xn.Free,zoomOnDoubleClick:Ze=!0,panOnDrag:Le=!0,onPaneClick:Pt,onPaneMouseEnter:Me,onPaneMouseMove:Ne,onPaneMouseLeave:Qe,onPaneScroll:Vt,onPaneContextMenu:gt,children:bi,onEdgeUpdate:xi,onEdgeContextMenu:Ke,onEdgeDoubleClick:at,onEdgeMouseEnter:yr,onEdgeMouseMove:Ei,onEdgeMouseLeave:uu,onEdgeUpdateStart:du,onEdgeUpdateEnd:fu,edgeUpdaterRadius:hu=10,onNodesChange:pu,onEdgesChange:mu,noDragClassName:gu="nodrag",noWheelClassName:yu="nowheel",noPanClassName:ts="nopan",fitView:vu=!1,fitViewOptions:wu,connectOnClick:bu=!0,attributionPosition:xu,proOptions:Eu,defaultEdgeOptions:Su,elevateNodesOnSelect:_u=!0,elevateEdgesOnSelect:Cu=!1,disableKeyboardA11y:ns=!1,autoPanOnConnect:Mu=!0,autoPanOnNodeDrag:Nu=!0,connectionRadius:Tu=20,onError:Pu,style:Ru,id:rs,...Au},$u)=>{const Iu=Ma(o,Ov),Ou=Ma(s,Pv),Si=rs||"1";return g("div",{...Au,style:{...Ru,...Pw},ref:$u,className:He(["react-flow",i]),"data-testid":"rf__wrapper",id:rs,children:Y(qc,{children:[g(Ew,{onInit:u,onMove:c,onMoveStart:f,onMoveEnd:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:S,onNodeMouseLeave:w,onNodeContextMenu:_,onNodeDoubleClick:M,nodeTypes:Iu,edgeTypes:Ou,connectionLineType:D,connectionLineStyle:V,connectionLineComponent:X,connectionLineContainerStyle:Z,selectionKeyCode:ne,selectionOnDrag:fe,selectionMode:G,deleteKeyCode:j,multiSelectionKeyCode:de,panActivationKeyCode:re,zoomActivationKeyCode:ce,onlyRenderVisibleElements:ue,selectNodesOnDrag:xe,defaultViewport:q,translateExtent:oe,minZoom:J,maxZoom:pe,preventScrolling:ee,zoomOnScroll:Ee,zoomOnPinch:ke,zoomOnDoubleClick:Ze,panOnScroll:Se,panOnScrollSpeed:Te,panOnScrollMode:Ye,panOnDrag:Le,onPaneClick:Pt,onPaneMouseEnter:Me,onPaneMouseMove:Ne,onPaneMouseLeave:Qe,onPaneScroll:Vt,onPaneContextMenu:gt,onSelectionContextMenu:T,onSelectionStart:E,onSelectionEnd:P,onEdgeUpdate:xi,onEdgeContextMenu:Ke,onEdgeDoubleClick:at,onEdgeMouseEnter:yr,onEdgeMouseMove:Ei,onEdgeMouseLeave:uu,onEdgeUpdateStart:du,onEdgeUpdateEnd:fu,edgeUpdaterRadius:hu,defaultMarkerColor:ge,noDragClassName:gu,noWheelClassName:yu,noPanClassName:ts,elevateEdgesOnSelect:Cu,rfId:Si,disableKeyboardA11y:ns,nodeOrigin:A,nodeExtent:se}),g(xv,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:v,onConnectEnd:y,onClickConnectStart:C,onClickConnectEnd:h,nodesDraggable:L,nodesConnectable:ae,nodesFocusable:he,edgesFocusable:F,elementsSelectable:z,elevateNodesOnSelect:_u,minZoom:J,maxZoom:pe,nodeExtent:se,onNodesChange:pu,onEdgesChange:mu,snapToGrid:be,snapGrid:ve,connectionMode:$,translateExtent:oe,connectOnClick:bu,defaultEdgeOptions:Su,fitView:vu,fitViewOptions:wu,onNodesDelete:B,onEdgesDelete:H,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:k,onSelectionDrag:x,onSelectionDragStart:W,onSelectionDragStop:R,noPanClassName:ts,nodeOrigin:A,rfId:Si,autoPanOnConnect:Mu,autoPanOnNodeDrag:Nu,onError:Pu,connectionRadius:Tu}),g(wv,{onSelectionChange:O}),bi,g(K0,{proOptions:Eu,position:xu}),g(Mv,{rfId:Si,disableKeyboardA11y:ns})]})})});Gc.displayName="ReactFlow";function Rw(){const e=Ie();return m.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),i=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${t}"]`);i&&requestAnimationFrame(()=>r([{id:t,nodeElement:i,forceUpdate:!0}]))},[])}function Jc(e){return t=>{const[n,r]=m.useState(t),i=m.useCallback(o=>r(s=>e(o,s)),[]);return[n,r,i]}}const Aw=Jc(Qo),$w=Jc(qv),Zc=({id:e,x:t,y:n,width:r,height:i,style:o,color:s,strokeColor:a,strokeWidth:l,className:u,borderRadius:c,shapeRendering:f,onClick:d})=>{const{background:p,backgroundColor:v}=o||{},y=s||p||v;return g("rect",{className:He(["react-flow__minimap-node",u]),x:t,y:n,rx:c,ry:c,width:r,height:i,fill:y,stroke:a,strokeWidth:l,shapeRendering:f,onClick:d?C=>d(C,e):void 0})};Zc.displayName="MiniMapNode";var Iw=m.memo(Zc);const Ow=200,Dw=150,Fw=e=>{const t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?J0(Go(t,e.nodeOrigin),n):n,rfId:e.rfId,nodeOrigin:e.nodeOrigin}},ji=e=>e instanceof Function?e:()=>e,kw="react-flow__minimap-desc";function Qc({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:s=2,maskColor:a="rgb(240, 240, 240, 0.6)",maskStrokeColor:l="none",maskStrokeWidth:u=1,position:c="bottom-right",onClick:f,onNodeClick:d,pannable:p=!1,zoomable:v=!1,ariaLabel:y="React Flow mini map"}){const C=Ie(),h=m.useRef(null),{boundingRect:b,viewBB:S,nodes:w,rfId:_,nodeOrigin:M}=Ce(Fw,We),N=(e==null?void 0:e.width)??Ow,I=(e==null?void 0:e.height)??Dw,k=ji(r),B=ji(n),H=ji(i),O=b.width/N,W=b.height/I,x=Math.max(O,W),R=x*N,T=x*I,E=5*x,P=b.x-(R-b.width)/2-E,$=b.y-(T-b.height)/2-E,D=R+E*2,V=T+E*2,X=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",Z=`${kw}-${_}`,j=m.useRef(0);j.current=x,m.useEffect(()=>{if(h.current){const G=tt(h.current),re=be=>{const{transform:ve,d3Selection:ue,d3Zoom:xe}=C.getState();if(be.sourceEvent.type!=="wheel"||!ue||!xe)return;const L=-be.sourceEvent.deltaY*(be.sourceEvent.deltaMode===1?.05:be.sourceEvent.deltaMode?1:.002)*10,ae=ve[2]*Math.pow(2,L);xe.scaleTo(ue,ae)},de=be=>{const{transform:ve,d3Selection:ue,d3Zoom:xe,translateExtent:L,width:ae,height:he}=C.getState();if(be.sourceEvent.type!=="mousemove"||!ue||!xe)return;const A={x:ve[0]-be.sourceEvent.movementX*j.current*Math.max(1,ve[2]),y:ve[1]-be.sourceEvent.movementY*j.current*Math.max(1,ve[2])},F=[[0,0],[ae,he]],z=Mt.translate(A.x,A.y).scale(ve[2]),q=xe.constrain()(z,F,L);xe.transform(ue,q)},ce=sc().on("zoom",p?de:null).on("zoom.wheel",v?re:null);return G.call(ce),()=>{G.on("zoom",null)}}},[p,v]);const ne=f?G=>{const re=lt(G);f(G,{x:re[0],y:re[1]})}:void 0,fe=d?(G,re)=>{const de=C.getState().nodeInternals.get(re);d(G,de)}:void 0;return g(Uo,{position:c,style:e,className:He(["react-flow__minimap",t]),children:Y("svg",{width:N,height:I,viewBox:`${P} ${$} ${D} ${V}`,role:"img","aria-labelledby":Z,ref:h,onClick:ne,children:[y&&g("title",{id:Z,children:y}),w.map(G=>{const{x:re,y:de}=en(G,M).positionAbsolute;return g(Iw,{x:re,y:de,width:G.width,height:G.height,style:G.style,className:H(G),color:k(G),borderRadius:o,strokeColor:B(G),strokeWidth:s,shapeRendering:X,onClick:fe,id:G.id},G.id)}),g("path",{className:"react-flow__minimap-mask",d:`M${P-E},${$-E}h${D+E*2}v${V+E*2}h${-D-E*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fill:a,fillRule:"evenodd",stroke:l,strokeWidth:u,pointerEvents:"none"})]})})}Qc.displayName="MiniMap";var Lw=m.memo(Qc);function zw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Bw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g("path",{d:"M0 0h32v4.2H0z"})})}function Hw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Vw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Uw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const Yn=({children:e,className:t,...n})=>g("button",{type:"button",className:He(["react-flow__controls-button",t]),...n,children:e});Yn.displayName="ControlButton";const Ww=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,eu=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:s,onFitView:a,onInteractiveChange:l,className:u,children:c,position:f="bottom-left"})=>{const d=Ie(),[p,v]=m.useState(!1),y=Ce(Ww),{zoomIn:C,zoomOut:h,fitView:b}=wi();if(m.useEffect(()=>{v(!0)},[]),!p)return null;const S=()=>{C(),o==null||o()},w=()=>{h(),s==null||s()},_=()=>{b(i),a==null||a()},M=()=>{d.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return Y(Uo,{className:He(["react-flow__controls",u]),position:f,style:e,children:[t&&Y(ye,{children:[g(Yn,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:g(zw,{})}),g(Yn,{onClick:w,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:g(Bw,{})})]}),n&&g(Yn,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view",children:g(Hw,{})}),r&&g(Yn,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity",children:y?g(Uw,{}):g(Vw,{})}),c]})};eu.displayName="Controls";var Xw=m.memo(eu),ot;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(ot||(ot={}));function jw({color:e,dimensions:t,lineWidth:n}){return g("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Yw({color:e,radius:t}){return g("circle",{cx:t,cy:t,r:t,fill:e})}const Kw={[ot.Dots]:"#91919a",[ot.Lines]:"#eee",[ot.Cross]:"#e2e2e2"},qw={[ot.Dots]:1,[ot.Lines]:1,[ot.Cross]:6},Gw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function tu({variant:e=ot.Dots,gap:t=20,size:n,lineWidth:r=1,color:i,style:o,className:s}){const a=m.useRef(null),{transform:l,patternId:u}=Ce(Gw,We),c=i||Kw[e],f=n||qw[e],d=e===ot.Dots,p=e===ot.Cross,v=Array.isArray(t)?t:[t,t],y=[v[0]*l[2]||1,v[1]*l[2]||1],C=f*l[2],h=p?[C,C]:y,b=d?[C/2,C/2]:[h[0]/2,h[1]/2];return Y("svg",{className:He(["react-flow__background",s]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:a,children:[g("pattern",{id:u,x:l[0]%y[0],y:l[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`,children:d?g(Yw,{color:c,radius:C/2}):g(jw,{dimensions:h,color:c,lineWidth:r})}),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${u})`})]})}tu.displayName="Background";var Jw=m.memo(tu);const gn=Oa(),_o=e=>`${e.sourceEntity}_${e.name}`,Zw=e=>`${e.targetEntity}_${e.targetName}`,es=e=>`entity_er_node_id_${e.id}`,Co=(e,t)=>`${es(e)}_${t.id}`,nu=e=>e.type===ui.Lookup&&e.relationType===Gt.ManyToOne,ru=e=>e.type===ui.Lookup?"green":"red",Qw=22,Gn=18,eb=40,tb=({entity:e,relation:t,passive:n})=>{const r=wi(),i=Rw(),[o,s]=m.useState(Number.MAX_SAFE_INTEGER);return m.useEffect(()=>{var a,l;if(n&&nu(t))s(eb/2-Gn/2);else{const u=(a=document.getElementById(es(e)))==null?void 0:a.getClientRects()[0],c=(l=document.getElementById(Co(e,t)))==null?void 0:l.getClientRects()[0],f=((c==null?void 0:c.top)??0)-((u==null?void 0:u.top)??0);s(f)}setTimeout(()=>i(e.name))},[e,n,r,t,i]),{top:o,left:n?-Gn:"auto",right:n?"auto":-Gn}},nb=({relation:e,passive:t})=>{const[n,r]=m.useState("relation-one-many");return m.useEffect(()=>{if(t)switch(e.relationType){case Gt.ManyToMany:r("relation-one-many");break;case Gt.ManyToOne:case Wn.ManyToOne:case Wn.OneToOne:r("relation-one-one");break}else switch(e.relationType){case Gt.ManyToMany:case Gt.ManyToOne:case Wn.ManyToOne:r("relation-one-many");break;case Wn.OneToOne:r("relation-one-one");break}},[t,e.relationType]),{icon:n,color:ru(e)}},Na=({data:{entity:e},relation:t,passive:n})=>{const r=n?Zw(t.meta):_o(t.meta),{top:i,left:o,right:s}=tb({entity:e.meta,relation:t.meta,passive:n}),{icon:a,color:l}=nb({relation:t.meta,passive:n});return g(ur,{className:rb.wrapper,id:r,type:n?"target":"source",position:n?K.Left:K.Right,style:{left:o,right:s,top:i+Qw/2},onConnect:u=>console.log("handle onConnect",u),isConnectable:!1,children:g("span",{style:{color:l,transform:n?"rotateY(0deg)":"rotateY(180deg)"},children:g(Kd,{type:a})})},t.meta.id)},rb={wrapper:ie("height:",Gn,"px!important;width:",Gn,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},ib=e=>{const{data:{entity:t,passiveEntityRelations:n}}=e;return Y(ye,{children:[t.entityRelations.map(r=>g(Na,{...e,passive:!1,relation:r},r.meta.id)),n.map(r=>g(Na,{...e,passive:!0,relation:r},r.meta.id))]})},ob=({data:{entity:e}})=>Y("div",{className:Yt(ft.section),children:[g(Xe.Title,{className:Yt(ft.sectionTitle),level:5,children:"字段"}),Q.isEmpty(e.entityFields)?g(gd,{description:"暂无字段"}):e.entityFields.map(t=>Y("div",{className:Yt(ft.sectionItem),children:[Y(Zn,{size:"small",children:[Y(Xe.Text,{children:[t.meta.description,"(",t.meta.name,")"]}),t.meta.required&&g(Xe.Text,{type:"danger",children:"*"})]}),g(Xe.Text,{children:t.meta.type})]},t.meta.name))]}),sb=({data:{entity:e,passiveEntityRelations:t}})=>{const n=t.filter(i=>!nu(i.meta)),r=[...e.entityRelations,...n];return Q.isEmpty(r)?null:Y("div",{className:Yt(ft.section),children:[g(Xe.Title,{className:Yt(ft.sectionTitle),level:5,children:"关系"}),e.entityRelations.map(i=>Y("div",{className:Yt(ft.sectionItem),id:Co(e.meta,i.meta),children:[g(Zn,{size:"small",children:Y(Xe.Text,{children:[i.meta.description,"(",i.meta.name,")"]})}),g(Xe.Text,{children:i.meta.type})]},i.meta.name)),n.map(i=>Y("div",{className:Yt(ft.sectionItem),id:Co(e.meta,i.meta),children:[g(Zn,{size:"small",children:Y(Xe.Text,{disabled:!0,children:[i.meta.targetDescription,"(",i.meta.targetName,")"]})}),g(Xe.Text,{disabled:!0,children:i.meta.type})]},i.meta.targetName))]})},ab=e=>{const{data:{entity:t}}=e,n=Ba();return Y(ye,{children:[g(ib,{...e}),Y("div",{id:es(t.meta),style:{"--header-bg-color":n.colorPrimary},className:ft.wrapper,children:[g("div",{className:ft.header,children:g(Xe.Title,{level:5,children:t.meta.title})}),Y("div",{className:ft.body,children:[g(ob,{...e}),g(sb,{...e})]}),Y(ri,{className:ft.footer,children:[g(Jn,{span:12,children:g(nt,{block:!0,type:"link",onClick:()=>gn.emit("onClickEditEntity",t.meta.id),children:"编辑"})}),g(Jn,{span:12,children:g(nt,{block:!0,type:"text",danger:!0,onClick:()=>gn.emit("onDelete",t.meta.id),children:"删除"})})]})]})]})},ft={wrapper:ie({name:"b271j2",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:1px solid rgba(0,0,0,.1)"}),header:ie({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:ie({name:"1jb4mpp",styles:"padding:4px 0"}),section:ie("",""),sectionTitle:ie({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:ie({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:ie({name:"3rejxs",styles:"border-top:1px solid rgba(0,0,0,.1)"})},lb={EntityNode:m.memo(ab)},cb=()=>{const{app:e}=ht(),t=e.entityRelationsByTargetEntityNameMap,[n,r,i]=Aw(e.entities.map(s=>({id:s.meta.name,type:"EntityNode",data:{entity:s,passiveEntityRelations:t[s.meta.name]||[]},position:s.meta.position}))),o=m.useCallback(s=>{i(s);const a=Qo(s,n),l=Q.keyBy(s.filter(c=>c.type==="position"),"id"),u=Q.keyBy(a,c=>c.id);it(()=>{e.entities.forEach(c=>{var f;Reflect.has(l,c.meta.name)&&c.updateMeta({...c.meta,position:((f=u[c.meta.name])==null?void 0:f.positionAbsolute)??c.meta.position})})})},[e,n,i]);return m.useEffect(()=>{r(s=>{const a=Q.keyBy(s,l=>l.id);return e.entities.map(l=>a[l.meta.name]?{...a[l.meta.name],data:{entity:l,passiveEntityRelations:t[l.meta.name]||[]},position:l.meta.position}:{id:l.meta.name,type:"EntityNode",data:{entity:l,passiveEntityRelations:t[l.meta.name]||[]},position:l.meta.position})})},[e.entities,t,r]),{nodes:n,onNodesChange:o}},ub=({onClickEditEntity:e})=>{const t=Ba(),{app:n,appManager:r}=ht(),i=[...r.entityRelationMap.values()],{nodes:o,onNodesChange:s}=cb(),[a,l,u]=$w(i.map(f=>({id:f.meta.id,source:f.meta.sourceEntity,target:f.meta.targetEntity,sourceHandle:_o(f.meta),targetHandle:_o(f.meta),style:{stroke:ru(f.meta),zIndex:999999}}))),c=m.useCallback(f=>l(d=>vc({...f,animated:!0,style:{stroke:"green"}},d)),[l]);return m.useEffect(()=>(gn.on("onDelete",n.deleteEntity),gn.on("onClickEditEntity",e),()=>{gn.off("onDelete",n.deleteEntity),gn.off("onClickEditEntity",e)}),[n.deleteEntity,e]),g("div",{className:fb.wrapper,children:Y(Gc,{nodes:o,edges:a,onNodesChange:s,onEdgesChange:u,onConnect:c,style:{background:"#fff"},nodeTypes:lb,connectionLineStyle:{stroke:t.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[g(Jw,{variant:ot.Cross,gap:10,size:2}),g(Xw,{}),g(Lw,{pannable:!0,zoomable:!0})]})})},db=zt(ub),fb={wrapper:ie({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},hb=({onClickEditEntity:e})=>{const{app:t}=ht(),n=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(r,i)=>Y(Zn,{size:"small",children:[g(nt,{size:"small",type:"link",onClick:()=>e(i.id),children:"编辑"}),g(nt,{size:"small",danger:!0,type:"text",onClick:()=>t.deleteEntity(i.id),children:"删除"})]})}];return g("div",{className:mb.wrapper,children:g(Ha,{rowKey:"id",size:"small",columns:n,dataSource:t.entities.map(r=>r.meta)})})},pb=zt(hb),mb={wrapper:ie("","")},iu=({onOk:e,onCancel:t,open:n,mode:r,form:i})=>g(ye,{children:g(yd,{title:r==="create"?"创建数据模型":"编辑数据模型",onCancel:()=>{t(),i.resetFields()},onOk:async()=>{await i.validateFields(),e(i.getFieldsValue()),i.resetFields()},open:n,destroyOnClose:!0,children:Y(jt,{form:i,labelCol:{style:{width:"50px"}},children:[g(jt.Item,{label:"ID",name:"id",hidden:!0,children:g(Un,{})}),g(jt.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入数据模型名称"}],children:g(Un,{})}),g(jt.Item,{label:"标识",name:"name",rules:[{required:!0,message:"请输入数据模型标识"},{pattern:/^[a-zA-Z]\w+$/,message:"只能由英文、数字、下划线组成，且必须英文开头"}],children:g(Un,{disabled:r==="edit"})}),g(jt.Item,{label:"描述",name:"description",children:g(Un,{})})]})})}),ou=De(),su=({children:e})=>{const[t,n]=m.useState(null);return za(()=>{setTimeout(()=>{n(document.getElementById(ou))})}),t?Fa.createPortal(e,t):null},gb=()=>g("span",{id:ou}),yb=({entity:e,onEditEntity:t})=>Y(ye,{children:[g(su,{children:g(nt,{type:"link",onClick:()=>t(e),children:"编辑"})}),g("div",{className:wb.wrapper,children:Y(qi,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[g(Et,{label:"名称",fieldProps:{value:e.title}}),g(Et,{label:"标识",fieldProps:{value:e.name}}),g(Et,{label:"描述",fieldProps:{value:e.description}})]})})]}),vb=zt(yb),wb={wrapper:ie({name:"10rtstj",styles:"padding:16px"})},bb=e=>{switch(e){case U.Text:case U.LongText:return Y(ye,{children:[g(On,{name:["config","max"],label:"最大长度",max:255,fieldProps:{precision:0}}),g(On,{name:["config","min"],label:"最小长度",min:0,fieldProps:{precision:0}})]});case U.Enum:return Y(ye,{children:[g(yl,{name:["config","enumCode"],label:"枚举类型",placeholder:"请选择枚举类型",options:au,allowClear:!1,rules:[{required:!0,message:"请选择枚举类型"}]}),g(Qi,{name:["config","multiple"],label:"多选"})]});case U.Number:return Y(ye,{children:[g(On,{name:["config","max"],label:"最大值",max:255,fieldProps:{precision:0}}),g(On,{name:["config","min"],label:"最小值",min:0,fieldProps:{precision:0}}),g(On,{name:["config","precision"],label:"小数位数",min:0,fieldProps:{precision:0}})]});case U.AutoNumber:return g(ye,{children:g(Et,{name:["config","format"],label:"显示格式",placeholder:"请输入显示格式"})});case U.Image:return g(ye,{children:g(Qi,{name:["config","multiple"],label:"多选"})});case U.PhoneNumber:case U.URL:case U.Email:case U.Date:case U.DateTime:default:return null}},au=Object.values(U).map(e=>({label:Pe.getEntityFieldTypeLabel(e),value:e})),xb=(e,t)=>{const{app:n,appManager:r}=ht(),[i]=qi.useForm(),o=qi.useWatch("type",i),[s,a]=m.useState(""),[l,u]=m.useState(""),[c,f]=m.useState("detail"),[d,p]=m.useState(!1);return m.useImperativeHandle(t,()=>({create:({entityId:v})=>{a(v),u(""),f("create"),p(!0)},edit:({entityId:v,fieldId:y})=>{a(v),u(y),f("edit"),i.setFieldsValue(r.entityFieldMap.get(y).meta),p(!0)},showDetail:({entityId:v,fieldId:y})=>{a(v),u(y),f("detail"),i.setFieldsValue(r.entityFieldMap.get(y).meta),p(!0)}}),[r.entityFieldMap,i]),Y(vd,{readonly:c==="detail",title:"新建字段",width:500,form:i,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:d,onOpenChange:p,onFinish:async v=>{switch(c){case"create":{const y=n.entityMap[s];tn.create({...v,id:De()},y);break}case"edit":{n.entityMap[s].entityFields.forEach(C=>{C.meta.id===l&&C.updateMeta({...C.meta,...v})});break}}return!0},children:[g(Et,{hidden:!0,name:"id",label:"字段id"}),g(yl,{name:"type",label:"字段类型",placeholder:"请选择字段类型",options:au,allowClear:!1,rules:[{required:!0,message:"请选择字段类型"}]}),g(Et,{name:"title",label:"字段名称",placeholder:"请输入字段类型",rules:[{required:!0,message:"请输入字段名称"}]}),g(Et,{name:"name",label:"字段标识",placeholder:"请输入字段标识",rules:[{required:!0,message:"请输入字段标识"}]}),g(Et,{name:"description",label:"字段描述",placeholder:"请输入字段描述"}),o!==U.AutoNumber&&g(Qi,{name:"required",label:"必填"}),bb(o)]})},Eb=m.forwardRef(xb),Sb=({entityId:e})=>{const t=m.useRef(null),{app:n}=ht(),r=n.entityMap[e],i=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,s)=>Y(Zn,{size:"small",children:[g(nt,{size:"small",type:"link",onClick:()=>{var a;(a=t.current)==null||a.edit({entityId:r.meta.id,fieldId:s.id})},children:"编辑"}),g(nt,{size:"small",type:"link",onClick:()=>{var a;(a=t.current)==null||a.showDetail({entityId:r.meta.id,fieldId:s.id})},children:"详情"}),g(nt,{size:"small",danger:!0,type:"text",onClick:()=>{r.deleteEntityField(s.id)},children:"删除"})]})}];return Y(ye,{children:[g(Eb,{ref:t}),g(su,{children:g(nt,{type:"link",onClick:()=>{var o;(o=t.current)==null||o.create({entityId:r.meta.id})},children:"添加字段"})}),g("div",{children:g(Ha,{size:"small",dataSource:r.entityFields.map(o=>o.meta),rowKey:"id",columns:i,pagination:!1})})]})},Yi=zt(Sb),lu=()=>{const[e,{setFalse:t,setTrue:n}]=mh(!1),[r]=jt.useForm(),{app:i}=ht();return{setTrue:n,setFalse:t,onSubmitEntity:s=>{if(s.id)i.entityMap[s.id].updateMeta(s);else{const a=Math.max(...i.entities.map(l=>l.meta.position.x));Pe.create({...s,id:De(),position:{x:a+400,y:100}},i)}t()},form:r,open:e}},_b=[{key:"List",tab:"列表"},{key:"ER",tab:"ER图"}],Cb=()=>{const[e,t]=Al({activeTabKey:"List"}),[n,r]=m.useState("edit"),{open:i,setFalse:o,setTrue:s,onSubmitEntity:a,form:l}=lu(),u=Ht(),c=sn(),f=p=>{u(Sn(Ve.Entity,{entityId:p,appId:c.appId}))},d=()=>{r("create"),s()};return Y(ye,{children:[g(iu,{onOk:a,onCancel:o,open:i,mode:n,form:l}),g("div",{className:Ta.wrapper,children:g(Dr,{size:"small",tabProps:{size:"small"},className:Ta.card,title:g("span",{children:"数据模型"}),tabList:_b,tabBarExtraContent:g(nt,{type:"link",onClick:d,children:"添加模型"}),activeTabKey:e.activeTabKey,onTabChange:p=>t({activeTabKey:p}),children:e.activeTabKey==="List"?g(pb,{onClickEditEntity:f}):g(db,{onClickEditEntity:f})})})]})},Ta={wrapper:ie({name:"13udsys",styles:"height:100%"}),card:ie({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Mb=[{key:"Base",tab:"基础信息"},{key:"Field",tab:"字段和关系"},{key:"Method",tab:"方法"},{key:"View",tab:"视图"}],Nb=()=>{const[e,t]=Al({activeTabKey:"Base"}),{app:n}=ht(),{entityId:r}=sn(),i=n.entityMap[r],{open:o,setFalse:s,setTrue:a,onSubmitEntity:l,form:u}=lu(),c=f=>{switch(f){case"Base":return g(vb,{entity:i.meta,onEditEntity:()=>{u.setFieldsValue(i.meta),a()}});case"Field":return g(Yi,{entityId:i.meta.id});case"Method":return g(Yi,{entityId:i.meta.id});case"View":return g(Yi,{entityId:i.meta.id});default:return g("div",{children:"未知模块"})}};return Y(ye,{children:[g(ye,{children:g(iu,{onOk:l,onCancel:s,open:o,mode:"edit",form:u})}),g("div",{className:Pa.wrapper,children:g(Dr,{size:"small",tabProps:{size:"small"},title:`${i.meta.title}(${i.meta.name})`,tabList:Mb,tabBarExtraContent:g(gb,{}),className:Pa.card,activeTabKey:e.activeTabKey,onTabChange:f=>t({activeTabKey:f}),children:c(e.activeTabKey)})})]})},Tb=zt(Nb),Pa={wrapper:ie({name:"13udsys",styles:"height:100%"}),card:ie({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Pb=({file:e,children:t})=>g(wd,{value:e,children:g(bd,{children:g(xd,{backend:Ed,children:g(Sd,{children:t})})})}),cu=m.forwardRef(({onLoad:e,src:t},n)=>g("iframe",{ref:n,className:Rb.iframe,src:t,onLoad:e}));cu.displayName="SimulatorPC";const Rb={iframe:ie`
    height: 100%;
    width: 100%;
    border: none;
    display: block;
  `},Ab=()=>{const{pageId:e,appId:t}=sn(),{appManager:n}=ht(),r=n.pageMap.get(e),i=Ht();return m.useLayoutEffect(()=>{var s;const o=Q.head(n.app.pages);!r&&o&&i(Sn(Ve.PAGE,{appId:t,pageId:(s=o.meta)==null?void 0:s.id}),{replace:!0})},[t,n.app.pages,i,r]),g(ri,{justify:"center",align:"middle",className:Ra.page,children:g(Jn,{span:24,className:Ra.container,children:r&&g(_d.Provider,{value:Cd,children:g(Pb,{file:r,children:g(cu,{src:"/simulator/pc/index.html"})})})})})},$b=zt(Ab),Ra={page:ie({name:"13udsys",styles:"height:100%"}),container:ie({name:"13udsys",styles:"height:100%"})},Ib=()=>{const e=Ao([{path:Ve.APPS,element:g(Ls,{})},{path:Ve.APP,element:g(Lp,{}),children:[{path:Ve.PAGE,element:g($b,{})},{path:Ve.Entities,element:g(Cb,{})},{path:Ve.Entity,element:g(Tb,{})}]},{path:"/",element:g(Ls,{})}]);return g(ye,{children:e})},Ob=()=>g(m.Suspense,{fallback:g(Wd,{}),children:g(Md,{locale:Nd,children:g(Td,{children:g(dh,{children:g(Ib,{})})})})});Pd.createRoot(document.getElementById("root")).render(g(Fe.StrictMode,{children:g(Ob,{})}));
