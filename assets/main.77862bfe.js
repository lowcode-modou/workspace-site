import{c as et,_ as k,r as S,j as O,a as K,g as Zh,m as qh,K as cx,C as kn,b as Sn,o as Xl,A as Lh,d as dt,e as wc,f as q,h as gm,i as Om,k as Ul,l as ym,t as bm,S as hx,T as Qc,I as ux,H as fx,F as dx,n as px,p as mx,q as gx,s as dr,P as Ox,u as yx,v as of,R as Ms,w as Vl,x as ke,y as bx,z as F,B as xx,D as Cc,E as $c,G as Sx,J as xm,L as vx,M as wx,N as Qx,O as Sm,Q as Ds,U as Zl,V as ql,W as vm,X as wm,Y as Cx,Z as $x,$ as kx,a0 as Px,a1 as Tx,a2 as Ax,a3 as Rx,a4 as Ex,a5 as _x,a6 as Mx,a7 as Pn,a8 as Gt,a9 as We,aa as gt,ab as Qm,ac as Dx,ad as Cm,ae as pt,af as Nx,ag as Bn,ah as ht,ai as Bx,aj as $m,ak as Ix,al as wi,am as km,an as Ke,ao as Xx,ap as Pm,aq as Ux,ar as Vx,as as Zx,at as qx,au as Lx,av as Tm,aw as Gr,ax as Ks,ay as Ns,az as Qi,aA as zx,aB as hs,aC as Ii,aD as Am,aE as Wx,aF as Fo,aG as kc,aH as Nt,aI as jx,aJ as Rm,aK as Fx,aL as Gx,aM as Em,aN as Tn,aO as Hx,aP as Yx,aQ as zh,aR as _m,aS as Wh,aT as jh,aU as Fh,aV as Pc,aW as Kx,aX as Jx,aY as Gh,aZ as Hh,a_ as Bs,a$ as e1,b0 as t1,b1 as n1,b2 as i1,b3 as lf,b4 as r1,b5 as Js,b6 as qi,b7 as s1,b8 as o1,b9 as l1,ba as af,bb as wa,bc as Mm,bd as a1,be as c1,bf as h1,bg as u1,bh as f1,bi as d1,bj as p1}from"./client.928cd3fe.js";var m1=function(e){var t,i,r=e.prefixCls,s=e.className,o=e.style,l=e.size,a=e.shape,c=et((t={},k(t,r+"-lg",l==="large"),k(t,r+"-sm",l==="small"),t)),h=et((i={},k(i,r+"-circle",a==="circle"),k(i,r+"-square",a==="square"),k(i,r+"-round",a==="round"),i)),u=S.exports.useMemo(function(){return typeof l=="number"?{width:l,height:l,lineHeight:l+"px"}:{}},[l]);return O("span",{className:et(r,c,h,s),style:K(K({},u),o)})};const Ll=m1;var g1=new cx("ant-skeleton-loading",{"0%":{transform:"translateX(-37.5%)"},"100%":{transform:"translateX(37.5%)"}}),zl=function(e){return{height:e,lineHeight:e+"px"}},nr=function(e){return K({width:e},zl(e))},O1=function(e){return{position:"relative",zIndex:0,overflow:"hidden",background:"transparent","&::after":{position:"absolute",top:0,insetInlineEnd:"-150%",bottom:0,insetInlineStart:"-150%",background:e.skeletonLoadingBackground,animationName:g1,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite",content:'""'}}},Qa=function(e){return K({width:e*5,minWidth:e*5},zl(e))},y1=function(e){var t,i=e.skeletonAvatarCls,r=e.color,s=e.controlHeight,o=e.controlHeightLG,l=e.controlHeightSM;return t={},k(t,""+i,K({display:"inline-block",verticalAlign:"top",background:r},nr(s))),k(t,""+i+i+"-circle",{borderRadius:"50%"}),k(t,""+i+i+"-lg",K({},nr(o))),k(t,""+i+i+"-sm",K({},nr(l))),t},b1=function(e){var t,i=e.controlHeight,r=e.borderRadiusSM,s=e.skeletonInputCls,o=e.controlHeightLG,l=e.controlHeightSM,a=e.color;return t={},k(t,""+s,K({display:"inline-block",verticalAlign:"top",background:a,borderRadius:r},Qa(i))),k(t,s+"-lg",K({},Qa(o))),k(t,s+"-sm",K({},Qa(l))),t},cf=function(e){return K({width:e},zl(e))},x1=function(e){var t,i,r=e.skeletonImageCls,s=e.imageSizeBase,o=e.color,l=e.borderRadiusSM;return i={},k(i,""+r,K(K({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:o,borderRadius:l},cf(s*2)),(t={},k(t,r+"-path",{fill:"#bfbfbf"}),k(t,r+"-svg",K(K({},cf(s)),{maxWidth:s*4,maxHeight:s*4})),k(t,r+"-svg"+r+"-svg-circle",{borderRadius:"50%"}),t))),k(i,""+r+r+"-circle",{borderRadius:"50%"}),i},Ca=function(e,t,i){var r,s=e.skeletonButtonCls;return r={},k(r,""+i+s+"-circle",{width:t,minWidth:t,borderRadius:"50%"}),k(r,""+i+s+"-round",{borderRadius:t}),r},$a=function(e){return K({width:e*2,minWidth:e*2},zl(e))},S1=function(e){var t=e.borderRadiusSM,i=e.skeletonButtonCls,r=e.controlHeight,s=e.controlHeightLG,o=e.controlHeightSM,l=e.color;return K(K(K(K(K(k({},""+i,K({display:"inline-block",verticalAlign:"top",background:l,borderRadius:t,width:r*2,minWidth:r*2},$a(r))),Ca(e,r,i)),k({},i+"-lg",K({},$a(s)))),Ca(e,s,i+"-lg")),k({},i+"-sm",K({},$a(o)))),Ca(e,o,i+"-sm"))},v1=function(e){var t,i,r,s,o,l=e.componentCls,a=e.skeletonAvatarCls,c=e.skeletonTitleCls,h=e.skeletonParagraphCls,u=e.skeletonButtonCls,f=e.skeletonInputCls,d=e.skeletonImageCls,p=e.controlHeight,m=e.controlHeightLG,b=e.controlHeightSM,g=e.color,x=e.padding,w=e.marginSM,y=e.borderRadius,v=e.skeletonTitleHeight,C=e.skeletonBlockRadius,$=e.skeletonParagraphLineHeight,E=e.controlHeightXS,_=e.skeletonParagraphMarginTop;return o={},k(o,""+l,(r={display:"table",width:"100%"},k(r,l+"-header",(t={display:"table-cell",paddingInlineEnd:x,verticalAlign:"top"},k(t,""+a,K({display:"inline-block",verticalAlign:"top",background:g},nr(p))),k(t,a+"-circle",{borderRadius:"50%"}),k(t,a+"-lg",K({},nr(m))),k(t,a+"-sm",K({},nr(b))),t)),k(r,l+"-content",(i={display:"table-cell",width:"100%",verticalAlign:"top"},k(i,""+c,k({width:"100%",height:v,background:g,borderRadius:C},"+ "+h,{marginBlockStart:b})),k(i,""+h,{padding:0,"> li":{width:"100%",height:$,listStyle:"none",background:g,borderRadius:C,"+ li":{marginBlockStart:E}}}),k(i,h+"> li:last-child:not(:first-child):not(:nth-child(2))",{width:"61%"}),i)),k(r,"&-round "+l+"-content",k({},c+", "+h+" > li",{borderRadius:y})),r)),k(o,l+"-with-avatar "+l+"-content",k({},""+c,k({marginBlockStart:w},"+ "+h,{marginBlockStart:_}))),k(o,""+l+l+"-element",K(K(K(K({display:"inline-block",width:"auto"},S1(e)),y1(e)),b1(e)),x1(e))),k(o,""+l+l+"-block",(s={width:"100%"},k(s,""+u,{width:"100%"}),k(s,""+f,{width:"100%"}),s)),k(o,""+l+l+"-active",k({},`
        `+c+`,
        `+h+` > li,
        `+a+`,
        `+u+`,
        `+f+`,
        `+d+`
      `,K({},O1(e)))),o};const kr=Zh("Skeleton",function(n){var e=n.componentCls,t=qh(n,{skeletonAvatarCls:e+"-avatar",skeletonTitleCls:e+"-title",skeletonParagraphCls:e+"-paragraph",skeletonButtonCls:e+"-button",skeletonInputCls:e+"-input",skeletonImageCls:e+"-image",imageSizeBase:n.controlHeight*1.5,skeletonTitleHeight:n.controlHeight/2,skeletonBlockRadius:n.borderRadiusSM,skeletonParagraphLineHeight:n.controlHeight/2,skeletonParagraphMarginTop:n.marginLG+n.marginXXS,borderRadius:100,skeletonLoadingBackground:"linear-gradient(90deg, "+n.color+" 25%, "+n.colorGradientEnd+" 37%, "+n.color+" 63%)",skeletonLoadingMotionDuration:"1.4s"});return[v1(t)]},function(n){var e=n.colorFillContent,t=n.colorFill;return{color:e,colorGradientEnd:t}});var w1=function(e){var t=e.prefixCls,i=e.className,r=e.active,s=e.shape,o=s===void 0?"circle":s,l=e.size,a=l===void 0?"default":l,c=S.exports.useContext(kn),h=c.getPrefixCls,u=h("skeleton",t),f=kr(u),d=Sn(f,2),p=d[0],m=d[1],b=Xl(e,["prefixCls","className"]),g=et(u,u+"-element",k({},u+"-active",r),i,m);return p(O("div",{className:g,children:O(Ll,{prefixCls:u+"-avatar",shape:o,size:a,...b})}))};const Q1=w1;var C1=function(e){var t,i=e.prefixCls,r=e.className,s=e.active,o=e.block,l=o===void 0?!1:o,a=e.size,c=a===void 0?"default":a,h=S.exports.useContext(kn),u=h.getPrefixCls,f=u("skeleton",i),d=kr(f),p=Sn(d,2),m=p[0],b=p[1],g=Xl(e,["prefixCls"]),x=et(f,f+"-element",(t={},k(t,f+"-active",s),k(t,f+"-block",l),t),r,b);return m(O("div",{className:x,children:O(Ll,{prefixCls:f+"-button",size:c,...g})}))};const $1=C1;var k1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const P1=k1;var Dm=function(e,t){return O(Lh,{...dt(dt({},e),{},{ref:t,icon:P1})})};Dm.displayName="DotChartOutlined";const T1=S.exports.forwardRef(Dm);var A1=function(e){var t=e.prefixCls,i=e.className,r=e.style,s=e.active,o=e.children,l=S.exports.useContext(kn),a=l.getPrefixCls,c=a("skeleton",t),h=kr(c),u=Sn(h,2),f=u[0],d=u[1],p=et(c,c+"-element",k({},c+"-active",s),d,i),m=o!=null?o:O(T1,{});return f(O("div",{className:p,children:O("div",{className:et(c+"-image",i),style:r,children:m})}))};const R1=A1;var E1="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",_1=function(e){var t=e.prefixCls,i=e.className,r=e.style,s=e.active,o=S.exports.useContext(kn),l=o.getPrefixCls,a=l("skeleton",t),c=kr(a),h=Sn(c,2),u=h[0],f=h[1],d=et(a,a+"-element",k({},a+"-active",s),i,f);return u(O("div",{className:d,children:O("div",{className:et(a+"-image",i),style:r,children:O("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:a+"-image-svg",children:O("path",{d:E1,className:a+"-image-path"})})})}))};const M1=_1;var D1=function(e){var t,i=e.prefixCls,r=e.className,s=e.active,o=e.block,l=e.size,a=l===void 0?"default":l,c=S.exports.useContext(kn),h=c.getPrefixCls,u=h("skeleton",i),f=kr(u),d=Sn(f,2),p=d[0],m=d[1],b=Xl(e,["prefixCls"]),g=et(u,u+"-element",(t={},k(t,u+"-active",s),k(t,u+"-block",o),t),r,m);return p(O("div",{className:g,children:O(Ll,{prefixCls:u+"-input",size:a,...b})}))};const N1=D1;var B1=function(e){var t=function(c){var h=e.width,u=e.rows,f=u===void 0?2:u;if(Array.isArray(h))return h[c];if(f-1===c)return h},i=e.prefixCls,r=e.className,s=e.style,o=e.rows,l=wc(Array(o)).map(function(a,c){return O("li",{style:{width:t(c)}},c)});return O("ul",{className:et(i,r),style:s,children:l})};const I1=B1;var X1=function(e){var t=e.prefixCls,i=e.className,r=e.width,s=e.style;return O("h3",{className:et(t,i),style:K({width:r},s)})};const U1=X1;function ka(n){return n&&gm(n)==="object"?n:{}}function V1(n,e){return n&&!e?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Z1(n,e){return!n&&e?{width:"38%"}:n&&e?{width:"50%"}:{}}function q1(n,e){var t={};return(!n||!e)&&(t.width="61%"),!n&&e?t.rows=3:t.rows=2,t}var Pr=function(e){var t=e.prefixCls,i=e.loading,r=e.className,s=e.style,o=e.children,l=e.avatar,a=l===void 0?!1:l,c=e.title,h=c===void 0?!0:c,u=e.paragraph,f=u===void 0?!0:u,d=e.active,p=e.round,m=S.exports.useContext(kn),b=m.getPrefixCls,g=m.direction,x=b("skeleton",t),w=kr(x),y=Sn(w,2),v=y[0],C=y[1];if(i||!("loading"in e)){var $,E=!!a,_=!!h,A=!!f,U;if(E){var j=K(K({prefixCls:x+"-avatar"},V1(_,A)),ka(a));U=O("div",{className:x+"-header",children:O(Ll,{...j})})}var W;if(_||A){var Q;if(_){var T=K(K({prefixCls:x+"-title"},Z1(E,A)),ka(h));Q=O(U1,{...T})}var P;if(A){var B=K(K({prefixCls:x+"-paragraph"},q1(E,_)),ka(f));P=O(I1,{...B})}W=q("div",{className:x+"-content",children:[Q,P]})}var M=et(x,($={},k($,x+"-with-avatar",E),k($,x+"-active",d),k($,x+"-rtl",g==="rtl"),k($,x+"-round",p),$),r,C);return v(q("div",{className:M,style:s,children:[U,W]}))}return typeof o<"u"?o:null};Pr.Button=$1;Pr.Avatar=Q1;Pr.Input=N1;Pr.Image=M1;Pr.Node=R1;const L1=Pr;var z1=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},W1=function(e){var t=e.prefixCls,i=e.className,r=e.hoverable,s=r===void 0?!0:r,o=z1(e,["prefixCls","className","hoverable"]);return O(Om,{children:function(l){var a=l.getPrefixCls,c=a("card",t),h=et(c+"-grid",i,k({},c+"-grid-hoverable",s));return O("div",{...o,className:h})}})};const Nm=W1;var j1=function(e){var t=e.antCls,i=e.componentCls,r=e.cardHeadHeight,s=e.cardHeadPadding,o=e.cardPaddingBase,l=e.cardHeadTabsMarginBottom;return K(K({minHeight:r,marginBottom:-1,padding:"0 "+o+"px",color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,background:"transparent",borderBottom:e.lineWidth+"px "+e.lineType+" "+e.colorBorderSecondary,borderRadius:e.borderRadiusLG+"px "+e.borderRadiusLG+"px 0 0"},Ul()),k({"&-wrapper":{display:"flex",alignItems:"center"},"&-title":K(K({display:"inline-block",flex:1,padding:s+"px 0"},bm),k({},`
          > `+i+`-typography,
          > `+i+`-typography-edit-content
        `,{insetInlineStart:0,marginTop:0,marginBottom:0}))},t+"-tabs-top",{clear:"both",marginBottom:l,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:e.lineWidth+"px "+e.lineType+" "+e.colorBorderSecondary}}))},F1=function(e){var t=e.cardPaddingBase,i=e.colorBorderSecondary,r=e.cardShadow,s=e.lineWidth;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      `+s+"px 0 0 0 "+i+`,
      0 `+s+"px 0 0 "+i+`,
      `+s+"px "+s+"px 0 0 "+i+`,
      `+s+"px 0 0 0 "+i+` inset,
      0 `+s+"px 0 0 "+i+` inset;
    `,transition:"all "+e.motionDurationMid,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},G1=function(e){var t,i=e.componentCls,r=e.iconCls,s=e.cardActionsLiMargin,o=e.cardActionsIconSize,l=e.colorBorderSecondary;return K(K({margin:0,padding:0,listStyle:"none",background:e.colorBgContainer,borderTop:e.lineWidth+"px "+e.lineType+" "+l,display:"flex",borderRadius:"0 0 "+e.borderRadiusLG+"px "+e.borderRadiusLG+"px "},Ul()),{"& > li":{margin:s,color:e.colorTextDescription,textAlign:"center","> span":(t={position:"relative",display:"block",minWidth:e.cardActionsIconSize*2,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:"color "+e.motionDurationMid}},k(t,"a:not("+i+"-btn), > "+r,{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:e.fontSize*e.lineHeight+"px",transition:"color "+e.motionDurationMid,"&:hover":{color:e.colorPrimary}}),k(t,"> "+r,{fontSize:o,lineHeight:o*e.lineHeight+"px"}),t),"&:not(:last-child)":{borderInlineEnd:e.lineWidth+"px "+e.lineType+" "+l}}})},H1=function(e){return K(K({margin:"-"+e.marginXXS+"px 0",display:"flex"},Ul()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":K({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},bm),"&-description":{color:e.colorTextDescription}})},Y1=function(e){var t,i=e.componentCls,r=e.cardPaddingBase,s=e.colorFillAlter,o=e.cardInnerHeadPadding;return t={},k(t,i+"-head",{padding:"0 "+r+"px",background:s,"&-title":{padding:o+"px 0",fontSize:e.fontSize}}),k(t,i+"-body",{padding:e.padding+"px "+r+"px"}),k(t,i+"-extra",{padding:o+1.5+"px 0"}),t},K1=function(e){var t=e.componentCls;return k({overflow:"hidden"},t+"-body",{userSelect:"none"})},J1=function(e){var t,i,r,s,o=e.componentCls,l=e.cardShadow,a=e.cardHeadHeight,c=e.cardHeadPadding,h=e.colorBorderSecondary,u=e.boxShadow,f=e.cardPaddingBase;return s={},k(s,o,K(K({},ym(e)),(t={position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG},k(t,"&:not("+o+"-bordered)",{boxShadow:u}),k(t,o+"-head",j1(e)),k(t,o+"-extra",{marginInlineStart:"auto",padding:"",color:"",fontWeight:"normal",fontSize:e.fontSize}),k(t,o+"-body",K({padding:f,borderRadius:" 0 0 "+e.borderRadiusLG+"px "+e.borderRadiusLG+"px"},Ul())),k(t,o+"-grid",F1(e)),k(t,o+"-cover",{"> *":{display:"block",width:"100%"},img:{borderRadius:e.borderRadiusLG+"px "+e.borderRadiusLG+"px 0 0"}}),k(t,o+"-actions",G1(e)),k(t,o+"-meta",H1(e)),t))),k(s,o+"-bordered",k({border:e.lineWidth+"px "+e.lineType+" "+h},o+"-cover",{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1})),k(s,o+"-hoverable",{cursor:"pointer",transition:"box-shadow "+e.motionDurationMid+", border-color "+e.motionDurationMid,"&:hover":{borderColor:"transparent",boxShadow:l}}),k(s,o+"-contain-grid",(i={},k(i,o+"-body",{display:"flex",flexWrap:"wrap"}),k(i,"&:not("+o+"-loading) "+o+"-body",{marginBlockStart:-e.lineWidth,marginInlineStart:-e.lineWidth,padding:0}),i)),k(s,o+"-contain-tabs",k({},"> "+o+"-head",(r={},k(r,o+"-head-title",{minHeight:a-c,paddingBottom:0}),k(r,o+"-extra",{paddingBottom:0}),r))),k(s,o+"-type-inner",Y1(e)),k(s,o+"-loading",K1(e)),k(s,o+"-rtl",{direction:"rtl"}),s},eS=function(e){var t,i,r=e.componentCls,s=e.cardPaddingSM,o=e.fontSize,l=e.lineHeight,a=e.cardHeaderHeightSM,c=(a-o*l)/2;return k({},r+"-small",(i={},k(i,"> "+r+"-head",k({minHeight:a,padding:"0 "+s+"px",fontSize:e.fontSize},"> "+r+"-head-wrapper",(t={},k(t,"> "+r+"-head-title",{padding:c+"px 0"}),k(t,"> "+r+"-extra",{padding:c+"px 0",fontSize:e.fontSize}),t))),k(i,"> "+r+"-body",{padding:s}),i))};const tS=Zh("Card",function(n){var e=qh(n,{cardShadow:n.boxShadowCard,cardHeaderHeight:n.fontSizeLG*n.lineHeightLG+n.padding*2,cardHeaderHeightSM:n.fontSize*n.lineHeight+n.paddingXS*2,cardHeadPadding:n.padding,cardPaddingBase:n.paddingLG,cardHeadTabsMarginBottom:-n.padding-n.lineWidth,cardInnerHeadPadding:n.paddingSM,cardActionsLiMargin:n.paddingSM+"px 0",cardActionsIconSize:n.fontSize,cardPaddingSM:12});return[J1(e),eS(e)]});var nS=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function iS(n){var e=n.map(function(t,i){return O("li",{style:{width:100/n.length+"%"},children:O("span",{children:t})},"action-"+i)});return e}var rS=S.exports.forwardRef(function(n,e){var t,i,r=S.exports.useContext(kn),s=r.getPrefixCls,o=r.direction,l=S.exports.useContext(hx),a=function(Oe){var Te;(Te=n.onTabChange)===null||Te===void 0||Te.call(n,Oe)},c=function(){var Oe;return S.exports.Children.forEach(n.children,function(Te){Te&&Te.type&&Te.type===Nm&&(Oe=!0)}),Oe},h=n.prefixCls,u=n.className,f=n.extra,d=n.headStyle,p=d===void 0?{}:d,m=n.bodyStyle,b=m===void 0?{}:m,g=n.title,x=n.loading,w=n.bordered,y=w===void 0?!0:w,v=n.size,C=n.type,$=n.cover,E=n.actions,_=n.tabList,A=n.children,U=n.activeTabKey,j=n.defaultActiveTabKey,W=n.tabBarExtraContent,Q=n.hoverable,T=n.tabProps,P=T===void 0?{}:T,B=nS(n,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),M=s("card",h),X=tS(M),V=Sn(X,2),z=V[0],se=V[1],de=O(L1,{loading:!0,active:!0,paragraph:{rows:4},title:!1,children:A}),ae=U!==void 0,ie=K(K({},P),(t={},k(t,ae?"activeKey":"defaultActiveKey",ae?U:j),k(t,"tabBarExtraContent",W),t)),pe,me=_&&_.length?O(Qc,{size:"large",...ie,className:M+"-head-tabs",onChange:a,items:_.map(function($e){var Oe;return{label:$e.tab,key:$e.key,disabled:(Oe=$e.disabled)!==null&&Oe!==void 0?Oe:!1}})}):null;(g||f||me)&&(pe=q("div",{className:M+"-head",style:p,children:[q("div",{className:M+"-head-wrapper",children:[g&&O("div",{className:M+"-head-title",children:g}),f&&O("div",{className:M+"-extra",children:f})]}),me]}));var xe=$?O("div",{className:M+"-cover",children:$}):null,oe=O("div",{className:M+"-body",style:b,children:x?de:A}),ee=E&&E.length?O("ul",{className:M+"-actions",children:iS(E)}):null,Ie=Xl(B,["onTabChange"]),Xe=v||l,Qe=et(M,(i={},k(i,M+"-loading",x),k(i,M+"-bordered",y),k(i,M+"-hoverable",Q),k(i,M+"-contain-grid",c()),k(i,M+"-contain-tabs",_&&_.length),k(i,M+"-"+Xe,Xe),k(i,M+"-type-"+C,!!C),k(i,M+"-rtl",o==="rtl"),i),u,se);return z(q("div",{ref:e,...Ie,className:Qe,children:[pe,xe,oe,ee]}))});const sS=rS;var oS=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},lS=function(e){return O(Om,{children:function(t){var i=t.getPrefixCls,r=e.prefixCls,s=e.className,o=e.avatar,l=e.title,a=e.description,c=oS(e,["prefixCls","className","avatar","title","description"]),h=i("card",r),u=et(h+"-meta",s),f=o?O("div",{className:h+"-meta-avatar",children:o}):null,d=l?O("div",{className:h+"-meta-title",children:l}):null,p=a?O("div",{className:h+"-meta-description",children:a}):null,m=d||p?q("div",{className:h+"-meta-detail",children:[d,p]}):null;return q("div",{...c,className:u,children:[f,m]})}})};const aS=lS;var Yh=sS;Yh.Grid=Nm;Yh.Meta=aS;const pr=Yh;var Is=ux;Is.Header=fx;Is.Footer=dx;Is.Content=px;Is.Sider=mx;const Hn=Is;var Bm=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},cS=function(e){var t=e.prefixCls,i=e.className,r=e.avatar,s=e.title,o=e.description,l=Bm(e,["prefixCls","className","avatar","title","description"]),a=S.exports.useContext(kn),c=a.getPrefixCls,h=c("list",t),u=et(h+"-item-meta",i),f=q("div",{className:h+"-item-meta-content",children:[s&&O("h4",{className:h+"-item-meta-title",children:s}),o&&O("div",{className:h+"-item-meta-description",children:o})]});return q("div",{...l,className:u,children:[r&&O("div",{className:h+"-item-meta-avatar",children:r}),(s||o)&&f]})},hS=function(e,t){var i=e.prefixCls,r=e.children,s=e.actions,o=e.extra,l=e.className,a=e.colStyle,c=Bm(e,["prefixCls","children","actions","extra","className","colStyle"]),h=S.exports.useContext(Kh),u=h.grid,f=h.itemLayout,d=S.exports.useContext(kn),p=d.getPrefixCls,m=function(){var C;return S.exports.Children.forEach(r,function($){typeof $=="string"&&(C=!0)}),C&&S.exports.Children.count(r)>1},b=function(){return f==="vertical"?!!o:!m()},g=p("list",i),x=s&&s.length>0&&O("ul",{className:g+"-item-action",children:s.map(function(v,C){return q("li",{children:[v,C!==s.length-1&&O("em",{className:g+"-item-action-split"})]},g+"-item-action-"+C)})},"actions"),w=u?"div":"li",y=O(w,{...c,...u?{}:{ref:t},className:et(g+"-item",k({},g+"-item-no-flex",!b()),l),children:f==="vertical"&&o?[q("div",{className:g+"-item-main",children:[r,x]},"content"),O("div",{className:g+"-item-extra",children:o},"extra")]:[r,x,gx(o,{key:"extra"})]});return u?O(dr,{ref:t,flex:1,style:a,children:y}):y},Im=S.exports.forwardRef(hS);Im.Meta=cS;const uS=Im;var fS=function(e){var t,i,r=e.listBorderedCls,s=e.componentCls,o=e.paddingLG,l=e.margin,a=e.padding,c=e.listItemPaddingSM,h=e.marginLG,u=e.borderRadiusLG;return i={},k(i,""+r,(t={border:e.lineWidth+"px "+e.lineType+" "+e.colorBorder,borderRadius:u},k(t,s+"-header,"+s+"-footer,"+s+"-item",{paddingInline:o}),k(t,s+"-pagination",{margin:l+"px "+h+"px"}),t)),k(i,""+r+s+"-sm",k({},s+"-item,"+s+"-header,"+s+"-footer",{padding:c})),k(i,""+r+s+"-lg",k({},s+"-item,"+s+"-header,"+s+"-footer",{padding:a+"px "+o+"px"})),i},dS=function(e){var t,i,r,s,o=e.componentCls,l=e.screenSM,a=e.screenMD,c=e.marginLG,h=e.marginSM,u=e.margin;return s={},k(s,"@media screen and (max-width:"+a+")",(t={},k(t,""+o,k({},o+"-item",k({},o+"-item-action",{marginInlineStart:c}))),k(t,o+"-vertical",k({},o+"-item",k({},o+"-item-extra",{marginInlineStart:c}))),t)),k(s,"@media screen and (max-width: "+l+")",(r={},k(r,""+o,k({},o+"-item",k({flexWrap:"wrap"},o+"-action",{marginInlineStart:h}))),k(r,o+"-vertical",k({},o+"-item",(i={flexWrap:"wrap-reverse"},k(i,o+"-item-main",{minWidth:e.contentWidth}),k(i,o+"-item-extra",{margin:"auto auto "+u+"px"}),i))),r)),s},pS=function(e){var t,i,r,s,o,l,a=e.componentCls,c=e.antCls,h=e.controlHeight,u=e.minHeight,f=e.paddingSM,d=e.marginLG,p=e.padding,m=e.listItemPadding,b=e.colorPrimary,g=e.listItemPaddingSM,x=e.listItemPaddingLG,w=e.paddingXS,y=e.margin,v=e.colorText,C=e.colorTextDescription,$=e.motionDurationSlow,E=e.lineWidth;return l={},k(l,""+a,K(K({},ym(e)),(s={position:"relative","*":{outline:"none"}},k(s,a+"-header, "+a+"-footer",{background:"transparent",paddingBlock:f}),k(s,a+"-pagination",k({marginBlockStart:d,textAlign:"end"},c+"-pagination-options",{textAlign:"start"})),k(s,a+"-spin",{minHeight:u,textAlign:"center"}),k(s,a+"-items",{margin:0,padding:0,listStyle:"none"}),k(s,a+"-item",(r={display:"flex",alignItems:"center",justifyContent:"space-between",padding:m,color:v},k(r,a+"-item-meta",(t={display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%"},k(t,a+"-item-meta-avatar",{marginInlineEnd:p}),k(t,a+"-item-meta-content",{flex:"1 0",width:0,color:v}),k(t,a+"-item-meta-title",{marginBottom:e.marginXXS,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":k({color:v,transition:"all "+$},"&:hover",{color:b})}),k(t,a+"-item-meta-description",{color:C,fontSize:e.fontSize,lineHeight:e.lineHeight}),t)),k(r,a+"-item-action",(i={flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none"},k(i,"& > li",k({position:"relative",display:"inline-block",padding:"0 "+w+"px",color:C,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center"},"&:first-child",{paddingInlineStart:0})),k(i,a+"-item-action-split",{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:E,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}),i)),r)),k(s,a+"-empty",{padding:p+"px 0",color:C,fontSize:e.fontSizeSM,textAlign:"center"}),k(s,a+"-empty-text",{padding:p,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"}),k(s,a+"-item-no-flex",{display:"block"}),s))),k(l,a+"-grid "+c+"-col > "+a+"-item",{display:"block",maxWidth:"100%",marginBlockEnd:y,paddingBlock:0,borderBlockEnd:"none"}),k(l,a+"-vertical "+a+"-item",(o={alignItems:"initial"},k(o,a+"-item-main",{display:"block",flex:1}),k(o,a+"-item-extra",{marginInlineStart:d}),k(o,a+"-item-meta",k({marginBlockEnd:p},a+"-item-meta-title",{marginBlockEnd:f,color:v,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG})),k(o,a+"-item-action",{marginBlockStart:p,marginInlineStart:"auto","> li":k({padding:"0 "+p+"px"},"&:first-child",{paddingInlineStart:0})}),o)),k(l,a+"-split "+a+"-item",k({borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit},"&:last-child",{borderBlockEnd:"none"})),k(l,a+"-split "+a+"-header",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),k(l,a+"-split"+a+"-empty "+a+"-footer",{borderTop:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),k(l,a+"-loading "+a+"-spin-nested-loading",{minHeight:h}),k(l,a+"-split"+a+"-something-after-last-item "+c+"-spin-container > "+a+"-items > "+a+"-item:last-child",{borderBlockEnd:e.lineWidth+"px "+e.lineType+" "+e.colorSplit}),k(l,a+"-lg "+a+"-item",{padding:x}),k(l,a+"-sm "+a+"-item",{padding:g}),k(l,a+":not("+a+"-vertical)",k({},a+"-item-no-flex",k({},a+"-item-action",{float:"right"}))),l};const mS=Zh("List",function(n){var e=qh(n,{listBorderedCls:n.componentCls+"-bordered",minHeight:n.controlHeightLG,listItemPadding:n.paddingContentVertical+"px "+n.paddingContentHorizontalLG+"px",listItemPaddingSM:n.paddingContentVerticalSM+"px "+n.paddingContentHorizontal+"px",listItemPaddingLG:n.paddingContentVerticalLG+"px "+n.paddingContentHorizontalLG+"px"});return[pS(e),fS(e),dS(e)]},{contentWidth:220});var gS=globalThis&&globalThis.__rest||function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Kh=S.exports.createContext({});Kh.Consumer;function Tc(n){var e,t=n.pagination,i=t===void 0?!1:t,r=n.prefixCls,s=n.bordered,o=s===void 0?!1:s,l=n.split,a=l===void 0?!0:l,c=n.className,h=n.children,u=n.itemLayout,f=n.loadMore,d=n.grid,p=n.dataSource,m=p===void 0?[]:p,b=n.size,g=n.header,x=n.footer,w=n.loading,y=w===void 0?!1:w,v=n.rowKey,C=n.renderItem,$=n.locale,E=gS(n,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),_=i&&gm(i)==="object"?i:{},A=S.exports.useState(_.defaultCurrent||1),U=Sn(A,2),j=U[0],W=U[1],Q=S.exports.useState(_.defaultPageSize||10),T=Sn(Q,2),P=T[0],B=T[1],M=S.exports.useContext(kn),X=M.getPrefixCls,V=M.renderEmpty,z=M.direction,se={current:1,total:0},de=function(be){return function(je,Qt){W(je),B(Qt),i&&i[be]&&i[be](je,Qt)}},ae=de("onChange"),ie=de("onShowSizeChange"),pe=function(be,je){return C?(typeof v=="function"?v(be):v?be[v]:be.key,O(ke,{children:C(be,je)})):null},me=function(){return!!(f||i||x)},xe=function(be,je){return O("div",{className:be+"-empty-text",children:$&&$.emptyText||je("List")})},oe=X("list",r),ee=mS(oe),Ie=Sn(ee,2),Xe=Ie[0],Qe=Ie[1],$e=y;typeof $e=="boolean"&&($e={spinning:$e});var Oe=$e&&$e.spinning,Te="";switch(b){case"large":Te="lg";break;case"small":Te="sm";break}var it=et(oe,(e={},k(e,oe+"-vertical",u==="vertical"),k(e,oe+"-"+Te,Te),k(e,oe+"-split",a),k(e,oe+"-bordered",o),k(e,oe+"-loading",Oe),k(e,oe+"-grid",!!d),k(e,oe+"-something-after-last-item",me()),k(e,oe+"-rtl",z==="rtl"),e),c,Qe),D=K(K(K({},se),{total:m.length,current:j,pageSize:P}),i||{}),I=Math.ceil(D.total/D.pageSize);D.current>I&&(D.current=I);var Z=i?O("div",{className:oe+"-pagination",children:O(Ox,{...D,onChange:ae,onShowSizeChange:ie})}):null,G=wc(m);i&&m.length>(D.current-1)*D.pageSize&&(G=wc(m).splice((D.current-1)*D.pageSize,D.pageSize));var re=Object.keys(d||{}).some(function(le){return["xs","sm","md","lg","xl","xxl"].includes(le)}),Se=yx(re),he=S.exports.useMemo(function(){for(var le=0;le<of.length;le+=1){var be=of[le];if(Se[be])return be}},[Se]),ue=S.exports.useMemo(function(){if(!!d){var le=he&&d[he]?d[he]:d.column;if(le)return{width:100/le+"%",maxWidth:100/le+"%"}}},[d==null?void 0:d.column,he]),ge=Oe&&O("div",{style:{minHeight:53}});if(G.length>0){var Ae=G.map(function(le,be){return pe(le,be)});ge=d?O(Ms,{gutter:d.gutter,children:S.exports.Children.map(Ae,function(le){return O("div",{style:ue,children:le},le==null?void 0:le.key)})}):O("ul",{className:oe+"-items",children:Ae})}else!h&&!Oe&&(ge=xe(oe,V||bx));var Re=D.position||"bottom",wt=S.exports.useMemo(function(){return{grid:d,itemLayout:u}},[JSON.stringify(d),u]);return Xe(O(Kh.Provider,{value:wt,children:q("div",{className:it,...E,children:[(Re==="top"||Re==="both")&&Z,g&&O("div",{className:oe+"-header",children:g}),q(Vl,{...$e,children:[ge,h]}),x&&O("div",{className:oe+"-footer",children:x}),f||(Re==="bottom"||Re==="both")&&Z]})}))}Tc.Item=uS;const OS=()=>O("div",{className:yS.wrapper,children:O(Vl,{size:"large"})}),yS={wrapper:F({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})};var bS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const xS=bS;var Xm=function(e,t){return O(Lh,{...dt(dt({},e),{},{ref:t,icon:xS})})};Xm.displayName="DatabaseOutlined";const SS=S.exports.forwardRef(Xm);var vS={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const wS=vS;var Um=function(e,t){return O(Lh,{...dt(dt({},e),{},{ref:t,icon:wS})})};Um.displayName="MoreOutlined";const QS=S.exports.forwardRef(Um),CS="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",$S=xx({scriptUrl:CS}),kS=({type:n})=>O($S,{type:`icon-modou-${n}`}),Ct={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ve(){return Ve=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ve.apply(this,arguments)}var Ne;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ne||(Ne={}));const hf="popstate";function Vm(n){n===void 0&&(n={});let{initialEntries:e=["/"],initialIndex:t,v5Compat:i=!1}=n,r;r=e.map((f,d)=>h(f,typeof f=="string"?null:f.state,d===0?"default":void 0));let s=a(t==null?r.length-1:t),o=Ne.Pop,l=null;function a(f){return Math.min(Math.max(f,0),r.length-1)}function c(){return r[s]}function h(f,d,p){d===void 0&&(d=null);let m=ti(r?c().pathname:"/",f,d,p);return TS(m.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(f)),m}return{get index(){return s},get action(){return o},get location(){return c()},createHref(f){return typeof f=="string"?f:us(f)},push(f,d){o=Ne.Push;let p=h(f,d);s+=1,r.splice(s,r.length,p),i&&l&&l({action:o,location:p})},replace(f,d){o=Ne.Replace;let p=h(f,d);r[s]=p,i&&l&&l({action:o,location:p})},go(f){o=Ne.Pop,s=a(s+f),l&&l({action:o,location:c()})},listen(f){return l=f,()=>{l=null}}}}function PS(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:l}=i.location;return ti("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:us(r)}return RS(e,t,null,n)}function TS(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substr(2,8)}function uf(n){return{usr:n.state,key:n.key}}function ti(n,e,t,i){return t===void 0&&(t=null),Ve({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cn(e):e,{state:t,key:e&&e.key||i||AS()})}function us(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Cn(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function RS(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=Ne.Pop,a=null;function c(){l=Ne.Pop,a&&a({action:l,location:f.location})}function h(d,p){l=Ne.Push;let m=ti(f.location,d,p);t&&t(m,d);let b=uf(m),g=f.createHref(m);try{o.pushState(b,"",g)}catch{r.location.assign(g)}s&&a&&a({action:l,location:m})}function u(d,p){l=Ne.Replace;let m=ti(f.location,d,p);t&&t(m,d);let b=uf(m),g=f.createHref(m);o.replaceState(b,"",g),s&&a&&a({action:l,location:m})}let f={get action(){return l},get location(){return n(r,o)},listen(d){if(a)throw new Error("A history only accepts one active listener");return r.addEventListener(hf,c),a=d,()=>{r.removeEventListener(hf,c),a=null}},createHref(d){return e(r,d)},push:h,replace:u,go(d){return o.go(d)}};return f}var Ot;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Ot||(Ot={}));function ES(n){return n.index===!0}function Zm(n,e,t){return e===void 0&&(e=[]),t===void 0&&(t=new Set),n.map((i,r)=>{let s=[...e,r],o=typeof i.id=="string"?i.id:s.join("-");return fe(i.index!==!0||!i.children,"Cannot specify children on an index route"),fe(!t.has(o),'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),t.add(o),ES(i)?Ve({},i,{id:o}):Ve({},i,{id:o,children:i.children?Zm(i.children,s,t):void 0})})}function Gi(n,e,t){t===void 0&&(t="/");let i=typeof e=="string"?Cn(e):e,r=zm(i.pathname||"/",t);if(r==null)return null;let s=qm(n);_S(s);let o=null;for(let l=0;o==null&&l<s.length;++l)o=ZS(s[l],r);return o}function qm(n,e,t,i){return e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i=""),n.forEach((r,s)=>{let o={relativePath:r.path||"",caseSensitive:r.caseSensitive===!0,childrenIndex:s,route:r};o.relativePath.startsWith("/")&&(fe(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(i.length));let l=ni([i,o.relativePath]),a=t.concat(o);r.children&&r.children.length>0&&(fe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),qm(r.children,e,a,l)),!(r.path==null&&!r.index)&&e.push({path:l,score:US(l,r.index),routesMeta:a})}),e}function _S(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:VS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const MS=/^:\w+$/,DS=3,NS=2,BS=1,IS=10,XS=-2,ff=n=>n==="*";function US(n,e){let t=n.split("/"),i=t.length;return t.some(ff)&&(i+=XS),e&&(i+=NS),t.filter(r=>!ff(r)).reduce((r,s)=>r+(MS.test(s)?DS:s===""?BS:IS),i)}function VS(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function ZS(n,e){let{routesMeta:t}=n,i={},r="/",s=[];for(let o=0;o<t.length;++o){let l=t[o],a=o===t.length-1,c=r==="/"?e:e.slice(r.length)||"/",h=Ci({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},c);if(!h)return null;Object.assign(i,h.params);let u=l.route;s.push({params:i,pathname:ni([r,h.pathname]),pathnameBase:WS(ni([r,h.pathnameBase])),route:u}),h.pathnameBase!=="/"&&(r=ni([r,h.pathnameBase]))}return s}function Lm(n,e){return e===void 0&&(e={}),n.replace(/:(\w+)/g,(t,i)=>(fe(e[i]!=null,'Missing ":'+i+'" param'),e[i])).replace(/(\/?)\*/,(t,i,r,s)=>{const o="*";return e[o]==null?s==="/*"?"/":"":""+i+e[o]})}function Ci(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=qS(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((c,h,u)=>{if(h==="*"){let f=l[u]||"";o=s.slice(0,s.length-f.length).replace(/(.)\/+$/,"$1")}return c[h]=LS(l[u]||"",h),c},{}),pathname:s,pathnameBase:o,pattern:n}}function qS(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Wm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,l)=>(i.push(l),"([^\\/]+)"));return n.endsWith("*")?(i.push("*"),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function LS(n,e){try{return decodeURIComponent(n)}catch(t){return Wm(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+n+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),n}}function zm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function fe(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jm(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Cn(n):n;return{pathname:t?t.startsWith("/")?t:zS(t,e):e,search:jS(i),hash:FS(r)}}function zS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Pa(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fm(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Cn(n):(r=Ve({},n),fe(!r.pathname||!r.pathname.includes("?"),Pa("?","pathname","search",r)),fe(!r.pathname||!r.pathname.includes("#"),Pa("#","pathname","hash",r)),fe(!r.search||!r.search.includes("#"),Pa("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,l;if(i||o==null)l=t;else{let u=e.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),u-=1;r.pathname=f.join("/")}l=u>=0?e[u]:"/"}let a=jm(r,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!a.pathname.endsWith("/")&&(c||h)&&(a.pathname+="/"),a}const ni=n=>n.join("/").replace(/\/\/+/g,"/"),WS=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),jS=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,FS=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,GS=function(e,t){t===void 0&&(t={});let i=typeof t=="number"?{status:t}:t,r=new Headers(i.headers);return r.has("Content-Type")||r.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(e),Ve({},i,{headers:r}))};class Go extends Error{}class Gm{constructor(e){this.pendingKeys=new Set,this.subscriber=void 0,fe(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let t;this.abortPromise=new Promise((r,s)=>t=s),this.controller=new AbortController;let i=()=>t(new Go("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",i),this.controller.signal.addEventListener("abort",i),this.data=Object.entries(e).reduce((r,s)=>{let[o,l]=s;return Object.assign(r,{[o]:this.trackPromise(o,l)})},{})}trackPromise(e,t){if(!(t instanceof Promise))return t;this.pendingKeys.add(e);let i=Promise.race([t,this.abortPromise]).then(r=>this.onSettle(i,e,null,r),r=>this.onSettle(i,e,r));return i.catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),i}onSettle(e,t,i,r){if(this.controller.signal.aborted&&i instanceof Go)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>i}),Promise.reject(i);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();const s=this.subscriber;return i?(Object.defineProperty(e,"_error",{get:()=>i}),s&&s(!1),Promise.reject(i)):(Object.defineProperty(e,"_data",{get:()=>r}),s&&s(!1),r)}subscribe(e){this.subscriber=e}cancel(){this.controller.abort(),this.pendingKeys.forEach((t,i)=>this.pendingKeys.delete(i));let e=this.subscriber;e&&e(!0)}async resolveData(e){let t=!1;if(!this.done){let i=()=>this.cancel();e.addEventListener("abort",i),t=await new Promise(r=>{this.subscribe(s=>{e.removeEventListener("abort",i),(s||this.done)&&r(s)})})}return t}get done(){return this.pendingKeys.size===0}get unwrappedData(){return fe(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,t)=>{let[i,r]=t;return Object.assign(e,{[i]:YS(r)})},{})}}function HS(n){return n instanceof Promise&&n._tracked===!0}function YS(n){if(!HS(n))return n;if(n._error)throw n._error;return n._data}function KS(n){return new Gm(n)}const JS=function(e,t){t===void 0&&(t=302);let i=t;typeof i=="number"?i={status:i}:typeof i.status>"u"&&(i.status=302);let r=new Headers(i.headers);return r.set("Location",e),new Response(null,Ve({},i,{headers:r}))};class Tr{constructor(e,t,i){this.status=e,this.statusText=t||"",this.data=i}}function Jh(n){return n instanceof Tr}const Ta={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},ev={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function tv(n){fe(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let e=Zm(n.routes),t=null,i=new Set,r=null,s=null,o=null,l=!1,a=Gi(e,n.history.location,n.basename),c=null;if(a==null){let{matches:D,route:I,error:Z}=Of(e);a=D,c={[I.id]:Z}}let h=!a.some(D=>D.route.loader)||n.hydrationData!=null,u,f={historyAction:n.history.action,location:n.history.location,matches:a,initialized:h,navigation:Ta,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||c,fetchers:new Map},d=Ne.Pop,p=!1,m,b=!1,g=!1,x=[],w=[],y=new Map,v=0,C=-1,$=new Map,E=new Set,_=new Map,A=new Map;function U(){return t=n.history.listen(D=>{let{action:I,location:Z}=D;return M(I,Z)}),f.initialized||M(Ne.Pop,f.location),u}function j(){t&&t(),i.clear(),m&&m.abort(),f.fetchers.forEach((D,I)=>oe(I))}function W(D){return i.add(D),()=>i.delete(D)}function Q(D){f=Ve({},f,D),i.forEach(I=>I(f))}function T(D,I){var Z;let G=f.actionData!=null&&f.navigation.formMethod!=null&&f.navigation.state==="loading"&&((Z=f.navigation.formAction)==null?void 0:Z.split("?")[0])===D.pathname,re=I.loaderData?{loaderData:Ra(f.loaderData,I.loaderData,I.matches||[])}:{};Q(Ve({},G?{}:{actionData:null},I,re,{historyAction:d,location:D,initialized:!0,navigation:Ta,revalidation:"idle",restoreScrollPosition:f.navigation.formData?!1:it(D,I.matches||f.matches),preventScrollReset:p})),b||d===Ne.Pop||(d===Ne.Push?n.history.push(D,D.state):d===Ne.Replace&&n.history.replace(D,D.state)),d=Ne.Pop,p=!1,b=!1,g=!1,x=[],w=[]}async function P(D,I){if(typeof D=="number"){n.history.go(D);return}let{path:Z,submission:G,error:re}=df(D,I),Se=ti(f.location,Z,I&&I.state),he=(I&&I.replace)===!0||G!=null?Ne.Replace:Ne.Push,ue=I&&"preventScrollReset"in I?I.preventScrollReset===!0:void 0;return await M(he,Se,{submission:G,pendingError:re,preventScrollReset:ue,replace:I&&I.replace})}function B(){if(me(),Q({revalidation:"loading"}),f.navigation.state!=="submitting"){if(f.navigation.state==="idle"){M(f.historyAction,f.location,{startUninterruptedRevalidation:!0});return}M(d||f.historyAction,f.navigation.location,{overrideNavigation:f.navigation})}}async function M(D,I,Z){m&&m.abort(),m=null,d=D,b=(Z&&Z.startUninterruptedRevalidation)===!0,Te(f.location,f.matches),p=(Z&&Z.preventScrollReset)===!0;let G=Z&&Z.overrideNavigation,re=Gi(e,I,n.basename);if(!re){let{matches:wt,route:le,error:be}=Of(e);$e(),T(I,{matches:wt,loaderData:{},errors:{[le.id]:be}});return}if(sv(f.location,I)){T(I,{matches:re});return}m=new AbortController;let Se=Dr(I,m.signal,Z&&Z.submission),he,ue;if(Z&&Z.pendingError)ue={[Hi(re).route.id]:Z.pendingError};else if(Z&&Z.submission){let wt=await X(Se,I,Z.submission,re,{replace:Z.replace});if(wt.shortCircuited)return;he=wt.pendingActionData,ue=wt.pendingActionError,G=Ve({state:"loading",location:I},Z.submission)}let{shortCircuited:ge,loaderData:Ae,errors:Re}=await V(Se,I,re,G,Z&&Z.submission,Z&&Z.replace,he,ue);ge||(m=null,T(I,{matches:re,loaderData:Ae,errors:Re}))}async function X(D,I,Z,G,re){me();let Se=Ve({state:"submitting",location:I},Z);Q({navigation:Se});let he,ue=vf(G,I);if(!ue.route.action)he=yf(I);else if(he=await Mr("action",D,ue),D.signal.aborted)return{shortCircuited:!0};if(ir(he)){let ge=Ve({state:"loading",location:ti(f.location,he.location)},Z);return await ie(he,ge,re&&re.replace),{shortCircuited:!0}}if(is(he)){let ge=Hi(G,ue.route.id);return(re&&re.replace)!==!0&&(d=Ne.Push),{pendingActionError:{[ge.route.id]:he.error}}}if($i(he))throw new Error("defer() is not supported in actions");return{pendingActionData:{[ue.route.id]:he.data}}}async function V(D,I,Z,G,re,Se,he,ue){let ge=G;ge||(ge={state:"loading",location:I,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[Ae,Re]=pf(f,Z,re,I,g,x,w,he,ue,_);if($e(Le=>!(Z&&Z.some(Fe=>Fe.route.id===Le))||Ae&&Ae.some(Fe=>Fe.route.id===Le)),Ae.length===0&&Re.length===0)return T(I,{matches:Z,loaderData:Ra(f.loaderData,{},Z),errors:ue||null,actionData:he||null}),{shortCircuited:!0};b||(Re.forEach(Le=>{let[Fe]=Le;const Lt=f.fetchers.get(Fe);let mi={state:"loading",data:Lt&&Lt.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};f.fetchers.set(Fe,mi)}),Q(Ve({navigation:ge,actionData:he||f.actionData||null},Re.length>0?{fetchers:new Map(f.fetchers)}:{}))),C=++v,Re.forEach(Le=>{let[Fe]=Le;return y.set(Fe,m)});let{results:wt,loaderResults:le,fetcherResults:be}=await pe(f.matches,Ae,Re,D);if(D.signal.aborted)return{shortCircuited:!0};Re.forEach(Le=>{let[Fe]=Le;return y.delete(Fe)});let je=bf(wt);if(je){let Le=Aa(f,je);return await ie(je,Le,Se),{shortCircuited:!0}}let{loaderData:Qt,errors:mt}=gf(f,Z,Ae,le,ue,Re,be,A);A.forEach((Le,Fe)=>{Le.subscribe(Lt=>{(Lt||Le.done)&&A.delete(Fe)})}),Xe();let qn=Qe(C);return Ve({loaderData:Qt,errors:mt},qn||Re.length>0?{fetchers:new Map(f.fetchers)}:{})}function z(D){return f.fetchers.get(D)||ev}function se(D,I,Z,G){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");y.has(D)&&ee(D);let re=Gi(e,Z,n.basename);if(!re){xe(D,I,new Tr(404,"Not Found",null));return}let{path:Se,submission:he}=df(Z,G,!0),ue=vf(re,Se);if(he){de(D,I,Se,ue,he);return}_.set(D,[Se,ue]),ae(D,I,Se,ue)}async function de(D,I,Z,G,re){if(me(),_.delete(D),!G.route.action){let{error:Mt}=yf(Z);xe(D,I,Mt);return}let Se=f.fetchers.get(D),he=Ve({state:"submitting"},re,{data:Se&&Se.data});f.fetchers.set(D,he),Q({fetchers:new Map(f.fetchers)});let ue=new AbortController,ge=Dr(Z,ue.signal,re);y.set(D,ue);let Ae=await Mr("action",ge,G);if(ge.signal.aborted){y.get(D)===ue&&y.delete(D);return}if(ir(Ae)){y.delete(D),E.add(D);let Mt=Ve({state:"loading"},re,{data:void 0});f.fetchers.set(D,Mt),Q({fetchers:new Map(f.fetchers)});let Jt=Ve({state:"loading",location:ti(f.location,Ae.location)},re);await ie(Ae,Jt);return}if(is(Ae)){xe(D,I,Ae.error);return}$i(Ae)&&fe(!1,"defer() is not supported in actions");let Re=f.navigation.location||f.location,wt=Dr(Re,ue.signal),le=f.navigation.state!=="idle"?Gi(e,f.navigation.location,n.basename):f.matches;fe(le,"Didn't find any matches after fetcher action");let be=++v;$.set(D,be);let je=Ve({state:"loading",data:Ae.data},re);f.fetchers.set(D,je);let[Qt,mt]=pf(f,le,re,Re,g,x,w,{[G.route.id]:Ae.data},void 0,_);mt.filter(Mt=>{let[Jt]=Mt;return Jt!==D}).forEach(Mt=>{let[Jt]=Mt,Ys=f.fetchers.get(Jt),Sa={state:"loading",data:Ys&&Ys.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};f.fetchers.set(Jt,Sa),y.set(Jt,ue)}),Q({fetchers:new Map(f.fetchers)});let{results:qn,loaderResults:Le,fetcherResults:Fe}=await pe(f.matches,Qt,mt,wt);if(ue.signal.aborted)return;$.delete(D),y.delete(D),mt.forEach(Mt=>{let[Jt]=Mt;return y.delete(Jt)});let Lt=bf(qn);if(Lt){let Mt=Aa(f,Lt);await ie(Lt,Mt);return}let{loaderData:mi,errors:un}=gf(f,f.matches,Qt,Le,void 0,mt,Fe,A),ba={state:"idle",data:Ae.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};f.fetchers.set(D,ba);let xa=Qe(be);f.navigation.state==="loading"&&be>C?(fe(d,"Expected pending action"),m&&m.abort(),T(f.navigation.location,{matches:le,loaderData:mi,errors:un,fetchers:new Map(f.fetchers)})):(Q(Ve({errors:un,loaderData:Ra(f.loaderData,mi,le)},xa?{fetchers:new Map(f.fetchers)}:{})),g=!1)}async function ae(D,I,Z,G){let re=f.fetchers.get(D),Se={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:re&&re.data};f.fetchers.set(D,Se),Q({fetchers:new Map(f.fetchers)});let he=new AbortController,ue=Dr(Z,he.signal);y.set(D,he);let ge=await Mr("loader",ue,G);if($i(ge)&&(ge=await Km(ge,ue.signal,!0)||ge),y.get(D)===he&&y.delete(D),ue.signal.aborted)return;if(ir(ge)){let Re=Aa(f,ge);await ie(ge,Re);return}if(is(ge)){let Re=Hi(f.matches,I);f.fetchers.delete(D),Q({fetchers:new Map(f.fetchers),errors:{[Re.route.id]:ge.error}});return}fe(!$i(ge),"Unhandled fetcher deferred data");let Ae={state:"idle",data:ge.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};f.fetchers.set(D,Ae),Q({fetchers:new Map(f.fetchers)})}async function ie(D,I,Z){D.revalidate&&(g=!0),fe(I.location,"Expected a location on the redirect navigation"),m=null;let G=Z===!0?Ne.Replace:Ne.Push;await M(G,I.location,{overrideNavigation:I})}async function pe(D,I,Z,G){let re=await Promise.all([...I.map(ue=>Mr("loader",G,ue)),...Z.map(ue=>{let[,ge,Ae]=ue;return Mr("loader",Dr(ge,G.signal),Ae)})]),Se=re.slice(0,I.length),he=re.slice(I.length);return await Promise.all([xf(D,I,Se,G.signal,!1,f.loaderData),xf(D,Z.map(ue=>{let[,,ge]=ue;return ge}),he,G.signal,!0)]),{results:re,loaderResults:Se,fetcherResults:he}}function me(){g=!0,x.push(...$e()),_.forEach((D,I)=>{y.has(I)&&(w.push(I),ee(I))})}function xe(D,I,Z){let G=Hi(f.matches,I);oe(D),Q({errors:{[G.route.id]:Z},fetchers:new Map(f.fetchers)})}function oe(D){y.has(D)&&ee(D),_.delete(D),$.delete(D),E.delete(D),f.fetchers.delete(D)}function ee(D){let I=y.get(D);fe(I,"Expected fetch controller: "+D),I.abort(),y.delete(D)}function Ie(D){for(let I of D){let Z=z(I),G={state:"idle",data:Z.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};f.fetchers.set(I,G)}}function Xe(){let D=[];for(let I of E){let Z=f.fetchers.get(I);fe(Z,"Expected fetcher: "+I),Z.state==="loading"&&(E.delete(I),D.push(I))}Ie(D)}function Qe(D){let I=[];for(let[Z,G]of $)if(G<D){let re=f.fetchers.get(Z);fe(re,"Expected fetcher: "+Z),re.state==="loading"&&(ee(Z),$.delete(Z),I.push(Z))}return Ie(I),I.length>0}function $e(D){let I=[];return A.forEach((Z,G)=>{(!D||D(G))&&(Z.cancel(),I.push(G),A.delete(G))}),I}function Oe(D,I,Z){if(r=D,o=I,s=Z||(G=>G.key),!l&&f.navigation===Ta){l=!0;let G=it(f.location,f.matches);G!=null&&Q({restoreScrollPosition:G})}return()=>{r=null,o=null,s=null}}function Te(D,I){if(r&&s&&o){let Z=I.map(re=>Sf(re,f.loaderData)),G=s(D,Z)||D.key;r[G]=o()}}function it(D,I){if(r&&s&&o){let Z=I.map(Se=>Sf(Se,f.loaderData)),G=s(D,Z)||D.key,re=r[G];if(typeof re=="number")return re}return null}return u={get basename(){return n.basename},get state(){return f},get routes(){return e},initialize:U,subscribe:W,enableScrollRestoration:Oe,navigate:P,fetch:se,revalidate:B,createHref:Wl,getFetcher:z,deleteFetcher:oe,dispose:j,_internalFetchControllers:y,_internalActiveDeferreds:A},u}function df(n,e,t){t===void 0&&(t=!1);let i=typeof n=="string"?n:us(n);if(!e||!("formMethod"in e)&&!("formData"in e))return{path:i};if(e.formMethod!=null&&e.formMethod!=="get")return{path:i,submission:{formMethod:e.formMethod,formAction:Wl(Cn(i)),formEncType:e&&e.formEncType||"application/x-www-form-urlencoded",formData:e.formData}};if(!e.formData)return{path:i};let r=Cn(i);try{let s=Ym(e.formData);t&&r.search&&Jm(r.search)&&s.append("index",""),r.search="?"+s}catch{return{path:i,error:new Tr(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:us(r)}}function Aa(n,e){let{formMethod:t,formAction:i,formEncType:r,formData:s}=n.navigation;return{state:"loading",location:ti(n.location,e.location),formMethod:t||void 0,formAction:i||void 0,formEncType:r||void 0,formData:s||void 0}}function nv(n,e){let t=n;if(e){let i=n.findIndex(r=>r.route.id===e);i>=0&&(t=n.slice(0,i))}return t}function pf(n,e,t,i,r,s,o,l,a,c){let h=a?Object.values(a)[0]:l?Object.values(l)[0]:null,u=a?Object.keys(a)[0]:void 0,d=nv(e,u).filter((m,b)=>m.route.loader!=null&&(iv(n.loaderData,n.matches[b],m)||s.some(g=>g===m.route.id)||mf(n.location,n.matches[b],t,i,m,r,h))),p=[];return c&&c.forEach((m,b)=>{let[g,x]=m;o.includes(b)?p.push([b,g,x]):r&&mf(g,x,t,g,x,r,h)&&p.push([b,g,x])}),[d,p]}function iv(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function Hm(n,e){let t=n.route.path;return n.pathname!==e.pathname||t&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function mf(n,e,t,i,r,s,o){let l=Ac(n),a=e.params,c=Ac(i),h=r.params,u=Hm(e,r)||l.toString()===c.toString()||l.search!==c.search||s;if(r.route.shouldRevalidate){let f=r.route.shouldRevalidate(Ve({currentUrl:l,currentParams:a,nextUrl:c,nextParams:h},t,{actionResult:o,defaultShouldRevalidate:u}));if(typeof f=="boolean")return f}return u}async function Mr(n,e,t,i,r){i===void 0&&(i=!1),r===void 0&&(r=!1);let s,o,l,a=new Promise((h,u)=>l=u),c=()=>l();e.signal.addEventListener("abort",c);try{let h=t.route[n];fe(h,"Could not find the "+n+' to run on the "'+t.route.id+'" route'),o=await Promise.race([h({request:e,params:t.params}),a])}catch(h){s=Ot.error,o=h}finally{e.signal.removeEventListener("abort",c)}if(o instanceof Response){let h=o.status,u=o.headers.get("Location");if(r)throw o;if(h>=300&&h<=399&&u!=null){if(i)throw o;return{type:Ot.redirect,status:h,location:u,revalidate:o.headers.get("X-Remix-Revalidate")!==null}}let f,d=o.headers.get("Content-Type");return d&&d.startsWith("application/json")?f=await o.json():f=await o.text(),s===Ot.error?{type:s,error:new Tr(h,o.statusText,f),headers:o.headers}:{type:Ot.data,data:f,statusCode:o.status,headers:o.headers}}return s===Ot.error?{type:s,error:o}:o instanceof Gm?{type:Ot.deferred,deferredData:o}:{type:Ot.data,data:o}}function Dr(n,e,t){let i=Ac(n).toString(),r={signal:e};if(t){let{formMethod:s,formEncType:o,formData:l}=t;r.method=s.toUpperCase(),r.body=o==="application/x-www-form-urlencoded"?Ym(l):l}return new Request(i,r)}function Ym(n){let e=new URLSearchParams;for(let[t,i]of n.entries())fe(typeof i=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),e.append(t,i);return e}function rv(n,e,t,i,r){let s={},o=null,l,a=!1,c={};return t.forEach((h,u)=>{let f=e[u].route.id;if(fe(!ir(h),"Cannot handle redirect results in processLoaderData"),is(h)){let d=Hi(n,f),p=h.error;i&&(p=Object.values(i)[0],i=void 0),o=Object.assign(o||{},{[d.route.id]:p}),a||(a=!0,l=Jh(h.error)?h.error.status:500),h.headers&&(c[f]=h.headers)}else $i(h)?(r&&r.set(f,h.deferredData),s[f]=h.deferredData.data):(s[f]=h.data,h.statusCode!=null&&h.statusCode!==200&&!a&&(l=h.statusCode),h.headers&&(c[f]=h.headers))}),i&&(o=i),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function gf(n,e,t,i,r,s,o,l){let{loaderData:a,errors:c}=rv(e,t,i,r,l);for(let h=0;h<s.length;h++){let[u,,f]=s[h];fe(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let d=o[h];if(is(d)){let p=Hi(n.matches,f.route.id);c&&c[p.route.id]||(c=Ve({},c,{[p.route.id]:d.error})),n.fetchers.delete(u)}else{if(ir(d))throw new Error("Unhandled fetcher revalidation redirect");if($i(d))throw new Error("Unhandled fetcher deferred data");{let p={state:"idle",data:d.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};n.fetchers.set(u,p)}}}return{loaderData:a,errors:c}}function Ra(n,e,t){let i=Ve({},e);return t.forEach(r=>{let s=r.route.id;e[s]===void 0&&n[s]!==void 0&&(i[s]=n[s])}),i}function Hi(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function Of(n){let e=n.find(t=>t.index||t.path===""||t.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e,error:new Tr(404,"Not Found",null)}}function yf(n){let e=typeof n=="string"?n:Wl(n);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+e+"]")),{type:Ot.error,error:new Tr(405,"Method Not Allowed","No action found for ["+e+"]")}}function bf(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(ir(t))return t}}function Wl(n){return(n.pathname||"")+(n.search||"")}function sv(n,e){return n.pathname===e.pathname&&n.search===e.search&&n.hash!==e.hash}function $i(n){return n.type===Ot.deferred}function is(n){return n.type===Ot.error}function ir(n){return(n&&n.type)===Ot.redirect}async function xf(n,e,t,i,r,s){for(let o=0;o<t.length;o++){let l=t[o],a=e[o],c=n.find(u=>u.route.id===a.route.id),h=c!=null&&!Hm(c,a)&&(s&&s[a.route.id])!==void 0;$i(l)&&(r||h)&&await Km(l,i,r).then(u=>{u&&(t[o]=u||t[o])})}}async function Km(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Ot.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Ot.error,error:r}}return{type:Ot.data,data:n.deferredData.data}}}function Jm(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Sf(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function vf(n,e){let t=typeof e=="string"?Cn(e).search:e.search;return n[n.length-1].route.index&&!Jm(t||"")?n.slice(-2)[0]:n.slice(-1)[0]}function Ac(n){let e=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",t=typeof n=="string"?n:Wl(n);return new URL(t,e)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ho.apply(this,arguments)}function ov(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}const lv=typeof Object.is=="function"?Object.is:ov,{useState:av,useEffect:cv,useLayoutEffect:hv,useDebugValue:uv}=Cc;function fv(n,e,t){const i=e(),[{inst:r},s]=av({inst:{value:i,getSnapshot:e}});return hv(()=>{r.value=i,r.getSnapshot=e,Ea(r)&&s({inst:r})},[n,i,e]),cv(()=>(Ea(r)&&s({inst:r}),n(()=>{Ea(r)&&s({inst:r})})),[n]),uv(i),i}function Ea(n){const e=n.getSnapshot,t=n.value;try{const i=e();return!lv(t,i)}catch{return!0}}function dv(n,e,t){return e()}const pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mv=!pv,gv=mv?dv:fv,Ov="useSyncExternalStore"in Cc?(n=>n.useSyncExternalStore)(Cc):gv,eg=S.exports.createContext(null),jl=S.exports.createContext(null),Xs=S.exports.createContext(null),Yo=S.exports.createContext(null),Fl=S.exports.createContext(null),Ar=S.exports.createContext(null),An=S.exports.createContext({outlet:null,matches:[]}),tg=S.exports.createContext(null);function yv(n,e){let{relative:t}=e===void 0?{}:e;ui()||fe(!1);let{basename:i,navigator:r}=S.exports.useContext(Fl),{hash:s,pathname:o,search:l}=sg(n,{relative:t}),a=o;return i!=="/"&&(a=o==="/"?i:ni([i,o])),r.createHref({pathname:a,search:l,hash:s})}function ui(){return S.exports.useContext(Ar)!=null}function Rr(){return ui()||fe(!1),S.exports.useContext(Ar).location}function bv(){return S.exports.useContext(Ar).navigationType}function xv(n){ui()||fe(!1);let{pathname:e}=Rr();return S.exports.useMemo(()=>Ci(n,e),[e,n])}function ng(n){return n.filter((e,t)=>t===0||!e.route.index&&e.pathnameBase!==n[t-1].pathnameBase)}function fi(){ui()||fe(!1);let{basename:n,navigator:e}=S.exports.useContext(Fl),{matches:t}=S.exports.useContext(An),{pathname:i}=Rr(),r=JSON.stringify(ng(t).map(l=>l.pathnameBase)),s=S.exports.useRef(!1);return S.exports.useEffect(()=>{s.current=!0}),S.exports.useCallback(function(l,a){if(a===void 0&&(a={}),!s.current)return;if(typeof l=="number"){e.go(l);return}let c=Fm(l,JSON.parse(r),i,a.relative==="path");n!=="/"&&(c.pathname=c.pathname==="/"?n:ni([n,c.pathname])),(a.replace?e.replace:e.push)(c,a.state,a)},[n,e,r,i])}const ig=S.exports.createContext(null);function Sv(){return S.exports.useContext(ig)}function rg(n){let e=S.exports.useContext(An).outlet;return e&&O(ig.Provider,{value:n,children:e})}function Xi(){let{matches:n}=S.exports.useContext(An),e=n[n.length-1];return e?e.params:{}}function sg(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=S.exports.useContext(An),{pathname:r}=Rr(),s=JSON.stringify(ng(i).map(o=>o.pathnameBase));return S.exports.useMemo(()=>Fm(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}function eu(n,e){ui()||fe(!1);let t=S.exports.useContext(Xs),{matches:i}=S.exports.useContext(An),r=i[i.length-1],s=r?r.params:{};r&&r.pathname;let o=r?r.pathnameBase:"/";r&&r.route;let l=Rr(),a;if(e){var c;let p=typeof e=="string"?Cn(e):e;o==="/"||((c=p.pathname)==null?void 0:c.startsWith(o))||fe(!1),a=p}else a=l;let h=a.pathname||"/",u=o==="/"?h:h.slice(o.length)||"/",f=Gi(n,{pathname:u}),d=og(f&&f.map(p=>Object.assign({},p,{params:Object.assign({},s,p.params),pathname:ni([o,p.pathname]),pathnameBase:p.pathnameBase==="/"?o:ni([o,p.pathnameBase])})),i,t||void 0);return e?O(Ar.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},a),navigationType:Ne.Pop},children:d}):d}function vv(){let n=lg(),e=Jh(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i};return q(ke,{children:[O("h2",{children:"Unhandled Thrown Error!"}),O("h3",{style:{fontStyle:"italic"},children:e}),t?O("pre",{style:r,children:t}):null,O("p",{children:"\u{1F4BF} Hey developer \u{1F44B}"}),q("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own\xA0",O("code",{style:s,children:"errorElement"})," props on\xA0",O("code",{style:s,children:"<Route>"})]})]})}class wv extends S.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?O(tg.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function Qv(n){let{routeContext:e,match:t,children:i}=n,r=S.exports.useContext(eg);return r&&t.route.errorElement&&(r._deepestRenderedBoundaryId=t.route.id),O(An.Provider,{value:e,children:i})}function og(n,e,t){if(e===void 0&&(e=[]),n==null)if(t!=null&&t.errors)n=t.matches;else return null;let i=n,r=t==null?void 0:t.errors;if(r!=null){let s=i.findIndex(o=>o.route.id&&(r==null?void 0:r[o.route.id]));s>=0||fe(!1),i=i.slice(0,Math.min(i.length,s+1))}return i.reduceRight((s,o,l)=>{let a=o.route.id?r==null?void 0:r[o.route.id]:null,c=t?o.route.errorElement||O(vv,{}):null,h=()=>O(Qv,{match:o,routeContext:{outlet:s,matches:e.concat(i.slice(0,l+1))},children:a?c:o.route.element!==void 0?o.route.element:s});return t&&(o.route.errorElement||l===0)?O(wv,{location:t.location,component:c,error:a,children:h()}):h()},null)}var Rc;(function(n){n.UseRevalidator="useRevalidator"})(Rc||(Rc={}));var Xn;(function(n){n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator"})(Xn||(Xn={}));function Cv(n){let e=S.exports.useContext(jl);return e||fe(!1),e}function Ui(n){let e=S.exports.useContext(Xs);return e||fe(!1),e}function $v(){return Ui(Xn.UseNavigation).navigation}function kv(){let n=Cv(Rc.UseRevalidator),e=Ui(Xn.UseRevalidator);return{revalidate:n.router.revalidate,state:e.revalidation}}function Pv(){let{matches:n,loaderData:e}=Ui(Xn.UseMatches);return S.exports.useMemo(()=>n.map(t=>{let{pathname:i,params:r}=t;return{id:t.route.id,pathname:i,params:r,data:e[t.route.id],handle:t.route.handle}}),[n,e])}function Tv(){let n=Ui(Xn.UseLoaderData),e=S.exports.useContext(An);e||fe(!1);let t=e.matches[e.matches.length-1];return t.route.id||fe(!1),n.loaderData[t.route.id]}function Av(n){return Ui(Xn.UseRouteLoaderData).loaderData[n]}function Rv(){let n=Ui(Xn.UseActionData);return S.exports.useContext(An)||fe(!1),Object.values((n==null?void 0:n.actionData)||{})[0]}function lg(){var n;let e=S.exports.useContext(tg),t=Ui(Xn.UseRouteError),i=S.exports.useContext(An),r=i.matches[i.matches.length-1];return e||(i||fe(!1),r.route.id||fe(!1),(n=t.errors)==null?void 0:n[r.route.id])}function ag(){let n=S.exports.useContext(Yo);return n==null?void 0:n._data}function Ev(){let n=S.exports.useContext(Yo);return n==null?void 0:n._error}function _v(n){let{fallbackElement:e,router:t}=n,i=Ov(t.subscribe,()=>t.state,()=>t.state),r=S.exports.useMemo(()=>({createHref:t.createHref,go:o=>t.navigate(o),push:(o,l,a)=>t.navigate(o,{state:l,preventScrollReset:a==null?void 0:a.preventScrollReset}),replace:(o,l,a)=>t.navigate(o,{replace:!0,state:l,preventScrollReset:a==null?void 0:a.preventScrollReset})}),[t]),s=t.basename||"/";return O(jl.Provider,{value:{router:t,navigator:r,static:!1,basename:s},children:O(Xs.Provider,{value:i,children:O(Gl,{basename:t.basename,location:t.state.location,navigationType:t.state.historyAction,navigator:r,children:t.state.initialized?O(ug,{}):e})})})}function Mv(n){let{basename:e,children:t,initialEntries:i,initialIndex:r}=n,s=S.exports.useRef();s.current==null&&(s.current=Vm({initialEntries:i,initialIndex:r,v5Compat:!0}));let o=s.current,[l,a]=S.exports.useState({action:o.action,location:o.location});return S.exports.useLayoutEffect(()=>o.listen(a),[o]),O(Gl,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o})}function Dv(n){let{to:e,replace:t,state:i,relative:r}=n;ui()||fe(!1);let s=S.exports.useContext(Xs),o=fi();return S.exports.useEffect(()=>{s&&s.navigation.state!=="idle"||o(e,{replace:t,state:i,relative:r})}),null}function cg(n){return rg(n.context)}function hg(n){fe(!1)}function Gl(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Ne.Pop,navigator:s,static:o=!1}=n;ui()&&fe(!1);let l=e.replace(/^\/*/,"/"),a=S.exports.useMemo(()=>({basename:l,navigator:s,static:o}),[l,s,o]);typeof i=="string"&&(i=Cn(i));let{pathname:c="/",search:h="",hash:u="",state:f=null,key:d="default"}=i,p=S.exports.useMemo(()=>{let m=zm(c,l);return m==null?null:{pathname:m,search:h,hash:u,state:f,key:d}},[l,c,h,u,f,d]);return p==null?null:O(Fl.Provider,{value:a,children:O(Ar.Provider,{children:t,value:{location:p,navigationType:r}})})}function ug(n){let{children:e,location:t}=n,i=S.exports.useContext(jl),r=i&&!e?i.router.routes:fs(e);return eu(r,t)}function Nv(n){let{children:e,errorElement:t,resolve:i}=n;return O(Iv,{resolve:i,errorElement:t,children:O(Xv,{children:e})})}var Bt;(function(n){n[n.pending=0]="pending",n[n.success=1]="success",n[n.error=2]="error"})(Bt||(Bt={}));const Bv=new Promise(()=>{});class Iv extends S.exports.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){console.error("<Await> caught the following error during render",e,t)}render(){let{children:e,errorElement:t,resolve:i}=this.props,r=null,s=Bt.pending;if(!(i instanceof Promise))s=Bt.success,r=Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>i});else if(this.state.error){s=Bt.error;let o=this.state.error;r=Promise.reject().catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>o})}else i._tracked?(r=i,s=r._error!==void 0?Bt.error:r._data!==void 0?Bt.success:Bt.pending):(s=Bt.pending,Object.defineProperty(i,"_tracked",{get:()=>!0}),r=i.then(o=>Object.defineProperty(i,"_data",{get:()=>o}),o=>Object.defineProperty(i,"_error",{get:()=>o})));if(s===Bt.error&&r._error instanceof Go)throw Bv;if(s===Bt.error&&!t)throw r._error;if(s===Bt.error)return O(Yo.Provider,{value:r,children:t});if(s===Bt.success)return O(Yo.Provider,{value:r,children:e});throw r}}function Xv(n){let{children:e}=n,t=ag();return typeof e=="function"?e(t):O(ke,{children:e})}function fs(n,e){e===void 0&&(e=[]);let t=[];return S.exports.Children.forEach(n,(i,r)=>{if(!S.exports.isValidElement(i))return;if(i.type===S.exports.Fragment){t.push.apply(t,fs(i.props.children,e));return}i.type!==hg&&fe(!1),!i.props.index||!i.props.children||fe(!1);let s=[...e,r],o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,hasErrorBoundary:i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle};i.props.children&&(o.children=fs(i.props.children,s)),t.push(o)}),t}function Uv(n){return og(n)}function tu(n){return n.map(e=>{let t=Ho({},e);return t.hasErrorBoundary==null&&(t.hasErrorBoundary=t.errorElement!=null),t.children&&(t.children=tu(t.children)),t})}function Vv(n,e){return tv({basename:e==null?void 0:e.basename,history:Vm({initialEntries:e==null?void 0:e.initialEntries,initialIndex:e==null?void 0:e.initialIndex}),hydrationData:e==null?void 0:e.hydrationData,routes:tu(n)}).initialize()}const Zv=Object.freeze(Object.defineProperty({__proto__:null,Await:Nv,MemoryRouter:Mv,Navigate:Dv,Outlet:cg,Route:hg,Router:Gl,RouterProvider:_v,Routes:ug,UNSAFE_DataRouterContext:jl,UNSAFE_DataRouterStateContext:Xs,UNSAFE_DataStaticRouterContext:eg,UNSAFE_LocationContext:Ar,UNSAFE_NavigationContext:Fl,UNSAFE_RouteContext:An,UNSAFE_enhanceManualRouteObjects:tu,createMemoryRouter:Vv,createRoutesFromChildren:fs,createRoutesFromElements:fs,renderMatches:Uv,useActionData:Rv,useAsyncError:Ev,useAsyncValue:ag,useHref:yv,useInRouterContext:ui,useLoaderData:Tv,useLocation:Rr,useMatch:xv,useMatches:Pv,useNavigate:fi,useNavigation:$v,useNavigationType:bv,useOutlet:rg,useOutletContext:Sv,useParams:Xi,useResolvedPath:sg,useRevalidator:kv,useRouteError:lg,useRouteLoaderData:Av,useRoutes:eu,AbortedDeferredError:Go,get NavigationType(){return Ne},createPath:us,defer:KS,generatePath:Lm,isRouteErrorResponse:Jh,json:GS,matchPath:Ci,matchRoutes:Gi,parsePath:Cn,redirect:JS,resolvePath:jm},Symbol.toStringTag,{value:"Module"}));/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qv(n){let{basename:e,children:t,window:i}=n,r=S.exports.useRef();r.current==null&&(r.current=PS({window:i,v5Compat:!0}));let s=r.current,[o,l]=S.exports.useState({action:s.action,location:s.location});return S.exports.useLayoutEffect(()=>s.listen(l),[s]),O(Gl,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var wf;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmitImpl="useSubmitImpl",n.UseFetcher="useFetcher"})(wf||(wf={}));var Qf;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Qf||(Qf={}));function mr(n,e){return Lm(n,e)}var Lv=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s};function zv(n,e){n===void 0&&(n=!1);var t=Lv(S.exports.useState(n),2),i=t[0],r=t[1],s=S.exports.useMemo(function(){var o=e===void 0?!n:e,l=function(){return r(function(f){return f===n?o:n})},a=function(f){return r(f)},c=function(){return r(n)},h=function(){return r(o)};return{toggle:l,set:a,setLeft:c,setRight:h}},[]);return[i,s]}var Wv=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s};function jv(n){n===void 0&&(n=!1);var e=Wv(zv(n),2),t=e[0],i=e[1],r=i.toggle,s=i.set,o=S.exports.useMemo(function(){var l=function(){return s(!0)},a=function(){return s(!1)};return{toggle:r,set:function(h){return s(!!h)},setTrue:l,setFalse:a}},[]);return[t,o]}function Ec(n,e,t){t===void 0&&(t={});var i=$c(e);Sx(function(){var r=xm(t.target,window);if(!!(r!=null&&r.addEventListener)){var s=function(l){return i.current(l)};return r.addEventListener(n,s,{capture:t.capture,once:t.once,passive:t.passive}),function(){r.removeEventListener(n,s,{capture:t.capture})}}},[n,t.capture,t.once,t.passive],t.target)}var _c=globalThis&&globalThis.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fv={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Mc={ctrl:function(e){return e.ctrlKey},shift:function(e){return e.shiftKey},alt:function(e){return e.altKey},meta:function(e){return e.metaKey}};function Gv(n){var e=Object.keys(Mc).reduce(function(t,i){return Mc[i](n)?t+1:t},0);return[16,17,18,91,92].includes(n.keyCode)?e:e+1}function Cf(n,e,t){var i,r;if(!n.key)return!1;if(Sm(e))return n.keyCode===e;var s=e.split("."),o=0;try{for(var l=_c(s),a=l.next();!a.done;a=l.next()){var c=a.value,h=Mc[c],u=Fv[c.toLowerCase()];(h&&h(n)||u&&u===n.keyCode)&&o++}}catch(f){i={error:f}}finally{try{a&&!a.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return t?o===s.length&&Gv(n)===s.length:o===s.length}function Hv(n,e){return wx(n)?n:Qx(n)||Sm(n)?function(t){return Cf(t,n,e)}:Array.isArray(n)?function(t){return n.some(function(i){return Cf(t,i,e)})}:n?function(){return!0}:function(){return!1}}var Yv=["keydown"];function Kv(n,e,t){var i=t||{},r=i.events,s=r===void 0?Yv:r,o=i.target,l=i.exactMatch,a=l===void 0?!1:l,c=$c(e),h=$c(n);vx(function(){var u,f,d,p=xm(o,window);if(!!p){var m=function(y){var v,C=Hv(h.current,a);if(C(y))return(v=c.current)===null||v===void 0?void 0:v.call(c,y)};try{for(var b=_c(s),g=b.next();!g.done;g=b.next()){var x=g.value;(d=p==null?void 0:p.addEventListener)===null||d===void 0||d.call(p,x,m)}}catch(w){u={error:w}}finally{try{g&&!g.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}return function(){var w,y,v;try{for(var C=_c(s),$=C.next();!$.done;$=C.next()){var E=$.value;(v=p==null?void 0:p.removeEventListener)===null||v===void 0||v.call(p,E,m)}}catch(_){w={error:_}}finally{try{$&&!$.done&&(y=C.return)&&y.call(C)}finally{if(w)throw w.error}}}}},[s],o)}var sn=(n=>(n.Page="Page",n.Entity="Entity",n))(sn||{});const Jv=()=>O("div",{children:"ModuleManagerEntity"});var ew=["fieldProps","min","proFieldProps","max"],tw=function(e,t){var i=e.fieldProps,r=e.min,s=e.proFieldProps,o=e.max,l=Zl(e,ew);return O(ql,dt({valueType:"digit",fieldProps:dt({min:r,max:o},i),ref:t,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:s},l))};const Nr=Ds.forwardRef(tw);var nw=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],iw=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],rw=Ds.forwardRef(function(n,e){var t=n.fieldProps,i=n.children,r=n.params,s=n.proFieldProps,o=n.mode,l=n.valueEnum,a=n.request,c=n.showSearch,h=n.options,u=Zl(n,nw),f=S.exports.useContext(vm);return O(ql,dt(dt({valueEnum:wm(l),request:a,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:dt({options:h,mode:o,showSearch:c,getPopupContainer:f.getPopupContainer},t),ref:e,proFieldProps:s},u),{},{children:i}))}),sw=Ds.forwardRef(function(n,e){var t=n.fieldProps,i=n.children,r=n.params,s=n.proFieldProps,o=n.mode,l=n.valueEnum,a=n.request,c=n.options,h=Zl(n,iw),u=dt({options:c,mode:o||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},t),f=S.exports.useContext(vm);return O(ql,dt(dt({valueEnum:wm(l),request:a,params:r,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:dt({getPopupContainer:f.getPopupContainer},u),ref:e,proFieldProps:s},h),{},{children:i}))}),ow=rw,lw=sw,nu=ow;nu.SearchSelect=lw;nu.displayName="ProFormComponent";const fg=nu;var aw=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],cw=Ds.forwardRef(function(n,e){var t=n.fieldProps,i=n.unCheckedChildren,r=n.checkedChildren,s=n.proFieldProps,o=Zl(n,aw);return O(ql,dt({valueType:"switch",fieldProps:dt({unCheckedChildren:i,checkedChildren:r},t),ref:e,valuePropName:"checked",proFieldProps:s,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},o))});const Dc=cw,xt={appAtom:Cx,pagesSelector:$x,pageByIdSelector:kx,pageSelector:Px,entitySelector:Tx,entityByIdSelector:Ax,entitiesSelector:Rx,entityRelationsSelector:Ex,entityRelationsBySourceEntityNameMapSelector:_x,entityRelationsByTargetEntityNameMapSelector:Mx},hw=()=>{const n=Pn(xt.pagesSelector);return{addPage:S.exports.useCallback(t=>{n(Gt(i=>{i.push(t)}))},[n])}},uw=()=>{const n=Pn(xt.pageByIdSelector);return{removePage:S.exports.useCallback(t=>{n(Gt(i=>{Reflect.deleteProperty(i,t)}))},[n])}},fw=({searchVal:n,itemAddRef:e})=>{const{appId:t,pageId:i}=Xi(),r=fi(),o=We(xt.pagesSelector).filter(u=>u.name.includes(n)),[l]=gt.useForm(),{addPage:a}=hw(),{removePage:c}=uw(),h=u=>O(Tc.Item,{className:_a.listItem,onClick:()=>{r(mr(Ct.PAGE,{appId:t,pageId:u.id}))},children:q("div",{className:_a.listItemContent,children:[u.id===i?O(ht.Link,{children:u.name}):O(ht.Text,{children:u.name}),O(Bx,{trigger:["hover"],menu:{onClick:({key:f})=>{switch(f){case"Delete":c(u.id);break}},items:[{label:O(ht.Text,{children:"\u590D\u5236"}),key:"Copy"},{label:O(ht.Text,{type:"danger",children:"\u5220\u9664"}),key:"Delete"}]},children:O(QS,{className:`${_a.moreAction} mm_p-list_item_more_action`})},u.id)]})});return q(ke,{children:[e&&Qm.exports.createPortal(O(Dx,{form:l,layout:"horizontal",title:"\u521B\u5EFA\u9875\u9762",modalProps:{mask:!1},onFinish:async u=>(await l.validateFields(),console.log(u),a(Cm.generateDefaultPage(u.name)),l.resetFields(),!0),trigger:O(pt,{type:"text",shape:"circle",size:"small",children:O(Nx,{})}),children:O(Bn,{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"}],name:"name",label:"\u9875\u9762\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u9875\u9762\u540D\u79F0"})}),e),O(Tc,{dataSource:o,size:"small",rowKey:"id",renderItem:h})]})},_a={listItem:F({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:F({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:F({name:"eivff4",styles:"display:none"})},dw=({visible:n,module:e,onClose:t})=>{const i=$m(e).with(sn.Page,()=>"\u9875\u9762").with(sn.Entity,()=>"\u6570\u636E\u6A21\u578B").otherwise(()=>"");S.exports.useEffect(()=>{s("")},[e]);const[r,s]=S.exports.useState(""),o=S.exports.useRef(null),[l,a]=S.exports.useState(!1);return S.exports.useEffect(()=>{n&&a(!0)},[n]),O("div",{className:Ma.drawerWrapper,children:O(Ix,{zIndex:8,title:q("div",{children:[q("div",{className:Ma.drawerTitleWrapper,children:[O("span",{children:i}),O("span",{ref:o})]}),O(wi,{onChange:c=>s(c.target.value),value:r,allowClear:!0,placeholder:"\u641C\u7D22"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:Ma.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:t,open:n,children:l&&q(ke,{children:[e===sn.Page&&O(fw,{itemAddRef:o.current,searchVal:r}),e===sn.Entity&&O(Jv,{itemAddRef:o.current,searchVal:r})]})})})},Ma={drawerWrapper:F({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:F({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:F({name:"a4hmbt",styles:"position:absolute"})},pw=()=>q(Hn.Header,{className:Da.header,children:[O("div",{className:Da.headerLogoWrapper,children:O("img",{src:"/modou.svg",alt:""})}),q("div",{className:Da.headerRight,children:[O(pt,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"\u9884\u89C8"}),O(km,{src:"https://joeschmoe.io/api/v1/random"})]})]}),Da={header:F({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:F({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:F({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},mw=()=>{const n=Xi(),e=fi(),t=We(xt.appAtom),i=Ke.exports.isEmpty(t),r=Ke.exports.isEmpty(t.pages);return S.exports.useEffect(()=>{var s,o;i||(r?Ke.exports.isEmpty(t.entities)||e(mr(Ct.Entity,{...n,entityId:(o=Ke.exports.head(t.entities))==null?void 0:o.id}),{replace:!0}):e(mr(Ct.PAGE,{...n,pageId:(s=Ke.exports.head(t.pages))==null?void 0:s.id}),{replace:!0}))},[t.entities,t.pages,i,r,e,n]),O("div",{className:gw.wrapper,children:O(Vl,{size:"large"})})},gw={wrapper:F({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},Ow=[{title:"\u9875\u9762",icon:O(Xx,{}),key:sn.Page},{title:"\u6570\u636E\u6A21\u578B",icon:O(SS,{}),key:sn.Entity}],yw=()=>{var f;const n=Xi(),[e,t]=S.exports.useState(""),i=fi(),{pathname:r}=Rr(),s=Ci(Ct.PAGE,r),o=(f=Ci(Ct.Entity,r))!=null?f:Ci(Ct.Entities,r),l=S.exports.useCallback(()=>{t(s?sn.Page:o?sn.Entity:"")},[o,s]);Pm(l);const[a,c]=S.exports.useState(!1),h=({key:d})=>{switch(d){case sn.Page:d===e?c(p=>!p):(t(d),c(!0));break;case sn.Entity:c(!1),t(d),i(mr(Ct.Entities,{appId:n.appId}));break}};return Ci(Ct.APP,r)?O(mw,{}):q(Hn,{className:eo.layout,children:[O(pw,{}),q(Hn,{children:[O(Hn.Sider,{className:eo.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!a,children:O(Ux,{className:eo.menu,style:{width:"60px"},mode:"inline",selectedKeys:[e],onClick:h,items:Ow})}),q(Hn.Content,{className:eo.layoutContent,children:[O(dw,{onClose:()=>{c(!1),l()},module:e,visible:a}),O(cg,{})]})]})]})},eo={layout:F({name:"13udsys",styles:"height:100%"}),menu:F({name:"13udsys",styles:"height:100%"}),layoutContent:F({name:"bjn8wh",styles:"position:relative"}),sider:F({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},Na={header:F({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:F({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:F({name:"s0vnfv",styles:"height:32px"})},bw=()=>O(Hn.Header,{className:Na.header,children:O("div",{className:Na.logoWrapper,children:O("img",{src:"/modou.svg",className:Na.logo,alt:""})})}),Ba={content:F({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:F({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:F({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},xw=()=>{const n=fi();return O(Hn.Content,{className:Ba.content,children:O(Ms,{gutter:[0,0],children:Array(13).fill(1).map((e,t)=>O(dr,{className:Ba.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:O(pr,{onClick:()=>n("/app/appId"),className:Ba.card,actions:[O(Vx,{},"setting"),O(Zx,{},"edit"),O(qx,{},"ellipsis")],children:O(pr.Meta,{avatar:O(km,{shape:"square",src:`https://joeschmoe.io/api/v1/random?${t}`}),title:"APP NAME",description:"\u6211\u662F APP \u63CF\u8FF0"})})},t))})})},$f=()=>q(Hn,{className:F({name:"1d3w5wq",styles:"width:100%"}),children:[O(bw,{}),O(xw,{})]}),dg=()=>{const n=Pn(xt.entityByIdSelector),[e,{setFalse:t,setTrue:i}]=jv(!1),[r]=gt.useForm();return{setTrue:i,setFalse:t,onSubmitEntity:o=>{n(Gt(l=>{if(Reflect.has(l,o.id))l[o.id]={...l[o.id],...o};else{const a=Cm.generateDefaultEntity(o),c=Math.max(...Object.values(l).map(h=>h.position.x));l[a.id]={...a,position:{x:c+400,y:100}}}})),t()},form:r,open:e}};var Sw=function(e){return typeof e=="function"},vw=!1;const ww=vw;function Qw(n){ww&&(Sw(n)||console.error("useMemoizedFn expected parameter is a function, got "+typeof n));var e=S.exports.useRef(n);e.current=S.exports.useMemo(function(){return n},[n]);var t=S.exports.useRef();return t.current||(t.current=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return e.current.apply(this,i)}),t.current}var Cw=globalThis&&globalThis.__read||function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s},$w=function(){var e=Cw(S.exports.useState({}),2),t=e[1];return S.exports.useCallback(function(){return t({})},[])};const kw=$w;var _o={},Pw=n=>encodeURIComponent(n).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),pg="%[a-f0-9]{2}",kf=new RegExp(pg,"gi"),Pf=new RegExp("("+pg+")+","gi");function Nc(n,e){try{return decodeURIComponent(n.join(""))}catch{}if(n.length===1)return n;e=e||1;var t=n.slice(0,e),i=n.slice(e);return Array.prototype.concat.call([],Nc(t),Nc(i))}function Tw(n){try{return decodeURIComponent(n)}catch{for(var e=n.match(kf),t=1;t<e.length;t++)n=Nc(e,t).join(""),e=n.match(kf);return n}}function Aw(n){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},t=Pf.exec(n);t;){try{e[t[0]]=decodeURIComponent(t[0])}catch{var i=Tw(t[0]);i!==t[0]&&(e[t[0]]=i)}t=Pf.exec(n)}e["%C2"]="\uFFFD";for(var r=Object.keys(e),s=0;s<r.length;s++){var o=r[s];n=n.replace(new RegExp(o,"g"),e[o])}return n}var Rw=function(n){if(typeof n!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof n+"`");try{return n=n.replace(/\+/g," "),decodeURIComponent(n)}catch{return Aw(n)}},Ew=(n,e)=>{if(!(typeof n=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[n];const t=n.indexOf(e);return t===-1?[n]:[n.slice(0,t),n.slice(t+e.length)]},_w=function(n,e){for(var t={},i=Object.keys(n),r=Array.isArray(e),s=0;s<i.length;s++){var o=i[s],l=n[o];(r?e.indexOf(o)!==-1:e(o,l,n))&&(t[o]=l)}return t};(function(n){const e=Pw,t=Rw,i=Ew,r=_w,s=g=>g==null;function o(g){switch(g.arrayFormat){case"index":return x=>(w,y)=>{const v=w.length;return y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?w:y===null?[...w,[c(x,g),"[",v,"]"].join("")]:[...w,[c(x,g),"[",c(v,g),"]=",c(y,g)].join("")]};case"bracket":return x=>(w,y)=>y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?w:y===null?[...w,[c(x,g),"[]"].join("")]:[...w,[c(x,g),"[]=",c(y,g)].join("")];case"comma":case"separator":return x=>(w,y)=>y==null||y.length===0?w:w.length===0?[[c(x,g),"=",c(y,g)].join("")]:[[w,c(y,g)].join(g.arrayFormatSeparator)];default:return x=>(w,y)=>y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?w:y===null?[...w,c(x,g)]:[...w,[c(x,g),"=",c(y,g)].join("")]}}function l(g){let x;switch(g.arrayFormat){case"index":return(w,y,v)=>{if(x=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!x){v[w]=y;return}v[w]===void 0&&(v[w]={}),v[w][x[1]]=y};case"bracket":return(w,y,v)=>{if(x=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!x){v[w]=y;return}if(v[w]===void 0){v[w]=[y];return}v[w]=[].concat(v[w],y)};case"comma":case"separator":return(w,y,v)=>{const C=typeof y=="string"&&y.includes(g.arrayFormatSeparator),$=typeof y=="string"&&!C&&h(y,g).includes(g.arrayFormatSeparator);y=$?h(y,g):y;const E=C||$?y.split(g.arrayFormatSeparator).map(_=>h(_,g)):y===null?y:h(y,g);v[w]=E};default:return(w,y,v)=>{if(v[w]===void 0){v[w]=y;return}v[w]=[].concat(v[w],y)}}}function a(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(g,x){return x.encode?x.strict?e(g):encodeURIComponent(g):g}function h(g,x){return x.decode?t(g):g}function u(g){return Array.isArray(g)?g.sort():typeof g=="object"?u(Object.keys(g)).sort((x,w)=>Number(x)-Number(w)).map(x=>g[x]):g}function f(g){const x=g.indexOf("#");return x!==-1&&(g=g.slice(0,x)),g}function d(g){let x="";const w=g.indexOf("#");return w!==-1&&(x=g.slice(w)),x}function p(g){g=f(g);const x=g.indexOf("?");return x===-1?"":g.slice(x+1)}function m(g,x){return x.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):x.parseBooleans&&g!==null&&(g.toLowerCase()==="true"||g.toLowerCase()==="false")&&(g=g.toLowerCase()==="true"),g}function b(g,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),a(x.arrayFormatSeparator);const w=l(x),y=Object.create(null);if(typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g))return y;for(const v of g.split("&")){if(v==="")continue;let[C,$]=i(x.decode?v.replace(/\+/g," "):v,"=");$=$===void 0?null:["comma","separator"].includes(x.arrayFormat)?$:h($,x),w(h(C,x),$,y)}for(const v of Object.keys(y)){const C=y[v];if(typeof C=="object"&&C!==null)for(const $ of Object.keys(C))C[$]=m(C[$],x);else y[v]=m(C,x)}return x.sort===!1?y:(x.sort===!0?Object.keys(y).sort():Object.keys(y).sort(x.sort)).reduce((v,C)=>{const $=y[C];return Boolean($)&&typeof $=="object"&&!Array.isArray($)?v[C]=u($):v[C]=$,v},Object.create(null))}n.extract=p,n.parse=b,n.stringify=(g,x)=>{if(!g)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),a(x.arrayFormatSeparator);const w=$=>x.skipNull&&s(g[$])||x.skipEmptyString&&g[$]==="",y=o(x),v={};for(const $ of Object.keys(g))w($)||(v[$]=g[$]);const C=Object.keys(v);return x.sort!==!1&&C.sort(x.sort),C.map($=>{const E=g[$];return E===void 0?"":E===null?c($,x):Array.isArray(E)?E.reduce(y($),[]).join("&"):c($,x)+"="+c(E,x)}).filter($=>$.length>0).join("&")},n.parseUrl=(g,x)=>{x=Object.assign({decode:!0},x);const[w,y]=i(g,"#");return Object.assign({url:w.split("?")[0]||"",query:b(p(g),x)},x&&x.parseFragmentIdentifier&&y?{fragmentIdentifier:h(y,x)}:{})},n.stringifyUrl=(g,x)=>{x=Object.assign({encode:!0,strict:!0},x);const w=f(g.url).split("?")[0]||"",y=n.extract(g.url),v=n.parse(y,{sort:!1}),C=Object.assign(v,g.query);let $=n.stringify(C,x);$&&($=`?${$}`);let E=d(g.url);return g.fragmentIdentifier&&(E=`#${c(g.fragmentIdentifier,x)}`),`${w}${$}${E}`},n.pick=(g,x,w)=>{w=Object.assign({parseFragmentIdentifier:!0},w);const{url:y,query:v,fragmentIdentifier:C}=n.parseUrl(g,w);return n.stringifyUrl({url:y,query:r(v,x),fragmentIdentifier:C},w)},n.exclude=(g,x,w)=>{const y=Array.isArray(x)?v=>!x.includes(v):(v,C)=>!x(v,C);return n.pick(g,y,w)}})(_o);var zt=globalThis&&globalThis.__assign||function(){return zt=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},zt.apply(this,arguments)},Br=Zv,Mw={parseNumbers:!1,parseBooleans:!1},Dw={skipNull:!1,skipEmptyString:!1},mg=function(e,t){var i,r,s=t||{},o=s.navigateMode,l=o===void 0?"push":o,a=s.parseOptions,c=s.stringifyOptions,h=zt(zt({},Mw),a),u=zt(zt({},Dw),c),f=Br.useLocation(),d=(i=Br.useHistory)===null||i===void 0?void 0:i.call(Br),p=(r=Br.useNavigate)===null||r===void 0?void 0:r.call(Br),m=kw(),b=S.exports.useRef(typeof e=="function"?e():e||{}),g=S.exports.useMemo(function(){return _o.parse(f.search,h)},[f.search]),x=S.exports.useMemo(function(){return zt(zt({},b.current),g)},[g]),w=function(v){var C=typeof v=="function"?v(x):v;m(),d&&d[l]({hash:f.hash,search:_o.stringify(zt(zt({},g),C),u)||"?"}),p&&p({hash:f.hash,search:_o.stringify(zt(zt({},g),C),u)||"?"},{replace:l==="replace"})};return[x,Qw(w)]};function Nw(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(r){r(t)}),(i=n.get("*"))&&i.slice().map(function(r){r(e,t)})}}}const Yi=Nw();function St(n){if(typeof n=="string"||typeof n=="number")return""+n;let e="";if(Array.isArray(n))for(let t=0,i;t<n.length;t++)(i=St(n[t]))!==""&&(e+=(e&&" ")+i);else for(let t in n)n[t]&&(e+=(e&&" ")+t);return e}const Tf=n=>{let e;const t=new Set,i=(a,c)=>{const h=typeof a=="function"?a(e):a;if(h!==e){const u=e;e=(c!=null?c:typeof h!="object")?h:Object.assign({},e,h),t.forEach(f=>f(e,u))}},r=()=>e,l={setState:i,getState:r,subscribe:a=>(t.add(a),()=>t.delete(a)),destroy:()=>t.clear()};return e=n(i,r,l),l},Bw=n=>n?Tf(n):Tf;var gg={exports:{}},Og={},yg={exports:{}},bg={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gr=S.exports;function Iw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Xw=typeof Object.is=="function"?Object.is:Iw,Uw=gr.useState,Vw=gr.useEffect,Zw=gr.useLayoutEffect,qw=gr.useDebugValue;function Lw(n,e){var t=e(),i=Uw({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return Zw(function(){r.value=t,r.getSnapshot=e,Ia(r)&&s({inst:r})},[n,t,e]),Vw(function(){return Ia(r)&&s({inst:r}),n(function(){Ia(r)&&s({inst:r})})},[n]),qw(t),t}function Ia(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Xw(n,t)}catch{return!0}}function zw(n,e){return e()}var Ww=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zw:Lw;bg.useSyncExternalStore=gr.useSyncExternalStore!==void 0?gr.useSyncExternalStore:Ww;(function(n){n.exports=bg})(yg);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hl=S.exports,jw=yg.exports;function Fw(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gw=typeof Object.is=="function"?Object.is:Fw,Hw=jw.useSyncExternalStore,Yw=Hl.useRef,Kw=Hl.useEffect,Jw=Hl.useMemo,eQ=Hl.useDebugValue;Og.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=Yw(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Jw(function(){function a(d){if(!c){if(c=!0,h=d,d=i(d),r!==void 0&&o.hasValue){var p=o.value;if(r(p,d))return u=p}return u=d}if(p=u,Gw(h,d))return p;var m=i(d);return r!==void 0&&r(p,m)?p:(h=d,u=m)}var c=!1,h,u,f=t===void 0?null:t;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,t,i,r]);var l=Hw(n,s[0],s[1]);return Kw(function(){o.hasValue=!0,o.value=l},[l]),eQ(l),l};(function(n){n.exports=Og})(gg);const tQ=Lx(gg.exports),{useSyncExternalStoreWithSelector:nQ}=tQ;function iQ(n,e=n.getState,t){const i=nQ(n.subscribe,n.getState,n.getServerState||n.getState,e,t);return S.exports.useDebugValue(i),i}function Et(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var rQ={value:()=>{}};function Yl(){for(var n=0,e=arguments.length,t={},i;n<e;++n){if(!(i=arguments[n]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new Mo(t)}function Mo(n){this._=n}function sQ(n,e){return n.trim().split(/^|\s+/).map(function(t){var i="",r=t.indexOf(".");if(r>=0&&(i=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}Mo.prototype=Yl.prototype={constructor:Mo,on:function(n,e){var t=this._,i=sQ(n+"",t),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(n=i[s]).type)&&(r=oQ(t[r],n.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(n=i[s]).type)t[r]=Af(t[r],n.name,e);else if(e==null)for(r in t)t[r]=Af(t[r],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Mo(n)},call:function(n,e){if((r=arguments.length-2)>0)for(var t=new Array(r),i=0,r,s;i<r;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(s=this._[n],i=0,r=s.length;i<r;++i)s[i].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var i=this._[n],r=0,s=i.length;r<s;++r)i[r].value.apply(e,t)}};function oQ(n,e){for(var t=0,i=n.length,r;t<i;++t)if((r=n[t]).name===e)return r.value}function Af(n,e,t){for(var i=0,r=n.length;i<r;++i)if(n[i].name===e){n[i]=rQ,n=n.slice(0,i).concat(n.slice(i+1));break}return t!=null&&n.push({name:e,value:t}),n}var Bc="http://www.w3.org/1999/xhtml";const Rf={svg:"http://www.w3.org/2000/svg",xhtml:Bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Kl(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),Rf.hasOwnProperty(e)?{space:Rf[e],local:n}:n}function lQ(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Bc&&e.documentElement.namespaceURI===Bc?e.createElement(n):e.createElementNS(t,n)}}function aQ(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function xg(n){var e=Kl(n);return(e.local?aQ:lQ)(e)}function cQ(){}function iu(n){return n==null?cQ:function(){return this.querySelector(n)}}function hQ(n){typeof n!="function"&&(n=iu(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=new Array(o),a,c,h=0;h<o;++h)(a=s[h])&&(c=n.call(a,a.__data__,h,s))&&("__data__"in a&&(c.__data__=a.__data__),l[h]=c);return new qt(i,this._parents)}function uQ(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function fQ(){return[]}function Sg(n){return n==null?fQ:function(){return this.querySelectorAll(n)}}function dQ(n){return function(){return uQ(n.apply(this,arguments))}}function pQ(n){typeof n=="function"?n=dQ(n):n=Sg(n);for(var e=this._groups,t=e.length,i=[],r=[],s=0;s<t;++s)for(var o=e[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&(i.push(n.call(a,a.__data__,c,o)),r.push(a));return new qt(i,r)}function vg(n){return function(){return this.matches(n)}}function wg(n){return function(e){return e.matches(n)}}var mQ=Array.prototype.find;function gQ(n){return function(){return mQ.call(this.children,n)}}function OQ(){return this.firstElementChild}function yQ(n){return this.select(n==null?OQ:gQ(typeof n=="function"?n:wg(n)))}var bQ=Array.prototype.filter;function xQ(){return Array.from(this.children)}function SQ(n){return function(){return bQ.call(this.children,n)}}function vQ(n){return this.selectAll(n==null?xQ:SQ(typeof n=="function"?n:wg(n)))}function wQ(n){typeof n!="function"&&(n=vg(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=[],a,c=0;c<o;++c)(a=s[c])&&n.call(a,a.__data__,c,s)&&l.push(a);return new qt(i,this._parents)}function Qg(n){return new Array(n.length)}function QQ(){return new qt(this._enter||this._groups.map(Qg),this._parents)}function Ko(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}Ko.prototype={constructor:Ko,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function CQ(n){return function(){return n}}function $Q(n,e,t,i,r,s){for(var o=0,l,a=e.length,c=s.length;o<c;++o)(l=e[o])?(l.__data__=s[o],i[o]=l):t[o]=new Ko(n,s[o]);for(;o<a;++o)(l=e[o])&&(r[o]=l)}function kQ(n,e,t,i,r,s,o){var l,a,c=new Map,h=e.length,u=s.length,f=new Array(h),d;for(l=0;l<h;++l)(a=e[l])&&(f[l]=d=o.call(a,a.__data__,l,e)+"",c.has(d)?r[l]=a:c.set(d,a));for(l=0;l<u;++l)d=o.call(n,s[l],l,s)+"",(a=c.get(d))?(i[l]=a,a.__data__=s[l],c.delete(d)):t[l]=new Ko(n,s[l]);for(l=0;l<h;++l)(a=e[l])&&c.get(f[l])===a&&(r[l]=a)}function PQ(n){return n.__data__}function TQ(n,e){if(!arguments.length)return Array.from(this,PQ);var t=e?kQ:$Q,i=this._parents,r=this._groups;typeof n!="function"&&(n=CQ(n));for(var s=r.length,o=new Array(s),l=new Array(s),a=new Array(s),c=0;c<s;++c){var h=i[c],u=r[c],f=u.length,d=AQ(n.call(h,h&&h.__data__,c,i)),p=d.length,m=l[c]=new Array(p),b=o[c]=new Array(p),g=a[c]=new Array(f);t(h,u,m,b,g,d,e);for(var x=0,w=0,y,v;x<p;++x)if(y=m[x]){for(x>=w&&(w=x+1);!(v=b[w])&&++w<p;);y._next=v||null}}return o=new qt(o,i),o._enter=l,o._exit=a,o}function AQ(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function RQ(){return new qt(this._exit||this._groups.map(Qg),this._parents)}function EQ(n,e,t){var i=this.enter(),r=this,s=this.exit();return typeof n=="function"?(i=n(i),i&&(i=i.selection())):i=i.append(n+""),e!=null&&(r=e(r),r&&(r=r.selection())),t==null?s.remove():t(s),i&&r?i.merge(r).order():r}function _Q(n){for(var e=n.selection?n.selection():n,t=this._groups,i=e._groups,r=t.length,s=i.length,o=Math.min(r,s),l=new Array(r),a=0;a<o;++a)for(var c=t[a],h=i[a],u=c.length,f=l[a]=new Array(u),d,p=0;p<u;++p)(d=c[p]||h[p])&&(f[p]=d);for(;a<r;++a)l[a]=t[a];return new qt(l,this._parents)}function MQ(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var i=n[e],r=i.length-1,s=i[r],o;--r>=0;)(o=i[r])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function DQ(n){n||(n=NQ);function e(u,f){return u&&f?n(u.__data__,f.__data__):!u-!f}for(var t=this._groups,i=t.length,r=new Array(i),s=0;s<i;++s){for(var o=t[s],l=o.length,a=r[s]=new Array(l),c,h=0;h<l;++h)(c=o[h])&&(a[h]=c);a.sort(e)}return new qt(r,this._parents).order()}function NQ(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function BQ(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function IQ(){return Array.from(this)}function XQ(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null}function UQ(){let n=0;for(const e of this)++n;return n}function VQ(){return!this.node()}function ZQ(n){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var r=e[t],s=0,o=r.length,l;s<o;++s)(l=r[s])&&n.call(l,l.__data__,s,r);return this}function qQ(n){return function(){this.removeAttribute(n)}}function LQ(n){return function(){this.removeAttributeNS(n.space,n.local)}}function zQ(n,e){return function(){this.setAttribute(n,e)}}function WQ(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function jQ(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function FQ(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function GQ(n,e){var t=Kl(n);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?LQ:qQ:typeof e=="function"?t.local?FQ:jQ:t.local?WQ:zQ)(t,e))}function Cg(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function HQ(n){return function(){this.style.removeProperty(n)}}function YQ(n,e,t){return function(){this.style.setProperty(n,e,t)}}function KQ(n,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(n):this.style.setProperty(n,i,t)}}function JQ(n,e,t){return arguments.length>1?this.each((e==null?HQ:typeof e=="function"?KQ:YQ)(n,e,t==null?"":t)):Or(this.node(),n)}function Or(n,e){return n.style.getPropertyValue(e)||Cg(n).getComputedStyle(n,null).getPropertyValue(e)}function eC(n){return function(){delete this[n]}}function tC(n,e){return function(){this[n]=e}}function nC(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function iC(n,e){return arguments.length>1?this.each((e==null?eC:typeof e=="function"?nC:tC)(n,e)):this.node()[n]}function $g(n){return n.trim().split(/^|\s+/)}function ru(n){return n.classList||new kg(n)}function kg(n){this._node=n,this._names=$g(n.getAttribute("class")||"")}kg.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function Pg(n,e){for(var t=ru(n),i=-1,r=e.length;++i<r;)t.add(e[i])}function Tg(n,e){for(var t=ru(n),i=-1,r=e.length;++i<r;)t.remove(e[i])}function rC(n){return function(){Pg(this,n)}}function sC(n){return function(){Tg(this,n)}}function oC(n,e){return function(){(e.apply(this,arguments)?Pg:Tg)(this,n)}}function lC(n,e){var t=$g(n+"");if(arguments.length<2){for(var i=ru(this.node()),r=-1,s=t.length;++r<s;)if(!i.contains(t[r]))return!1;return!0}return this.each((typeof e=="function"?oC:e?rC:sC)(t,e))}function aC(){this.textContent=""}function cC(n){return function(){this.textContent=n}}function hC(n){return function(){var e=n.apply(this,arguments);this.textContent=e==null?"":e}}function uC(n){return arguments.length?this.each(n==null?aC:(typeof n=="function"?hC:cC)(n)):this.node().textContent}function fC(){this.innerHTML=""}function dC(n){return function(){this.innerHTML=n}}function pC(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e==null?"":e}}function mC(n){return arguments.length?this.each(n==null?fC:(typeof n=="function"?pC:dC)(n)):this.node().innerHTML}function gC(){this.nextSibling&&this.parentNode.appendChild(this)}function OC(){return this.each(gC)}function yC(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bC(){return this.each(yC)}function xC(n){var e=typeof n=="function"?n:xg(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function SC(){return null}function vC(n,e){var t=typeof n=="function"?n:xg(n),i=e==null?SC:typeof e=="function"?e:iu(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function wC(){var n=this.parentNode;n&&n.removeChild(this)}function QC(){return this.each(wC)}function CC(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function $C(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function kC(n){return this.select(n?$C:CC)}function PC(n){return arguments.length?this.property("__data__",n):this.node().__data__}function TC(n){return function(e){n.call(this,e,this.__data__)}}function AC(n){return n.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function RC(n){return function(){var e=this.__on;if(!!e){for(var t=0,i=-1,r=e.length,s;t<r;++t)s=e[t],(!n.type||s.type===n.type)&&s.name===n.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function EC(n,e,t){return function(){var i=this.__on,r,s=TC(e);if(i){for(var o=0,l=i.length;o<l;++o)if((r=i[o]).type===n.type&&r.name===n.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=t),r.value=e;return}}this.addEventListener(n.type,s,t),r={type:n.type,name:n.name,value:e,listener:s,options:t},i?i.push(r):this.__on=[r]}}function _C(n,e,t){var i=AC(n+""),r,s=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,c=l.length,h;a<c;++a)for(r=0,h=l[a];r<s;++r)if((o=i[r]).type===h.type&&o.name===h.name)return h.value}return}for(l=e?EC:RC,r=0;r<s;++r)this.each(l(i[r],e,t));return this}function Ag(n,e,t){var i=Cg(n),r=i.CustomEvent;typeof r=="function"?r=new r(e,t):(r=i.document.createEvent("Event"),t?(r.initEvent(e,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(e,!1,!1)),n.dispatchEvent(r)}function MC(n,e){return function(){return Ag(this,n,e)}}function DC(n,e){return function(){return Ag(this,n,e.apply(this,arguments))}}function NC(n,e){return this.each((typeof e=="function"?DC:MC)(n,e))}function*BC(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var i=n[e],r=0,s=i.length,o;r<s;++r)(o=i[r])&&(yield o)}var Rg=[null];function qt(n,e){this._groups=n,this._parents=e}function Us(){return new qt([[document.documentElement]],Rg)}function IC(){return this}qt.prototype=Us.prototype={constructor:qt,select:hQ,selectAll:pQ,selectChild:yQ,selectChildren:vQ,filter:wQ,data:TQ,enter:QQ,exit:RQ,join:EQ,merge:_Q,selection:IC,order:MQ,sort:DQ,call:BQ,nodes:IQ,node:XQ,size:UQ,empty:VQ,each:ZQ,attr:GQ,style:JQ,property:iC,classed:lC,text:uC,html:mC,raise:OC,lower:bC,append:xC,insert:vC,remove:QC,clone:kC,datum:PC,on:_C,dispatch:NC,[Symbol.iterator]:BC};function jt(n){return typeof n=="string"?new qt([[document.querySelector(n)]],[document.documentElement]):new qt([[n]],Rg)}function XC(n){let e;for(;e=n.sourceEvent;)n=e;return n}function nn(n,e){if(n=XC(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=n.clientX,i.y=n.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[n.clientX-r.left-e.clientLeft,n.clientY-r.top-e.clientTop]}}return[n.pageX,n.pageY]}const UC={passive:!1},ds={capture:!0,passive:!1};function Xa(n){n.stopImmediatePropagation()}function rr(n){n.preventDefault(),n.stopImmediatePropagation()}function Eg(n){var e=n.document.documentElement,t=jt(n).on("dragstart.drag",rr,ds);"onselectstart"in e?t.on("selectstart.drag",rr,ds):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function _g(n,e){var t=n.document.documentElement,i=jt(n).on("dragstart.drag",null);e&&(i.on("click.drag",rr,ds),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in t?i.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const to=n=>()=>n;function Ic(n,{sourceEvent:e,subject:t,target:i,identifier:r,active:s,x:o,y:l,dx:a,dy:c,dispatch:h}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}Ic.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function VC(n){return!n.ctrlKey&&!n.button}function ZC(){return this.parentNode}function qC(n,e){return e==null?{x:n.x,y:n.y}:e}function LC(){return navigator.maxTouchPoints||"ontouchstart"in this}function zC(){var n=VC,e=ZC,t=qC,i=LC,r={},s=Yl("start","drag","end"),o=0,l,a,c,h,u=0;function f(y){y.on("mousedown.drag",d).filter(i).on("touchstart.drag",b).on("touchmove.drag",g,UC).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(y,v){if(!(h||!n.call(this,y,v))){var C=w(this,e.call(this,y,v),y,v,"mouse");!C||(jt(y.view).on("mousemove.drag",p,ds).on("mouseup.drag",m,ds),Eg(y.view),Xa(y),c=!1,l=y.clientX,a=y.clientY,C("start",y))}}function p(y){if(rr(y),!c){var v=y.clientX-l,C=y.clientY-a;c=v*v+C*C>u}r.mouse("drag",y)}function m(y){jt(y.view).on("mousemove.drag mouseup.drag",null),_g(y.view,c),rr(y),r.mouse("end",y)}function b(y,v){if(!!n.call(this,y,v)){var C=y.changedTouches,$=e.call(this,y,v),E=C.length,_,A;for(_=0;_<E;++_)(A=w(this,$,y,v,C[_].identifier,C[_]))&&(Xa(y),A("start",y,C[_]))}}function g(y){var v=y.changedTouches,C=v.length,$,E;for($=0;$<C;++$)(E=r[v[$].identifier])&&(rr(y),E("drag",y,v[$]))}function x(y){var v=y.changedTouches,C=v.length,$,E;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),$=0;$<C;++$)(E=r[v[$].identifier])&&(Xa(y),E("end",y,v[$]))}function w(y,v,C,$,E,_){var A=s.copy(),U=nn(_||C,v),j,W,Q;if((Q=t.call(y,new Ic("beforestart",{sourceEvent:C,target:f,identifier:E,active:o,x:U[0],y:U[1],dx:0,dy:0,dispatch:A}),$))!=null)return j=Q.x-U[0]||0,W=Q.y-U[1]||0,function T(P,B,M){var X=U,V;switch(P){case"start":r[E]=T,V=o++;break;case"end":delete r[E],--o;case"drag":U=nn(M||B,v),V=o;break}A.call(P,y,new Ic(P,{sourceEvent:B,subject:Q,target:f,identifier:E,active:V,x:U[0]+j,y:U[1]+W,dx:U[0]-X[0],dy:U[1]-X[1],dispatch:A}),$)}}return f.filter=function(y){return arguments.length?(n=typeof y=="function"?y:to(!!y),f):n},f.container=function(y){return arguments.length?(e=typeof y=="function"?y:to(y),f):e},f.subject=function(y){return arguments.length?(t=typeof y=="function"?y:to(y),f):t},f.touchable=function(y){return arguments.length?(i=typeof y=="function"?y:to(!!y),f):i},f.on=function(){var y=s.on.apply(s,arguments);return y===s?f:y},f.clickDistance=function(y){return arguments.length?(u=(y=+y)*y,f):Math.sqrt(u)},f}function su(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function Mg(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function Vs(){}var ps=.7,Jo=1/ps,sr="\\s*([+-]?\\d+)\\s*",ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WC=/^#([0-9a-f]{3,8})$/,jC=new RegExp(`^rgb\\(${sr},${sr},${sr}\\)$`),FC=new RegExp(`^rgb\\(${vn},${vn},${vn}\\)$`),GC=new RegExp(`^rgba\\(${sr},${sr},${sr},${ms}\\)$`),HC=new RegExp(`^rgba\\(${vn},${vn},${vn},${ms}\\)$`),YC=new RegExp(`^hsl\\(${ms},${vn},${vn}\\)$`),KC=new RegExp(`^hsla\\(${ms},${vn},${vn},${ms}\\)$`),Ef={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};su(Vs,gs,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:_f,formatHex:_f,formatHex8:JC,formatHsl:e$,formatRgb:Mf,toString:Mf});function _f(){return this.rgb().formatHex()}function JC(){return this.rgb().formatHex8()}function e$(){return Dg(this).formatHsl()}function Mf(){return this.rgb().formatRgb()}function gs(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=WC.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?Df(e):t===3?new At(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?no(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?no(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=jC.exec(n))?new At(e[1],e[2],e[3],1):(e=FC.exec(n))?new At(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=GC.exec(n))?no(e[1],e[2],e[3],e[4]):(e=HC.exec(n))?no(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=YC.exec(n))?If(e[1],e[2]/100,e[3]/100,1):(e=KC.exec(n))?If(e[1],e[2]/100,e[3]/100,e[4]):Ef.hasOwnProperty(n)?Df(Ef[n]):n==="transparent"?new At(NaN,NaN,NaN,0):null}function Df(n){return new At(n>>16&255,n>>8&255,n&255,1)}function no(n,e,t,i){return i<=0&&(n=e=t=NaN),new At(n,e,t,i)}function t$(n){return n instanceof Vs||(n=gs(n)),n?(n=n.rgb(),new At(n.r,n.g,n.b,n.opacity)):new At}function Xc(n,e,t,i){return arguments.length===1?t$(n):new At(n,e,t,i==null?1:i)}function At(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}su(At,Xc,Mg(Vs,{brighter(n){return n=n==null?Jo:Math.pow(Jo,n),new At(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ps:Math.pow(ps,n),new At(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new At(Ai(this.r),Ai(this.g),Ai(this.b),el(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Nf,formatHex:Nf,formatHex8:n$,formatRgb:Bf,toString:Bf}));function Nf(){return`#${ki(this.r)}${ki(this.g)}${ki(this.b)}`}function n$(){return`#${ki(this.r)}${ki(this.g)}${ki(this.b)}${ki((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bf(){const n=el(this.opacity);return`${n===1?"rgb(":"rgba("}${Ai(this.r)}, ${Ai(this.g)}, ${Ai(this.b)}${n===1?")":`, ${n})`}`}function el(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ai(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ki(n){return n=Ai(n),(n<16?"0":"")+n.toString(16)}function If(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new rn(n,e,t,i)}function Dg(n){if(n instanceof rn)return new rn(n.h,n.s,n.l,n.opacity);if(n instanceof Vs||(n=gs(n)),!n)return new rn;if(n instanceof rn)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,l=s-r,a=(s+r)/2;return l?(e===s?o=(t-i)/l+(t<i)*6:t===s?o=(i-e)/l+2:o=(e-t)/l+4,l/=a<.5?s+r:2-s-r,o*=60):l=a>0&&a<1?0:o,new rn(o,l,a,n.opacity)}function i$(n,e,t,i){return arguments.length===1?Dg(n):new rn(n,e,t,i==null?1:i)}function rn(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}su(rn,i$,Mg(Vs,{brighter(n){return n=n==null?Jo:Math.pow(Jo,n),new rn(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ps:Math.pow(ps,n),new rn(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new At(Ua(n>=240?n-240:n+120,r,i),Ua(n,r,i),Ua(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new rn(Xf(this.h),io(this.s),io(this.l),el(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=el(this.opacity);return`${n===1?"hsl(":"hsla("}${Xf(this.h)}, ${io(this.s)*100}%, ${io(this.l)*100}%${n===1?")":`, ${n})`}`}}));function Xf(n){return n=(n||0)%360,n<0?n+360:n}function io(n){return Math.max(0,Math.min(1,n||0))}function Ua(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const Ng=n=>()=>n;function r$(n,e){return function(t){return n+t*e}}function s$(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function o$(n){return(n=+n)==1?Bg:function(e,t){return t-e?s$(e,t,n):Ng(isNaN(e)?t:e)}}function Bg(n,e){var t=e-n;return t?r$(n,t):Ng(isNaN(n)?e:n)}const Uf=function n(e){var t=o$(e);function i(r,s){var o=t((r=Xc(r)).r,(s=Xc(s)).r),l=t(r.g,s.g),a=t(r.b,s.b),c=Bg(r.opacity,s.opacity);return function(h){return r.r=o(h),r.g=l(h),r.b=a(h),r.opacity=c(h),r+""}}return i.gamma=n,i}(1);function Ln(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var Uc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Va=new RegExp(Uc.source,"g");function l$(n){return function(){return n}}function a$(n){return function(e){return n(e)+""}}function c$(n,e){var t=Uc.lastIndex=Va.lastIndex=0,i,r,s,o=-1,l=[],a=[];for(n=n+"",e=e+"";(i=Uc.exec(n))&&(r=Va.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),l[o]?l[o]+=s:l[++o]=s),(i=i[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,a.push({i:o,x:Ln(i,r)})),t=Va.lastIndex;return t<e.length&&(s=e.slice(t),l[o]?l[o]+=s:l[++o]=s),l.length<2?a[0]?a$(a[0].x):l$(e):(e=a.length,function(c){for(var h=0,u;h<e;++h)l[(u=a[h]).i]=u.x(c);return l.join("")})}var Vf=180/Math.PI,Vc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ig(n,e,t,i,r,s){var o,l,a;return(o=Math.sqrt(n*n+e*e))&&(n/=o,e/=o),(a=n*t+e*i)&&(t-=n*a,i-=e*a),(l=Math.sqrt(t*t+i*i))&&(t/=l,i/=l,a/=l),n*i<e*t&&(n=-n,e=-e,a=-a,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,n)*Vf,skewX:Math.atan(a)*Vf,scaleX:o,scaleY:l}}var ro;function h$(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?Vc:Ig(e.a,e.b,e.c,e.d,e.e,e.f)}function u$(n){return n==null||(ro||(ro=document.createElementNS("http://www.w3.org/2000/svg","g")),ro.setAttribute("transform",n),!(n=ro.transform.baseVal.consolidate()))?Vc:(n=n.matrix,Ig(n.a,n.b,n.c,n.d,n.e,n.f))}function Xg(n,e,t,i){function r(c){return c.length?c.pop()+" ":""}function s(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push("translate(",null,e,null,t);p.push({i:m-4,x:Ln(c,u)},{i:m-2,x:Ln(h,f)})}else(u||f)&&d.push("translate("+u+e+f+t)}function o(c,h,u,f){c!==h?(c-h>180?h+=360:h-c>180&&(c+=360),f.push({i:u.push(r(u)+"rotate(",null,i)-2,x:Ln(c,h)})):h&&u.push(r(u)+"rotate("+h+i)}function l(c,h,u,f){c!==h?f.push({i:u.push(r(u)+"skewX(",null,i)-2,x:Ln(c,h)}):h&&u.push(r(u)+"skewX("+h+i)}function a(c,h,u,f,d,p){if(c!==u||h!==f){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ln(c,u)},{i:m-2,x:Ln(h,f)})}else(u!==1||f!==1)&&d.push(r(d)+"scale("+u+","+f+")")}return function(c,h){var u=[],f=[];return c=n(c),h=n(h),s(c.translateX,c.translateY,h.translateX,h.translateY,u,f),o(c.rotate,h.rotate,u,f),l(c.skewX,h.skewX,u,f),a(c.scaleX,c.scaleY,h.scaleX,h.scaleY,u,f),c=h=null,function(d){for(var p=-1,m=f.length,b;++p<m;)u[(b=f[p]).i]=b.x(d);return u.join("")}}}var f$=Xg(h$,"px, ","px)","deg)"),d$=Xg(u$,", ",")",")"),p$=1e-12;function Zf(n){return((n=Math.exp(n))+1/n)/2}function m$(n){return((n=Math.exp(n))-1/n)/2}function g$(n){return((n=Math.exp(2*n))-1)/(n+1)}const O$=function n(e,t,i){function r(s,o){var l=s[0],a=s[1],c=s[2],h=o[0],u=o[1],f=o[2],d=h-l,p=u-a,m=d*d+p*p,b,g;if(m<p$)g=Math.log(f/c)/e,b=function($){return[l+$*d,a+$*p,c*Math.exp(e*$*g)]};else{var x=Math.sqrt(m),w=(f*f-c*c+i*m)/(2*c*t*x),y=(f*f-c*c-i*m)/(2*f*t*x),v=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(y*y+1)-y);g=(C-v)/e,b=function($){var E=$*g,_=Zf(v),A=c/(t*x)*(_*g$(e*E+v)-m$(v));return[l+A*d,a+A*p,c*_/Zf(e*E+v)]}}return b.duration=g*1e3*e/Math.SQRT2,b}return r.rho=function(s){var o=Math.max(.001,+s),l=o*o,a=l*l;return n(o,l,a)},r}(Math.SQRT2,2,4);var yr=0,Hr=0,Ir=0,Ug=1e3,tl,Yr,nl=0,Mi=0,Jl=0,Os=typeof performance=="object"&&performance.now?performance:Date,Vg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function ou(){return Mi||(Vg(y$),Mi=Os.now()+Jl)}function y$(){Mi=0}function il(){this._call=this._time=this._next=null}il.prototype=Zg.prototype={constructor:il,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?ou():+t)+(e==null?0:+e),!this._next&&Yr!==this&&(Yr?Yr._next=this:tl=this,Yr=this),this._call=n,this._time=t,Zc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zc())}};function Zg(n,e,t){var i=new il;return i.restart(n,e,t),i}function b$(){ou(),++yr;for(var n=tl,e;n;)(e=Mi-n._time)>=0&&n._call.call(void 0,e),n=n._next;--yr}function qf(){Mi=(nl=Os.now())+Jl,yr=Hr=0;try{b$()}finally{yr=0,S$(),Mi=0}}function x$(){var n=Os.now(),e=n-nl;e>Ug&&(Jl-=e,nl=n)}function S$(){for(var n,e=tl,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:tl=t);Yr=n,Zc(i)}function Zc(n){if(!yr){Hr&&(Hr=clearTimeout(Hr));var e=n-Mi;e>24?(n<1/0&&(Hr=setTimeout(qf,n-Os.now()-Jl)),Ir&&(Ir=clearInterval(Ir))):(Ir||(nl=Os.now(),Ir=setInterval(x$,Ug)),yr=1,Vg(qf))}}function Lf(n,e,t){var i=new il;return e=e==null?0:+e,i.restart(r=>{i.stop(),n(r+e)},e,t),i}var v$=Yl("start","end","cancel","interrupt"),w$=[],qg=0,zf=1,qc=2,Do=3,Wf=4,Lc=5,No=6;function ea(n,e,t,i,r,s){var o=n.__transition;if(!o)n.__transition={};else if(t in o)return;Q$(n,t,{name:e,index:i,group:r,on:v$,tween:w$,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:qg})}function lu(n,e){var t=cn(n,e);if(t.state>qg)throw new Error("too late; already scheduled");return t}function Rn(n,e){var t=cn(n,e);if(t.state>Do)throw new Error("too late; already running");return t}function cn(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Q$(n,e,t){var i=n.__transition,r;i[e]=t,t.timer=Zg(s,0,t.time);function s(c){t.state=zf,t.timer.restart(o,t.delay,t.time),t.delay<=c&&o(c-t.delay)}function o(c){var h,u,f,d;if(t.state!==zf)return a();for(h in i)if(d=i[h],d.name===t.name){if(d.state===Do)return Lf(o);d.state===Wf?(d.state=No,d.timer.stop(),d.on.call("interrupt",n,n.__data__,d.index,d.group),delete i[h]):+h<e&&(d.state=No,d.timer.stop(),d.on.call("cancel",n,n.__data__,d.index,d.group),delete i[h])}if(Lf(function(){t.state===Do&&(t.state=Wf,t.timer.restart(l,t.delay,t.time),l(c))}),t.state=qc,t.on.call("start",n,n.__data__,t.index,t.group),t.state===qc){for(t.state=Do,r=new Array(f=t.tween.length),h=0,u=-1;h<f;++h)(d=t.tween[h].value.call(n,n.__data__,t.index,t.group))&&(r[++u]=d);r.length=u+1}}function l(c){for(var h=c<t.duration?t.ease.call(null,c/t.duration):(t.timer.restart(a),t.state=Lc,1),u=-1,f=r.length;++u<f;)r[u].call(n,h);t.state===Lc&&(t.on.call("end",n,n.__data__,t.index,t.group),a())}function a(){t.state=No,t.timer.stop(),delete i[e];for(var c in i)return;delete n.__transition}}function Bo(n,e){var t=n.__transition,i,r,s=!0,o;if(!!t){e=e==null?null:e+"";for(o in t){if((i=t[o]).name!==e){s=!1;continue}r=i.state>qc&&i.state<Lc,i.state=No,i.timer.stop(),i.on.call(r?"interrupt":"cancel",n,n.__data__,i.index,i.group),delete t[o]}s&&delete n.__transition}}function C$(n){return this.each(function(){Bo(this,n)})}function $$(n,e){var t,i;return function(){var r=Rn(this,n),s=r.tween;if(s!==t){i=t=s;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function k$(n,e,t){var i,r;if(typeof t!="function")throw new Error;return function(){var s=Rn(this,n),o=s.tween;if(o!==i){r=(i=o).slice();for(var l={name:e,value:t},a=0,c=r.length;a<c;++a)if(r[a].name===e){r[a]=l;break}a===c&&r.push(l)}s.tween=r}}function P$(n,e){var t=this._id;if(n+="",arguments.length<2){for(var i=cn(this.node(),t).tween,r=0,s=i.length,o;r<s;++r)if((o=i[r]).name===n)return o.value;return null}return this.each((e==null?$$:k$)(t,n,e))}function au(n,e,t){var i=n._id;return n.each(function(){var r=Rn(this,i);(r.value||(r.value={}))[e]=t.apply(this,arguments)}),function(r){return cn(r,i).value[e]}}function Lg(n,e){var t;return(typeof e=="number"?Ln:e instanceof gs?Uf:(t=gs(e))?(e=t,Uf):c$)(n,e)}function T$(n){return function(){this.removeAttribute(n)}}function A$(n){return function(){this.removeAttributeNS(n.space,n.local)}}function R$(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttribute(n);return o===r?null:o===i?s:s=e(i=o,t)}}function E$(n,e,t){var i,r=t+"",s;return function(){var o=this.getAttributeNS(n.space,n.local);return o===r?null:o===i?s:s=e(i=o,t)}}function _$(n,e,t){var i,r,s;return function(){var o,l=t(this),a;return l==null?void this.removeAttribute(n):(o=this.getAttribute(n),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=e(i=o,l)))}}function M$(n,e,t){var i,r,s;return function(){var o,l=t(this),a;return l==null?void this.removeAttributeNS(n.space,n.local):(o=this.getAttributeNS(n.space,n.local),a=l+"",o===a?null:o===i&&a===r?s:(r=a,s=e(i=o,l)))}}function D$(n,e){var t=Kl(n),i=t==="transform"?d$:Lg;return this.attrTween(n,typeof e=="function"?(t.local?M$:_$)(t,i,au(this,"attr."+n,e)):e==null?(t.local?A$:T$)(t):(t.local?E$:R$)(t,i,e))}function N$(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function B$(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function I$(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&B$(n,s)),t}return r._value=e,r}function X$(n,e){var t,i;function r(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&N$(n,s)),t}return r._value=e,r}function U$(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Kl(n);return this.tween(t,(i.local?I$:X$)(i,e))}function V$(n,e){return function(){lu(this,n).delay=+e.apply(this,arguments)}}function Z$(n,e){return e=+e,function(){lu(this,n).delay=e}}function q$(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?V$:Z$)(e,n)):cn(this.node(),e).delay}function L$(n,e){return function(){Rn(this,n).duration=+e.apply(this,arguments)}}function z$(n,e){return e=+e,function(){Rn(this,n).duration=e}}function W$(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?L$:z$)(e,n)):cn(this.node(),e).duration}function j$(n,e){if(typeof e!="function")throw new Error;return function(){Rn(this,n).ease=e}}function F$(n){var e=this._id;return arguments.length?this.each(j$(e,n)):cn(this.node(),e).ease}function G$(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Rn(this,n).ease=t}}function H$(n){if(typeof n!="function")throw new Error;return this.each(G$(this._id,n))}function Y$(n){typeof n!="function"&&(n=vg(n));for(var e=this._groups,t=e.length,i=new Array(t),r=0;r<t;++r)for(var s=e[r],o=s.length,l=i[r]=[],a,c=0;c<o;++c)(a=s[c])&&n.call(a,a.__data__,c,s)&&l.push(a);return new Un(i,this._parents,this._name,this._id)}function K$(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,i=e.length,r=t.length,s=Math.min(i,r),o=new Array(i),l=0;l<s;++l)for(var a=e[l],c=t[l],h=a.length,u=o[l]=new Array(h),f,d=0;d<h;++d)(f=a[d]||c[d])&&(u[d]=f);for(;l<i;++l)o[l]=e[l];return new Un(o,this._parents,this._name,this._id)}function J$(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function ek(n,e,t){var i,r,s=J$(e)?lu:Rn;return function(){var o=s(this,n),l=o.on;l!==i&&(r=(i=l).copy()).on(e,t),o.on=r}}function tk(n,e){var t=this._id;return arguments.length<2?cn(this.node(),t).on.on(n):this.each(ek(t,n,e))}function nk(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function ik(){return this.on("end.remove",nk(this._id))}function rk(n){var e=this._name,t=this._id;typeof n!="function"&&(n=iu(n));for(var i=this._groups,r=i.length,s=new Array(r),o=0;o<r;++o)for(var l=i[o],a=l.length,c=s[o]=new Array(a),h,u,f=0;f<a;++f)(h=l[f])&&(u=n.call(h,h.__data__,f,l))&&("__data__"in h&&(u.__data__=h.__data__),c[f]=u,ea(c[f],e,t,f,c,cn(h,t)));return new Un(s,this._parents,e,t)}function sk(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Sg(n));for(var i=this._groups,r=i.length,s=[],o=[],l=0;l<r;++l)for(var a=i[l],c=a.length,h,u=0;u<c;++u)if(h=a[u]){for(var f=n.call(h,h.__data__,u,a),d,p=cn(h,t),m=0,b=f.length;m<b;++m)(d=f[m])&&ea(d,e,t,m,f,p);s.push(f),o.push(h)}return new Un(s,o,e,t)}var ok=Us.prototype.constructor;function lk(){return new ok(this._groups,this._parents)}function ak(n,e){var t,i,r;return function(){var s=Or(this,n),o=(this.style.removeProperty(n),Or(this,n));return s===o?null:s===t&&o===i?r:r=e(t=s,i=o)}}function zg(n){return function(){this.style.removeProperty(n)}}function ck(n,e,t){var i,r=t+"",s;return function(){var o=Or(this,n);return o===r?null:o===i?s:s=e(i=o,t)}}function hk(n,e,t){var i,r,s;return function(){var o=Or(this,n),l=t(this),a=l+"";return l==null&&(a=l=(this.style.removeProperty(n),Or(this,n))),o===a?null:o===i&&a===r?s:(r=a,s=e(i=o,l))}}function uk(n,e){var t,i,r,s="style."+e,o="end."+s,l;return function(){var a=Rn(this,n),c=a.on,h=a.value[s]==null?l||(l=zg(e)):void 0;(c!==t||r!==h)&&(i=(t=c).copy()).on(o,r=h),a.on=i}}function fk(n,e,t){var i=(n+="")=="transform"?f$:Lg;return e==null?this.styleTween(n,ak(n,i)).on("end.style."+n,zg(n)):typeof e=="function"?this.styleTween(n,hk(n,i,au(this,"style."+n,e))).each(uk(this._id,n)):this.styleTween(n,ck(n,i,e),t).on("end.style."+n,null)}function dk(n,e,t){return function(i){this.style.setProperty(n,e.call(this,i),t)}}function pk(n,e,t){var i,r;function s(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&dk(n,o,t)),i}return s._value=e,s}function mk(n,e,t){var i="style."+(n+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,pk(n,e,t==null?"":t))}function gk(n){return function(){this.textContent=n}}function Ok(n){return function(){var e=n(this);this.textContent=e==null?"":e}}function yk(n){return this.tween("text",typeof n=="function"?Ok(au(this,"text",n)):gk(n==null?"":n+""))}function bk(n){return function(e){this.textContent=n.call(this,e)}}function xk(n){var e,t;function i(){var r=n.apply(this,arguments);return r!==t&&(e=(t=r)&&bk(r)),e}return i._value=n,i}function Sk(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,xk(n))}function vk(){for(var n=this._name,e=this._id,t=Wg(),i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,c=0;c<l;++c)if(a=o[c]){var h=cn(a,e);ea(a,n,t,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Un(i,this._parents,n,t)}function wk(){var n,e,t=this,i=t._id,r=t.size();return new Promise(function(s,o){var l={value:o},a={value:function(){--r===0&&s()}};t.each(function(){var c=Rn(this,i),h=c.on;h!==n&&(e=(n=h).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),c.on=e}),r===0&&s()})}var Qk=0;function Un(n,e,t,i){this._groups=n,this._parents=e,this._name=t,this._id=i}function Wg(){return++Qk}var Mn=Us.prototype;Un.prototype={constructor:Un,select:rk,selectAll:sk,selectChild:Mn.selectChild,selectChildren:Mn.selectChildren,filter:Y$,merge:K$,selection:lk,transition:vk,call:Mn.call,nodes:Mn.nodes,node:Mn.node,size:Mn.size,empty:Mn.empty,each:Mn.each,on:tk,attr:D$,attrTween:U$,style:fk,styleTween:mk,text:yk,textTween:Sk,remove:ik,tween:P$,delay:q$,duration:W$,ease:F$,easeVarying:H$,end:wk,[Symbol.iterator]:Mn[Symbol.iterator]};function Ck(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var $k={time:null,delay:0,duration:250,ease:Ck};function kk(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function Pk(n){var e,t;n instanceof Un?(e=n._id,n=n._name):(e=Wg(),(t=$k).time=ou(),n=n==null?null:n+"");for(var i=this._groups,r=i.length,s=0;s<r;++s)for(var o=i[s],l=o.length,a,c=0;c<l;++c)(a=o[c])&&ea(a,n,e,c,o,t||kk(a,e));return new Un(i,this._parents,n,e)}Us.prototype.interrupt=C$;Us.prototype.transition=Pk;const so=n=>()=>n;function Tk(n,{sourceEvent:e,target:t,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function In(n,e,t){this.k=n,this.x=e,this.y=t}In.prototype={constructor:In,scale:function(n){return n===1?this:new In(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new In(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ii=new In(1,0,0);In.prototype;function Za(n){n.stopImmediatePropagation()}function Xr(n){n.preventDefault(),n.stopImmediatePropagation()}function Ak(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Rk(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function jf(){return this.__zoom||ii}function Ek(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function _k(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mk(n,e,t){var i=n.invertX(e[0][0])-t[0][0],r=n.invertX(e[1][0])-t[1][0],s=n.invertY(e[0][1])-t[0][1],o=n.invertY(e[1][1])-t[1][1];return n.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function jg(){var n=Ak,e=Rk,t=Mk,i=Ek,r=_k,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,a=O$,c=Yl("start","zoom","end"),h,u,f,d=500,p=150,m=0,b=10;function g(Q){Q.property("__zoom",jf).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",_).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",U).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(Q,T,P,B){var M=Q.selection?Q.selection():Q;M.property("__zoom",jf),Q!==M?v(Q,T,P,B):M.interrupt().each(function(){C(this,arguments).event(B).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},g.scaleBy=function(Q,T,P,B){g.scaleTo(Q,function(){var M=this.__zoom.k,X=typeof T=="function"?T.apply(this,arguments):T;return M*X},P,B)},g.scaleTo=function(Q,T,P,B){g.transform(Q,function(){var M=e.apply(this,arguments),X=this.__zoom,V=P==null?y(M):typeof P=="function"?P.apply(this,arguments):P,z=X.invert(V),se=typeof T=="function"?T.apply(this,arguments):T;return t(w(x(X,se),V,z),M,o)},P,B)},g.translateBy=function(Q,T,P,B){g.transform(Q,function(){return t(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof P=="function"?P.apply(this,arguments):P),e.apply(this,arguments),o)},null,B)},g.translateTo=function(Q,T,P,B,M){g.transform(Q,function(){var X=e.apply(this,arguments),V=this.__zoom,z=B==null?y(X):typeof B=="function"?B.apply(this,arguments):B;return t(ii.translate(z[0],z[1]).scale(V.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof P=="function"?-P.apply(this,arguments):-P),X,o)},B,M)};function x(Q,T){return T=Math.max(s[0],Math.min(s[1],T)),T===Q.k?Q:new In(T,Q.x,Q.y)}function w(Q,T,P){var B=T[0]-P[0]*Q.k,M=T[1]-P[1]*Q.k;return B===Q.x&&M===Q.y?Q:new In(Q.k,B,M)}function y(Q){return[(+Q[0][0]+ +Q[1][0])/2,(+Q[0][1]+ +Q[1][1])/2]}function v(Q,T,P,B){Q.on("start.zoom",function(){C(this,arguments).event(B).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(B).end()}).tween("zoom",function(){var M=this,X=arguments,V=C(M,X).event(B),z=e.apply(M,X),se=P==null?y(z):typeof P=="function"?P.apply(M,X):P,de=Math.max(z[1][0]-z[0][0],z[1][1]-z[0][1]),ae=M.__zoom,ie=typeof T=="function"?T.apply(M,X):T,pe=a(ae.invert(se).concat(de/ae.k),ie.invert(se).concat(de/ie.k));return function(me){if(me===1)me=ie;else{var xe=pe(me),oe=de/xe[2];me=new In(oe,se[0]-xe[0]*oe,se[1]-xe[1]*oe)}V.zoom(null,me)}})}function C(Q,T,P){return!P&&Q.__zooming||new $(Q,T)}function $(Q,T){this.that=Q,this.args=T,this.active=0,this.sourceEvent=null,this.extent=e.apply(Q,T),this.taps=0}$.prototype={event:function(Q){return Q&&(this.sourceEvent=Q),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(Q,T){return this.mouse&&Q!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&Q!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&Q!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(Q){var T=jt(this.that).datum();c.call(Q,this.that,new Tk(Q,{sourceEvent:this.sourceEvent,target:g,type:Q,transform:this.that.__zoom,dispatch:c}),T)}};function E(Q,...T){if(!n.apply(this,arguments))return;var P=C(this,T).event(Q),B=this.__zoom,M=Math.max(s[0],Math.min(s[1],B.k*Math.pow(2,i.apply(this,arguments)))),X=nn(Q);if(P.wheel)(P.mouse[0][0]!==X[0]||P.mouse[0][1]!==X[1])&&(P.mouse[1]=B.invert(P.mouse[0]=X)),clearTimeout(P.wheel);else{if(B.k===M)return;P.mouse=[X,B.invert(X)],Bo(this),P.start()}Xr(Q),P.wheel=setTimeout(V,p),P.zoom("mouse",t(w(x(B,M),P.mouse[0],P.mouse[1]),P.extent,o));function V(){P.wheel=null,P.end()}}function _(Q,...T){if(f||!n.apply(this,arguments))return;var P=Q.currentTarget,B=C(this,T,!0).event(Q),M=jt(Q.view).on("mousemove.zoom",se,!0).on("mouseup.zoom",de,!0),X=nn(Q,P),V=Q.clientX,z=Q.clientY;Eg(Q.view),Za(Q),B.mouse=[X,this.__zoom.invert(X)],Bo(this),B.start();function se(ae){if(Xr(ae),!B.moved){var ie=ae.clientX-V,pe=ae.clientY-z;B.moved=ie*ie+pe*pe>m}B.event(ae).zoom("mouse",t(w(B.that.__zoom,B.mouse[0]=nn(ae,P),B.mouse[1]),B.extent,o))}function de(ae){M.on("mousemove.zoom mouseup.zoom",null),_g(ae.view,B.moved),Xr(ae),B.event(ae).end()}}function A(Q,...T){if(!!n.apply(this,arguments)){var P=this.__zoom,B=nn(Q.changedTouches?Q.changedTouches[0]:Q,this),M=P.invert(B),X=P.k*(Q.shiftKey?.5:2),V=t(w(x(P,X),B,M),e.apply(this,T),o);Xr(Q),l>0?jt(this).transition().duration(l).call(v,V,B,Q):jt(this).call(g.transform,V,B,Q)}}function U(Q,...T){if(!!n.apply(this,arguments)){var P=Q.touches,B=P.length,M=C(this,T,Q.changedTouches.length===B).event(Q),X,V,z,se;for(Za(Q),V=0;V<B;++V)z=P[V],se=nn(z,this),se=[se,this.__zoom.invert(se),z.identifier],M.touch0?!M.touch1&&M.touch0[2]!==se[2]&&(M.touch1=se,M.taps=0):(M.touch0=se,X=!0,M.taps=1+!!h);h&&(h=clearTimeout(h)),X&&(M.taps<2&&(u=se[0],h=setTimeout(function(){h=null},d)),Bo(this),M.start())}}function j(Q,...T){if(!!this.__zooming){var P=C(this,T).event(Q),B=Q.changedTouches,M=B.length,X,V,z,se;for(Xr(Q),X=0;X<M;++X)V=B[X],z=nn(V,this),P.touch0&&P.touch0[2]===V.identifier?P.touch0[0]=z:P.touch1&&P.touch1[2]===V.identifier&&(P.touch1[0]=z);if(V=P.that.__zoom,P.touch1){var de=P.touch0[0],ae=P.touch0[1],ie=P.touch1[0],pe=P.touch1[1],me=(me=ie[0]-de[0])*me+(me=ie[1]-de[1])*me,xe=(xe=pe[0]-ae[0])*xe+(xe=pe[1]-ae[1])*xe;V=x(V,Math.sqrt(me/xe)),z=[(de[0]+ie[0])/2,(de[1]+ie[1])/2],se=[(ae[0]+pe[0])/2,(ae[1]+pe[1])/2]}else if(P.touch0)z=P.touch0[0],se=P.touch0[1];else return;P.zoom("touch",t(w(V,z,se),P.extent,o))}}function W(Q,...T){if(!!this.__zooming){var P=C(this,T).event(Q),B=Q.changedTouches,M=B.length,X,V;for(Za(Q),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),X=0;X<M;++X)V=B[X],P.touch0&&P.touch0[2]===V.identifier?delete P.touch0:P.touch1&&P.touch1[2]===V.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(V=nn(V,this),Math.hypot(u[0]-V[0],u[1]-V[1])<b)){var z=jt(this).on("dblclick.zoom");z&&z.apply(this,arguments)}}}return g.wheelDelta=function(Q){return arguments.length?(i=typeof Q=="function"?Q:so(+Q),g):i},g.filter=function(Q){return arguments.length?(n=typeof Q=="function"?Q:so(!!Q),g):n},g.touchable=function(Q){return arguments.length?(r=typeof Q=="function"?Q:so(!!Q),g):r},g.extent=function(Q){return arguments.length?(e=typeof Q=="function"?Q:so([[+Q[0][0],+Q[0][1]],[+Q[1][0],+Q[1][1]]]),g):e},g.scaleExtent=function(Q){return arguments.length?(s[0]=+Q[0],s[1]=+Q[1],g):[s[0],s[1]]},g.translateExtent=function(Q){return arguments.length?(o[0][0]=+Q[0][0],o[1][0]=+Q[1][0],o[0][1]=+Q[0][1],o[1][1]=+Q[1][1],g):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},g.constrain=function(Q){return arguments.length?(t=Q,g):t},g.duration=function(Q){return arguments.length?(l=+Q,g):l},g.interpolate=function(Q){return arguments.length?(a=Q,g):a},g.on=function(){var Q=c.on.apply(c,arguments);return Q===c?g:Q},g.clickDistance=function(Q){return arguments.length?(m=(Q=+Q)*Q,g):Math.sqrt(m)},g.tapDistance=function(Q){return arguments.length?(b=+Q,g):b},g}const cu=S.exports.createContext(null),Dk=cu.Provider,Fg="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100";function qe(n,e){const t=S.exports.useContext(cu);if(t===null)throw new Error(Fg);return iQ(t,n,e)}const nt=()=>{const n=S.exports.useContext(cu);if(n===null)throw new Error(Fg);return S.exports.useMemo(()=>({getState:n.getState,setState:n.setState,subscribe:n.subscribe,destroy:n.destroy}),[n])},Nk=n=>n.userSelectionActive?"none":"all";function hu({position:n,children:e,className:t,style:i,...r}){const s=qe(Nk),o=`${n}`.split("-");return O("div",{className:St(["react-flow__panel",t,...o]),style:{...i,pointerEvents:s},...r,children:e})}function Bk({proOptions:n,position:e="bottom-right"}){return n!=null&&n.hideAttribution?null:O(hu,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:O("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ik=({x:n,y:e,label:t,labelStyle:i={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:a,className:c,...h})=>{const u=S.exports.useRef(null),[f,d]=S.exports.useState({x:0,y:0,width:0,height:0}),p=St(["react-flow__edge-textwrapper",c]);return S.exports.useEffect(()=>{if(u.current){const m=u.current.getBBox();d({x:m.x,y:m.y,width:m.width,height:m.height})}},[t]),typeof t>"u"||!t?null:q("g",{transform:`translate(${n-f.width/2} ${e-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...h,children:[r&&O("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),O("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:u,style:i,children:t}),a]})};var Xk=S.exports.memo(Ik);const Zs=({path:n,labelX:e,labelY:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:a,style:c,markerEnd:h,markerStart:u,interactionWidth:f=20})=>q(ke,{children:[O("path",{style:c,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:u}),f&&O("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),i?O(Xk,{x:e,y:t,label:i,labelStyle:r,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:a}):null]});Zs.displayName="BaseEdge";function Ur(n,e,t){return t===void 0?t:i=>{const r=e().edges.find(s=>s.id===n);r&&t(i,{...r})}}function Gg({sourceX:n,sourceY:e,targetX:t,targetY:i}){const r=Math.abs(t-n)/2,s=t<n?t+r:t-r,o=Math.abs(i-e)/2,l=i<e?i+o:i-o;return[s,l,r,o]}function Hg({sourceX:n,sourceY:e,targetX:t,targetY:i,sourceControlX:r,sourceControlY:s,targetControlX:o,targetControlY:l}){const a=n*.125+r*.375+o*.375+t*.125,c=e*.125+s*.375+l*.375+i*.125,h=Math.abs(a-n),u=Math.abs(c-e);return[a,c,h,u]}var br;(function(n){n.Strict="strict",n.Loose="loose"})(br||(br={}));var or;(function(n){n.Free="free",n.Vertical="vertical",n.Horizontal="horizontal"})(or||(or={}));const uu=n=>({width:n.offsetWidth,height:n.offsetHeight}),lr=(n,e=0,t=1)=>Math.min(Math.max(n,e),t),fu=(n={x:0,y:0},e)=>({x:lr(n.x,e[0][0],e[1][0]),y:lr(n.y,e[0][1],e[1][1])}),Yg=n=>{var e;return((e=n.getRootNode)==null?void 0:e.call(n))||(window==null?void 0:window.document)},Kg=(n,e)=>({x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x2,e.x2),y2:Math.max(n.y2,e.y2)}),rl=({x:n,y:e,width:t,height:i})=>({x:n,y:e,x2:n+t,y2:e+i}),Jg=({x:n,y:e,x2:t,y2:i})=>({x:n,y:e,width:t-n,height:i-e}),Ff=n=>({...n.positionAbsolute||{x:0,y:0},width:n.width||0,height:n.height||0}),Uk=(n,e)=>Jg(Kg(rl(n),rl(e))),zc=(n,e)=>{const t=Math.max(0,Math.min(n.x+n.width,e.x+e.width)-Math.max(n.x,e.x)),i=Math.max(0,Math.min(n.y+n.height,e.y+e.height)-Math.max(n.y,e.y));return Math.ceil(t*i)},Vk=n=>!!n.width&&!!n.height&&!!n.x&&!!n.y,eO=n=>!isNaN(n)&&isFinite(n),ut=Symbol.for("internals"),tO=["Enter"," ","Escape"],Zk=n=>{};var Fn;(function(n){n.Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier"})(Fn||(Fn={}));var sl;(function(n){n.Arrow="arrow",n.ArrowClosed="arrowclosed"})(sl||(sl={}));var te;(function(n){n.Left="left",n.Top="top",n.Right="right",n.Bottom="bottom"})(te||(te={}));function Gf({pos:n,x1:e,y1:t,x2:i,y2:r}){return n===te.Left||n===te.Right?[.5*(e+i),t]:[e,.5*(t+r)]}function nO({sourceX:n,sourceY:e,sourcePosition:t=te.Bottom,targetX:i,targetY:r,targetPosition:s=te.Top}){const[o,l]=Gf({pos:t,x1:n,y1:e,x2:i,y2:r}),[a,c]=Gf({pos:s,x1:i,y1:r,x2:n,y2:e}),[h,u,f,d]=Hg({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:o,sourceControlY:l,targetControlX:a,targetControlY:c});return[`M${n},${e} C${o},${l} ${a},${c} ${i},${r}`,h,u,f,d]}const du=S.exports.memo(({sourceX:n,sourceY:e,targetX:t,targetY:i,sourcePosition:r=te.Bottom,targetPosition:s=te.Top,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:m})=>{const[b,g,x]=nO({sourceX:n,sourceY:e,sourcePosition:r,targetX:t,targetY:i,targetPosition:s});return O(Zs,{path:b,labelX:g,labelY:x,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:m})});du.displayName="SimpleBezierEdge";const Hf={[te.Left]:{x:-1,y:0},[te.Right]:{x:1,y:0},[te.Top]:{x:0,y:-1},[te.Bottom]:{x:0,y:1}},qk=({source:n,sourcePosition:e=te.Bottom,target:t})=>e===te.Left||e===te.Right?n.x<t.x?{x:1,y:0}:{x:-1,y:0}:n.y<t.y?{x:0,y:1}:{x:0,y:-1},Yf=(n,e)=>Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2));function Lk({source:n,sourcePosition:e=te.Bottom,target:t,targetPosition:i=te.Top,center:r,offset:s}){const o=Hf[e],l=Hf[i],a={x:n.x+o.x*s,y:n.y+o.y*s},c={x:t.x+l.x*s,y:t.y+l.y*s},h=qk({source:a,sourcePosition:e,target:c}),u=h.x!==0?"x":"y",f=h[u];let d=[],p,m;const[b,g,x,w]=Gg({sourceX:n.x,sourceY:n.y,targetX:t.x,targetY:t.y});if(o[u]*l[u]===-1){p=r.x||b,m=r.y||g;const v=[{x:p,y:a.y},{x:p,y:c.y}],C=[{x:a.x,y:m},{x:c.x,y:m}];o[u]===f?d=u==="x"?v:C:d=u==="x"?C:v}else{const v=[{x:a.x,y:c.y}],C=[{x:c.x,y:a.y}];if(u==="x"?d=o.x===f?C:v:d=o.y===f?v:C,e!==i){const $=u==="x"?"y":"x",E=o[u]===l[$],_=a[$]>c[$],A=a[$]<c[$];(o[u]===1&&(!E&&_||E&&A)||o[u]!==1&&(!E&&A||E&&_))&&(d=u==="x"?v:C)}p=d[0].x,m=d[0].y}return[[n,a,...d,c,t],p,m,x,w]}function zk(n,e,t,i){const r=Math.min(Yf(n,e)/2,Yf(e,t)/2,i),{x:s,y:o}=e;if(n.x===s&&s===t.x||n.y===o&&o===t.y)return`L${s} ${o}`;if(n.y===o){const c=n.x<t.x?-1:1,h=n.y<t.y?1:-1;return`L ${s+r*c},${o}Q ${s},${o} ${s},${o+r*h}`}const l=n.x<t.x?1:-1,a=n.y<t.y?-1:1;return`L ${s},${o+r*a}Q ${s},${o} ${s+r*l},${o}`}function Wc({sourceX:n,sourceY:e,sourcePosition:t=te.Bottom,targetX:i,targetY:r,targetPosition:s=te.Top,borderRadius:o=5,centerX:l,centerY:a,offset:c=20}){const[h,u,f,d,p]=Lk({source:{x:n,y:e},sourcePosition:t,target:{x:i,y:r},targetPosition:s,center:{x:l,y:a},offset:c});return[h.reduce((b,g,x)=>{let w="";return x>0&&x<h.length-1?w=zk(h[x-1],g,h[x+1],o):w=`${x===0?"M":"L"}${g.x} ${g.y}`,b+=w,b},""),u,f,d,p]}const ta=S.exports.memo(({sourceX:n,sourceY:e,targetX:t,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:h,sourcePosition:u=te.Bottom,targetPosition:f=te.Top,markerEnd:d,markerStart:p,pathOptions:m,interactionWidth:b})=>{const[g,x,w]=Wc({sourceX:n,sourceY:e,sourcePosition:u,targetX:t,targetY:i,targetPosition:f,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return O(Zs,{path:g,labelX:x,labelY:w,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:h,markerEnd:d,markerStart:p,interactionWidth:b})});ta.displayName="SmoothStepEdge";const pu=S.exports.memo(n=>{var e;return O(ta,{...n,pathOptions:S.exports.useMemo(()=>{var t;return{borderRadius:0,offset:(t=n.pathOptions)==null?void 0:t.offset}},[(e=n.pathOptions)==null?void 0:e.offset])})});pu.displayName="StepEdge";function Wk({sourceX:n,sourceY:e,targetX:t,targetY:i}){const[r,s,o,l]=Gg({sourceX:n,sourceY:e,targetX:t,targetY:i});return[`M ${n},${e}L ${t},${i}`,r,s,o,l]}const mu=S.exports.memo(({sourceX:n,sourceY:e,targetX:t,targetY:i,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:h,markerEnd:u,markerStart:f,interactionWidth:d})=>{const[p,m,b]=Wk({sourceX:n,sourceY:e,targetX:t,targetY:i});return O(Zs,{path:p,labelX:m,labelY:b,label:r,labelStyle:s,labelShowBg:o,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,style:h,markerEnd:u,markerStart:f,interactionWidth:d})});mu.displayName="StraightEdge";function oo(n,e){return n>=0?.5*n:e*25*Math.sqrt(-n)}function Kf({pos:n,x1:e,y1:t,x2:i,y2:r,c:s}){switch(n){case te.Left:return[e-oo(e-i,s),t];case te.Right:return[e+oo(i-e,s),t];case te.Top:return[e,t-oo(t-r,s)];case te.Bottom:return[e,t+oo(r-t,s)]}}function iO({sourceX:n,sourceY:e,sourcePosition:t=te.Bottom,targetX:i,targetY:r,targetPosition:s=te.Top,curvature:o=.25}){const[l,a]=Kf({pos:t,x1:n,y1:e,x2:i,y2:r,c:o}),[c,h]=Kf({pos:s,x1:i,y1:r,x2:n,y2:e,c:o}),[u,f,d,p]=Hg({sourceX:n,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:h});return[`M${n},${e} C${l},${a} ${c},${h} ${i},${r}`,u,f,d,p]}const ol=S.exports.memo(({sourceX:n,sourceY:e,targetX:t,targetY:i,sourcePosition:r=te.Bottom,targetPosition:s=te.Top,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,pathOptions:m,interactionWidth:b})=>{const[g,x,w]=iO({sourceX:n,sourceY:e,sourcePosition:r,targetX:t,targetY:i,targetPosition:s,curvature:m==null?void 0:m.curvature});return O(Zs,{path:g,labelX:x,labelY:w,label:o,labelStyle:l,labelShowBg:a,labelBgStyle:c,labelBgPadding:h,labelBgBorderRadius:u,style:f,markerEnd:d,markerStart:p,interactionWidth:b})});ol.displayName="BezierEdge";const gu=S.exports.createContext(null),jk=gu.Provider;gu.Consumer;function jc(n,e,t,i,r,s,o){const l=o.elementFromPoint(n.clientX,n.clientY),a=(l==null?void 0:l.classList.contains("target"))||!1,c=(l==null?void 0:l.classList.contains("source"))||!1,h={elementBelow:l,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(l&&(a||c)){h.isHoveringHandle=!0;const u=l.getAttribute("data-nodeid"),f=l.getAttribute("data-handleid"),d=t?{source:u,sourceHandle:f,target:i,targetHandle:r}:{source:i,sourceHandle:r,target:u,targetHandle:f};h.connection=d,(e===br.Strict?t&&c||!t&&a:!0)&&(h.isValid=s(d))}return h}function qa(n){n==null||n.classList.remove("react-flow__handle-valid"),n==null||n.classList.remove("react-flow__handle-connecting")}function rO({event:n,handleId:e,nodeId:t,onConnect:i,isTarget:r,getState:s,setState:o,isValidConnection:l,elementEdgeUpdaterType:a,onEdgeUpdateEnd:c}){const h=n.target.closest(".react-flow"),u=Yg(n.target);if(!u)return;const f=u.elementFromPoint(n.clientX,n.clientY),d=f==null?void 0:f.classList.contains("target"),p=f==null?void 0:f.classList.contains("source");if(!h||!d&&!p&&!a)return;const{onConnectStart:m,connectionMode:b}=s(),g=a||(d?"target":"source"),x=h.getBoundingClientRect();let w;o({connectionPosition:{x:n.clientX-x.left,y:n.clientY-x.top},connectionNodeId:t,connectionHandleId:e,connectionHandleType:g}),m==null||m(n,{nodeId:t,handleId:e,handleType:g});function y(C){o({connectionPosition:{x:C.clientX-x.left,y:C.clientY-x.top}});const{connection:$,elementBelow:E,isValid:_,isHoveringHandle:A}=jc(C,b,r,t,e,l,u);if(!A)return qa(w);$.source!==$.target&&E&&(qa(w),w=E,E.classList.add("react-flow__handle-connecting"),E.classList.toggle("react-flow__handle-valid",_))}function v(C){var _,A;const{connection:$,isValid:E}=jc(C,b,r,t,e,l,u);E&&(i==null||i($)),(A=(_=s()).onConnectEnd)==null||A.call(_,C),a&&c&&c(C),qa(w),o({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),u.removeEventListener("mousemove",y),u.removeEventListener("mouseup",v)}u.addEventListener("mousemove",y),u.addEventListener("mouseup",v)}const Fk=n=>"id"in n&&"source"in n&&"target"in n,Gk=({source:n,sourceHandle:e,target:t,targetHandle:i})=>`reactflow__edge-${n}${e||""}-${t}${i||""}`,Fc=(n,e)=>typeof n>"u"?"":typeof n=="string"?n:`${e?`${e}__`:""}${Object.keys(n).sort().map(i=>`${i}=${n[i]}`).join("&")}`,Hk=(n,e)=>e.some(t=>t.source===n.source&&t.target===n.target&&(t.sourceHandle===n.sourceHandle||!t.sourceHandle&&!n.sourceHandle)&&(t.targetHandle===n.targetHandle||!t.targetHandle&&!n.targetHandle)),sO=(n,e)=>{if(!n.source||!n.target)return e;let t;return Fk(n)?t={...n}:t={...n,id:Gk(n)},Hk(t,e)?e:e.concat(t)},Yk=({x:n,y:e},[t,i,r],s,[o,l])=>{const a={x:(n-t)/r,y:(e-i)/r};return s?{x:o*Math.round(a.x/o),y:l*Math.round(a.y/l)}:a},na=n=>{if(n.length===0)return{x:0,y:0,width:0,height:0};const e=n.reduce((t,{positionAbsolute:i,position:r,width:s,height:o})=>Kg(t,rl({x:i?i.x:r.x,y:i?i.y:r.y,width:s||0,height:o||0})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Jg(e)},oO=(n,e,[t,i,r]=[0,0,1],s=!1,o=!1)=>{const l={x:(e.x-t)/r,y:(e.y-i)/r,width:e.width/r,height:e.height/r},a=[];return n.forEach(c=>{const{positionAbsolute:h={x:0,y:0},width:u,height:f,selectable:d=!0}=c;if(o&&!d)return!1;const p={...h,width:u||0,height:f||0},m=zc(l,p),b=typeof u>"u"||typeof f>"u"||u===null||f===null,g=s&&m>0,x=(u||0)*(f||0);(b||g||m>=x||c.dragging)&&a.push(c)}),a},lO=(n,e)=>{const t=n.map(i=>i.id);return e.filter(i=>t.includes(i.source)||t.includes(i.target))},aO=(n,e,t,i,r,s=.1)=>{const o=e/(n.width*(1+s)),l=t/(n.height*(1+s)),a=Math.min(o,l),c=lr(a,i,r),h=n.x+n.width/2,u=n.y+n.height/2,f=e/2-h*c,d=t/2-u*c;return[f,d,c]},bi=(n,e=0)=>n.transition().duration(e),Kk=()=>!0,Jk=n=>({connectionStartHandle:n.connectionStartHandle,connectOnClick:n.connectOnClick,noPanClassName:n.noPanClassName}),cO=S.exports.forwardRef(({type:n="source",position:e=te.Top,isValidConnection:t=Kk,isConnectable:i=!0,id:r,onConnect:s,children:o,className:l,onMouseDown:a,...c},h)=>{const u=nt(),f=S.exports.useContext(gu),{connectionStartHandle:d,connectOnClick:p,noPanClassName:m}=qe(Jk,Et),b=r||null,g=n==="target",x=v=>{const{defaultEdgeOptions:C,onConnect:$,hasDefaultEdges:E}=u.getState(),_={...C,...v};if(E){const{edges:A}=u.getState();u.setState({edges:sO(_,A)})}$==null||$(_),s==null||s(_)},w=v=>{v.button===0&&rO({event:v,handleId:b,nodeId:f,onConnect:x,isTarget:g,getState:u.getState,setState:u.setState,isValidConnection:t}),a==null||a(v)},y=v=>{const{onClickConnectStart:C,onClickConnectEnd:$,connectionMode:E}=u.getState();if(!d){C==null||C(v,{nodeId:f,handleId:b,handleType:n}),u.setState({connectionStartHandle:{nodeId:f,type:n,handleId:b}});return}const _=Yg(v.target),{connection:A,isValid:U}=jc(v,E,d.type==="target",d.nodeId,d.handleId||null,t,_);U&&x(A),$==null||$(v),u.setState({connectionStartHandle:null})};return O("div",{"data-handleid":b,"data-nodeid":f,"data-handlepos":e,className:St(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",m,l,{source:!g,target:g,connectable:i,connecting:(d==null?void 0:d.nodeId)===f&&(d==null?void 0:d.handleId)===b&&(d==null?void 0:d.type)===n}]),onMouseDown:w,onClick:p?y:void 0,ref:h,...c,children:o})});cO.displayName="Handle";var ys=S.exports.memo(cO);const hO=({data:n,isConnectable:e,targetPosition:t=te.Top,sourcePosition:i=te.Bottom})=>q(ke,{children:[O(ys,{type:"target",position:t,isConnectable:e}),n==null?void 0:n.label,O(ys,{type:"source",position:i,isConnectable:e})]});hO.displayName="DefaultNode";var Gc=S.exports.memo(hO);const uO=({data:n,isConnectable:e,sourcePosition:t=te.Bottom})=>q(ke,{children:[n==null?void 0:n.label,O(ys,{type:"source",position:t,isConnectable:e})]});uO.displayName="InputNode";var fO=S.exports.memo(uO);const dO=({data:n,isConnectable:e,targetPosition:t=te.Top})=>q(ke,{children:[O(ys,{type:"target",position:t,isConnectable:e}),n==null?void 0:n.label]});dO.displayName="OutputNode";var pO=S.exports.memo(dO);const Ou=()=>null;Ou.displayName="GroupNode";const eP=n=>({selectedNodes:Array.from(n.nodeInternals.values()).filter(e=>e.selected),selectedEdges:n.edges.filter(e=>e.selected)}),lo=n=>n.id;function tP(n,e){return Et(n.selectedNodes.map(lo),e.selectedNodes.map(lo))&&Et(n.selectedEdges.map(lo),e.selectedEdges.map(lo))}const mO=S.exports.memo(({onSelectionChange:n})=>{const e=nt(),{selectedNodes:t,selectedEdges:i}=qe(eP,tP);return S.exports.useEffect(()=>{var s,o;const r={nodes:t,edges:i};n==null||n(r),(o=(s=e.getState()).onSelectionChange)==null||o.call(s,r)},[t,i,n]),null});mO.displayName="SelectionListener";const nP=n=>!!n.onSelectionChange;function iP({onSelectionChange:n}){const e=qe(nP);return n||e?O(mO,{onSelectionChange:n}):null}const rP=n=>({setNodes:n.setNodes,setEdges:n.setEdges,setDefaultNodesAndEdges:n.setDefaultNodesAndEdges,setMinZoom:n.setMinZoom,setMaxZoom:n.setMaxZoom,setTranslateExtent:n.setTranslateExtent,setNodeExtent:n.setNodeExtent,reset:n.reset});function Li(n,e){S.exports.useEffect(()=>{typeof n<"u"&&e(n)},[n])}function Ce(n,e,t){S.exports.useEffect(()=>{typeof e<"u"&&t({[n]:e})},[e])}const sP=({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,onConnect:r,onConnectStart:s,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:a,nodesDraggable:c,nodesConnectable:h,nodesFocusable:u,edgesFocusable:f,minZoom:d,maxZoom:p,nodeExtent:m,onNodesChange:b,onEdgesChange:g,elementsSelectable:x,connectionMode:w,snapGrid:y,snapToGrid:v,translateExtent:C,connectOnClick:$,defaultEdgeOptions:E,fitView:_,fitViewOptions:A,onNodesDelete:U,onEdgesDelete:j,onNodeDrag:W,onNodeDragStart:Q,onNodeDragStop:T,onSelectionDrag:P,onSelectionDragStart:B,onSelectionDragStop:M,noPanClassName:X,nodeOrigin:V,rfId:z})=>{const{setNodes:se,setEdges:de,setDefaultNodesAndEdges:ae,setMinZoom:ie,setMaxZoom:pe,setTranslateExtent:me,setNodeExtent:xe,reset:oe}=qe(rP,Et),ee=nt();return S.exports.useEffect(()=>{const Ie=i==null?void 0:i.map(Xe=>({...Xe,...E}));return ae(t,Ie),()=>{oe()}},[]),Ce("defaultEdgeOptions",E,ee.setState),Ce("connectionMode",w,ee.setState),Ce("onConnect",r,ee.setState),Ce("onConnectStart",s,ee.setState),Ce("onConnectEnd",o,ee.setState),Ce("onClickConnectStart",l,ee.setState),Ce("onClickConnectEnd",a,ee.setState),Ce("nodesDraggable",c,ee.setState),Ce("nodesConnectable",h,ee.setState),Ce("nodesFocusable",u,ee.setState),Ce("edgesFocusable",f,ee.setState),Ce("elementsSelectable",x,ee.setState),Ce("snapToGrid",v,ee.setState),Ce("snapGrid",y,ee.setState),Ce("onNodesChange",b,ee.setState),Ce("onEdgesChange",g,ee.setState),Ce("connectOnClick",$,ee.setState),Ce("fitViewOnInit",_,ee.setState),Ce("fitViewOnInitOptions",A,ee.setState),Ce("onNodesDelete",U,ee.setState),Ce("onEdgesDelete",j,ee.setState),Ce("onNodeDrag",W,ee.setState),Ce("onNodeDragStart",Q,ee.setState),Ce("onNodeDragStop",T,ee.setState),Ce("onSelectionDrag",P,ee.setState),Ce("onSelectionDragStart",B,ee.setState),Ce("onSelectionDragStop",M,ee.setState),Ce("noPanClassName",X,ee.setState),Ce("nodeOrigin",V,ee.setState),Ce("rfId",z,ee.setState),Li(n,se),Li(e,de),Li(d,ie),Li(p,pe),Li(C,me),Li(m,xe),null},Jf={display:"none"},oP={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},gO="react-flow__node-desc",OO="react-flow__edge-desc",lP="react-flow__aria-live",aP=n=>n.ariaLiveMessage;function cP({rfId:n}){const e=qe(aP);return O("div",{id:`${lP}-${n}`,"aria-live":"assertive","aria-atomic":"true",style:oP,children:e})}function hP({rfId:n,disableKeyboardA11y:e}){return q(ke,{children:[q("div",{id:`${gO}-${n}`,style:Jf,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),O("div",{id:`${OO}-${n}`,style:Jf,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&O(cP,{rfId:n})]})}const uP=(n,e,t)=>t===te.Left?n-e:t===te.Right?n+e:n,fP=(n,e,t)=>t===te.Top?n-e:t===te.Bottom?n+e:n,ed="react-flow__edgeupdater",td=({position:n,centerX:e,centerY:t,radius:i=10,onMouseDown:r,onMouseEnter:s,onMouseOut:o,type:l})=>O("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:o,className:St([ed,`${ed}-${l}`]),cx:uP(e,i,n),cy:fP(t,i,n),r:i,stroke:"transparent",fill:"transparent"});var zi=n=>{const e=({id:t,className:i,type:r,data:s,onClick:o,onEdgeDoubleClick:l,selected:a,animated:c,label:h,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:m,style:b,source:g,target:x,sourceX:w,sourceY:y,targetX:v,targetY:C,sourcePosition:$,targetPosition:E,elementsSelectable:_,hidden:A,sourceHandleId:U,targetHandleId:j,onContextMenu:W,onMouseEnter:Q,onMouseMove:T,onMouseLeave:P,edgeUpdaterRadius:B,onEdgeUpdate:M,onEdgeUpdateStart:X,onEdgeUpdateEnd:V,markerEnd:z,markerStart:se,rfId:de,ariaLabel:ae,isFocusable:ie,pathOptions:pe,interactionWidth:me})=>{const xe=S.exports.useRef(null),[oe,ee]=S.exports.useState(!1),[Ie,Xe]=S.exports.useState(!1),Qe=nt(),$e=S.exports.useMemo(()=>`url(#${Fc(se,de)})`,[se,de]),Oe=S.exports.useMemo(()=>`url(#${Fc(z,de)})`,[z,de]);if(A)return null;const Te=le=>{const{edges:be,addSelectedEdges:je}=Qe.getState();if(_&&(Qe.setState({nodesSelectionActive:!1}),je([t])),o){const Qt=be.find(mt=>mt.id===t);o(le,Qt)}},it=Ur(t,Qe.getState,l),D=Ur(t,Qe.getState,W),I=Ur(t,Qe.getState,Q),Z=Ur(t,Qe.getState,T),G=Ur(t,Qe.getState,P),re=(le,be)=>{const je=be?x:g,Qt=(be?j:U)||null,mt=be?"target":"source",qn=()=>!0,Le=be,Fe=Qe.getState().edges.find(un=>un.id===t);Xe(!0),X==null||X(le,Fe,mt);const Lt=un=>{Xe(!1),V==null||V(un,Fe,mt)};rO({event:le,handleId:Qt,nodeId:je,onConnect:un=>M==null?void 0:M(Fe,un),isTarget:Le,getState:Qe.getState,setState:Qe.setState,isValidConnection:qn,elementEdgeUpdaterType:mt,onEdgeUpdateEnd:Lt})},Se=le=>re(le,!0),he=le=>re(le,!1),ue=()=>ee(!0),ge=()=>ee(!1),Ae=!_&&!o,Re=typeof M<"u",wt=le=>{var be;if(tO.includes(le.key)&&_){const{unselectNodesAndEdges:je,addSelectedEdges:Qt,edges:mt}=Qe.getState();le.key==="Escape"?((be=xe.current)==null||be.blur(),je({edges:[mt.find(Le=>Le.id===t)]})):Qt([t])}};return q("g",{className:St(["react-flow__edge",`react-flow__edge-${r}`,i,{selected:a,animated:c,inactive:Ae,updating:oe}]),onClick:Te,onDoubleClick:it,onContextMenu:D,onMouseEnter:I,onMouseMove:Z,onMouseLeave:G,onKeyDown:ie?wt:void 0,tabIndex:ie?0:void 0,role:ie?"button":void 0,"data-testid":`rf__edge-${t}`,"aria-label":ae===null?void 0:ae||`Edge from ${g} to ${x}`,"aria-describedby":ie?`${OO}-${de}`:void 0,ref:xe,children:[!Ie&&O(n,{id:t,source:g,target:x,selected:a,animated:c,label:h,labelStyle:u,labelShowBg:f,labelBgStyle:d,labelBgPadding:p,labelBgBorderRadius:m,data:s,style:b,sourceX:w,sourceY:y,targetX:v,targetY:C,sourcePosition:$,targetPosition:E,sourceHandleId:U,targetHandleId:j,markerStart:$e,markerEnd:Oe,pathOptions:pe,interactionWidth:me}),Re&&q(ke,{children:[O(td,{position:$,centerX:w,centerY:y,radius:B,onMouseDown:Se,onMouseEnter:ue,onMouseOut:ge,type:"source"}),O(td,{position:E,centerX:v,centerY:C,radius:B,onMouseDown:he,onMouseEnter:ue,onMouseOut:ge,type:"target"})]})]})};return e.displayName="EdgeWrapper",S.exports.memo(e)};function dP(n){const e={default:zi(n.default||ol),straight:zi(n.bezier||mu),step:zi(n.step||pu),smoothstep:zi(n.step||ta),simplebezier:zi(n.simplebezier||du)},t={},i=Object.keys(n).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=zi(n[s]||ol),r),t);return{...e,...i}}function nd(n,e,t=null){const i=((t==null?void 0:t.x)||0)+e.x,r=((t==null?void 0:t.y)||0)+e.y,s=(t==null?void 0:t.width)||e.width,o=(t==null?void 0:t.height)||e.height;switch(n){case te.Top:return{x:i+s/2,y:r};case te.Right:return{x:i+s,y:r+o/2};case te.Bottom:return{x:i+s/2,y:r+o};case te.Left:return{x:i,y:r+o/2}}}function id(n,e){if(!n)return null;let t=null;return n.length===1||!e?t=n[0]:e&&(t=n.find(i=>i.id===e)),typeof t>"u"?null:t}const pP=(n,e,t,i,r,s)=>{const o=nd(t,n,e),l=nd(s,i,r);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function mP({sourcePos:n,targetPos:e,sourceWidth:t,sourceHeight:i,targetWidth:r,targetHeight:s,width:o,height:l,transform:a}){const c={x:Math.min(n.x,e.x),y:Math.min(n.y,e.y),x2:Math.max(n.x+t,e.x+r),y2:Math.max(n.y+i,e.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const h=rl({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:o/a[2],height:l/a[2]}),u=Math.max(0,Math.min(h.x2,c.x2)-Math.max(h.x,c.x)),f=Math.max(0,Math.min(h.y2,c.y2)-Math.max(h.y,c.y));return Math.ceil(u*f)>0}function rd(n){var i,r,s,o,l;const e=((i=n==null?void 0:n[ut])==null?void 0:i.handleBounds)||null,t=!n||!e||!n.width||!n.height||typeof((r=n.positionAbsolute)==null?void 0:r.x)>"u"||typeof((s=n.positionAbsolute)==null?void 0:s.y)>"u";return[{x:((o=n==null?void 0:n.positionAbsolute)==null?void 0:o.x)||0,y:((l=n==null?void 0:n.positionAbsolute)==null?void 0:l.y)||0,width:(n==null?void 0:n.width)||0,height:(n==null?void 0:n.height)||0},e,!t]}function yO(n,e){if(!n.parentNode)return!1;const t=e.get(n.parentNode);return t?t.selected?!0:yO(t,e):!1}function sd(n,e,t){let i=n;do{if(i!=null&&i.matches(e))return!0;if(i===t.current)return!1;i=i.parentElement}while(i);return!1}function gP(n,e,t){return Array.from(n.values()).filter(i=>(i.selected||i.id===t)&&(!i.parentNode||!yO(i,n))).map(i=>{var r,s,o,l;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:e.x-((s=(r=i.positionAbsolute)==null?void 0:r.x)!=null?s:0),y:e.y-((l=(o=i.positionAbsolute)==null?void 0:o.y)!=null?l:0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height}})}function bO(n,e,t,i){var l,a,c,h,u,f,d,p;let r=n.extent||i;if(n.extent==="parent")if(n.parentNode&&n.width&&n.height){const m=t.get(n.parentNode);r=(m==null?void 0:m.positionAbsolute)&&(m==null?void 0:m.width)&&(m==null?void 0:m.height)?[[m.positionAbsolute.x,m.positionAbsolute.y],[m.positionAbsolute.x+m.width-n.width,m.positionAbsolute.y+m.height-n.height]]:r}else r=i;else if(n.extent&&n.parentNode){const m=t.get(n.parentNode),b=(a=(l=m==null?void 0:m.positionAbsolute)==null?void 0:l.x)!=null?a:0,g=(h=(c=m==null?void 0:m.positionAbsolute)==null?void 0:c.y)!=null?h:0;r=[[n.extent[0][0]+b,n.extent[0][1]+g],[n.extent[1][0]+b,n.extent[1][1]+g]]}let s={x:0,y:0};if(n.parentNode){const m=t.get(n.parentNode);s={x:(f=(u=m==null?void 0:m.positionAbsolute)==null?void 0:u.x)!=null?f:0,y:(p=(d=m==null?void 0:m.positionAbsolute)==null?void 0:d.y)!=null?p:0}}const o=r?fu(e,r):e;return{position:{x:o.x-s.x,y:o.y-s.y},positionAbsolute:o}}function La({nodeId:n,dragItems:e,nodeInternals:t}){const i=e.map(r=>({...t.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[n?i.find(r=>r.id===n):i[0],i]}const od=(n,e,t,i)=>{const r=e.querySelectorAll(n);if(!r||!r.length)return null;const s=Array.from(r),o=e.getBoundingClientRect(),l={x:o.width*i[0],y:o.height*i[1]};return s.map(a=>{const c=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(c.left-o.left-l.x)/t,y:(c.top-o.top-l.y)/t,...uu(a)}})};function Vr(n,e,t){return t===void 0?t:i=>{const r=e().nodeInternals.get(n);t(i,{...r})}}function Hc({id:n,store:e,unselect:t=!1}){const{addSelectedNodes:i,unselectNodesAndEdges:r,multiSelectionActive:s,nodeInternals:o}=e.getState(),l=o.get(n);e.setState({nodesSelectionActive:!1}),l.selected?(t||l.selected&&s)&&r({nodes:[l]}):i([n])}function za(n){return(e,t,i)=>n==null?void 0:n(e,i)}function xO({nodeRef:n,disabled:e=!1,noDragClassName:t,handleSelector:i,nodeId:r,isSelectable:s,selectNodesOnDrag:o}){const[l,a]=S.exports.useState(!1),c=nt(),h=S.exports.useRef(),u=S.exports.useRef({x:null,y:null}),f=S.exports.useCallback(({sourceEvent:d})=>{const{transform:p,snapGrid:m,snapToGrid:b}=c.getState(),g=d.touches?d.touches[0].clientX:d.clientX,x=d.touches?d.touches[0].clientY:d.clientY,w={x:(g-p[0])/p[2],y:(x-p[1])/p[2]};return{xSnapped:b?m[0]*Math.round(w.x/m[0]):w.x,ySnapped:b?m[1]*Math.round(w.y/m[1]):w.y,...w}},[]);return S.exports.useEffect(()=>{if(n!=null&&n.current){const d=jt(n.current);if(e)d.on(".drag",null);else{const p=zC().on("start",m=>{var $;const{nodeInternals:b,multiSelectionActive:g,unselectNodesAndEdges:x,onNodeDragStart:w,onSelectionDragStart:y}=c.getState(),v=r?w:za(y);!o&&!g&&r&&(($=b.get(r))!=null&&$.selected||x()),r&&s&&o&&Hc({id:r,store:c});const C=f(m);if(u.current=C,h.current=gP(b,C,r),v&&h.current){const[E,_]=La({nodeId:r,dragItems:h.current,nodeInternals:b});v(m.sourceEvent,E,_)}}).on("drag",m=>{const{updateNodePositions:b,nodeInternals:g,nodeExtent:x,onNodeDrag:w,onSelectionDrag:y,snapGrid:v,snapToGrid:C}=c.getState(),$=f(m);if((u.current.x!==$.xSnapped||u.current.y!==$.ySnapped)&&h.current){u.current={x:$.xSnapped,y:$.ySnapped},h.current=h.current.map(_=>{const A={x:$.x-_.distance.x,y:$.y-_.distance.y};C&&(A.x=v[0]*Math.round(A.x/v[0]),A.y=v[1]*Math.round(A.y/v[1]));const U=bO(_,A,g,x);return _.position=U.position,_.positionAbsolute=U.positionAbsolute,_});const E=r?w:za(y);if(b(h.current,!0,!0),a(!0),E){const[_,A]=La({nodeId:r,dragItems:h.current,nodeInternals:g});E(m.sourceEvent,_,A)}}}).on("end",m=>{if(a(!1),h.current){const{updateNodePositions:b,nodeInternals:g,onNodeDragStop:x,onSelectionDragStop:w}=c.getState(),y=r?x:za(w);if(b(h.current,!1,!1),y){const[v,C]=La({nodeId:r,dragItems:h.current,nodeInternals:g});y(m.sourceEvent,v,C)}}}).filter(m=>{const b=m.target;return!m.button&&(!t||!sd(b,`.${t}`,n))&&(!i||sd(b,i,n))});return d.call(p),()=>{d.on(".drag",null)}}}},[n,e,t,i,s,c,r,o,f]),l}function SO(){const n=nt();return S.exports.useCallback(t=>{const{nodeInternals:i,nodeExtent:r,updateNodePositions:s,snapToGrid:o,snapGrid:l}=n.getState(),c=Array.from(i.values()).filter(h=>h.selected).map(h=>{if(h.positionAbsolute){const u={x:h.positionAbsolute.x+t.x,y:h.positionAbsolute.y+t.y};o&&(u.x=l[0]*Math.round(u.x/l[0]),u.y=l[1]*Math.round(u.y/l[1]));const f=bO(h,u,i,r);h.position=f.position,h.positionAbsolute=f.positionAbsolute}return h});s(c,!0,!0)},[])}const rs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Zr=n=>{const e=({id:t,type:i,data:r,xPos:s,yPos:o,xPosOrigin:l,yPosOrigin:a,selected:c,onClick:h,onMouseEnter:u,onMouseMove:f,onMouseLeave:d,onContextMenu:p,onDoubleClick:m,style:b,className:g,isDraggable:x,isSelectable:w,isConnectable:y,isFocusable:v,selectNodesOnDrag:C,sourcePosition:$,targetPosition:E,hidden:_,resizeObserver:A,dragHandle:U,zIndex:j,isParent:W,noDragClassName:Q,noPanClassName:T,initialized:P,disableKeyboardA11y:B,ariaLabel:M,rfId:X})=>{const V=nt(),z=S.exports.useRef(null),se=S.exports.useRef($),de=S.exports.useRef(E),ae=S.exports.useRef(i),ie=w||x||h||u||f||d,pe=SO(),me=Vr(t,V.getState,u),xe=Vr(t,V.getState,f),oe=Vr(t,V.getState,d),ee=Vr(t,V.getState,p),Ie=Vr(t,V.getState,m),Xe=Oe=>{if(w&&(!C||!x)&&Hc({id:t,store:V}),h){const Te=V.getState().nodeInternals.get(t);h(Oe,{...Te})}},Qe=Oe=>{var D;const{snapGrid:Te,snapToGrid:it}=V.getState();if(tO.includes(Oe.key)&&w){const I=Oe.key==="Escape";I&&((D=z.current)==null||D.blur()),Hc({id:t,store:V,unselect:I})}else if(!B&&x&&c&&Object.prototype.hasOwnProperty.call(rs,Oe.key)){V.setState({ariaLiveMessage:`Moved selected node ${Oe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~o}`});const I=it?Te[0]:5,Z=it?Te[1]:5,G=Oe.shiftKey?4:1;pe({x:rs[Oe.key].x*I*G,y:rs[Oe.key].y*Z*G})}};S.exports.useEffect(()=>{if(z.current&&!_){const Oe=z.current;return A==null||A.observe(Oe),()=>A==null?void 0:A.unobserve(Oe)}},[_]),S.exports.useEffect(()=>{const Oe=ae.current!==i,Te=se.current!==$,it=de.current!==E;z.current&&(Oe||Te||it)&&(Oe&&(ae.current=i),Te&&(se.current=$),it&&(de.current=E),V.getState().updateNodeDimensions([{id:t,nodeElement:z.current,forceUpdate:!0}]))},[t,i,$,E]);const $e=xO({nodeRef:z,disabled:_||!x,noDragClassName:Q,handleSelector:U,nodeId:t,isSelectable:w,selectNodesOnDrag:C});return _?null:O("div",{className:St(["react-flow__node",`react-flow__node-${i}`,{[T]:x},g,{selected:c,selectable:w,parent:W,dragging:$e}]),ref:z,style:{zIndex:j,transform:`translate(${l}px,${a}px)`,pointerEvents:ie?"all":"none",visibility:P?"visible":"hidden",...b},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:me,onMouseMove:xe,onMouseLeave:oe,onContextMenu:ee,onClick:Xe,onDoubleClick:Ie,onKeyDown:v?Qe:void 0,tabIndex:v?0:void 0,role:v?"button":void 0,"aria-describedby":B?void 0:`${gO}-${X}`,"aria-label":M,children:O(jk,{value:t,children:O(n,{id:t,data:r,type:i,xPos:s,yPos:o,selected:c,isConnectable:y,sourcePosition:$,targetPosition:E,dragging:$e,dragHandle:U,zIndex:j})})})};return e.displayName="NodeWrapper",S.exports.memo(e)};function OP(n){const e={input:Zr(n.input||fO),default:Zr(n.default||Gc),output:Zr(n.output||pO),group:Zr(n.group||Ou)},t={},i=Object.keys(n).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=Zr(n[s]||Gc),r),t);return{...e,...i}}const yP=({x:n,y:e,width:t,height:i,origin:r})=>!t||!i?{x:n,y:e}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:n,y:e}:{x:n-t*r[0],y:e-i*r[1]},bP=typeof document<"u"?document:null;var ll=(n=null,e={target:bP})=>{const[t,i]=S.exports.useState(!1),r=S.exports.useRef(new Set([])),[s,o]=S.exports.useMemo(()=>{if(n!==null){const a=(Array.isArray(n)?n:[n]).filter(h=>typeof h=="string").map(h=>h.split("+")),c=a.reduce((h,u)=>h.concat(...u),[]);return[a,c]}return[[],[]]},[n]);return S.exports.useEffect(()=>{var l,a;if(n!==null){const c=f=>{if(cd(f))return!1;const d=ad(f.code,o);r.current.add(f[d]),ld(s,r.current,!1)&&(f.preventDefault(),i(!0))},h=f=>{if(cd(f))return!1;const d=ad(f.code,o);ld(s,r.current,!0)?(i(!1),r.current.clear()):r.current.delete(f[d])},u=()=>{r.current.clear(),i(!1)};return(l=e==null?void 0:e.target)==null||l.addEventListener("keydown",c),(a=e==null?void 0:e.target)==null||a.addEventListener("keyup",h),window.addEventListener("blur",u),()=>{var f,d;(f=e==null?void 0:e.target)==null||f.removeEventListener("keydown",c),(d=e==null?void 0:e.target)==null||d.removeEventListener("keyup",h),window.removeEventListener("blur",u)}}},[n,i]),t};function ld(n,e,t){return n.filter(i=>t||i.length===e.size).some(i=>i.every(r=>e.has(r)))}function ad(n,e){return e.includes(n)?"code":"key"}function cd(n){var t;const e=((t=n.composedPath)==null?void 0:t.call(n)[0])||n.target;return["INPUT","SELECT","TEXTAREA"].includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute("contenteditable"))||!!(e!=null&&e.closest(".nokey"))}function vO(n,e,t,i){var s,o,l,a,c,h,u,f,d,p,m,b;if(!n.parentNode)return i;const r=e.get(n.parentNode);return vO(r,e,t,{x:((s=i.x)!=null?s:0)+((l=(o=r.position)==null?void 0:o.x)!=null?l:0),y:((a=i.y)!=null?a:0)+((h=(c=r.position)==null?void 0:c.y)!=null?h:0),z:((f=(u=r[ut])==null?void 0:u.z)!=null?f:0)>((d=i.z)!=null?d:0)?(m=(p=r[ut])==null?void 0:p.z)!=null?m:0:(b=i.z)!=null?b:0})}function Wa(n,e){const t=new Map,i={};return n.forEach(r=>{var a;const s=eO(r.zIndex)?r.zIndex:r.selected?1e3:0,o=e.get(r.id),l={width:o==null?void 0:o.width,height:o==null?void 0:o.height,...r,positionAbsolute:{x:r.position.x,y:r.position.y}};r.parentNode&&(l.parentNode=r.parentNode,i[r.parentNode]=!0),Object.defineProperty(l,ut,{enumerable:!1,value:{handleBounds:(a=o==null?void 0:o[ut])==null?void 0:a.handleBounds,z:s}}),t.set(r.id,l)}),t.forEach(r=>{var s,o;if(r.parentNode&&!t.has(r.parentNode))throw new Error(`Parent node ${r.parentNode} not found`);if(r.parentNode||i[r.id]){const{x:l,y:a,z:c}=vO(r,t,i,{...r.position,z:(o=(s=r[ut])==null?void 0:s.z)!=null?o:0});r.positionAbsolute={x:l,y:a},r[ut].z=c,i[r.id]&&(r[ut].isParent=!0)}}),t}function wO(n,e={}){var u,f,d;const{nodeInternals:t,width:i,height:r,minZoom:s,maxZoom:o,d3Zoom:l,d3Selection:a,fitViewOnInitDone:c,fitViewOnInit:h}=n();if((e.initial&&!c&&h||!e.initial)&&l&&a){const p=Array.from(t.values()).filter(b=>e.includeHiddenNodes?b.width&&b.height:!b.hidden),m=p.every(b=>b.width&&b.height);if(p.length>0&&m){const b=na(p),[g,x,w]=aO(b,i,r,(u=e.minZoom)!=null?u:s,(f=e.maxZoom)!=null?f:o,(d=e.padding)!=null?d:.1),y=ii.translate(g,x).scale(w);return typeof e.duration=="number"&&e.duration>0?l.transform(bi(a,e.duration),y):l.transform(a,y),!0}}return!1}function xP(n,e){return n.forEach(t=>{const i=e.get(t.id);i&&e.set(i.id,{...i,[ut]:i[ut],selected:t.selected})}),new Map(e)}function SP(n,e){return e.map(t=>{const i=n.find(r=>r.id===t.id);return i&&(t.selected=i.selected),t})}function ao({changedNodes:n,changedEdges:e,get:t,set:i}){const{nodeInternals:r,edges:s,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:a,hasDefaultEdges:c}=t();n!=null&&n.length&&(a&&i({nodeInternals:xP(n,r)}),o==null||o(n)),e!=null&&e.length&&(c&&i({edges:SP(e,s)}),l==null||l(e))}const gi=()=>{},vP={zoomIn:gi,zoomOut:gi,zoomTo:gi,getZoom:()=>1,setViewport:gi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:gi,setCenter:gi,fitBounds:gi,project:n=>n,viewportInitialized:!1},wP=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection}),QP=()=>{const n=nt(),{d3Zoom:e,d3Selection:t}=qe(wP,Et);return S.exports.useMemo(()=>t&&e?{zoomIn:r=>e.scaleBy(bi(t,r==null?void 0:r.duration),1.2),zoomOut:r=>e.scaleBy(bi(t,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>e.scaleTo(bi(t,s==null?void 0:s.duration),r),getZoom:()=>n.getState().transform[2],setViewport:(r,s)=>{var h,u,f;const[o,l,a]=n.getState().transform,c=ii.translate((h=r.x)!=null?h:o,(u=r.y)!=null?u:l).scale((f=r.zoom)!=null?f:a);e.transform(bi(t,s==null?void 0:s.duration),c)},getViewport:()=>{const[r,s,o]=n.getState().transform;return{x:r,y:s,zoom:o}},fitView:r=>wO(n.getState,r),setCenter:(r,s,o)=>{const{width:l,height:a,maxZoom:c}=n.getState(),h=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,u=l/2-r*h,f=a/2-s*h,d=ii.translate(u,f).scale(h);e.transform(bi(t,o==null?void 0:o.duration),d)},fitBounds:(r,s)=>{var p;const{width:o,height:l,minZoom:a,maxZoom:c}=n.getState(),[h,u,f]=aO(r,o,l,a,c,(p=s==null?void 0:s.padding)!=null?p:.1),d=ii.translate(h,u).scale(f);e.transform(bi(t,s==null?void 0:s.duration),d)},project:r=>{const{transform:s,snapToGrid:o,snapGrid:l}=n.getState();return Yk(r,s,o,l)},viewportInitialized:!0}:vP,[e,t])};function ia(){const n=QP(),e=nt(),t=S.exports.useCallback(()=>{const{nodeInternals:m}=e.getState();return Array.from(m.values()).map(g=>({...g}))},[]),i=S.exports.useCallback(m=>{const{nodeInternals:b}=e.getState();return b.get(m)},[]),r=S.exports.useCallback(()=>{const{edges:m=[]}=e.getState();return m.map(b=>({...b}))},[]),s=S.exports.useCallback(m=>{const{edges:b=[]}=e.getState();return b.find(g=>g.id===m)},[]),o=S.exports.useCallback(m=>{const{nodeInternals:b,setNodes:g,hasDefaultNodes:x,onNodesChange:w}=e.getState(),y=Array.from(b.values()),v=typeof m=="function"?m(y):m;if(x)g(v);else if(w){const C=v.length===0?y.map($=>({type:"remove",id:$.id})):v.map($=>({item:$,type:"reset"}));w(C)}},[]),l=S.exports.useCallback(m=>{const{edges:b=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:w}=e.getState(),y=typeof m=="function"?m(b):m;if(x)g(y);else if(w){const v=y.length===0?b.map(C=>({type:"remove",id:C.id})):y.map(C=>({item:C,type:"reset"}));w(v)}},[]),a=S.exports.useCallback(m=>{const b=Array.isArray(m)?m:[m],{nodeInternals:g,setNodes:x,hasDefaultNodes:w,onNodesChange:y}=e.getState();if(w){const C=[...Array.from(g.values()),...b];x(C)}else if(y){const v=b.map(C=>({item:C,type:"add"}));y(v)}},[]),c=S.exports.useCallback(m=>{const b=Array.isArray(m)?m:[m],{edges:g=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:y}=e.getState();if(w)x([...g,...b]);else if(y){const v=b.map(C=>({item:C,type:"add"}));y(v)}},[]),h=S.exports.useCallback(()=>{const{nodeInternals:m,edges:b=[],transform:g}=e.getState(),x=Array.from(m.values()),[w,y,v]=g;return{nodes:x.map(C=>({...C})),edges:b.map(C=>({...C})),viewport:{x:w,y,zoom:v}}},[]),u=S.exports.useCallback(({nodes:m,edges:b})=>{const{nodeInternals:g,edges:x,hasDefaultNodes:w,hasDefaultEdges:y,onNodesDelete:v,onEdgesDelete:C,onNodesChange:$,onEdgesChange:E}=e.getState(),_=Array.from(g.values()),A=(m||[]).map(T=>T.id),U=(b||[]).map(T=>T.id),j=_.reduce((T,P)=>{const B=!A.includes(P.id)&&P.parentNode&&T.find(X=>X.id===P.parentNode);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(A.includes(P.id)||B)&&T.push(P),T},[]),W=x.filter(T=>typeof T.deletable=="boolean"?T.deletable:!0),Q=W.filter(T=>U.includes(T.id));if(j||Q){const T=lO(j,W),P=[...Q,...T],B=P.reduce((M,X)=>(M.includes(X.id)||M.push(X.id),M),[]);if((y||w)&&(y&&e.setState({edges:x.filter(M=>!B.includes(M.id))}),w&&(j.forEach(M=>{g.delete(M.id)}),e.setState({nodeInternals:new Map(g)}))),B.length>0&&(C==null||C(P),E&&E(B.map(M=>({id:M,type:"remove"})))),j.length>0&&(v==null||v(j),$)){const M=j.map(X=>({id:X.id,type:"remove"}));$(M)}}},[]),f=S.exports.useCallback(m=>{const b=Vk(m),g=b?null:e.getState().nodeInternals.get(m.id);return[b?m:Ff(g),g,b]},[]),d=S.exports.useCallback((m,b=!0,g)=>{const[x,w,y]=f(m);return x?(g||Array.from(e.getState().nodeInternals.values())).filter(v=>{if(!y&&(v.id===w.id||!v.positionAbsolute))return!1;const C=Ff(v),$=zc(C,x);return b&&$>0||$>=m.width*m.height}):[]},[]),p=S.exports.useCallback((m,b,g=!0)=>{const[x]=f(m);if(!x)return!1;const w=zc(x,b);return g&&w>0||w>=m.width*m.height},[]);return S.exports.useMemo(()=>({...n,getNodes:t,getNode:i,getEdges:r,getEdge:s,setNodes:o,setEdges:l,addNodes:a,addEdges:c,toObject:h,deleteElements:u,getIntersectingNodes:d,isNodeIntersecting:p}),[n,t,i,r,s,o,l,a,c,h,u,d,p])}var CP=({deleteKeyCode:n,multiSelectionKeyCode:e})=>{const t=nt(),{deleteElements:i}=ia(),r=ll(n),s=ll(e);S.exports.useEffect(()=>{if(r){const{nodeInternals:o,edges:l}=t.getState(),c=Array.from(o.values()).filter(u=>u.selected),h=l.filter(u=>u.selected);i({nodes:c,edges:h}),t.setState({nodesSelectionActive:!1})}},[r]),S.exports.useEffect(()=>{t.setState({multiSelectionActive:s})},[s])};function $P(n){const e=nt();S.exports.useEffect(()=>{let t;const i=()=>{if(!n.current)return;const r=uu(n.current);r.height===0||r.width,e.setState({width:r.width||500,height:r.height||500})};return i(),window.addEventListener("resize",i),n.current&&(t=new ResizeObserver(()=>i()),t.observe(n.current)),()=>{window.removeEventListener("resize",i),t&&n.current&&t.unobserve(n.current)}},[])}const yu={position:"absolute",width:"100%",height:"100%",top:0,left:0},kP=(n,e)=>n.x!==e.x||n.y!==e.y||n.zoom!==e.k,ja=n=>({x:n.x,y:n.y,zoom:n.k}),co=(n,e)=>n.target.closest(`.${e}`),PP=n=>({d3Zoom:n.d3Zoom,d3Selection:n.d3Selection,d3ZoomHandler:n.d3ZoomHandler}),TP=({onMove:n,onMoveStart:e,onMoveEnd:t,zoomOnScroll:i=!0,zoomOnPinch:r=!0,panOnScroll:s=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=or.Free,zoomOnDoubleClick:a=!0,selectionKeyPressed:c,elementsSelectable:h,panOnDrag:u=!0,defaultViewport:f,translateExtent:d,minZoom:p,maxZoom:m,zoomActivationKeyCode:b,preventScrolling:g=!0,children:x,noWheelClassName:w,noPanClassName:y})=>{const v=S.exports.useRef(),C=nt(),$=S.exports.useRef(!1),E=S.exports.useRef(null),_=S.exports.useRef({x:0,y:0,zoom:0}),{d3Zoom:A,d3Selection:U,d3ZoomHandler:j}=qe(PP,Et),W=ll(b);return $P(E),S.exports.useEffect(()=>{if(E.current){const Q=jg().scaleExtent([p,m]).translateExtent(d),T=jt(E.current).call(Q),P=lr(f.x,d[0][0],d[1][0]),B=lr(f.y,d[0][1],d[1][1]),M=lr(f.zoom,p,m),X=ii.translate(P,B).scale(M);Q.transform(T,X),C.setState({d3Zoom:Q,d3Selection:T,d3ZoomHandler:T.on("wheel.zoom"),transform:[P,B,M],domNode:E.current.closest(".react-flow")})}},[]),S.exports.useEffect(()=>{U&&A&&(s&&!W?U.on("wheel.zoom",Q=>{if(co(Q,w))return!1;Q.preventDefault(),Q.stopImmediatePropagation();const T=U.property("__zoom").k||1;if(Q.ctrlKey&&r){const X=nn(Q),V=-Q.deltaY*(Q.deltaMode===1?.05:Q.deltaMode?1:.002)*10,z=T*Math.pow(2,V);A.scaleTo(U,z,X);return}const P=Q.deltaMode===1?20:1,B=l===or.Vertical?0:Q.deltaX*P,M=l===or.Horizontal?0:Q.deltaY*P;A.translateBy(U,-(B/T)*o,-(M/T)*o)}):typeof j<"u"&&U.on("wheel.zoom",function(Q,T){if(!g||co(Q,w))return null;Q.preventDefault(),j.call(this,Q,T)}))},[s,l,U,A,j,W,r,g,w]),S.exports.useEffect(()=>{A&&(c&&!$.current?A.on("zoom",null):c||A.on("zoom",Q=>{const{onViewportChange:T}=C.getState();if(C.setState({transform:[Q.transform.x,Q.transform.y,Q.transform.k]}),n||T){const P=ja(Q.transform);T==null||T(P),n==null||n(Q.sourceEvent,P)}}))},[c,A,n]),S.exports.useEffect(()=>{A&&A.on("start",Q=>{var P;if(!Q.sourceEvent)return null;const{onViewportChangeStart:T}=C.getState();if($.current=!0,((P=Q.sourceEvent)==null?void 0:P.type)==="mousedown"&&C.setState({paneDragging:!0}),e||T){const B=ja(Q.transform);_.current=B,T==null||T(B),e==null||e(Q.sourceEvent,B)}})},[A,e]),S.exports.useEffect(()=>{A&&A.on("end",Q=>{if(!Q.sourceEvent)return null;const{onViewportChangeEnd:T}=C.getState();if($.current=!1,C.setState({paneDragging:!1}),(t||T)&&kP(_.current,Q.transform)){const P=ja(Q.transform);_.current=P,clearTimeout(v.current),v.current=setTimeout(()=>{T==null||T(P),t==null||t(Q.sourceEvent,P)},s?150:0)}})},[A,t,s]),S.exports.useEffect(()=>{A&&A.filter(Q=>{const T=W||i,P=r&&Q.ctrlKey;return Q.button===1&&Q.type==="mousedown"&&Q.target.closest(".react-flow__node")?!0:!u&&!T&&!s&&!a&&!r||c||!a&&Q.type==="dblclick"||co(Q,w)&&Q.type==="wheel"||co(Q,y)&&Q.type!=="wheel"||!r&&Q.ctrlKey&&Q.type==="wheel"||!T&&!s&&!P&&Q.type==="wheel"||!u&&(Q.type==="mousedown"||Q.type==="touchstart")?!1:(!Q.ctrlKey||Q.type==="wheel")&&(!Q.button||Q.button<=1)})},[A,i,r,s,a,u,c,h,W]),O("div",{className:"react-flow__renderer",ref:E,style:yu,children:x})};function hd(n,e){var i,r;const t=n.find(s=>s.id===e.parentNode);if(t){const s=e.position.x+e.width-t.width,o=e.position.y+e.height-t.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(t.style={...t.style},t.style.width=(i=t.style.width)!=null?i:t.width,t.style.height=(r=t.style.height)!=null?r:t.height,s>0&&(t.style.width+=s),o>0&&(t.style.height+=o),e.position.x<0){const l=Math.abs(e.position.x);t.position.x=t.position.x-l,t.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);t.position.y=t.position.y-l,t.style.height+=l,e.position.y=0}t.width=t.style.width,t.height=t.style.height}}}function QO(n,e){if(n.some(i=>i.type==="reset"))return n.filter(i=>i.type==="reset").map(i=>i.item);const t=n.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,r)=>{const s=n.find(o=>o.id===r.id);if(s)switch(s.type){case"select":return i.push({...r,selected:s.selected}),i;case"position":{const o={...r};return typeof s.position<"u"&&(o.position=s.position),typeof s.positionAbsolute<"u"&&(o.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(o.dragging=s.dragging),o.expandParent&&hd(i,o),i.push(o),i}case"dimensions":{const o={...r};return typeof s.dimensions<"u"&&(o.width=s.dimensions.width,o.height=s.dimensions.height),o.expandParent&&hd(i,o),i.push(o),i}case"remove":return i}return i.push(r),i},t)}function bu(n,e){return QO(n,e)}function AP(n,e){return QO(n,e)}const zn=(n,e)=>({id:n,type:"select",selected:e});function Ki(n,e){return n.reduce((t,i)=>{const r=e.includes(i.id);return!i.selected&&r?(i.selected=!0,t.push(zn(i.id,!0))):i.selected&&!r&&(i.selected=!1,t.push(zn(i.id,!1))),t},[])}function ud(n,e){return{x:n.clientX-e.left,y:n.clientY-e.top}}const RP=n=>({userSelectionActive:n.userSelectionActive,elementsSelectable:n.elementsSelectable}),fd={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},CO=S.exports.memo(({selectionKeyPressed:n})=>{const e=nt(),t=S.exports.useRef(0),i=S.exports.useRef(0),r=S.exports.useRef(),[s,o]=S.exports.useState(fd),{userSelectionActive:l,elementsSelectable:a}=qe(RP,Et);if(!a||!(l||n))return null;const h=()=>{o(fd),e.setState({userSelectionActive:!1}),t.current=0,i.current=0};return O("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m=>{const b=m.target.closest(".react-flow");r.current=b.getBoundingClientRect();const g=ud(m,r.current);o({width:0,height:0,startX:g.x,startY:g.y,x:g.x,y:g.y,draw:!0}),e.setState({userSelectionActive:!0,nodesSelectionActive:!1})},onMouseMove:m=>{var W,Q;if(!n||!s.draw||!r.current)return;const b=ud(m,r.current),g=(W=s.startX)!=null?W:0,x=(Q=s.startY)!=null?Q:0,w={...s,x:b.x<g?b.x:g,y:b.y<x?b.y:x,width:Math.abs(b.x-g),height:Math.abs(b.y-x)},{nodeInternals:y,edges:v,transform:C,onNodesChange:$,onEdgesChange:E}=e.getState(),_=Array.from(y.values()),A=oO(y,w,C,!1,!0),U=lO(A,v).map(T=>T.id),j=A.map(T=>T.id);if(t.current!==j.length){t.current=j.length;const T=Ki(_,j);T.length&&($==null||$(T))}if(i.current!==U.length){i.current=U.length;const T=Ki(v,U);T.length&&(E==null||E(T))}o(w)},onMouseUp:()=>{e.setState({nodesSelectionActive:t.current>0}),h()},onMouseLeave:()=>{e.setState({nodesSelectionActive:!1}),h()},children:s.draw&&O("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}})})});CO.displayName="UserSelection";const EP=n=>({transformString:`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`,userSelectionActive:n.userSelectionActive,...na(Array.from(n.nodeInternals.values()).filter(e=>e.selected))}),_P=n=>{const e=Array.from(n.nodeInternals.values()).filter(t=>t.selected);return na(e)};function MP({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const i=nt(),{transformString:r,userSelectionActive:s}=qe(EP,Et),{width:o,height:l,x:a,y:c}=qe(_P,Et),h=SO(),u=S.exports.useRef(null);if(S.exports.useEffect(()=>{var p;t||(p=u.current)==null||p.focus()},[t]),xO({nodeRef:u}),s||!o||!l)return null;const f=n?p=>{const m=Array.from(i.getState().nodeInternals.values()).filter(b=>b.selected);n(p,m)}:void 0,d=p=>{Object.prototype.hasOwnProperty.call(rs,p.key)&&h(rs[p.key])};return O("div",{className:St(["react-flow__nodesselection","react-flow__container",e]),style:{transform:r},children:O("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:t?void 0:-1,onKeyDown:t?void 0:d,style:{width:o,height:l,top:c,left:a}})})}var DP=S.exports.memo(MP);const NP=n=>n.paneDragging;function BP({onClick:n,onMouseEnter:e,onMouseMove:t,onMouseLeave:i,onContextMenu:r,onWheel:s}){const o=qe(NP);return O("div",{className:St(["react-flow__pane",{dragging:o}]),onClick:n,onMouseEnter:e,onMouseMove:t,onMouseLeave:i,onContextMenu:r,onWheel:s,style:yu})}const IP=n=>n.nodesSelectionActive,$O=({children:n,onPaneClick:e,onPaneMouseEnter:t,onPaneMouseMove:i,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:o,deleteKeyCode:l,onMove:a,onMoveStart:c,onMoveEnd:h,selectionKeyCode:u,multiSelectionKeyCode:f,zoomActivationKeyCode:d,elementsSelectable:p,zoomOnScroll:m,zoomOnPinch:b,panOnScroll:g,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:y,panOnDrag:v,defaultViewport:C,translateExtent:$,minZoom:E,maxZoom:_,preventScrolling:A,onSelectionContextMenu:U,noWheelClassName:j,noPanClassName:W,disableKeyboardA11y:Q})=>{const T=nt(),P=qe(IP),B=ll(u);CP({deleteKeyCode:l,multiSelectionKeyCode:f});const M=z=>{e==null||e(z),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},X=s?z=>s(z):void 0,V=o?z=>o(z):void 0;return q(TP,{onMove:a,onMoveStart:c,onMoveEnd:h,selectionKeyPressed:B,elementsSelectable:p,zoomOnScroll:m,zoomOnPinch:b,panOnScroll:g,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:y,panOnDrag:v,defaultViewport:C,translateExtent:$,minZoom:E,maxZoom:_,zoomActivationKeyCode:d,preventScrolling:A,noWheelClassName:j,noPanClassName:W,children:[n,O(CO,{selectionKeyPressed:B}),P&&O(DP,{onSelectionContextMenu:U,noPanClassName:W,disableKeyboardA11y:Q}),O(BP,{onClick:M,onMouseEnter:t,onMouseMove:i,onMouseLeave:r,onContextMenu:X,onWheel:V})]})};$O.displayName="FlowRenderer";var XP=S.exports.memo($O);function UP(n){return qe(S.exports.useCallback(t=>n?oO(t.nodeInternals,{x:0,y:0,width:t.width,height:t.height},t.transform,!0):Array.from(t.nodeInternals.values()),[n]))}const VP=n=>({nodesDraggable:n.nodesDraggable,nodesConnectable:n.nodesConnectable,nodesFocusable:n.nodesFocusable,elementsSelectable:n.elementsSelectable,updateNodeDimensions:n.updateNodeDimensions}),kO=n=>{const{nodesDraggable:e,nodesConnectable:t,nodesFocusable:i,elementsSelectable:r,updateNodeDimensions:s}=qe(VP,Et),o=UP(n.onlyRenderVisibleElements),l=S.exports.useRef(),a=S.exports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(h=>{const u=h.map(f=>({id:f.target.getAttribute("data-id"),nodeElement:f.target,forceUpdate:!0}));s(u)});return l.current=c,c},[]);return S.exports.useEffect(()=>()=>{var c;(c=l==null?void 0:l.current)==null||c.disconnect()},[]),O("div",{className:"react-flow__nodes",style:yu,children:o.map(c=>{var y,v,C,$,E,_,A;let h=c.type||"default";n.nodeTypes[h]||(h="default");const u=n.nodeTypes[h]||n.nodeTypes.default,f=!!(c.draggable||e&&typeof c.draggable>"u"),d=!!(c.selectable||r&&typeof c.selectable>"u"),p=!!(c.connectable||t&&typeof c.connectable>"u"),m=!!(c.focusable||i&&typeof c.focusable>"u"),b=n.nodeExtent?fu(c.positionAbsolute,n.nodeExtent):c.positionAbsolute,g=(y=b==null?void 0:b.x)!=null?y:0,x=(v=b==null?void 0:b.y)!=null?v:0,w=yP({x:g,y:x,width:(C=c.width)!=null?C:0,height:($=c.height)!=null?$:0,origin:n.nodeOrigin});return O(u,{id:c.id,className:c.className,style:c.style,type:h,data:c.data,sourcePosition:c.sourcePosition||te.Bottom,targetPosition:c.targetPosition||te.Top,hidden:c.hidden,xPos:g,yPos:x,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:n.selectNodesOnDrag,onClick:n.onNodeClick,onMouseEnter:n.onNodeMouseEnter,onMouseMove:n.onNodeMouseMove,onMouseLeave:n.onNodeMouseLeave,onContextMenu:n.onNodeContextMenu,onDoubleClick:n.onNodeDoubleClick,selected:!!c.selected,isDraggable:f,isSelectable:d,isConnectable:p,isFocusable:m,resizeObserver:a,dragHandle:c.dragHandle,zIndex:(_=(E=c[ut])==null?void 0:E.z)!=null?_:0,isParent:!!((A=c[ut])!=null&&A.isParent),noDragClassName:n.noDragClassName,noPanClassName:n.noPanClassName,initialized:!!c.width&&!!c.height,rfId:n.rfId,disableKeyboardA11y:n.disableKeyboardA11y,ariaLabel:c.ariaLabel},c.id)})})};kO.displayName="NodeRenderer";var ZP=S.exports.memo(kO);const qP=[{level:0,isMaxLevel:!0,edges:[]}];function LP(n,e,t=!1){let i=-1;const r=n.reduce((o,l)=>{var h,u,f,d;const a=eO(l.zIndex);let c=a?l.zIndex:0;return t&&(c=a?l.zIndex:Math.max(((u=(h=e.get(l.source))==null?void 0:h[ut])==null?void 0:u.z)||0,((d=(f=e.get(l.target))==null?void 0:f[ut])==null?void 0:d.z)||0)),o[c]?o[c].push(l):o[c]=[l],i=c>i?c:i,o},{}),s=Object.entries(r).map(([o,l])=>{const a=+o;return{edges:l,level:a,isMaxLevel:a===i}});return s.length===0?qP:s}function zP(n,e,t){const i=qe(S.exports.useCallback(r=>n?r.edges.filter(s=>{const o=e.get(s.source),l=e.get(s.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&mP({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[n,e]));return LP(i,e,t)}const WP={[te.Left]:te.Right,[te.Right]:te.Left,[te.Top]:te.Bottom,[te.Bottom]:te.Top},PO=({connectionNodeId:n,connectionHandleType:e,connectionLineStyle:t,connectionLineType:i=Fn.Bezier,isConnectable:r,CustomConnectionLineComponent:s})=>{var v,C,$,E,_;const{fromNode:o,handleId:l,toX:a,toY:c}=qe(S.exports.useCallback(A=>({fromNode:A.nodeInternals.get(n),handleId:A.connectionHandleId,toX:(A.connectionPosition.x-A.transform[0])/A.transform[2],toY:(A.connectionPosition.y-A.transform[1])/A.transform[2]}),[n]),Et),h=(v=o==null?void 0:o[ut])==null?void 0:v.handleBounds;if(!o||!r||!(h!=null&&h[e]))return null;const u=h[e],f=l?u.find(A=>A.id===l):u[0],d=f?f.x+f.width/2:((C=o==null?void 0:o.width)!=null?C:0)/2,p=f?f.y+f.height/2:($=o==null?void 0:o.height)!=null?$:0,m=(((E=o==null?void 0:o.positionAbsolute)==null?void 0:E.x)||0)+d,b=(((_=o==null?void 0:o.positionAbsolute)==null?void 0:_.y)||0)+p,g=f==null?void 0:f.position;if(!g)return null;const x=WP[g];if(s)return O("g",{className:"react-flow__connection",children:O(s,{connectionLineType:i,connectionLineStyle:t,fromNode:o,fromHandle:f,fromX:m,fromY:b,toX:a,toY:c,fromPosition:g,toPosition:x})});let w="";const y={sourceX:m,sourceY:b,sourcePosition:g,targetX:a,targetY:c,targetPosition:x};return i===Fn.Bezier?[w]=iO(y):i===Fn.Step?[w]=Wc({...y,borderRadius:0}):i===Fn.SmoothStep?[w]=Wc(y):i===Fn.SimpleBezier?[w]=nO(y):w=`M${m},${b} ${a},${c}`,O("g",{className:"react-flow__connection",children:O("path",{d:w,fill:"none",className:"react-flow__connection-path",style:t})})};PO.displayName="ConnectionLine";const jP=({color:n="none",strokeWidth:e=1})=>O("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:"none",points:"-5,-4 0,0 -5,4"}),FP=({color:n="none",strokeWidth:e=1})=>O("polyline",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:n,points:"-5,-4 0,0 -5,4 -5,-4"}),dd={[sl.Arrow]:jP,[sl.ArrowClosed]:FP};function GP(n){return S.exports.useMemo(()=>Object.prototype.hasOwnProperty.call(dd,n)?dd[n]:null,[n])}const HP=({id:n,type:e,color:t,width:i=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const a=GP(e);return a?O("marker",{className:"react-flow__arrowhead",id:n,markerWidth:`${i}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:O(a,{color:t,strokeWidth:o})}):null},YP=({defaultColor:n,rfId:e})=>t=>{const i=[];return t.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=Fc(o,e);i.includes(l)||(r.push({id:l,color:o.color||n,...o}),i.push(l))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},TO=({defaultColor:n,rfId:e})=>{const t=qe(S.exports.useCallback(YP({defaultColor:n,rfId:e}),[n,e]),(i,r)=>!(i.length!==r.length||i.some((s,o)=>s.id!==r[o].id)));return O("defs",{children:t.map(i=>O(HP,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})};TO.displayName="MarkerDefinitions";var KP=S.exports.memo(TO);const JP=n=>({connectionNodeId:n.connectionNodeId,connectionHandleType:n.connectionHandleType,nodesConnectable:n.nodesConnectable,edgesFocusable:n.edgesFocusable,elementsSelectable:n.elementsSelectable,width:n.width,height:n.height,connectionMode:n.connectionMode,nodeInternals:n.nodeInternals}),AO=n=>{const{connectionNodeId:e,connectionHandleType:t,nodesConnectable:i,edgesFocusable:r,elementsSelectable:s,width:o,height:l,connectionMode:a,nodeInternals:c}=qe(JP,Et),h=zP(n.onlyRenderVisibleElements,c,n.elevateEdgesOnSelect);if(!o)return null;const{connectionLineType:u,defaultMarkerColor:f,connectionLineStyle:d,connectionLineComponent:p,connectionLineContainerStyle:m}=n,b=e&&t;return q(ke,{children:[h.map(({level:g,edges:x,isMaxLevel:w})=>q("svg",{style:{zIndex:g},width:o,height:l,className:"react-flow__edges react-flow__container",children:[w&&O(KP,{defaultColor:f,rfId:n.rfId}),O("g",{children:x.map(y=>{const[v,C,$]=rd(c.get(y.source)),[E,_,A]=rd(c.get(y.target));if(!$||!A)return null;let U=y.type||"default";n.edgeTypes[U]||(U="default");const j=n.edgeTypes[U]||n.edgeTypes.default,W=a===br.Strict?_.target:_.target||_.source,Q=id(C.source,y.sourceHandle||null),T=id(W,y.targetHandle||null),P=(Q==null?void 0:Q.position)||te.Bottom,B=(T==null?void 0:T.position)||te.Top,M=!!(y.focusable||r&&typeof y.focusable>"u");if(!Q||!T)return Zk(`Couldn't create edge for ${Q?"target":"source"} handle id: ${Q?y.targetHandle:y.sourceHandle}; edge id: ${y.id}. Help: https://reactflow.dev/error#800`),null;const{sourceX:X,sourceY:V,targetX:z,targetY:se}=pP(v,Q,P,E,T,B);return O(j,{id:y.id,className:St([y.className,n.noPanClassName]),type:U,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:X,sourceY:V,targetX:z,targetY:se,sourcePosition:P,targetPosition:B,elementsSelectable:s,onEdgeUpdate:n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,onClick:n.onEdgeClick,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd,rfId:n.rfId,ariaLabel:y.ariaLabel,isFocusable:M,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth},y.id)})})]},g)),b&&O("svg",{style:m,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container",children:O(PO,{connectionNodeId:e,connectionHandleType:t,connectionLineStyle:d,connectionLineType:u,isConnectable:i,CustomConnectionLineComponent:p})})]})};AO.displayName="EdgeRenderer";var eT=S.exports.memo(AO);const tT=n=>`translate(${n.transform[0]}px,${n.transform[1]}px) scale(${n.transform[2]})`;function nT({children:n}){const e=qe(tT);return O("div",{className:"react-flow__viewport react-flow__container",style:{transform:e},children:n})}function iT(n){const e=ia(),t=S.exports.useRef(!1);S.exports.useEffect(()=>{!t.current&&e.viewportInitialized&&n&&(setTimeout(()=>n(e),1),t.current=!0)},[n,e.viewportInitialized])}const RO=({nodeTypes:n,edgeTypes:e,onMove:t,onMoveStart:i,onMoveEnd:r,onInit:s,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:a,onEdgeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:d,onSelectionContextMenu:p,connectionLineType:m,connectionLineStyle:b,connectionLineComponent:g,connectionLineContainerStyle:x,selectionKeyCode:w,multiSelectionKeyCode:y,zoomActivationKeyCode:v,deleteKeyCode:C,onlyRenderVisibleElements:$,elementsSelectable:E,selectNodesOnDrag:_,defaultViewport:A,translateExtent:U,minZoom:j,maxZoom:W,preventScrolling:Q,defaultMarkerColor:T,zoomOnScroll:P,zoomOnPinch:B,panOnScroll:M,panOnScrollSpeed:X,panOnScrollMode:V,zoomOnDoubleClick:z,panOnDrag:se,onPaneClick:de,onPaneMouseEnter:ae,onPaneMouseMove:ie,onPaneMouseLeave:pe,onPaneScroll:me,onPaneContextMenu:xe,onEdgeUpdate:oe,onEdgeContextMenu:ee,onEdgeMouseEnter:Ie,onEdgeMouseMove:Xe,onEdgeMouseLeave:Qe,edgeUpdaterRadius:$e,onEdgeUpdateStart:Oe,onEdgeUpdateEnd:Te,noDragClassName:it,noWheelClassName:D,noPanClassName:I,elevateEdgesOnSelect:Z,disableKeyboardA11y:G,nodeOrigin:re,nodeExtent:Se,rfId:he})=>(iT(s),O(XP,{onPaneClick:de,onPaneMouseEnter:ae,onPaneMouseMove:ie,onPaneMouseLeave:pe,onPaneContextMenu:xe,onPaneScroll:me,deleteKeyCode:C,selectionKeyCode:w,multiSelectionKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:E,onMove:t,onMoveStart:i,onMoveEnd:r,zoomOnScroll:P,zoomOnPinch:B,zoomOnDoubleClick:z,panOnScroll:M,panOnScrollSpeed:X,panOnScrollMode:V,panOnDrag:se,defaultViewport:A,translateExtent:U,minZoom:j,maxZoom:W,onSelectionContextMenu:p,preventScrolling:Q,noDragClassName:it,noWheelClassName:D,noPanClassName:I,disableKeyboardA11y:G,children:q(nT,{children:[O(eT,{edgeTypes:e,onEdgeClick:l,onEdgeDoubleClick:c,connectionLineType:m,connectionLineStyle:b,connectionLineComponent:g,connectionLineContainerStyle:x,onEdgeUpdate:oe,onlyRenderVisibleElements:$,onEdgeContextMenu:ee,onEdgeMouseEnter:Ie,onEdgeMouseMove:Xe,onEdgeMouseLeave:Qe,onEdgeUpdateStart:Oe,onEdgeUpdateEnd:Te,edgeUpdaterRadius:$e,defaultMarkerColor:T,noPanClassName:I,elevateEdgesOnSelect:!!Z,disableKeyboardA11y:G,rfId:he}),O("div",{className:"react-flow__edgelabel-renderer",id:"edgelabel-portal"}),O(ZP,{nodeTypes:n,onNodeClick:o,onNodeDoubleClick:a,onNodeMouseEnter:h,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:d,selectNodesOnDrag:_,onlyRenderVisibleElements:$,noPanClassName:I,noDragClassName:it,disableKeyboardA11y:G,nodeOrigin:re,nodeExtent:Se,rfId:he})]})}));RO.displayName="GraphView";var rT=S.exports.memo(RO);const Yc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ho={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Yc,nodeExtent:Yc,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:br.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:""},sT=()=>Bw((n,e)=>({...ho,setNodes:t=>{n({nodeInternals:Wa(t,e().nodeInternals)})},setEdges:t=>{const{defaultEdgeOptions:i={}}=e();n({edges:t.map(r=>({...i,...r}))})},setDefaultNodesAndEdges:(t,i)=>{const r=typeof t<"u",s=typeof i<"u",o=r?Wa(t,new Map):new Map;n({nodeInternals:o,edges:s?i:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:t=>{const{onNodesChange:i,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:a,nodeOrigin:c}=e(),h=a==null?void 0:a.querySelector(".react-flow__viewport");if(!h)return;const u=window.getComputedStyle(h),{m22:f}=new window.DOMMatrixReadOnly(u.transform),d=t.reduce((m,b)=>{const g=r.get(b.id);if(g){const x=uu(b.nodeElement);!!(x.width&&x.height&&(g.width!==x.width||g.height!==x.height||b.forceUpdate))&&(r.set(g.id,{...g,[ut]:{...g[ut],handleBounds:{source:od(".source",b.nodeElement,f,c),target:od(".target",b.nodeElement,f,c)}},...x}),m.push({id:g.id,type:"dimensions",dimensions:x}))}return m},[]),p=o||s&&!o&&wO(e,{initial:!0,...l});n({nodeInternals:new Map(r),fitViewOnInitDone:p}),(d==null?void 0:d.length)>0&&(i==null||i(d))},updateNodePositions:(t,i=!0,r=!1)=>{const{onNodesChange:s,nodeInternals:o,hasDefaultNodes:l}=e();if(l||s){const a=t.map(c=>{const h={id:c.id,type:"position",dragging:r};return i&&(h.positionAbsolute=c.positionAbsolute,h.position=c.position),h});if(a!=null&&a.length){if(l){const c=bu(a,Array.from(o.values())),h=Wa(c,o);n({nodeInternals:h})}s==null||s(a)}}},addSelectedNodes:t=>{const{multiSelectionActive:i,nodeInternals:r,edges:s}=e();let o,l=null;i?o=t.map(a=>zn(a,!0)):(o=Ki(Array.from(r.values()),t),l=Ki(s,[])),ao({changedNodes:o,changedEdges:l,get:e,set:n})},addSelectedEdges:t=>{const{multiSelectionActive:i,edges:r,nodeInternals:s}=e();let o,l=null;i?o=t.map(a=>zn(a,!0)):(o=Ki(r,t),l=Ki(Array.from(s.values()),[])),ao({changedNodes:l,changedEdges:o,get:e,set:n})},unselectNodesAndEdges:({nodes:t,edges:i}={})=>{const{nodeInternals:r,edges:s}=e(),o=t||Array.from(r.values()),l=i||s,a=o.map(h=>(h.selected=!1,zn(h.id,!1))),c=l.map(h=>zn(h.id,!1));ao({changedNodes:a,changedEdges:c,get:e,set:n})},setMinZoom:t=>{const{d3Zoom:i,maxZoom:r}=e();i==null||i.scaleExtent([t,r]),n({minZoom:t})},setMaxZoom:t=>{const{d3Zoom:i,minZoom:r}=e();i==null||i.scaleExtent([r,t]),n({maxZoom:t})},setTranslateExtent:t=>{const{d3Zoom:i}=e();i==null||i.translateExtent(t),n({translateExtent:t})},resetSelectedElements:()=>{const{nodeInternals:t,edges:i}=e(),s=Array.from(t.values()).filter(l=>l.selected).map(l=>zn(l.id,!1)),o=i.filter(l=>l.selected).map(l=>zn(l.id,!1));ao({changedNodes:s,changedEdges:o,get:e,set:n})},setNodeExtent:t=>{const{nodeInternals:i}=e();i.forEach(r=>{r.positionAbsolute=fu(r.position,t)}),n({nodeExtent:t,nodeInternals:new Map(i)})},cancelConnection:()=>n({connectionNodeId:ho.connectionNodeId,connectionHandleId:ho.connectionHandleId}),reset:()=>n({...ho})})),EO=({children:n})=>{const e=S.exports.useRef(null);return e.current||(e.current=sT()),O(Dk,{value:e.current,children:n})};EO.displayName="ReactFlowProvider";const _O=({children:n})=>{let e=!0;try{nt()}catch{e=!1}return e?O(ke,{children:n}):O(EO,{children:n})};_O.displayName="ReactFlowWrapper";function pd(n,e){return S.exports.useRef(null),S.exports.useMemo(()=>e(n),[n])}const oT={input:fO,default:Gc,output:pO,group:Ou},lT={default:ol,straight:mu,step:pu,smoothstep:ta,simplebezier:du},aT=[0,0],cT=[15,15],hT={x:0,y:0,zoom:1},uT={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},MO=S.exports.forwardRef(({nodes:n,edges:e,defaultNodes:t,defaultEdges:i,className:r,nodeTypes:s=oT,edgeTypes:o=lT,onNodeClick:l,onEdgeClick:a,onInit:c,onMove:h,onMoveStart:u,onMoveEnd:f,onConnect:d,onConnectStart:p,onConnectEnd:m,onClickConnectStart:b,onClickConnectEnd:g,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:y,onNodeContextMenu:v,onNodeDoubleClick:C,onNodeDragStart:$,onNodeDrag:E,onNodeDragStop:_,onNodesDelete:A,onEdgesDelete:U,onSelectionChange:j,onSelectionDragStart:W,onSelectionDrag:Q,onSelectionDragStop:T,onSelectionContextMenu:P,connectionMode:B=br.Strict,connectionLineType:M=Fn.Bezier,connectionLineStyle:X,connectionLineComponent:V,connectionLineContainerStyle:z,deleteKeyCode:se="Backspace",selectionKeyCode:de="Shift",multiSelectionKeyCode:ae="Meta",zoomActivationKeyCode:ie="Meta",snapToGrid:pe=!1,snapGrid:me=cT,onlyRenderVisibleElements:xe=!1,selectNodesOnDrag:oe=!0,nodesDraggable:ee,nodesConnectable:Ie,nodesFocusable:Xe,nodeOrigin:Qe=aT,edgesFocusable:$e,elementsSelectable:Oe,defaultViewport:Te=hT,minZoom:it=.5,maxZoom:D=2,translateExtent:I=Yc,preventScrolling:Z=!0,nodeExtent:G,defaultMarkerColor:re="#b1b1b7",zoomOnScroll:Se=!0,zoomOnPinch:he=!0,panOnScroll:ue=!1,panOnScrollSpeed:ge=.5,panOnScrollMode:Ae=or.Free,zoomOnDoubleClick:Re=!0,panOnDrag:wt=!0,onPaneClick:le,onPaneMouseEnter:be,onPaneMouseMove:je,onPaneMouseLeave:Qt,onPaneScroll:mt,onPaneContextMenu:qn,children:Le,onEdgeUpdate:Fe,onEdgeContextMenu:Lt,onEdgeDoubleClick:mi,onEdgeMouseEnter:un,onEdgeMouseMove:ba,onEdgeMouseLeave:xa,onEdgeUpdateStart:Mt,onEdgeUpdateEnd:Jt,edgeUpdaterRadius:Ys=10,onNodesChange:Sa,onEdgesChange:Fb,noDragClassName:Gb="nodrag",noWheelClassName:Hb="nowheel",noPanClassName:nf="nopan",fitView:Yb=!1,fitViewOptions:Kb,connectOnClick:Jb=!0,attributionPosition:ex,proOptions:tx,defaultEdgeOptions:nx,elevateEdgesOnSelect:ix=!1,disableKeyboardA11y:rf=!1,style:rx,id:sf,...sx},ox)=>{const lx=pd(s,OP),ax=pd(o,dP),va=sf||"1";return O("div",{...sx,style:{...rx,...uT},ref:ox,className:St(["react-flow",r]),"data-testid":"rf__wrapper",id:sf,children:q(_O,{children:[O(rT,{onInit:c,onMove:h,onMoveStart:u,onMoveEnd:f,onNodeClick:l,onEdgeClick:a,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:y,onNodeContextMenu:v,onNodeDoubleClick:C,nodeTypes:lx,edgeTypes:ax,connectionLineType:M,connectionLineStyle:X,connectionLineComponent:V,connectionLineContainerStyle:z,selectionKeyCode:de,deleteKeyCode:se,multiSelectionKeyCode:ae,zoomActivationKeyCode:ie,onlyRenderVisibleElements:xe,selectNodesOnDrag:oe,defaultViewport:Te,translateExtent:I,minZoom:it,maxZoom:D,preventScrolling:Z,zoomOnScroll:Se,zoomOnPinch:he,zoomOnDoubleClick:Re,panOnScroll:ue,panOnScrollSpeed:ge,panOnScrollMode:Ae,panOnDrag:wt,onPaneClick:le,onPaneMouseEnter:be,onPaneMouseMove:je,onPaneMouseLeave:Qt,onPaneScroll:mt,onPaneContextMenu:qn,onSelectionContextMenu:P,onEdgeUpdate:Fe,onEdgeContextMenu:Lt,onEdgeDoubleClick:mi,onEdgeMouseEnter:un,onEdgeMouseMove:ba,onEdgeMouseLeave:xa,onEdgeUpdateStart:Mt,onEdgeUpdateEnd:Jt,edgeUpdaterRadius:Ys,defaultMarkerColor:re,noDragClassName:Gb,noWheelClassName:Hb,noPanClassName:nf,elevateEdgesOnSelect:ix,rfId:va,disableKeyboardA11y:rf,nodeOrigin:Qe,nodeExtent:G}),O(sP,{nodes:n,edges:e,defaultNodes:t,defaultEdges:i,onConnect:d,onConnectStart:p,onConnectEnd:m,onClickConnectStart:b,onClickConnectEnd:g,nodesDraggable:ee,nodesConnectable:Ie,nodesFocusable:Xe,edgesFocusable:$e,elementsSelectable:Oe,minZoom:it,maxZoom:D,nodeExtent:G,onNodesChange:Sa,onEdgesChange:Fb,snapToGrid:pe,snapGrid:me,connectionMode:B,translateExtent:I,connectOnClick:Jb,defaultEdgeOptions:nx,fitView:Yb,fitViewOptions:Kb,onNodesDelete:A,onEdgesDelete:U,onNodeDragStart:$,onNodeDrag:E,onNodeDragStop:_,onSelectionDrag:Q,onSelectionDragStart:W,onSelectionDragStop:T,noPanClassName:nf,nodeOrigin:Qe,rfId:va}),O(iP,{onSelectionChange:j}),Le,O(Bk,{proOptions:tx,position:ex}),O(hP,{rfId:va,disableKeyboardA11y:rf})]})})});MO.displayName="ReactFlow";function fT(){const n=nt();return S.exports.useCallback(e=>{const{domNode:t,updateNodeDimensions:i}=n.getState(),r=t==null?void 0:t.querySelector(`.react-flow__node[data-id="${e}"]`);r&&requestAnimationFrame(()=>i([{id:e,nodeElement:r,forceUpdate:!0}]))},[])}function DO(n){return e=>{const[t,i]=S.exports.useState(e),r=S.exports.useCallback(s=>i(o=>n(s,o)),[]);return[t,i,r]}}const dT=DO(bu),pT=DO(AP),NO=({id:n,x:e,y:t,width:i,height:r,style:s,color:o,strokeColor:l,strokeWidth:a,className:c,borderRadius:h,shapeRendering:u,onClick:f})=>{const{background:d,backgroundColor:p}=s||{},m=o||d||p;return O("rect",{className:St(["react-flow__minimap-node",c]),x:e,y:t,rx:h,ry:h,width:i,height:r,fill:m,stroke:l,strokeWidth:a,shapeRendering:u,onClick:f?b=>f(b,n):void 0})};NO.displayName="MiniMapNode";var mT=S.exports.memo(NO);const gT=200,OT=150,yT=n=>{const e=Array.from(n.nodeInternals.values()),t={x:-n.transform[0]/n.transform[2],y:-n.transform[1]/n.transform[2],width:n.width/n.transform[2],height:n.height/n.transform[2]};return{nodes:e.filter(i=>!i.hidden&&i.width&&i.height),viewBB:t,boundingRect:e.length>0?Uk(na(e),t):t,rfId:n.rfId}},Fa=n=>n instanceof Function?n:()=>n,bT="react-flow__minimap-desc";function BO({style:n,className:e,nodeStrokeColor:t="transparent",nodeColor:i="#e2e2e2",nodeClassName:r="",nodeBorderRadius:s=5,nodeStrokeWidth:o=2,maskColor:l="rgb(240, 240, 240, 0.6)",position:a="bottom-right",onClick:c,onNodeClick:h,pannable:u=!1,zoomable:f=!1}){var de,ae;const d=nt(),p=S.exports.useRef(null),{boundingRect:m,viewBB:b,nodes:g,rfId:x}=qe(yT,Et),w=(de=n==null?void 0:n.width)!=null?de:gT,y=(ae=n==null?void 0:n.height)!=null?ae:OT,v=Fa(i),C=Fa(t),$=Fa(r),E=m.width/w,_=m.height/y,A=Math.max(E,_),U=A*w,j=A*y,W=5*A,Q=m.x-(U-m.width)/2-W,T=m.y-(j-m.height)/2-W,P=U+W*2,B=j+W*2,M=typeof window>"u"||!!window.chrome?"crispEdges":"geometricPrecision",X=`${bT}-${x}`,V=S.exports.useRef(0);V.current=A,S.exports.useEffect(()=>{if(p.current){const ie=jt(p.current),pe=oe=>{const{transform:ee,d3Selection:Ie,d3Zoom:Xe}=d.getState();if(oe.sourceEvent.type!=="wheel"||!Ie||!Xe)return;const Qe=-oe.sourceEvent.deltaY*(oe.sourceEvent.deltaMode===1?.05:oe.sourceEvent.deltaMode?1:.002)*10,$e=ee[2]*Math.pow(2,Qe);Xe.scaleTo(Ie,$e)},me=oe=>{const{transform:ee,d3Selection:Ie,d3Zoom:Xe}=d.getState();if(oe.sourceEvent.type!=="mousemove"||!Ie||!Xe)return;const Qe={x:ee[0]-oe.sourceEvent.movementX*V.current*Math.max(1,ee[2]),y:ee[1]-oe.sourceEvent.movementY*V.current*Math.max(1,ee[2])},$e=ii.translate(Qe.x,Qe.y).scale(ee[2]);Xe.transform(Ie,$e)},xe=jg().on("zoom",u?me:null).on("zoom.wheel",f?pe:null);return ie.call(xe),()=>{ie.on("zoom",null)}}},[u,f]);const z=c?ie=>{const pe=nn(ie);c(ie,{x:pe[0],y:pe[1]})}:void 0,se=h?(ie,pe)=>{const me=d.getState().nodeInternals.get(pe);h(ie,me)}:void 0;return O(hu,{position:a,style:n,className:St(["react-flow__minimap",e]),children:q("svg",{width:w,height:y,viewBox:`${Q} ${T} ${P} ${B}`,role:"img","aria-labelledby":X,ref:p,onClick:z,children:[O("title",{id:X,children:"React Flow mini map"}),g.map(ie=>{var pe,me,xe,oe;return O(mT,{x:(me=(pe=ie.positionAbsolute)==null?void 0:pe.x)!=null?me:0,y:(oe=(xe=ie.positionAbsolute)==null?void 0:xe.y)!=null?oe:0,width:ie.width,height:ie.height,style:ie.style,className:$(ie),color:v(ie),borderRadius:s,strokeColor:C(ie),strokeWidth:o,shapeRendering:M,onClick:se,id:ie.id},ie.id)}),O("path",{className:"react-flow__minimap-mask",d:`M${Q-W},${T-W}h${P+W*2}v${B+W*2}h${-P-W*2}z
        M${b.x},${b.y}h${b.width}v${b.height}h${-b.width}z`,fill:l,fillRule:"evenodd"})]})})}BO.displayName="MiniMap";var xT=S.exports.memo(BO);function ST(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:O("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function vT(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:O("path",{d:"M0 0h32v4.2H0z"})})}function wT(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:O("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function QT(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function CT(){return O("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:O("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const Kr=({children:n,className:e,...t})=>O("button",{type:"button",className:St(["react-flow__controls-button",e]),...t,children:n});Kr.displayName="ControlButton";const $T=n=>n.nodesDraggable&&n.nodesConnectable&&n.elementsSelectable,IO=({style:n,showZoom:e=!0,showFitView:t=!0,showInteractive:i=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:a,className:c,children:h,position:u="bottom-left"})=>{const f=nt(),[d,p]=S.exports.useState(!1),m=qe($T),{zoomIn:b,zoomOut:g,fitView:x}=ia();if(S.exports.useEffect(()=>{p(!0)},[]),!d)return null;const w=()=>{b(),s==null||s()},y=()=>{g(),o==null||o()},v=()=>{x(r),l==null||l()},C=()=>{f.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),a==null||a(!m)};return q(hu,{className:St(["react-flow__controls",c]),position:u,style:n,children:[e&&q(ke,{children:[O(Kr,{onClick:w,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:O(ST,{})}),O(Kr,{onClick:y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:O(vT,{})})]}),t&&O(Kr,{className:"react-flow__controls-fitview",onClick:v,title:"fit view","aria-label":"fit view",children:O(wT,{})}),i&&O(Kr,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?O(CT,{}):O(QT,{})}),h]})};IO.displayName="Controls";var kT=S.exports.memo(IO),Ht;(function(n){n.Lines="lines",n.Dots="dots",n.Cross="cross"})(Ht||(Ht={}));function PT({color:n,dimensions:e,lineWidth:t}){return O("path",{stroke:n,strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function TT({color:n,radius:e}){return O("circle",{cx:e,cy:e,r:e,fill:n})}const AT={[Ht.Dots]:"#91919a",[Ht.Lines]:"#eee",[Ht.Cross]:"#e2e2e2"},RT={[Ht.Dots]:1,[Ht.Lines]:1,[Ht.Cross]:6},ET=n=>({transform:n.transform,patternId:`pattern-${n.rfId}`});function XO({variant:n=Ht.Dots,gap:e=20,size:t,lineWidth:i=1,color:r,style:s,className:o}){const l=S.exports.useRef(null),{transform:a,patternId:c}=qe(ET,Et),h=r||AT[n],u=t||RT[n],f=n===Ht.Dots,d=n===Ht.Cross,p=Array.isArray(e)?e:[e,e],m=[p[0]*a[2]||1,p[1]*a[2]||1],b=u*a[2],g=d?[b,b]:m,x=f?[b/2,b/2]:[g[0]/2,g[1]/2];return q("svg",{className:St(["react-flow__background",o]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,children:[O("pattern",{id:c,x:a[0]%m[0],y:a[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:f?O(TT,{color:h,radius:b/2}):O(PT,{dimensions:g,color:h,lineWidth:i})}),O("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${c})`})]})}XO.displayName="Background";var _T=S.exports.memo(XO);const Kc=n=>`${n.sourceEntity}_${n.name}`,MT=n=>`${n.targetEntity}_${n.targetName}`,xu=n=>`entity_er_node_id_${n.id}`,Jc=(n,e)=>`${xu(n)}_${e.id}`,UO=n=>n.type===Tm.Lookup&&n.relationType===Gr.ManyToOne,VO=n=>n.type===Tm.Lookup?"green":"red",DT=22,ss=18,NT=40,BT=({entity:n,relation:e,passive:t})=>{const i=ia(),r=fT(),[s,o]=S.exports.useState(Number.MAX_SAFE_INTEGER);return S.exports.useEffect(()=>{var l,a,c,h;if(t&&UO(e))o(NT/2-ss/2);else{const u=(l=document.getElementById(xu(n)))==null?void 0:l.getClientRects()[0],f=(a=document.getElementById(Jc(n,e)))==null?void 0:a.getClientRects()[0],d=((c=f==null?void 0:f.top)!=null?c:0)-((h=u==null?void 0:u.top)!=null?h:0);o(d)}setTimeout(()=>r(n.name))},[n,t,i,e,r]),{top:s,left:t?-ss:"auto",right:t?"auto":-ss}},IT=({relation:n,passive:e})=>{const[t,i]=S.exports.useState("relation-one-many");return S.exports.useEffect(()=>{if(e)switch(n.relationType){case Gr.ManyToMany:i("relation-one-many");break;case Gr.ManyToOne:case Ks.ManyToOne:case Ks.OneToOne:i("relation-one-one");break}else switch(n.relationType){case Gr.ManyToMany:case Gr.ManyToOne:case Ks.ManyToOne:i("relation-one-many");break;case Ks.OneToOne:i("relation-one-one");break}},[e,n.relationType]),{icon:t,color:VO(n)}},md=({data:{entity:n,entity:{relations:e}},relation:t,passive:i})=>{const r=i?MT(t):Kc(t),{top:s,left:o,right:l}=BT({entity:n,relation:t,passive:i}),{icon:a,color:c}=IT({relation:t,passive:i});return O(ys,{className:XT.wrapper,id:r,type:i?"target":"source",position:i?te.Left:te.Right,style:{left:o,right:l,top:s+DT/2},onConnect:h=>console.log("handle onConnect",h),isConnectable:!1,children:O("span",{style:{color:c,transform:i?"rotateY(0deg)":"rotateY(180deg)"},children:O(kS,{type:a})})},t.id)},XT={wrapper:F("height:",ss,"px!important;width:",ss,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},UT=n=>{const{data:{entity:{relations:e},passiveEntityRelations:t}}=n;return q(ke,{children:[e.map(i=>O(md,{...n,passive:!1,relation:i},i.id)),t.map(i=>O(md,{...n,passive:!0,relation:i},i.id))]})},VT=({data:{entity:n}})=>q("div",{className:Qi(on.section),children:[O(ht.Title,{className:Qi(on.sectionTitle),level:5,children:"\u5B57\u6BB5"}),Ke.exports.isEmpty(n.fields)?O(zx,{description:"\u6682\u65E0\u5B57\u6BB5"}):n.fields.map(e=>q("div",{className:Qi(on.sectionItem),children:[q(hs,{size:"small",children:[q(ht.Text,{children:[e.description,"(",e.name,")"]}),e.required&&O(ht.Text,{type:"danger",children:"*"})]}),O(ht.Text,{children:e.type})]},e.name))]}),ZT=({data:{entity:n,entity:{relations:e},passiveEntityRelations:t}})=>{const i=t.filter(s=>!UO(s)),r=[...e,...i];return Ke.exports.isEmpty(r)?null:q("div",{className:Qi(on.section),children:[O(ht.Title,{className:Qi(on.sectionTitle),level:5,children:"\u5173\u7CFB"}),e.map(s=>q("div",{className:Qi(on.sectionItem),id:Jc(n,s),children:[O(hs,{size:"small",children:q(ht.Text,{children:[s.description,"(",s.name,")"]})}),O(ht.Text,{children:s.type})]},s.name)),i.map(s=>q("div",{className:Qi(on.sectionItem),id:Jc(n,s),children:[O(hs,{size:"small",children:q(ht.Text,{disabled:!0,children:[s.targetDescription,"(",s.targetName,")"]})}),O(ht.Text,{disabled:!0,children:s.type})]},s.targetName))]})},qT=n=>{const{data:{entity:e}}=n,t=Ns();return q(ke,{children:[O(UT,{...n}),q("div",{id:xu(e),style:{"--header-bg-color":t.colorPrimary},className:on.wrapper,children:[O("div",{className:on.header,children:O(ht.Title,{level:5,children:e.title})}),q("div",{className:on.body,children:[O(VT,{...n}),O(ZT,{...n})]}),q(Ms,{className:on.footer,children:[O(dr,{span:12,children:O(pt,{block:!0,type:"link",onClick:()=>Yi.emit("onChange",e),children:"\u7F16\u8F91"})}),O(dr,{span:12,children:O(pt,{block:!0,type:"text",danger:!0,onClick:()=>Yi.emit("onDelete",e.id),children:"\u5220\u9664"})})]})]})]})},on={wrapper:F({name:"zo47d5",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:solid rgba(0,0,0,.1)"}),header:F({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:F({name:"1jb4mpp",styles:"padding:4px 0"}),section:F("",""),sectionTitle:F({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:F({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:F({name:"covnv5",styles:"border-top:solid rgba(0,0,0,.1)"})},LT={EntityNode:S.exports.memo(qT)},zT=()=>{const[n,e]=Ii(xt.entitiesSelector),t=We(xt.entityRelationsByTargetEntityNameMapSelector),[i,r,s]=dT(n.map(l=>({id:l.name,type:"EntityNode",data:{entity:l,passiveEntityRelations:t[l.name]||[]},position:l.position}))),o=S.exports.useCallback(l=>{s(l);const a=bu(l,i),c=Ke.exports.keyBy(l.filter(u=>u.type==="position"),"id"),h=Ke.exports.keyBy(a,u=>u.id);e(u=>u.map(f=>{var d,p;return Reflect.has(c,f.name)?{...f,position:(p=(d=h[f.name])==null?void 0:d.positionAbsolute)!=null?p:f.position}:f}))},[i,s,e]);return S.exports.useEffect(()=>{r(l=>{const a=Ke.exports.keyBy(l,c=>c.id);return n.map(c=>a[c.name]?{...a[c.name],data:{entity:c,passiveEntityRelations:t[c.name]||[]},position:c.position}:{id:c.name,type:"EntityNode",data:{entity:c,passiveEntityRelations:t[c.name]||[]},position:c.position})})},[n,t,r]),{nodes:i,onNodesChange:o}},WT=({onChangeEntity:n,onDeleteEntity:e})=>{const t=Ns(),i=We(xt.entityRelationsSelector),{nodes:r,onNodesChange:s}=zT(),[o,l,a]=pT(i.map(h=>({id:h.id,source:h.sourceEntity,target:h.targetEntity,sourceHandle:Kc(h),targetHandle:Kc(h),style:{stroke:VO(h),zIndex:999999}}))),c=S.exports.useCallback(h=>l(u=>sO({...h,animated:!0,style:{stroke:"green"}},u)),[l]);return S.exports.useEffect(()=>(Yi.on("onDelete",e),Yi.on("onChange",n),()=>{Yi.off("onDelete",e),Yi.off("onChange",n)}),[n,e]),O("div",{className:jT.wrapper,children:q(MO,{nodes:r,edges:o,onNodesChange:s,onEdgesChange:a,onConnect:c,style:{background:"#fff"},nodeTypes:LT,connectionLineStyle:{stroke:t.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[O(_T,{variant:Ht.Cross,gap:10,size:2}),O(kT,{}),O(xT,{pannable:!0,zoomable:!0})]})})},jT={wrapper:F({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},FT=({onChangeEntity:n,onDeleteEntity:e})=>{const t=We(xt.entitiesSelector),i=[{title:"\u540D\u79F0",dataIndex:"title",key:"title"},{title:"\u6807\u8BC6",dataIndex:"name",key:"name"},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(r,s)=>q(hs,{size:"small",children:[O(pt,{size:"small",type:"link",onClick:()=>n(s),children:"\u7F16\u8F91"}),O(pt,{size:"small",danger:!0,type:"text",onClick:()=>e(s.id),children:"\u5220\u9664"})]})}];return O("div",{className:GT.wrapper,children:O(Am,{rowKey:"id",size:"small",columns:i,dataSource:t})})},GT={wrapper:F("","")},ZO=({onOk:n,onCancel:e,open:t,mode:i,form:r})=>O(ke,{children:O(Wx,{title:i==="create"?"\u521B\u5EFA\u6570\u636E\u6A21\u578B":"\u7F16\u8F91\u6570\u636E\u6A21\u578B",onCancel:()=>{e(),r.resetFields()},onOk:async()=>{await r.validateFields(),n(r.getFieldsValue()),r.resetFields()},open:t,destroyOnClose:!0,children:q(gt,{form:r,labelCol:{style:{width:"50px"}},children:[O(gt.Item,{label:"ID",name:"id",hidden:!0,children:O(wi,{})}),O(gt.Item,{label:"\u540D\u79F0",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u6A21\u578B\u540D\u79F0"}],children:O(wi,{})}),O(gt.Item,{label:"\u6807\u8BC6",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u6A21\u578B\u6807\u8BC6"},{pattern:/^[a-zA-Z]\w+$/,message:"\u53EA\u80FD\u7531\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\u7EC4\u6210\uFF0C\u4E14\u5FC5\u987B\u82F1\u6587\u5F00\u5934"}],children:O(wi,{disabled:i==="edit"})}),O(gt.Item,{label:"\u63CF\u8FF0",name:"description",children:O(wi,{})})]})})}),qO=Fo(),LO=({children:n})=>{const[e,t]=S.exports.useState(null);return Pm(()=>{setTimeout(()=>{t(document.getElementById(qO))})}),e?Qm.exports.createPortal(n,e):null},HT=()=>O("span",{id:qO}),YT=({entity:n,onEditEntity:e})=>q(ke,{children:[O(LO,{children:O(pt,{type:"link",onClick:()=>e(n),children:"\u7F16\u8F91"})}),O("div",{className:KT.wrapper,children:q(kc,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[O(Bn,{label:"\u540D\u79F0",fieldProps:{value:n.title}}),O(Bn,{label:"\u6807\u8BC6",fieldProps:{value:n.name}}),O(Bn,{label:"\u63CF\u8FF0",fieldProps:{value:n.description}})]})})]}),KT={wrapper:F({name:"10rtstj",styles:"padding:16px"})},JT=n=>{switch(n){case Nt.Text:case Nt.LongText:return q(ke,{children:[O(Nr,{name:["config","max"],label:"\u6700\u5927\u957F\u5EA6",max:255,fieldProps:{precision:0}}),O(Nr,{name:["config","min"],label:"\u6700\u5C0F\u957F\u5EA6",min:0,fieldProps:{precision:0}})]});case Nt.Enum:return q(ke,{children:[O(fg,{name:["config","enumCode"],label:"\u679A\u4E3E\u7C7B\u578B",placeholder:"\u8BF7\u9009\u62E9\u679A\u4E3E\u7C7B\u578B",options:zO,allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u679A\u4E3E\u7C7B\u578B"}]}),O(Dc,{name:["config","multiple"],label:"\u591A\u9009"})]});case Nt.Number:return q(ke,{children:[O(Nr,{name:["config","max"],label:"\u6700\u5927\u503C",max:255,fieldProps:{precision:0}}),O(Nr,{name:["config","min"],label:"\u6700\u5C0F\u503C",min:0,fieldProps:{precision:0}}),O(Nr,{name:["config","precision"],label:"\u5C0F\u6570\u4F4D\u6570",min:0,fieldProps:{precision:0}})]});case Nt.AutoNumber:return O(ke,{children:O(Bn,{name:["config","format"],label:"\u663E\u793A\u683C\u5F0F",placeholder:"\u8BF7\u8F93\u5165\u663E\u793A\u683C\u5F0F"})});case Nt.Image:return O(ke,{children:O(Dc,{name:["config","multiple"],label:"\u591A\u9009"})});case Nt.PhoneNumber:case Nt.URL:case Nt.Email:case Nt.Date:case Nt.DateTime:default:return null}},zO=Object.values(Nt).map(n=>({label:jx(n),value:n})),e2=(n,e)=>{const[t]=kc.useForm(),i=kc.useWatch("type",t),[r,s]=S.exports.useState(""),[o,l]=S.exports.useState(""),[a,c]=S.exports.useState("detail"),h=Pn(xt.entitySelector(r)),[u,f]=S.exports.useState(!1),d=Rm(({snapshot:p})=>({entityId:m,fieldId:b})=>p.getLoadable(xt.entitySelector(m)).getValue().fields.find(g=>g.id===b),[]);return S.exports.useImperativeHandle(e,()=>({create:({entityId:p})=>{s(p),l(""),c("create"),f(!0)},edit:({entityId:p,fieldId:m})=>{s(p),l(m),c("edit"),t.setFieldsValue(d({entityId:p,fieldId:m})),f(!0)},showDetail:({entityId:p,fieldId:m})=>{s(p),l(m),c("detail"),t.setFieldsValue(d({entityId:p,fieldId:m})),f(!0)}}),[t,d]),q(Fx,{readonly:a==="detail",title:"\u65B0\u5EFA\u5B57\u6BB5",width:500,form:t,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:u,onOpenChange:f,onFinish:async p=>{switch(a){case"create":h(Gt(m=>{m.fields.push({...p,id:Fo()})}));break;case"edit":h(Gt(m=>{m.fields=m.fields.map(b=>b.id===o?{...p}:b)}));break}return!0},children:[O(Bn,{hidden:!0,name:"id",label:"\u5B57\u6BB5id"}),O(fg,{name:"type",label:"\u5B57\u6BB5\u7C7B\u578B",placeholder:"\u8BF7\u9009\u62E9\u5B57\u6BB5\u7C7B\u578B",options:zO,allowClear:!1,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B57\u6BB5\u7C7B\u578B"}]}),O(Bn,{name:"title",label:"\u5B57\u6BB5\u540D\u79F0",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u540D\u79F0"}]}),O(Bn,{name:"name",label:"\u5B57\u6BB5\u6807\u8BC6",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u6807\u8BC6",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u6807\u8BC6"}]}),O(Bn,{name:"description",label:"\u5B57\u6BB5\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u63CF\u8FF0"}),i!==Nt.AutoNumber&&O(Dc,{name:"required",label:"\u5FC5\u586B"}),JT(i)]})},t2=S.exports.forwardRef(e2),Ga=({entityId:n})=>{const e=S.exports.useRef(null),[t,i]=Ii(xt.entitySelector(n)),r=[{title:"\u540D\u79F0",dataIndex:"title",key:"title"},{title:"\u6807\u8BC6",dataIndex:"name",key:"name"},{title:"\u63CF\u8FF0",dataIndex:"description",key:"description"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(s,o)=>q(hs,{size:"small",children:[O(pt,{size:"small",type:"link",onClick:()=>{var l;(l=e.current)==null||l.edit({entityId:t.id,fieldId:o.id})},children:"\u7F16\u8F91"}),O(pt,{size:"small",type:"link",onClick:()=>{var l;(l=e.current)==null||l.showDetail({entityId:t.id,fieldId:o.id})},children:"\u8BE6\u60C5"}),O(pt,{size:"small",danger:!0,type:"text",onClick:()=>{i(Gt(l=>{l.fields=l.fields.filter(a=>a.id!==o.id)}))},children:"\u5220\u9664"})]})}];return q(ke,{children:[O(t2,{ref:e}),O(LO,{children:O(pt,{type:"link",onClick:()=>{var s;(s=e.current)==null||s.create({entityId:t.id})},children:"\u6DFB\u52A0\u5B57\u6BB5"})}),O("div",{children:O(Am,{size:"small",dataSource:t.fields,rowKey:"id",columns:r,pagination:!1})})]})},n2=[{key:"List",tab:"\u5217\u8868"},{key:"ER",tab:"ER\u56FE"}],i2=()=>{const[n,e]=mg({activeTabKey:"List"}),t=Pn(xt.entityByIdSelector),[i,r]=S.exports.useState("edit"),s=m=>{t(Gt(b=>{Reflect.deleteProperty(b,m)}))},{open:o,setFalse:l,setTrue:a,onSubmitEntity:c,form:h}=dg(),u=fi(),f=Xi(),d=m=>{u(mr(Ct.Entity,{entityId:m.id,appId:f.appId}))},p=()=>{r("create"),a()};return q(ke,{children:[O(ZO,{onOk:c,onCancel:l,open:o,mode:i,form:h}),O("div",{className:gd.wrapper,children:O(pr,{size:"small",tabProps:{size:"small"},className:gd.card,title:O("span",{children:"\u6570\u636E\u6A21\u578B"}),tabList:n2,tabBarExtraContent:O(pt,{type:"link",onClick:p,children:"\u6DFB\u52A0\u6A21\u578B"}),activeTabKey:n.activeTabKey,onTabChange:m=>e({activeTabKey:m}),children:n.activeTabKey==="List"?O(FT,{onDeleteEntity:s,onChangeEntity:d}):O(WT,{onDeleteEntity:s,onChangeEntity:d})})})]})},gd={wrapper:F({name:"13udsys",styles:"height:100%"}),card:F({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},r2=[{key:"Base",tab:"\u57FA\u7840\u4FE1\u606F"},{key:"Field",tab:"\u5B57\u6BB5\u548C\u5173\u7CFB"},{key:"Method",tab:"\u65B9\u6CD5"},{key:"View",tab:"\u89C6\u56FE"}],s2=()=>{const[n,e]=mg({activeTabKey:"Base"}),{entityId:t}=Xi(),i=We(xt.entitySelector(t)),{open:r,setFalse:s,setTrue:o,onSubmitEntity:l,form:a}=dg(),c=h=>{switch(h){case"Base":return O(YT,{entity:i,onEditEntity:()=>{a.setFieldsValue(i),o()}});case"Field":return O(Ga,{entityId:i.id});case"Method":return O(Ga,{entityId:i.id});case"View":return O(Ga,{entityId:i.id});default:return O("div",{children:"\u672A\u77E5\u6A21\u5757"})}};return q(ke,{children:[O(ke,{children:O(ZO,{onOk:l,onCancel:s,open:r,mode:"edit",form:a})}),O("div",{className:Od.wrapper,children:O(pr,{size:"small",tabProps:{size:"small"},title:`${i.title}(${i.name})`,tabList:r2,tabBarExtraContent:O(HT,{}),className:Od.card,activeTabKey:n.activeTabKey,onTabChange:h=>e({activeTabKey:h}),children:c(n.activeTabKey)})})]})},Od={wrapper:F({name:"13udsys",styles:"height:100%"}),card:F({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},o2=n=>{var o,l,a,c;const[e,t]=S.exports.useState({x:0,y:0,width:0,height:0}),[i,r]=S.exports.useState(!1);return Ec("mousemove",()=>{r(!1)},{target:document.body,capture:!0,passive:!0}),Ec("mousemove",h=>{const u=Gx(h.target,n.current);if(u){const f=u.getClientRects()[0];t({x:f.x,y:f.y,width:f.width,height:f.height}),r(!0)}else t({x:0,y:0,width:0,height:0}),r(!1)},{target:n,passive:!0}),{style:{width:`${(o=e.width)!=null?o:0}px`,height:`${(l=e.height)!=null?l:0}px`,left:`${(a=e.x)!=null?a:0}px`,top:`${(c=e.y)!=null?c:0}px`,display:i?"block":"none"}}},WO=()=>{const n=Pn(Em);return{removeWidget:S.exports.useCallback((t,i=!0)=>{n(Gt(r=>{r.forEach(l=>{Ke.exports.isObject(l.slots)&&Object.keys(l.slots).forEach(a=>{const c=l.slots[a].findIndex(h=>h===t);c!==-1&&l.slots[a].splice(c,1)})});const s=[t],o=[r.find(l=>l.id===t)];for(;!Ke.exports.isEmpty(o);){const l=o.shift();Ke.exports.isObject(l.slots)&&Object.values(l.slots).forEach(a=>{a.forEach(c=>{s.push(c),o.push(r.find(h=>h.id===c))})})}s.forEach(l=>{const a=r.findIndex(c=>c.id===l);a!==-1&&r.splice(a,1)})}))},[n])}},l2=()=>{const[n,e]=Ii(Tn),{removeWidget:t}=WO();return Kv("delete",()=>{n&&(t(n),e(""))}),null},a2=({canvasRef:n})=>{const e=Ns(),{style:t}=o2(n);return O("div",{className:c2.wrapper,style:{...t,"--border-color":e.colorPrimary}})},c2={wrapper:F({name:"1vyoufo",styles:"border:1px dashed var(--border-color);position:absolute;z-index:999999"})},h2=n=>{const e=Pn(Tn);Ec("click",t=>{const i=Hx(t.target,n.current),r=Yx(i);e(r)},{target:n})},u2=()=>{const n=We(Tn),e=S.exports.useRef(null),t=We(zh(n)),i=We(_m),[{isDragging:r},s,o]=Wh(()=>({type:t.widgetType,item:()=>({type:jh.Move,widget:t}),collect:h=>({isDragging:h.isDragging()}),options:{dropEffect:"copy"}}),[t]);S.exports.useEffect(()=>{},[r]);const l=r?"0.4":"1",a=S.exports.useContext(Fh);S.exports.useEffect(()=>{const h=Pc(n,a.document);h&&o(h)},[l,o,n,a.document,r]);const c=Ns();return r||!i[n].parent?null:O("div",{ref:e,style:{"--border-color":c.colorPrimary},className:Oi.box,children:q(pt.Group,{className:Oi.button,size:"small",children:[O(pt,{ref:s,className:`${Oi.button} ${Oi.dragButton}`,type:"primary",icon:O(Kx,{className:Oi.button})}),O(pt,{className:Oi.button,type:"primary",children:"2"}),O(pt,{className:Oi.button,type:"primary",children:"3"})]})})},Oi={button:F({name:"k1v6xs",styles:"height:16px!important;line-height:16px!important;font-size:12px!important;display:flex!important;justify-content:center!important;align-items:center!important"}),dragButton:F({name:"wa1o5r",styles:"cursor:move!important"}),box:F({name:"172hvwc",styles:"transform:translateY(-100%);margin-top:-2px;border-radius:3px;height:16px;display:flex;align-items:center;left:0;pointer-events:auto"})},f2=()=>{var b,g,x,w;const n=We(Tn),[e,t]=S.exports.useState({x:0,y:0,width:0,height:0}),i=We(Em),[r,s]=S.exports.useState(!1),[o,l]=S.exports.useState(0);S.exports.useEffect(()=>{setTimeout(()=>{l(y=>y+1)})},[i]);const a=S.exports.useContext(Fh);S.exports.useEffect(()=>{if(!n){s(!1);return}const y=Pc(n,a.document);if(y){const v=y.getClientRects()[0];t({x:v.x,y:v.y,width:v.width,height:v.height}),s(!0)}else t({x:0,y:0,width:0,height:0}),s(!1)},[n,a.document,o]);const c={width:`${(b=e.width)!=null?b:0}px`,height:`${(g=e.height)!=null?g:0}px`,left:`${(x=e.x)!=null?x:0}px`,top:`${(w=e.y)!=null?w:0}px`,display:r?"block":"none"},h=We(zh(n)),[{isDragging:u},f,d]=Wh(()=>({type:h.widgetType,item:()=>({type:jh.Move,widget:h}),collect:y=>({isDragging:y.isDragging()}),options:{dropEffect:"copy"}}),[h]),p=u?"0.4":"1";S.exports.useEffect(()=>{const y=Pc(n,a.document);y&&(y.style.opacity=p,d(y))},[p,d,n,a.document]);const m=Ns();return O("div",{ref:f,className:p2.wrapper,style:{...c,"--border-color":m.colorPrimary},children:O(u2,{})})},d2=({canvasRef:n})=>(h2(n),We(Tn)?O(f2,{}):null),p2={wrapper:F({name:"1h9weiq",styles:"border:1px dashed var(--border-color);position:absolute;z-index:50"})},m2=({canvasRef:n,style:e})=>q("div",{className:g2.wrapper,style:e,children:[O(a2,{canvasRef:n}),O(d2,{canvasRef:n}),O(Jx,{})]}),g2={wrapper:F({name:"1nt356n",styles:"position:fixed;left:0;right:0;bottom:0;top:0;pointer-events:none;z-index:999"})},O2=({children:n})=>{var h,u;const{widgets:e,rootWidgetId:t}=We(Gh),i=S.exports.useRef(null),[r,s]=S.exports.useState(!1);S.exports.useEffect(()=>{var f,d,p,m;!r||((d=(f=i.current)==null?void 0:f.contentWindow)==null||d.reactRenderHost.updateWidgets(e),(m=(p=i.current)==null?void 0:p.contentWindow)==null||m.reactRenderHost.updateRootWidgetId(t))},[e,t,r]);const o=S.exports.useRef(null),[l,a]=S.exports.useState({top:0,right:0,bottom:0,left:0}),c=S.exports.useCallback(()=>{setTimeout(()=>{var p;const f=i.current;o.current=(p=f.contentWindow)==null?void 0:p.document;const d=f.getClientRects()[0];a({top:d.top,right:d.right,bottom:d.bottom,left:d.left}),s(!0)})},[]);return q("div",{className:yd.wrapper,children:[S.exports.cloneElement(n,{ref:i,onLoad:c}),r&&O(ke,{children:q(Fh.Provider,{value:{document:(u=(h=i.current)==null?void 0:h.contentWindow)==null?void 0:u.document},children:[O(m2,{canvasRef:o,style:l}),O(l2,{})]})}),!r&&O("div",{className:yd.spinWrapper,children:O(Vl,{size:"large"})})]})},yd={wrapper:F({name:"122qsqq",styles:"position:relative;padding:16px;height:100%"}),spinWrapper:F({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},y2=()=>{var l,a,c,h,u,f;const n=We(Gh),e=We(Hh),t=e[n.rootWidgetId],i=S.exports.useContext(Bs),r=[{key:n.id,title:n.name,page:n,nodeType:"page",children:[]}],s=Ke.exports.head(r),o=[{_type:"widget",...t}];for(;o.length!==0;){const d=o.pop();if(d._type==="widget"){const p={nodeType:"widget",key:(l=d==null?void 0:d.id)!=null?l:"",title:(a=d==null?void 0:d.widgetName)!=null?a:"",widget:d,children:[]},m=r.pop();m==null||m.children.unshift(p);const b=i.widgetByType[d.widgetType];Ke.exports.isEmpty(b.metadata.slots)||Object.entries(b.metadata.slots).forEach(([g,x])=>{o.push({_type:"slot",path:g,widgetId:d.id,...x}),r.push(p)})}else if(d._type==="slot"){const p={nodeType:"slot",key:(c=`${d.widgetId}_${d==null?void 0:d.path}`)!=null?c:"",title:(h=d==null?void 0:d.name)!=null?h:"",slot:d,children:[],selectable:!1,className:"outline-node-slot"},m=r.pop();m==null||m.children.unshift(p);const b=(f=(u=e[d.widgetId])==null?void 0:u.slots)==null?void 0:f[d.path];Ke.exports.isEmpty(b)||b.forEach(g=>{o.push({_type:"widget",...e[g]}),r.push(p)})}}return{treeData:s}},b2=()=>{const{treeData:n}=y2(),[e,t]=Ii(Tn),i=[e||n.key],r=We(_m),s=We(Hh),{moveWidget:o}=e1(),l=([u])=>{const f=u===n.key?"":u;t(f)},a=({dropNode:u,dropPosition:f,dragNode:d})=>d.nodeType==="slot"||d.nodeType==="page"||u.nodeType==="page"?!1:u.nodeType==="slot"?f===0:u.nodeType==="widget"?f!==0:!1,c=({dragNode:u,node:f,node:{pos:d},dropPosition:p})=>{const m=d.split("-"),b=p-Number(m[m.length-1]),g=u.widget;if(f.nodeType!=="slot"&&f.nodeType!=="widget")return;const[x,w]=$m(f.nodeType).with("slot",()=>[s[f.slot.widgetId],f.slot.path]).with("widget",()=>[r[f.widget.id].parent.props,r[f.widget.id].slotPath]).exhaustive();switch(b){case-1:x&&w&&o({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:w,targetPosition:x.slots[w].findIndex(y=>f.widget.id===y)});break;case 1:parent&&w&&o({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:w,targetPosition:x.slots[w].findIndex(y=>f.widget.id===y)});break;case 0:o({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:w,targetPosition:0});break}},h=S.exports.useRef();return O("div",{className:x2.treeWrapper,children:O(t1,{ref:h,multiple:!1,icon:!1,allowDrop:a,switcherIcon:O(n1,{}),selectedKeys:i,onSelect:l,defaultExpandAll:!0,draggable:{icon:!1,nodeDraggable:u=>{var f,d;return u.nodeType==="widget"&&u.widget.id!==((d=(f=Ke.exports.head(n.children||[]))==null?void 0:f.widget)==null?void 0:d.id)}},blockNode:!0,onDrop:c,treeData:[n]})})},x2={treeWrapper:F({name:"mzd4v3",styles:"padding:8px 4px;.ant-tree{line-height:20px!important;&-indent-unit{width:5px;}&-node-content-wrapper{line-height:20px!important;min-height:20px!important;}&-title{cursor:not-allowed;font-size:12px!important;}&-switcher{height:20px;width:20px;}}.outline-node-slot{color:grey;.ant-tree-title{cursor:not-allowed;}}"})};class we{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),On.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),On.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new os(this),s=new os(e);for(let o=t,l=t;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new os(this,e)}iterRange(e,t=this.length){return new jO(this,e,t)}iterLines(e,t){let i;if(e==null)i=this.iter();else{t==null&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new FO(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?we.empty:e.length<=32?new ze(e):On.from(ze.split(e,[]))}}class ze extends we{constructor(e,t=S2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((t?i:l)>=e)return new v2(r,l,i,o);r=l+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new ze(bd(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Io(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new ze(l,o.length+s.length));else{let a=l.length>>1;i.push(new ze(l.slice(0,a)),new ze(l.slice(a)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof ze))return super.replace(e,t,i);let r=Io(this.text,Io(i.text,bd(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new ze(r,s):On.from(ze.split(r,[]),s)}sliceString(e,t=this.length,i=`
`){let r="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&t>s&&(r+=l.slice(Math.max(0,e-s),t-s)),s=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(t.push(new ze(i,r)),i=[],r=-1);return r>-1&&t.push(new ze(i,r)),t}}class On extends we{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((t?a:l)>=e)return o.lineInner(e,t,i,r);r=l+1,i=a+1}}decompose(e,t,i,r){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&t>=o){let c=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!c?i.push(l):l.decompose(e-o,t-o,i,c)}o=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l){let a=o.replace(e-s,t-s,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>5-1&&a.lines>c>>5+1){let h=this.children.slice();return h[r]=a,new On(h,this.length-(t-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i=`
`){let r="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&t>o&&(r+=l.sliceString(e-o,t-o,i)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof On))return 0;let i=0,[r,s,o,l]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==o||s==l)return i;let a=this.children[r],c=e.children[s];if(a!=c)return i+a.scanIdentical(c,t);i+=a.length+1}}static from(e,t=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new ze(d,t)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,c=-1,h=[];function u(d){let p;if(d.lines>s&&d instanceof On)for(let m of d.children)u(m);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof ze&&a&&(p=h[h.length-1])instanceof ze&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,h[h.length-1]=new ze(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&f(),a+=d.lines,c+=d.length+1,h.push(d))}function f(){a!=0&&(l.push(h.length==1?h[0]:On.from(h,c)),c=-1,a=h.length=0)}for(let d of e)u(d);return f(),l.length==1?l[0]:new On(l,t)}}we.empty=new ze([""],0);function S2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Io(n,e,t=0,i=1e9){for(let r=0,s=0,o=!0;s<n.length&&r<=i;s++){let l=n[s],a=r+l.length;a>=t&&(a>i&&(l=l.slice(0,i-r)),r<t&&(l=l.slice(t-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function bd(n,e,t){return Io(n,[""],e,t)}class os{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ze?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof ze?r.text.length:r.children.length;if(o==(t>0?l:0)){if(i==0)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[i]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof ze){let a=r.text[o+(t<0?-1:0)];if(this.offsets[i]+=t,a.length>Math.max(0,e))return this.value=e==0?a:t>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(t<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(t>0?1:(a instanceof ze?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class jO{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new os(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class FO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(we.prototype[Symbol.iterator]=function(){return this.iter()},os.prototype[Symbol.iterator]=jO.prototype[Symbol.iterator]=FO.prototype[Symbol.iterator]=function(){return this});class v2{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}let ar="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<ar.length;n++)ar[n]+=ar[n-1];function w2(n){for(let e=1;e<ar.length;e+=2)if(ar[e]>n)return ar[e-1]<=n;return!1}function xd(n){return n>=127462&&n<=127487}const Sd=8205;function $t(n,e,t=!0,i=!0){return(t?GO:Q2)(n,e,i)}function GO(n,e,t){if(e==n.length)return e;e&&HO(n.charCodeAt(e))&&YO(n.charCodeAt(e-1))&&e--;let i=at(n,e);for(e+=Xt(i);e<n.length;){let r=at(n,e);if(i==Sd||r==Sd||t&&w2(r))e+=Xt(r),i=r;else if(xd(r)){let s=0,o=e-2;for(;o>=0&&xd(at(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Q2(n,e,t){for(;e>0;){let i=GO(n,e-2,t);if(i<e)return i;e--}return 0}function HO(n){return n>=56320&&n<57344}function YO(n){return n>=55296&&n<56320}function at(n,e){let t=n.charCodeAt(e);if(!YO(t)||e+1==n.length)return t;let i=n.charCodeAt(e+1);return HO(i)?(t-55296<<10)+(i-56320)+65536:t}function Su(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Xt(n){return n<65536?1:2}const eh=/\r\n?|\n/;var ft=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(ft||(ft={}));class wn{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,t=!1){th(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new wn(e)}composeDesc(e){return this.empty?e:e.empty?this:KO(this,e)}mapDesc(e,t=!1){return e.empty?this:nh(this,e,t)}mapPos(e,t=-1,i=ft.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=r+l;if(a<0){if(c>e)return s+(e-r);s+=l}else{if(i!=ft.Simple&&c>=e&&(i==ft.TrackDel&&r<e&&c>e||i==ft.TrackBefore&&r<e||i==ft.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!l)return e==r||t<0?s:s+a;s+=a}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=t&&l>=e)return r<e&&l>t?"cover":!0;r=l}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new wn(e)}static create(e){return new wn(e)}}class Ye extends wn{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return th(this,(t,i,r,s,o)=>e=e.replace(r,r+(i-t),o),!1),e}mapDesc(e,t=!1){return nh(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(we.empty);i.push(o?e.slice(s,s+o):we.empty)}s+=o}return new Ye(t,i)}compose(e){return this.empty?e:e.empty?this:KO(this,e,!0)}map(e,t=!1){return e.empty?this:nh(this,e,t,!0)}iterChanges(e,t=!1){th(this,e,t)}get desc(){return wn.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new bs(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let h=Math.min(s.len,a-l);yt(r,h,-1);let u=s.ins==-1?-1:s.off==0?s.ins:0;yt(t,h,u),u>0&&Yn(i,t,s.text),s.forward(h),l+=h}let c=e[o++];for(;l<c;){if(s.done)break e;let h=Math.min(s.len,c-l);yt(t,h,-1),yt(r,h,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(h),l+=h}}return{changes:new Ye(t,i),filtered:wn.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],o=0,l=null;function a(h=!1){if(!h&&!r.length)return;o<t&&yt(r,t-o,-1);let u=new Ye(r,s);l=l?l.compose(u.map(l)):u,r=[],s=[],o=0}function c(h){if(Array.isArray(h))for(let u of h)c(u);else if(h instanceof Ye){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);a(),l=l?l.compose(h.map(l)):h}else{let{from:u,to:f=u,insert:d}=h;if(u>f||u<0||f>t)throw new RangeError(`Invalid change range ${u} to ${f} (in doc of length ${t})`);let p=d?typeof d=="string"?we.of(d.split(i||eh)):d:we.empty,m=p.length;if(u==f&&m==0)return;u<o&&a(),u>o&&yt(r,u-o,-1),yt(r,f-u,m),Yn(s,r,p),o=f}}return c(e),a(!l),l}static empty(e){return new Ye(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;i.length<r;)i.push(we.empty);i[r]=we.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new Ye(t,i)}static createSet(e,t){return new Ye(e,t)}}function yt(n,e,t,i=!1){if(e==0&&t<=0)return;let r=n.length-2;r>=0&&t<=0&&t==n[r+1]?n[r]+=e:e==0&&n[r]==0?n[r+1]+=t:i?(n[r]+=e,n[r+1]+=t):n.push(e,t)}function Yn(n,e,t){if(t.length==0)return;let i=e.length-2>>1;if(i<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<i;)n.push(we.empty);n.push(t)}}function th(n,e,t){let i=n.inserted;for(let r=0,s=0,o=0;o<n.sections.length;){let l=n.sections[o++],a=n.sections[o++];if(a<0)r+=l,s+=l;else{let c=r,h=s,u=we.empty;for(;c+=l,h+=a,a&&i&&(u=u.append(i[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)l=n.sections[o++],a=n.sections[o++];e(r,c,s,h,u),r=c,s=h}}}function nh(n,e,t,i=!1){let r=[],s=i?[]:null,o=new bs(n),l=new bs(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);yt(r,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!t))){let c=l.len;for(yt(r,l.ins,-1);c;){let h=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=h&&(yt(r,0,o.ins),s&&Yn(s,r,o.text),a=o.i),o.forward(h),c-=h}l.next()}else if(o.ins>=0){let c=0,h=o.len;for(;h;)if(l.ins==-1){let u=Math.min(h,l.len);c+=u,h-=u,l.forward(u)}else if(l.ins==0&&l.len<h)h-=l.len,l.next();else break;yt(r,c,a<o.i?o.ins:0),s&&a<o.i&&Yn(s,r,o.text),a=o.i,o.forward(o.len-h)}else{if(o.done&&l.done)return s?Ye.createSet(r,s):wn.create(r);throw new Error("Mismatched change set lengths")}}function KO(n,e,t=!1){let i=[],r=t?[]:null,s=new bs(n),o=new bs(e);for(let l=!1;;){if(s.done&&o.done)return r?Ye.createSet(i,r):wn.create(i);if(s.ins==0)yt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)yt(i,0,o.ins,l),r&&Yn(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let h=o.ins==-1?-1:o.off?0:o.ins;yt(i,a,h,l),r&&h&&Yn(r,i,o.text)}else o.ins==-1?(yt(i,s.off?0:s.len,a,l),r&&Yn(r,i,s.textBit(a))):(yt(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&Yn(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),s.forward2(a),o.forward(a)}}}}class bs{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?we.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?we.empty:t[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Pi{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Pi(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return N.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return N.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return N.range(e.anchor,e.head)}static create(e,t,i){return new Pi(e,t,i)}}class N{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:N.create(this.ranges.map(i=>i.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new N([this.main],0)}addRange(e,t=!0){return N.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,N.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new N(e.ranges.map(t=>Pi.fromJSON(t)),e.main)}static single(e,t=e){return new N([N.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return N.normalized(e.slice(),t);i=s.to}return new N(e,t)}static cursor(e,t=0,i,r){return Pi.create(e,e,(t==0?0:t<0?4:8)|(i==null?3:Math.min(2,i))|(r!=null?r:33554431)<<5)}static range(e,t,i){let r=(i!=null?i:33554431)<<5;return t<e?Pi.create(t,e,16|r|8):Pi.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort((r,s)=>r.from-s.from),t=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=t&&t--,e.splice(--r,2,s.anchor>s.head?N.range(a,l):N.range(l,a))}}return new N(e,t)}}function JO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let vu=0;class H{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.id=vu++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}static define(e={}){return new H(e.combine||(t=>t),e.compareInput||((t,i)=>t===i),e.compare||(e.combine?(t,i)=>t===i:wu),!!e.static,e.enables)}of(e){return new Xo([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xo(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xo(e,this,2,t)}from(e,t){return t||(t=i=>i),this.compute([e],i=>t(i.field(e)))}}function wu(n,e){return n==e||n.length==e.length&&n.every((t,i)=>t===e[i])}class Xo{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=vu++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,h=[];for(let u of this.dependencies)u=="doc"?a=!0:u=="selection"?c=!0:(((t=e[u.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[u.id]);return{create(u){return u.values[o]=i(u),1},update(u,f){if(a&&f.docChanged||c&&(f.docChanged||f.selection)||ih(u,h)){let d=i(u);if(l?!vd(d,u.values[o],r):!r(d,u.values[o]))return u.values[o]=d,1}return 0},reconfigure:(u,f)=>{let d,p=f.config.address[s];if(p!=null){let m=cl(f,p);if(this.dependencies.every(b=>b instanceof H?f.facet(b)===u.facet(b):b instanceof ot?f.field(b,!1)==u.field(b,!1):!0)||(l?vd(d=i(u),m,r):r(d=i(u),m)))return u.values[o]=m,0}else d=i(u);return u.values[o]=d,1}}}}function vd(n,e,t){if(n.length!=e.length)return!1;for(let i=0;i<n.length;i++)if(!t(n[i],e[i]))return!1;return!0}function ih(n,e){let t=!1;for(let i of e)ls(n,i)&1&&(t=!0);return t}function C2(n,e,t){let i=t.map(a=>n[a.id]),r=t.map(a=>a.type),s=i.filter(a=>!(a&1)),o=n[e.id]>>1;function l(a){let c=[];for(let h=0;h<i.length;h++){let u=cl(a,i[h]);if(r[h]==2)for(let f of u)c.push(f);else c.push(u)}return e.combine(c)}return{create(a){for(let c of i)ls(a,c);return a.values[o]=l(a),1},update(a,c){if(!ih(a,s))return 0;let h=l(a);return e.compare(h,a.values[o])?0:(a.values[o]=h,1)},reconfigure(a,c){let h=ih(a,i),u=c.config.facets[e.id],f=c.facet(e);if(u&&!h&&wu(t,u))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}const wd=H.define({static:!0});class ot{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new ot(vu++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(wd).find(i=>i.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:i=>(i.values[t]=this.create(i),1),update:(i,r)=>{let s=i.values[t],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[t]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[t]=r.field(this),0):(i.values[t]=this.create(i),1)}}init(e){return[this,wd.of({field:this,create:e})]}get extension(){return this}}const Si={lowest:4,low:3,default:2,high:1,highest:0};function qr(n){return e=>new e0(e,n)}const Vi={highest:qr(Si.highest),high:qr(Si.high),default:qr(Si.default),low:qr(Si.low),lowest:qr(Si.lowest)};class e0{constructor(e,t){this.inner=e,this.prec=t}}class ra{of(e){return new rh(this,e)}reconfigure(e){return ra.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class rh{constructor(e,t){this.compartment=e,this.inner=t}}class al{constructor(e,t,i,r,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),o=new Map;for(let f of $2(e,t,o))f instanceof ot?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],c=[];for(let f of r)l[f.id]=c.length<<1,c.push(d=>f.slot(d));let h=i==null?void 0:i.config.facets;for(let f in s){let d=s[f],p=d[0].facet,m=h&&h[f]||[];if(d.every(b=>b.type==0))if(l[p.id]=a.length<<1|1,wu(m,d))a.push(i.facet(p));else{let b=p.combine(d.map(g=>g.value));a.push(i&&p.compare(b,i.facet(p))?i.facet(p):b)}else{for(let b of d)b.type==0?(l[b.id]=a.length<<1|1,a.push(b.value)):(l[b.id]=c.length<<1,c.push(g=>b.dynamicSlot(g)));l[p.id]=c.length<<1,c.push(b=>C2(b,p,d))}}let u=c.map(f=>f(l));return new al(e,o,u,l,a,s)}}function $2(n,e,t){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof rh&&t.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof rh){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),s(c,l)}else if(o instanceof e0)s(o.inner,o.prec);else if(o instanceof ot)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Xo)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,Si.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return s(n,Si.default),i.reduce((o,l)=>o.concat(l))}function ls(n,e){if(e&1)return 2;let t=e>>1,i=n.status[t];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;n.status[t]=4;let r=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|r}function cl(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const t0=H.define(),n0=H.define({combine:n=>n.some(e=>e),static:!0}),i0=H.define({combine:n=>n.length?n[0]:void 0,static:!0}),r0=H.define(),s0=H.define(),o0=H.define(),l0=H.define({combine:n=>n.length?n[0]:!1});class di{constructor(e,t){this.type=e,this.value=t}static define(){return new k2}}class k2{of(e){return new di(this,e)}}class P2{constructor(e){this.map=e}of(e){return new ce(this,e)}}class ce{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new ce(this.type,t)}is(e){return this.type==e}static define(e={}){return new P2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(t);s&&i.push(s)}return i}}ce.reconfigure=ce.define();ce.appendConfig=ce.define();class Je{constructor(e,t,i,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&JO(i,t.newLength),s.some(l=>l.type==Je.time)||(this.annotations=s.concat(Je.time.of(Date.now())))}static create(e,t,i,r,s,o){return new Je(e,t,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Je.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Je.time=di.define();Je.userEvent=di.define();Je.addToHistory=di.define();Je.remote=di.define();function T2(n,e){let t=[];for(let i=0,r=0;;){let s,o;if(i<n.length&&(r==e.length||e[r]>=n[i]))s=n[i++],o=n[i++];else if(r<e.length)s=e[r++],o=e[r++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function a0(n,e,t){var i;let r,s,o;return t?(r=e.changes,s=Ye.empty(e.changes.length),o=n.changes.compose(e.changes)):(r=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=n.selection)===null||i===void 0?void 0:i.map(r),effects:ce.mapEffects(n.effects,r).concat(ce.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function sh(n,e,t){let i=e.selection,r=cr(e.annotations);return e.userEvent&&(r=r.concat(Je.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ye?e.changes:Ye.of(e.changes||[],t,n.facet(i0)),selection:i&&(i instanceof N?i:N.single(i.anchor,i.head)),effects:cr(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function c0(n,e,t){let i=sh(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;i=a0(i,sh(n,e[s],o?i.changes.newLength:n.doc.length),o)}let r=Je.create(n,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return R2(t?A2(r):r)}function A2(n){let e=n.startState,t=!0;for(let r of e.facet(r0)){let s=r(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:T2(t,s))}if(t!==!0){let r,s;if(t===!1)s=n.changes.invertedDesc,r=Ye.empty(e.doc.length);else{let o=n.changes.filter(t);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=Je.create(e,r,n.selection&&n.selection.map(s),ce.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let i=e.facet(s0);for(let r=i.length-1;r>=0;r--){let s=i[r](n);s instanceof Je?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Je?n=s[0]:n=c0(e,cr(s),!1)}return n}function R2(n){let e=n.startState,t=e.facet(o0),i=n;for(let r=t.length-1;r>=0;r--){let s=t[r](n);s&&Object.keys(s).length&&(i=a0(i,sh(e,s,n.changes.newLength),!0))}return i==n?n:Je.create(e,n.changes,n.selection,i.effects,i.annotations,i.scrollIntoView)}const E2=[];function cr(n){return n==null?E2:Array.isArray(n)?n:[n]}var Be=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Be||(Be={}));const _2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let oh;try{oh=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function M2(n){if(oh)return oh.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||_2.test(t)))return!0}return!1}function D2(n){return e=>{if(!/\S/.test(e))return Be.Space;if(M2(e))return Be.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Be.Word;return Be.Other}}class ve{constructor(e,t,i,r,s,o){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)ls(this,l<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(i==null){if(t)throw new RangeError("Field is not present in this state");return}return ls(this,i),cl(this,i)}update(...e){return c0(this,e,!0)}applyTransaction(e){let t=this.config,{base:i,compartments:r}=t;for(let o of e.effects)o.is(ra.reconfigure)?(t&&(r=new Map,t.compartments.forEach((l,a)=>r.set(a,l)),t=null),r.set(o.value.compartment,o.value.extension)):o.is(ce.reconfigure)?(t=null,i=o.value):o.is(ce.appendConfig)&&(t=null,i=cr(i).concat(o.value));let s;t?s=e.startState.values.slice():(t=al.resolve(i,r,this),s=new ve(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,a)=>a.reconfigure(l,this),null).values),new ve(t,e.newDoc,e.newSelection,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:N.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],o=cr(i.effects);for(let l=1;l<t.ranges.length;l++){let a=e(t.ranges[l]),c=this.changes(a.changes),h=c.map(r);for(let f=0;f<l;f++)s[f]=s[f].map(h);let u=r.mapDesc(c,!0);s.push(a.range.map(u)),r=r.compose(h),o=ce.mapEffects(o,h).concat(ce.mapEffects(cr(a.effects),u))}return{changes:r,selection:N.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ye?e:Ye.of(e,this.doc.length,this.facet(ve.lineSeparator))}toText(e){return we.of(e.split(this.facet(ve.lineSeparator)||eh))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(ls(this,t),cl(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof ot&&this.config.address[r.id]!=null&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return ve.create({doc:e.doc,selection:N.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=al.resolve(e.extensions||[],new Map),i=e.doc instanceof we?e.doc:we.of((e.doc||"").split(t.staticFacet(ve.lineSeparator)||eh)),r=e.selection?e.selection instanceof N?e.selection:N.single(e.selection.anchor,e.selection.head):N.single(0);return JO(r,i.length),t.staticFacet(n0)||(r=r.asSingle()),new ve(t,i,r,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ve.tabSize)}get lineBreak(){return this.facet(ve.lineSeparator)||`
`}get readOnly(){return this.facet(l0)}phrase(e,...t){for(let i of this.facet(ve.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>t.length?i:t[s-1]})),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(t0))for(let o of s(this,t,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return D2(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=$t(t,o,!1);if(s(t.slice(a,o))!=Be.Word)break;o=a}for(;l<r;){let a=$t(t,l);if(s(t.slice(l,a))!=Be.Word)break;l=a}return o==l?null:N.range(o+i,l+i)}}ve.allowMultipleSelections=n0;ve.tabSize=H.define({combine:n=>n.length?n[0]:4});ve.lineSeparator=i0;ve.readOnly=l0;ve.phrases=H.define({compare(n,e){let t=Object.keys(n),i=Object.keys(e);return t.length==i.length&&t.every(r=>n[r]==e[r])}});ve.languageData=t0;ve.changeFilter=r0;ve.transactionFilter=s0;ve.transactionExtender=o0;ra.reconfigure=ce.define();function En(n,e,t={}){let i={};for(let r of n)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(t,s))i[s]=t[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Di{eq(e){return this==e}range(e,t=e){return xs.create(e,t,this)}}Di.prototype.startSide=Di.prototype.endSide=0;Di.prototype.point=!1;Di.prototype.mapMode=ft.TrackDel;class xs{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new xs(e,t,i)}}function lh(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Qu{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-t;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],h=this.from[a]+e,u=this.to[a]+e,f,d;if(h==u){let p=t.mapPos(h,c.startSide,c.mapMode);if(p==null||(f=d=p,c.startSide!=c.endSide&&(d=t.mapPos(h,c.endSide),d<f)))continue}else if(f=t.mapPos(h,c.startSide),d=t.mapPos(u,c.endSide),f>d||f==d&&c.startSide>0&&c.endSide<=0)continue;(d-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(l=Math.max(l,d-f)),i.push(c),r.push(f-o),s.push(d-o))}return{mapped:i.length?new Qu(r,s,i,l):null,pos:o}}}class Pe{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new Pe(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(i&&(t=t.slice().sort(lh)),this.isEmpty)return t.length?Pe.of(t):this;let l=new h0(this,null,-1).goto(0),a=0,c=[],h=new oi;for(;l.value||a<t.length;)if(a<t.length&&(l.from-t[a].from||l.startSide-t[a].value.startSide)>=0){let u=t[a++];h.addInner(u.from,u.to,u.value)||c.push(u)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(l.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&h.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(h.addInner(l.from,l.to,l.value)||c.push(xs.create(l.from,l.to,l.value))),l.next());return h.finishInner(this.nextLayer.isEmpty&&!c.length?Pe.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)r=Math.max(r,a.maxPoint),t.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:h,pos:u}=a.map(l,e);h&&(r=Math.max(r,h.maxPoint),t.push(h),i.push(u))}}let s=this.nextLayer.map(e);return t.length==0?s:new Pe(i,t,s||Pe.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,i)===!1)return}this.nextLayer.between(e,t,i)}}iter(e=0){return Ss.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Ss.from(e).goto(t)}static compare(e,t,i,r,s=-1){let o=e.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),l=t.filter(u=>u.maxPoint>0||!u.isEmpty&&u.maxPoint>=s),a=Qd(o,l,i),c=new Lr(o,a,s),h=new Lr(l,a,s);i.iterGaps((u,f,d)=>Cd(c,u,h,f,d,r)),i.empty&&i.length==0&&Cd(c,0,h,0,0,r)}static eq(e,t,i=0,r){r==null&&(r=1e9-1);let s=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),o=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=Qd(s,o),a=new Lr(s,l,0).goto(i),c=new Lr(o,l,0).goto(i);for(;;){if(a.to!=c.to||!ah(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>r)return!0;a.next(),c.next()}}static spans(e,t,i,r,s=-1){let o=new Lr(e,null,s).goto(t),l=t,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let h=o.activeForPoint(o.to),u=o.pointFrom<t?h.length+1:Math.min(h.length,a);r.point(l,c,o.point,h,u,o.pointRank),a=Math.min(o.openEnd(c),h.length)}else c>l&&(r.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,t=!1){let i=new oi;for(let r of e instanceof xs?[e]:t?N2(e):e)i.add(r.from,r.to,r.value);return i.finish()}}Pe.empty=new Pe([],[],null,-1);function N2(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let i=n[t];if(lh(e,i)>0)return n.slice().sort(lh);e=i}return n}Pe.empty.nextLayer=Pe.empty;class oi{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new Qu(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new oi)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Pe.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Pe.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Qd(n,e,t){let i=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(t?t.mapPos(l):l)==s.chunkPos[o]&&!(t!=null&&t.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class h0{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Ss{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new h0(o,t,i,s));return r.length==1?r[0]:new Ss(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)Ha(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)Ha(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ha(this.heap,0)}}}function Ha(n,e){for(let t=n[e];;){let i=(e<<1)+1;if(i>=n.length)break;let r=n[i];if(i+1<n.length&&r.compare(n[i+1])>=0&&(r=n[i+1],i++),t.compare(r)<0)break;n[i]=t,n[e]=r,e=i}}class Lr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Ss.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){uo(this.active,e),uo(this.activeTo,e),uo(this.activeRank,e),this.minActive=$d(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;fo(this.active,t,i),fo(this.activeTo,t,r),fo(this.activeRank,t,s),e&&fo(e,t,this.cursor.from),this.minActive=$d(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&uo(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Cd(n,e,t,i,r,s){n.goto(e),t.goto(i);let o=i+r,l=i,a=i-e;for(;;){let c=n.to+a-t.to||n.endSide-t.endSide,h=c<0?n.to+a:t.to,u=Math.min(h,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&ah(n.activeForPoint(n.to+a),t.activeForPoint(t.to))||s.comparePoint(l,u,n.point,t.point):u>l&&!ah(n.active,t.active)&&s.compareRange(l,u,n.active,t.active),h>o)break;l=h,c<=0&&n.next(),c>=0&&t.next()}}function ah(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function uo(n,e){for(let t=e,i=n.length-1;t<i;t++)n[t]=n[t+1];n.pop()}function fo(n,e,t){for(let i=n.length-1;i>=e;i--)n[i+1]=n[i];n[e]=t}function $d(n,e){let t=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||n[r].endSide-n[t].endSide)<0&&(t=r,i=e[r]);return t}function qs(n,e,t=n.length){let i=0;for(let r=0;r<t;)n.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=$t(n,r));return i}function ch(n,e,t,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==n.length)break;s+=n.charCodeAt(r)==9?t-s%t:1,r=$t(n,r)}return i===!0?-1:n.length}const hh="\u037C",kd=typeof Symbol>"u"?"__"+hh:Symbol.for(hh),uh=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class li{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,c){let h=[],u=/^@(\w+)\b/.exec(o[0]),f=u&&u[1]=="keyframes";if(u&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(b=>m.replace(/&/,b))).reduce((m,b)=>m.concat(b)),p,a);else if(p&&typeof p=="object"){if(!u)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,h,f)}else p!=null&&h.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(h.length||f)&&a.push((i&&!u&&!c?o.map(i):o).join(", ")+" {"+h.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Pd[kd]||1;return Pd[kd]=e+1,hh+e.toString(36)}static mount(e,t){(e[uh]||new B2(e)).mount(Array.isArray(t)?t:[t])}}let po=null;class B2{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(po)return e.adoptedStyleSheets=[po.sheet].concat(e.adoptedStyleSheets),e[uh]=po;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),po=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[uh]=this}mount(e){let t=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],l=this.modules.indexOf(o);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,o),t)for(let a=0;a<o.rules.length;a++)t.insertRule(o.rules[a],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!t){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}}var ai={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},vs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Td=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var I2=typeof navigator<"u"&&/Mac/.test(navigator.platform),X2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),U2=I2||Td&&+Td[1]<57;for(var ct=0;ct<10;ct++)ai[48+ct]=ai[96+ct]=String(ct);for(var ct=1;ct<=24;ct++)ai[ct+111]="F"+ct;for(var ct=65;ct<=90;ct++)ai[ct]=String.fromCharCode(ct+32),vs[ct]=String.fromCharCode(ct);for(var Ya in ai)vs.hasOwnProperty(Ya)||(vs[Ya]=ai[Ya]);function V2(n){var e=U2&&(n.ctrlKey||n.altKey||n.metaKey)||X2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?vs:ai)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function hl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function xr(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Z2(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Uo(n,e){if(!e.anchorNode)return!1;try{return xr(n,e.anchorNode)}catch{return!1}}function ws(n){return n.nodeType==3?Sr(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function ul(n,e,t,i){return t?Ad(n,e,t,i,-1)||Ad(n,e,t,i,1):!1}function fl(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function Ad(n,e,t,i,r){for(;;){if(n==t&&e==i)return!0;if(e==(r<0?0:Qs(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=fl(n)+(r<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(r<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=r<0?Qs(n):0}else return!1}}function Qs(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const u0={left:0,right:0,top:0,bottom:0};function Cu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function q2(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function L2(n,e,t,i,r,s,o,l){let a=n.ownerDocument,c=a.defaultView||window;for(let h=n;h;)if(h.nodeType==1){let u,f=h==a.body;if(f)u=q2(c);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let m=h.getBoundingClientRect();u={left:m.left,right:m.left+h.clientWidth,top:m.top,bottom:m.top+h.clientHeight}}let d=0,p=0;if(r=="nearest")e.top<u.top?(p=-(u.top-e.top+o),t>0&&e.bottom>u.bottom+p&&(p=e.bottom-u.bottom+p+o)):e.bottom>u.bottom&&(p=e.bottom-u.bottom+o,t<0&&e.top-p<u.top&&(p=-(u.top+p-e.top+o)));else{let m=e.bottom-e.top,b=u.bottom-u.top;p=(r=="center"&&m<=b?e.top+m/2-b/2:r=="start"||r=="center"&&t<0?e.top-o:e.bottom-b+o)-u.top}if(i=="nearest"?e.left<u.left?(d=-(u.left-e.left+s),t>0&&e.right>u.right+d&&(d=e.right-u.right+d+s)):e.right>u.right&&(d=e.right-u.right+s,t<0&&e.left<u.left+d&&(d=-(u.left+d-e.left+s))):d=(i=="center"?e.left+(e.right-e.left)/2-(u.right-u.left)/2:i=="start"==l?e.left-s:e.right-(u.right-u.left)+s)-u.left,d||p)if(f)c.scrollBy(d,p);else{let m=0,b=0;if(p){let g=h.scrollTop;h.scrollTop+=p,b=h.scrollTop-g}if(d){let g=h.scrollLeft;h.scrollLeft+=d,m=h.scrollLeft-g}e={left:e.left-m,top:e.top-b,right:e.right-m,bottom:e.bottom-b},m&&Math.abs(m-d)<1&&(i="nearest"),b&&Math.abs(b-p)<1&&(r="nearest")}if(f)break;h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}class z2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Wi=null;function f0(n){if(n.setActive)return n.setActive();if(Wi)return n.focus(Wi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Wi==null?{get preventScroll(){return Wi={preventScroll:!0},!0}}:void 0),!Wi){Wi=!1;for(let t=0;t<e.length;){let i=e[t++],r=e[t++],s=e[t++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let Rd;function Sr(n,e,t=e){let i=Rd||(Rd=document.createRange());return i.setEnd(n,t),i.setStart(n,e),i}function hr(n,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,n.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,n.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function W2(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function d0(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function j2(n,e){let t=e.focusNode,i=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=i)return!1;for(;;)if(i){if(t.nodeType!=1)return!1;let r=t.childNodes[i-1];r.contentEditable=="false"?i--:(t=r,i=Qs(t))}else{if(t==n)return!0;i=fl(t),t=t.parentNode}}class bt{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new bt(e.parentNode,fl(e),t)}static after(e,t){return new bt(e.parentNode,fl(e)+1,t)}}const $u=[];class De{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,r;for(let s of this.children){if(s.dirty){if(!s.dom&&(r=i?i.nextSibling:t.firstChild)){let o=De.get(r);(!o||!o.parent&&o.canReuseDOM(s))&&s.reuseDOM(r)}s.sync(e),s.dirty=0}if(r=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&r!=s.dom&&(e.written=!0),s.dom.parentNode==t)for(;r&&r!=s.dom;)r=Ed(r);else t.insertBefore(s.dom,r);i=s.dom}for(r=i?i.nextSibling:t.firstChild,r&&e&&e.node==t&&(e.written=!0);r;)r=Ed(r)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=Qs(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!De.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,c=i,h=i;a<this.children.length;a++){let u=this.children[a],f=c+u.length;if(c<e&&f>t)return u.domBoundsAround(e,t,c);if(f>=e&&r==-1&&(r=a,s=c),c>t&&u.dom.parentNode==this.dom){o=a,l=h;break}h=f,c=f+u.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=$u){this.markDirty();for(let r=e;r<t;r++){let s=this.children[r];s.parent==this&&s.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new p0(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor}getSide(){return 0}destroy(){this.parent=null}}De.prototype.breakAfter=0;function Ed(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class p0{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function m0(n,e,t,i,r,s,o,l,a){let{children:c}=n,h=c.length?c[e]:null,u=s.length?s[s.length-1]:null,f=u?u.breakAfter:o;if(!(e==i&&h&&!o&&!f&&s.length<2&&h.merge(t,r,s.length?u:null,t==0,l,a))){if(i<c.length){let d=c[i];d&&r<d.length?(e==i&&(d=d.split(r),r=0),!f&&u&&d.merge(0,r,u,!0,0,a)?s[s.length-1]=d:(r&&d.merge(0,r,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(u?u.breakAfter=1:o=1),i++}for(h&&(h.breakAfter=o,t>0&&(!o&&s.length&&h.merge(t,h.length,s[0],!1,l,0)?h.breakAfter=s.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,l,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||s.length)&&n.replaceChildren(e,i,s)}}function g0(n,e,t,i,r,s){let o=n.childCursor(),{i:l,off:a}=o.findPos(t,1),{i:c,off:h}=o.findPos(e,-1),u=e-t;for(let f of i)u+=f.length;n.length+=u,m0(n,c,h,l,a,i,0,r,s)}let Ut=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},fh=typeof document<"u"?document:{documentElement:{style:{}}};const dh=/Edge\/(\d+)/.exec(Ut.userAgent),O0=/MSIE \d/.test(Ut.userAgent),ph=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ut.userAgent),sa=!!(O0||ph||dh),_d=!sa&&/gecko\/(\d+)/i.test(Ut.userAgent),Ka=!sa&&/Chrome\/(\d+)/.exec(Ut.userAgent),Md="webkitFontSmoothing"in fh.documentElement.style,y0=!sa&&/Apple Computer/.test(Ut.vendor),Dd=y0&&(/Mobile\/\w+/.test(Ut.userAgent)||Ut.maxTouchPoints>2);var Y={mac:Dd||/Mac/.test(Ut.platform),windows:/Win/.test(Ut.platform),linux:/Linux|X11/.test(Ut.platform),ie:sa,ie_version:O0?fh.documentMode||6:ph?+ph[1]:dh?+dh[1]:0,gecko:_d,gecko_version:_d?+(/Firefox\/(\d+)/.exec(Ut.userAgent)||[0,0])[1]:0,chrome:!!Ka,chrome_version:Ka?+Ka[1]:0,ios:Dd,android:/Android\b/.test(Ut.userAgent),webkit:Md,safari:y0,webkit_version:Md?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:fh.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const F2=256;class ci extends De{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof ci)||this.length-(t-e)+i.length>F2)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ci(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new bt(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return mh(this.dom,e,t)}}class $n extends De{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(d0(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,r,s,o){return i&&(!(i instanceof $n&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(g0(this,e,t,i?i.children:[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&t.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new $n(this.mark,t,o)}domAtPos(e){return S0(this,e)}coordsAt(e,t){return w0(this,e,t)}}function mh(n,e,t){let i=n.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&t<0||e==i&&t>=0?Y.chrome||Y.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):t<0?r--:s<i&&s++;let l=Sr(n,r,s).getClientRects();if(!l.length)return u0;let a=l[(o?o<0:t>=0)?0:l.length-1];return Y.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?Cu(a,o<0):a||null}class Kn extends De{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||Kn)(e,t,i)}split(e){let t=Kn.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,r,s,o){return i&&(!(i instanceof Kn)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Kn&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return we.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):we.empty}domAtPos(e){return e==0?bt.before(this.dom):bt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),r=null;if(!i.length)return u0;for(let s=e>0?i.length-1:0;r=i[s],!(e>0?s==0:s==i.length-1||r.top<r.bottom);s+=e>0?-1:1);return this.length?r:Cu(r,this.side>0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class b0 extends Kn{domAtPos(e){let{topView:t,text:i}=this.widget;return t?gh(e,0,t,i,(r,s)=>r.domAtPos(s),r=>new bt(i,Math.min(r,i.nodeValue.length))):new bt(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:r}=this.widget;return i?x0(e,t,i,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:r}=this.widget;return i?gh(e,t,i,r,(s,o,l)=>s.coordsAt(o,l),(s,o)=>mh(r,s,o)):mh(r,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}canReuseDOM(){return!0}}function gh(n,e,t,i,r,s){if(t instanceof $n){for(let o=t.dom.firstChild;o;o=o.nextSibling){let l=De.get(o);if(!l)return s(n,e);let a=xr(o,i),c=l.length+(a?i.nodeValue.length:0);if(n<c||n==c&&l.getSide()<=0)return a?gh(n,e,l,i,r,s):r(l,n,e);n-=c}return r(t,t.length,-1)}else return t.dom==i?s(n,e):r(t,n,e)}function x0(n,e,t,i){if(t instanceof $n)for(let r of t.children){let s=0,o=xr(r.dom,i);if(xr(r.dom,n))return s+(o?x0(n,e,r,i):r.localPosFromDOM(n,e));s+=o?i.nodeValue.length:r.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(n,e)}class vr extends De{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof vr&&e.side==this.side}split(){return new vr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return bt.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=G2(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return we.empty}}ci.prototype.children=Kn.prototype.children=vr.prototype.children=$u;function G2(n,e){let t=n.parent,i=t?t.children.indexOf(n):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let r=t.children[i+e];if(r instanceof ci){let s=r.coordsAt(e<0?r.length:0,e);if(s)return s}i+=e}else if(t instanceof $n&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let r=t.dom.lastChild;if(r&&r.nodeName=="BR")return r.getClientRects()[0];break}}function S0(n,e){let t=n.dom,{children:i}=n,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new bt(t,0)}function v0(n,e,t){let i,{children:r}=n;t>0&&e instanceof $n&&r.length&&(i=r[r.length-1])instanceof $n&&i.mark.eq(e.mark)?v0(i,e.children[0],t-1):(r.push(e),e.setParent(n)),n.length+=e.length}function w0(n,e,t){let i=null,r=-1,s=null,o=-1;function l(c,h){for(let u=0,f=0;u<c.children.length&&f<=h;u++){let d=c.children[u],p=f+d.length;p>=h&&(d.children.length?l(d,h-f):!s&&(p>h||f==p&&d.getSide()>0)?(s=d,o=h-f):(f<h||f==p&&d.getSide()<0)&&(i=d,r=h-f)),f=p}}l(n,e);let a=(t<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),t):H2(n)}function H2(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=ws(e);return t[t.length-1]||null}function Oh(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function ku(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r of t)if(i.indexOf(r)==-1||n[r]!==e[r])return!1;return!0}function yh(n,e,t){let i=null;if(e)for(let r in e)t&&r in t||n.removeAttribute(i=r);if(t)for(let r in t)e&&e[r]==t[r]||n.setAttribute(i=r,t[r]);return!!i}class Zn{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var _e=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(_e||(_e={}));class ne extends Di{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new oa(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Ni(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Q0(e,t);i=(s?t?-3e8:-1:5e8)-1,r=(o?t?2e8:1:-6e8)+1}return new Ni(e,i,r,t,e.widget||null,!0)}static line(e){return new Ls(e)}static set(e,t=!1){return Pe.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ne.none=Pe.empty;class oa extends ne{constructor(e){let{start:t,end:i}=Q0(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof oa&&this.tagName==e.tagName&&this.class==e.class&&ku(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}oa.prototype.point=!1;class Ls extends ne{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ls&&ku(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ls.prototype.mapMode=ft.TrackBefore;Ls.prototype.point=!0;class Ni extends ne{constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?ft.TrackBefore:ft.TrackAfter:ft.TrackDel}get type(){return this.startSide<this.endSide?_e.WidgetRange:this.startSide<=0?_e.WidgetBefore:_e.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Ni&&Y2(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Ni.prototype.point=!0;function Q0(n,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=n;return t==null&&(t=n.inclusive),i==null&&(i=n.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function Y2(n,e){return n==e||!!(n&&e&&n.compare(e))}function bh(n,e,t,i=0){let r=t.length-1;r>=0&&t[r]+i>=n?t[r]=Math.max(t[r],e):t.push(n,e)}class kt extends De{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,o){if(i){if(!(i instanceof kt))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),g0(this,e,t,i?i.children:[],s,o),!0}split(e){let t=new kt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ku(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){v0(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=Oh(t,this.attrs||{})),i&&(this.attrs=Oh({class:i},this.attrs||{}))}domAtPos(e){return S0(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(d0(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(yh(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&De.get(i)instanceof $n;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=De.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!Y.ios||!this.children.some(r=>r instanceof ci))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof ci)||/[^ -~]/.test(t.text))return null;let i=ws(t.dom);if(i.length!=1)return null;e+=i[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return w0(this,e,t)}become(e){return!1}get type(){return _e.Text}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=t){if(s instanceof kt)return s;if(o>t)break}r=o+s.breakAfter}return null}}class Ri extends De{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,o){return i&&(!(i instanceof Ri)||!this.widget.compare(i.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?bt.before(this.dom):bt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Ri(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return $u}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):we.empty}domBoundsAround(){return null}become(e){return e instanceof Ri&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Pu{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ri&&e.type==_e.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new kt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(mo(new vr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(mo(new ci(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Ni){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=t-e;if(i instanceof Ni)if(i.block){let{type:a}=i;a==_e.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ri(i.widget||new Nd("div"),l,a))}else{let a=Kn.create(i.widget||new Nd("span"),l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<t||i.startSide>0),h=!a.isEditable&&(e<t||s>r.length||i.startSide<=0),u=this.getLine();this.pendingBuffer==2&&!c&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(u.append(mo(new vr(1),r),s),s=r.length+Math.max(0,s-r.length)),u.append(mo(a,r),s),this.atCursorPos=h,this.pendingBuffer=h?e<t||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let o=new Pu(e,t,i,s);return o.openEnd=Pe.spans(r,t,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function mo(n,e){for(let t of e)n=new $n(t,[n],n.length);return n}class Nd extends Zn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const C0=H.define(),$0=H.define(),k0=H.define(),P0=H.define(),xh=H.define(),T0=H.define(),A0=H.define({combine:n=>n.some(e=>e)}),R0=H.define({combine:n=>n.some(e=>e)});class dl{constructor(e,t="nearest",i="nearest",r=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new dl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Bd=ce.define({map:(n,e)=>n.map(e)});function Zt(n,e,t){let i=n.facet(P0);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const la=H.define({combine:n=>n.length?n[0]:!0});let K2=0;const Jr=H.define();class He{constructor(e,t,i,r){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:i,provide:r,decorations:s}=t||{};return new He(K2++,e,i,o=>{let l=[Jr.of(o)];return s&&l.push(Cs.of(a=>{let c=a.plugin(o);return c?s(c):ne.none})),r&&l.push(r(o)),l})}static fromClass(e,t){return He.define(i=>new e(i),t)}}class Ja{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Zt(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Zt(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Zt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const E0=H.define(),Tu=H.define(),Cs=H.define(),_0=H.define(),M0=H.define(),es=H.define();class Qn{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new Qn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],c=o-l,h=a?a.fromB:1e9;for(;s<t.length&&t[s]<h;){let u=t[s],f=t[s+1],d=Math.max(l,u),p=Math.min(h,f);if(d<=p&&new Qn(d+c,p+c,d,p).addToSet(i),f>h)break;s+=2}if(!a)return i;new Qn(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class pl{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Ye.empty(this.startState.doc.length);for(let o of i)this.changes=this.changes.compose(o.changes);let r=[];this.changes.iterChangedRanges((o,l,a,c)=>r.push(new Qn(o,l,a,c))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new pl(e,t,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var Ze=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(Ze||(Ze={}));const Sh=Ze.LTR,J2=Ze.RTL;function D0(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const e5=D0("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),t5=D0("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vh=Object.create(null),fn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);vh[e]=t,vh[t]=-e}function n5(n){return n<=247?e5[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?t5[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203?256:64336<=n&&n<=65023?4:n==8204?256:1}const i5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ur{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?J2:Sh}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=t&&l.to>=t){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<t:l.to>t:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}const Ue=[];function r5(n,e){let t=n.length,i=e==Sh?1:2,r=e==Sh?2:1;if(!n||i==1&&!i5.test(n))return N0(t);for(let o=0,l=i,a=i;o<t;o++){let c=n5(n.charCodeAt(o));c==512?c=l:c==8&&a==4&&(c=16),Ue[o]=c==4?2:c,c&7&&(a=c),l=c}for(let o=0,l=i,a=i;o<t;o++){let c=Ue[o];if(c==128)o<t-1&&l==Ue[o+1]&&l&24?c=Ue[o]=l:Ue[o]=256;else if(c==64){let h=o+1;for(;h<t&&Ue[h]==64;)h++;let u=o&&l==8||h<t&&Ue[h]==8?a==1?1:8:256;for(let f=o;f<h;f++)Ue[f]=u;o=h-1}else c==8&&a==1&&(Ue[o]=1);l=c,c&7&&(a=c)}for(let o=0,l=0,a=0,c,h,u;o<t;o++)if(h=vh[c=n.charCodeAt(o)])if(h<0){for(let f=l-3;f>=0;f-=3)if(fn[f+1]==-h){let d=fn[f+2],p=d&2?i:d&4?d&1?r:i:0;p&&(Ue[o]=Ue[fn[f]]=p),l=f;break}}else{if(fn.length==189)break;fn[l++]=o,fn[l++]=c,fn[l++]=a}else if((u=Ue[o])==2||u==1){let f=u==i;a=f?0:1;for(let d=l-3;d>=0;d-=3){let p=fn[d+2];if(p&2)break;if(f)fn[d+2]|=2;else{if(p&4)break;fn[d+2]|=4}}}for(let o=0;o<t;o++)if(Ue[o]==256){let l=o+1;for(;l<t&&Ue[l]==256;)l++;let a=(o?Ue[o-1]:i)==1,c=(l<t?Ue[l]:i)==1,h=a==c?a?1:2:i;for(let u=o;u<l;u++)Ue[u]=h;o=l-1}let s=[];if(i==1)for(let o=0;o<t;){let l=o,a=Ue[o++]!=1;for(;o<t&&a==(Ue[o]!=1);)o++;if(a)for(let c=o;c>l;){let h=c,u=Ue[--c]!=2;for(;c>l&&u==(Ue[c-1]!=2);)c--;s.push(new ur(c,h,u?2:1))}else s.push(new ur(l,o,0))}else for(let o=0;o<t;){let l=o,a=Ue[o++]==2;for(;o<t&&a==(Ue[o]==2);)o++;s.push(new ur(l,o,a?1:2))}return s}function N0(n){return[new ur(0,n,0)]}let B0="";function s5(n,e,t,i,r){var s;let o=i.head-n.from,l=-1;if(o==0){if(!r||!n.length)return null;e[0].level!=t&&(o=e[0].side(!1,t),l=0)}else if(o==n.length){if(r)return null;let f=e[e.length-1];f.level!=t&&(o=f.side(!0,t),l=e.length-1)}l<0&&(l=ur.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc));let a=e[l];o==a.side(r,t)&&(a=e[l+=r?1:-1],o=a.side(!r,t));let c=r==(a.dir==t),h=$t(n.text,o,c);if(B0=n.text.slice(Math.min(o,h),Math.max(o,h)),h!=a.side(r,t))return N.cursor(h+n.from,c?-1:1,a.level);let u=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return!u&&a.level!=t?N.cursor(r?n.to:n.from,r?-1:1,t):u&&u.level<a.level?N.cursor(u.side(!r,t)+n.from,r?1:-1,u.level):N.cursor(h+n.from,r?-1:1,a.level)}const Jn="\uFFFF";class I0{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ve.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Jn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r),this.readNode(r);let s=r.nextSibling;if(s==t)break;let o=De.get(r),l=De.get(s);(o&&l?o.breakAfter:(o?o.breakAfter:Id(r))||Id(s)&&(r.nodeName!="BR"||r.cmIgnore))&&this.lineBreak(),r=s}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(t))&&(s=l.index,o=l[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=De.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function Id(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class Xd{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Ud extends De{constructor(e){super(),this.view=e,this.compositionDeco=ne.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new kt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Qn(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:o,toA:l})=>l<this.minWidthFrom||o>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=ne.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=l5(this.view,e.changes)),(Y.ie||Y.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,r=this.updateDeco(),s=u5(i,r,e.changes);return t=Qn.extendWithRanges(t,s),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let s=Y.chrome||Y.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(s),this.dirty=0,s&&(s.written||i.selectionRange.focusNode!=s.node)&&(this.forceSelection=!0),this.dom.style.height=""});let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Ri&&s.widget instanceof Vd&&r.push(s.dom);i.updateGaps(r)}updateChildren(e,t){let i=this.childCursor(t);for(let r=e.length-1;;r--){let s=r>=0?e[r]:null;if(!s)break;let{fromA:o,toA:l,fromB:a,toB:c}=s,{content:h,breakAtStart:u,openStart:f,openEnd:d}=Pu.build(this.view.state.doc,a,c,this.decorations,this.dynamicDecorationMap),{i:p,off:m}=i.findPos(l,1),{i:b,off:g}=i.findPos(o,-1);m0(this,b,g,p,m,h,u,f,d)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection()))return;let i=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.domAtPos(r.anchor),o=r.empty?s:this.domAtPos(r.head);if(Y.gecko&&r.empty&&o5(s)){let a=document.createTextNode("");this.view.observer.ignore(()=>s.node.insertBefore(a,s.node.childNodes[s.offset]||null)),s=o=new bt(a,0),i=!0}let l=this.view.observer.selectionRange;(i||!l.focusNode||!ul(s.node,s.offset,l.anchorNode,l.anchorOffset)||!ul(o.node,o.offset,l.focusNode,l.focusOffset))&&(this.view.observer.ignore(()=>{Y.android&&Y.chrome&&this.dom.contains(l.focusNode)&&f5(l.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let a=hl(this.view.root);if(a)if(r.empty){if(Y.gecko){let c=c5(s.node,s.offset);if(c&&c!=3){let h=U0(s.node,s.offset,c==1?1:-1);h&&(s=new bt(h,c==1?0:h.nodeValue.length))}}a.collapse(s.node,s.offset),r.bidiLevel!=null&&l.cursorBidiLevel!=null&&(l.cursorBidiLevel=r.bidiLevel)}else if(a.extend){a.collapse(s.node,s.offset);try{a.extend(o.node,o.offset)}catch{}}else{let c=document.createRange();r.anchor>r.head&&([s,o]=[o,s]),c.setEnd(o.node,o.offset),c.setStart(s.node,s.offset),a.removeAllRanges(),a.addRange(c)}}),this.view.observer.setSelectionRange(s,o)),this.impreciseAnchor=s.precise?null:new bt(l.anchorNode,l.anchorOffset),this.impreciseHead=o.precise?null:new bt(l.focusNode,l.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let{view:e}=this,t=e.state.selection.main,i=hl(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!t.empty||!t.assoc||!i.modify)return;let o=kt.find(this,t.head);if(!o)return;let l=o.posAtStart;if(t.head==l||t.head==l+o.length)return;let a=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!a||!c||a.bottom>c.top)return;let h=this.domAtPos(t.head+t.assoc);i.collapse(h.node,h.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&i.collapse(r,s)}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Uo(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let i=De.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let r=this.children[t];if(i<r.length||r instanceof kt)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],o=i-s.breakAfter-s.length;if(e>o||e==o&&s.type!=_e.WidgetBefore&&s.type!=_e.WidgetAfter&&(!r||t==2||this.children[r-1].breakAfter||this.children[r-1].type==_e.WidgetBefore&&t>-2))return s.coordsAt(e-o,t);i=o}}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==Ze.LTR;for(let c=0,h=0;h<this.children.length;h++){let u=this.children[h],f=c+u.length;if(f>r)break;if(c>=i){let d=u.dom.getBoundingClientRect();if(t.push(d.height),o){let p=u.dom.lastChild,m=p?ws(p):[];if(m.length){let b=m[m.length-1],g=a?b.right-d.left:d.right-b.left;g>l&&(l=g,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+u.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ze.RTL:Ze.LTR}measureTextSize(){for(let r of this.children)if(r instanceof kt){let s=r.measureTextSize();if(s)return s}let e=document.createElement("div"),t,i;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=ws(e.firstChild)[0];t=e.getBoundingClientRect().height,i=r?r.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new p0(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=t.lineBlockAt(o).bottom-t.lineBlockAt(i).top;e.push(ne.replace({widget:new Vd(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ne.set(e)}updateDeco(){let e=this.view.state.facet(Cs).map((t,i)=>(this.dynamicDecorationMap[i]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),r;if(!i)return;!t.empty&&(r=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=0,o=0,l=0,a=0;for(let h of this.view.state.facet(M0).map(u=>u(this.view)))if(h){let{left:u,right:f,top:d,bottom:p}=h;u!=null&&(s=Math.max(s,u)),f!=null&&(o=Math.max(o,f)),d!=null&&(l=Math.max(l,d)),p!=null&&(a=Math.max(a,p))}let c={left:i.left-s,top:i.top-l,right:i.right+o,bottom:i.bottom+a};L2(this.view.scrollDOM,c,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==Ze.LTR)}}function o5(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class Vd extends Zn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function X0(n){let e=n.observer.selectionRange,t=e.focusNode&&U0(e.focusNode,e.focusOffset,0);if(!t)return null;let i=n.docView.nearest(t);if(!i)return null;if(i instanceof kt){let r=t;for(;r.parentNode!=i.dom;)r=r.parentNode;let s=r.previousSibling;for(;s&&!De.get(s);)s=s.previousSibling;let o=s?De.get(s).posAtEnd:i.posAtStart;return{from:o,to:o,node:r,text:t}}else{for(;;){let{parent:s}=i;if(!s)return null;if(s instanceof kt)break;i=s}let r=i.posAtStart;return{from:r,to:r+i.length,node:i.dom,text:t}}}function l5(n,e){let t=X0(n);if(!t)return ne.none;let{from:i,to:r,node:s,text:o}=t,l=e.mapPos(i,1),a=Math.max(l,e.mapPos(r,-1)),{state:c}=n,h=s.nodeType==3?s.nodeValue:new I0([],c).readRange(s.firstChild,null).text;if(a-l<h.length)if(c.doc.sliceString(l,Math.min(c.doc.length,l+h.length),Jn)==h)a=l+h.length;else if(c.doc.sliceString(Math.max(0,a-h.length),a,Jn)==h)l=a-h.length;else return ne.none;else if(c.doc.sliceString(l,a,Jn)!=h)return ne.none;let u=De.get(s);return u instanceof b0?u=u.widget.topView:u&&(u.parent=null),ne.set(ne.replace({widget:new a5(s,o,u),inclusive:!0}).range(l,a))}class a5 extends Zn{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return b0}}function U0(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=Qs(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function c5(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class h5{constructor(){this.changes=[]}compareRange(e,t){bh(e,t,this.changes)}comparePoint(e,t){bh(e,t,this.changes)}}function u5(n,e,t){let i=new h5;return Pe.compare(n,e,t,i),i.changes}function f5(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function d5(n,e,t=1){let i=n.charCategorizer(e),r=n.doc.lineAt(e),s=e-r.from;if(r.length==0)return N.cursor(e);s==0?t=1:s==r.length&&(t=-1);let o=s,l=s;t<0?o=$t(r.text,s,!1):l=$t(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let c=$t(r.text,o,!1);if(i(r.text.slice(c,o))!=a)break;o=c}for(;l<r.length;){let c=$t(r.text,l);if(i(r.text.slice(l,c))!=a)break;l=c}return N.range(o+r.from,l+r.from)}function p5(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function m5(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function ec(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function Zd(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function qd(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function wh(n,e,t){let i,r,s,o,l=!1,a,c,h,u;for(let p=n.firstChild;p;p=p.nextSibling){let m=ws(p);for(let b=0;b<m.length;b++){let g=m[b];r&&ec(r,g)&&(g=Zd(qd(g,r.bottom),r.top));let x=p5(e,g),w=m5(t,g);if(x==0&&w==0)return p.nodeType==3?Ld(p,e,t):wh(p,e,t);(!i||o>w||o==w&&s>x)&&(i=p,r=g,s=x,o=w,l=!x||(x>0?b<m.length-1:b>0)),x==0?t>g.bottom&&(!h||h.bottom<g.bottom)?(a=p,h=g):t<g.top&&(!u||u.top>g.top)&&(c=p,u=g):h&&ec(h,g)?h=qd(h,g.bottom):u&&ec(u,g)&&(u=Zd(u,g.top))}}if(h&&h.bottom>=t?(i=a,r=h):u&&u.top<=t&&(i=c,r=u),!i)return{node:n,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return Ld(i,f,t);if(l&&i.contentEditable!="false")return wh(i,f,t);let d=Array.prototype.indexOf.call(n.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:n,offset:d}}function Ld(n,e,t){let i=n.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Sr(n,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(h.top==h.bottom)continue;o||(o=e-h.left);let u=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&u<s){let f=e>=(h.left+h.right)/2,d=f;if((Y.chrome||Y.gecko)&&Sr(n,l).getBoundingClientRect().left==h.right&&(d=!f),u<=0)return{node:n,offset:l+(d?1:0)};r=l+(d?1:0),s=u}}}return{node:n,offset:r>-1?r:o>0?n.nodeValue.length:0}}function V0(n,{x:e,y:t},i,r=-1){var s;let o=n.contentDOM.getBoundingClientRect(),l=o.top+n.viewState.paddingTop,a,{docHeight:c}=n.viewState,h=t-l;if(h<0)return 0;if(h>c)return n.state.doc.length;for(let g=n.defaultLineHeight/2,x=!1;a=n.elementAtHeight(h),a.type!=_e.Text;)for(;h=r>0?a.bottom+g:a.top-g,!(h>=0&&h<=c);){if(x)return i?null:0;x=!0,r=-r}t=l+h;let u=a.from;if(u<n.viewport.from)return n.viewport.from==0?0:i?null:zd(n,o,a,e,t);if(u>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:i?null:zd(n,o,a,e,t);let f=n.dom.ownerDocument,d=n.root.elementFromPoint?n.root:f,p=d.elementFromPoint(e,t);p&&!n.contentDOM.contains(p)&&(p=null),p||(e=Math.max(o.left+1,Math.min(o.right-1,e)),p=d.elementFromPoint(e,t),p&&!n.contentDOM.contains(p)&&(p=null));let m,b=-1;if(p&&((s=n.docView.nearest(p))===null||s===void 0?void 0:s.isEditable)!=!1){if(f.caretPositionFromPoint){let g=f.caretPositionFromPoint(e,t);g&&({offsetNode:m,offset:b}=g)}else if(f.caretRangeFromPoint){let g=f.caretRangeFromPoint(e,t);g&&({startContainer:m,startOffset:b}=g,(!n.contentDOM.contains(m)||Y.safari&&g5(m,b,e)||Y.chrome&&O5(m,b,e))&&(m=void 0))}}if(!m||!n.docView.dom.contains(m)){let g=kt.find(n.docView,u);if(!g)return h>a.top+a.height/2?a.to:a.from;({node:m,offset:b}=wh(g.dom,e,t))}return n.docView.posFromDOM(m,b)}function zd(n,e,t,i,r){let s=Math.round((i-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>n.defaultLineHeight*1.5&&(s+=Math.floor((r-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let o=n.state.sliceDoc(t.from,t.to);return t.from+ch(o,s,n.state.tabSize)}function g5(n,e,t){let i;if(n.nodeType!=3||e!=(i=n.nodeValue.length))return!1;for(let r=n.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Sr(n,i-1,i).getBoundingClientRect().left>t}function O5(n,e,t){if(e!=0)return!1;for(let r=n;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=n.nodeType==1?n.getBoundingClientRect():Sr(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-i.left>5}function y5(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=!i||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(r.from),h=n.posAtCoords({x:t==(c==Ze.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(h!=null)return N.cursor(h,t?-1:1)}let o=kt.find(n.docView,e.head),l=o?t?o.posAtEnd:o.posAtStart:t?r.to:r.from;return N.cursor(l,t?-1:1)}function Wd(n,e,t,i){let r=n.state.doc.lineAt(e.head),s=n.bidiSpans(r),o=n.textDirectionAt(r.from);for(let l=e,a=null;;){let c=s5(r,s,o,l,t),h=B0;if(!c){if(r.number==(t?n.state.doc.lines:1))return l;h=`
`,r=n.state.doc.line(r.number+(t?1:-1)),s=n.bidiSpans(r),c=N.cursor(t?r.from:r.to)}if(a){if(!a(h))return l}else{if(!i)return c;a=i(h)}l=c}}function b5(n,e,t){let i=n.state.charCategorizer(e),r=i(t);return s=>{let o=i(s);return r==Be.Space&&(r=o),r==o}}function x5(n,e,t,i){let r=e.head,s=t?1:-1;if(r==(t?n.state.doc.length:0))return N.cursor(r,e.assoc);let o=e.goalColumn,l,a=n.contentDOM.getBoundingClientRect(),c=n.coordsAtPos(r),h=n.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let d=n.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,n.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+h}let u=a.left+o,f=i!=null?i:n.defaultLineHeight>>1;for(let d=0;;d+=10){let p=l+(f+d)*s,m=V0(n,{x:u,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?m<r:m>r))return N.cursor(m,e.assoc,void 0,o)}}function tc(n,e,t){let i=n.state.facet(_0).map(r=>r(n));for(;;){let r=!1;for(let s of i)s.between(t.from-1,t.from+1,(o,l,a)=>{t.from>o&&t.from<l&&(t=e.head>t.from?N.cursor(o,1):N.cursor(l,-1),r=!0)});if(!r)return t}}class S5{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in st){let i=st[t];e.contentDOM.addEventListener(t,r=>{!jd(e,r)||this.ignoreDuringComposition(r)||t=="keydown"&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():i(e,r))},Qh[t]),this.registeredEvents.push(t)}Y.chrome&&Y.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,Y.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let r;this.customHandlers=[];for(let s of t)if(r=(i=s.update(e).spec)===null||i===void 0?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let o in r)this.registeredEvents.indexOf(o)<0&&o!="scroll"&&(this.registeredEvents.push(o),e.contentDOM.addEventListener(o,l=>{!jd(e,l)||this.runCustomHandlers(o,e,l)&&l.preventDefault()}))}}runCustomHandlers(e,t,i){for(let r of this.customHandlers){let s=r.handlers[e];if(s)try{if(s.call(r.plugin,i,t)||i.defaultPrevented)return!0}catch(o){Zt(t.state,o)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let i of this.customHandlers){let r=i.handlers.scroll;if(r)try{r.call(i.plugin,t,e)}catch(s){Zt(e.state,s)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(Y.android&&Y.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return Y.ios&&!t.synthetic&&!t.altKey&&!t.metaKey&&((i=Z0.find(r=>r.keyCode==t.keyCode))&&!t.ctrlKey||v5.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(this.pendingIOSKey=i||t,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,hr(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Y.safari&&!Y.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Z0=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],v5="dthko",q0=[16,17,18,20,91,92,224,225];class w5{constructor(e,t,i,r){this.view=e,this.style=i,this.mustSelect=r,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ve.allowMultipleSelections)&&Q5(e,t),this.dragMove=C5(e,t),this.dragging=$5(e,t)&&j0(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Q5(n,e){let t=n.state.facet(C0);return t.length?t[0](e):Y.mac?e.metaKey:e.ctrlKey}function C5(n,e){let t=n.state.facet($0);return t.length?t[0](e):Y.mac?!e.altKey:!e.ctrlKey}function $5(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let i=hl(n.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function jd(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=De.get(t))&&i.ignoreEvent(e))return!1;return!0}const st=Object.create(null),Qh=Object.create(null),L0=Y.ie&&Y.ie_version<15||Y.ios&&Y.webkit_version<604;function k5(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),z0(n,t.value)},50)}function z0(n,e){let{state:t}=n,i,r=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Ch!=null&&t.selection.ranges.every(a=>a.empty)&&Ch==s.toString()){let a=-1;i=t.changeByRange(c=>{let h=t.doc.lineAt(c.from);if(h.from==a)return{range:c};a=h.from;let u=t.toText((o?s.line(r++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:u},range:N.cursor(c.from+u.length)}})}else o?i=t.changeByRange(a=>{let c=s.line(r++);return{changes:{from:a.from,to:a.to,insert:c.text},range:N.cursor(a.from+c.length)}}):i=t.replaceSelection(s);n.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}st.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():q0.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};st.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};st.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Qh.touchstart=Qh.touchmove={passive:!0};st.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return;let t=null;for(let i of n.state.facet(k0))if(t=i(n,e),t)break;if(!t&&e.button==0&&(t=A5(n,e)),t){let i=n.root.activeElement!=n.contentDOM;i&&n.observer.ignore(()=>f0(n.contentDOM)),n.inputState.startMouseSelection(new w5(n,e,t,i))}};function Fd(n,e,t,i){if(i==1)return N.cursor(e,t);if(i==2)return d5(n.state,e,t);{let r=kt.find(n.docView,e),s=n.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<n.state.doc.length&&l==s.to&&l++,N.range(o,l)}}let W0=(n,e)=>n>=e.top&&n<=e.bottom,Gd=(n,e,t)=>W0(e,t)&&n>=t.left&&n<=t.right;function P5(n,e,t,i){let r=kt.find(n.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Gd(t,i,o))return-1;let l=r.coordsAt(s,1);return l&&Gd(t,i,l)?1:o&&W0(i,o)?-1:1}function Hd(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:P5(n,t,e.clientX,e.clientY)}}const T5=Y.ie&&Y.ie_version<=11;let Yd=null,Kd=0,Jd=0;function j0(n){if(!T5)return n.detail;let e=Yd,t=Jd;return Yd=n,Jd=Date.now(),Kd=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(Kd+1)%3:1}function A5(n,e){let t=Hd(n,e),i=j0(e),r=n.state.selection,s=t,o=e;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),r=r.map(l.changes),o=null)},get(l,a,c){let h;o&&l.clientX==o.clientX&&l.clientY==o.clientY?h=s:(h=s=Hd(n,l),o=l);let u=Fd(n,h.pos,h.bias,i);if(t.pos!=h.pos&&!a){let f=Fd(n,t.pos,t.bias,i),d=Math.min(f.from,u.from),p=Math.max(f.to,u.to);u=d<u.from?N.range(d,p):N.range(p,d)}return a?r.replaceRange(r.main.extend(u.from,u.to)):c&&r.ranges.length>1&&r.ranges.some(f=>f.eq(u))?R5(r,u):c?r.addRange(u):N.create([u])}}}function R5(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return N.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}st.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:i}=n.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function ep(n,e,t,i){if(!t)return;let r=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:s}=n.inputState,o=i&&s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:r,insert:t},a=n.state.changes(o?[o,l]:l);n.focus(),n.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"})}st.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),r=0,s=()=>{++r==t.length&&ep(n,e,i.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(t[o])}}else ep(n,e,e.dataTransfer.getData("Text"),!0)};st.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=L0?null:e.clipboardData;t?(z0(n,t.getData("text/plain")),e.preventDefault()):k5(n)};function E5(n,e){let t=n.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),n.focus()},50)}function _5(n){let e=[],t=[],i=!1;for(let r of n.selection.ranges)r.empty||(e.push(n.sliceDoc(r.from,r.to)),t.push(r));if(!e.length){let r=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>r&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:i}}let Ch=null;st.copy=st.cut=(n,e)=>{let{text:t,ranges:i,linewise:r}=_5(n.state);if(!t&&!r)return;Ch=r?t:null;let s=L0?null:e.clipboardData;s?(e.preventDefault(),s.clearData(),s.setData("text/plain",t)):E5(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})};function F0(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}st.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),F0(n)};st.blur=n=>{n.observer.clearSelectionRange(),F0(n)};st.compositionstart=st.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0)};st.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,Y.chrome&&Y.android&&n.observer.flushSoon(),setTimeout(()=>{n.inputState.composing<0&&n.docView.compositionDeco.size&&n.update([])},50)};st.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};st.beforeinput=(n,e)=>{var t;let i;if(Y.chrome&&Y.android&&(i=Z0.find(r=>r.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const tp=["pre-wrap","normal","pre-line","break-spaces"];class M5{constructor(e){this.lineWrapping=e,this.doc=we.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return tp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(t=!0,this.heightSamples[Math.floor(r*10)]=!0)}return t}refresh(e,t,i,r,s){let o=tp.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.lineLength=r,l){this.heightSamples={};for(let a=0;a<s.length;a++){let c=s[a];c<0?a++:this.heightSamples[Math.floor(c*10)]=!0}}return l}}class D5{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ei{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ei(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Me=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(Me||(Me={}));const Vo=.001;class Pt{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Vo&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Pt.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this;for(let o=r.length-1;o>=0;o--){let{fromA:l,toA:a,fromB:c,toB:h}=r[o],u=s.lineAt(l,Me.ByPosNoHeight,t,0,0),f=u.to>=a?u:s.lineAt(a,Me.ByPosNoHeight,t,0,0);for(h+=f.to-a,a=f.to;o>0&&u.from<=r[o-1].toA;)l=r[o-1].fromA,c=r[o-1].fromB,o--,l<u.from&&(u=s.lineAt(l,Me.ByPosNoHeight,t,0,0));c+=u.from-l,l=u.from;let d=Au.build(i,e,c,h);s=s.replace(l,a,d)}return s.updateHeight(i,0)}static empty(){return new It(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>s*2){let l=e[t-1];l.break?e.splice(--t,1,l.left,null,l.right):e.splice(--t,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[t++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,i++),new N5(Pt.of(e.slice(0,t)),o,Pt.of(e.slice(i)))}}Pt.prototype.size=1;class G0 extends Pt{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,r){return new ei(r,this.length,i,this.height,this.type)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class It extends G0{constructor(e,t){super(e,t,_e.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let r=i[0];return i.length==1&&(r instanceof It||r instanceof lt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof lt?r=new It(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Pt.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class lt extends Pt{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:r,lineHeight:this.height/(r-i+1)}}blockAt(e,t,i,r){let{firstLine:s,lastLine:o,lineHeight:l}=this.lines(t,r),a=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:h}=t.line(s+a);return new ei(c,h,i+l*a,l,_e.Text)}lineAt(e,t,i,r,s){if(t==Me.ByHeight)return this.blockAt(e,i,r,s);if(t==Me.ByPosNoHeight){let{from:u,to:f}=i.lineAt(e);return new ei(u,f-u,0,0,_e.Text)}let{firstLine:o,lineHeight:l}=this.lines(i,s),{from:a,length:c,number:h}=i.lineAt(e);return new ei(a,c,r+l*(h-o),l,_e.Text)}forEachLine(e,t,i,r,s,o){let{firstLine:l,lineHeight:a}=this.lines(i,s);for(let c=Math.max(e,s),h=Math.min(s+this.length,t);c<=h;){let u=i.lineAt(c);c==e&&(r+=a*(u.number-l)),o(new ei(u.from,u.length,r,a,_e.Text)),r+=a,c=u.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let s=i[i.length-1];s instanceof lt?i[i.length-1]=new lt(s.length+r):i.push(null,new lt(r-1))}if(e>0){let s=i[0];s instanceof lt?i[0]=new lt(e+s.length):i.unshift(new lt(e-1),null)}return Pt.of(i)}decomposeLeft(e,t){t.push(new lt(e-1),null)}decomposeRight(e,t){t.push(null,new lt(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let o=[],l=Math.max(t,r.from),a=-1,c=e.heightChanged;for(r.from>t&&o.push(new lt(r.from-t-1).updateHeight(e,t));l<=s&&r.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=Vo&&(a=-2);let d=new It(u,f);d.outdated=!1,o.push(d),l+=u+1}l<=s&&o.push(null,new lt(s-l).updateHeight(e,l));let h=Pt.of(o);return e.heightChanged=c||a<0||Math.abs(h.height-this.height)>=Vo||Math.abs(a-this.lines(e.doc,t).lineHeight)>=Vo,h}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class N5 extends Pt{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=t==Me.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let h=t==Me.ByPosNoHeight?Me.ByPosNoHeight:Me.ByPos;return a?c.join(this.right.lineAt(l,h,i,o,l)):this.left.lineAt(l,h,i,r,s).join(c)}forEachLine(e,t,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,s,o),t>=a&&this.right.forEachLine(e,t,i,l,a,o);else{let c=this.lineAt(a,Me.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,i,l,a,o)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&np(s,o-1),t<this.length){let l=s.length;this.decomposeRight(t,s),np(s,l)}return Pt.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Pt.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:o}=this,l=t+s.length+this.break,a=null;return r&&r.from<=t+s.length&&r.more?a=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function np(n,e){let t,i;n[e]==null&&(t=n[e-1])instanceof lt&&(i=n[e+1])instanceof lt&&n.splice(e-1,3,new lt(t.length+1+i.length))}const B5=5;class Au{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof It?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new It(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new G0(s,r,i.type)):(s||r>=B5)&&this.addLineDeco(r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new It(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new lt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof It)return e;let t=new It(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==_e.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=_e.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof It)&&!this.isCovered?this.nodes.push(new It(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof It&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Au(i,e);return Pe.spans(t,i,r,s,0),s.finish(i)}}function I5(n,e,t){let i=new X5;return Pe.compare(n,e,t,i,0),i.changes}class X5{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&bh(e,t,this.changes,5)}}function U5(n,e){let t=n.getBoundingClientRect(),i=n.ownerDocument,r=i.defaultView||window,s=Math.max(0,t.left),o=Math.min(r.innerWidth,t.right),l=Math.max(0,t.top),a=Math.min(r.innerHeight,t.bottom);for(let c=n.parentNode;c&&c!=i.body;)if(c.nodeType==1){let h=c,u=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&u.overflow!="visible"){let f=h.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=c==n.parentNode?f.bottom:Math.min(a,f.bottom)}c=u.position=="absolute"||u.position=="fixed"?h.offsetParent:h.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:l-(t.top+e),bottom:Math.max(l,a)-(t.top+e)}}function V5(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class nc{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return ne.replace({widget:new Z5(this.size,e)}).range(this.from,this.to)}}class Z5 extends Zn{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ip{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scaler=rp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ze.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Tu).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new M5(t),this.stateDeco=e.facet(Cs).filter(i=>typeof i!="function"),this.heightMap=Pt.empty().applyChanges(this.stateDeco,we.empty,this.heightOracle.setDoc(e.doc),[new Qn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ne.set(this.lineGaps.map(i=>i.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new go(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?rp:new z5(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:ts(e,this.scaler))})}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Cs).filter(c=>typeof c!="function");let r=e.changedRanges,s=Qn.extendWithRanges(r,I5(i,this.stateDeco,e?e.changes:Ye.empty(this.state.doc.length))),o=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let a=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(R0)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ze.RTL:Ze.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=o||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,c=0,h=parseInt(i.paddingTop)||0,u=parseInt(i.paddingBottom)||0;(this.paddingTop!=h||this.paddingBottom!=u)&&(this.paddingTop=h,this.paddingBottom=u,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let f=(this.printing?V5:U5)(t,this.paddingTop),d=f.top-this.pixelViewport.top,p=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let b=t.clientWidth;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=b,this.editorHeight=e.scrollDOM.clientHeight,a|=8),l){let x=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(x)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:w,charWidth:y}=e.docView.measureTextSize();o=w>0&&r.refresh(s,w,y,b/y,x),o&&(e.docView.minWidth=0,a|=8)}d>0&&p>0?c=Math.max(d,p):d<0&&p<0&&(c=Math.min(d,p)),r.heightChanged=!1;for(let w of this.viewports){let y=w.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Pt.empty().applyChanges(this.stateDeco,we.empty,this.heightOracle,[new Qn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new D5(w.from,y))}r.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(a&2||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.state.doc,{visibleTop:o,visibleBottom:l}=this,a=new go(r.lineAt(o-i*1e3,Me.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,Me.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<a.from||c>a.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),u=r.lineAt(c,Me.ByPos,s,0,0),f;t.y=="center"?f=(u.top+u.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&c<a.from?f=u.top:f=u.bottom-h,a=new go(r.lineAt(f-1e3/2,Me.ByHeight,s,0,0).from,r.lineAt(f+h+1e3/2,Me.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new go(this.heightMap.lineAt(i,Me.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,Me.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Me.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,Me.ByPos,this.state.doc,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new nc(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ze.LTR&&!i)return[];let l=[],a=(c,h,u,f)=>{if(h-c<s)return;let d=this.state.selection.main,p=[d.from];d.empty||p.push(d.to);for(let b of p)if(b>c&&b<h){a(c,b-10,u,f),a(b+10,h,u,f);return}let m=L5(e,b=>b.from>=u.from&&b.to<=u.to&&Math.abs(b.from-c)<s&&Math.abs(b.to-h)<s&&!p.some(g=>b.from<g&&b.to>g));if(!m){if(h<u.to&&t&&i&&t.visibleRanges.some(b=>b.from<=h&&b.to>=h)){let b=t.moveToLineBoundary(N.cursor(h),!1,!0).head;b>c&&(h=b)}m=new nc(c,h,this.gapSize(u,c,h,f))}l.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let h=q5(c.from,c.to,this.stateDeco);if(h.total<o)continue;let u=this.scrollTarget?this.scrollTarget.range.head:null,f,d;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,b;if(u!=null){let g=yo(h,u),x=((this.visibleBottom-this.visibleTop)/2+p)/c.height;m=g-x,b=g+x}else m=(this.visibleTop-c.top-p)/c.height,b=(this.visibleBottom-c.top+p)/c.height;f=Oo(h,m),d=Oo(h,b)}else{let p=h.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,b,g;if(u!=null){let x=yo(h,u),w=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;b=x-w,g=x+w}else b=(this.pixelViewport.left-m)/p,g=(this.pixelViewport.right+m)/p;f=Oo(h,b),d=Oo(h,g)}f>c.from&&a(c.from,f,c,h),d<c.to&&a(d,c.to,c,h)}return l}gapSize(e,t,i,r){let s=yo(r,i)-yo(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){nc.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ne.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Pe.spans(e,this.viewport.from,this.viewport.to,{span(r,s){t.push({from:r,to:s})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=t[s].from||r.to!=t[s].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||ts(this.heightMap.lineAt(e,Me.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return ts(this.heightMap.lineAt(this.scaler.fromDOM(e),Me.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return ts(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class go{constructor(e,t){this.from=e,this.to=t}}function q5(n,e,t){let i=[],r=n,s=0;return Pe.spans(t,n,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Oo({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(n*t);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function yo(n,e){let t=0;for(let{from:i,to:r}of n.ranges){if(e<=r){t+=e-i;break}t+=r-i}return t/n.total}function L5(n,e){for(let t of n)if(e(t))return t}const rp={toDOM(n){return n},fromDOM(n){return n},scale:1};class z5{constructor(e,t,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=t.lineAt(l,Me.ByPos,e,0,0).top,h=t.lineAt(a,Me.ByPos,e,0,0).bottom;return r+=h-c,{from:l,to:a,top:c,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(t.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function ts(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),i=e.toDOM(n.bottom);return new ei(n.from,n.length,t,i-t,Array.isArray(n.type)?n.type.map(r=>ts(r,e)):n.type)}const bo=H.define({combine:n=>n.join(" ")}),$h=H.define({combine:n=>n.indexOf(!0)>-1}),kh=li.newName(),H0=li.newName(),Y0=li.newName(),K0={"&light":"."+H0,"&dark":"."+Y0};function Ph(n,e,t){return new li(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return n;if(!t||!t[r])throw new RangeError(`Unsupported selector: ${r}`);return t[r]}):n+" "+i}})}const W5=Ph("."+kh,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},K0);class j5{constructor(e,t,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let l=s||o?[]:G5(e),a=new I0(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=H5(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!xr(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!xr(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset);this.newSel=N.single(c,a)}}}function J0(n,e){let t,{newSel:i}=e,r=n.state.selection.main;if(e.bounds){let{from:s,to:o}=e.bounds,l=r.from,a=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||Y.android&&e.text.length<o-s)&&(l=r.to,a="end");let c=F5(n.state.doc.sliceString(s,o,Jn),e.text,l-s,a);c&&(Y.chrome&&n.inputState.lastKeyCode==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Jn+Jn&&c.toB--,t={from:s+c.from,to:s+c.toA,insert:we.of(e.text.slice(c.from,c.toB).split(Jn))})}else i&&(!n.hasFocus||!n.state.facet(la)||i.main.eq(r))&&(i=null);if(!t&&!i)return!1;if(!t&&e.typeOver&&!r.empty&&i&&i.main.empty?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,r.to)}:t&&t.from>=r.from&&t.to<=r.to&&(t.from!=r.from||t.to!=r.to)&&r.to-r.from-(t.to-t.from)<=4?t={from:r.from,to:r.to,insert:n.state.doc.slice(r.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,r.to))}:(Y.mac||Y.android)&&t&&t.from==t.to&&t.from==r.head-1&&/^\. ?$/.test(t.insert.toString())?(i&&t.insert.length==2&&(i=N.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:we.of([" "])}):Y.chrome&&t&&t.from==t.to&&t.from==r.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(i&&(i=N.single(i.main.anchor-1,i.main.head-1)),t={from:r.from,to:r.to,insert:we.of([" "])}),t){let s=n.state;if(Y.ios&&n.inputState.flushIOSKey(n)||Y.android&&(t.from==r.from&&t.to==r.to&&t.insert.length==1&&t.insert.lines==2&&hr(n.contentDOM,"Enter",13)||t.from==r.from-1&&t.to==r.to&&t.insert.length==0&&hr(n.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&t.insert.length==0&&hr(n.contentDOM,"Delete",46)))return!0;let o=t.insert.toString();if(n.state.facet(T0).some(c=>c(n,t.from,t.to,o)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let l;if(t.from>=r.from&&t.to<=r.to&&t.to-t.from>=(r.to-r.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&n.inputState.composing<0){let c=r.from<t.from?s.sliceDoc(r.from,t.from):"",h=r.to>t.to?s.sliceDoc(t.to,r.to):"";l=s.replaceSelection(n.state.toText(c+t.insert.sliceString(0,void 0,n.state.lineBreak)+h))}else{let c=s.changes(t),h=i&&!s.selection.main.eq(i.main)&&i.main.to<=c.newLength?i.main:void 0;if(s.selection.ranges.length>1&&n.inputState.composing>=0&&t.to<=r.to&&t.to>=r.to-10){let u=n.state.sliceDoc(t.from,t.to),f=X0(n)||n.state.doc.lineAt(r.head),d=r.to-t.to,p=r.to-r.from;l=s.changeByRange(m=>{if(m.from==r.from&&m.to==r.to)return{changes:c,range:h||m.map(c)};let b=m.to-d,g=b-u.length;if(m.to-m.from!=p||n.state.sliceDoc(g,b)!=u||f&&m.to>=f.from&&m.from<=f.to)return{range:m};let x=s.changes({from:g,to:b,insert:t.insert}),w=m.to-r.to;return{changes:x,range:h?N.range(Math.max(0,h.anchor+w),Math.max(0,h.head+w)):m.map(x)}})}else l={changes:c,selection:h&&s.selection.replaceRange(h)}}let a="input.type";return n.composing&&(a+=".compose",n.inputState.compositionFirstChange&&(a+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(l,{scrollIntoView:!0,userEvent:a}),!0}else if(i&&!i.main.eq(r)){let s=!1,o="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(s=!0),o=n.inputState.lastSelectionOrigin),n.dispatch({selection:i,scrollIntoView:s,userEvent:o}),!0}else return!1}function F5(n,e,t,i){let r=Math.min(n.length,e.length),s=0;for(;s<r&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&n.length==e.length)return null;let o=n.length,l=e.length;for(;o>0&&l>0&&n.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));t-=o+a-s}return o<s&&n.length<e.length?(s-=t<=s&&t>=o?s-t:0,l=s+(l-o),o=s):l<s&&(s-=t<=s&&t>=l?s-t:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}function G5(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:r,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new Xd(t,i)),(r!=t||s!=i)&&e.push(new Xd(r,s))),e}function H5(n,e){if(n.length==0)return null;let t=n[0].pos,i=n.length==2?n[1].pos:t;return t>-1&&i>-1?N.single(t+e,i+e):null}const Y5={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ic=Y.ie&&Y.ie_version<=11;class K5{constructor(e){this.view=e,this.active=!1,this.selectionRange=new z2,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.resizeContent=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let i of t)this.queue.push(i);(Y.ie&&Y.ie_version<=11||Y.ios&&e.composing)&&t.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ic&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM),this.resizeContent=new ResizeObserver(()=>this.view.requestMeasure()),this.resizeContent.observe(e.contentDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runScrollHandlers(this.view,e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(la)?i.root.activeElement!=this.dom:!Uo(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Y.ie&&Y.ie_version<=11||Y.android&&Y.chrome)&&!i.state.selection.main.empty&&r.focusNode&&ul(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Y.safari&&e.root.nodeType==11&&Z2(this.dom.ownerDocument)==this.dom&&J5(this.view)||hl(e.root);if(!t||this.selectionRange.eq(t))return!1;let i=Uo(this.dom,t);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&j2(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Y5),ic&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),ic&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),!this.flush()&&s.force&&hr(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);!o||(o.typeOver&&(r=!0),t==-1?{from:t,to:i}=o:(t=Math.min(o.from,t),i=Math.max(o.to,i)))}return{from:t,to:i,typeOver:r}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Uo(this.dom,this.selectionRange);return e<0&&!r?null:(e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1,new j5(this.view,e,t,i))}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return!1;let i=this.view.state,r=J0(this.view,t);return this.view.state==i&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=sp(t,e.previousSibling||e.target.previousSibling,-1),r=sp(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,i,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect(),(r=this.resizeContent)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function sp(n,e,t){for(;e;){let i=De.get(e);if(i&&i.parent==n)return i;let r=e.parentNode;e=r!=n.dom?r:t>0?e.nextSibling:e.previousSibling}return null}function J5(n){let e=null;function t(a){a.preventDefault(),a.stopImmediatePropagation(),e=a.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,l=n.docView.domAtPos(n.state.selection.main.anchor);return ul(l.node,l.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class J{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: fixed; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||W2(e.parent)||document,this.viewState=new ip(e.state||ve.create(e)),this.plugins=this.state.facet(Jr).map(t=>new Ja(t));for(let t of this.plugins)t.update(this);this.observer=new K5(this),this.inputState=new S5(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Ud(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Je?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i=!1,r,s=this.state;for(let c of e){if(c.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=c.state}if(this.destroyed){this.viewState.state=s;return}let o=this.observer.delayedAndroidKey,l=null;if(o?(this.observer.clearDelayedAndroidKey(),l=this.observer.readChange(),(l&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(l=null)):this.observer.clear(),s.facet(ve.phrases)!=this.state.facet(ve.phrases))return this.setState(s);r=pl.create(this,s,e);let a=this.viewState.scrollTarget;try{this.updateState=2;for(let c of e){if(a&&(a=a.map(c.changes)),c.scrollIntoView){let{main:h}=c.state.selection;a=new dl(h.empty?h:N.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of c.effects)h.is(Bd)&&(a=h.value)}this.viewState.update(r,a),this.bidiCache=ml.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),t=this.docView.update(r),this.state.facet(es)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(c=>c.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(bo)!=r.state.facet(bo)&&(this.viewState.mustMeasureContent=!0),(t||i||a||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let c of this.state.facet(xh))c(r);l&&!J0(this,l)&&o.force&&hr(this.contentDOM,o.key,o.keyCode)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new ip(e),this.plugins=e.facet(Jr).map(i=>new Ja(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new Ud(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Jr),i=e.state.facet(Jr);if(t!=i){let r=[];for(let s of i){let o=t.indexOf(s);if(o<0)r.push(new Ja(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:i,scrollTop:r,clientHeight:s}=this.scrollDOM,o=r>i-s-4?i:r;try{for(let l=0;;l++){this.updateState=1;let a=this.viewport,c=this.viewState.lineBlockAtHeight(o),h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];h&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(b=>{try{return b.read(this)}catch(g){return Zt(this.state,g),op}}),d=pl.create(this,this.state,[]),p=!1,m=!1;d.flags|=h,t?t.flags|=h:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d));for(let b=0;b<u.length;b++)if(f[b]!=op)try{let g=u[b];g.write&&g.write(f[b],this)}catch(g){Zt(this.state,g)}if(this.viewState.editorHeight)if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,m=!0;else{let b=this.viewState.lineBlockAt(c.from).top-c.top;(b>1||b<-1)&&(this.scrollDOM.scrollTop+=b,m=!0)}if(p&&this.docView.updateSelection(!0),this.viewport.from==a.from&&this.viewport.to==a.to&&!m&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let l of this.state.facet(xh))l(t)}get themeClasses(){return kh+" "+(this.state.facet($h)?Y0:H0)+" "+this.state.facet(bo)}updateAttrs(){let e=lp(this,E0,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(la)?"true":"false",class:"cm-content",style:`${Y.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),lp(this,Tu,t);let i=this.observer.ignore(()=>{let r=yh(this.contentDOM,this.contentAttrs,t),s=yh(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let r of i.effects)if(r.is(J.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(es),li.mount(this.root,this.styleModules.concat(W5).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return tc(this,e,Wd(this,e,t,i))}moveByGroup(e,t){return tc(this,e,Wd(this,e,t,i=>b5(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return y5(this,e,t,i)}moveVertically(e,t,i){return tc(this,e,x5(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),V0(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[ur.find(s,e-r.from,-1,t)];return Cu(i,o.dir==Ze.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(A0)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>eA)return N0(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let i=r5(e.text,t);return this.bidiCache.push(new ml(e.from,e.to,t,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Y.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{f0(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Bd.of(new dl(typeof e=="number"?N.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return He.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=li.newName(),r=[bo.of(i),es.of(Ph(`.${i}`,e))];return t&&t.dark&&r.push($h.of(!0)),r}static baseTheme(e){return Vi.lowest(es.of(Ph("."+kh,e,K0)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&De.get(i)||De.get(e);return((t=r==null?void 0:r.rootView)===null||t===void 0?void 0:t.view)||null}}J.styleModule=es;J.inputHandler=T0;J.perLineTextDirection=A0;J.exceptionSink=P0;J.updateListener=xh;J.editable=la;J.mouseSelectionStyle=k0;J.dragMovesSelection=$0;J.clickAddsSelectionRange=C0;J.decorations=Cs;J.atomicRanges=_0;J.scrollMargins=M0;J.darkTheme=$h;J.contentAttributes=Tu;J.editorAttributes=E0;J.lineWrapping=J.contentAttributes.of({class:"cm-lineWrapping"});J.announce=ce.define();const eA=4096,op={};class ml{constructor(e,t,i,r){this.from=e,this.to=t,this.dir=i,this.order=r}static update(e,t){if(t.empty)return e;let i=[],r=e.length?e[e.length-1].dir:Ze.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!t.touchesRange(o.from,o.to)&&i.push(new ml(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.order))}return i}}function lp(n,e,t){for(let i=n.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(n):s;o&&Oh(o,t)}return t}const tA=Y.mac?"mac":Y.windows?"win":Y.linux?"linux":"key";function nA(n,e){const t=n.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<t.length-1;++a){const c=t[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function xo(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const iA=Vi.default(J.domEventHandlers({keydown(n,e){return ty(ey(e.state),n,e,"editor")}})),zs=H.define({enables:iA}),ap=new WeakMap;function ey(n){let e=n.facet(zs),t=ap.get(e);return t||ap.set(e,t=oA(e.reduce((i,r)=>i.concat(r),[]))),t}function rA(n,e,t){return ty(ey(n.state),e,n,t)}let Gn=null;const sA=4e3;function oA(n,e=tA){let t=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,c)=>{var h,u;let f=t[o]||(t[o]=Object.create(null)),d=l.split(/ (?!$)/).map(b=>nA(b,e));for(let b=1;b<d.length;b++){let g=d.slice(0,b).join(" ");r(g,!0),f[g]||(f[g]={preventDefault:!0,run:[x=>{let w=Gn={view:x,prefix:g,scope:o};return setTimeout(()=>{Gn==w&&(Gn=null)},sA),!0}]})}let p=d.join(" ");r(p,!1);let m=f[p]||(f[p]={preventDefault:!1,run:((u=(h=f._any)===null||h===void 0?void 0:h.run)===null||u===void 0?void 0:u.slice())||[]});a&&m.run.push(a),c&&(m.preventDefault=!0)};for(let o of n){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let h=t[c]||(t[c]=Object.create(null));h._any||(h._any={preventDefault:!1,run:[]});for(let u in h)h[u].run.push(o.any)}let a=o[e]||o.key;if(!!a)for(let c of l)s(c,a,o.run,o.preventDefault),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault)}return t}function ty(n,e,t,i){let r=V2(e),s=at(r,0),o=Xt(s)==r.length&&r!=" ",l="",a=!1;Gn&&Gn.view==t&&Gn.scope==i&&(l=Gn.prefix+" ",(a=q0.indexOf(e.keyCode)<0)&&(Gn=null));let c=new Set,h=p=>{if(p){for(let m of p.run)if(!c.has(m)&&(c.add(m),m(t,e)))return!0;p.preventDefault&&(a=!0)}return!1},u=n[i],f,d;if(u){if(h(u[l+xo(r,e,!o)]))return!0;if(o&&(e.altKey||e.metaKey||e.ctrlKey)&&(f=ai[e.keyCode])&&f!=r){if(h(u[l+xo(f,e,!0)]))return!0;if(e.shiftKey&&(d=vs[e.keyCode])!=r&&d!=f&&h(u[l+xo(d,e,!1)]))return!0}else if(o&&e.shiftKey&&h(u[l+xo(r,e,!0)]))return!0;if(h(u._any))return!0}return a}class Ws{constructor(e,t,i,r,s){this.className=e,this.left=t,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=ny(e);return[new Ws(t,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return lA(e,t,i)}}function ny(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ze.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function cp(n,e,t){let i=N.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(i,!0,!0).from),type:_e.Text}}function hp(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==_e.Text))return i}return t}function lA(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let i=Math.max(t.from,n.viewport.from),r=Math.min(t.to,n.viewport.to),s=n.textDirection==Ze.LTR,o=n.contentDOM,l=o.getBoundingClientRect(),a=ny(n),c=window.getComputedStyle(o.firstChild),h=l.left+parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)),u=l.right-parseInt(c.paddingRight),f=hp(n,i),d=hp(n,r),p=f.type==_e.Text?f:null,m=d.type==_e.Text?d:null;if(n.lineWrapping&&(p&&(p=cp(n,i,p)),m&&(m=cp(n,r,m))),p&&m&&p.from==m.from)return g(x(t.from,t.to,p));{let y=p?x(t.from,null,p):w(f,!1),v=m?x(null,t.to,m):w(d,!0),C=[];return(p||f).to<(m||d).from-1?C.push(b(h,y.bottom,u,v.top)):y.bottom<v.top&&n.elementAtHeight((y.bottom+v.top)/2).type==_e.Text&&(y.bottom=v.top=(y.bottom+v.top)/2),g(y).concat(C).concat(g(v))}function b(y,v,C,$){return new Ws(e,y-a.left,v-a.top-.01,C-y,$-v+.01)}function g({top:y,bottom:v,horizontal:C}){let $=[];for(let E=0;E<C.length;E+=2)$.push(b(C[E],y,C[E+1],v));return $}function x(y,v,C){let $=1e9,E=-1e9,_=[];function A(W,Q,T,P,B){let M=n.coordsAtPos(W,W==C.to?-2:2),X=n.coordsAtPos(T,T==C.from?2:-2);$=Math.min(M.top,X.top,$),E=Math.max(M.bottom,X.bottom,E),B==Ze.LTR?_.push(s&&Q?h:M.left,s&&P?u:X.right):_.push(!s&&P?h:X.left,!s&&Q?u:M.right)}let U=y!=null?y:C.from,j=v!=null?v:C.to;for(let W of n.visibleRanges)if(W.to>U&&W.from<j)for(let Q=Math.max(W.from,U),T=Math.min(W.to,j);;){let P=n.state.doc.lineAt(Q);for(let B of n.bidiSpans(P)){let M=B.from+P.from,X=B.to+P.from;if(M>=T)break;X>Q&&A(Math.max(M,Q),y==null&&M<=U,Math.min(X,T),v==null&&X>=j,B.dir)}if(Q=P.to+1,Q>=T)break}return _.length==0&&A(U,y==null,j,v==null,n.textDirection),{top:$,bottom:E,horizontal:_}}function w(y,v){let C=l.top+(v?y.top:y.bottom);return{top:C,bottom:C,horizontal:[]}}}function aA(n,e){return n.constructor==e.constructor&&n.eq(e)}class cA{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Zo)!=e.state.facet(Zo)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&e.view.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(Zo);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}draw(e){if(e.length!=this.drawn.length||e.some((t,i)=>!aA(t,this.drawn[i]))){let t=this.dom.firstChild,i=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[i].constructor&&r.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(r.draw(),t);for(;t;){let r=t.nextSibling;t.remove(),t=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Zo=H.define();function iy(n){return[He.define(e=>new cA(e,n)),Zo.of(n)]}const ry=!Y.ios,$s=H.define({combine(n){return En(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function hA(n={}){return[$s.of(n),uA,fA,dA,R0.of(!0)]}function sy(n){return n.startState.facet($s)!=n.startState.facet($s)}const uA=iy({above:!0,markers(n){let{state:e}=n,t=e.facet($s),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||ry:t.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:N.cursor(r.head,r.head>r.anchor?-1:1);for(let a of Ws.forRange(n,o,l))i.push(a)}}return i},update(n,e){n.transactions.some(i=>i.scrollIntoView)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=sy(n);return t&&up(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){up(e.state,n)},class:"cm-cursorLayer"});function up(n,e){e.style.animationDuration=n.facet($s).cursorBlinkRate+"ms"}const fA=iy({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:Ws.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||sy(n)},class:"cm-selectionLayer"}),oy={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};ry&&(oy[".cm-line"].caretColor="transparent !important");const dA=Vi.highest(J.theme(oy)),ly=ce.define({map(n,e){return n==null?null:e.mapPos(n)}}),ns=ot.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,i)=>i.is(ly)?i.value:t,n)}}),pA=He.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(ns);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(ns)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(ns),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(ns)!=n&&this.view.dispatch({effects:ly.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function mA(){return[ns,pA]}function fp(n,e,t,i,r){e.lastIndex=0;for(let s=n.iterRange(t,i),o=t,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function gA(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let i=[];for(let{from:r,to:s}of t)r=Math.max(n.state.doc.lineAt(r).from,r-e),s=Math.min(n.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class OA{constructor(e){const{regexp:t,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(l,a,c,h)=>r(h,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,h)=>{let u=i(l,a,c);u&&h(c,c+l[0].length,u)};else if(i)this.addMatch=(l,a,c,h)=>h(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let t=new oi,i=t.add.bind(t);for(let{from:r,to:s}of gA(e,this.maxLength))fp(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return t.finish()}updateDeco(e,t){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),i,r):t}updateRange(e,t,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,h=Math.max(s.from,a.from),u=Math.min(s.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){h=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){u=l;break}}let f=[],d,p=(m,b,g)=>f.push(g.range(m,b));if(a==c)for(this.regexp.lastIndex=h-a.from;(d=this.regexp.exec(a.text))&&d.index<u-a.from;)this.addMatch(d,e,d.index+a.from,p);else fp(e.state.doc,this.regexp,h,u,(m,b)=>this.addMatch(b,e,m,p));t=t.update({filterFrom:h,filterTo:u,filter:(m,b)=>m<h||b>u,add:f})}}return t}}const Th=/x/.unicode!=null?"gu":"g",yA=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Th),bA={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let rc=null;function xA(){var n;if(rc==null&&typeof document<"u"&&document.body){let e=document.body.style;rc=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return rc||!1}const qo=H.define({combine(n){let e=En(n,{render:null,specialChars:yA,addSpecialChars:null});return(e.replaceTabs=!xA())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Th)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Th)),e}});function SA(n={}){return[qo.of(n),vA()]}let dp=null;function vA(){return dp||(dp=He.fromClass(class{constructor(n){this.view=n,this.decorations=ne.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(qo)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new OA({regexp:n.specialChars,decoration:(e,t,i)=>{let{doc:r}=t.state,s=at(e[0],0);if(s==9){let o=r.lineAt(i),l=t.state.tabSize,a=qs(o.text,l,i-o.from);return ne.replace({widget:new $A((l-a%l)*this.view.defaultCharacterWidth)})}return this.decorationCache[s]||(this.decorationCache[s]=ne.replace({widget:new CA(n,s)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(qo);n.startState.facet(qo)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const wA="\u2022";function QA(n){return n>=32?wA:n==10?"\u2424":String.fromCharCode(9216+n)}class CA extends Zn{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=QA(this.code),i=e.state.phrase("Control character")+" "+(bA[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,t);if(r)return r;let s=document.createElement("span");return s.textContent=t,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class $A extends Zn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function kA(){return TA}const PA=ne.line({class:"cm-activeLine"}),TA=He.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let i of n.state.selection.ranges){let r=n.lineBlockAt(i.head);r.from>e&&(t.push(PA.range(r.from)),e=r.from)}return ne.set(t)}},{decorations:n=>n.decorations}),Ah=2e3;function AA(n,e,t){let i=Math.min(e.line,t.line),r=Math.max(e.line,t.line),s=[];if(e.off>Ah||t.off>Ah||e.col<0||t.col<0){let o=Math.min(e.off,t.off),l=Math.max(e.off,t.off);for(let a=i;a<=r;a++){let c=n.doc.line(a);c.length<=l&&s.push(N.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,t.col),l=Math.max(e.col,t.col);for(let a=i;a<=r;a++){let c=n.doc.line(a),h=ch(c.text,o,n.tabSize,!0);if(h<0)s.push(N.cursor(c.to));else{let u=ch(c.text,l,n.tabSize);s.push(N.range(c.from+h,c.from+u))}}}return s}function RA(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function pp(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),i=n.state.doc.lineAt(t),r=t-i.from,s=r>Ah?-1:r==i.length?RA(n,e.clientX):qs(i.text,n.state.tabSize,t-i.from);return{line:i.number,col:s,off:r}}function EA(n,e){let t=pp(n,e),i=n.state.selection;return t?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(t.line).from),o=r.state.doc.lineAt(s);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let l=pp(n,r);if(!l)return i;let a=AA(n.state,t,l);return a.length?o?N.create(a.concat(i.ranges)):N.create(a):i}}:null}function _A(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return J.mouseSelectionStyle.of((t,i)=>e(i)?EA(t,i):null)}const MA={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},DA={style:"cursor: crosshair"};function NA(n={}){let[e,t]=MA[n.key||"Alt"],i=He.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventHandlers:{keydown(r){this.set(r.keyCode==e||t(r))},keyup(r){(r.keyCode==e||!t(r))&&this.set(!1)},mousemove(r){this.set(t(r))}}});return[i,J.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?DA:null})]}const So="-10000px";class ay{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e){var t;let i=e.state.facet(this.facet),r=i.filter(o=>o);if(i===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let s=[];for(let o=0;o<r.length;o++){let l=r[o],a=-1;if(!!l){for(let c=0;c<this.tooltips.length;c++){let h=this.tooltips[c];h&&h.create==l.create&&(a=c)}if(a<0)s[o]=this.createTooltipView(l);else{let c=s[o]=this.tooltipViews[a];c.update&&c.update(e)}}}for(let o of this.tooltipViews)s.indexOf(o)<0&&(o.dom.remove(),(t=o.destroy)===null||t===void 0||t.call(o));return this.input=i,this.tooltips=r,this.tooltipViews=s,!0}}function BA(n){let{win:e}=n;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const sc=H.define({combine:n=>{var e,t,i;return{position:Y.ios?"absolute":((e=n.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(r=>r.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((i=n.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||BA}}}),cy=He.fromClass(class{constructor(n){this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(sc);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new ay(n,Ru,t=>this.createTooltip(t)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,i=n.state.facet(sc);if(i.position!=this.position){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;t=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=So,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),(n=t.destroy)===null||n===void 0||n.call(t);(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(sc).tooltipSpace(this.view)}}writeMeasure(n){let{editor:e,space:t}=n,i=[];for(let r=0;r<this.manager.tooltips.length;r++){let s=this.manager.tooltips[r],o=this.manager.tooltipViews[r],{dom:l}=o,a=n.pos[r],c=n.size[r];if(!a||a.bottom<=Math.max(e.top,t.top)||a.top>=Math.min(e.bottom,t.bottom)||a.right<Math.max(e.left,t.left)-.1||a.left>Math.min(e.right,t.right)+.1){l.style.top=So;continue}let h=s.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,u=h?7:0,f=c.right-c.left,d=c.bottom-c.top,p=o.offset||XA,m=this.view.textDirection==Ze.LTR,b=c.width>t.right-t.left?m?t.left:t.right-c.width:m?Math.min(a.left-(h?14:0)+p.x,t.right-f):Math.max(t.left,a.left-f+(h?14:0)-p.x),g=!!s.above;!s.strictSide&&(g?a.top-(c.bottom-c.top)-p.y<t.top:a.bottom+(c.bottom-c.top)+p.y>t.bottom)&&g==t.bottom-a.bottom>a.top-t.top&&(g=!g);let x=(g?a.top-t.top:t.bottom-a.bottom)-u;if(x<d&&o.resize!==!1){if(x<this.view.defaultLineHeight){l.style.top=So;continue}l.style.height=(d=x)+"px"}else l.style.height&&(l.style.height="");let w=g?a.top-d-u-p.y:a.bottom+u+p.y,y=b+f;if(o.overlap!==!0)for(let v of i)v.left<y&&v.right>b&&v.top<w+d&&v.bottom>w&&(w=g?v.top-d-2-u:v.bottom+u+2);this.position=="absolute"?(l.style.top=w-n.parent.top+"px",l.style.left=b-n.parent.left+"px"):(l.style.top=w+"px",l.style.left=b+"px"),h&&(h.style.left=`${a.left+(m?p.x:-p.x)-(b+14-7)}px`),o.overlap!==!0&&i.push({left:b,top:w,right:y,bottom:w+d}),l.classList.toggle("cm-tooltip-above",g),l.classList.toggle("cm-tooltip-below",!g),o.positioned&&o.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=So}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),IA=J.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),XA={x:0,y:0},Ru=H.define({enables:[cy,IA]}),gl=H.define();class Eu{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ay(e,gl,t=>this.createHostedView(t))}static create(e){return new Eu(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}}const UA=Ru.compute([gl],n=>{let e=n.facet(gl).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:Eu.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class VA{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let i=this.view.coordsAtPos(t);if(i==null||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(l=>l.from<=t&&l.to>=t),s=r&&r.dir==Ze.RTL?-1:1,o=this.source(this.view,t,e.x<i.left?-s:s);if(o!=null&&o.then){let l=this.pending={pos:t};o.then(a=>{this.pending==l&&(this.pending=null,a&&this.view.dispatch({effects:this.setHover.of(a)}))},a=>Zt(this.view.state,a,"hover tooltip"))}else o&&this.view.dispatch({effects:this.setHover.of(o)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!mp(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=(t=i==null?void 0:i.end)!==null&&t!==void 0?t:r;(r==s?this.view.posAtCoords(this.lastMove)!=r:!ZA(this.view,r,s,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&!mp(e.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function mp(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function ZA(n,e,t,i,r,s){let o=document.createRange(),l=n.domAtPos(e),a=n.domAtPos(t);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let c=o.getClientRects();o.detach();for(let h=0;h<c.length;h++){let u=c[h];if(Math.max(u.top-r,r-u.bottom,u.left-i,i-u.right)<=s)return!0}return!1}function qA(n,e={}){let t=ce.define(),i=ot.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,ft.TrackDel);if(o==null)return null;let l=Object.assign(Object.create(null),r);l.pos=o,r.end!=null&&(l.end=s.changes.mapPos(r.end)),r=l}for(let o of s.effects)o.is(t)&&(r=o.value),o.is(zA)&&(r=null);return r},provide:r=>gl.from(r)});return[i,He.define(r=>new VA(r,n,i,t,e.hoverTime||300)),UA]}function LA(n,e){let t=n.plugin(cy);if(!t)return null;let i=t.manager.tooltips.indexOf(e);return i<0?null:t.manager.tooltipViews[i]}const zA=ce.define(),gp=H.define({combine(n){let e,t;for(let i of n)e=e||i.topContainer,t=t||i.bottomContainer;return{topContainer:e,bottomContainer:t}}});function ks(n,e){let t=n.plugin(hy),i=t?t.specs.indexOf(e):-1;return i>-1?t.panels[i]:null}const hy=He.fromClass(class{constructor(n){this.input=n.state.facet(Ps),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(gp);this.top=new vo(n,!0,e.topContainer),this.bottom=new vo(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(gp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new vo(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new vo(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Ps);if(t!=this.input){let i=t.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),h;c<0?(h=a(n.view),l.push(h)):(h=this.panels[c],h.update&&h.update(n)),r.push(h),(h.top?s:o).push(h)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class vo{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Op(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Op(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Op(n){let e=n.nextSibling;return n.remove(),e}const Ps=H.define({enables:hy});class Vn extends Di{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Vn.prototype.elementClass="";Vn.prototype.toDOM=void 0;Vn.prototype.mapMode=ft.TrackBefore;Vn.prototype.startSide=Vn.prototype.endSide=-1;Vn.prototype.point=!0;const Lo=H.define(),WA={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Pe.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},as=H.define();function jA(n){return[uy(),as.of(Object.assign(Object.assign({},WA),n))]}const Rh=H.define({combine:n=>n.some(e=>e)});function uy(n){let e=[FA];return n&&n.fixed===!1&&e.push(Rh.of(!0)),e}const FA=He.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(as).map(e=>new bp(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Rh),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,i=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(i<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Rh)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Pe.iter(this.view.state.facet(Lo),this.view.viewport.from),i=[],r=this.gutters.map(s=>new GA(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks){let o;if(Array.isArray(s.type)){for(let l of s.type)if(l.type==_e.Text){o=l;break}}else o=s.type==_e.Text?s:void 0;if(!!o){i.length&&(i=[]),fy(t,i,s.from);for(let l of r)l.line(this.view,o,i)}}for(let s of r)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(as),t=n.state.facet(as),i=n.docChanged||n.heightChanged||n.viewportChanged||!Pe.eq(n.startState.facet(Lo),n.state.facet(Lo),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let r of this.gutters)r.update(n)&&(i=!0);else{i=!0;let r=[];for(let s of t){let o=e.indexOf(s);o<0?r.push(new bp(this.view,s)):(this.gutters[o].update(n),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>J.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==Ze.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function yp(n){return Array.isArray(n)?n:[n]}function fy(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class GA{constructor(e,t,i){this.gutter=e,this.height=i,this.localMarkers=[],this.i=0,this.cursor=Pe.iter(e.markers,t.from)}line(e,t,i){this.localMarkers.length&&(this.localMarkers=[]),fy(this.cursor,this.localMarkers,t.from);let r=i.length?this.localMarkers.concat(i):this.localMarkers,s=this.gutter.config.lineMarker(e,t,r);s&&r.unshift(s);let o=this.gutter;if(r.length==0&&!o.config.renderEmptyElements)return;let l=t.top-this.height;if(this.i==o.elements.length){let a=new dy(e,t.height,l,r);o.elements.push(a),o.dom.appendChild(a.dom)}else o.elements[this.i].update(e,t.height,l,r);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class bp{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,r=>{let s=e.lineBlockAtHeight(r.clientY-e.documentTop);t.domEventHandlers[i](e,s,r)&&r.preventDefault()});this.markers=yp(t.markers(e)),t.initialSpacer&&(this.spacer=new dy(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=yp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Pe.eq(this.markers,t,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class dy{constructor(e,t,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,r)}update(e,t,i,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),HA(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<t.length?t[s++]:null,c=!1;if(a){let h=a.elementClass;h&&(i+=" "+h);for(let u=o;u<this.markers.length;u++)if(this.markers[u].compare(a)){l=u,c=!0;break}}else l=this.markers.length;for(;o<l;){let h=this.markers[o++];if(h.toDOM){h.destroy(r);let u=r.nextSibling;r.remove(),r=u}}if(!a)break;a.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}function HA(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const YA=H.define(),Ji=H.define({combine(n){return En(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let r in t){let s=i[r],o=t[r];i[r]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return i}})}});class oc extends Vn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lc(n,e){return n.state.facet(Ji).formatNumber(e,n.state)}const KA=as.compute([Ji],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(YA)},lineMarker(e,t,i){return i.some(r=>r.toDOM)?null:new oc(lc(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(Ji)!=e.state.facet(Ji),initialSpacer(e){return new oc(lc(e,xp(e.state.doc.lines)))},updateSpacer(e,t){let i=lc(t.view,xp(t.view.state.doc.lines));return i==e.number?e:new oc(i)},domEventHandlers:n.facet(Ji).domEventHandlers}));function JA(n={}){return[Ji.of(n),uy(),KA]}function xp(n){let e=9;for(;e<n;)e=e*10+9;return e}const eR=new class extends Vn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},tR=Lo.compute(["selection"],n=>{let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.head).from;r>t&&(t=r,e.push(eR.range(r)))}return Pe.of(e)});function nR(){return tR}const py=1024;let iR=0;class ac{constructor(e,t){this.from=e,this.to=t}}class ye{constructor(e={}){this.id=iR++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=_t.match(e)),t=>{let i=e(t);return i===void 0?null:[this,i]}}}ye.closedBy=new ye({deserialize:n=>n.split(" ")});ye.openedBy=new ye({deserialize:n=>n.split(" ")});ye.group=new ye({deserialize:n=>n.split(" ")});ye.contextHash=new ye({perNode:!0});ye.lookAhead=new ye({perNode:!0});ye.mounted=new ye({perNode:!0});const rR=Object.create(null);class _t{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):rR,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new _t(e.name||"",t,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ye.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return i=>{for(let r=i.prop(ye.group),s=-1;s<(r?r.length:0);s++){let o=t[s<0?i.name:r[s]];if(o)return o}}}}_t.none=new _t("",Object.create(null),0,8);class _u{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}t.push(r?new _t(i.name,r,i.id,i.flags):i)}return new _u(t)}}const wo=new WeakMap,Sp=new WeakMap;var rt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(rt||(rt={}));class Ge{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=this.prop(ye.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let r=i.toString();r&&(t&&(t+=","),t+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new bl(this.topNode,e)}cursorAt(e,t=0,i=0){let r=wo.get(this)||this.topNode,s=new bl(r);return s.moveTo(e,t),wo.set(this,s._tree),s}get topNode(){return new an(this,0,0,null)}resolve(e,t=0){let i=wr(wo.get(this)||this.topNode,e,t,!1);return wo.set(this,i),i}resolveInner(e,t=0){let i=wr(Sp.get(this)||this.topNode,e,t,!0);return Sp.set(this,i),i}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e;for(let o=this.cursor((e.mode||0)|rt.IncludeAnonymous);;){let l=!1;if(o.from<=s&&o.to>=r&&(o.type.isAnonymous||t(o)!==!1)){if(o.firstChild())continue;l=!0}for(;l&&i&&!o.type.isAnonymous&&i(o),!o.nextSibling();){if(!o.parent())return;l=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Nu(_t.none,this.children,this.positions,0,this.children.length,0,this.length,(t,i,r)=>new Ge(this.type,t,i,r,this.propValues),e.makeTree||((t,i,r)=>new Ge(_t.none,t,i,r)))}static build(e){return oR(e)}}Ge.empty=new Ge(_t.none,[],[],0);class Mu{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Mu(this.buffer,this.index)}}class Zi{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return _t.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=t&&!(my(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,t,i){let r=this.buffer,s=new Uint16Array(t-e),o=0;for(let l=e,a=0;l<t;){s[a++]=r[l++],s[a++]=r[l++]-i;let c=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,c)}return new Zi(s,o,this.set)}}function my(n,e,t,i){switch(n){case-2:return t<e;case-1:return i>=e&&t<e;case 0:return t<e&&i>e;case 1:return t<=e&&i>e;case 2:return i>e;case 4:return!0}}function gy(n,e){let t=n.childBefore(e);for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}function wr(n,e,t,i){for(var r;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!i&&n instanceof an&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=i?0:rt.IgnoreOverlays;if(i)for(let o=n,l=o.parent;l;o=l,l=o.parent)o instanceof an&&o.index<0&&((r=l.enter(e,t,s))===null||r===void 0?void 0:r.from)!=o.from&&(n=l);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}class an{constructor(e,t,i,r){this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=t>0?l.length:-1;e!=c;e+=t){let h=l[e],u=a[e]+o.from;if(!!my(r,i,u,u+h.length)){if(h instanceof Zi){if(s&rt.ExcludeBuffers)continue;let f=h.findChild(0,h.buffer.length,t,i-u,r);if(f>-1)return new yn(new sR(o,h,e,u),null,f)}else if(s&rt.IncludeAnonymous||!h.type.isAnonymous||Du(h)){let f;if(!(s&rt.IgnoreMounts)&&h.props&&(f=h.prop(ye.mounted))&&!f.overlay)return new an(f.tree,u,e,o);let d=new an(h,u,e,o);return s&rt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(t<0?h.children.length-1:0,t,i,r)}}}if(s&rt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&rt.IgnoreOverlays)&&(r=this._tree.prop(ye.mounted))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((t>0?o<=s:o<s)&&(t<0?l>=s:l>s))return new an(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new bl(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return wr(this,e,t,!1)}resolveInner(e,t=0){return wr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return gy(this,e)}getChild(e,t=null,i=null){let r=Ol(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return Ol(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return yl(this,e)}}function Ol(n,e,t,i){let r=n.cursor(),s=[];if(!r.firstChild())return s;if(t!=null){for(;!r.type.is(t);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function yl(n,e,t=e.length-1){for(let i=n.parent;t>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[t]&&e[t]!=i.name)return!1;t--}}return!0}class sR{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class yn{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new yn(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&rt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new yn(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new yn(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new yn(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new bl(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),t.push(0)}return new Ge(this.type,e,t,this.to-this.from)}resolve(e,t=0){return wr(this,e,t,!1)}resolveInner(e,t=0){return wr(this,e,t,!0)}enterUnfinishedNodesBefore(e){return gy(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let r=Ol(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return Ol(this,e,t,i)}get node(){return this}matchContext(e){return yl(this,e)}}class bl{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof an)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof an?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?i&rt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&rt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&rt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(t.findChild(r,this.index,-1,0,4))}else{let r=t.buffer[this.index+3];if(r<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;{index:t,_parent:i}=i)if(t>-1)for(let s=t+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&rt.IncludeAnonymous||l instanceof Zi||!l.type.isAnonymous||Du(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer){e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,i=s+1;break e}r=this.stack[--s]}}for(let r=i;r<this.stack.length;r++)t=new yn(this.buffer,t,this.stack[r]);return this.bufferNode=new yn(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return yl(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return yl(this.node,e,r);let o=i[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Du(n){return n.children.some(e=>e instanceof Zi||!e.type.isAnonymous||Du(e))}function oR(n){var e;let{buffer:t,nodeSet:i,maxBufferLength:r=py,reused:s=[],minRepeatType:o=i.types.length}=n,l=Array.isArray(t)?new Mu(t,t.length):t,a=i.types,c=0,h=0;function u(y,v,C,$,E){let{id:_,start:A,end:U,size:j}=l,W=h;for(;j<0;)if(l.next(),j==-1){let M=s[_];C.push(M),$.push(A-y);return}else if(j==-3){c=_;return}else if(j==-4){h=_;return}else throw new RangeError(`Unrecognized record size: ${j}`);let Q=a[_],T,P,B=A-y;if(U-A<=r&&(P=m(l.pos-v,E))){let M=new Uint16Array(P.size-P.skip),X=l.pos-P.size,V=M.length;for(;l.pos>X;)V=b(P.start,M,V);T=new Zi(M,U-P.start,i),B=P.start-y}else{let M=l.pos-j;l.next();let X=[],V=[],z=_>=o?_:-1,se=0,de=U;for(;l.pos>M;)z>=0&&l.id==z&&l.size>=0?(l.end<=de-r&&(d(X,V,A,se,l.end,de,z,W),se=X.length,de=l.end),l.next()):u(A,M,X,V,z);if(z>=0&&se>0&&se<X.length&&d(X,V,A,se,A,de,z,W),X.reverse(),V.reverse(),z>-1&&se>0){let ae=f(Q);T=Nu(Q,X,V,0,X.length,0,U-A,ae,ae)}else T=p(Q,X,V,U-A,W-U)}C.push(T),$.push(B)}function f(y){return(v,C,$)=>{let E=0,_=v.length-1,A,U;if(_>=0&&(A=v[_])instanceof Ge){if(!_&&A.type==y&&A.length==$)return A;(U=A.prop(ye.lookAhead))&&(E=C[_]+A.length+U)}return p(y,v,C,$,E)}}function d(y,v,C,$,E,_,A,U){let j=[],W=[];for(;y.length>$;)j.push(y.pop()),W.push(v.pop()+C-E);y.push(p(i.types[A],j,W,_-E,U-_)),v.push(E-C)}function p(y,v,C,$,E=0,_){if(c){let A=[ye.contextHash,c];_=_?[A].concat(_):[A]}if(E>25){let A=[ye.lookAhead,E];_=_?[A].concat(_):[A]}return new Ge(y,v,C,$,_)}function m(y,v){let C=l.fork(),$=0,E=0,_=0,A=C.end-r,U={size:0,start:0,skip:0};e:for(let j=C.pos-y;C.pos>j;){let W=C.size;if(C.id==v&&W>=0){U.size=$,U.start=E,U.skip=_,_+=4,$+=4,C.next();continue}let Q=C.pos-W;if(W<0||Q<j||C.start<A)break;let T=C.id>=o?4:0,P=C.start;for(C.next();C.pos>Q;){if(C.size<0)if(C.size==-3)T+=4;else break e;else C.id>=o&&(T+=4);C.next()}E=P,$+=W,_+=T}return(v<0||$==y)&&(U.size=$,U.start=E,U.skip=_),U.size>4?U:void 0}function b(y,v,C){let{id:$,start:E,end:_,size:A}=l;if(l.next(),A>=0&&$<o){let U=C;if(A>4){let j=l.pos-(A-4);for(;l.pos>j;)C=b(y,v,C)}v[--C]=U,v[--C]=_-y,v[--C]=E-y,v[--C]=$}else A==-3?c=$:A==-4&&(h=$);return C}let g=[],x=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,g,x,-1);let w=(e=n.length)!==null&&e!==void 0?e:g.length?x[0]+g[0].length:0;return new Ge(a[n.topID],g.reverse(),x.reverse(),w)}const vp=new WeakMap;function zo(n,e){if(!n.isAnonymous||e instanceof Zi||e.type!=n)return 1;let t=vp.get(e);if(t==null){t=1;for(let i of e.children){if(i.type!=n||!(i instanceof Ge)){t=1;break}t+=zo(n,i)}vp.set(e,t)}return t}function Nu(n,e,t,i,r,s,o,l,a){let c=0;for(let p=i;p<r;p++)c+=zo(n,e[p]);let h=Math.ceil(c*1.5/8),u=[],f=[];function d(p,m,b,g,x){for(let w=b;w<g;){let y=w,v=m[w],C=zo(n,p[w]);for(w++;w<g;w++){let $=zo(n,p[w]);if(C+$>=h)break;C+=$}if(w==y+1){if(C>h){let $=p[y];d($.children,$.positions,0,$.children.length,m[y]+x);continue}u.push(p[y])}else{let $=m[w-1]+p[w-1].length-v;u.push(Nu(n,p,m,y,w,v,$,null,a))}f.push(v+x-s)}}return d(e,t,i,r,0),(l||a)(u,f,o)}class lR{constructor(){this.map=new WeakMap}setBuffer(e,t,i){let r=this.map.get(e);r||this.map.set(e,r=new Map),r.set(t,i)}getBuffer(e,t){let i=this.map.get(e);return i&&i.get(t)}set(e,t){e instanceof yn?this.setBuffer(e.context.buffer,e.index,t):e instanceof an&&this.map.set(e.tree,t)}get(e){return e instanceof yn?this.getBuffer(e.context.buffer,e.index):e instanceof an?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Ei{constructor(e,t,i,r,s=!1,o=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],i=!1){let r=[new Ei(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let h=l<t.length?t[l]:null,u=h?h.fromA:1e9;if(u-a>=i)for(;o&&o.from<u;){let f=o;if(a>=f.from||u<=f.to||c){let d=Math.max(f.from,a)-c,p=Math.min(f.to,u)-c;f=d>=p?null:new Ei(d,p,f.tree,f.offset+c,l>0,!!h)}if(f&&r.push(f),o.to>u)break;o=s<e.length?e[s++]:null}if(!h)break;a=h.toA,c=h.toA-h.toB}return r}}class Oy{startParse(e,t,i){return typeof e=="string"&&(e=new aR(e)),i=i?i.length?i.map(r=>new ac(r.from,r.to)):[new ac(0,0)]:[new ac(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let s=r.advance();if(s)return s}}}class aR{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ye({perNode:!0});let cR=0;class gn{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=cR++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new gn([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new xl;return t=>t.modified.indexOf(e)>-1?t:xl.get(t.base||t,t.modified.concat(e).sort((i,r)=>i.id-r.id))}}let hR=0;class xl{constructor(){this.instances=[],this.id=hR++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find(l=>l.base==e&&uR(t,l.modified));if(i)return i;let r=[],s=new gn(r,e,t);for(let l of t)l.instances.push(s);let o=fR(t);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(xl.get(l,a));return s}}function uR(n,e){return n.length==e.length&&n.every((t,i)=>t==e[i])}function fR(n){let e=[[]];for(let t=0;t<n.length;t++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(n[t]));return e.sort((t,i)=>i.length-t.length)}function yy(n){let e=Object.create(null);for(let t in n){let i=n[t];Array.isArray(i)||(i=[i]);for(let r of t.split(" "))if(r){let s=[],o=2,l=r;for(let u=0;;){if(l=="..."&&u>0&&u+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),u+=f[0].length,u==r.length)break;let d=r[u++];if(u==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(u)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+r);let h=new Sl(i,o,a>0?s.slice(0,a):null);e[c]=h.sort(e[c])}}return by.add(e)}const by=new ye;class Sl{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Sl.empty=new Sl([],2,null);function xy(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let c=t[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function dR(n,e){let t=null;for(let i of n){let r=i.style(e);r&&(t=t?t+" "+r:r)}return t}function pR(n,e,t,i=0,r=n.length){let s=new mR(i,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),i,r,"",s.highlighters),s.flush(r)}class mR{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=t)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=r,h=gR(e)||Sl.empty,u=dR(s,h.tags);if(u&&(c&&(c+=" "),c+=u,h.mode==1&&(r+=(r?" ":"")+u)),this.startSpan(e.from,c),h.opaque)return;let f=e.tree&&e.tree.prop(ye.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),p=this.highlighters.filter(b=>!b.scope||b.scope(f.tree.type)),m=e.firstChild();for(let b=0,g=l;;b++){let x=b<f.overlay.length?f.overlay[b]:null,w=x?x.from+l:a,y=Math.max(t,g),v=Math.min(i,w);if(y<v&&m)for(;e.from<v&&(this.highlightRange(e,y,v,r,s),this.startSpan(Math.min(v,e.to),c),!(e.to>=w||!e.nextSibling())););if(!x||w>i)break;g=x.to+l,g>t&&(this.highlightRange(d.cursor(),Math.max(t,x.from+l),Math.min(i,g),r,p),this.startSpan(g,c))}m&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function gR(n){let e=n.type.prop(by);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const L=gn.define,Qo=L(),Wn=L(),wp=L(Wn),Qp=L(Wn),jn=L(),Co=L(jn),cc=L(jn),mn=L(),yi=L(mn),dn=L(),pn=L(),Eh=L(),zr=L(Eh),$o=L(),R={comment:Qo,lineComment:L(Qo),blockComment:L(Qo),docComment:L(Qo),name:Wn,variableName:L(Wn),typeName:wp,tagName:L(wp),propertyName:Qp,attributeName:L(Qp),className:L(Wn),labelName:L(Wn),namespace:L(Wn),macroName:L(Wn),literal:jn,string:Co,docString:L(Co),character:L(Co),attributeValue:L(Co),number:cc,integer:L(cc),float:L(cc),bool:L(jn),regexp:L(jn),escape:L(jn),color:L(jn),url:L(jn),keyword:dn,self:L(dn),null:L(dn),atom:L(dn),unit:L(dn),modifier:L(dn),operatorKeyword:L(dn),controlKeyword:L(dn),definitionKeyword:L(dn),moduleKeyword:L(dn),operator:pn,derefOperator:L(pn),arithmeticOperator:L(pn),logicOperator:L(pn),bitwiseOperator:L(pn),compareOperator:L(pn),updateOperator:L(pn),definitionOperator:L(pn),typeOperator:L(pn),controlOperator:L(pn),punctuation:Eh,separator:L(Eh),bracket:zr,angleBracket:L(zr),squareBracket:L(zr),paren:L(zr),brace:L(zr),content:mn,heading:yi,heading1:L(yi),heading2:L(yi),heading3:L(yi),heading4:L(yi),heading5:L(yi),heading6:L(yi),contentSeparator:L(mn),list:L(mn),quote:L(mn),emphasis:L(mn),strong:L(mn),link:L(mn),monospace:L(mn),strikethrough:L(mn),inserted:L(),deleted:L(),changed:L(),invalid:L(),meta:$o,documentMeta:L($o),annotation:L($o),processingInstruction:L($o),definition:gn.defineModifier(),constant:gn.defineModifier(),function:gn.defineModifier(),standard:gn.defineModifier(),local:gn.defineModifier(),special:gn.defineModifier()};xy([{tag:R.link,class:"tok-link"},{tag:R.heading,class:"tok-heading"},{tag:R.emphasis,class:"tok-emphasis"},{tag:R.strong,class:"tok-strong"},{tag:R.keyword,class:"tok-keyword"},{tag:R.atom,class:"tok-atom"},{tag:R.bool,class:"tok-bool"},{tag:R.url,class:"tok-url"},{tag:R.labelName,class:"tok-labelName"},{tag:R.inserted,class:"tok-inserted"},{tag:R.deleted,class:"tok-deleted"},{tag:R.literal,class:"tok-literal"},{tag:R.string,class:"tok-string"},{tag:R.number,class:"tok-number"},{tag:[R.regexp,R.escape,R.special(R.string)],class:"tok-string2"},{tag:R.variableName,class:"tok-variableName"},{tag:R.local(R.variableName),class:"tok-variableName tok-local"},{tag:R.definition(R.variableName),class:"tok-variableName tok-definition"},{tag:R.special(R.variableName),class:"tok-variableName2"},{tag:R.definition(R.propertyName),class:"tok-propertyName tok-definition"},{tag:R.typeName,class:"tok-typeName"},{tag:R.namespace,class:"tok-namespace"},{tag:R.className,class:"tok-className"},{tag:R.macroName,class:"tok-macroName"},{tag:R.propertyName,class:"tok-propertyName"},{tag:R.operator,class:"tok-operator"},{tag:R.comment,class:"tok-comment"},{tag:R.meta,class:"tok-meta"},{tag:R.invalid,class:"tok-invalid"},{tag:R.punctuation,class:"tok-punctuation"}]);var hc;const Ts=new ye;function OR(n){return H.define({combine:n?e=>e.concat(n):void 0})}class ln{constructor(e,t,i=[],r=""){this.data=e,this.name=r,ve.prototype.hasOwnProperty("tree")||Object.defineProperty(ve.prototype,"tree",{get(){return tt(this)}}),this.parser=t,this.extension=[hi.of(this),ve.languageData.of((s,o,l)=>s.facet(Cp(s,o,l)))].concat(i)}isActiveAt(e,t,i=-1){return Cp(e,t,i)==this.data}findRegions(e){let t=e.facet(hi);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Ts)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(ye.mounted);if(l){if(l.tree.prop(Ts)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof Ge&&r(c,s.positions[a]+o)}};return r(tt(e),0),i}get allowsNesting(){return!0}}ln.setState=ce.define();function Cp(n,e,t){let i=n.facet(hi);if(!i)return null;let r=i.data;if(i.allowsNesting)for(let s=tt(n).topNode;s;s=s.enter(e,t,rt.ExcludeBuffers))r=s.type.prop(Ts)||r;return r}class vl extends ln{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=OR(e.languageData);return new vl(t,e.parser.configure({props:[Ts.add(i=>i.isTop?t:void 0)]}),e.name)}configure(e,t){return new vl(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function tt(n){let e=n.field(ln.state,!1);return e?e.tree:Ge.empty}class yR{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Wr=null;class wl{constructor(e,t,i=[],r,s,o,l,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new wl(e,t,[],Ge.empty,0,i,[],null)}startParse(){return this.parser.startParse(new yR(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ge.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(Ei.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ei.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Wr;Wr=this;try{return e()}finally{Wr=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=$p(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,h,u,f)=>a.push({fromA:c,toA:h,fromB:u,toB:f})),i=Ei.applyChanges(i,a),r=Ge.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let h=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);h<u&&l.push({from:h,to:u})}}}return new wl(this.parser,t,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=$p(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Oy{createParse(t,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Wr;if(a){for(let c of r)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new Ge(_t.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Wr}}function $p(n,e,t){return Ei.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Qr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Qr(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=wl.create(e.facet(hi).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Qr(i)}}ln.state=ot.define({create:Qr.init,update(n,e){for(let t of e.effects)if(t.is(ln.setState))return t.value;return e.startState.facet(hi)!=e.state.facet(hi)?Qr.init(e.state):n.apply(e)}});let Sy=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Sy=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const uc=typeof navigator<"u"&&((hc=navigator.scheduling)===null||hc===void 0?void 0:hc.isInputPending)?()=>navigator.scheduling.isInputPending():null,bR=He.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ln.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ln.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Sy(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(ln.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!uc?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>uc&&uc()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ln.setState.of(new Qr(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Zt(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),hi=H.define({combine(n){return n.length?n[0]:null},enables:n=>[ln.state,bR,J.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class xR{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const SR=H.define(),aa=H.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function Ql(n){let e=n.facet(aa);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function As(n,e){let t="",i=n.tabSize;if(n.facet(aa).charCodeAt(0)==9)for(;e>=i;)t+="	",e-=i;for(let r=0;r<e;r++)t+=" ";return t}function Bu(n,e){n instanceof ve&&(n=new ca(n));for(let i of n.state.facet(SR)){let r=i(n,e);if(r!==void 0)return r}let t=tt(n.state);return t?vR(n,t,e):null}class ca{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ql(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return qs(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const vy=new ye;function vR(n,e,t){return wy(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function wR(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function QR(n){let e=n.type.prop(vy);if(e)return e;let t=n.firstChild,i;if(t&&(i=t.type.prop(ye.closedBy))){let r=n.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Qy(o,!0,1,void 0,s&&!wR(o)?r.from:void 0)}return n.parent==null?CR:null}function wy(n,e,t){for(;n;n=n.parent){let i=QR(n);if(i)return i(Iu.create(t,e,n))}return null}function CR(){return 0}class Iu extends ca{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new Iu(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if($R(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?wy(e,this.pos,this.base):0}}function $R(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function kR(n){let e=n.node,t=e.childAfter(e.from),i=e.lastChild;if(!t)return null;let r=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped)return a.from<o?t:null;l=a.to}}function PR({closing:n,align:e=!0,units:t=1}){return i=>Qy(i,e,t,n)}function Qy(n,e,t,i,r){let s=n.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==n.pos+o,a=e?kR(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const TR=n=>n.baseIndent;function fc({except:n,units:e=1}={}){return t=>{let i=n&&n.test(t.textAfter);return t.baseIndent+(i?0:e*t.unit)}}const AR=200;function RR(){return ve.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:i}=n.newSelection.main,r=t.lineAt(i);if(i>r.from+AR)return n;let s=t.sliceString(r.from,i);if(!e.some(c=>c.test(s)))return n;let{state:o}=n,l=-1,a=[];for(let{head:c}of o.selection.ranges){let h=o.doc.lineAt(c);if(h.from==l)continue;l=h.from;let u=Bu(o,h.from);if(u==null)continue;let f=/^\s*/.exec(h.text)[0],d=As(o,u);f!=d&&a.push({from:h.from,to:h.from+f.length,insert:d})}return a.length?[n,{changes:a,sequential:!0}]:n})}const ER=H.define(),Cy=new ye;function _R(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function MR(n,e,t){let i=tt(n);if(i.length<t)return null;let r=i.resolveInner(t,1),s=null;for(let o=r;o;o=o.parent){if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(Cy);if(l&&(o.to<i.length-50||i.length==n.doc.length||!DR(o))){let a=l(o,n);a&&a.from<=t&&a.from>=e&&a.to>t&&(s=a)}}return s}function DR(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Cl(n,e,t){for(let i of n.facet(ER)){let r=i(n,e,t);if(r)return r}return MR(n,e,t)}function $y(n,e){let t=e.mapPos(n.from,1),i=e.mapPos(n.to,-1);return t>=i?void 0:{from:t,to:i}}const ha=ce.define({map:$y}),js=ce.define({map:$y});function ky(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(i=>i.from<=t&&i.to>=t)||e.push(n.lineBlockAt(t));return e}const Bi=ot.define({create(){return ne.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(ha)&&!NR(n,t.value.from,t.value.to)?n=n.update({add:[kp.range(t.value.from,t.value.to)]}):t.is(js)&&(n=n.update({filter:(i,r)=>t.value.from!=i||t.value.to!=r,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:i}=e.selection.main;n.between(i,i,(r,s)=>{r<i&&s>i&&(t=!0)}),t&&(n=n.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return n},provide:n=>J.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(i,r)=>{t.push(i,r)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let i=n[t++],r=n[t++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(kp.range(i,r))}return ne.set(e,!0)}});function $l(n,e,t){var i;let r=null;return(i=n.field(Bi,!1))===null||i===void 0||i.between(e,t,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function NR(n,e,t){let i=!1;return n.between(e,e,(r,s)=>{r==e&&s==t&&(i=!0)}),i}function Py(n,e){return n.field(Bi,!1)?e:e.concat(ce.appendConfig.of(Ry()))}const BR=n=>{for(let e of ky(n)){let t=Cl(n.state,e.from,e.to);if(t)return n.dispatch({effects:Py(n.state,[ha.of(t),Ty(n,t)])}),!0}return!1},IR=n=>{if(!n.state.field(Bi,!1))return!1;let e=[];for(let t of ky(n)){let i=$l(n.state,t.from,t.to);i&&e.push(js.of(i),Ty(n,i,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Ty(n,e,t=!0){let i=n.state.doc.lineAt(e.from).number,r=n.state.doc.lineAt(e.to).number;return J.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${i} ${n.state.phrase("to")} ${r}.`)}const XR=n=>{let{state:e}=n,t=[];for(let i=0;i<e.doc.length;){let r=n.lineBlockAt(i),s=Cl(e,r.from,r.to);s&&t.push(ha.of(s)),i=(s?n.lineBlockAt(s.to):r).to+1}return t.length&&n.dispatch({effects:Py(n.state,t)}),!!t.length},UR=n=>{let e=n.state.field(Bi,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(i,r)=>{t.push(js.of({from:i,to:r}))}),n.dispatch({effects:t}),!0},VR=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:BR},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:IR},{key:"Ctrl-Alt-[",run:XR},{key:"Ctrl-Alt-]",run:UR}],ZR={placeholderDOM:null,placeholderText:"\u2026"},Ay=H.define({combine(n){return En(n,ZR)}});function Ry(n){let e=[Bi,zR];return n&&e.push(Ay.of(n)),e}const kp=ne.replace({widget:new class extends Zn{toDOM(n){let{state:e}=n,t=e.facet(Ay),i=s=>{let o=n.lineBlockAt(n.posAtDOM(s.target)),l=$l(n.state,o.from,o.to);l&&n.dispatch({effects:js.of(l)}),s.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,i);let r=document.createElement("span");return r.textContent=t.placeholderText,r.setAttribute("aria-label",e.phrase("folded code")),r.title=e.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}}}),qR={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class dc extends Vn{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function LR(n={}){let e=Object.assign(Object.assign({},qR),n),t=new dc(e,!0),i=new dc(e,!1),r=He.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(hi)!=o.state.facet(hi)||o.startState.field(Bi,!1)!=o.state.field(Bi,!1)||tt(o.startState)!=tt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new oi;for(let a of o.viewportLineBlocks){let c=$l(o.state,a.from,a.to)?i:Cl(o.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:s}=e;return[r,jA({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||Pe.empty},initialSpacer(){return new dc(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let c=$l(o.state,l.from,l.to);if(c)return o.dispatch({effects:js.of(c)}),!0;let h=Cl(o.state,l.from,l.to);return h?(o.dispatch({effects:ha.of(h)}),!0):!1}})}),Ry()]}const zR=J.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ua{constructor(e,t){this.specs=e;let i;function r(l){let a=li.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof t.all=="string"?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof ln?l=>l.prop(Ts)==o.data:o?l=>l==o:void 0,this.style=xy(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new li(i):null,this.themeType=t.themeType}static define(e,t){return new ua(e,t||{})}}const _h=H.define(),Ey=H.define({combine(n){return n.length?[n[0]]:null}});function pc(n){let e=n.facet(_h);return e.length?e:n.facet(Ey)}function WR(n,e){let t=[FR],i;return n instanceof ua&&(n.module&&t.push(J.styleModule.of(n.module)),i=n.themeType),e!=null&&e.fallback?t.push(Ey.of(n)):i?t.push(_h.computeN([J.darkTheme],r=>r.facet(J.darkTheme)==(i=="dark")?[n]:[])):t.push(_h.of(n)),t}class jR{constructor(e){this.markCache=Object.create(null),this.tree=tt(e.state),this.decorations=this.buildDeco(e,pc(e.state))}update(e){let t=tt(e.state),i=pc(e.state),r=i!=pc(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return ne.none;let i=new oi;for(let{from:r,to:s}of e.visibleRanges)pR(this.tree,t,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=ne.mark({class:a})))},r,s);return i.finish()}}const FR=Vi.high(He.fromClass(jR,{decorations:n=>n.decorations})),GR=ua.define([{tag:R.meta,color:"#7a757a"},{tag:R.link,textDecoration:"underline"},{tag:R.heading,textDecoration:"underline",fontWeight:"bold"},{tag:R.emphasis,fontStyle:"italic"},{tag:R.strong,fontWeight:"bold"},{tag:R.strikethrough,textDecoration:"line-through"},{tag:R.keyword,color:"#708"},{tag:[R.atom,R.bool,R.url,R.contentSeparator,R.labelName],color:"#219"},{tag:[R.literal,R.inserted],color:"#164"},{tag:[R.string,R.deleted],color:"#a11"},{tag:[R.regexp,R.escape,R.special(R.string)],color:"#e40"},{tag:R.definition(R.variableName),color:"#00f"},{tag:R.local(R.variableName),color:"#30a"},{tag:[R.typeName,R.namespace],color:"#085"},{tag:R.className,color:"#167"},{tag:[R.special(R.variableName),R.macroName],color:"#256"},{tag:R.definition(R.propertyName),color:"#00c"},{tag:R.comment,color:"#940"},{tag:R.invalid,color:"#f00"}]),HR=J.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_y=1e4,My="()[]{}",Dy=H.define({combine(n){return En(n,{afterCursor:!0,brackets:My,maxScanDistance:_y,renderMatch:JR})}}),YR=ne.mark({class:"cm-matchingBracket"}),KR=ne.mark({class:"cm-nonmatchingBracket"});function JR(n){let e=[],t=n.matched?YR:KR;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const eE=ot.define({create(){return ne.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],i=e.state.facet(Dy);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=bn(e.state,r.head,-1,i)||r.head>0&&bn(e.state,r.head-1,1,i)||i.afterCursor&&(bn(e.state,r.head,1,i)||r.head<e.state.doc.length&&bn(e.state,r.head+1,-1,i));s&&(t=t.concat(i.renderMatch(s,e.state)))}return ne.set(t,!0)},provide:n=>J.decorations.from(n)}),tE=[eE,HR];function nE(n={}){return[Dy.of(n),tE]}function Mh(n,e,t){let i=n.prop(e<0?ye.openedBy:ye.closedBy);if(i)return i;if(n.name.length==1){let r=t.indexOf(n.name);if(r>-1&&r%2==(e<0?1:0))return[t[r+e]]}return null}function bn(n,e,t,i={}){let r=i.maxScanDistance||_y,s=i.brackets||My,o=tt(n),l=o.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=Mh(a.type,t,s);if(c&&a.from<a.to)return iE(n,e,t,a,c,s)}return rE(n,e,t,o,l.type,r,s)}function iE(n,e,t,i,r,s){let o=i.parent,l={from:i.from,to:i.to},a=0,c=o==null?void 0:o.cursor();if(c&&(t<0?c.childBefore(i.from):c.childAfter(i.to)))do if(t<0?c.to<=i.from:c.from>=i.to){if(a==0&&r.indexOf(c.type.name)>-1&&c.from<c.to)return{start:l,end:{from:c.from,to:c.to},matched:!0};if(Mh(c.type,t,s))a++;else if(Mh(c.type,-t,s)){if(a==0)return{start:l,end:c.from==c.to?void 0:{from:c.from,to:c.to},matched:!1};a--}}while(t<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}function rE(n,e,t,i,r,s,o){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},h=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let f=0;!h.next().done&&f<=s;){let d=h.value;t<0&&(f+=d.length);let p=e+f*t;for(let m=t>0?0:d.length-1,b=t>0?d.length:-1;m!=b;m+=t){let g=o.indexOf(d[m]);if(!(g<0||i.resolveInner(p+m,1).type!=r))if(g%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:p+m,to:p+m+1},matched:g>>1==a>>1};u--}}t>0&&(f+=d.length)}return h.done?{start:c,matched:!1}:null}const sE=Object.create(null),Pp=[_t.none],Tp=[],oE=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])oE[n]=lE(sE,e);function mc(n,e){Tp.indexOf(n)>-1||(Tp.push(n),console.warn(e))}function lE(n,e){let t=null;for(let s of e.split(".")){let o=n[s]||R[s];o?typeof o=="function"?t?t=o(t):mc(s,`Modifier ${s} used at start of tag`):t?mc(s,`Tag ${s} used as modifier`):t=o:mc(s,`Unknown highlighting tag ${s}`)}if(!t)return 0;let i=e.replace(/ /g,"_"),r=_t.define({id:Pp.length,name:i,props:[yy({[i]:t})]});return Pp.push(r),r.id}class Ny{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=tt(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(Iy(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Ap(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function aE(n){let e=Object.create(null),t=Object.create(null);for(let{label:r}of n){e[r[0]]=!0;for(let s=1;s<r.length;s++)t[r[s]]=!0}let i=Ap(e)+Ap(t)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function By(n){let e=n.map(r=>typeof r=="string"?{label:r}:r),[t,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:aE(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:t}:null}}function cE(n,e){return t=>{for(let i=tt(t.state).resolveInner(t.pos,-1);i;i=i.parent)if(n.indexOf(i.name)>-1)return null;return e(t)}}class Rp{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function ri(n){return n.selection.main.head}function Iy(n,e){var t;let{source:i}=n,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?n:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const hE=di.define();function uE(n,e,t,i){return Object.assign(Object.assign({},n.changeByRange(r=>{if(r==n.selection.main)return{changes:{from:t,to:i,insert:e},range:N.cursor(t+e.length)};let s=i-t;return!r.empty||s&&n.sliceDoc(r.from-s,r.from)!=n.sliceDoc(t,i)?{range:r}:{changes:{from:r.from-s,to:r.from,insert:e},range:N.cursor(r.from-s+e.length)}})),{userEvent:"input.complete"})}function Xy(n,e){const t=e.completion.apply||e.completion.label;let i=e.source;typeof t=="string"?n.dispatch(Object.assign(Object.assign({},uE(n.state,t,i.from,i.to)),{annotations:hE.of(e.completion)})):t(n,e.completion,i.from,i.to)}const Ep=new WeakMap;function fE(n){if(!Array.isArray(n))return n;let e=Ep.get(n);return e||Ep.set(n,e=By(n)),e}class dE{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=at(e,t),r=Xt(i);this.chars.push(i);let s=e.slice(t,t+r),o=s.toUpperCase();this.folded.push(at(o==s?s.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:o}=this;if(t.length==1){let x=at(e,0);return x==t[0]?[0,0,Xt(x)]:x==i[0]?[-200,0,Xt(x)]:null}let l=e.indexOf(this.pattern);if(l==0)return[0,0,this.pattern.length];let a=t.length,c=0;if(l<0){for(let x=0,w=Math.min(e.length,200);x<w&&c<a;){let y=at(e,x);(y==t[c]||y==i[c])&&(r[c++]=x),x+=Xt(y)}if(c<a)return null}let h=0,u=0,f=!1,d=0,p=-1,m=-1,b=/[a-z]/.test(e),g=!0;for(let x=0,w=Math.min(e.length,200),y=0;x<w&&u<a;){let v=at(e,x);l<0&&(h<a&&v==t[h]&&(s[h++]=x),d<a&&(v==t[d]||v==i[d]?(d==0&&(p=x),m=x+1,d++):d=0));let C,$=v<255?v>=48&&v<=57||v>=97&&v<=122?2:v>=65&&v<=90?1:0:(C=Su(v))!=C.toLowerCase()?1:C!=C.toUpperCase()?2:0;(!x||$==1&&b||y==0&&$!=0)&&(t[u]==v||i[u]==v&&(f=!0)?o[u++]=x:o.length&&(g=!1)),y=$,x+=Xt(v)}return u==a&&o[0]==0&&g?this.result(-100+(f?-200:0),o,e):d==a&&p==0?[-200-e.length,0,m]:l>-1?[-700-e.length,l,l+this.pattern.length]:d==a?[-200+-700-e.length,p,m]:u==a?this.result(-100+(f?-200:0)+-700+(g?0:-1100),o,e):t.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,t,i){let r=[e-i.length],s=1;for(let o of t){let l=o+(this.astral?Xt(at(i,o)):1);s>1&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return r}}const Yt=H.define({combine(n){return En(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>pE(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})}});function pE(n,e){return n?e?n+" "+e:n:e}function mE(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),t.type&&i.classList.add(...t.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(t,i,r){let s=document.createElement("span");s.className="cm-completionLabel";let{label:o}=t,l=0;for(let a=1;a<r.length;){let c=r[a++],h=r[a++];c>l&&s.appendChild(document.createTextNode(o.slice(l,c)));let u=s.appendChild(document.createElement("span"));u.appendChild(document.createTextNode(o.slice(c,h))),u.className="cm-completionMatchedText",l=h}return l<o.length&&s.appendChild(document.createTextNode(o.slice(l))),s},position:50},{render(t){if(!t.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=t.detail,i},position:80}),e.sort((t,i)=>t.position-i.position).map(t=>t.render)}function _p(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let r=Math.floor(e/t);return{from:r*t,to:(r+1)*t}}let i=Math.floor((n-e)/t);return{from:n-(i+1)*t,to:n-i*t}}class gE{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:l=>this.positionInfo(l),key:this},this.space=null;let i=e.state.field(t),{options:r,selected:s}=i.open,o=e.state.facet(Yt);this.optionContent=mE(o),this.optionClass=o.optionClass,this.range=_p(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",l=>{for(let a=l.target,c;a&&a!=this.dom;a=a.parentNode)if(a.nodeName=="LI"&&(c=/-(\d+)$/.exec(a.id))&&+c[1]<r.length){Xy(e,r[+c[1]]),l.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(r,i.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){var t,i,r;let s=e.state.field(this.stateField),o=e.startState.field(this.stateField);s!=o&&(this.updateSel(),((t=s.open)===null||t===void 0?void 0:t.disabled)!=((i=o.open)===null||i===void 0?void 0:i.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!(!((r=s.open)===null||r===void 0)&&r.disabled)))}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=_p(t.options.length,t.selected,this.view.state.facet(Yt).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o)}).catch(o=>Zt(this.view.state,o,"completion info")):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&yE(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let p=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:p.innerWidth,bottom:p.innerHeight}}if(r.top>Math.min(s.bottom,t.bottom)-10||r.bottom<Math.max(s.top,t.top)+10)return null;let o=this.view.textDirection==Ze.RTL,l=o,a=!1,c,h="",u="",f=t.left-s.left,d=s.right-t.right;if(l&&f<Math.min(i.width,d)?l=!1:!l&&d<Math.min(i.width,f)&&(l=!0),i.width<=(l?f:d))h=Math.max(s.top,Math.min(r.top,s.bottom-i.height))-t.top+"px",c=Math.min(400,l?f:d)+"px";else{a=!0,c=Math.min(400,(o?t.right:s.right-t.left)-30)+"px";let p=s.bottom-t.bottom;p>=i.height||p>t.top?h=r.bottom-t.top+"px":u=t.bottom-r.top+"px"}return{top:h,bottom:u,maxWidth:c,class:a?o?"left-narrow":"right-narrow":l?"left":"right"}}positionInfo(e){this.info&&(e?(this.info.style.top=e.top,this.info.style.bottom=e.bottom,this.info.style.maxWidth=e.maxWidth,this.info.className="cm-tooltip cm-completionInfo cm-completionInfo-"+e.class):this.info.style.top="-1e6px")}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=i.from;s<i.to;s++){let{completion:o,match:l}=e[s];const a=r.appendChild(document.createElement("li"));a.id=t+"-"+s,a.setAttribute("role","option");let c=this.optionClass(o);c&&(a.className=c);for(let h of this.optionContent){let u=h(o,this.view.state,l);u&&a.appendChild(u)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function OE(n){return e=>new gE(e,n)}function yE(n,e){let t=n.getBoundingClientRect(),i=e.getBoundingClientRect();i.top<t.top?n.scrollTop-=t.top-i.top:i.bottom>t.bottom&&(n.scrollTop+=i.bottom-t.bottom)}function Mp(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function bE(n,e){let t=[],i=0;for(let l of n)if(l.hasResult())if(l.result.filter===!1){let a=l.result.getMatch;for(let c of l.result.options){let h=[1e9-i++];if(a)for(let u of a(c))h.push(u);t.push(new Rp(c,l,h))}}else{let a=new dE(e.sliceDoc(l.from,l.to)),c;for(let h of l.result.options)(c=a.match(h.label))&&(h.boost!=null&&(c[0]+=h.boost),t.push(new Rp(h,l,c)))}let r=[],s=null,o=e.facet(Yt).compareCompletions;for(let l of t.sort((a,c)=>c.match[0]-a.match[0]||o(a.completion,c.completion)))!s||s.label!=l.completion.label||s.detail!=l.completion.detail||s.type!=null&&l.completion.type!=null&&s.type!=l.completion.type||s.apply!=l.completion.apply?r.push(l):Mp(l.completion)>Mp(s)&&(r[r.length-1]=l),s=l.completion;return r}class er{constructor(e,t,i,r,s,o){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new er(this.options,Dp(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,r,s){let o=bE(e,t);if(!o.length)return r&&e.some(a=>a.state==1)?new er(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let l=t.facet(Yt).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let a=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==a){l=c;break}}return new er(o,Dp(i,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:OE(Wt),above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new er(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class kl{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new kl(vE,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,i=t.facet(Yt),s=(i.override||t.languageDataAt("autocomplete",ri(t)).map(fE)).map(l=>(this.active.find(c=>c.source==l)||new Tt(l,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,a)=>l==this.active[a])&&(s=this.active);let o=this.open;e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!xE(s,this.active)?o=er.build(s,t,this.id,this.open,i):o&&o.disabled&&!s.some(l=>l.state==1)?o=null:o&&e.docChanged&&(o=o.map(e.changes)),!o&&s.every(l=>l.state!=1)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Tt(l.source,0):l));for(let l of e.effects)l.is(Vy)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new kl(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:SE}}function xE(n,e){if(n==e)return!0;for(let t=0,i=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;i<e.length&&!e[i].hasResult;)i++;let r=t==n.length,s=i==e.length;if(r||s)return r==s;if(n[t++].result!=e[i++].result)return!1}}const SE={"aria-autocomplete":"list"};function Dp(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const vE=[];function Dh(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Tt{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Dh(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new Tt(r.source,0));for(let s of e.effects)if(s.is(Xu))r=new Tt(r.source,1,s.value?ri(e.state):-1);else if(s.is(Pl))r=new Tt(r.source,0);else if(s.is(Uy))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,t,i){return t=="delete"||!i.activateOnTyping?this.map(e.changes):new Tt(this.source,1)}handleChange(e){return e.changes.touchesRange(ri(e.startState))?new Tt(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Tt(this.source,this.state,e.mapPos(this.explicitPos))}}class cs extends Tt{constructor(e,t,i,r,s){super(e,2,t),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=ri(e.state);if((this.explicitPos<0?l<=s:l<this.from)||l>o||t=="delete"&&ri(e.startState)==this.from)return new Tt(this.source,t=="input"&&i.activateOnTyping?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return wE(this.result.validFor,e.state,s,o)?new cs(this.source,a,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new Ny(e.state,l,a>=0)))?new cs(this.source,a,c,c.from,(r=c.to)!==null&&r!==void 0?r:ri(e.state)):new Tt(this.source,1,a)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Tt(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new cs(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function wE(n,e,t,i){if(!n)return!1;let r=e.sliceDoc(t,i);return typeof n=="function"?n(r,t,i,e):Iy(n,!0).test(r)}const Xu=ce.define(),Pl=ce.define(),Uy=ce.define({map(n,e){return n.map(t=>t.map(e))}}),Vy=ce.define(),Wt=ot.define({create(){return kl.start()},update(n,e){return n.update(e)},provide:n=>[Ru.from(n,e=>e.tooltip),J.contentAttributes.from(n,e=>e.attrs)]});function ko(n,e="option"){return t=>{let i=t.state.field(Wt,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<t.state.facet(Yt).interactionDelay)return!1;let r=1,s;e=="page"&&(s=LA(t,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(n?1:-1):n?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),t.dispatch({effects:Vy.of(l)}),!0}}const QE=n=>{let e=n.state.field(Wt,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||Date.now()-e.open.timestamp<n.state.facet(Yt).interactionDelay?!1:(e.open.disabled||Xy(n,e.open.options[e.open.selected]),!0)},CE=n=>n.state.field(Wt,!1)?(n.dispatch({effects:Xu.of(!0)}),!0):!1,$E=n=>{let e=n.state.field(Wt,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Pl.of(null)}),!0)};class kE{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Np=50,PE=50,TE=1e3,AE=He.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(Wt).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(Wt);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Wt)==e)return;let t=n.transactions.some(i=>(i.selection||i.docChanged)&&!Dh(i));for(let i=0;i<this.running.length;i++){let r=this.running[i];if(t||r.updates.length+n.transactions.length>PE&&Date.now()-r.time>TE){for(let s of r.context.abortListeners)try{s()}catch(o){Zt(this.view.state,o)}r.context.abortListeners=null,this.running.splice(i--,1)}else r.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(i=>i.state==1&&!this.running.some(r=>r.active.source==i.source))?setTimeout(()=>this.startUpdate(),Np):-1,this.composing!=0)for(let i of n.transactions)Dh(i)=="input"?this.composing=2:this.composing==2&&i.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(Wt);for(let t of e.active)t.state==1&&!this.running.some(i=>i.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=ri(e),i=new Ny(e,t,n.explicitPos==t),r=new kE(n,i);this.running.push(r),Promise.resolve(n.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Pl.of(null)}),Zt(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Np))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yt);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let o=new cs(r.active.source,r.active.explicitPos,r.done,r.done.from,(n=r.done.to)!==null&&n!==void 0?n:ri(r.updates.length?r.updates[0].startState:this.view.state));for(let l of r.updates)o=o.update(l,t);if(o.hasResult()){e.push(o);continue}}let s=this.view.state.field(Wt).active.find(o=>o.source==r.active.source);if(s&&s.state==1)if(r.done==null){let o=new Tt(r.active.source,0);for(let l of r.updates)o=o.update(l,t);o.state!=1&&e.push(o)}else this.startQuery(s)}e.length&&this.view.dispatch({effects:Uy.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(Wt,!1);n&&n.tooltip&&this.view.state.facet(Yt).closeOnBlur&&this.view.dispatch({effects:Pl.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Xu.of(!1)}),20),this.composing=0}}}),Zy=J.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class RE{constructor(e,t,i,r){this.field=e,this.line=t,this.from=i,this.to=r}}class Uu{constructor(e,t,i){this.field=e,this.from=t,this.to=i}map(e){let t=e.mapPos(this.from,-1,ft.TrackDel),i=e.mapPos(this.to,1,ft.TrackDel);return t==null||i==null?null:new Uu(this.field,t,i)}}class Vu{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let i=[],r=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let a of this.lines){if(i.length){let c=o,h=/^\t*/.exec(a)[0].length;for(let u=0;u<h;u++)c+=e.facet(aa);r.push(t+c.length-h),a=c+a.slice(h)}i.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new Uu(a.field,r[a.line]+a.from,r[a.line]+a.to));return{text:i,ranges:l}}static parse(e){let t=[],i=[],r=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(o);){let l=s[1]?+s[1]:null,a=s[2]||s[3]||"",c=-1;for(let h=0;h<t.length;h++)(l!=null?t[h].seq==l:a?t[h].name==a:!1)&&(c=h);if(c<0){let h=0;for(;h<t.length&&(l==null||t[h].seq!=null&&t[h].seq<l);)h++;t.splice(h,0,{seq:l,name:a}),c=h;for(let u of r)u.field>=c&&u.field++}r.push(new RE(c,i.length,s.index,s.index+a.length)),o=o.slice(0,s.index)+a+o.slice(s.index+s[0].length)}for(let l;l=/\\([{}])/.exec(o);){o=o.slice(0,l.index)+l[1]+o.slice(l.index+l[0].length);for(let a of r)a.line==i.length&&a.from>l.index&&(a.from--,a.to--)}i.push(o)}return new Vu(i,r)}}let EE=ne.widget({widget:new class extends Zn{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),_E=ne.mark({class:"cm-snippetField"});class Er{constructor(e,t){this.ranges=e,this.active=t,this.deco=ne.set(e.map(i=>(i.from==i.to?EE:_E).range(i.from,i.to)))}map(e){let t=[];for(let i of this.ranges){let r=i.map(e);if(!r)return null;t.push(r)}return new Er(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(i=>i.field==this.active&&i.from<=t.from&&i.to>=t.to))}}const Fs=ce.define({map(n,e){return n&&n.map(e)}}),ME=ce.define(),Rs=ot.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Fs))return t.value;if(t.is(ME)&&n)return new Er(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>J.decorations.from(n,e=>e?e.deco:ne.none)});function Zu(n,e){return N.create(n.filter(t=>t.field==e).map(t=>N.range(t.from,t.to)))}function DE(n){let e=Vu.parse(n);return(t,i,r,s)=>{let{text:o,ranges:l}=e.instantiate(t.state,r),a={changes:{from:r,to:s,insert:we.of(o)},scrollIntoView:!0};if(l.length&&(a.selection=Zu(l,0)),l.length>1){let c=new Er(l,0),h=a.effects=[Fs.of(c)];t.state.field(Rs,!1)===void 0&&h.push(ce.appendConfig.of([Rs,UE,VE,Zy]))}t.dispatch(t.state.update(a))}}function qy(n){return({state:e,dispatch:t})=>{let i=e.field(Rs,!1);if(!i||n<0&&i.active==0)return!1;let r=i.active+n,s=n>0&&!i.ranges.some(o=>o.field==r+n);return t(e.update({selection:Zu(i.ranges,r),effects:Fs.of(s?null:new Er(i.ranges,r))})),!0}}const NE=({state:n,dispatch:e})=>n.field(Rs,!1)?(e(n.update({effects:Fs.of(null)})),!0):!1,BE=qy(1),IE=qy(-1),XE=[{key:"Tab",run:BE,shift:IE},{key:"Escape",run:NE}],Bp=H.define({combine(n){return n.length?n[0]:XE}}),UE=Vi.highest(zs.compute([Bp],n=>n.facet(Bp)));function en(n,e){return Object.assign(Object.assign({},e),{apply:DE(n)})}const VE=J.domEventHandlers({mousedown(n,e){let t=e.state.field(Rs,!1),i;if(!t||(i=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let r=t.ranges.find(s=>s.from<=i&&s.to>=i);return!r||r.field==t.active?!1:(e.dispatch({selection:Zu(t.ranges,r.field),effects:Fs.of(t.ranges.some(s=>s.field>r.field)?new Er(t.ranges,r.field):null)}),!0)}}),Es={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ti=ce.define({map(n,e){let t=e.mapPos(n,-1,ft.TrackAfter);return t==null?void 0:t}}),qu=ce.define({map(n,e){return e.mapPos(n)}}),Lu=new class extends Di{};Lu.startSide=1;Lu.endSide=-1;const Ly=ot.define({create(){return Pe.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,i=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(i,-1)&&(n=Pe.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Ti)?n=n.update({add:[Lu.range(t.value,t.value+1)]}):t.is(qu)&&(n=n.update({filter:i=>i!=t.value}));return n}});function ZE(){return[LE,Ly]}const gc="()[]{}<>";function zy(n){for(let e=0;e<gc.length;e+=2)if(gc.charCodeAt(e)==n)return gc.charAt(e+1);return Su(n<128?n:n+1)}function Wy(n,e){return n.languageDataAt("closeBrackets",e)[0]||Es}const qE=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),LE=J.inputHandler.of((n,e,t,i)=>{if((qE?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let r=n.state.selection.main;if(i.length>2||i.length==2&&Xt(at(i,0))==1||e!=r.from||t!=r.to)return!1;let s=jE(n.state,i);return s?(n.dispatch(s),!0):!1}),zE=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let i=Wy(n,n.selection.main.head).brackets||Es.brackets,r=null,s=n.changeByRange(o=>{if(o.empty){let l=FE(n.doc,o.head);for(let a of i)if(a==l&&fa(n.doc,o.head)==zy(at(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:N.cursor(o.head-a.length)}}return{range:r=o}});return r||e(n.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},WE=[{key:"Backspace",run:zE}];function jE(n,e){let t=Wy(n,n.selection.main.head),i=t.brackets||Es.brackets;for(let r of i){let s=zy(at(r,0));if(e==r)return s==r?YE(n,r,i.indexOf(r+r+r)>-1,t):GE(n,r,s,t.before||Es.before);if(e==s&&jy(n,n.selection.main.from))return HE(n,r,s)}return null}function jy(n,e){let t=!1;return n.field(Ly).between(0,n.doc.length,i=>{i==e&&(t=!0)}),t}function fa(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Xt(at(t,0)))}function FE(n,e){let t=n.sliceString(e-2,e);return Xt(at(t,0))==t.length?t:t.slice(1)}function GE(n,e,t,i){let r=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ti.of(o.to+e.length),range:N.range(o.anchor+e.length,o.head+e.length)};let l=fa(n.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+t,from:o.head},effects:Ti.of(o.head+e.length),range:N.cursor(o.head+e.length)}:{range:r=o}});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function HE(n,e,t){let i=null,r=n.selection.ranges.map(s=>s.empty&&fa(n.doc,s.head)==t?N.cursor(s.head+t.length):i=s);return i?null:n.update({selection:N.create(r,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:s})=>qu.of(s))})}function YE(n,e,t,i){let r=i.stringPrefixes||Es.stringPrefixes,s=null,o=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ti.of(l.to+e.length),range:N.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=fa(n.doc,a),h;if(c==e){if(Ip(n,a))return{changes:{insert:e+e,from:a},effects:Ti.of(a+e.length),range:N.cursor(a+e.length)};if(jy(n,a)){let u=t&&n.sliceDoc(a,a+e.length*3)==e+e+e;return{range:N.cursor(a+e.length*(u?3:1)),effects:qu.of(a)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(h=Xp(n,a-2*e.length,r))>-1&&Ip(n,h))return{changes:{insert:e+e+e+e,from:a},effects:Ti.of(a+e.length),range:N.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=Be.Word&&Xp(n,a,r)>-1&&!KE(n,a,e,r))return{changes:{insert:e+e,from:a},effects:Ti.of(a+e.length),range:N.cursor(a+e.length)}}return{range:s=l}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Ip(n,e){let t=tt(n).resolveInner(e+1);return t.parent&&t.from==e}function KE(n,e,t,i){let r=tt(n).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=n.sliceDoc(r.from,Math.min(r.to,r.from+t.length+s)),a=l.indexOf(t);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let h=r.firstChild;for(;h&&h.from==r.from&&h.to-h.from>t.length+a;){if(n.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let c=r.to==e&&r.parent;if(!c)break;r=c}return!1}function Xp(n,e,t){let i=n.charCategorizer(e);if(i(n.sliceDoc(e-1,e))!=Be.Word)return e;for(let r of t){let s=e-r.length;if(n.sliceDoc(s,e)==r&&i(n.sliceDoc(s-1,s))!=Be.Word)return s}return-1}function Fy(n={}){return[Wt,Yt.of(n),AE,JE,Zy]}const Gy=[{key:"Ctrl-Space",run:CE},{key:"Escape",run:$E},{key:"ArrowDown",run:ko(!0)},{key:"ArrowUp",run:ko(!1)},{key:"PageDown",run:ko(!0,"page")},{key:"PageUp",run:ko(!1,"page")},{key:"Enter",run:QE}],JE=Vi.highest(zs.computeN([Yt],n=>n.facet(Yt).defaultKeymap?[Gy]:[])),e_=n=>{let e=Wu(n.state);return e.line?t_(n):e.block?i_(n):!1};function zu(n,e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=n(e,t);return r?(i(t.update(r)),!0):!1}}const t_=zu(o_,0),n_=zu(Hy,0),i_=zu((n,e)=>Hy(n,e,s_(e)),0);function Wu(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const jr=50;function r_(n,{open:e,close:t},i,r){let s=n.sliceDoc(i-jr,i),o=n.sliceDoc(r,r+jr),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+t.length)==t)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let h,u;r-i<=2*jr?h=u=n.sliceDoc(i,r):(h=n.sliceDoc(i,i+jr),u=n.sliceDoc(r-jr,r));let f=/^\s*/.exec(h)[0].length,d=/\s*$/.exec(u)[0].length,p=u.length-d-t.length;return h.slice(f,f+e.length)==e&&u.slice(p,p+t.length)==t?{open:{pos:i+f+e.length,margin:/\s/.test(h.charAt(f+e.length))?1:0},close:{pos:r-d-t.length,margin:/\s/.test(u.charAt(p-1))?1:0}}:null}function s_(n){let e=[];for(let t of n.selection.ranges){let i=n.doc.lineAt(t.from),r=t.to<=i.to?i:n.doc.lineAt(t.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from,to:r.to})}return e}function Hy(n,e,t=e.selection.ranges){let i=t.map(s=>Wu(e,s.from).block);if(!i.every(s=>s))return null;let r=t.map((s,o)=>r_(e,i[o],s.from,s.to));if(n!=2&&!r.every(s=>s))return{changes:e.changes(t.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(n!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:c,close:h}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:h.pos-h.margin,to:h.pos+a.close.length})}return{changes:s}}return null}function o_(n,e,t=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of t){let l=i.length,a=1e9;for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>r&&(s==o||o>h.from)){r=h.from;let u=Wu(e,c).line;if(!u)continue;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,p=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),i.push({line:h,comment:p,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}if(n!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:h,single:u}of i)(u||!h)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,h=c+a.length;o.text[h-o.from]==" "&&h++,s.push({from:c,to:h})}return{changes:s}}return null}const Nh=di.define(),l_=di.define(),a_=H.define(),Yy=H.define({combine(n){return En(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function c_(n){let e=0;return n.iterChangedRanges((t,i)=>e=i),e}const Ky=ot.define({create(){return xn.empty},update(n,e){let t=e.state.facet(Yy),i=e.annotation(Nh);if(i){let a=e.docChanged?N.single(c_(e.changes)):void 0,c=Rt.fromTransaction(e,a),h=i.side,u=h==0?n.undone:n.done;return c?u=Tl(u,u.length,t.minDepth,c):u=tb(u,e.startState.selection),new xn(h==0?i.rest:u,h==0?u:i.rest)}let r=e.annotation(l_);if((r=="full"||r=="before")&&(n=n.isolate()),e.annotation(Je.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let s=Rt.fromTransaction(e),o=e.annotation(Je.time),l=e.annotation(Je.userEvent);return s?n=n.addChanges(s,o,l,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,o,l,t.newGroupDelay)),(r=="full"||r=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new xn(n.done.map(Rt.fromJSON),n.undone.map(Rt.fromJSON))}});function h_(n={}){return[Ky,Yy.of(n),J.domEventHandlers({beforeinput(e,t){let i=e.inputType=="historyUndo"?Jy:e.inputType=="historyRedo"?Bh:null;return i?(e.preventDefault(),i(t)):!1}})]}function da(n,e){return function({state:t,dispatch:i}){if(!e&&t.readOnly)return!1;let r=t.field(Ky,!1);if(!r)return!1;let s=r.pop(n,t,e);return s?(i(s),!0):!1}}const Jy=da(0,!1),Bh=da(1,!1),u_=da(0,!0),f_=da(1,!0);class Rt{constructor(e,t,i,r,s){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Rt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Rt(e.changes&&Ye.fromJSON(e.changes),[],e.mapped&&wn.fromJSON(e.mapped),e.startSelection&&N.fromJSON(e.startSelection),e.selectionsAfter.map(N.fromJSON))}static fromTransaction(e,t){let i=Ft;for(let r of e.startState.facet(a_)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Rt(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,Ft)}static selection(e){return new Rt(void 0,Ft,void 0,void 0,e)}}function Tl(n,e,t,i){let r=e+1>t+20?e-t-1:0,s=n.slice(r,e);return s.push(i),s}function d_(n,e){let t=[],i=!1;return n.iterChangedRanges((r,s)=>t.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<t.length;){let c=t[a++],h=t[a++];l>=c&&o<=h&&(i=!0)}}),i}function p_(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,i)=>t.empty!=e.ranges[i].empty).length===0}function eb(n,e){return n.length?e.length?n.concat(e):n:e}const Ft=[],m_=200;function tb(n,e){if(n.length){let t=n[n.length-1],i=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-m_));return i.length&&i[i.length-1].eq(e)?n:(i.push(e),Tl(n,n.length-1,1e9,t.setSelAfter(i)))}else return[Rt.selection([e])]}function g_(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Oc(n,e){if(!n.length)return n;let t=n.length,i=Ft;for(;t;){let r=O_(n[t-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=n.slice(0,t);return s[t-1]=r,s}else e=r.mapped,t--,i=r.selectionsAfter}return i.length?[Rt.selection(i)]:Ft}function O_(n,e,t){let i=eb(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):Ft,t);if(!n.changes)return Rt.selection(i);let r=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Rt(r,ce.mapEffects(n.effects,e),o,n.startSelection.map(s),i)}const y_=/^(input\.type|delete)($|\.)/;class xn{constructor(e,t,i=0,r=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new xn(this.done,this.undone):this}addChanges(e,t,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||y_.test(i))&&(!l.selectionsAfter.length&&t-this.prevTime<r&&d_(l.changes,e.changes)||i=="input.type.compose")?o=Tl(o,o.length-1,s,new Rt(e.changes.compose(l.changes),eb(e.effects,l.effects),l.mapped,l.startSelection,Ft)):o=Tl(o,o.length,s,e),new xn(o,Ft,t,i)}addSelection(e,t,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Ft;return s.length>0&&t-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&p_(s[s.length-1],e)?this:new xn(tb(this.done,e),this.undone,t,i)}addMapping(e){return new xn(Oc(this.done,e),Oc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1];if(i&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Nh.of({side:e,rest:g_(r)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=r.length==1?Ft:r.slice(0,r.length-1);return s.mapped&&(o=Oc(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Nh.of({side:e,rest:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}xn.empty=new xn(Ft,Ft);const b_=[{key:"Mod-z",run:Jy,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Bh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Bh,preventDefault:!0},{key:"Mod-u",run:u_,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:f_,preventDefault:!0}];function _r(n,e){return N.create(n.ranges.map(e),n.mainIndex)}function _n(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function hn({state:n,dispatch:e},t){let i=_r(n.selection,t);return i.eq(n.selection)?!1:(e(_n(n,i)),!0)}function pa(n,e){return N.cursor(e?n.to:n.from)}function nb(n,e){return hn(n,t=>t.empty?n.moveByChar(t,e):pa(t,e))}function vt(n){return n.textDirectionAt(n.state.selection.main.head)==Ze.LTR}const ib=n=>nb(n,!vt(n)),rb=n=>nb(n,vt(n));function sb(n,e){return hn(n,t=>t.empty?n.moveByGroup(t,e):pa(t,e))}const x_=n=>sb(n,!vt(n)),S_=n=>sb(n,vt(n));function v_(n,e,t){if(e.type.prop(t))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function ma(n,e,t){let i=tt(n).resolveInner(e.head),r=t?ye.closedBy:ye.openedBy;for(let a=e.head;;){let c=t?i.childAfter(a):i.childBefore(a);if(!c)break;v_(n,c,r)?i=c:a=t?c.to:c.from}let s=i.type.prop(r),o,l;return s&&(o=t?bn(n,i.from,1):bn(n,i.to,-1))&&o.matched?l=t?o.end.to:o.end.from:l=t?i.to:i.from,N.cursor(l,t?-1:1)}const w_=n=>hn(n,e=>ma(n.state,e,!vt(n))),Q_=n=>hn(n,e=>ma(n.state,e,vt(n)));function ob(n,e){return hn(n,t=>{if(!t.empty)return pa(t,e);let i=n.moveVertically(t,e);return i.head!=t.head?i:n.moveToLineBoundary(t,e)})}const lb=n=>ob(n,!1),ab=n=>ob(n,!0);function cb(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function hb(n,e){let{state:t}=n,i=_r(t.selection,l=>l.empty?n.moveVertically(l,e,cb(n)):pa(l,e));if(i.eq(t.selection))return!1;let r=n.coordsAtPos(t.selection.main.head),s=n.scrollDOM.getBoundingClientRect(),o;return r&&r.top>s.top&&r.bottom<s.bottom&&r.top-s.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(o=J.scrollIntoView(i.main.head,{y:"start",yMargin:r.top-s.top})),n.dispatch(_n(t,i),{effects:o}),!0}const Up=n=>hb(n,!1),Ih=n=>hb(n,!0);function pi(n,e,t){let i=n.lineBlockAt(e.head),r=n.moveToLineBoundary(e,t);if(r.head==e.head&&r.head!=(t?i.to:i.from)&&(r=n.moveToLineBoundary(e,t,!1)),!t&&r.head==i.from&&i.length){let s=/^\s*/.exec(n.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=N.cursor(i.from+s))}return r}const C_=n=>hn(n,e=>pi(n,e,!0)),$_=n=>hn(n,e=>pi(n,e,!1)),k_=n=>hn(n,e=>pi(n,e,!vt(n))),P_=n=>hn(n,e=>pi(n,e,vt(n))),T_=n=>hn(n,e=>N.cursor(n.lineBlockAt(e.head).from,1)),A_=n=>hn(n,e=>N.cursor(n.lineBlockAt(e.head).to,-1));function R_(n,e,t){let i=!1,r=_r(n.selection,s=>{let o=bn(n,s.head,-1)||bn(n,s.head,1)||s.head>0&&bn(n,s.head-1,1)||s.head<n.doc.length&&bn(n,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return t?N.range(s.anchor,l):N.cursor(l)});return i?(e(_n(n,r)),!0):!1}const E_=({state:n,dispatch:e})=>R_(n,e,!1);function Kt(n,e){let t=_r(n.state.selection,i=>{let r=e(i);return N.range(i.anchor,r.head,r.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch(_n(n.state,t)),!0)}function ub(n,e){return Kt(n,t=>n.moveByChar(t,e))}const fb=n=>ub(n,!vt(n)),db=n=>ub(n,vt(n));function pb(n,e){return Kt(n,t=>n.moveByGroup(t,e))}const __=n=>pb(n,!vt(n)),M_=n=>pb(n,vt(n)),D_=n=>Kt(n,e=>ma(n.state,e,!vt(n))),N_=n=>Kt(n,e=>ma(n.state,e,vt(n)));function mb(n,e){return Kt(n,t=>n.moveVertically(t,e))}const gb=n=>mb(n,!1),Ob=n=>mb(n,!0);function yb(n,e){return Kt(n,t=>n.moveVertically(t,e,cb(n)))}const Vp=n=>yb(n,!1),Zp=n=>yb(n,!0),B_=n=>Kt(n,e=>pi(n,e,!0)),I_=n=>Kt(n,e=>pi(n,e,!1)),X_=n=>Kt(n,e=>pi(n,e,!vt(n))),U_=n=>Kt(n,e=>pi(n,e,vt(n))),V_=n=>Kt(n,e=>N.cursor(n.lineBlockAt(e.head).from)),Z_=n=>Kt(n,e=>N.cursor(n.lineBlockAt(e.head).to)),qp=({state:n,dispatch:e})=>(e(_n(n,{anchor:0})),!0),Lp=({state:n,dispatch:e})=>(e(_n(n,{anchor:n.doc.length})),!0),zp=({state:n,dispatch:e})=>(e(_n(n,{anchor:n.selection.main.anchor,head:0})),!0),Wp=({state:n,dispatch:e})=>(e(_n(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),q_=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),L_=({state:n,dispatch:e})=>{let t=Oa(n).map(({from:i,to:r})=>N.range(i,Math.min(r+1,n.doc.length)));return e(n.update({selection:N.create(t),userEvent:"select"})),!0},z_=({state:n,dispatch:e})=>{let t=_r(n.selection,i=>{var r;let s=tt(n).resolveInner(i.head,1);for(;!(s.from<i.from&&s.to>=i.to||s.to>i.to&&s.from<=i.from||!(!((r=s.parent)===null||r===void 0)&&r.parent));)s=s.parent;return N.range(s.to,s.from)});return e(_n(n,t)),!0},W_=({state:n,dispatch:e})=>{let t=n.selection,i=null;return t.ranges.length>1?i=N.create([t.main]):t.main.empty||(i=N.create([N.cursor(t.main.head)])),i?(e(_n(n,i)),!0):!1};function ga(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:i}=n,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(o);a<o?(t="delete.backward",a=Po(n,a,!1)):a>o&&(t="delete.forward",a=Po(n,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=Po(n,o,!1),l=Po(n,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:N.cursor(o)}});return r.changes.empty?!1:(n.dispatch(i.update(r,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?J.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Po(n,e,t){if(n instanceof J)for(let i of n.state.facet(J.atomicRanges).map(r=>r(n)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=t?s:r)});return e}const bb=(n,e)=>ga(n,t=>{let{state:i}=n,r=i.doc.lineAt(t),s,o;if(!e&&t>r.from&&t<r.from+200&&!/[^ \t]/.test(s=r.text.slice(0,t-r.from))){if(s[s.length-1]=="	")return t-1;let l=qs(s,i.tabSize),a=l%Ql(i)||Ql(i);for(let c=0;c<a&&s[s.length-1-c]==" ";c++)t--;o=t}else o=$t(r.text,t-r.from,e,e)+r.from,o==t&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);return o}),Xh=n=>bb(n,!1),xb=n=>bb(n,!0),Sb=(n,e)=>ga(n,t=>{let i=t,{state:r}=n,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==t&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=$t(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),h=o(c);if(l!=null&&h!=l)break;(c!=" "||i!=t)&&(l=h),i=a}return i}),vb=n=>Sb(n,!1),j_=n=>Sb(n,!0),wb=n=>ga(n,e=>{let t=n.lineBlockAt(e).to;return e<t?t:Math.min(n.state.doc.length,e+1)}),F_=n=>ga(n,e=>{let t=n.lineBlockAt(e).from;return e>t?t:Math.max(0,e-1)}),G_=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:we.of(["",""])},range:N.cursor(i.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},H_=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(i=>{if(!i.empty||i.from==0||i.from==n.doc.length)return{range:i};let r=i.from,s=n.doc.lineAt(r),o=r==s.from?r-1:$t(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:$t(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:n.doc.slice(r,l).append(n.doc.slice(o,r))},range:N.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Oa(n){let e=[],t=-1;for(let i of n.selection.ranges){let r=n.doc.lineAt(i.from),s=n.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=n.doc.lineAt(i.to-1)),t>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});t=s.number+1}return e}function Qb(n,e,t){if(n.readOnly)return!1;let i=[],r=[];for(let s of Oa(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),l=o.length+1;if(t){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let a of s.ranges)r.push(N.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let a of s.ranges)r.push(N.range(a.anchor-l,a.head-l))}}return i.length?(e(n.update({changes:i,scrollIntoView:!0,selection:N.create(r,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Y_=({state:n,dispatch:e})=>Qb(n,e,!1),K_=({state:n,dispatch:e})=>Qb(n,e,!0);function Cb(n,e,t){if(n.readOnly)return!1;let i=[];for(let r of Oa(n))t?i.push({from:r.from,insert:n.doc.slice(r.from,r.to)+n.lineBreak}):i.push({from:r.to,insert:n.lineBreak+n.doc.slice(r.from,r.to)});return e(n.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const J_=({state:n,dispatch:e})=>Cb(n,e,!1),eM=({state:n,dispatch:e})=>Cb(n,e,!0),tM=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Oa(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=_r(e.selection,r=>n.moveVertically(r,!0)).map(t);return n.dispatch({changes:t,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function nM(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=tt(n).resolveInner(e),i=t.childBefore(e),r=t.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ye.closedBy))&&s.indexOf(r.name)>-1&&n.doc.lineAt(i.to).from==n.doc.lineAt(r.from).from?{from:i.to,to:r.from}:null}const iM=$b(!1),rM=$b(!0);function $b(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!n&&s==o&&nM(e,s);n&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new ca(e,{simulateBreak:s,simulateDoubleBreak:!!a}),h=Bu(c,s);for(h==null&&(h=/^\s*/.exec(e.doc.lineAt(s).text)[0].length);o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let u=["",As(e,h)];return a&&u.push(As(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:we.of(u)},range:N.cursor(s+1+u[1].length)}});return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function ju(n,e){let t=-1;return n.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=n.doc.lineAt(o);l.number>t&&(i.empty||i.to>l.from)&&(e(l,r,i),t=l.number),o=l.to+1}let s=n.changes(r);return{changes:r,range:N.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const sM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),i=new ca(n,{overrideIndentation:s=>{let o=t[s];return o==null?-1:o}}),r=ju(n,(s,o,l)=>{let a=Bu(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],h=As(n,a);(c!=h||l.from<s.from+c.length)&&(t[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:h}))});return r.changes.empty||e(n.update(r,{userEvent:"indent"})),!0},kb=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ju(n,(t,i)=>{i.push({from:t.from,insert:n.facet(aa)})}),{userEvent:"input.indent"})),!0),Pb=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(ju(n,(t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=qs(r,n.tabSize),o=0,l=As(n,Math.max(0,s-Ql(n)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:t.from+o,to:t.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),oM=[{key:"Ctrl-b",run:ib,shift:fb,preventDefault:!0},{key:"Ctrl-f",run:rb,shift:db},{key:"Ctrl-p",run:lb,shift:gb},{key:"Ctrl-n",run:ab,shift:Ob},{key:"Ctrl-a",run:T_,shift:V_},{key:"Ctrl-e",run:A_,shift:Z_},{key:"Ctrl-d",run:xb},{key:"Ctrl-h",run:Xh},{key:"Ctrl-k",run:wb},{key:"Ctrl-Alt-h",run:vb},{key:"Ctrl-o",run:G_},{key:"Ctrl-t",run:H_},{key:"Ctrl-v",run:Ih}],lM=[{key:"ArrowLeft",run:ib,shift:fb,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:x_,shift:__,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:k_,shift:X_,preventDefault:!0},{key:"ArrowRight",run:rb,shift:db,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:S_,shift:M_,preventDefault:!0},{mac:"Cmd-ArrowRight",run:P_,shift:U_,preventDefault:!0},{key:"ArrowUp",run:lb,shift:gb,preventDefault:!0},{mac:"Cmd-ArrowUp",run:qp,shift:zp},{mac:"Ctrl-ArrowUp",run:Up,shift:Vp},{key:"ArrowDown",run:ab,shift:Ob,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Lp,shift:Wp},{mac:"Ctrl-ArrowDown",run:Ih,shift:Zp},{key:"PageUp",run:Up,shift:Vp},{key:"PageDown",run:Ih,shift:Zp},{key:"Home",run:$_,shift:I_,preventDefault:!0},{key:"Mod-Home",run:qp,shift:zp},{key:"End",run:C_,shift:B_,preventDefault:!0},{key:"Mod-End",run:Lp,shift:Wp},{key:"Enter",run:iM},{key:"Mod-a",run:q_},{key:"Backspace",run:Xh,shift:Xh},{key:"Delete",run:xb},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vb},{key:"Mod-Delete",mac:"Alt-Delete",run:j_},{mac:"Mod-Backspace",run:F_},{mac:"Mod-Delete",run:wb}].concat(oM.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Tb=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:w_,shift:D_},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Q_,shift:N_},{key:"Alt-ArrowUp",run:Y_},{key:"Shift-Alt-ArrowUp",run:J_},{key:"Alt-ArrowDown",run:K_},{key:"Shift-Alt-ArrowDown",run:eM},{key:"Escape",run:W_},{key:"Mod-Enter",run:rM},{key:"Alt-l",mac:"Ctrl-l",run:L_},{key:"Mod-i",run:z_,preventDefault:!0},{key:"Mod-[",run:Pb},{key:"Mod-]",run:kb},{key:"Mod-Alt-\\",run:sM},{key:"Shift-Mod-k",run:tM},{key:"Shift-Mod-\\",run:E_},{key:"Mod-/",run:e_},{key:"Alt-A",run:n_}].concat(lM),aM={key:"Tab",run:kb,shift:Pb};class Al{constructor(e,t,i,r,s,o,l,a,c,h=0,u){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=h,this.parent=u}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new Al(e,[],t,i,i,0,[],0,r?new jp(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=e&65535,{parser:r}=this.p,s=r.dynamicPrecedence(i);if(s&&(this.score+=s),t==0){this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),this.reduceContext(i,this.reducePos);return}let o=this.stack.length-(t-1)*3-(e&262144?6:0),l=this.stack[o-2],a=this.stack[o-1],c=this.bufferBase+this.buffer.length-a;if(i<r.minRepeatTerm||e&131072){let h=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,l,h,c+4,!0)}if(e&262144)this.state=this.stack[o];else{let h=this.stack[o-3];this.state=r.getGoto(h,i,!0)}for(;this.stack.length>o;)this.stack.pop();this.reduceContext(i,l)}storeNode(e,t,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(t==i)return;if(o.buffer[l-2]>=t){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,t,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4);this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,t,i){let r=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,i){e&65536?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new Al(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new cM(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(i==0)return!1;if((i&65536)==0)return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let r=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(t[s],o);if(this.stack.length<120)for(let s=0;r.length<4<<1&&s<t.length;s+=2){let o=t[s+1];r.some((l,a)=>a&1&&l==o)||r.push(t[s],o)}t=r}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let s=t[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[r],this.pos),o.score-=200,i.push(o)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,r=e&65535,s=this.stack.length-i*3;if(s<0||t.getGoto(this.stack[s],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new jp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class jp{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Fp;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Fp||(Fp={}));class cM{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Rl{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Rl(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Rl(this.stack,this.pos,this.index)}}class Wo{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Gp=new Wo;class hM{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Gp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,i,r;if(t>=0&&t<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Gp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class jo{constructor(e,t){this.data=e,this.id=t}token(e,t){uM(this.data,e,t,this.id)}}jo.prototype.contextual=jo.prototype.fallback=jo.prototype.extend=!1;class Gs{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function uM(n,e,t,i){let r=0,s=1<<i,{parser:o}=t.p,{dialect:l}=o;e:for(;(s&n[r])!=0;){let a=n[r+1];for(let f=r+3;f<a;f+=2)if((n[f+1]&s)>0){let d=n[f];if(l.allows(d)&&(e.token.value==-1||e.token.value==d||o.overrides(d,e.token.value))){e.acceptToken(d);break}}let c=e.next,h=0,u=n[r+2];if(e.next<0&&u>h&&n[a+u*3-3]==65535&&n[a+u*3-3]==65535){r=n[a+u*3-1];continue e}for(;h<u;){let f=h+u>>1,d=a+f+(f<<1),p=n[d],m=n[d+1]||65536;if(c<p)u=f;else if(c>=m)h=f+1;else{r=n[d+2],e.advance();continue e}}break}}function To(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let i=0,r=0;i<n.length;){let s=0;for(;;){let o=n.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}t?t[r++]=s:t=new e(s)}return t}const tn=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let yc=null;var Hp;(function(n){n[n.Margin=25]="Margin"})(Hp||(Hp={}));function Yp(n,e,t){let i=n.cursor(rt.IncludeAnonymous);for(i.moveTo(e);;)if(!(t<0?i.childBefore(e):i.childAfter(e)))for(;;){if((t<0?i.to<e:i.from>e)&&!i.type.isError)return t<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(n.length,Math.max(i.from+1,e+25));if(t<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return t<0?0:n.length}}class fM{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Yp(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Yp(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[t]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof Ge){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(ye.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}}class dM{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Wo)}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<s.length;c++){if((1<<c&o)==0)continue;let h=s[c],u=this.tokens[c];if(!(i&&!h.fallback)&&((h.contextual||u.start!=e.pos||u.mask!=o||u.context!=l)&&(this.updateCachedToken(u,h,e),u.mask=o,u.context=l),u.lookAhead>u.end+25&&(a=Math.max(u.lookAhead,a)),u.value!=0)){let f=t;if(u.extended>-1&&(t=this.addActions(e,u.extended,u.end,t)),t=this.addActions(e,u.value,u.end,t),!h.extend&&(i=u,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Wo,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Wo,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){let r=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){(l&1)==0?e.value=l>>1:e.extended=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(s,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Nn(l,c+2);else{r==0&&l[c+1]==2&&(r=this.putAction(Nn(l,c+2),t,i,r));break}l[c]==t&&(r=this.putAction(Nn(l,c+1),t,i,r))}return r}}var Kp;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(Kp||(Kp={}));class pM{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new hM(t,r),this.tokens=new dM(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[Al.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new fM(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,i=this.stacks=[],r,s;for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>t)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],s=[]),r.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=r&&OM(r);if(o)return this.stackToTree(o);if(this.parser.strict)throw tn&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>t)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this,o=tn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,h=c?e.curContext.hash:0;for(let u=this.fragments.nodeAt(r);u;){let f=this.parser.nodeSet.types[u.type.id]==u.type?s.getGoto(e.state,u.type.id):-1;if(f>-1&&u.length&&(!c||(u.prop(ye.contextHash)||0)==h))return e.useNode(u,f),tn&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(u.type.id)})`),!0;if(!(u instanceof Ge)||u.children.length==0||u.positions[0]>0)break;let d=u.children[0];if(d instanceof Ge&&u.positions[0]==0)u=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),tn&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let h=a[c++],u=a[c++],f=a[c++],d=c==a.length||!i,p=d?e:e.split();if(p.apply(h,u,f),tn&&console.log(o+this.stackID(p)+` (via ${(h&65536)==0?"shift":`reduce of ${s.getName(h&65535)}`} for ${s.getName(u)} @ ${r}${p==e?"":", split"})`),d)return!0;p.pos>r?t.push(p):i.push(p)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Jp(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],c=t[(o<<1)+1],h=tn?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),tn&&console.log(h+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let u=l.split(),f=h;for(let d=0;u.forceReduce()&&d<10&&(tn&&console.log(f+this.stackID(u)+" (via force-reduce)"),!this.advanceFully(u,i));d++)tn&&(f=this.stackID(u)+" -> ");for(let d of l.recoverByInsert(a))tn&&console.log(h+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),tn&&console.log(h+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),Jp(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),Ge.build({buffer:Rl.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(yc||(yc=new WeakMap)).get(e);return t||yc.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Jp(n,e){for(let t=0;t<e.length;t++){let i=e[t];if(i.pos==n.pos&&i.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class mM{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const bc=n=>n;class gM{constructor(e){this.start=e.start,this.shift=e.shift||bc,this.reduce=e.reduce||bc,this.reuse=e.reuse||bc,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class El extends Oy{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let l=0;l<e.repeatNodeCount;l++)t.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<t.length;l++)r.push([]);function s(l,a,c){r[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ye[a]);for(let c=1;c<l.length;){let h=l[c++];if(h>=0)s(h,a,l[c++]);else{let u=l[c+-h];for(let f=-h;f>0;f--)s(l[c++],a,u);c++}}}this.nodeSet=new _u(t.map((l,a)=>_t.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=py;let o=To(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(tm),this.states=To(e.states,Uint32Array),this.data=To(e.stateData),this.goto=To(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new jo(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new pM(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let o=r[s++],l=o&1,a=r[s++];if(l&&i)return a;for(let c=s+(o>>1);s<c;s++)if(r[s]==e)return a;if(l)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=Nn(i,s+2)];else{if(i[s+1]==2)return Nn(i,s+2);break}if(o==t||o==0)return Nn(i,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Nn(this.data,i+2);else return!1;if(t==Nn(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Nn(this.data,i+2);else break;if((this.data[i+2]&1)==0){let r=this.data[i+1];t.some((s,o)=>o&1&&s==r)||t.push(this.data[i],r)}}return t}overrides(e,t){let i=em(this.data,this.tokenPrecTable,t);return i<0||em(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(El.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return t.specializers[r]=tm(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let o=this.dialects[t[s]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new mM(e,i,r)}static deserialize(e){return new El(e)}}function Nn(n,e){return n[e]|n[e+1]<<16}function em(n,e,t){for(let i=e,r;(r=n[i])!=65535;i++)if(r==t)return i-e;return-1}function OM(n){let e=null;for(let t of n){let i=t.p.stoppedAt;(t.pos==t.p.stream.end||i!=null&&t.pos>i)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function tm(n){if(n.external){let e=n.extend?1:0;return(t,i)=>n.external(t,i)<<1|e}return n.get}const yM=1,nm=294,im=2,bM=3,Ao=295,xM=4,SM=296,rm=297,vM=299,wM=300,QM=5,CM=6,$M=1,kM=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Ab=125,PM=123,TM=59,sm=47,AM=42,RM=43,EM=45,_M=36,MM=96,DM=92,NM=new gM({start:!1,shift(n,e){return e==QM||e==CM||e==vM?n:e==wM},strict:!1}),BM=new Gs((n,e)=>{let{next:t}=n;(t==Ab||t==-1||e.context)&&e.canShift(rm)&&n.acceptToken(rm)},{contextual:!0,fallback:!0}),IM=new Gs((n,e)=>{let{next:t}=n,i;kM.indexOf(t)>-1||t==sm&&((i=n.peek(1))==sm||i==AM)||t!=Ab&&t!=TM&&t!=-1&&!e.context&&e.canShift(nm)&&n.acceptToken(nm)},{contextual:!0}),XM=new Gs((n,e)=>{let{next:t}=n;if((t==RM||t==EM)&&(n.advance(),t==n.next)){n.advance();let i=!e.context&&e.canShift(im);n.acceptToken(i?im:bM)}},{contextual:!0}),UM=new Gs(n=>{for(let e=!1,t=0;;t++){let{next:i}=n;if(i<0){t&&n.acceptToken(Ao);break}else if(i==MM){t?n.acceptToken(Ao):n.acceptToken(SM,1);break}else if(i==PM&&e){t==1?n.acceptToken(xM,1):n.acceptToken(Ao,-1);break}else if(i==10&&t){n.advance(),n.acceptToken(Ao);break}else i==DM&&n.advance();e=i==_M,n.advance()}}),VM=new Gs((n,e)=>{if(!(n.next!=101||!e.dialectEnabled($M))){n.advance();for(let t=0;t<6;t++){if(n.next!="xtends".charCodeAt(t))return;n.advance()}n.next>=57&&n.next<=65||n.next>=48&&n.next<=90||n.next==95||n.next>=97&&n.next<=122||n.next>160||n.acceptToken(yM)}}),ZM=yy({"get set async static":R.modifier,"for while do if else switch try catch finally return throw break continue default case":R.controlKeyword,"in of await yield void typeof delete instanceof":R.operatorKeyword,"let var const function class extends":R.definitionKeyword,"import export from":R.moduleKeyword,"with debugger as new":R.keyword,TemplateString:R.special(R.string),super:R.atom,BooleanLiteral:R.bool,this:R.self,null:R.null,Star:R.modifier,VariableName:R.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":R.function(R.variableName),VariableDefinition:R.definition(R.variableName),Label:R.labelName,PropertyName:R.propertyName,PrivatePropertyName:R.special(R.propertyName),"CallExpression/MemberExpression/PropertyName":R.function(R.propertyName),"FunctionDeclaration/VariableDefinition":R.function(R.definition(R.variableName)),"ClassDeclaration/VariableDefinition":R.definition(R.className),PropertyDefinition:R.definition(R.propertyName),PrivatePropertyDefinition:R.definition(R.special(R.propertyName)),UpdateOp:R.updateOperator,LineComment:R.lineComment,BlockComment:R.blockComment,Number:R.number,String:R.string,ArithOp:R.arithmeticOperator,LogicOp:R.logicOperator,BitOp:R.bitwiseOperator,CompareOp:R.compareOperator,RegExp:R.regexp,Equals:R.definitionOperator,Arrow:R.function(R.punctuation),": Spread":R.punctuation,"( )":R.paren,"[ ]":R.squareBracket,"{ }":R.brace,"InterpolationStart InterpolationEnd":R.special(R.brace),".":R.derefOperator,", ;":R.separator,"@":R.meta,TypeName:R.typeName,TypeDefinition:R.definition(R.typeName),"type enum interface implements namespace module declare":R.definitionKeyword,"abstract global Privacy readonly override":R.modifier,"is keyof unique infer":R.operatorKeyword,JSXAttributeValue:R.attributeValue,JSXText:R.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":R.angleBracket,"JSXIdentifier JSXNameSpacedName":R.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":R.attributeName,"JSXBuiltin/JSXIdentifier":R.standard(R.tagName)}),qM={__proto__:null,export:18,as:23,from:29,default:32,async:37,function:38,this:50,true:58,false:58,null:68,void:72,typeof:76,super:92,new:126,await:143,yield:145,delete:146,class:156,extends:158,public:213,private:213,protected:213,readonly:215,instanceof:234,satisfies:237,in:238,const:240,import:272,keyof:327,unique:331,infer:337,is:373,abstract:393,implements:395,type:397,let:400,var:402,interface:409,enum:413,namespace:419,module:421,declare:425,global:429,for:450,of:459,while:462,with:466,do:470,if:474,else:476,switch:480,case:486,try:492,catch:496,finally:500,return:504,throw:508,break:512,continue:516,debugger:520},LM={__proto__:null,async:113,get:115,set:117,public:175,private:175,protected:175,static:177,abstract:179,override:181,readonly:187,accessor:189,new:377},zM={__proto__:null,"<":133},WM=El.deserialize({version:14,states:"$CWO`QdOOO$}QdOOO)WQ(C|O'#ChO)_OWO'#DYO+jQdO'#D_O+zQdO'#DjO$}QdO'#DtO.OQdO'#DzOOQ(C['#ET'#ETO.fQ`O'#EQOOQO'#IW'#IWO.nQ`O'#GgOOQO'#Ee'#EeO.yQ`O'#EdO/OQ`O'#EdO1QQ(C|O'#JQO3nQ(C|O'#JRO4_Q`O'#FSO4dQ!bO'#FkOOQ(C['#F['#F[O4oO#tO'#F[O4}Q&jO'#FrO6bQ`O'#FqOOQ(C['#JR'#JROOQ(CW'#JQ'#JQOOQS'#Jk'#JkO6gQ`O'#H{O6lQ(ChO'#H|OOQS'#Iu'#IuOOQS'#IO'#IOQ`QdOOO$}QdO'#DlO6tQ`O'#GgO6yQ&jO'#CmO7XQ`O'#EcO7dQ`O'#EnO7iQ&jO'#FZO8TQ`O'#GgO8YQ`O'#GkO8eQ`O'#GkO8sQ`O'#GnO8sQ`O'#GoO8sQ`O'#GqO6tQ`O'#GtO9dQ`O'#GwO:uQ`O'#CdO;VQ`O'#HUO;_Q`O'#H[O;_Q`O'#H^O`QdO'#H`O;_Q`O'#HbO;_Q`O'#HeO;dQ`O'#HkO;iQ(CjO'#HqO$}QdO'#HsO;tQ(CjO'#HuO<PQ(CjO'#HwO6lQ(ChO'#HyO<[Q(C|O'#ChO<xQ,UO'#DdQOQ`OOO=mQaO'#D{O6yQ&jO'#EcO={Q`O'#EcO>WQpO'#FZO$}QdO'#DZOOOW'#IQ'#IQO>`OWO,59tOOQ(C[,59t,59tO>kQdO'#IRO?OQ`O'#JSOAQQtO'#JSO)jQdO'#JSOAXQ`O,59yOAoQ`O'#EeOA|Q`O'#J`OBXQ`O'#J_OBXQ`O'#J_OBaQ`O,5;ROBfQ`O'#J^OOQ(C[,5:U,5:UOBmQdO,5:UODnQ(C|O,5:`OE_Q`O,5:fOEdQ`O'#J[OF^Q(ChO'#J]O8YQ`O'#J[OFeQ`O'#J[OFmQ`O,5;QOFrQ`O'#J[OOQ(C]'#Ch'#ChO$}QdO'#DzOGfQpO,5:lOOQO'#JX'#JXOOQO-E<U-E<UO6tQ`O,5=ROG|Q`O,5=ROHRQdO,5;OOJRQ&jO'#E`OKcQ`O,5;OOLxQ&jO'#DnOMPQdO'#DsOMZQ,UO,5;XOMcQ,UO,5;XO$}QdO,5;XOOQS'#Ez'#EzOOQS'#E|'#E|O$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YO$}QdO,5;YOOQS'#FQ'#FQOMqQdO,5;kOOQ(C[,5;p,5;pOOQ(C[,5;q,5;qO! qQ`O,5;qOOQ(C[,5;r,5;rO$}QdO'#I^O! yQ(ChO,5<_OJRQ&jO,5;YO!!hQ&jO,5;YO$}QdO,5;nO!!oQ!bO'#FaO!#lQ!bO'#JdO!#WQ!bO'#JdO!#sQ!bO'#JdOOQO'#Jd'#JdO!$XQ!bO,5;yOOOO,5<V,5<VO!$jQdO'#FmOOOO'#I]'#I]O4oO#tO,5;vO!$qQ!bO'#FoOOQ(C[,5;v,5;vO!%bQ7]O'#CsOOQ(C]'#Cv'#CvO!%uQ`O'#CvO!%zOWO'#CzO!&hQ&kO,5<[O!&oQ`O,5<^O!(RQMhO'#F|O!(`Q`O'#F}O!(eQ`O'#F}O!(jQMhO'#GRO!)iQ,UO'#GVO!*_Q7]O'#I}OOQ(C]'#I}'#I}O!+eQaO'#I|O!+sQ`O'#I{O!+{Q`O'#CrOOQ(C]'#Ct'#CtOOQ(C]'#C}'#C}OOQ(C]'#DP'#DPO.iQ`O'#DROKhQ&jO'#FtOKhQ&jO'#FvO!,TQ`O'#FxO!,YQ`O'#FyO!(eQ`O'#GPOKhQ&jO'#GUO!,_Q`O'#EfO!,yQ`O,5<]O`QdO,5>gOOQS'#Ix'#IxOOQS,5>h,5>hOOQS-E;|-E;|O!.xQ(C|O,5:WOOQ(CX'#Cp'#CpO!/lQ&kO,5=ROOQO'#Cf'#CfO!/}Q(ChO'#IyO6bQ`O'#IyO;dQ`O,59XO!0`Q!bO,59XO!0hQ&jO,59XO6yQ&jO,59XO!0sQ`O,5;OO!0{Q`O'#HTO!1ZQ`O'#JoO$}QdO,5;sO!1cQ,UO,5;uO!1hQ`O,5=nO!1mQ`O,5=nO!1rQ`O,5=nO6lQ(ChO,5=nO!2QQ`O'#EgO!2wQ,UO'#EhOOQ(CW'#J^'#J^O!3OQ(ChO'#JlO6lQ(ChO,5=VO8sQ`O,5=]OOQP'#Cs'#CsO!3ZQ!bO,5=YO!3cQ!cO,5=ZO!3nQ`O,5=]O!3sQpO,5=`O;dQ`O'#GyO6tQ`O'#G{O!3{Q`O'#G{O6yQ&jO'#HOO!4QQ`O'#HOOOQS,5=c,5=cO!4VQ`O'#HPO!4_Q`O'#CmO!4dQ`O,59OO!4nQ`O,59OO!6sQdO,59OOOQS,59O,59OO!7QQ(ChO,59OO$}QdO,59OO!7]QdO'#HWOOQS'#HX'#HXOOQS'#HY'#HYO`QdO,5=pO!7mQ`O,5=pO`QdO,5=vO`QdO,5=xO!7rQ`O,5=zO`QdO,5=|O!7wQ`O,5>PO!7|QdO,5>VOOQS,5>],5>]O$}QdO,5>]O6lQ(ChO,5>_OOQS,5>a,5>aO!<QQ`O,5>aOOQS,5>c,5>cO!<QQ`O,5>cOOQS,5>e,5>eO!<VQ!bO'#DWOOQ(CW'#JU'#JUO$}QdO'#JUO!<tQ!bO'#JUO!=cQ!bO'#DeO!=tQ,UO'#DeO!@PQdO'#DeO!@WQ`O'#JTO!@`Q`O,5:OO!@eQ`O'#EiO!@sQ`O'#JaO!@{Q`O,5;SO!AcQ,UO'#DeO!AmQ,UO'#EOOOQ(C[,5:g,5:gO$}QdO,5:gOJRQ&jO,5:gO!BjQaO,5:gO;dQ`O,5:}O!0`Q!bO,5:}O!0hQ&jO,5:}O6yQ&jO,5:}O!BuQpO,59uOOOW-E<O-E<OOOQ(C[1G/`1G/`O!BzQtO,5>mO)jQdO,5>mOOQO,5>s,5>sO!CUQdO'#IROOQO-E<P-E<PO!CcQ`O,5?nO!CkQtO,5?nO!CrQ`O,5?yOOQ(C[1G/e1G/eO$}QdO,5?zO!CzQ`O'#IXOOQO-E<V-E<VO!CrQ`O,5?yOOQ(CW1G0m1G0mOOQ(C[1G/p1G/pOOQ(C[1G0Q1G0QO!D`Q`O,5?vO8YQ`O,5?vO!DhQ`O,5?vOOQ(CW'#E_'#E_O$}QdO,5?wO!DvQ(ChO,5?wO!EXQ(ChO,5?wO!E`Q`O'#IZO!D`Q`O,5?vOOQ(CW1G0l1G0lOMZQ,UO,5:nOMfQ,UO,5:nOOQO,5:p,5:pO!E}Q`O,5:pO!FVQ&kO1G2mO6tQ`O1G2mOOQ(C[1G0j1G0jO!FhQ(C|O1G0jO!GmQ(CyO,5:zOOQ(C]'#F{'#F{O!JWQ(C}O'#I}OHRQdO1G0jO!J}Q&kO'#JVO!KXQ`O,5:YO!K^QtO'#JWO$}QdO'#JWO!KhQ`O,5:_OOQ(C]'#DW'#DWOOQ(C[1G0s1G0sO$}QdO1G0sOOQ(C[1G1]1G1]O!KmQ`O1G0sO!NUQ(C|O1G0tO!N]Q(C|O1G0tO#!vQ(C|O1G0tO#!}Q(C|O1G0tO#%XQ(C|O1G0tO#%oQ(C|O1G0tO#(iQ(C|O1G0tO#(pQ(C|O1G0tO#+ZQ(C|O1G0tO#+bQ(C|O1G0tO#-YQ(C|O1G0tO#0YQ!LUO'#ChO#2WQ!LUO1G1VO#4UQ!LUO'#JRO! tQ`O1G1]O#4iQ(C|O,5>xOOQ(CW-E<[-E<[O#5]Q(C}O1G0tOOQ(C[1G0t1G0tO#7hQ(C|O1G1YO#8[Q!bO,5;}O#8dQ!bO,5<OO#8lQ!bO'#FfO#9TQ`O'#FeOOQO'#Je'#JeOOQO'#I['#I[O#9YQ!bO1G1eOOQ(C[1G1e1G1eOOOO1G1p1G1pO#9kQ!LUO'#JQO#9uQ`O,5<XOMqQdO,5<XOOOO-E<Z-E<ZOOQ(C[1G1b1G1bOOQ(C[,5<Z,5<ZO#9zQ!bO,5<ZOOQ(C],59b,59bOJRQ&jO'#C|OOOW'#IP'#IPO#:POWO,59fOOQ(C],59f,59fO$}QdO1G1vO!,YQ`O'#I`O#:[Q`O,5<oOOQ(C],5<l,5<lOOQO'#Gb'#GbOKhQ&jO,5<{OOQO'#Gd'#GdOKhQ&jO,5<}OJRQ&jO,5=POOQO1G1x1G1xO#:gQqO'#CpO#:zQqO,5<hO#;RQ`O'#JhO6tQ`O'#JhO#;aQ`O,5<jOKhQ&jO,5<iO#;fQ`O'#GOO#;qQ`O,5<iO#;vQqO'#F{O#<TQqO'#JiO#<_Q`O'#JiOJRQ&jO'#JiO#<dQ`O,5<mOOQ(CW'#Di'#DiO#<iQ!bO'#GWO!)dQ,UO'#GWO#<zQ`O'#GYO#=PQ`O'#G[O!(eQ`O'#G_O#=UQ(ChO'#IbO#=aQ,UO,5<qOOQ(C],5<q,5<qO#=hQ,UO'#GWO#=vQ,UO'#GXO#>OQ,UO'#GXOOQ(C],5=Q,5=QOKhQ&jO,5?hOKhQ&jO,5?hO#>TQ`O'#IcO#>`Q`O,5?gO#>hQ`O,59^O#?XQ&kO,59mOOQ(C],59m,59mO#?zQ&kO,5<`O#@mQ&kO,5<bO#@wQ`O,5<dOOQ(C],5<e,5<eO#@|Q`O,5<kO#ARQ&kO,5<pOHRQdO1G1wO#AcQ`O1G1wOOQS1G4R1G4ROOQ(C[1G/r1G/rO! qQ`O1G/rOOQS1G2m1G2mOJRQ&jO1G2mO$}QdO1G2mOJRQ&jO1G2mO#AhQaO1G2mO#CQQ&jO'#E`OOQ(CW,5?e,5?eO#C[Q(ChO,5?eOOQS1G.s1G.sO;dQ`O1G.sO!0`Q!bO1G.sO!0hQ&jO1G.sO#CmQ`O1G0jO#CrQ`O'#ChO#C}Q`O'#JpO#DVQ`O,5=oO#D[Q`O'#JpO#DaQ`O'#JpO#DiQ`O'#IkO#DwQ`O,5@ZO#EPQtO1G1_OOQ(C[1G1a1G1aO6tQ`O1G3YO#EWQ`O1G3YO#E]Q`O1G3YO#EbQ`O1G3YOOQS1G3Y1G3YO8YQ`O'#J_O8YQ`O'#EiO$}QdO'#EiO8YQ`O'#IeO#EgQ(ChO,5@WOOQS1G2q1G2qO!3nQ`O1G2wOJRQ&jO1G2tO#ErQ`O1G2tOOQS1G2u1G2uOJRQ&jO1G2uO#EwQaO1G2uO#FPQ,UO'#GsOOQS1G2w1G2wO!)dQ,UO'#IgO!3sQpO1G2zOOQS1G2z1G2zOOQS,5=e,5=eO#FXQ&kO,5=gO6tQ`O,5=gO#=PQ`O,5=jO6bQ`O,5=jO!0`Q!bO,5=jO!0hQ&jO,5=jO6yQ&jO,5=jO#FjQ`O'#JnO#FuQ`O,5=kOOQS1G.j1G.jO#FzQ(ChO1G.jO#GVQ`O1G.jO#G[Q`O1G.jO6lQ(ChO1G.jO#GdQtO,5@]O#GnQ`O,5@]O#GyQdO,5=rO#HQQ`O,5=rO8YQ`O,5@]OOQS1G3[1G3[O`QdO1G3[OOQS1G3b1G3bOOQS1G3d1G3dO;_Q`O1G3fO#HVQdO1G3hO#LTQdO'#HgOOQS1G3k1G3kO#LbQ`O'#HmO;dQ`O'#HoOOQS1G3q1G3qO#LjQdO1G3qO6lQ(ChO1G3wOOQS1G3y1G3yOOQ(CW'#GS'#GSO6lQ(ChO1G3{O6lQ(ChO1G3}O$!kQ`O,5?pOMqQdO,5;TO8YQ`O,5;TO;dQ`O,5:POMqQdO,5:PO$}QdO'#JUO!0`Q!bO,5:PO$!pQ!LUO,5:POOQO,5;T,5;TO$!zQ,UO'#ISO$#bQ`O,5?oOOQ(C[1G/j1G/jO$#jQ,UO'#IYO$#tQ`O,5?{OOQ(CW1G0n1G0nO!=tQ,UO,5:PO$#|Q,UO'#E[OOQ(CW'#EZ'#EZO$$sQ(DjO'#E[O$%_Q,UO'#EPOOQO'#IV'#IVO$%pQ,UO,5:jOOQ(C[,5:j,5:jO$&mQ,UO'#EPO$&zQ,UO'#EPO$'[Q,UO'#EbO$'_Q,UO'#E[O$'xQ,UO'#E[O$%_Q,UO'#E[O$(iQ`O1G0RO$(nQqO1G0ROOQ(C[1G0R1G0RO$}QdO1G0ROJRQ&jO1G0ROOQ(C[1G0i1G0iO;dQ`O1G0iO!0`Q!bO1G0iO!0hQ&jO1G0iOOOW1G/a1G/aO$(uQpO,5<_O$(}QtO1G4XOOQO1G4_1G4_O$}QdO,5>mO$)XQ`O1G5YO$)aQ`O1G5eO$)iQtO1G5fO8YQ`O,5>sO$)sQ`O1G5bO$)sQ`O1G5bO8YQ`O1G5bO$){Q(C|O1G5cO$}QdO1G5cO$*]Q(ChO1G5cO$*nQ`O,5>uO8YQ`O,5>uOOQO,5>u,5>uO$+SQ`O,5>uOOQO-E<X-E<XOOQO1G0Y1G0YOOQO1G0[1G0[O! tQ`O1G0[OOQS7+(X7+(XOJRQ&jO7+(XO$}QdO7+(XOJRQ&jO7+(XO$+bQaO7+(XO$+pQ&kO7+(XO$,RQ(C}O,59mO$.ZQ(C}O,5<`O$0fQ(C}O,5<bO$2qQ(C}O,5<pOOQ(C[7+&U7+&UO$5SQ(C|O7+&UO$5vQ&jO'#ITO$6QQ`O,5?qOOQ(C]1G/t1G/tO$6YQdO'#IUO$6gQ`O,5?rO$6oQtO,5?rOOQ(C[1G/y1G/yO$6yQ`O7+&_OOQ(C[7+&_7+&_O$7OQ!LUO,5:`O$}QdO7+&qO$7YQ!LUO,5:WOOQ(C[7+&w7+&wOOQO1G1i1G1iOOQO1G1j1G1jO$7gQ$ISO,5<QOMqQdO,5<POOQO-E<Y-E<YOOQ(C[7+'P7+'POOOO7+'[7+'[OOOO1G1s1G1sO$7rQ`O1G1sOOQ(C[1G1u1G1uO$7wQqO,59hOOOW-E;}-E;}OOQ(C]1G/Q1G/QO$8OQ(C|O7+'bOOQ(C],5>z,5>zO$8rQ`O,5>zOOQ(C]1G2Z1G2ZP$8wQ`O'#I`POQ(C]-E<^-E<^O$9hQ&kO1G2gO$:ZQ&kO1G2iO$:eQqO1G2kOOQ(C]1G2S1G2SO$:lQ`O'#I_O$:zQ`O,5@SO$:zQ`O,5@SO$;SQ`O,5@SO$;_Q`O,5@SOOQO1G2U1G2UO$;mQ&kO1G2TOKhQ&jO1G2TO$;}QMhO'#IaO$<_Q`O,5@TOJRQ&jO,5@TO$<gQqO,5@TOOQ(C]1G2X1G2XOOQ(CW,5<r,5<rOOQ(CW,5<s,5<sO$<qQ`O,5<sO#<uQ`O,5<sO!0`Q!bO,5<rOOQO'#GZ'#GZO$<vQ`O,5<tOOQ(CW,5<v,5<vO$<qQ`O,5<yOOQO,5>|,5>|OOQO-E<`-E<`OOQ(C]1G2]1G2]O!)dQ,UO,5<rO$=OQ`O,5<sO#<zQ`O,5<tO!)dQ,UO,5<sO$=ZQ&kO1G5SO$=eQ&kO1G5SOOQO,5>},5>}OOQO-E<a-E<aOOQP1G.x1G.xO!1cQ,UO,59oO$}QdO,59oO$=rQ`O1G2OOKhQ&jO1G2VO$=wQ(C|O7+'cOOQ(C[7+'c7+'cOHRQdO7+'cOOQ(C[7+%^7+%^O$>kQqO'#JjO$(iQ`O7+(XO$>uQ`O7+(XO$>}QqO7+(XO$?XQ(CyO'#ChO$?lQ(CyO,5<wO$@^Q`O,5<wOOQ(CW1G5P1G5POOQS7+$_7+$_O;dQ`O7+$_O!0`Q!bO7+$_OHRQdO7+&UO$@cQ`O'#IjO$@tQ`O,5@[OOQO1G3Z1G3ZO6tQ`O,5@[O$@tQ`O,5@[O$@|Q`O,5@[OOQO,5?V,5?VOOQO-E<i-E<iOOQ(C[7+&y7+&yO$ARQ`O7+(tO6lQ(ChO7+(tO6tQ`O7+(tO$AWQ`O7+(tO$A]Q`O,5;TOOQ(CW,5?P,5?POOQ(CW-E<c-E<cOOQS7+(c7+(cO$AbQ(CyO7+(`OJRQ&jO7+(`O$AlQqO7+(aOOQS7+(a7+(aOJRQ&jO7+(aO$AsQ`O'#JmO$BOQ`O,5=_OOQO,5?R,5?ROOQO-E<e-E<eOOQS7+(f7+(fO$CUQ,UO'#G|OOQS1G3R1G3ROJRQ&jO1G3RO$}QdO1G3ROJRQ&jO1G3RO$C]QaO1G3RO$CkQ&kO1G3RO6lQ(ChO1G3UO#=PQ`O1G3UO6bQ`O1G3UO!0`Q!bO1G3UO!0hQ&jO1G3UO$C|Q`O'#IiO$DXQ`O,5@YO$DaQ,UO,5@YOOQ(CW1G3V1G3VOOQS7+$U7+$UO$DiQ`O7+$UO6lQ(ChO7+$UO$DnQ`O7+$UO$}QdO1G5wO$}QdO1G5xO$DsQdO1G3^O$DzQ`O1G3^O$EPQdO1G3^O$EWQ(ChO1G5wOOQS7+(v7+(vO6lQ(ChO7+)QO`QdO7+)SOOQS'#Js'#JsOOQS'#Il'#IlO$EbQdO,5>ROOQS,5>R,5>RO$}QdO'#HhO$EoQ`O'#HjOOQS,5>X,5>XO8YQ`O,5>XOOQS,5>Z,5>ZOOQS7+)]7+)]OOQS7+)c7+)cOOQS7+)g7+)gOOQS7+)i7+)iO$EtQ!bO1G5[O$FYQ!LUO1G0oO$FdQ`O1G0oOOQO1G/k1G/kO$FoQ!LUO1G/kO$FyQ`O,5?pO;dQ`O1G/kOMqQdO'#DeOOQO,5>n,5>nOOQO-E<Q-E<QOOQO,5>t,5>tOOQO-E<W-E<WO!0`Q!bO1G/kO$GOQ7[O,5:lO$HOQ(DjO,5:vO$%_Q,UO,5:kO$HjQ,UO,5:kO$HwQ,UO,5:kO$IXQ,UO,5:vO$IrQ,UO,5:vO$%_Q,UO,5:vO;dQ`O,5:kOOQO,5:v,5:vO$}QdO,5:vO$JcQ(ChO,5:vO$JnQ(ChO,5:vO!0`Q!bO,5:kOOQO-E<T-E<TOOQ(C[1G0U1G0UOOQO,5:|,5:|O$J|Q(ChO,5:vOOQ(C[7+%m7+%mO$(iQ`O7+%mO$(nQqO7+%mOOQ(C[7+&T7+&TO;dQ`O7+&TO!0`Q!bO7+&TO$KbQ`O7+*|O$KbQ`O7+*|O$KjQ(C|O7+*}O$}QdO7+*}OOQO1G4a1G4aO8YQ`O1G4aO$KzQ`O1G4aOOQO7+%v7+%vO$(iQ`O<<KsO$LYQ`O<<KsO$LbQqO<<KsOOQS<<Ks<<KsOJRQ&jO<<KsO$}QdO<<KsOJRQ&jO<<KsO$LlQaO<<KsO$LzQ(C}O1G2gO% VQ(C}O1G2iO%#bQ(C}O1G2TO%%sQ&kO,5>oOOQO-E<R-E<RO%%}QtO,5>pO$}QdO,5>pOOQO-E<S-E<SO%&XQ`O1G5^OOQ(C[<<Iy<<IyO%&aQ!LUO1G0jO%(kQ!LUO1G0tO%(rQ!LUO1G0tO%*vQ!LUO1G0tO%*}Q!LUO1G0tO%,rQ!LUO1G0tO%-YQ!LUO1G0tO%/mQ!LUO1G0tO%/tQ!LUO1G0tO%1xQ!LUO1G0tO%2PQ!LUO1G0tO%3wQ!LUO1G0tO%4[Q(C|O<<J]O%5aQ!LVO1G0tO%7VQ!LVO'#I}O%7aQ!LUO1G1YOMqQdO'#FhOOQO'#Jf'#JfOOQO1G1l1G1lO%7nQ`O1G1kO%7sQ!LUO,5>xOOOO7+'_7+'_OOOW1G/S1G/SOOQ(C]1G4f1G4fOKhQ&jO7+(VO%7}Q`O,5>yO6tQ`O,5>yOOQO-E<]-E<]O%8]Q`O1G5nO%8]Q`O1G5nO%8eQ`O1G5nO%8pQ&kO7+'oO%9QQqO,5>{O%9[Q`O,5>{OJRQ&jO,5>{OOQO-E<_-E<_O%9aQqO1G5oO%9kQ`O1G5oOOQ(CW1G2_1G2_O$<qQ`O1G2_OOQ(CW1G2^1G2^O%9sQ`O1G2`OJRQ&jO1G2`OOQ(CW1G2e1G2eO!0`Q!bO1G2^O#<uQ`O1G2_O%9xQ`O1G2`O%:QQ`O1G2_OKhQ&jO7+*nOOQ(C]1G/Z1G/ZO%:]Q`O1G/ZOOQ(C]7+'j7+'jO%:bQ&kO7+'qO%:rQ(C|O<<J}OOQ(C[<<J}<<J}OJRQ&jO'#IdO%;fQ`O,5@UOJRQ&jO1G2cOOQS<<Gy<<GyO;dQ`O<<GyO%;nQ(C|O<<IpOOQ(C[<<Ip<<IpOOQO,5?U,5?UO%<bQ`O,5?UO%<gQ`O,5?UOOQO-E<h-E<hO%<oQ`O1G5vO%<oQ`O1G5vO6tQ`O1G5vO%<wQ`O<<L`OOQS<<L`<<L`O%<|Q`O<<L`O6lQ(ChO<<L`O%=RQ`O1G0oOOQS<<Kz<<KzO$AbQ(CyO<<KzOOQS<<K{<<K{O$AlQqO<<K{O%=WQ,UO'#IfO%=cQ`O,5@XOMqQdO,5@XOOQS1G2y1G2yO%=kQ(DjO'#JUO%>VQdO'#JUO%>^Q,UO'#E[O%>tQ(ChO'#E[O$$sQ(DjO'#E[O$%hQ,UO'#G}OOQO'#Ih'#IhO%?YQ,UO,5=hOOQS,5=h,5=hO%?aQ,UO'#E[O%?rQ,UO'#E[O%@YQ,UO'#E[O%@vQ,UO'#G}O%AXQ`O7+(mO%A^Q`O7+(mO%AfQqO7+(mOOQS7+(m7+(mOJRQ&jO7+(mO$}QdO7+(mOJRQ&jO7+(mO%ApQaO7+(mOOQS7+(p7+(pO6lQ(ChO7+(pO#=PQ`O7+(pO6bQ`O7+(pO!0`Q!bO7+(pO%BOQ`O,5?TOOQO-E<g-E<gOOQO'#HQ'#HQO%BZQ`O1G5tO6lQ(ChO<<GpOOQS<<Gp<<GpO%BcQ`O<<GpO%BhQ`O7++cO%BmQ`O7++dOOQS7+(x7+(xO%BrQ`O7+(xO%BwQdO7+(xO%COQ`O7+(xO$}QdO7++cO$}QdO7++dOOQS<<Ll<<LlOOQS<<Ln<<LnOOQS-E<j-E<jOOQS1G3m1G3mO%CTQ`O,5>SOOQS,5>U,5>UO%CYQ`O1G3sO8YQ`O7+&ZOMqQdO7+&ZOOQ(CW1G5[1G5[OOQO7+%V7+%VO%C_Q!LUO1G5fO;dQ`O7+%VO;dQ`O1G0VOOQO1G0b1G0bO$}QdO1G0bO%CiQ(ChO1G0bO%CtQ(ChO1G0bO!0`Q!bO1G0VO$%_Q,UO1G0VO%DSQ,UO1G0VO%DaQ(DjO1G0bO%D{Q,UO1G0VO$%_Q,UO1G0bO%E]Q,UO1G0bO%EvQ(ChO1G0bOOQO1G0V1G0VO%F[Q(C|O1G0bOOQ(C[<<IX<<IXOOQ(C[<<Io<<IoO;dQ`O<<IoO%FfQ`O<<NhO%FnQ(C|O<<NiOOQO7+){7+){O8YQ`O7+){OOQSANA_ANA_OJRQ&jOANA_O$(iQ`OANA_O%GOQ`OANA_O%GWQqOANA_O$}QdOANA_OJRQ&jOANA_O%GbQ(C}O7+'oO%IsQ(C}O7+'qO%LUQtO1G4[O%L`Q!LUO7+&UO%MUQ!LVO,59mO& YQ!LVO,5<`O&#aQ!LVO,5<bO&%SQ!LVO,5<pO&&xQ!LUO7+'bO&'VQ!LUO7+'cO&'dQ`O,5<SOOQO7+'V7+'VO&'iQ&kO<<KqOOQO1G4e1G4eO&'pQ`O1G4eO&'{Q`O1G4eO&(ZQ`O7++YO&(ZQ`O7++YOJRQ&jO1G4gO&(cQqO1G4gO&(mQ`O7++ZOOQ(CW7+'y7+'yO$<qQ`O7+'zO&(uQqO7+'zOOQ(CW7+'x7+'xO$<qQ`O7+'yO&(|Q`O7+'zOJRQ&jO7+'zO#<uQ`O7+'yO&)RQ&kO<<NYOOQ(C]7+$u7+$uO&)]QqO,5?OOOQO-E<b-E<bO&)gQ(CyO7+'}OOQSAN=eAN=eO6tQ`O1G4pOOQO1G4p1G4pO&)wQ`O1G4pO&)|Q`O7++bO&)|Q`O7++bO6lQ(ChOANAzO&*UQ`OANAzOOQSANAzANAzOOQSANAfANAfOOQSANAgANAgO&*ZQ`O,5?QOOQO-E<d-E<dO&*fQ!LUO1G5sO#=PQ`O,5=iO6bQ`O,5=iO&,vQtO'#ChO&-QQ,UO,5:vO&-[Q,UO,5:vO!0`Q!bO,5=iOOQO-E<f-E<fOOQS1G3S1G3SO%>VQdO,5<tO%=kQ(DjO,5=iO$HOQ(DjO,5:vO$%hQ,UO,5=iO&-lQ,UO,5=iO&-}Q,UO,5:vOOQS<<LX<<LXOJRQ&jO<<LXO%AXQ`O<<LXO&.eQ`O<<LXO&.mQqO<<LXO$}QdO<<LXOJRQ&jO<<LXOOQS<<L[<<L[O6lQ(ChO<<L[O#=PQ`O<<L[O6bQ`O<<L[O&.wQ,UO1G4oO&/PQ`O7++`OOQSAN=[AN=[O6lQ(ChOAN=[OOQS<<N}<<N}OOQS<= O<= OOOQS<<Ld<<LdO&/XQ`O<<LdO&/^QdO<<LdO&/eQ`O<<N}O&/jQ`O<= OOOQS1G3n1G3nO;dQ`O7+)_O&/oQ`O<<IuO&/zQ!LUO<<IuOOQO<<Hq<<HqOOQO7+%q7+%qO%F[Q(C|O7+%|OOQO7+%|7+%|O$}QdO7+%|O&0UQ(ChO7+%|O;dQ`O7+%qO!0`Q!bO7+%qO$%_Q,UO7+%qO&0aQ(ChO7+%|O&0oQ,UO7+%qO&0|Q(ChO7+%|O&1bQ(DjO7+%|O&1lQ,UO7+%qO$%_Q,UO7+%|OOQ(C[AN?ZAN?ZOOQO<<Mg<<MgO$(iQ`OG26yOOQSG26yG26yOJRQ&jOG26yO&1|Q`OG26yO&2UQqOG26yO&2`Q!LUO<<J]O&2mQ!LVO1G2TO&4wQ!LVO1G2gO&7OQ!LVO1G2iO&8qQ!LUO<<J}O&9OQ!LUO<<IpOOQO1G1n1G1nOKhQ&jOANA]OOQO7+*P7+*PO&9]Q`O7+*PO&9hQ`O<<NtO&9pQqO7+*ROOQ(CW<<Kf<<KfO$<qQ`O<<KfOOQ(CW<<Ke<<KeO&9zQqO<<KfO$<qQ`O<<KeOOQO7+*[7+*[O6tQ`O7+*[O&:RQ`O<<N|OOQSG27fG27fO6lQ(ChOG27fOMqQdO1G4lO&:ZQ`O7++_O6lQ(ChO1G3TO#=PQ`O1G3TO&:cQ,UO1G0bO6bQ`O1G3TO!0`Q!bO1G3TO$%hQ,UO1G3TO%=kQ(DjO1G3TO%DaQ(DjO1G0bO&:mQ,UO1G3TO%AXQ`OANAsOOQSANAsANAsOJRQ&jOANAsO&;OQ`OANAsO&;WQqOANAsOOQSANAvANAvO6lQ(ChOANAvO#=PQ`OANAvOOQO'#HR'#HROOQO7+*Z7+*ZOOQSG22vG22vOOQSANBOANBOO&;bQ`OANBOOOQSANDiANDiOOQSANDjANDjOOQS<<Ly<<LyOMqQdOAN?aOOQO<<Ih<<IhO%F[Q(C|O<<IhO$}QdO<<IhOOQO<<I]<<I]O;dQ`O<<I]O!0`Q!bO<<I]O&;gQ(ChO<<IhO$%_Q,UO<<I]O&;rQ(ChO<<IhO&<QQ,UO<<I]O&<_Q(ChO<<IhOOQSLD,eLD,eO$(iQ`OLD,eOJRQ&jOLD,eO&<sQ!LVO7+'oO&>iQ!LVO7+'qO&@_Q&kOG26wOOQO<<Mk<<MkOOQ(CWANAQANAQO$<qQ`OANAQOOQ(CWANAPANAPOOQO<<Mv<<MvOOQSLD-QLD-QO&@oQ!LUO7+*WOOQO7+(o7+(oO6lQ(ChO7+(oO#=PQ`O7+(oO6bQ`O7+(oO!0`Q!bO7+(oO$%hQ,UO7+(oOOQSG27_G27_O%AXQ`OG27_OJRQ&jOG27_OOQSG27bG27bO6lQ(ChOG27bOOQSG27jG27jO&@yQ!LUOG24{OOQOAN?SAN?SO%F[Q(C|OAN?SOOQOAN>wAN>wO;dQ`OAN>wO$}QdOAN?SO!0`Q!bOAN>wO&ATQ(ChOAN?SO$%_Q,UOAN>wO&A`Q(ChOAN?SOOQS!$(!P!$(!PO$(iQ`O!$(!PO&AnQ(C}OG26wOOQ(CWG26lG26lOOQO<<LZ<<LZO6lQ(ChO<<LZO#=PQ`O<<LZO6bQ`O<<LZO!0`Q!bO<<LZOOQSLD,yLD,yO%AXQ`OLD,yOOQSLD,|LD,|OOQOG24nG24nOOQOG24cG24cO%F[Q(C|OG24nO;dQ`OG24cO$}QdOG24nO!0`Q!bOG24cO&DPQ(ChOG24nOOQS!)9Ek!)9EkO&DmQ7]O,5:zOOQOANAuANAuO6lQ(ChOANAuO#=PQ`OANAuO6bQ`OANAuOOQS!$(!e!$(!eOOQOLD*YLD*YOOQOLD)}LD)}O%F[Q(C|OLD*YO;dQ`OLD)}O$}QdOLD*YO&EpQ!LVOG26wO&GfQ7]O,59mO&HfQ7]O,5<`O&IfQ7]O,5<bO&JfQ7]O,5<pOOQOG27aG27aO6lQ(ChOG27aO#=PQ`OG27aOOQO!$'Mt!$'MtOOQO!$'Mi!$'MiO%F[Q(C|O!$'MtO&KiQ7]O1G2gO&LiQ7]O1G2iO&MiQ7]O1G2TOOQOLD,{LD,{O6lQ(ChOLD,{OOQO!)9C`!)9C`O&NlQ7]O7+'oO' oQ7]O7+'qOOQO!$(!g!$(!gO'!rQ7]OG26wOMqQdO'#DtO.fQ`O'#EQO'#uQtO'#JQOMqQdO'#DlO'#|QtO'#ChO'&dQtO'#ChO'&tQdO,5;OO'(tQ&jO'#E`OMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO,5;YOMqQdO'#I^O'*UQ`O,5<_O'*^Q&jO,5;YO'+nQ&jO,5;YOMqQdO,5;nO.iQ`O'#DRO.iQ`O'#DRO.iQ`O'#DROJRQ&jO'#FtO'(tQ&jO'#FtO'*^Q&jO'#FtOJRQ&jO'#FvO'(tQ&jO'#FvO'*^Q&jO'#FvOJRQ&jO'#GUO'(tQ&jO'#GUO'*^Q&jO'#GUOMqQdO,5?zO'&tQdO1G0jO'+uQ!LUO'#ChOMqQdO1G1vOJRQ&jO,5<{O'(tQ&jO,5<{O'*^Q&jO,5<{OJRQ&jO,5<}O'(tQ&jO,5<}O'*^Q&jO,5<}OJRQ&jO,5<iO'(tQ&jO,5<iO'*^Q&jO,5<iO'&tQdO1G1wOMqQdO7+&qOJRQ&jO1G2TO'(tQ&jO1G2TO'*^Q&jO1G2TOJRQ&jO1G2VO'(tQ&jO1G2VO'*^Q&jO1G2VO'&tQdO7+'cO'&tQdO7+&UO',PQ`O7+'zOJRQ&jOANA]O'(tQ&jOANA]O'*^Q&jOANA]O',PQ`O<<KfO',PQ`OANAQO',UQ`O'#EdO',ZQ`O'#EdO',cQ`O'#FSO',hQ`O'#EnO',mQ`O'#J`O',xQ`O'#J^O'-TQ`O,5;OO'-YQ&kO,5<[O'-aQ`O'#F}O'-fQ`O'#F}O'-kQ`O'#F}O'-pQ`O,5<]O'-xQ`O,5;OO'.QQ!LUO1G1VO'.XQ`O,5<iO'.^Q`O,5<iO'.cQ`O,5<iO'.hQ`O,5<kO'.mQ`O,5<kO'.rQ`O,5<kO'.wQ`O1G1wO'.|Q`O1G0jO'/RQ`O1G2`O'/WQ&kO<<KqO'/_Q&kO<<KqO'/fQ&kO<<KqO'/mQqO7+'zO'/tQ`O7+'zO'/yQqO<<KfO4}Q&jO'#FrO6bQ`O'#FqO={Q`O'#EcOMqQdO,5;kO!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#F}O!(eQ`O'#GPO!(eQ`O'#GPO!(eQ`O'#GPO'0QQ`O,5<tOKhQ&jO7+(VOKhQ&jO7+(VOKhQ&jO7+(VOJRQ&jO1G2`O'0YQ`O1G2`OJRQ&jO7+'zO$:eQqO1G2kO$:eQqO1G2kO$:eQqO1G2kOJRQ&jO,5=POJRQ&jO,5=POJRQ&jO,5=P",stateData:"'1c~O'gOS'hOSTOSUOS~OQUORUOX}O]gO_lObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO#lwO#|tO$QbO%[uO%^xO%`vO%avO%dyO%fzO%i{O%j{O%l|O%y!OO&P!PO&R!QO&T!RO&V!SO&Y!TO&`!UO&f!VO&h!WO&j!XO&l!YO&n!ZO'jQO'rRO'|WO(ZeO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~OQ[XZ[X_[Xk[Xx[Xy[X{[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'e[X'r[X'}[X(U[X(V[X~O!_$vX~P&}OS!cO'c!dO'd!fO~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j;ZO'rRO'|WO(ZeO~O!S!jO!T!gO!Q'vP!Q(RP~P)jO!U!rO~P`OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!V!]O!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'rRO'|WO(ZeO~O!S!xO!uXO#^!{O#_!xO'j;[O!e(OP~P,RO!f!}O'j!|O~O!p#RO!uXO%[#SO~O#`#TO~O!_#UO#`#TO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T#pO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_'tX'e'tX'a'tX!e'tX!Q'tX!V'tX%]'tX!_'tX~P/WO#T#tO#w#tOQ'uXZ'uX_'uXk'uXx'uXy'uX{'uX!T'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX~O#k'uX'e'uX'a'uX!Q'uX!e'uXo'uX!V'uX%]'uX!_'uX~P1nO#T#tO~O$S#vO$U#uO$]#{O~O!V#|O$QbO$`#}O$b$PO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j$RO'n$bO'r$UOe'oP~O!f$mO~O!_$oO~O_$pO'e$pO~O'j$tO~O!f$mO'j$tO'k$vO'n$bO~Oc$|O!f$mO'j$tO~O#k#cO~O]%VOx%RO!V%OO!f%QO%^%UO'j$tO'k$vO^(cP~O!p#RO~O{%WO!V%XO'j$tO~O{%WO!V%XO%f%]O'j$tO~O'j%^O~O#lwO%^xO%`vO%avO%dyO%fzO%i{O%j{O~Ob%gOc%fO!p%dO%[%eO%n%cO~P8xOb%jOcqO!V%iO!ppO!uXO#lwO%[uO%`vO%avO%dyO%fzO%i{O%j{O%l|O~O`%mO#T%pO%^%kO'k$vO~P9wO!f%qO!i%uO~O!f!}O~O!VTO~O_$pO'b%}O'e$pO~O_$pO'b&QO'e$pO~O_$pO'b&SO'e$pO~O'a[Xo[X!Q[X!e[X%}[X!V[X%][X!_[X~P&}O]&XOl&XO{&WO!S&[O!Y&bO!Z&ZO![&ZO'k$vO's&UO!U'wP!U(TP~OP&fO!V&cO!q&eO'j$tO~Oc&kO!f$mO'j$tO~Ox%RO!f%QO~OS!cO'c!dO'd&nO~O!S&pO!Q&uX!Q&{X!T&uX!T&{X~P)jO!T&rO!Q'vX~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!T&rO!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O!Q'vX~P?WO!Q&wO~O!Q(QX!T(QX!_(QX!e(QX'}(QX~O#T(QX#`#XX!U(QX~PA^O#T&xO!Q(SX!T(SX~O!T&yO!Q(RX~O!Q&|O~O#T#tO~PA^O!U&}O~P`Ox#YOy#ZO{#[O!d#WO!f#XO'rROQ!haZ!hak!ha!T!ha!c!ha!l!ha#c!ha#d!ha#e!ha#f!ha#g!ha#h!ha#i!ha#j!ha#k!ha#m!ha#o!ha#q!ha#r!ha'}!ha(U!ha(V!ha~O_!ha'e!ha'a!ha!Q!ha!e!hao!ha!V!ha%]!ha!_!ha~PBtO!e'OO~O{%WO!V%XO!uXO#^'RO#_'QO'j$tO~O!_#UO#T'TO'}'SO!T(PX_(PX'e(PX~O!e(PX~PExO!T'WO!e(OX~O!e'YO~O{%WO!V%XO#_'QO'j$tO~Ox'ZOy'[O!d#WO!f#XO!u!ta{!ta~O!p!ta%[!ta!V!ta#^!ta#_!ta'j!ta~PGQO!p'`O~OQUORUO]gOb!aOc!`OigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!VTO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!p!_O#|!bO$QbO'j![O'rRO'|WO(ZeO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'j'dO'n$bO'r$UO~O#`'fO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv$fO{$[O!V$]O!a$kO!f$XO#_$lO#|$iO$i$gO$k$hO$n$jO'j'dO'n$bO'r$UO~Oe'yP~PKhO!S'jO!e'zP~P$}O's'lO'|WO~O{'nO!f#XO's'lO'|WO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~Oy(PO!f#XO~O!T#pO_$ga'e$ga'a$ga!e$ga!Q$ga!V$ga%]$ga!_$ga~O#l(TO~PJROx(WO!_(VO!V$TX$P$TX$S$TX$U$TX$]$TX~O!_(VO!V(WX$P(WX$S(WX$U(WX$](WX~Ox(WO~P!#WOx(WO!V(WX$P(WX$S(WX$U(WX$](WX~O!V(YO$P(^O$S(XO$U(XO$](_O~O!S(bO~PMqO$S#vO$U#uO$](eO~OP$oXx$oX{$oX!d$oX(U$oX(V$oX~OPgXegXe$oX!TgX#TgX~P!$|Ol(gO~OS(hO'c(iO'd(kO~OP(tOx(mO{(nO(U(pO(V(rO~Oe(lO~P!&VOe(uO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~O!S(yO'j(vO!e([P~P!&tO#`({O~O!f(|O~O!S)RO'j)OO!Q(]P~P!&tOk)`O{)WO!Y)^O!Z)VO![)VO!f(|O#P)_O%S)YO'k$vO's)TO~O!U)]O~P!(wO!d#WOP'qXx'qX{'qX(U'qX(V'qX!T'qX#u'qX!U'qX~Oe'qX#T'qX]'qXl'qX!Y'qX!Z'qX!['qX!u'qX!y'qX!z'qX!{'qX#P'qX#Q'qX'k'qX's'qX'|'qX~P!)pOP)cO#T)bOe'pX!T'pX~O!T)dOe'oX~O'j%^Oe'oP~O!f)kO~O'j'dO~O{%WO!S!xO!V%XO!uXO#^!{O#_!xO'j$tO!e(OP~O!_#UO#`)oO~OQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO#r#iO'rRO'}#jO(U#]O(V#^O~O_!`a!T!`a'e!`a'a!`a!Q!`a!e!`ao!`a!V!`a%]!`a!_!`a~P!-ROP)wO!V&cO!q)vO%])uO'n$bO~O!_)yO!V'mX_'mX!T'mX'e'mX~O!f$mO'n$bO~O!f$mO'j$tO'n$bO~O!_#UO#`'fO~O]*UO%^*VO'j*RO!U(dP~O!T*WO^(cX~O's'lO~OZ*[O~O^*]O~O!V%OO'j$tO'k$vO^(cP~O{%WO!S*aO!T&yO!V%XO'j$tO!Q(RP~O]&_Ol&_O{*cO!S*bO's'lO~O!U(TP~P!2fO!T*dO_(`X'e(`X~O#T*hO'n$bO~OP*kO!V$]O'n$bO~O!V*mO~Ox*oO!VTO~O!p*tO~Oc*yO~O'j!|O!U(bP~Oc$|O~O%^xO'j%^O~P9wOZ+PO^+OO~OQUORUO]gObrOcqOigOkUOlgOmgOrgOtUOvUO{SO!OgO!PgO!aoO!fVO!iUO!jUO!kUO!lUO!mUO!ppO!uXO$QbO%[uO'rRO'|WO(ZeO~O!V!]O#|!bO'j![O~P!4vO^+OO_$pO'e$pO~O_+TO#l+VO%`+VO%a+VO~P$}O!f%qO~O&P+[O~O!V+^O~O&b+`O&d+aOQ&_aR&_aX&_a]&_a_&_ab&_ac&_ai&_ak&_al&_am&_ar&_at&_av&_a{&_a!O&_a!P&_a!V&_a!a&_a!f&_a!i&_a!j&_a!k&_a!l&_a!m&_a!p&_a!u&_a#l&_a#|&_a$Q&_a%[&_a%^&_a%`&_a%a&_a%d&_a%f&_a%i&_a%j&_a%l&_a%y&_a&P&_a&R&_a&T&_a&V&_a&Y&_a&`&_a&f&_a&h&_a&j&_a&l&_a&n&_a'a&_a'j&_a'r&_a'|&_a(Z&_a!U&_a&W&_a`&_a&]&_a~O'j+fO~O!TzX!T!]X!UzX!U!]X!_zX!_!]X!f!]X#TzX'n!]X~O!_+kO#T+jO!T#]X!T'xX!U#]X!U'xX!_'xX!f'xX'n'xX~O!_+mO!f$mO'n$bO!T!XX!U!XX~O]&VOl&VO{+nO's)TO~OQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!V!]O!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'rRO'|WO(Z=XO~O'j;}O~P!>SO!T+rO!U'wX~O!U+tO~O!_+kO#T+jO!T#]X!U#]X~O!T+uO!U(TX~O!U+wO~O]&VOl&VO{+nO'k$vO's)TO~O!Z+xO![+xO~P!AQO_+}O!U,PO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQOP,[O!V&cO!q,ZO~Oo,aO~O!Q&ua!T&ua~P!-RO!S,eO!Q&uX!T&uX~P$}O!T&rO!Q'va~O!Q'va~P?WO!T&yO!Q(Ra~O{%WO!S,iO!V%XO'j$tO!Q&{X!T&{X~O!T'WO!e(Oa~O{%WO!V%XO#_,lO'j$tO~O#T,nO!T(Pa!e(Pa_(Pa'e(Pa~O!_#UO~P!DvO{%WO!S,qO!V%XO!uXO#^,sO#_,qO'j$tO!T&}X!e&}X~Oy,wO!f#XO~OP,{O!V&cO!q,zO%],yO'n$bO~O_#Wi!T#Wi'e#Wi'a#Wi!Q#Wi!e#Wio#Wi!V#Wi%]#Wi!_#Wi~P!-ROP=mOx(mO{(nO(U(pO(V(rO~O#`#Sa!T#Sa!e#Sa#T#Sa!V#Sa_#Sa'e#Sa!Q#Sa~P!G[O!d#WOP'qXx'qX{'qX(U'qX(V'qXQ'qXZ'qXk'qXy'qX!T'qX!c'qX!f'qX!l'qX#c'qX#d'qX#e'qX#f'qX#g'qX#h'qX#i'qX#j'qX#k'qX#m'qX#o'qX#q'qX#r'qX'r'qX'}'qX~O#`'qX_'qX'e'qX!e'qX!Q'qX'a'qX!V'qX#T'qXo'qX%]'qX!_'qX~P!HZO!T-UOe'yX~P!&VOe-WO~O!T-XO!e'zX~P!-RO!e-[O~O!Q-^O~OQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bi_#bik#bi!T#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O#c#bi~P!KrO#c#_O~P!KrOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O'rROZ#bi_#bi!T#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~Ok#bi~P!NdOk#aO~P!NdOQ#lOk#aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO'rRO_#bi!T#bi#m#bi#o#bi#q#bi#r#bi'e#bi'}#bi(U#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P##UOZ#sO!c#cO#h#cO#i#cO#j#rO#k#cO~P##UOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO'rRO_#bi!T#bi#o#bi#q#bi#r#bi'e#bi'}#bi(V#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(U#bi~P#&VO(U#]O~P#&VOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO'rRO(U#]O_#bi!T#bi#q#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~O(V#bi~P#(wO(V#^O~P#(wOQ#lOZ#sOk#aOx#YOy#ZO{#[O!c#cO!d#WO!f#XO!l#lO#c#_O#d#`O#e#`O#f#`O#g#bO#h#cO#i#cO#j#rO#k#cO#m#dO#o#fO#q#hO'rRO(U#]O(V#^O~O_#bi!T#bi#r#bi'e#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P#+iOQ[XZ[Xk[Xx[Xy[X{[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X!T[X!U[X~O#u[X~P#.SOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO#r;iO'rRO'}#jO(U#]O(V#^O~O#u-`O~P#0aOQ'uXZ'uXk'uXx'uXy'uX{'uX!c'uX!d'uX!f'uX!l'uX#c'uX#d'uX#e'uX#f'uX#g'uX#h'uX#i'uX#j'uX#m'uX#o'uX#q'uX#r'uX'r'uX'}'uX(U'uX(V'uX!T'uX~O#T;nO#w;nO#k'uX#u'uX!U'uX~P#2_O_'Qa!T'Qa'e'Qa'a'Qa!e'Qao'Qa!Q'Qa!V'Qa%]'Qa!_'Qa~P!-ROQ#biZ#bi_#bik#biy#bi!T#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi'e#bi'r#bi'}#bi'a#bi!Q#bi!e#bio#bi!V#bi%]#bi!_#bi~P!G[O_#vi!T#vi'e#vi'a#vi!Q#vi!e#vio#vi!V#vi%]#vi!_#vi~P!-RO$S-cO$U-cO~O$S-dO$U-dO~O!_(VO#T-eO!V$YX$P$YX$S$YX$U$YX$]$YX~O!S-fO~O!V(YO$P-hO$S(XO$U(XO$]-iO~O!T;jO!U'tX~P#0aO!U-jO~O$]-lO~OS(hO'c(iO'd-oO~O]-rOl-rO!Q-sO~O!TdX!_dX!edX!e$oX'}dX~P!$|O!e-yO~P!G[O!T-zO!_#UO'}'SO!e([X~O!e.PO~O!S(yO'j$tO!e([P~O#`.RO~O!Q$oX!T$oX!_$vX~P!$|O!T.SO!Q(]X~P!G[O!_.UO~O!Q.WO~Ok.[O!_#UO!f$mO'n$bO'}'SO~O'j.^O~O!_)yO~O_$pO!T.bO'e$pO~O!U.dO~P!(wO!Z.eO![.eO'k$vO's)TO~O{.gO's)TO~O#P.hO~O'j%^Oe'VX!T'VX~O!T)dOe'oa~Oe.mO~Ox.nOy.nO{.oOPua(Uua(Vua!Tua#Tua~Oeua#uua~P#>mOx(mO{(nOP$ha(U$ha(V$ha!T$ha#T$ha~Oe$ha#u$ha~P#?cOx(mO{(nOP$ja(U$ja(V$ja!T$ja#T$ja~Oe$ja#u$ja~P#@UO].pO~O#`.qO~Oe$xa!T$xa#T$xa#u$xa~P!&VO#`.tO~OP,{O!V&cO!q,zO%],yO~O]$SOk$TOl$SOm$SOr$dOt$eOv;oO{$[O!V$]O!a=`O!f$XO#_;xO#|$iO$i;rO$k;uO$n$jO'n$bO'r$UO~Oi.{O'j.zO~P#AvO!_)yO!V'ma_'ma!T'ma'e'ma~O#`/RO~OZ[X!TdX!UdX~O!T/SO!U(dX~O!U/UO~OZ/VO~O]/XO'j*RO~O!V%OO'j$tO^'_X!T'_X~O!T*WO^(ca~O!e/[O~P!-RO]/^O~OZ/_O~O^/`O~O!T*dO_(`a'e(`a~O#T/fO~OP/iO!V$]O~O's'lO!U(aP~OP/sO!V/oO!q/rO%]/qO'n$bO~OZ/}O!T/{O!U(bX~O!U0OO~O^0QO_$pO'e$pO~O]0RO~O]0SO'j!|O~O#k0TO%}0UO~P1nO#T#tO#k0TO%}0UO~O_0VO~P$}O_0XO~O&W0]OQ&UiR&UiX&Ui]&Ui_&Uib&Uic&Uii&Uik&Uil&Uim&Uir&Uit&Uiv&Ui{&Ui!O&Ui!P&Ui!V&Ui!a&Ui!f&Ui!i&Ui!j&Ui!k&Ui!l&Ui!m&Ui!p&Ui!u&Ui#l&Ui#|&Ui$Q&Ui%[&Ui%^&Ui%`&Ui%a&Ui%d&Ui%f&Ui%i&Ui%j&Ui%l&Ui%y&Ui&P&Ui&R&Ui&T&Ui&V&Ui&Y&Ui&`&Ui&f&Ui&h&Ui&j&Ui&l&Ui&n&Ui'a&Ui'j&Ui'r&Ui'|&Ui(Z&Ui!U&Ui`&Ui&]&Ui~O`0cO!U0aO&]0bO~P`O!VTO!f0eO~O&d+aOQ&_iR&_iX&_i]&_i_&_ib&_ic&_ii&_ik&_il&_im&_ir&_it&_iv&_i{&_i!O&_i!P&_i!V&_i!a&_i!f&_i!i&_i!j&_i!k&_i!l&_i!m&_i!p&_i!u&_i#l&_i#|&_i$Q&_i%[&_i%^&_i%`&_i%a&_i%d&_i%f&_i%i&_i%j&_i%l&_i%y&_i&P&_i&R&_i&T&_i&V&_i&Y&_i&`&_i&f&_i&h&_i&j&_i&l&_i&n&_i'a&_i'j&_i'r&_i'|&_i(Z&_i!U&_i&W&_i`&_i&]&_i~O!Q0kO~O!T!Xa!U!Xa~P#0aO!S0rO!Y&bO!Z&ZO![&ZO!T&vX!U&vX~P!AQO!T+rO!U'wa~O!T&|X!U&|X~P!2fO!T+uO!U(Ta~O!Y0{O!Z0zO![0zO!u;WO!y1OO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO_$pO!_#UO!f$mO!l1UO#T1SO'e$pO'n$bO'}'SO~O]&VOl&VO{+nO's)TO'|+zO~O_+}O!U1XO!Y,QO!Z+|O![+|O!u;WO!y,UO!z,SO!{,TO!|,RO#P,VO#Q,VO'|+zO~P!AQO!Z0zO![0zO'|+zO~P!AQO!Y0{O!Z0zO![0zO'|+zO~P!AQO!VTO!Y0{O!Z0zO![0zO!|0|O#P1PO#Q1PO'|+zO~P!AQO!Y0{O!Z0zO![0zO!z0}O!{0}O!|0|O#P1PO#Q1PO'|+zO~P!AQO!V&cO~O!V&cO~P!G[O!T#pOo$ga~O!Q&ui!T&ui~P!-RO!T&rO!Q'vi~O!T&yO!Q(Ri~O!Q(Si!T(Si~P!-RO!T'WO!e(Oi~O!T(Pi!e(Pi_(Pi'e(Pi~P!-RO#T1eO!T(Pi!e(Pi_(Pi'e(Pi~O{%WO!V%XO!uXO#^1hO#_1gO'j$tO~O{%WO!V%XO#_1gO'j$tO~OP1pO!V&cO!q1oO%]1nO~OP1pO!V&cO!q1oO%]1nO'n$bO~O#`uaQuaZua_uakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua'eua'rua'}ua!eua!Qua'aua!Vuaoua%]ua!_ua~P#>mO#`$haQ$haZ$ha_$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha'e$ha'r$ha'}$ha!e$ha!Q$ha'a$ha!V$hao$ha%]$ha!_$ha~P#?cO#`$jaQ$jaZ$ja_$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja'e$ja'r$ja'}$ja!e$ja!Q$ja'a$ja!V$jao$ja%]$ja!_$ja~P#@UO#`$xaQ$xaZ$xa_$xak$xay$xa!T$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa'e$xa'r$xa'}$xa!e$xa!Q$xa'a$xa!V$xa#T$xao$xa%]$xa!_$xa~P!G[O_#Wq!T#Wq'e#Wq'a#Wq!Q#Wq!e#Wqo#Wq!V#Wq%]#Wq!_#Wq~P!-ROe&wX!T&wX~PKhO!T-UOe'ya~O!S1xO!T&xX!e&xX~P$}O!T-XO!e'za~O!T-XO!e'za~P!-RO!Q1{O~O#u!ha!U!ha~PBtO#u!`a!T!`a!U!`a~P#0aO!V2^O$QbO$Z2_O~O!U2cO~Oo2dO~P!G[O_$dq!T$dq'e$dq'a$dq!Q$dq!e$dqo$dq!V$dq%]$dq!_$dq~P!-RO!Q2eO~O]-rOl-rO~Ox(mO{(nO(V(rOP%Ti(U%Ti!T%Ti#T%Ti~Oe%Ti#u%Ti~P$9POx(mO{(nOP%Vi(U%Vi(V%Vi!T%Vi#T%Vi~Oe%Vi#u%Vi~P$9rO'}#jO~P!G[O!S2hO'j$tO!T'RX!e'RX~O!T-zO!e([a~O!T-zO!_#UO!e([a~O!T-zO!_#UO'}'SO!e([a~Oe$qi!T$qi#T$qi#u$qi~P!&VO!S2pO'j)OO!Q'TX!T'TX~P!&tO!T.SO!Q(]a~O!T.SO!Q(]a~P!G[O!_#UO~O!_#UO#k2xO~Ok2{O!_#UO'}'SO~Oe'pi!T'pi~P!&VO#T3OOe'pi!T'pi~P!&VO!e3RO~O_$eq!T$eq'e$eq'a$eq!Q$eq!e$eqo$eq!V$eq%]$eq!_$eq~P!-RO!T3VO!V(^X~P!G[O!V&cO%]1nO~O!V&cO%]1nO~P!G[O!V$oX%Q[X_$oX!T$oX'e$oX~P!$|O%Q3XOPhXxhX{hX!VhX(UhX(VhX_hX!ThX'ehX~O%Q3XO~O]3_O%^3`O'j*RO!T'^X!U'^X~O!T/SO!U(da~OZ3dO~O^3eO~O]3hO~O!Q3iO~O_$pO'e$pO~P!G[O!V$]O~P!G[O!T3nO#T3pO!U(aX~O!U3qO~O]&VOl&VO{3sO!Y4OO!Z3wO![3wO!u;WO!y3}O!z3|O!{3|O#P3{O#Q,VO'k$vO's)TO'|+zO~O!U3zO~P$BTOP4VO!V/oO!q4UO%]4TO~OP4VO!V/oO!q4UO%]4TO'n$bO~O'j!|O!T']X!U']X~O!T/{O!U(ba~O]4aO's4`O~O]4bO~O^4dO~O!e4gO~P$}O_4iO~O_4iO~P$}O#k4kO%}4lO~PExO`0cO!U4pO&]0bO~P`O!_4rO~O!_4tO!T'xi!U'xi!_'xi!f'xi'n'xi~O!T#]i!U#]i~P#0aO#T4uO!T#]i!U#]i~O!T!Xi!U!Xi~P#0aO!Q4vO~O]!tal!ta!Y!ta!Z!ta![!ta!y!ta!z!ta!{!ta!|!ta#P!ta#Q!ta'k!ta's!ta'|!ta~PGQO_$pO!_#UO!f$mO!l5OO#T4|O'e$pO'n$bO'}'SO~O!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO'|+zO~P!AQO!Y5RO!Z5QO![5QO!|5TO#P5UO#Q5UO'|+zO~P!AQO!Y5RO!Z5QO![5QO!z5VO!{5VO!|5TO#P5UO#Q5UO'|+zO~P!AQO_$pO#T4|O'e$pO~O_$pO!_#UO#T4|O'e$pO~O_$pO!_#UO!l5OO#T4|O'e$pO'}'SO~O!T'WO!e(Oq~O!T(Pq!e(Pq_(Pq'e(Pq~P!-RO{%WO!V%XO#_5aO'j$tO~O!V&cO%]5cO~O!V&cO%]5cO~P!G[OP5hO!V&cO!q5gO%]5cO~O#`%TiQ%TiZ%Ti_%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti'e%Ti'r%Ti'}%Ti!e%Ti!Q%Ti'a%Ti!V%Tio%Ti%]%Ti!_%Ti~P$9PO#`%ViQ%ViZ%Vi_%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi'e%Vi'r%Vi'}%Vi!e%Vi!Q%Vi'a%Vi!V%Vio%Vi%]%Vi!_%Vi~P$9rO#`$qiQ$qiZ$qi_$qik$qiy$qi!T$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi'e$qi'r$qi'}$qi!e$qi!Q$qi'a$qi!V$qi#T$qio$qi%]$qi!_$qi~P!G[Oe&wa!T&wa~P!&VO!T&xa!e&xa~P!-RO!T-XO!e'zi~O#u#Wi!T#Wi!U#Wi~P#0aOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO'rROZ#bik#bi!c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~O#c#bi~P%&nO#c;_O~P%&nOQ#lOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O'rROZ#bi!c#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~Ok#bi~P%(yOk;aO~P%(yOQ#lOk;aOx#YOy#ZO{#[O!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO'rRO#m#bi#o#bi#q#bi#r#bi#u#bi'}#bi(U#bi(V#bi!T#bi!U#bi~OZ#bi!c#bi#h#bi#i#bi#j#bi#k#bi~P%+UOZ;mO!c;cO#h;cO#i;cO#j;lO#k;cO~P%+UOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO'rRO#o#bi#q#bi#r#bi#u#bi'}#bi(V#bi!T#bi!U#bi~O(U#bi~P%-pO(U#]O~P%-pOQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO'rRO(U#]O#q#bi#r#bi#u#bi'}#bi!T#bi!U#bi~O(V#bi~P%/{O(V#^O~P%/{OQ#lOZ;mOk;aOx#YOy#ZO{#[O!c;cO!d#WO!f#XO!l#lO#c;_O#d;`O#e;`O#f;`O#g;bO#h;cO#i;cO#j;lO#k;cO#m;dO#o;fO#q;hO'rRO(U#]O(V#^O~O#r#bi#u#bi'}#bi!T#bi!U#bi~P%2WO_#sy!T#sy'e#sy'a#sy!Q#sy!e#syo#sy!V#sy%]#sy!_#sy~P!-ROP=oOx(mO{(nO(U(pO(V(rO~OQ#biZ#bik#biy#bi!c#bi!d#bi!f#bi!l#bi#c#bi#d#bi#e#bi#f#bi#g#bi#h#bi#i#bi#j#bi#k#bi#m#bi#o#bi#q#bi#r#bi#u#bi'r#bi'}#bi!T#bi!U#bi~P%5OO#u'qX!U'qX~P!HZO#u#vi!T#vi!U#vi~P#0aO!U5tO~O!T'Qa!U'Qa~P#0aO!_#UO'}'SO!T'Ra!e'Ra~O!T-zO!e([i~O!T-zO!_#UO!e([i~Oe$qq!T$qq#T$qq#u$qq~P!&VO!Q'Ta!T'Ta~P!G[O!_5{O~O!T.SO!Q(]i~P!G[O!T.SO!Q(]i~O!Q6PO~O!_#UO#k6UO~Ok6VO!_#UO'}'SO~O!Q6XO~Oe$sq!T$sq#T$sq#u$sq~P!&VO_$ey!T$ey'e$ey'a$ey!Q$ey!e$eyo$ey!V$ey%]$ey!_$ey~P!-RO!T3VO!V(^a~O_#Wy!T#Wy'e#Wy'a#Wy!Q#Wy!e#Wyo#Wy!V#Wy%]#Wy!_#Wy~P!-ROZ6^O~O]6`O'j*RO~O!T/SO!U(di~O]6cO~O^6dO~O!_4tO~O's'lO!T'YX!U'YX~O!T3nO!U(aa~O!f$mO'n$bO_'xX!_'xX!l'xX#T'xX'e'xX'}'xX~O'j6mO~P,RO!u;WO!y6oO!z6nO!{6nO#P1PO#Q1PO~P$%_O_$pO!_#UO!l1UO#T1SO'e$pO'}'SO~O!U6rO~P$BTO]&VOl&VO{6sO's)TO'|+zO~O!Y6wO!Z6vO![6vO#P1PO#Q1PO'|+zO~P!AQO!Y6wO!Z6vO![6vO!z6xO!{6xO#P1PO#Q1PO'|+zO~P!AQO!Z6vO![6vO'k$vO's)TO'|+zO~O!V/oO~O!V/oO%]6zO~O!V/oO%]6zO~P!G[OP7PO!V/oO!q7OO%]6zO~OZ7UO!T']a!U']a~O!T/{O!U(bi~O]7XO~O!e7YO~O!e7ZO~O!e7[O~O!e7[O~P$}O_7^O~O!_7aO~O!e7bO~O!T(Si!U(Si~P#0aO_$pO#T7iO'e$pO~O_$pO!_#UO#T7iO'e$pO~O!Z7mO![7mO'|+zO~P!AQO_$pO!_#UO!f$mO!l7nO#T7iO'e$pO'n$bO'}'SO~O!Y7oO!Z7mO![7mO'|+zO~P!AQO!Y7oO!Z7mO![7mO!|7rO#P7sO#Q7sO'|+zO~P!AQO_$pO!_#UO!l7nO#T7iO'e$pO'}'SO~O_$pO'e$pO~P!-RO!T'WO!e(Oy~O!T(Py!e(Py_(Py'e(Py~P!-RO!V&cO%]7xO~O!V&cO%]7xO~P!G[O#`$qqQ$qqZ$qq_$qqk$qqy$qq!T$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq'e$qq'r$qq'}$qq!e$qq!Q$qq'a$qq!V$qq#T$qqo$qq%]$qq!_$qq~P!G[O#`$sqQ$sqZ$sq_$sqk$sqy$sq!T$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq'e$sq'r$sq'}$sq!e$sq!Q$sq'a$sq!V$sq#T$sqo$sq%]$sq!_$sq~P!G[O!T&xi!e&xi~P!-RO#u#Wq!T#Wq!U#Wq~P#0aOx.nOy.nO{.oOPua(Uua(Vua!Uua~OQuaZuakua!cua!dua!fua!lua#cua#dua#eua#fua#gua#hua#iua#jua#kua#mua#oua#qua#rua#uua'rua'}ua!Tua~P%LmOx(mO{(nOP$ha(U$ha(V$ha!U$ha~OQ$haZ$hak$hay$ha!c$ha!d$ha!f$ha!l$ha#c$ha#d$ha#e$ha#f$ha#g$ha#h$ha#i$ha#j$ha#k$ha#m$ha#o$ha#q$ha#r$ha#u$ha'r$ha'}$ha!T$ha~P%NtOx(mO{(nOP$ja(U$ja(V$ja!U$ja~OQ$jaZ$jak$jay$ja!c$ja!d$ja!f$ja!l$ja#c$ja#d$ja#e$ja#f$ja#g$ja#h$ja#i$ja#j$ja#k$ja#m$ja#o$ja#q$ja#r$ja#u$ja'r$ja'}$ja!T$ja~P&!{OQ$xaZ$xak$xay$xa!c$xa!d$xa!f$xa!l$xa#c$xa#d$xa#e$xa#f$xa#g$xa#h$xa#i$xa#j$xa#k$xa#m$xa#o$xa#q$xa#r$xa#u$xa'r$xa'}$xa!T$xa!U$xa~P%5OO#u$dq!T$dq!U$dq~P#0aO#u$eq!T$eq!U$eq~P#0aO!U8RO~O#u8SO~P!&VO!_#UO!T'Ri!e'Ri~O!_#UO'}'SO!T'Ri!e'Ri~O!T-zO!e([q~O!Q'Ti!T'Ti~P!G[O!T.SO!Q(]q~O!Q8YO~P!G[O!Q8YO~Oe'py!T'py~P!&VO!T'Wa!V'Wa~P!G[O!V%Pq_%Pq!T%Pq'e%Pq~P!G[OZ8_O~O!T/SO!U(dq~O]8bO~O#T8cO!T'Ya!U'Ya~O!T3nO!U(ai~P#0aOQ[XZ[Xk[Xx[Xy[X{[X!Q[X!T[X!c[X!d[X!f[X!l[X#T[X#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_$}X#k$}X~P&*pO#P5UO#Q5UO~P$%_O!z8gO!{8gO#P5UO#Q5UO~P$%_O!Z8jO![8jO'k$vO's)TO'|+zO~O!Y8mO!Z8jO![8jO#P5UO#Q5UO'|+zO~P!AQO!V/oO%]8pO~O!V/oO%]8pO~P!G[O]8wO's8vO~O!T/{O!U(bq~O!e8yO~O!e8yO~P$}O!e8{O~O!e8|O~O#T9OO!T#]y!U#]y~O!T#]y!U#]y~P#0aO_$pO#T9RO'e$pO~O_$pO!_#UO#T9RO'e$pO~O!Z9WO![9WO'|+zO~P!AQO_$pO!_#UO!l9XO#T9RO'e$pO'}'SO~O!f$mO'n$bO~P&0|O!Y9YO!Z9WO![9WO'|+zO~P!AQO!V&cO%]9^O~O!V&cO%]9^O~P!G[O#u#sy!T#sy!U#sy~P#0aOQ$qiZ$qik$qiy$qi!c$qi!d$qi!f$qi!l$qi#c$qi#d$qi#e$qi#f$qi#g$qi#h$qi#i$qi#j$qi#k$qi#m$qi#o$qi#q$qi#r$qi#u$qi'r$qi'}$qi!T$qi!U$qi~P%5OOx(mO{(nO(V(rOP%Ti(U%Ti!U%Ti~OQ%TiZ%Tik%Tiy%Ti!c%Ti!d%Ti!f%Ti!l%Ti#c%Ti#d%Ti#e%Ti#f%Ti#g%Ti#h%Ti#i%Ti#j%Ti#k%Ti#m%Ti#o%Ti#q%Ti#r%Ti#u%Ti'r%Ti'}%Ti!T%Ti~P&4cOx(mO{(nOP%Vi(U%Vi(V%Vi!U%Vi~OQ%ViZ%Vik%Viy%Vi!c%Vi!d%Vi!f%Vi!l%Vi#c%Vi#d%Vi#e%Vi#f%Vi#g%Vi#h%Vi#i%Vi#j%Vi#k%Vi#m%Vi#o%Vi#q%Vi#r%Vi#u%Vi'r%Vi'}%Vi!T%Vi~P&6jO#u$ey!T$ey!U$ey~P#0aO#u#Wy!T#Wy!U#Wy~P#0aO!_#UO!T'Rq!e'Rq~O!T-zO!e([y~O!Q'Tq!T'Tq~P!G[O!Q9dO~P!G[O!T/SO!U(dy~O!T3nO!U(aq~O#P7sO#Q7sO~P$%_O!Z9nO![9nO'k$vO's)TO'|+zO~O!V/oO%]9qO~O!V/oO%]9qO~P!G[O!e9tO~O_$pO#T9zO'e$pO~O_$pO!_#UO#T9zO'e$pO~O!Z9}O![9}O'|+zO~P!AQO_$pO!_#UO!l:OO#T9zO'e$pO'}'SO~OQ$qqZ$qqk$qqy$qq!c$qq!d$qq!f$qq!l$qq#c$qq#d$qq#e$qq#f$qq#g$qq#h$qq#i$qq#j$qq#k$qq#m$qq#o$qq#q$qq#r$qq#u$qq'r$qq'}$qq!T$qq!U$qq~P%5OOQ$sqZ$sqk$sqy$sq!c$sq!d$sq!f$sq!l$sq#c$sq#d$sq#e$sq#f$sq#g$sq#h$sq#i$sq#j$sq#k$sq#m$sq#o$sq#q$sq#r$sq#u$sq'r$sq'}$sq!T$sq!U$sq~P%5OOe%X!Z!T%X!Z#T%X!Z#u%X!Z~P!&VO!T'Yq!U'Yq~P#0aO!T#]!Z!U#]!Z~P#0aO_$pO#T:aO'e$pO~O_$pO!_#UO#T:aO'e$pO~O#`%X!ZQ%X!ZZ%X!Z_%X!Zk%X!Zy%X!Z!T%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z'e%X!Z'r%X!Z'}%X!Z!e%X!Z!Q%X!Z'a%X!Z!V%X!Z#T%X!Zo%X!Z%]%X!Z!_%X!Z~P!G[O_$pO#T:oO'e$pO~OP=nOx(mO{(nO(U(pO(V(rO~O]#Sal#Sa!U#Sa!Y#Sa!Z#Sa![#Sa!u#Sa!y#Sa!z#Sa!{#Sa#P#Sa#Q#Sa'k#Sa's#Sa'|#Sa~P&D[OQ%X!ZZ%X!Zk%X!Zy%X!Z!c%X!Z!d%X!Z!f%X!Z!l%X!Z#c%X!Z#d%X!Z#e%X!Z#f%X!Z#g%X!Z#h%X!Z#i%X!Z#j%X!Z#k%X!Z#m%X!Z#o%X!Z#q%X!Z#r%X!Z#u%X!Z'r%X!Z'}%X!Z!T%X!Z!U%X!Z~P%5OO]ualua!Yua!Zua![ua!uua!yua!zua!{ua#Pua#Qua'kua'sua'|ua~P%LmO]$hal$ha!Y$ha!Z$ha![$ha!u$ha!y$ha!z$ha!{$ha#P$ha#Q$ha'k$ha's$ha'|$ha~P%NtO]$jal$ja!Y$ja!Z$ja![$ja!u$ja!y$ja!z$ja!{$ja#P$ja#Q$ja'k$ja's$ja'|$ja~P&!{O]$xal$xa!U$xa!Y$xa!Z$xa![$xa!u$xa!y$xa!z$xa!{$xa#P$xa#Q$xa'k$xa's$xa'|$xa~P&D[O]%Til%Ti!Y%Ti!Z%Ti![%Ti!u%Ti!y%Ti!z%Ti!{%Ti#P%Ti#Q%Ti'k%Ti's%Ti'|%Ti~P&4cO]%Vil%Vi!Y%Vi!Z%Vi![%Vi!u%Vi!y%Vi!z%Vi!{%Vi#P%Vi#Q%Vi'k%Vi's%Vi'|%Vi~P&6jO]$qil$qi!U$qi!Y$qi!Z$qi![$qi!u$qi!y$qi!z$qi!{$qi#P$qi#Q$qi'k$qi's$qi'|$qi~P&D[O]$qql$qq!U$qq!Y$qq!Z$qq![$qq!u$qq!y$qq!z$qq!{$qq#P$qq#Q$qq'k$qq's$qq'|$qq~P&D[O]$sql$sq!U$sq!Y$sq!Z$sq![$sq!u$sq!y$sq!z$sq!{$sq#P$sq#Q$sq'k$sq's$sq'|$sq~P&D[O]%X!Zl%X!Z!U%X!Z!Y%X!Z!Z%X!Z![%X!Z!u%X!Z!y%X!Z!z%X!Z!{%X!Z#P%X!Z#Q%X!Z'k%X!Z's%X!Z'|%X!Z~P&D[Oo'tX~P/WO!QdX!TdX#TdX~P&*pOQ[XZ[Xk[Xx[Xy[X{[X!T[X!TdX!c[X!d[X!f[X!l[X#T[X#TdX#`dX#c[X#d[X#e[X#f[X#g[X#h[X#i[X#j[X#k[X#m[X#o[X#q[X#r[X#w[X'r[X'}[X(U[X(V[X~O!_dX!e[X!edX'}dX~P'$ZOQ;VOR;VO]gOb=ZOc!`OigOk;VOlgOmgOrgOt;VOv;VO{SO!OgO!PgO!VTO!a;YO!fVO!i;VO!j;VO!k;VO!l;VO!m;VO!p!_O#|!bO$QbO'j'|O'rRO'|WO(Z=XO~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;pO{$[O!V$]O!a=aO!f$XO#_;yO#|$iO$i;sO$k;vO$n$jO'j'dO'n$bO'r$UO~O!T;jO!U$ga~O]$SOi$cOk$TOl$SOm$SOr$dOt$eOv;qO{$[O!V$]O!a=bO!f$XO#_;zO#|$iO$i;tO$k;wO$n$jO'j'dO'n$bO'r$UO~O#l(TO~P'*^O!U[X!UdX~P'$ZO!_;^O~O#`;]O~O!_#UO#`;]O~O#T;nO~O#k;cO~O#T;{O!T(SX!U(SX~O#T;nO!T(QX!U(QX~O#`;|O~Oe<OO~P!&VO#`<VO~O#`<WO~O#`<XO~O!_#UO#`<YO~O!_#UO#`;|O~O#u<ZO~P#0aO#`<[O~O#`<]O~O#`<^O~O#`<_O~O#`<`O~O#`<aO~O#`<bO~O#`<cO~O!Q<dO~O#u<eO~P!&VO#u<fO~P!&VO#u<gO~P!&VO!Q<hO~P!G[O!Q<hO~O!Q<iO~P!G[O!_#UO#k=gO~O!_#UO#k=iO~O$Q~!d!y!{!|#P#^#_#j(Z$i$k$n%Q%[%]%^%d%f%i%j%l%n~UT$Q(Z#d!P'g'k#el#c#fkx'h's'h'j$S$U$S~",goto:"$(n(hPPPPPPPP(iP(yP*tPPPP.mPP/SP4y9R9fP9fPPP9fP;l9fP9fP9fP;pPP;vP<a@}PPPARPPPPARC|PPPDSE|PARPHdPPPPJbARPPPPPLlARPP! z!#O!#SP!#s!#w!#sPPPP!&|!(wPP!)P!*VP!#OARAR!-m!0q!5r!5r!9cPPP!9jARPPPPPPPPPPP!<iP!=|PPAR!?]PARPARARARARPAR!@tPP!CvP!FtP!Fx!GQ!GU!GUP!CsP!GY!GYP!JWP!J[ARAR!Jb!M_9fP9fP9f9fP!Ni9f9f#!y9f#%v9f#(Q9f9f#(n#+Q#+Q#+U#+^#+Q#+jP#+QP9f#,f9f#.T9f9f.mPPP#/vPP#0`#0`P#0`P#0u#0`PP#0{P#0rP#0r#1_!({#0r#1|#2S#2V(i#2Y(iP#2a#2a#2aP(iP(iP(iP(iPP(iP#2g#2jP#2j(iP#2nP#2qP(iP(iP(iP(iP(iP(i(iP#2w#3R#3X#3_#3m#3s#3y#4T#4Z#5U#5e#5k#5}#6T#6Z#6i#7O#8w#9V#9]#9c#9i#9o#9y#:P#:V#:a#:s#:yPPPPPPPP#;PPP#;s#?TP#@o#@v#AOPP#Fp#If$ o$ r$ u$#h$#k$#nPP$#t$#x$$q$%q$%u$&ZPP$&_$&e$&iP$&l$&p$&s$'f$'|$(R$(U$(X$(_$(b$(f$(jmlOTn!R!s$o%t%v%w%y+X+^0]0`Q${qQ%StQ%l}S&Z!]+rQ&j!`S)V$])[Q*P$|Q*^%UQ*x%fQ+x&bS+|&c,OQ,`&kQ.e)^Q/z*y[0z+y,Q,R,S,T,US3w/o3yW5Q0{0|0}1OU6v3|3}4OU7m5R5T5VS8j6w6xS9W7o7rQ9n8mR9}9Y%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#PX;W!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q)g$fQ*U%OQ*z%iQ+R%qQ-O;oQ.|)yQ/X*VQ0S+PQ3_/SQ4^/{Q5m;qQ6`3`R:q;ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R*|%m&j[OPTUnor!R!W!a!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&e&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=Z=[[!lSV!g!j&[&pQ$upQ$zqS%Pt%U!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ%b{Q&g!_Q&i!`Q'_#RS(x$X(|S*O${$|Q*S%OQ*s%dQ*w%fS,_&j&kQ,}'`Q.O(yQ/Q*PQ/W*VQ/Y*WQ/]*[Q/u*tS/y*x*yQ1a,`Q2g-zQ3^/SQ3b/VQ3g/_Q4]/zQ5x2hQ6_3`Q6b3dQ8^6^R9f8_x$Ze#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=f!^$xq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bQ)x$uQ*i%_Q*l%`Q*v%fQ,|'_Q/t*sU/x*w*x*yQ1q,}Q4W/uS4[/y/zS6l3r3vQ7T4]U8h6p6t6uU9l8i8k8lQ:W9mQ:i:X#b=]#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od=^;^;s;v;y<Q<T<W<]<`<fg=_;l;m;t;w;z<R<U<X<^<a<gW$`e$b)d=XS%_x%kQ%`yQ%azR*g%]%X$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oT(i$U(jX)h$f;o;p;qU&_!]%X+uS'm#Y#ZQ*Z%RS,u'Z'[Q/j*mQ3P.nR6h3n&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[$a#o_!i!t$s&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-a-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wT!dR!e&qgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q&]!]R0s+r!n&V!]&Z&b&c+r+x+y+|,O,Q,R,S,T,U,V0z0{0|0}1O1P3t3{5Q5R5T5U5V6n6o7m7o7r7s8g9W9Y9}S)U$])[S.])V)^Q.f)_Q/l*oQ2z.eQ2}.hS3r/o3yS6p3w4OS6t3|3}S8i6v6wQ8k6xS9m8j8mR:X9nllOTn!R!s$o%t%v%w%y+X+^0]0`Q%{!US'a#T;]Q)|$yQ*q%bQ*r%cQ,]&hS-S'f;|S.s)o<YQ/O)}Q/n*pQ0d+`Q0f+aQ0n+lQ1Y,SQ1_,^S3U.t<bQ3Y/PS3]/R<cQ4w0qQ5X1QQ5[1`Q6]3ZQ7e4yQ7f4zQ7t5]Q8}7bQ9S7kQ9x9TQ:^9yQ:l:`R:y:n$[#n_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS'^#O0xU)a$^'e2[T)s$s-a$[#m_!i!t&o&u'b'i'q'r's't'u'v'w'x'y'z'{'}(Q(U(`*Y+p,c,h,m-T-Z-_-p.r0l0o1d1w1|1}2O2P2Q2R2S2T2U2V2W2X2Y2]2b3T3[4x5Y5_5k5l5q5r6j7d7g7{8P8Q9Q9h9u9w:_:m:z;X<wS']#O0xS'o#Z#nS)r$s-aS,v'['^Q-b(PQ.u)sR1i,w&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#PX;WQ%v!PQ%w!QQ%y!SQ%z!TR0[+[Q&d!_Q)t$uQ,Y&gS,x'_)xS1[,W,XY1m,|,}.w.x.yS5Z1]1^W5b1j1k1l1qU7w5d5e5fU9[7v7y7zQ:P9]R:d:QT+}&c,O!]YOTVZn}!R!s!v$m$o%k%m%t%v%w%y&c'W+X+^+y,O,p/o0]0`3t3yT#PX;W%SsOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS'm#Y#ZS,u'Z'[!m<m#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S+{&c,OW0y+y,S,T,UU1V+|,Q,RU1Z,V3t3{S3v/o3yU5P0z0{0|S5S0}1OU5W1P6n6oS6p3w4OS6u3|3}U7l5Q5R5TS7p5U8gQ7q5VS8i6v6wQ8l6xU9U7m7o7rQ9Z7sS9m8j8mS9{9W9YQ:X9nR:b9}S+}&c,OT3x/o3yS'V!w0YQ-}(xQ.Z)UU1U+{3u3vQ2l.OS2u.[.fU5O0y1Z6uQ5w2gS6S2{2}U7n5S5W8lQ8U5xQ8]6VS9X7p7qR:O9ZQ#V^S'U!w0YQ)p$nQ)z$wQ*Q$}Q,o'VQ-|(xQ.Y)UQ.`)XQ.}){Q/v*uU1T+{3u3vS2k-}.OS2t.Z.fQ2w._Q2y.aQ4Y/wW4}0y1U1Z6uQ5v2gQ5z2lS6O2u2}Q6T2|Q7R4ZW7j5O5S5W8lS8T5w5xS8X6P<dQ8Z6SQ8e6kQ8t7SU9V7n7p7qQ9b8US9c8Y<hQ9e8]Q9j8fQ9s8uS9|9X9ZS:S9d<iQ:U9kQ:c:OQ:g:VQ:v:hQ;P:wQ<p<kQ=O<uQ=P<vQ=Q=cR=V=h%S]OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oS#Vr!a!l<j#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<p=Z%S^OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oQ$nf!^$wq!`$z${$|&Y&i&j&k)U*O*P+o+{,_,`.]/Q0w0y1V1a2z5P5S7l7q9U9{:bS$}r!aQ){$xQ*u%fW/w*v*w*x*yU4Z/x/y/zS6k3r3vS7S4[4]W8f6l6p6t6uQ8u7TW9k8h8i8k8lS:V9l9mS:h:W:XQ:w:i!l<k#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[Q<u=YR<v=Z$vaOPTUno!R!W!c!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:oY!qSV!g!j&p!U%Yvw!v!x!{$m%W&y'Q'R'W*a*b*d+V+k,i,l,p,q,s0e1g1h4t5aQ+S%q!j<l#k#|(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R<o&[S&`!]%XR0u+u%Q`OPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!l(O#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[R+R%q!j#e_!i$s&o&u'b'i'x'y'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!T;e'}(`+p-a0l0o1|2U2V2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!f#g_!i$s&o&u'b'i'z'{(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;X!P;g'}(`+p-a0l0o1|2W2X2]2b4x5l5q5r6j7d7{8P8Q9h9u<w!b#k_!i$s&o&u'b'i(Q(U*Y,c,h,m-T-Z-p.r1d1w2Y3T3[5Y5_5k7g9Q9w:_:m:z;XQ2f-xz=['}(`+p-a0l0o1|2]2b4x5l5q5r6j7d7{8P8Q9h9u<wQ=d=jQ=e=kR=f=l&pgOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[S#}d$OR2_-e&wcOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#yb$PS#wb$PT(X#z(]T#xb$PT(Z#z(]&wdOPSTUVdno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#k#p#t#|$O$o%Q%m%p%q%t%v%w%y%}&W&[&e&p&r&x'T'f'j'n(b(l)o)v*c+T+X+^+j+m+n,Z,e,n,z-X-`-e-f.o.t/R/r0T0U0V0X0]0`0b0r1S1e1o1x2^3p3s4U4i4k4l4u4|5g6s7O7^7i8c9O9R9z:a:o;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[T#}d$OQ$QdR(d$O%SfOPSTUVno!R!W!c!g!j!s!}#T#X#[#_#`#a#b#c#d#e#f#g#h#i#p#t$o%Q%m%p%q%t%v%w%y%}&W&e&p&r&x'T'f'j'n(l)o)v*c+T+X+^+n,Z,e,n,z-X-`.o.t/R/r0T0U0V0X0]0`0b1S1e1o1x3s4U4i4k4l4|5g6s7O7^7i9R9z:a:o!m=Y#k#|&[(b+j+m-f0r2^3p4u8c9O;V;Y;];_;`;a;b;c;d;e;f;g;h;i;j;n;{;|<O<Y<Z<b<c=[#ahOPTVn!R!W!c!s!}#[#|$o%m%p%q%t%v%w%y%}&W&e'n(b)v*c+T+X+^+n,Z,z-f.o/r0T0U0V0X0]0`0b1o2^3s4U4i4k4l5g6s7O7^!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=oQ)l$jQ-q(mg2[;l;m;t;w;z<R<U<X<^<a<gx$Ye#W$g$h$l(q(s({)b)c-U.R.q2f3O8S=X=d=e=fQ(}$ZS)X$])[Q)m$kQ.a)Y#b<r#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=od<s;^;s;v;y<Q<T<W<]<`<ff<t;l;m;t;w;z<R<U<X<^<a<gQ<x=]Q<y=^Q<z=_Q<{=`Q<|=aR<}=b!^$^e#W$g$h$l(q(s({)b)c-U.R.q2f3O8S;^;s;v;y<Q<T<W<]<`<f=X=d=e=f#b'e#U#r#s$X$[&f(h(t)R)u)w)y*h*k,[,y,{.S.U/f/i/q/s1n1p2p2x3V3X4T4V5c5h5{6U6z7P7x8p9^9q;r;u;x<P<S<V<[<_<e=g=i=m=n=og2[;l;m;t;w;z<R<U<X<^<a<gljOTn!R!s$o%t%v%w%y+X+^0]0`Q)Q$[Q+g&QQ+h&SR2o.S%W$_e#U#W#r#s$X$[$g$h$l&f(h(q(s(t({)R)b)c)u)w)y*h*k,[,y,{-U.R.S.U.q/f/i/q/s1n1p2f2p2x3O3V3X4T4V5c5h5{6U6z7P7x8S8p9^9q;^;l;m;r;s;t;u;v;w;x;y;z<P<Q<R<S<T<U<V<W<X<[<]<^<_<`<a<e<f<g=X=d=e=f=g=i=m=n=oQ*j%`Q/h*lQ3l/gR6g3mT)Z$])[S)Z$])[T3x/o3yQ._)WQ2|.gQ=c3sR=h6sQ)z$wQ.`)XQ.}){Q/v*uQ4Y/wQ7R4ZQ8e6kQ8t7SQ9j8fQ9s8uQ:U9kQ:g:VQ:v:hR;P:wp(q$V'g)n.Q.i.j1u2m3S5u6W9a<q=R=S=T!p<P'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l[<Q:e:t:};R;S;U]<R2Z5p7|9_9`:pr(s$V'g)n-v.Q.i.j1u2m3S5u6W9a<q=R=S=T!r<S'c(S(w)P,X-R-m-x.V.v.y/e/g1^1l1r1t2n2r3k3m4R5f5i5j5|6Q6Y6[6}7z8W8[8r:R=U=W=j=k=l^<T:e:t:{:};R;S;U_<U2Z5p7|7}9_9`:ppiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q%h|R+T%qpiOTn}!R!s$o%k%t%v%w%y+X+^0]0`R%h|Q*n%aR/d*gqiOTn}!R!s$o%k%t%v%w%y+X+^0]0`Q/p*sS4S/t/uW6y4P4Q4R4WU8o6{6|6}U9o8n8q8rQ:Y9pR:j:ZQ%o}R*}%kR4a/}R8w7US%Pt%UR/Y*WQ%t!OR+X%uR+_%zT0^+^0`R+c%{Q+b%{R0g+cQnOQ!sTT$rn!sQ(j$UR-n(jQ!eRR&m!eQ!hSU&s!h&t,fQ&t!iR,f&uQ+s&]R0t+sQ-V'gR1v-VQ-Y'iS1y-Y1zR1z-ZQ,O&cR1W,OrZOTn}!R!s$o%k%m%t%v%w%y+X+^0]0`S!vV$mY#QZ!v+y,p3tS+y&c,OQ,p'WT3t/o3yS!nS%WU&z!n&{,gQ&{!oR,g&vQ+v&`R0v+vQ'X!yQ,j'PW,t'X,j1b5^Q1b,kR5^1cQ(]#zR-g(]Q$OdR(c$OQ#q_U(R#q,b;kQ,b;XR;k(`Q-{(xW2i-{2j5y8VU2j-|-}.OS5y2k2lR8V5z$m(o$V'c'g(S(w)P)i)j)n,X-P-Q-R-m-v-w-x.Q.V.i.j.v.y/e/g1^1l1r1s1t1u2Z2m2n2r3S3k3m4R5f5i5j5n5o5p5u5|6Q6W6Y6[6}7z7|7}8O8W8[8r9_9`9a:R:e:p:r:s:t:{:|:};R;S;U<q=R=S=T=U=W=j=k=lQ.T)PU2q.T2s5}Q2s.VR5}2rQ)[$]R.c)[Q)e$aR.l)eQ3W.vR6Z3WQ*e%ZR/c*eQ3o/jS6i3o8dR8d6jQ*p%bR/m*pQ3y/oR6q3yQ/|*zS4_/|7VR7V4aQ/T*SW3a/T3c6a8`Q3c/WQ6a3bR8`6bQ*X%PR/Z*XQ0`+^R4o0`WmOTn!sQ%x!RQ)q$oQ+W%tQ+Y%vQ+Z%wQ+]%yQ0Z+XS0^+^0`R4n0]Q$qkQ%|!VQ&P!XQ&R!YQ&T!ZQ*`%VQ*f%[Q*|%oQ+e&OQ.b)ZS0P*}+QQ0h+dQ0i+gQ0j+hU1R+{3u3vQ3f/^Q3j/eQ4X/vQ4c0RQ4m0[Y4{0y1T1U1Z6uQ6e3hQ6f3kQ7Q4YQ7W4b[7h4}5O5S5W5Y8lQ8a6cQ8s7RQ8x7XY9P7g7j7n7p7qQ9g8bQ9i8eQ9r8tW9v9Q9V9X9ZQ:T9jQ:[9sU:]9w9|:OQ:f:US:k:_:cQ:u:gQ:x:mQ;O:vQ;Q:zR;T;PQ$yqQ&h!`U)}$z${$|Q+l&YU,^&i&j&kQ.X)US/P*O*PQ0q+oQ1Q+{S1`,_,`Q2v.]Q3Z/QQ4y0wS4z0y1VQ5]1aQ6R2zS7k5P5SS9T7l7qQ9y9UQ:`9{R:n:bS$We=XR)f$bU$ae$b=XR.k)dQ$VeS'c#U)yQ'g#WS(S#r#sQ(w$XQ)P$[Q)i$gQ)j$hQ)n$lQ,X&fQ-P;rQ-Q;uQ-R;xQ-m(hQ-v(qQ-w(sQ-x(tQ.Q({Q.V)RQ.i)bQ.j)cf.v)u,y/q1n4T5c6z7x8p9^9qQ.y)wQ/e*hQ/g*kQ1^,[Q1l,{Q1r<PQ1s<SQ1t<VQ1u-US2Z;l;mQ2m.RQ2n.SQ2r.UQ3S.qQ3k/fQ3m/iQ4R/sQ5f1pQ5i<[Q5j<_Q5n;tQ5o;wQ5p;zQ5u2fQ5|2pQ6Q2xQ6W3OQ6Y3VQ6[3XQ6}4VQ7z5hQ7|<XQ7}<RQ8O<UQ8W5{Q8[6UQ8r7PQ9_<^Q9`<aQ9a8SQ:R<eQ:e;^Q:p<gQ:r;sQ:s;vQ:t;yQ:{<QQ:|<TQ:}<WQ;R<]Q;S<`Q;U<fQ<q=XQ=R=dQ=S=eQ=T=fQ=U=gQ=W=iQ=j=mQ=k=nR=l=olkOTn!R!s$o%t%v%w%y+X+^0]0`Q!^PS!uV!}Q&O!WQ&l!cQ'p#[Q(a#|S+Q%m%pQ+U%qQ+d%}Q+i&WQ,W&eQ-]'nQ-k(bQ.x)vQ/a*cQ0W+TU0p+n3s6sQ1],ZQ1k,zQ2a-fQ3Q.oQ4Q/rQ4e0TQ4f0UQ4h0VQ4j0XQ4q0bQ5e1oQ5s2^Q6|4UQ7]4iQ7_4kQ7`4lQ7y5gQ8q7OR8z7^#U_OPTVn!R!W!s!}#[$o%m%p%q%t%v%w%y%}&W&e'n)v*c+T+X+^+n,Z,z.o/r0T0U0V0X0]0`0b1o3s4U4i4k4l5g6s7O7^Q!iSQ!tUQ$soS&o!g&rQ&u!jQ'b#TQ'i#XQ'q#_Q'r#`Q's#aQ't#bQ'u#cQ'v#dQ'w#eQ'x#fQ'y#gQ'z#hQ'{#iQ'}#kQ(Q#pQ(U#tW(`#|(b-f2^Q*Y%QS+p&[0rS,c&p,eQ,h&xQ,m'TQ-T'fQ-Z'jQ-_;VQ-a;YQ-p(lQ.r)oQ0l+jQ0o+mQ1d,nQ1w-XQ1|;]Q1};_Q2O;`Q2P;aQ2Q;bQ2R;cQ2S;dQ2T;eQ2U;fQ2V;gQ2W;hQ2X;iQ2Y-`Q2];nQ2b;jQ3T.tQ3[/RQ4x;{Q5Y1SQ5_1eQ5k1xQ5l;|Q5q<OQ5r<YQ6j3pQ7d4uQ7g4|Q7{<ZQ8P<bQ8Q<cQ9Q7iQ9h8cQ9u9OQ9w9RQ:_9zQ:m:aQ:z:oQ;X!cR<w=[R!kSR&^!]S&Y!]+rS+o&Z&bS+{&c,OQ0w+xW0y+y,S,T,UU1V+|,Q,RY1Z,V3t3{3|3}S3u/o3yU5P0z0{0|S5S0}1OW5W1P6n6o6xU7l5Q5R5TS7p5U8gQ7q5VU9U7m7o7rQ9Z7sS9{9W9YR:b9}R'h#WR'k#XQ#OXR0x;WT!zV$mS!yV$mU%Zvw+VU'P!v!x!{S,k'Q'RQ,r'WQ/b*dQ1c,lU1f,p,q,sS5`1g1hR7u5a`!mS!g!j%W&p&y*a,it!wVvw!v!x!{$m'Q'R'W*d,l,p,q,s1g1h5aQ0Y+VQ0m+kQ4s0eQ7c4tT<n&[*bT!pS%WS!oS%WS&q!g&yS&v!j*aS+q&[*bT,d&p,iT&a!]%XQ#zbR(f$PT([#z(]R2`-eT(z$X(|R)S$[Q.w)uQ1j,yQ4P/qQ5d1nQ6{4TQ7v5cQ8n6zQ9]7xQ9p8pQ:Q9^R:Z9qllOTn!R!s$o%t%v%w%y+X+^0]0`Q%n}R*|%kV%[vw+VR/k*mR*{%iQ%TtR*_%UR*T%OT%r!O%uT%s!O%uT0_+^0`",nodeNames:"\u26A0 extends ArithOp ArithOp InterpolationStart LineComment BlockComment Script ExportDeclaration export Star as VariableName String from ; default FunctionDeclaration async function VariableDefinition > TypeParamList TypeDefinition ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression await yield delete LogicOp BitOp ParenthesizedExpression ClassExpression class extends ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXStartTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody MethodDeclaration AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression",maxTerm:345,context:NM,nodeProps:[["closedBy",4,"InterpolationEnd",43,"]",53,"}",68,")",140,"JSXSelfCloseEndTag JSXEndTag",156,"JSXEndTag"],["group",-26,8,15,17,60,195,199,202,203,205,208,211,222,224,230,232,234,236,239,245,251,253,255,257,259,261,262,"Statement",-30,12,13,25,28,29,34,44,46,47,49,54,62,70,76,77,99,100,109,110,127,130,132,133,134,135,137,138,158,159,161,"Expression",-23,24,26,30,33,35,37,162,164,166,167,169,170,171,173,174,175,177,178,179,189,191,193,194,"Type",-3,81,92,98,"ClassItem"],["openedBy",31,"InterpolationStart",48,"[",52,"{",67,"(",139,"JSXStartTag",151,"JSXStartTag JSXStartCloseTag"]],propSources:[ZM],skippedNodes:[0,5,6],repeatNodeCount:29,tokenData:"#2k~R!bOX%ZXY%uYZ'kZ[%u[]%Z]^'k^p%Zpq%uqr(Rrs)mst7]tu9guv<avw=bwx>lxyJcyzJyz{Ka{|Lm|}MW}!OLm!O!PMn!P!Q!$v!Q!R!Er!R![!G_![!]!Nc!]!^!N{!^!_# c!_!`#!`!`!a##d!a!b#%s!b!c#'h!c!}9g!}#O#(O#O#P%Z#P#Q#(f#Q#R#(|#R#S9g#S#T#)g#T#o#)}#o#p#,w#p#q#,|#q#r#-j#r#s#.S#s$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$I|9g$I|$I}#1X$I}$JO#1X$JO$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9gW%`T$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZW%rP;=`<%l%Z7Z%|i$`W'g7ROX%ZXY%uYZ%ZZ[%u[p%Zpq%uq!^%Z!_#o%Z#p$f%Z$f$g%u$g#BY%Z#BY#BZ%u#BZ$IS%Z$IS$I_%u$I_$JT%Z$JT$JU%u$JU$KV%Z$KV$KW%u$KW&FU%Z&FU&FV%u&FV;'S%Z;'S;=`%o<%l?HT%Z?HT?HU%u?HUO%Z7Z'rT$`W'h7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&y(YU$`W!l&qO!^%Z!_!`(l!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t(sU#m&l$`WO!^%Z!_!`)V!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t)^T#m&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i)t]$`W]&ZOY)mYZ*mZr)mrs,js!^)m!^!_-S!_#O)m#O#P1q#P#o)m#o#p-S#p;'S)m;'S;=`7V<%lO)m,^*rX$`WOr*mrs+_s!^*m!^!_+u!_#o*m#o#p+u#p;'S*m;'S;=`,d<%lO*m,^+fT$Z,U$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,U+xTOr+urs,Xs;'S+u;'S;=`,^<%lO+u,U,^O$Z,U,U,aP;=`<%l+u,^,gP;=`<%l*m1i,sT$Z,U$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z1a-XX]&ZOY-SYZ+uZr-Srs-ts#O-S#O#P-{#P;'S-S;'S;=`1k<%lO-S1a-{O$Z,U]&Z1a.OUOr-Srs.bs;'S-S;'S;=`0y;=`<%l/R<%lO-S1a.iW$Z,U]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/WW]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s<%lO/R&Z/uO]&Z&Z/xRO;'S/R;'S;=`0R;=`O/R&Z0WX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l/R<%lO/R&Z0vP;=`<%l/R1a1OX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l-S<%lO/R1a1nP;=`<%l-S1i1vY$`WOr)mrs2fs!^)m!^!_-S!_#o)m#o#p-S#p;'S)m;'S;=`6e;=`<%l/R<%lO)m1i2o]$Z,U$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c3o]$`W]&ZOY3hYZ%ZZr3hrs4hs!^3h!^!_/R!_#O3h#O#P5O#P#o3h#o#p/R#p;'S3h;'S;=`6_<%lO3h&c4oT$`W]&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c5TW$`WO!^3h!^!_/R!_#o3h#o#p/R#p;'S3h;'S;=`5m;=`<%l/R<%lO3h&c5rX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l3h<%lO/R&c6bP;=`<%l3h1i6jX]&ZOY/RZr/Rrs/ps#O/R#O#P/u#P;'S/R;'S;=`0s;=`<%l)m<%lO/R1i7YP;=`<%l)m#]7b]$`WOt%Ztu8Zu!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]8b_$`W'|#TOt%Ztu8Zu!Q%Z!Q![8Z![!^%Z!_!c%Z!c!}8Z!}#R%Z#R#S8Z#S#T%Z#T#o8Z#p$g%Z$g;'S8Z;'S;=`9a<%lO8Z#]9dP;=`<%l8Z,T9ra$`W's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g[;Oa$`W$SSOt%Ztu:wu}%Z}!O:w!O!Q%Z!Q![:w![!^%Z!_!c%Z!c!}:w!}#R%Z#R#S:w#S#T%Z#T#o:w#p$g%Z$g;'S:w;'S;=`<T<%lO:w[<WP;=`<%l:w,T<^P;=`<%l9g&t<hU$`W#e&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t=RT$`W#w&lO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(h=iW(V(`$`WOv%Zvw>Rw!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t>YU$`W#q&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z1i>s]$`W]&ZOY>lYZ?lZw>lwx,jx!^>l!^!_@|!_#O>l#O#PE_#P#o>l#o#p@|#p;'S>l;'S;=`J]<%lO>l,^?qX$`WOw?lwx+_x!^?l!^!_@^!_#o?l#o#p@^#p;'S?l;'S;=`@v<%lO?l,U@aTOw@^wx,Xx;'S@^;'S;=`@p<%lO@^,U@sP;=`<%l@^,^@yP;=`<%l?l1aARX]&ZOY@|YZ@^Zw@|wx-tx#O@|#O#PAn#P;'S@|;'S;=`EX<%lO@|1aAqUOw@|wxBTx;'S@|;'S;=`Dg;=`<%lBt<%lO@|1aB[W$Z,U]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZByW]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da<%lOBt&ZCfRO;'SBt;'S;=`Co;=`OBt&ZCtX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lBt<%lOBt&ZDdP;=`<%lBt1aDlX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l@|<%lOBt1aE[P;=`<%l@|1iEdY$`WOw>lwxFSx!^>l!^!_@|!_#o>l#o#p@|#p;'S>l;'S;=`Ik;=`<%lBt<%lO>l1iF]]$Z,U$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cG]]$`W]&ZOYGUYZ%ZZwGUwx4hx!^GU!^!_Bt!_#OGU#O#PHU#P#oGU#o#pBt#p;'SGU;'S;=`Ie<%lOGU&cHZW$`WO!^GU!^!_Bt!_#oGU#o#pBt#p;'SGU;'S;=`Hs;=`<%lBt<%lOGU&cHxX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%lGU<%lOBt&cIhP;=`<%lGU1iIpX]&ZOYBtZwBtwx/px#OBt#O#PCc#P;'SBt;'S;=`Da;=`<%l>l<%lOBt1iJ`P;=`<%l>l,TJjT!f+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$PKQT!e#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z)ZKjW$`W'k#e#f&lOz%Zz{LS{!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z&tLZU$`W#c&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z*qLtU$`Wk*iO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TM_T!T+{$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,TMuX$`Wx(dO!O%Z!O!PNb!P!Q%Z!Q![! d![!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$oNgV$`WO!O%Z!O!PN|!P!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$o! TT!S$g$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c! k]$`Wl&ZO!Q%Z!Q![! d![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S! d#S#X%Z#X#Y!!d#Y#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!!i]$`WO{%Z{|!#b|}%Z}!O!#b!O!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!#gX$`WO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!$ZX$`Wl&ZO!Q%Z!Q![!$S![!^%Z!_#R%Z#R#S!$S#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z!$}b$`W#d&lOY!&VYZ%ZZz!&Vz{!-n{!P!&V!P!Q!BV!Q!^!&V!^!_!(f!_!`!Ch!`!a!Dm!a!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!&^^$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!'aa$`W!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%ZP!(kX!PPOY!(fZ!P!(f!P!Q!)W!Q!}!(f!}#O!)o#O#P!*n#P;'S!(f;'S;=`!*}<%lO!(fP!)]U!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)WP!)rVOY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)oP!*[SOY!)oZ;'S!)o;'S;=`!*h<%lO!)oP!*kP;=`<%l!)oP!*qSOY!(fZ;'S!(f;'S;=`!*}<%lO!(fP!+QP;=`<%l!(fX!+Y[$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,TX$`WOY!+TYZ%ZZ!^!+T!^!_!)o!_#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+TX!,sP;=`<%l!+TX!,{X$`WOY!&VYZ%ZZ!^!&V!^!_!(f!_#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&VX!-kP;=`<%l!&V7Z!-u`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!@m!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!.|X$`WOz!.wz{!/i{!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!/nZ$`WOz!.wz{!/i{!P!.w!P!Q!0a!Q!^!.w!^!_!0w!_#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!0hT$`WU7RO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!0zTOz!0wz{!1Z{;'S!0w;'S;=`!1x<%lO!0w7R!1^VOz!0wz{!1Z{!P!0w!P!Q!1s!Q;'S!0w;'S;=`!1x<%lO!0w7R!1xOU7R7R!1{P;=`<%l!0w7Z!2RP;=`<%l!.w7Z!2]`$`W!PPOY!-nYZ!.wZz!-nz{!2U{!P!-n!P!Q!3_!Q!^!-n!^!_!4m!_!}!-n!}#O!;l#O#P!?o#P#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!3ha$`WU7R!PPO!^%Z!_#Z%Z#Z#[!'Y#[#]%Z#]#^!'Y#^#a%Z#a#b!'Y#b#g%Z#g#h!'Y#h#i%Z#i#j!'Y#j#m%Z#m#n!'Y#n#o%Z#p;'S%Z;'S;=`%o<%lO%Z7R!4r[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!:b!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!5m[!PPOY!4mYZ!0wZz!4mz{!5h{!P!4m!P!Q!6c!Q!}!4m!}#O!6|#O#P!9r#P;'S!4m;'S;=`!:[<%lO!4m7R!6jUU7R!PP#Z#[!)W#]#^!)W#a#b!)W#g#h!)W#i#j!)W#m#n!)W7R!7PYOY!6|YZ!0wZz!6|z{!7o{#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!7r[OY!6|YZ!0wZz!6|z{!7o{!P!6|!P!Q!8h!Q#O!6|#O#P!9S#P#Q!4m#Q;'S!6|;'S;=`!9l<%lO!6|7R!8mVU7ROY!)oZ#O!)o#O#P!*X#P#Q!(f#Q;'S!)o;'S;=`!*h<%lO!)o7R!9VVOY!6|YZ!0wZz!6|z{!7o{;'S!6|;'S;=`!9l<%lO!6|7R!9oP;=`<%l!6|7R!9uVOY!4mYZ!0wZz!4mz{!5h{;'S!4m;'S;=`!:[<%lO!4m7R!:_P;=`<%l!4m7R!:ga!PPOz!0wz{!1Z{#Z!0w#Z#[!:b#[#]!0w#]#^!:b#^#a!0w#a#b!:b#b#g!0w#g#h!:b#h#i!0w#i#j!:b#j#m!0w#m#n!:b#n;'S!0w;'S;=`!1x<%lO!0w7Z!;q^$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!<r`$`WOY!;lYZ!.wZz!;lz{!<m{!P!;l!P!Q!=t!Q!^!;l!^!_!6|!_#O!;l#O#P!>q#P#Q!-n#Q#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!={[$`WU7ROY!+TYZ%ZZ!^!+T!^!_!)o!_#O!+T#O#P!,O#P#Q!&V#Q#o!+T#o#p!)o#p;'S!+T;'S;=`!,p<%lO!+T7Z!>vZ$`WOY!;lYZ!.wZz!;lz{!<m{!^!;l!^!_!6|!_#o!;l#o#p!6|#p;'S!;l;'S;=`!?i<%lO!;l7Z!?lP;=`<%l!;l7Z!?tZ$`WOY!-nYZ!.wZz!-nz{!2U{!^!-n!^!_!4m!_#o!-n#o#p!4m#p;'S!-n;'S;=`!@g<%lO!-n7Z!@jP;=`<%l!-n7Z!@te$`W!PPOz!.wz{!/i{!^!.w!^!_!0w!_#Z!.w#Z#[!@m#[#]!.w#]#^!@m#^#a!.w#a#b!@m#b#g!.w#g#h!@m#h#i!.w#i#j!@m#j#m!.w#m#n!@m#n#o!.w#o#p!0w#p;'S!.w;'S;=`!2O<%lO!.w7Z!B^X$`WT7ROY!BVYZ%ZZ!^!BV!^!_!By!_#o!BV#o#p!By#p;'S!BV;'S;=`!Cb<%lO!BV7R!COST7ROY!ByZ;'S!By;'S;=`!C[<%lO!By7R!C_P;=`<%l!By7Z!CeP;=`<%l!BV&u!Cq^$`W#w&l!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V]!Dv^$PS$`W!PPOY!&VYZ%ZZ!P!&V!P!Q!'Y!Q!^!&V!^!_!(f!_!}!&V!}#O!+T#O#P!,v#P#o!&V#o#p!(f#p;'S!&V;'S;=`!-h<%lO!&V&c!Eyf$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#U%Z#U#V!IR#V#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#d!Js#d#l%Z#l#m!L_#m#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Gfa$`Wl&ZO!O%Z!O!P! d!P!Q%Z!Q![!G_![!^%Z!_!g%Z!g!h!!d!h#R%Z#R#S!G_#S#X%Z#X#Y!!d#Y#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!HrT$`Wl&ZO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!IWY$`WO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!I}[$`Wl&ZO!Q%Z!Q!R!Iv!R!S!Iv!S!^%Z!_#R%Z#R#S!Iv#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!JxX$`WO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!KlZ$`Wl&ZO!Q%Z!Q!Y!Ke!Y!^%Z!_#R%Z#R#S!Ke#S#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Ld]$`WO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#o%Z#p;'S%Z;'S;=`%o<%lO%Z&c!Md_$`Wl&ZO!Q%Z!Q![!M]![!^%Z!_!c%Z!c!i!M]!i#R%Z#R#S!M]#S#T%Z#T#Z!M]#Z#b%Z#b#c!Hk#c#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m!NlT!_V$`W#u(^O!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z!P# ST_w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z6i# nR'n$Y!c(O$Q,_(ZP!P!Q# w!^!_# |!_!`#!ZW# |O$bW&l#!RP#g&l!_!`#!U&l#!ZO#w&l&l#!`O#h&l(m#!gV#T(e$`WO!^%Z!_!`(l!`!a#!|!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&u##TT#`&m$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m##oVe!s#h&l$]S$`WO!^%Z!_!`#$U!`!a#$l!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$]T#h&l$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#$sV#g&l$`WO!^%Z!_!`<z!`!a#%Y!a#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#%aU#g&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z(m#%zX'}&q$`WO!O%Z!O!P#&g!P!^%Z!_!a%Z!a!b#&}!b#o%Z#p;'S%Z;'S;=`%o<%lO%Z(i#&nTy(a$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#'UU$`W#r&lO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z#_#'oT!u#V$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,P#(VT{+w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z$P#(mT!Q#w$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z&t#)TU#o&l$`WO!^%Z!_!`<z!`#o%Z#p;'S%Z;'S;=`%o<%lO%Z){#)nT$`W'r)sO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z,T#*Ya$`W's#S'j)s$USOt%Ztu#)}u}%Z}!O#+_!O!Q%Z!Q![#)}![!^%Z!_!c%Z!c!}#)}!}#R%Z#R#S#)}#S#T%Z#T#o#)}#p$g%Z$g;'S#)};'S;=`#,q<%lO#)}[#+fa$`W$USOt%Ztu#+_u}%Z}!O#+_!O!Q%Z!Q![#+_![!^%Z!_!c%Z!c!}#+_!}#R%Z#R#S#+_#S#T%Z#T#o#+_#p$g%Z$g;'S#+_;'S;=`#,k<%lO#+_[#,nP;=`<%l#+_,T#,tP;=`<%l#)}~#,|O!V~(h#-TV(U(`$`WO!^%Z!_!`<z!`#o%Z#p#q#&}#q;'S%Z;'S;=`%o<%lO%Z(}#-sT!U(soQ$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%ZX#.ZT!mP$`WO!^%Z!_#o%Z#p;'S%Z;'S;=`%o<%lO%Z7Z#.wt$`W'g7R's#S'j)s$SSOX%ZXY%uYZ%ZZ[%u[p%Zpq%uqt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$f%Z$f$g%u$g#BY9g#BY#BZ#.j#BZ$IS9g$IS$I_#.j$I_$JT9g$JT$JU#.j$JU$KV9g$KV$KW#.j$KW&FU9g&FU&FV#.j&FV;'S9g;'S;=`<Z<%l?HT9g?HT?HU#.j?HUO9g7Z#1fa$`W'h7R's#S'j)s$SSOt%Ztu9gu}%Z}!O:w!O!Q%Z!Q![9g![!^%Z!_!c%Z!c!}9g!}#R%Z#R#S9g#S#T%Z#T#o9g#p$g%Z$g;'S9g;'S;=`<Z<%lO9g",tokenizers:[VM,IM,XM,UM,0,1,2,3,4,5,6,7,8,9,BM],topRules:{Script:[0,7],SingleExpression:[1,263]},dialects:{jsx:13404,ts:13406},dynamicPrecedences:{159:1,187:1},specialized:[{term:302,get:n=>qM[n]||-1},{term:311,get:n=>LM[n]||-1},{term:65,get:n=>zM[n]||-1}],tokenPrec:13429}),jM=[en("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),en("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),en("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),en("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),en("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),en(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),en("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),en(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),en(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),en('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),en('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],om=new lR,Rb=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Fr(n){return(e,t)=>{let i=e.node.getChild("VariableDefinition");return i&&t(i,n),!0}}const FM=["FunctionDeclaration"],GM={FunctionDeclaration:Fr("function"),ClassDeclaration:Fr("class"),ClassExpression:()=>!0,EnumDeclaration:Fr("constant"),TypeAliasDeclaration:Fr("type"),NamespaceDeclaration:Fr("namespace"),VariableDefinition(n,e){n.matchContext(FM)||e(n,"variable")},TypeDefinition(n,e){e(n,"type")},__proto__:null};function Eb(n,e){let t=om.get(e);if(t)return t;let i=[],r=!0;function s(o,l){let a=n.sliceString(o.from,o.to);i.push({label:a,type:l})}return e.cursor(rt.IncludeAnonymous).iterate(o=>{if(r)r=!1;else if(o.name){let l=GM[o.name];if(l&&l(o,s)||Rb.has(o.name))return!1}else if(o.to-o.from>8192){for(let l of Eb(n,o.node))i.push(l);return!1}}),om.set(e,i),i}const lm=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,_b=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function HM(n){let e=tt(n.state).resolveInner(n.pos,-1);if(_b.indexOf(e.name)>-1)return null;let t=e.name=="VariableName"||e.to-e.from<20&&lm.test(n.state.sliceDoc(e.from,e.to));if(!t&&!n.explicit)return null;let i=[];for(let r=e;r;r=r.parent)Rb.has(r.name)&&(i=i.concat(Eb(n.state.doc,r)));return{options:i,from:t?e.from:n.pos,validFor:lm}}const _i=vl.define({name:"javascript",parser:WM.configure({props:[vy.add({IfStatement:fc({except:/^\s*({|else\b)/}),TryStatement:fc({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:TR,SwitchBody:n=>{let e=n.textAfter,t=/^\s*\}/.test(e),i=/^\s*(case|default)\b/.test(e);return n.baseIndent+(t?0:i?1:2)*n.unit},Block:PR({closing:"}"}),ArrowFunction:n=>n.baseIndent+n.unit,"TemplateString BlockComment":()=>null,"Statement Property":fc({except:/^{/}),JSXElement(n){let e=/^\s*<\//.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},JSXEscape(n){let e=/\s*\}/.test(n.textAfter);return n.lineIndent(n.node.from)+(e?0:n.unit)},"JSXOpenTag JSXSelfClosingTag"(n){return n.column(n.node.from)+n.unit}}),Cy.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression":_R,BlockComment(n){return{from:n.from+2,to:n.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),YM=_i.configure({dialect:"ts"},"typescript"),KM=_i.configure({dialect:"jsx"}),JM=_i.configure({dialect:"jsx ts"},"typescript"),eD="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(n=>({label:n,type:"keyword"}));function tD(n={}){let e=n.jsx?n.typescript?JM:KM:n.typescript?YM:_i;return new xR(e,[_i.data.of({autocomplete:cE(_b,By(jM.concat(eD)))}),_i.data.of({autocomplete:HM}),n.jsx?rD:[]])}function nD(n){for(;;){if(n.name=="JSXOpenTag"||n.name=="JSXSelfClosingTag"||n.name=="JSXFragmentTag")return n;if(!n.parent)return null;n=n.parent}}function am(n,e,t=n.length){for(let i=e==null?void 0:e.firstChild;i;i=i.nextSibling)if(i.name=="JSXIdentifier"||i.name=="JSXBuiltin"||i.name=="JSXNamespacedName"||i.name=="JSXMemberExpression")return n.sliceString(i.from,Math.min(i.to,t));return""}const iD=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),rD=J.inputHandler.of((n,e,t,i)=>{if((iD?n.composing:n.compositionStarted)||n.state.readOnly||e!=t||i!=">"&&i!="/"||!_i.isActiveAt(n.state,e,-1))return!1;let{state:r}=n,s=r.changeByRange(o=>{var l,a;let{head:c}=o,h=tt(r).resolveInner(c,-1),u;if(h.name=="JSXStartTag"&&(h=h.parent),i==">"&&h.name=="JSXFragmentTag")return{range:N.cursor(c+1),changes:{from:c,insert:"><>"}};if(i=="/"&&h.name=="JSXFragmentTag"){let f=h.parent,d=f==null?void 0:f.parent;if(f.from==c-1&&((l=d.lastChild)===null||l===void 0?void 0:l.name)!="JSXEndTag"&&(u=am(r.doc,d==null?void 0:d.firstChild,c))){let p=`/${u}>`;return{range:N.cursor(c+p.length),changes:{from:c,insert:p}}}}else if(i==">"){let f=nD(h);if(f&&((a=f.lastChild)===null||a===void 0?void 0:a.name)!="JSXEndTag"&&r.sliceDoc(c,c+2)!="</"&&(u=am(r.doc,f,c)))return{range:N.cursor(c+1),changes:{from:c,insert:`></${u}>`}}}return{range:o}});return s.changes.empty?!1:(n.dispatch(s,{userEvent:"input.type",scrollIntoView:!0}),!0)});function Ee(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var r=t[i];typeof r=="string"?n.setAttribute(i,r):r!=null&&(n[i]=r)}e++}for(;e<arguments.length;e++)Mb(n,arguments[e]);return n}function Mb(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Mb(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const cm=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Cr{constructor(e,t,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(cm(l)):cm,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return at(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Su(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Xt(e);let r=this.normalize(t);for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o);if(a)return this.value=a,this;if(s==r.length-1)break;o==i&&s<t.length&&t.charCodeAt(s)==l&&o++}}}match(e,t){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:t+1}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferPos)&&(i=null),i}}typeof Symbol<"u"&&(Cr.prototype[Symbol.iterator]=function(){return this});const Db={from:-1,to:-1,match:/.*/.exec("")},Fu="gm"+(/x/.unicode==null?"":"u");class Nb{constructor(e,t,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=Db,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new Bb(e,t,i,r,s);this.re=new RegExp(t,Fu+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=_l(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,r=i+t[0].length;if(this.matchPos=_l(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const xc=new WeakMap;class fr{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let r=xc.get(e);if(!r||r.from>=i||r.to<=t){let l=new fr(t,e.sliceString(t,i));return xc.set(e,l),l}if(r.from==t&&r.to==i)return r;let{text:s,from:o}=r;return o>t&&(s=e.sliceString(t,o)+s,o=t),r.to<i&&(s+=e.sliceString(r.to,i)),xc.set(e,new fr(o,s)),new fr(t,s.slice(t-o,i-o))}}class Bb{constructor(e,t,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=Db,this.matchPos=_l(e,r),this.re=new RegExp(t,Fu+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=fr.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let i=this.flat.from+t.index,r=i+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,t)))return this.value={from:i,to:r,match:t},this.matchPos=_l(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fr.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(Nb.prototype[Symbol.iterator]=Bb.prototype[Symbol.iterator]=function(){return this});function sD(n){try{return new RegExp(n,Fu),!0}catch{return!1}}function _l(n,e){if(e>=n.length)return e;let t=n.lineAt(e),i;for(;e<t.to&&(i=t.text.charCodeAt(e-t.from))>=56320&&i<57344;)e++;return e}function Uh(n){let e=Ee("input",{class:"cm-textfield",name:"line"}),t=Ee("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),n.dispatch({effects:Ml.of(!1)}),n.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Ee("label",n.state.phrase("Go to line"),": ",e)," ",Ee("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!r)return;let{state:s}=n,o=s.doc.lineAt(s.selection.main.head),[,l,a,c,h]=r,u=c?+c.slice(1):0,f=a?+a:o.number;if(a&&h){let p=f/100;l&&(p=p*(l=="-"?-1:1)+o.number/s.doc.lines),f=Math.round(s.doc.lines*p)}else a&&l&&(f=f*(l=="-"?-1:1)+o.number);let d=s.doc.line(Math.max(1,Math.min(s.doc.lines,f)));n.dispatch({effects:Ml.of(!1),selection:N.cursor(d.from+Math.max(0,Math.min(u,d.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Ml=ce.define(),hm=ot.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Ml)&&(n=t.value);return n},provide:n=>Ps.from(n,e=>e?Uh:null)}),oD=n=>{let e=ks(n,Uh);if(!e){let t=[Ml.of(!0)];n.state.field(hm,!1)==null&&t.push(ce.appendConfig.of([hm,lD])),n.dispatch({effects:t}),e=ks(n,Uh)}return e&&e.dom.querySelector("input").focus(),!0},lD=J.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),aD={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Ib=H.define({combine(n){return En(n,aD,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function cD(n){let e=[pD,dD];return n&&e.push(Ib.of(n)),e}const hD=ne.mark({class:"cm-selectionMatch"}),uD=ne.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function um(n,e,t,i){return(t==0||n(e.sliceDoc(t-1,t))!=Be.Word)&&(i==e.doc.length||n(e.sliceDoc(i,i+1))!=Be.Word)}function fD(n,e,t,i){return n(e.sliceDoc(t,t+1))==Be.Word&&n(e.sliceDoc(i-1,i))==Be.Word}const dD=He.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Ib),{state:t}=n,i=t.selection;if(i.ranges.length>1)return ne.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return ne.none;let a=t.wordAt(r.head);if(!a)return ne.none;o=t.charCategorizer(r.head),s=t.sliceDoc(a.from,a.to)}else{let a=r.to-r.from;if(a<e.minSelectionLength||a>200)return ne.none;if(e.wholeWords){if(s=t.sliceDoc(r.from,r.to),o=t.charCategorizer(r.head),!(um(o,t,r.from,r.to)&&fD(o,t,r.from,r.to)))return ne.none}else if(s=t.sliceDoc(r.from,r.to).trim(),!s)return ne.none}let l=[];for(let a of n.visibleRanges){let c=new Cr(t.doc,s,a.from,a.to);for(;!c.next().done;){let{from:h,to:u}=c.value;if((!o||um(o,t,h,u))&&(r.empty&&h<=r.from&&u>=r.to?l.push(uD.range(h,u)):(h>=r.to||u<=r.from)&&l.push(hD.range(h,u)),l.length>e.maxMatches))return ne.none}}return ne.set(l)}},{decorations:n=>n.decorations}),pD=J.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),mD=({state:n,dispatch:e})=>{let{selection:t}=n,i=N.create(t.ranges.map(r=>n.wordAt(r.head)||N.cursor(r.head)),t.mainIndex);return i.eq(t)?!1:(e(n.update({selection:i})),!0)};function gD(n,e){let{main:t,ranges:i}=n.selection,r=n.wordAt(t.head),s=r&&r.from==t.from&&r.to==t.to;for(let o=!1,l=new Cr(n.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Cr(n.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=n.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const OD=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(s=>s.from===s.to))return mD({state:n,dispatch:e});let i=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(s=>n.sliceDoc(s.from,s.to)!=i))return!1;let r=gD(n,i);return r?(e(n.update({selection:n.selection.addRange(N.range(r.from,r.to),!1),effects:J.scrollIntoView(r.to)})),!0):!1},Gu=H.define({combine(n){return En(n,{top:!1,caseSensitive:!1,literal:!1,wholeWord:!1,createPanel:e=>new TD(e)})}});class Xb{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||sD(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new SD(this):new bD(this)}getCursor(e,t=0,i){let r=e.doc?e:ve.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Fi(this,r,t,i):ji(this,r,t,i)}}class Ub{constructor(e){this.spec=e}}function ji(n,e,t,i){return new Cr(e.doc,n.unquoted,t,i,n.caseSensitive?void 0:r=>r.toLowerCase(),n.wholeWord?yD(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function yD(n,e){return(t,i,r,s)=>((s>t||s+r.length<i)&&(s=Math.max(0,t-2),r=n.sliceString(s,Math.min(n.length,i+2))),(e(Dl(r,t-s))!=Be.Word||e(Nl(r,t-s))!=Be.Word)&&(e(Nl(r,i-s))!=Be.Word||e(Dl(r,i-s))!=Be.Word))}class bD extends Ub{constructor(e){super(e)}nextMatch(e,t,i){let r=ji(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=ji(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=i;;){let s=Math.max(t,r-1e4-this.spec.unquoted.length),o=ji(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==t)return null;r-=1e4}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=ji(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=ji(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Fi(n,e,t,i){return new Nb(e.doc,n.search,{ignoreCase:!n.caseSensitive,test:n.wholeWord?xD(e.charCategorizer(e.selection.main.head)):void 0},t,i)}function Dl(n,e){return n.slice($t(n,e,!1),e)}function Nl(n,e){return n.slice(e,$t(n,e))}function xD(n){return(e,t,i)=>!i[0].length||(n(Dl(i.input,i.index))!=Be.Word||n(Nl(i.input,i.index))!=Be.Word)&&(n(Nl(i.input,i.index+i[0].length))!=Be.Word||n(Dl(i.input,i.index+i[0].length))!=Be.Word)}class SD extends Ub{nextMatch(e,t,i){let r=Fi(this.spec,e,i,e.doc.length).next();return r.done&&(r=Fi(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,i){for(let r=1;;r++){let s=Math.max(t,i-r*1e4),o=Fi(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==t||l.from>s+10))return l;if(s==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace.replace(/\$([$&\d+])/g,(t,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=Fi(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=t)return null;r.push(i.value)}return r}highlight(e,t,i,r){let s=Fi(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const _s=ce.define(),Hu=ce.define(),si=ot.define({create(n){return new Sc(Vh(n).create(),null)},update(n,e){for(let t of e.effects)t.is(_s)?n=new Sc(t.value.create(),n.panel):t.is(Hu)&&(n=new Sc(n.query,t.value?Yu:null));return n},provide:n=>Ps.from(n,e=>e.panel)});class Sc{constructor(e,t){this.query=e,this.panel=t}}const vD=ne.mark({class:"cm-searchMatch"}),wD=ne.mark({class:"cm-searchMatch cm-searchMatch-selected"}),QD=He.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(si))}update(n){let e=n.state.field(si);(e!=n.startState.field(si)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return ne.none;let{view:t}=this,i=new oi;for(let r=0,s=t.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;n.highlight(t.state,l,a,(c,h)=>{let u=t.state.selection.ranges.some(f=>f.from==c&&f.to==h);i.add(c,h,u?wD:vD)})}return i.finish()}},{decorations:n=>n.decorations});function Hs(n){return e=>{let t=e.state.field(si,!1);return t&&t.query.spec.valid?n(e,t):Vb(e)}}const Bl=Hs((n,{query:e})=>{let{to:t}=n.state.selection.main,i=e.nextMatch(n.state,t,t);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Ku(n,i),userEvent:"select.search"}),!0):!1}),Il=Hs((n,{query:e})=>{let{state:t}=n,{from:i}=t.selection.main,r=e.prevMatch(t,i,i);return r?(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Ku(n,r),userEvent:"select.search"}),!0):!1}),CD=Hs((n,{query:e})=>{let t=e.matchAll(n.state,1e3);return!t||!t.length?!1:(n.dispatch({selection:N.create(t.map(i=>N.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),$D=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:i,to:r}=t.main,s=[],o=0;for(let l=new Cr(n.doc,n.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(N.range(l.value.from,l.value.to))}return e(n.update({selection:N.create(s,o),userEvent:"select.search.matches"})),!0},fm=Hs((n,{query:e})=>{let{state:t}=n,{from:i,to:r}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,i,i);if(!s)return!1;let o=[],l,a,c=[];if(s.from==i&&s.to==r&&(a=t.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(t,s.from,s.to),c.push(J.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(i).number)+"."))),s){let h=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l={anchor:s.from-h,head:s.to-h},c.push(Ku(n,s))}return n.dispatch({changes:o,selection:l,scrollIntoView:!!l,effects:c,userEvent:"input.replace"}),!0}),kD=Hs((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!t.length)return!1;let i=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:J.announce.of(i),userEvent:"input.replace.all"}),!0});function Yu(n){return n.state.facet(Gu).createPanel(n)}function Vh(n,e){var t,i,r,s;let o=n.selection.main,l=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!l)return e;let a=n.facet(Gu);return new Xb({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:a.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:a.literal,wholeWord:(s=e==null?void 0:e.wholeWord)!==null&&s!==void 0?s:a.wholeWord})}const Vb=n=>{let e=n.state.field(si,!1);if(e&&e.panel){let t=ks(n,Yu);if(!t)return!1;let i=t.dom.querySelector("[main-field]");if(i&&i!=n.root.activeElement){let r=Vh(n.state,e.query.spec);r.valid&&n.dispatch({effects:_s.of(r)}),i.focus(),i.select()}}else n.dispatch({effects:[Hu.of(!0),e?_s.of(Vh(n.state,e.query.spec)):ce.appendConfig.of(RD)]});return!0},Zb=n=>{let e=n.state.field(si,!1);if(!e||!e.panel)return!1;let t=ks(n,Yu);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Hu.of(!1)}),!0},PD=[{key:"Mod-f",run:Vb,scope:"editor search-panel"},{key:"F3",run:Bl,shift:Il,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Bl,shift:Il,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Zb,scope:"editor search-panel"},{key:"Mod-Shift-l",run:$D},{key:"Alt-g",run:oD},{key:"Mod-d",run:OD,preventDefault:!0}];class TD{constructor(e){this.view=e;let t=this.query=e.state.field(si).query.spec;this.commit=this.commit.bind(this),this.searchField=Ee("input",{value:t.search,placeholder:Dt(e,"Find"),"aria-label":Dt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ee("input",{value:t.replace,placeholder:Dt(e,"Replace"),"aria-label":Dt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ee("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Ee("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Ee("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function i(r,s,o){return Ee("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ee("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>Bl(e),[Dt(e,"next")]),i("prev",()=>Il(e),[Dt(e,"previous")]),i("select",()=>CD(e),[Dt(e,"all")]),Ee("label",null,[this.caseField,Dt(e,"match case")]),Ee("label",null,[this.reField,Dt(e,"regexp")]),Ee("label",null,[this.wordField,Dt(e,"by word")]),...e.state.readOnly?[]:[Ee("br"),this.replaceField,i("replace",()=>fm(e),[Dt(e,"replace")]),i("replaceAll",()=>kD(e),[Dt(e,"replace all")])],Ee("button",{name:"close",onclick:()=>Zb(e),"aria-label":Dt(e,"close"),type:"button"},["\xD7"])])}commit(){let e=new Xb({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:_s.of(e)}))}keydown(e){rA(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Il:Bl)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),fm(this.view))}update(e){for(let t of e.transactions)for(let i of t.effects)i.is(_s)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Gu).top}}function Dt(n,e){return n.state.phrase(e)}const Ro=30,Eo=/[\s\.,:;?!]/;function Ku(n,{from:e,to:t}){let i=n.state.doc.lineAt(e),r=n.state.doc.lineAt(t).to,s=Math.max(i.from,e-Ro),o=Math.min(r,t+Ro),l=n.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<Ro;a++)if(!Eo.test(l[a+1])&&Eo.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-Ro;a--)if(!Eo.test(l[a-1])&&Eo.test(l[a])){l=l.slice(0,a);break}}return J.announce.of(`${n.state.phrase("current match")}. ${l} ${n.state.phrase("on line")} ${i.number}.`)}const AD=J.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RD=[si,Vi.lowest(QD),AD];class ED{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class vi{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(tr).markerFilter;s&&(r=s(r));let o=ne.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?ne.widget({widget:new ZD(l),diagnostic:l}).range(l.from):ne.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity},diagnostic:l}).range(l.from,l.to)),!0);return new vi(o,t,$r(o))}}function $r(n,e=null,t=0){let i=null;return n.between(t,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new ED(r,s,o.diagnostic),!1}),i}function _D(n,e){return!!(n.effects.some(t=>t.is(Ju))||n.changes.touchesRange(e.pos))}function qb(n,e){return n.field(Vt,!1)?e:e.concat(ce.appendConfig.of([Vt,J.decorations.compute([Vt],t=>{let{selected:i,panel:r}=t.field(Vt);return!i||!r||i.from==i.to?ne.none:ne.set([DD.range(i.from,i.to)])}),qA(ND,{hideOn:_D}),LD]))}function MD(n,e){return{effects:qb(n,[Ju.of(e)])}}const Ju=ce.define(),ef=ce.define(),Lb=ce.define(),Vt=ot.define({create(){return new vi(ne.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),i=null;if(n.selected){let r=e.changes.mapPos(n.selected.from,1);i=$r(t,n.selected.diagnostic,r)||$r(t,null,r)}n=new vi(t,n.panel,i)}for(let t of e.effects)t.is(Ju)?n=vi.init(t.value,n.panel,e.state):t.is(ef)?n=new vi(n.diagnostics,t.value?ya.open:null,n.selected):t.is(Lb)&&(n=new vi(n.diagnostics,n.panel,t.value));return n},provide:n=>[Ps.from(n,e=>e.panel),J.decorations.from(n,e=>e.diagnostics)]}),DD=ne.mark({class:"cm-lintRange cm-lintRange-active"});function ND(n,e,t){let{diagnostics:i}=n.state.field(Vt),r=[],s=2e8,o=0;i.between(e-(t<0?1:0),e+(t>0?1:0),(a,c,{spec:h})=>{e>=a&&e<=c&&(a==c||(e>a||t>0)&&(e<c||t<0))&&(r.push(h.diagnostic),s=Math.min(a,s),o=Math.max(c,o))});let l=n.state.facet(tr).tooltipFilter;return l&&(r=l(r)),r.length?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:BD(n,r)}}}:null}function BD(n,e){return Ee("ul",{class:"cm-tooltip-lint"},e.map(t=>Wb(n,t,!1)))}const ID=n=>{let e=n.state.field(Vt,!1);(!e||!e.panel)&&n.dispatch({effects:qb(n.state,[ef.of(!0)])});let t=ks(n,ya.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},dm=n=>{let e=n.state.field(Vt,!1);return!e||!e.panel?!1:(n.dispatch({effects:ef.of(!1)}),!0)},XD=n=>{let e=n.state.field(Vt,!1);if(!e)return!1;let t=n.state.selection.main,i=e.diagnostics.iter(t.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==t.from&&i.to==t.to)?!1:(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},UD=[{key:"Mod-Shift-m",run:ID,preventDefault:!0},{key:"F8",run:XD}],VD=He.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(tr);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(tr);Promise.all(t.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(MD(this.view.state,r))},i=>{Zt(this.view.state,i)})}}update(n){let e=n.state.facet(tr);(n.docChanged||e!=n.startState.facet(tr))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),tr=H.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},En(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:VD});function zb(n){let e=[];if(n)e:for(let{name:t}of n){for(let i=0;i<t.length;i++){let r=t[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Wb(n,e,t){var i;let r=t?zb(e.actions):[];return Ee("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ee("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=u=>{u.preventDefault();let f=$r(n.state.field(Vt).diagnostics,e);f&&s.apply(n,f.from,f.to)},{name:a}=s,c=r[o]?a.indexOf(r[o]):-1,h=c<0?a:[a.slice(0,c),Ee("u",a.slice(c,c+1)),a.slice(c+1)];return Ee("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${a}${c<0?"":` (access key "${r[o]})"`}.`},h)}),e.source&&Ee("div",{class:"cm-diagnosticSource"},e.source))}class ZD extends Zn{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ee("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class pm{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Wb(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ya{constructor(e){this.view=e,this.items=[];let t=r=>{if(r.keyCode==27)dm(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=zb(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=$r(this.view.state.field(Vt).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ee("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:i}),this.dom=Ee("div",{class:"cm-panel-lint"},this.list,Ee("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>dm(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Vt).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Vt),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,h;for(let u=i;u<this.items.length;u++)if(this.items[u].diagnostic==a.diagnostic){c=u;break}c<0?(h=new pm(this.view,a.diagnostic),this.items.splice(i,0,h),r=!0):(h=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new pm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{o.top<l.top?this.list.scrollTop-=l.top-o.top:o.bottom>l.bottom&&(this.list.scrollTop+=o.bottom-l.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Vt),i=$r(t.diagnostics,this.items[e].diagnostic);!i||this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Lb.of(i)})}static open(e){return new ya(e)}}function qD(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function vc(n){return qD(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const LD=J.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:vc("#d11")},".cm-lintRange-warning":{backgroundImage:vc("orange")},".cm-lintRange-info":{backgroundImage:vc("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),zD=(()=>[JA(),nR(),SA(),h_(),LR(),hA(),mA(),ve.allowMultipleSelections.of(!0),RR(),WR(GR,{fallback:!0}),nE(),ZE(),Fy(),_A(),NA(),kA(),cD(),zs.of([...WE,...Tb,...PD,...b_,...VR,...Gy,...UD])])(),WD=()=>{const n=S.exports.useRef(null);return S.exports.useEffect(()=>{const e=new J({extensions:[zD,tD({jsx:!1}),Fy({activateOnTyping:!0,maxRenderedOptions:30}),zs.of([...Tb,aM])],parent:n.current});return()=>{e.destroy()}},[]),O("div",{ref:n,className:jD.wrapper})},jD={wrapper:F({name:"1tks4hg",styles:".cm-content{padding:1px 0;}.cm-editor{border-radius:4px;border:1px solid #d9d9d9;overflow-y:hidden;&:hover{border-color:#4096ff;}&.cm-focused{outline:none;border-color:#4096ff;box-shadow:0 0 0 2px rgb(5 145 255 / 10%);}.cm-gutters{display:none;}}"})},FD=()=>{const n=We(Hh),[e,t]=Ii(Tn),i=n[e],r=Pn(zh(e)),s=We(i1(e)),o=S.exports.useContext(Bs),l=S.exports.useMemo(()=>o.widgetByType[i.widgetType].metadata,[o.widgetByType,i.widgetType]),{removeWidget:a}=WO(),c=l.jsonPropsSchema.properties.props.properties,h=Object.entries(c).filter(([,u])=>Reflect.has(u,lf)).map(([u,f])=>{var b,g;const d=Reflect.get(f,lf),p=o.setterByType[d.type],m=(g=l.setters)==null?void 0:g[(b=d.native)!=null?b:""];return O(gt.Item,{tooltip:d.description,label:d.label,children:m?O(m,{value:i.props[u],onChange:x=>{r(Gt(w=>{w.props[u]=x}))}}):O(p,{options:d,value:i.props[u],onChange:x=>{r(Gt(w=>{w.props[u]=x}))}})},u)});return q(gt,{className:tf.form,labelWrap:!0,size:"small",layout:"vertical",children:[O(gt.Item,{label:"JsExpression",tooltip:"{{}}\u8F93\u5165\u8868\u8FBE\u5F0F",children:O(WD,{})}),O(gt.Item,{label:"\u7EC4\u4EF6ID",children:O(ht.Text,{type:"danger",children:e})}),O(gt.Item,{label:"\u7EC4\u4EF6\u7C7B\u578B",children:O(ht.Text,{children:l.widgetName})}),O(gt.Item,{label:"\u7EC4\u4EF6\u540D\u79F0",children:O(wi,{value:i.widgetName,onChange:u=>{r(Gt(f=>{f.widgetName=u.target.value}))},placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u540D\u79F0"})}),O(r1,{style:{margin:"8px 0"}}),h,!s&&O(gt.Item,{wrapperCol:{span:24},children:O(pt,{type:"primary",block:!0,danger:!0,onClick:()=>{a(e),t("")},children:"\u5220\u9664"})})]})},GD=()=>{const[n,e]=Ii(Gh);return O(gt,{className:tf.form,labelWrap:!0,size:"small",children:O(gt.Item,{label:"\u9875\u9762\u540D\u79F0",children:O(wi,{onChange:t=>{e(Gt(i=>{i.name=t.target.value}))},value:n.name})})})},HD=()=>{const n=We(Tn);return O("div",{className:tf.wrapper,children:n?O(FD,{}):O(GD,{})})},tf={wrapper:F({name:"10rtstj",styles:"padding:16px"}),form:F({name:"iqhwpp",styles:"& .ant-form-item{margin-bottom:12px!important;&-control-input-content{justify-content:flex-end!important;.ant-input-number{flex:1!important;}}}.ant-row{&.ant-form-item-row{.ant-form-item-label{display:flex;justify-content:space-between;}}}"})},YD=({metadata:n})=>{const e=S.exports.useContext(Bs),[{isDragging:t},i,r]=Wh(()=>({type:n.widgetType,item:()=>{const l=s1.mrSchemeToDefaultJson(e.widgetByType[n.widgetType].metadata.jsonPropsSchema),a={...l,id:Fo(),widgetName:`${l.widgetName}-${Fo(4)}`};return{type:jh.Add,widget:a}},end:(l,a)=>{const c=a.getDropResult();console.log("drag_end",l,c)},collect:l=>({isDragging:l.isDragging(),handlerId:l.getHandlerId()}),options:{dropEffect:"copy"}})),s=S.exports.useRef(null);S.exports.useEffect(()=>{r(s,{offsetX:0,offsetY:0})},[r]);const o=t?.3:1;return q(dr,{className:xi.widgetWrapper,style:{opacity:o},span:12,children:[q(pr,{ref:s,size:"small",className:`${xi.widget} ${xi.previewWidget}`,style:{fontSize:"12px"},bodyStyle:{padding:"4px",width:"80px",backgroundColor:"rgba(0,0,0,.04)"},children:[O("div",{className:xi.previewWidgetIcon,children:n.icon}),O("div",{children:n.widgetName})]}),q(pr,{ref:i,size:"small",className:xi.widget,bodyStyle:{padding:"8px 0",backgroundColor:"rgba(0,0,0,.04)"},children:[O("div",{className:xi.widgetIcon,children:n.icon}),O("div",{children:n.widgetName})]})]})},KD=()=>{const n=S.exports.useContext(Bs),e=S.exports.useMemo(()=>Object.values(n.widgetByType).reduce((t,i)=>(Ke.exports.isEmpty(t[i.group])?t[i.group]={name:Js(i.group),widgets:[i]}:t[i.group].widgets.push(i),t),{[qi.Container]:{name:Js(qi.Container),widgets:[]},[qi.Input]:{name:Js(qi.Input),widgets:[]},[qi.Button]:{name:Js(qi.Button),widgets:[]}}),[n.widgetByType]);return O("div",{children:Object.entries(e).map(([t,{name:i,widgets:r}])=>q("div",{className:xi.widgetsPanel,children:[O(ht.Title,{level:5,children:i}),O(Ms,{gutter:[8,8],children:r.map(({metadata:s})=>O(YD,{metadata:s},s.widgetType))})]},t))})},xi={widgetWrapper:F({name:"1qesdsb",styles:"background-color:white"}),widget:F({name:"w77w2u",styles:"text-align:center;cursor:move;user-select:none;overflow:hidden"}),previewWidget:F({name:"1ms3iv6",styles:"position:absolute;z-index:0"}),previewWidgetIcon:F({name:"ytult0",styles:"font-size:14px;line-height:14px"}),widgetIcon:F({name:"h9twb6",styles:"font-size:24px;line-height:24px"}),widgetsPanel:F({name:"10rtstj",styles:"padding:16px"}),widgetGroup:F({name:"10rtstj",styles:"padding:16px"})},JD=({children:n,page:e,onPageChange:t})=>{const i=Pn(Tn),[r,s]=S.exports.useState("");return O(o1,{storeKey:l1,listen:({updateItem:o})=>{e.id!==r&&(i("ukvrxqwmddkr"),s(e.id)),af.canUpdate&&o(wa,e),af.canUpdate=!0},read:o=>{if(o===wa)return e},write:({diff:o})=>{for(const[l,a]of o)l===wa&&t(a)},children:n})},eN=({page:n,onPageChange:e,children:t})=>{const i=Pn(Tn);return O(Mm,{children:O(JD,{page:n,onPageChange:e,children:O(a1,{backend:c1,children:q("div",{className:Dn.wrapper,children:[O("div",{className:`${Dn.section} ${Dn.sectionLeft}`,children:O(Qc,{className:Dn.designerPanelTabs,type:"card",tabBarGutter:0,items:[{key:"CanvasDesignerOutlineTree",label:"\u5927\u7EB2\u6811",children:O(b2,{})}]})}),O("div",{className:`${Dn.section} ${Dn.canvasWrapper}`,onClick:()=>i(""),children:O(O2,{children:t})}),O("div",{className:`${Dn.section} ${Dn.sectionRight}`,children:O(Qc,{className:Dn.designerPanelTabs,type:"card",tabBarGutter:0,items:[{key:"CanvasDesignerPropsPanel",label:"\u5C5E\u6027",children:O(HD,{})},{key:"CanvasDesignerWidgetStencil",label:"\u7EC4\u4EF6\u5217\u8868",children:O(KD,{})}]})})]})})})})},Dn={wrapper:F({name:"1l991oj",styles:"height:100%;display:flex;justify-content:space-between"}),section:F({name:"1t18v70",styles:"height:100%;background-color:white"}),sectionLeft:F({name:"1v1nmsf",styles:"width:220px"}),sectionRight:F({name:"16s5rj8",styles:"width:280px"}),canvasWrapper:F({name:"jtiazy",styles:"position:relative;flex:1;border:1px solid rgba(0,0,0,.05);border-top:none;border-bottom:0"}),designerPanelTabs:F({name:"saa40",styles:"height:100%;&>.ant-tabs-nav{margin-bottom:0;}& .ant-tabs-nav-list{display:flex;width:100%;& .ant-tabs-tab{flex:1;border-radius:0!important;display:flex;justify-content:center;align-items:center;&.ant-tabs-tab-active{border-bottom-color:rgba(5, 5, 5, 0.13)!important;}}}& .ant-tabs-content-holder{height:100%;overflow-y:auto;}"})},jb=S.exports.forwardRef(({onLoad:n,src:e},t)=>O("iframe",{ref:t,className:tN.iframe,src:e,onLoad:n}));jb.displayName="SimulatorPC";const tN={iframe:F({name:"17yvxh6",styles:"height:100%;width:100%;border:none;display:block"})},nN=()=>{const{pageId:n,appId:e}=Xi(),[t,i]=Ii(xt.pageSelector(n)),r=Rm(({snapshot:o})=>()=>Ke.exports.head(o.getLoadable(xt.pagesSelector).contents),[]),s=fi();return S.exports.useLayoutEffect(()=>{const o=r();!t&&o&&s(mr(Ct.PAGE,{appId:e,pageId:o.id}),{replace:!0})},[e,r,s,t]),O(Ms,{justify:"center",align:"middle",className:mm.page,children:O(dr,{span:24,className:mm.container,children:t&&O(Bs.Provider,{value:h1,children:O(eN,{page:t,onPageChange:i,children:O(jb,{src:"/simulator/pc.html"})})})})})},mm={page:F({name:"13udsys",styles:"height:100%"}),container:F({name:"13udsys",styles:"height:100%"})},iN=()=>{const n=eu([{path:Ct.APPS,element:O($f,{})},{path:Ct.APP,element:O(yw,{}),children:[{path:Ct.PAGE,element:O(nN,{})},{path:Ct.Entities,element:O(i2,{})},{path:Ct.Entity,element:O(s2,{})}]},{path:"/",element:O($f,{})}]);return O(ke,{children:n})},rN=()=>O(S.exports.Suspense,{fallback:O(OS,{}),children:O(Mm,{children:O(u1,{locale:f1,children:O(d1,{children:O(qv,{children:O(iN,{})})})})})});p1.createRoot(document.getElementById("root")).render(O(Ds.StrictMode,{children:O(rN,{})}));
