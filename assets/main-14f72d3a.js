var wu=Object.defineProperty;var bu=(e,t,n)=>t in e?wu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>(bu(e,typeof t!="symbol"?t+"":t,n),n);import{I as xu,H as Eu,F as Su,C as _u,S as Cu,r as m,a as Eo,c as So,R as Oe,b as Mu,d as Xn,g as Nu,m as Tu,e as Pu,f as Ru,P as Au,_ as ea,u as Iu,h as ta,i as Qr,D as $u,j as _o,A as Ns,k as He,l as g,n as re,o as Ou,p as Wi,q as ei,s as ti,t as Ts,v as Ps,w as Rs,x as Ft,y as St,z as At,B as na,E as As,G as Q,J as rt,K as Pe,L as Du,M as Fu,N as ku,O as kt,Q as ft,T as Wt,U as W,V as ye,W as Is,X as Lu,Y as $e,Z as _r,$ as $s,a0 as nt,a1 as zu,a2 as xt,a3 as Bu,a4 as Ue,a5 as Hu,a6 as Vu,a7 as Uu,a8 as kn,a9 as Os,aa as Wu,ab as ju,ac as Xu,ad as Ds,ae as Yu,af as Ku,ag as Rr,ah as qu,ai as Gu,aj as Ju,ak as Zu,al as Fs,am as jt,an as Qu,ao as Yn,ap as ks,aq as ed,ar as ji,as as td,at as nd,au as rd,av as id,aw as od,ax as ad,ay as sd,az as ld,aA as cd,aB as ud,aC as dd,aD as fd}from"./client-a159b9f5.js";const or=xu;or.Header=Eu;or.Footer=Su;or.Content=_u;or.Sider=Cu;const It=or;var Ls=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const hd=e=>{var{prefixCls:t,className:n,avatar:r,title:i,description:o}=e,a=Ls(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:s}=m.useContext(Eo),l=s("list",t),c=So(`${l}-item-meta`,n),u=Oe.createElement("div",{className:`${l}-item-meta-content`},i&&Oe.createElement("h4",{className:`${l}-item-meta-title`},i),o&&Oe.createElement("div",{className:`${l}-item-meta-description`},o));return Oe.createElement("div",Object.assign({},a,{className:c}),r&&Oe.createElement("div",{className:`${l}-item-meta-avatar`},r),(i||o)&&u)},pd=(e,t)=>{var{prefixCls:n,children:r,actions:i,extra:o,className:a,colStyle:s}=e,l=Ls(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:c,itemLayout:u}=m.useContext(Co),{getPrefixCls:f}=m.useContext(Eo),d=()=>{let b;return m.Children.forEach(r,E=>{typeof E=="string"&&(b=!0)}),b&&m.Children.count(r)>1},p=()=>u==="vertical"?!!o:!d(),x=f("list",n),v=i&&i.length>0&&Oe.createElement("ul",{className:`${x}-item-action`,key:"actions"},i.map((b,E)=>Oe.createElement("li",{key:`${x}-item-action-${E}`},b,E!==i.length-1&&Oe.createElement("em",{className:`${x}-item-action-split`})))),S=c?"div":"li",h=Oe.createElement(S,Object.assign({},l,c?{}:{ref:t},{className:So(`${x}-item`,{[`${x}-item-no-flex`]:!p()},a)}),u==="vertical"&&o?[Oe.createElement("div",{className:`${x}-item-main`,key:"content"},r,v),Oe.createElement("div",{className:`${x}-item-extra`,key:"extra"},o)]:[r,v,Mu(o,{key:"extra"})]);return c?Oe.createElement(Xn,{ref:t,flex:1,style:s},h):h},zs=m.forwardRef(pd);zs.Meta=hd;const md=zs,gd=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:i,padding:o,listItemPaddingSM:a,marginLG:s,borderRadiusLG:l}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:l,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${i}px ${s}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:a}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:`${o}px ${r}px`}}}},yd=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:i,marginSM:o,margin:a}=e;return{[`@media screen and (max-width:${r})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${a}px`}}}}}},vd=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:i,paddingSM:o,marginLG:a,padding:s,listItemPadding:l,colorPrimary:c,listItemPaddingSM:u,listItemPaddingLG:f,paddingXS:d,margin:p,colorText:x,colorTextDescription:v,motionDurationSlow:S,lineWidth:h}=e;return{[`${t}`]:Object.assign(Object.assign({},Pu(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:a,textAlign:"end",[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:l,color:x,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:s},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:x},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:x,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:x,transition:`all ${S}`,["&:hover"]:{color:c}}},[`${t}-item-meta-description`]:{color:v,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${d}px`,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:h,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${s}px 0`,color:v,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:s,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:a},[`${t}-item-meta`]:{marginBlockEnd:s,[`${t}-item-meta-title`]:{marginBlockEnd:o,color:x,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:s,marginInlineStart:"auto","> li":{padding:`0 ${s}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:f},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},wd=Nu("List",e=>{const t=Tu(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[vd(t),gd(t),yd(t)]},{contentWidth:220});var bd=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Co=m.createContext({});Co.Consumer;function Xi(e){var{pagination:t=!1,prefixCls:n,bordered:r=!1,split:i=!0,className:o,children:a,itemLayout:s,loadMore:l,grid:c,dataSource:u=[],size:f,header:d,footer:p,loading:x=!1,rowKey:v,renderItem:S,locale:h}=e,b=bd(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const E=t&&typeof t=="object"?t:{},[y,_]=m.useState(E.defaultCurrent||1),[C,N]=m.useState(E.defaultPageSize||10),{getPrefixCls:I,renderEmpty:D,direction:$}=m.useContext(Eo),H={current:1,total:0},Z=J=>(le,fe)=>{_(le),N(fe),t&&t[J]&&t[J](le,fe)},Y=Z("onChange"),w=Z("onShowSizeChange"),T=(J,le)=>{if(!S)return null;let fe;return typeof v=="function"?fe=v(J):v?fe=J[v]:fe=J.key,fe||(fe=`list-item-${le}`),m.createElement(m.Fragment,{key:fe},S(J,le))},M=()=>!!(l||t||p),R=I("list",n),[O,L]=wd(R);let F=x;typeof F=="boolean"&&(F={spinning:F});const B=F&&F.spinning;let G="";switch(f){case"large":G="lg";break;case"small":G="sm";break}const q=So(R,{[`${R}-vertical`]:s==="vertical",[`${R}-${G}`]:G,[`${R}-split`]:i,[`${R}-bordered`]:r,[`${R}-loading`]:B,[`${R}-grid`]:!!c,[`${R}-something-after-last-item`]:M(),[`${R}-rtl`]:$==="rtl"},o,L),X=Ru(H,{total:u.length,current:y,pageSize:C},t||{}),te=Math.ceil(X.total/X.pageSize);X.current>te&&(X.current=te);const he=t?m.createElement("div",{className:`${R}-pagination`},m.createElement(Au,Object.assign({},X,{onChange:Y,onShowSizeChange:w}))):null;let ie=ea(u);t&&u.length>(X.current-1)*X.pageSize&&(ie=ea(u).splice((X.current-1)*X.pageSize,X.pageSize));const ae=Object.keys(c||{}).some(J=>["xs","sm","md","lg","xl","xxl"].includes(J)),pe=Iu(ae),j=m.useMemo(()=>{for(let J=0;J<ta.length;J+=1){const le=ta[J];if(pe[le])return le}},[pe]),Me=m.useMemo(()=>{if(!c)return;const J=j&&c[j]?c[j]:c.column;if(J)return{width:`${100/J}%`,maxWidth:`${100/J}%`}},[c==null?void 0:c.column,j]);let _e=B&&m.createElement("div",{style:{minHeight:53}});if(ie.length>0){const J=ie.map((le,fe)=>T(le,fe));_e=c?m.createElement(Qr,{gutter:c.gutter},m.Children.map(J,le=>m.createElement("div",{key:le==null?void 0:le.key,style:Me},le))):m.createElement("ul",{className:`${R}-items`},J)}else!a&&!B&&(_e=m.createElement("div",{className:`${R}-empty-text`},h&&h.emptyText||(D==null?void 0:D("List"))||m.createElement($u,{componentName:"List"})));const me=X.position||"bottom",Ve=m.useMemo(()=>({grid:c,itemLayout:s}),[JSON.stringify(c),s]);return O(m.createElement(Co.Provider,{value:Ve},m.createElement("div",Object.assign({className:q},b),(me==="top"||me==="both")&&he,d&&m.createElement("div",{className:`${R}-header`},d),m.createElement(_o,Object.assign({},F),_e,a),p&&m.createElement("div",{className:`${R}-footer`},p),l||(me==="bottom"||me==="both")&&he)))}Xi.Item=md;var xd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const Ed=xd;var Bs=function(t,n){return m.createElement(Ns,He(He({},t),{},{ref:n,icon:Ed}))};Bs.displayName="DatabaseOutlined";const Sd=m.forwardRef(Bs);var _d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const Cd=_d;var Hs=function(t,n){return m.createElement(Ns,He(He({},t),{},{ref:n,icon:Cd}))};Hs.displayName="MoreOutlined";const Md=m.forwardRef(Hs),Nd=()=>g("div",{className:Td.wrapper,children:g(_o,{size:"large"})}),Td={wrapper:re({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},Pd="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",Rd=Ou({scriptUrl:Pd}),Ad=({type:e})=>g(Rd,{type:`icon-modou-${e}`}),Be={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},be.apply(this,arguments)}var ve;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ve||(ve={}));const ra="popstate";function Vs(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,i;i=t.map((d,p)=>u(d,typeof d=="string"?null:d.state,p===0?"default":void 0));let o=l(n??i.length-1),a=ve.Pop,s=null;function l(d){return Math.min(Math.max(d,0),i.length-1)}function c(){return i[o]}function u(d,p,x){p===void 0&&(p=null);let v=$t(i?c().pathname:"/",d,p,x);return $d(v.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(d)),v}return{get index(){return o},get action(){return a},get location(){return c()},createHref(d){return typeof d=="string"?d:Kn(d)},push(d,p){a=ve.Push;let x=u(d,p);o+=1,i.splice(o,i.length,x),r&&s&&s({action:a,location:x})},replace(d,p){a=ve.Replace;let x=u(d,p);i[o]=x,r&&s&&s({action:a,location:x})},go(d){a=ve.Pop,o=l(o+d),s&&s({action:a,location:c()})},listen(d){return s=d,()=>{s=null}}}}function Id(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:s}=r.location;return $t("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Kn(i)}return Dd(t,n,null,e)}function $d(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Od(){return Math.random().toString(36).substr(2,8)}function ia(e){return{usr:e.state,key:e.key}}function $t(e,t,n,r){return n===void 0&&(n=null),be({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yt(t):t,{state:n,key:t&&t.key||r||Od()})}function Kn(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Dd(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=ve.Pop,l=null;function c(){s=ve.Pop,l&&l({action:s,location:d.location})}function u(p,x){s=ve.Push;let v=$t(d.location,p,x);n&&n(v,p);let S=ia(v),h=d.createHref(v);try{a.pushState(S,"",h)}catch{i.location.assign(h)}o&&l&&l({action:s,location:v})}function f(p,x){s=ve.Replace;let v=$t(d.location,p,x);n&&n(v,p);let S=ia(v),h=d.createHref(v);a.replaceState(S,"",h),o&&l&&l({action:s,location:v})}let d={get action(){return s},get location(){return e(i,a)},listen(p){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ra,c),l=p,()=>{i.removeEventListener(ra,c),l=null}},createHref(p){return t(i,p)},push:u,replace:f,go(p){return a.go(p)}};return d}var ke;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ke||(ke={}));function Fd(e){return e.index===!0}function Us(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((r,i)=>{let o=[...t,i],a=typeof r.id=="string"?r.id:o.join("-");return ee(r.index!==!0||!r.children,"Cannot specify children on an index route"),ee(!n.has(a),'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),n.add(a),Fd(r)?be({},r,{id:a}):be({},r,{id:a,children:r.children?Us(r.children,o,n):void 0})})}function an(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?yt(t):t,i=Xs(r.pathname||"/",n);if(i==null)return null;let o=Ws(e);kd(o);let a=null;for(let s=0;a==null&&s<o.length;++s)a=Xd(o[s],i);return a}function Ws(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((i,o)=>{let a={relativePath:i.path||"",caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};a.relativePath.startsWith("/")&&(ee(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let s=Ot([r,a.relativePath]),l=n.concat(a);i.children&&i.children.length>0&&(ee(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),Ws(i.children,t,l,s)),!(i.path==null&&!i.index)&&t.push({path:s,score:Wd(s,i.index),routesMeta:l})}),t}function kd(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:jd(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Ld=/^:\w+$/,zd=3,Bd=2,Hd=1,Vd=10,Ud=-2,oa=e=>e==="*";function Wd(e,t){let n=e.split("/"),r=n.length;return n.some(oa)&&(r+=Ud),t&&(r+=Bd),n.filter(i=>!oa(i)).reduce((i,o)=>i+(Ld.test(o)?zd:o===""?Hd:Vd),r)}function jd(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Xd(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let a=0;a<n.length;++a){let s=n[a],l=a===n.length-1,c=i==="/"?t:t.slice(i.length)||"/",u=Xt({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=s.route;o.push({params:r,pathname:Ot([i,u.pathname]),pathnameBase:Gd(Ot([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=Ot([i,u.pathnameBase]))}return o}function js(e,t){return t===void 0&&(t={}),e.replace(/:(\w+)/g,(n,r)=>(ee(t[r]!=null,'Missing ":'+r+'" param'),t[r])).replace(/(\/?)\*/,(n,r,i,o)=>{const a="*";return t[a]==null?o==="/*"?"/":"":""+r+t[a]})}function Xt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Yd(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((c,u,f)=>{if(u==="*"){let d=s[f]||"";a=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return c[u]=Kd(s[f]||"",u),c},{}),pathname:o,pathnameBase:a,pattern:e}}function Yd(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ys(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(a,s)=>(r.push(s),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Kd(e,t){try{return decodeURIComponent(e)}catch(n){return Ys(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Xs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function ee(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ys(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ks(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?yt(e):e;return{pathname:n?n.startsWith("/")?n:qd(n,t):t,search:Jd(r),hash:Zd(i)}}function qd(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bi(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qs(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=yt(e):(i=be({},e),ee(!i.pathname||!i.pathname.includes("?"),bi("?","pathname","search",i)),ee(!i.pathname||!i.pathname.includes("#"),bi("#","pathname","hash",i)),ee(!i.search||!i.search.includes("#"),bi("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,s;if(r||a==null)s=n;else{let f=t.length-1;if(a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}s=f>=0?t[f]:"/"}let l=Ks(i,s),c=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ot=e=>e.join("/").replace(/\/\/+/g,"/"),Gd=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Jd=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zd=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Qd=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,i=new Headers(r.headers);return i.has("Content-Type")||i.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),be({},r,{headers:i}))};class Ar extends Error{}class Gs{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,ee(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((i,o)=>n=o),this.controller=new AbortController;let r=()=>n(new Ar("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce((i,o)=>{let[a,s]=o;return Object.assign(i,{[a]:this.trackPromise(a,s)})},{})}trackPromise(t,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(t);let r=Promise.race([n,this.abortPromise]).then(i=>this.onSettle(r,t,null,i),i=>this.onSettle(r,t,i));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,i){if(this.controller.signal.aborted&&r instanceof Ar)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(t,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>i}),o&&o(!1),i)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let t=this.subscriber;t&&t(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(i=>{this.subscribe(o=>{t.removeEventListener("abort",r),(o||this.done)&&i(o)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return ee(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,i]=n;return Object.assign(t,{[r]:tf(i)})},{})}}function ef(e){return e instanceof Promise&&e._tracked===!0}function tf(e){if(!ef(e))return e;if(e._error)throw e._error;return e._data}function nf(e){return new Gs(e)}const rf=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let i=new Headers(r.headers);return i.set("Location",t),new Response(null,be({},r,{headers:i}))};class Sn{constructor(t,n,r){this.status=t,this.statusText=n||"",this.data=r}}function Mo(e){return e instanceof Sn}const xi={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},of={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function af(e){ee(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Us(e.routes),n=null,r=new Set,i=null,o=null,a=null,s=!1,l=an(t,e.history.location,e.basename),c=null;if(l==null){let{matches:P,route:A,error:k}=ua(t);l=P,c={[A.id]:k}}let u=!l.some(P=>P.route.loader)||e.hydrationData!=null,f,d={historyAction:e.history.action,location:e.history.location,matches:l,initialized:u,navigation:xi,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||c,fetchers:new Map},p=ve.Pop,x=!1,v,S=!1,h=!1,b=[],E=[],y=new Map,_=0,C=-1,N=new Map,I=new Set,D=new Map,$=new Map;function H(){return n=e.history.listen(P=>{let{action:A,location:k}=P;return O(A,k)}),d.initialized||O(ve.Pop,d.location),f}function Z(){n&&n(),r.clear(),v&&v.abort(),d.fetchers.forEach((P,A)=>pe(A))}function Y(P){return r.add(P),()=>r.delete(P)}function w(P){d=be({},d,P),r.forEach(A=>A(d))}function T(P,A){var k;let V=d.actionData!=null&&d.navigation.formMethod!=null&&d.navigation.state==="loading"&&((k=d.navigation.formAction)==null?void 0:k.split("?")[0])===P.pathname,K=A.loaderData?{loaderData:Si(d.loaderData,A.loaderData,A.matches||[])}:{};w(be({},V?{}:{actionData:null},A,K,{historyAction:p,location:P,initialized:!0,navigation:xi,revalidation:"idle",restoreScrollPosition:d.navigation.formData?!1:fe(P,A.matches||d.matches),preventScrollReset:x})),S||p===ve.Pop||(p===ve.Push?e.history.push(P,P.state):p===ve.Replace&&e.history.replace(P,P.state)),p=ve.Pop,x=!1,S=!1,h=!1,b=[],E=[]}async function M(P,A){if(typeof P=="number"){e.history.go(P);return}let{path:k,submission:V,error:K}=aa(P,A),ue=$t(d.location,k,A&&A.state),oe=(A&&A.replace)===!0||V!=null?ve.Replace:ve.Push,ne=A&&"preventScrollReset"in A?A.preventScrollReset===!0:void 0;return await O(oe,ue,{submission:V,pendingError:K,preventScrollReset:ne,replace:A&&A.replace})}function R(){if(ie(),w({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){O(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}O(p||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function O(P,A,k){v&&v.abort(),v=null,p=P,S=(k&&k.startUninterruptedRevalidation)===!0,le(d.location,d.matches),x=(k&&k.preventScrollReset)===!0;let V=k&&k.overrideNavigation,K=an(t,A,e.basename);if(!K){let{matches:Xe,route:we,error:Ne}=ua(t);Ve(),T(A,{matches:Xe,loaderData:{},errors:{[we.id]:Ne}});return}if(uf(d.location,A)){T(A,{matches:K});return}v=new AbortController;let ue=Tn(A,v.signal,k&&k.submission),oe,ne;if(k&&k.pendingError)ne={[sn(K).route.id]:k.pendingError};else if(k&&k.submission){let Xe=await L(ue,A,k.submission,K,{replace:k.replace});if(Xe.shortCircuited)return;oe=Xe.pendingActionData,ne=Xe.pendingActionError,V=be({state:"loading",location:A},k.submission)}let{shortCircuited:se,loaderData:ge,errors:Se}=await F(ue,A,K,V,k&&k.submission,k&&k.replace,oe,ne);se||(v=null,T(A,{matches:K,loaderData:ge,errors:Se}))}async function L(P,A,k,V,K){ie();let ue=be({state:"submitting",location:A},k);w({navigation:ue});let oe,ne=ma(V,A);if(!ne.route.action)oe=da(A);else if(oe=await Nn("action",P,ne),P.signal.aborted)return{shortCircuited:!0};if(dn(oe)){let se=be({state:"loading",location:$t(d.location,oe.location)},k);return await te(oe,se,K&&K.replace),{shortCircuited:!0}}if(Vn(oe)){let se=sn(V,ne.route.id);return(K&&K.replace)!==!0&&(p=ve.Push),{pendingActionError:{[se.route.id]:oe.error}}}if(Yt(oe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[ne.route.id]:oe.data}}}async function F(P,A,k,V,K,ue,oe,ne){let se=V;se||(se={state:"loading",location:A,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[ge,Se]=sa(d,k,K,A,h,b,E,oe,ne,D);if(Ve(Ee=>!(k&&k.some(Ce=>Ce.route.id===Ee))||ge&&ge.some(Ce=>Ce.route.id===Ee)),ge.length===0&&Se.length===0)return T(A,{matches:k,loaderData:Si(d.loaderData,{},k),errors:ne||null,actionData:oe||null}),{shortCircuited:!0};S||(Se.forEach(Ee=>{let[Ce]=Ee;const Qe=d.fetchers.get(Ce);let Bt={state:"loading",data:Qe&&Qe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(Ce,Bt)}),w(be({navigation:se,actionData:oe||d.actionData||null},Se.length>0?{fetchers:new Map(d.fetchers)}:{}))),C=++_,Se.forEach(Ee=>{let[Ce]=Ee;return y.set(Ce,v)});let{results:Xe,loaderResults:we,fetcherResults:Ne}=await he(d.matches,ge,Se,P);if(P.signal.aborted)return{shortCircuited:!0};Se.forEach(Ee=>{let[Ce]=Ee;return y.delete(Ce)});let Ye=fa(Xe);if(Ye){let Ee=Ei(d,Ye);return await te(Ye,Ee,ue),{shortCircuited:!0}}let{loaderData:Ze,errors:Fe}=ca(d,k,ge,we,ne,Se,Ne,$);$.forEach((Ee,Ce)=>{Ee.subscribe(Qe=>{(Qe||Ee.done)&&$.delete(Ce)})}),_e();let Nt=me(C);return be({loaderData:Ze,errors:Fe},Nt||Se.length>0?{fetchers:new Map(d.fetchers)}:{})}function B(P){return d.fetchers.get(P)||of}function G(P,A,k,V){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");y.has(P)&&j(P);let K=an(t,k,e.basename);if(!K){ae(P,A,new Sn(404,"Not Found",null));return}let{path:ue,submission:oe}=aa(k,V,!0),ne=ma(K,ue);if(oe){q(P,A,ue,ne,oe);return}D.set(P,[ue,ne]),X(P,A,ue,ne)}async function q(P,A,k,V,K){if(ie(),D.delete(P),!V.route.action){let{error:Ke}=da(k);ae(P,A,Ke);return}let ue=d.fetchers.get(P),oe=be({state:"submitting"},K,{data:ue&&ue.data});d.fetchers.set(P,oe),w({fetchers:new Map(d.fetchers)});let ne=new AbortController,se=Tn(k,ne.signal,K);y.set(P,ne);let ge=await Nn("action",se,V);if(se.signal.aborted){y.get(P)===ne&&y.delete(P);return}if(dn(ge)){y.delete(P),I.add(P);let Ke=be({state:"loading"},K,{data:void 0});d.fetchers.set(P,Ke),w({fetchers:new Map(d.fetchers)});let at=be({state:"loading",location:$t(d.location,ge.location)},K);await te(ge,at);return}if(Vn(ge)){ae(P,A,ge.error);return}Yt(ge)&&ee(!1,"defer() is not supported in actions");let Se=d.navigation.location||d.location,Xe=Tn(Se,ne.signal),we=d.navigation.state!=="idle"?an(t,d.navigation.location,e.basename):d.matches;ee(we,"Didn't find any matches after fetcher action");let Ne=++_;N.set(P,Ne);let Ye=be({state:"loading",data:ge.data},K);d.fetchers.set(P,Ye);let[Ze,Fe]=sa(d,we,K,Se,h,b,E,{[V.route.id]:ge.data},void 0,D);Fe.filter(Ke=>{let[at]=Ke;return at!==P}).forEach(Ke=>{let[at]=Ke,ur=d.fetchers.get(at),vi={state:"loading",data:ur&&ur.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(at,vi),y.set(at,ne)}),w({fetchers:new Map(d.fetchers)});let{results:Nt,loaderResults:Ee,fetcherResults:Ce}=await he(d.matches,Ze,Fe,Xe);if(ne.signal.aborted)return;N.delete(P),y.delete(P),Fe.forEach(Ke=>{let[at]=Ke;return y.delete(at)});let Qe=fa(Nt);if(Qe){let Ke=Ei(d,Qe);await te(Qe,Ke);return}let{loaderData:Bt,errors:mt}=ca(d,d.matches,Ze,Ee,void 0,Fe,Ce,$),gi={state:"idle",data:ge.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(P,gi);let yi=me(Ne);d.navigation.state==="loading"&&Ne>C?(ee(p,"Expected pending action"),v&&v.abort(),T(d.navigation.location,{matches:we,loaderData:Bt,errors:mt,fetchers:new Map(d.fetchers)})):(w(be({errors:mt,loaderData:Si(d.loaderData,Bt,we)},yi?{fetchers:new Map(d.fetchers)}:{})),h=!1)}async function X(P,A,k,V){let K=d.fetchers.get(P),ue={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:K&&K.data};d.fetchers.set(P,ue),w({fetchers:new Map(d.fetchers)});let oe=new AbortController,ne=Tn(k,oe.signal);y.set(P,oe);let se=await Nn("loader",ne,V);if(Yt(se)&&(se=await Qs(se,ne.signal,!0)||se),y.get(P)===oe&&y.delete(P),ne.signal.aborted)return;if(dn(se)){let Se=Ei(d,se);await te(se,Se);return}if(Vn(se)){let Se=sn(d.matches,A);d.fetchers.delete(P),w({fetchers:new Map(d.fetchers),errors:{[Se.route.id]:se.error}});return}ee(!Yt(se),"Unhandled fetcher deferred data");let ge={state:"idle",data:se.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(P,ge),w({fetchers:new Map(d.fetchers)})}async function te(P,A,k){P.revalidate&&(h=!0),ee(A.location,"Expected a location on the redirect navigation"),v=null;let V=k===!0?ve.Replace:ve.Push;await O(V,A.location,{overrideNavigation:A})}async function he(P,A,k,V){let K=await Promise.all([...A.map(ne=>Nn("loader",V,ne)),...k.map(ne=>{let[,se,ge]=ne;return Nn("loader",Tn(se,V.signal),ge)})]),ue=K.slice(0,A.length),oe=K.slice(A.length);return await Promise.all([ha(P,A,ue,V.signal,!1,d.loaderData),ha(P,k.map(ne=>{let[,,se]=ne;return se}),oe,V.signal,!0)]),{results:K,loaderResults:ue,fetcherResults:oe}}function ie(){h=!0,b.push(...Ve()),D.forEach((P,A)=>{y.has(A)&&(E.push(A),j(A))})}function ae(P,A,k){let V=sn(d.matches,A);pe(P),w({errors:{[V.route.id]:k},fetchers:new Map(d.fetchers)})}function pe(P){y.has(P)&&j(P),D.delete(P),N.delete(P),I.delete(P),d.fetchers.delete(P)}function j(P){let A=y.get(P);ee(A,"Expected fetch controller: "+P),A.abort(),y.delete(P)}function Me(P){for(let A of P){let V={state:"idle",data:B(A).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(A,V)}}function _e(){let P=[];for(let A of I){let k=d.fetchers.get(A);ee(k,"Expected fetcher: "+A),k.state==="loading"&&(I.delete(A),P.push(A))}Me(P)}function me(P){let A=[];for(let[k,V]of N)if(V<P){let K=d.fetchers.get(k);ee(K,"Expected fetcher: "+k),K.state==="loading"&&(j(k),N.delete(k),A.push(k))}return Me(A),A.length>0}function Ve(P){let A=[];return $.forEach((k,V)=>{(!P||P(V))&&(k.cancel(),A.push(V),$.delete(V))}),A}function J(P,A,k){if(i=P,a=A,o=k||(V=>V.key),!s&&d.navigation===xi){s=!0;let V=fe(d.location,d.matches);V!=null&&w({restoreScrollPosition:V})}return()=>{i=null,a=null,o=null}}function le(P,A){if(i&&o&&a){let k=A.map(K=>pa(K,d.loaderData)),V=o(P,k)||P.key;i[V]=a()}}function fe(P,A){if(i&&o&&a){let k=A.map(ue=>pa(ue,d.loaderData)),V=o(P,k)||P.key,K=i[V];if(typeof K=="number")return K}return null}return f={get basename(){return e.basename},get state(){return d},get routes(){return t},initialize:H,subscribe:Y,enableScrollRestoration:J,navigate:M,fetch:G,revalidate:R,createHref:ni,getFetcher:B,deleteFetcher:pe,dispose:Z,_internalFetchControllers:y,_internalActiveDeferreds:$},f}function aa(e,t,n){n===void 0&&(n=!1);let r=typeof e=="string"?e:Kn(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(t.formMethod!=null&&t.formMethod!=="get")return{path:r,submission:{formMethod:t.formMethod,formAction:ni(yt(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};let i=yt(r);try{let o=Zs(t.formData);n&&i.search&&el(i.search)&&o.append("index",""),i.search="?"+o}catch{return{path:r,error:new Sn(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Kn(i)}}function Ei(e,t){let{formMethod:n,formAction:r,formEncType:i,formData:o}=e.navigation;return{state:"loading",location:$t(e.location,t.location),formMethod:n||void 0,formAction:r||void 0,formEncType:i||void 0,formData:o||void 0}}function sf(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function sa(e,t,n,r,i,o,a,s,l,c){let u=l?Object.values(l)[0]:s?Object.values(s)[0]:null,f=l?Object.keys(l)[0]:void 0,p=sf(t,f).filter((v,S)=>v.route.loader!=null&&(lf(e.loaderData,e.matches[S],v)||o.some(h=>h===v.route.id)||la(e.location,e.matches[S],n,r,v,i,u))),x=[];return c&&c.forEach((v,S)=>{let[h,b]=v;a.includes(S)?x.push([S,h,b]):i&&la(h,b,n,h,b,i,u)&&x.push([S,h,b])}),[p,x]}function lf(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function Js(e,t){let n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function la(e,t,n,r,i,o,a){let s=Yi(e),l=t.params,c=Yi(r),u=i.params,f=Js(t,i)||s.toString()===c.toString()||s.search!==c.search||o;if(i.route.shouldRevalidate){let d=i.route.shouldRevalidate(be({currentUrl:s,currentParams:l,nextUrl:c,nextParams:u},n,{actionResult:a,defaultShouldRevalidate:f}));if(typeof d=="boolean")return d}return f}async function Nn(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1);let o,a,s,l=new Promise((u,f)=>s=f),c=()=>s();t.signal.addEventListener("abort",c);try{let u=n.route[e];ee(u,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),a=await Promise.race([u({request:t,params:n.params}),l])}catch(u){o=ke.error,a=u}finally{t.signal.removeEventListener("abort",c)}if(a instanceof Response){let u=a.status,f=a.headers.get("Location");if(i)throw a;if(u>=300&&u<=399&&f!=null){if(r)throw a;return{type:ke.redirect,status:u,location:f,revalidate:a.headers.get("X-Remix-Revalidate")!==null}}let d,p=a.headers.get("Content-Type");return p&&p.startsWith("application/json")?d=await a.json():d=await a.text(),o===ke.error?{type:o,error:new Sn(u,a.statusText,d),headers:a.headers}:{type:ke.data,data:d,statusCode:a.status,headers:a.headers}}return o===ke.error?{type:o,error:a}:a instanceof Gs?{type:ke.deferred,deferredData:a}:{type:ke.data,data:a}}function Tn(e,t,n){let r=Yi(e).toString(),i={signal:t};if(n){let{formMethod:o,formEncType:a,formData:s}=n;i.method=o.toUpperCase(),i.body=a==="application/x-www-form-urlencoded"?Zs(s):s}return new Request(r,i)}function Zs(e){let t=new URLSearchParams;for(let[n,r]of e.entries())ee(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(n,r);return t}function cf(e,t,n,r,i){let o={},a=null,s,l=!1,c={};return n.forEach((u,f)=>{let d=t[f].route.id;if(ee(!dn(u),"Cannot handle redirect results in processLoaderData"),Vn(u)){let p=sn(e,d),x=u.error;r&&(x=Object.values(r)[0],r=void 0),a=Object.assign(a||{},{[p.route.id]:x}),l||(l=!0,s=Mo(u.error)?u.error.status:500),u.headers&&(c[d]=u.headers)}else Yt(u)?(i&&i.set(d,u.deferredData),o[d]=u.deferredData.data):(o[d]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(s=u.statusCode),u.headers&&(c[d]=u.headers))}),r&&(a=r),{loaderData:o,errors:a,statusCode:s||200,loaderHeaders:c}}function ca(e,t,n,r,i,o,a,s){let{loaderData:l,errors:c}=cf(t,n,r,i,s);for(let u=0;u<o.length;u++){let[f,,d]=o[u];ee(a!==void 0&&a[u]!==void 0,"Did not find corresponding fetcher result");let p=a[u];if(Vn(p)){let x=sn(e.matches,d.route.id);c&&c[x.route.id]||(c=be({},c,{[x.route.id]:p.error})),e.fetchers.delete(f)}else{if(dn(p))throw new Error("Unhandled fetcher revalidation redirect");if(Yt(p))throw new Error("Unhandled fetcher deferred data");{let x={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(f,x)}}}return{loaderData:l,errors:c}}function Si(e,t,n){let r=be({},t);return n.forEach(i=>{let o=i.route.id;t[o]===void 0&&e[o]!==void 0&&(r[o]=e[o])}),r}function sn(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function ua(e){let t=e.find(n=>n.index||n.path===""||n.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new Sn(404,"Not Found",null)}}function da(e){let t=typeof e=="string"?e:ni(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+t+"]")),{type:ke.error,error:new Sn(405,"Method Not Allowed","No action found for ["+t+"]")}}function fa(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(dn(n))return n}}function ni(e){return(e.pathname||"")+(e.search||"")}function uf(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Yt(e){return e.type===ke.deferred}function Vn(e){return e.type===ke.error}function dn(e){return(e&&e.type)===ke.redirect}async function ha(e,t,n,r,i,o){for(let a=0;a<n.length;a++){let s=n[a],l=t[a],c=e.find(f=>f.route.id===l.route.id),u=c!=null&&!Js(c,l)&&(o&&o[l.route.id])!==void 0;Yt(s)&&(i||u)&&await Qs(s,r,i).then(f=>{f&&(n[a]=f||n[a])})}}async function Qs(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ke.data,data:e.deferredData.unwrappedData}}catch(i){return{type:ke.error,error:i}}return{type:ke.data,data:e.deferredData.data}}}function el(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function pa(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function ma(e,t){let n=typeof t=="string"?yt(t).search:t.search;return e[e.length-1].route.index&&!el(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function Yi(e){let t=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",n=typeof e=="string"?e:ni(e);return new URL(n,t)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ir.apply(this,arguments)}function df(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const ff=typeof Object.is=="function"?Object.is:df,{useState:hf,useEffect:pf,useLayoutEffect:mf,useDebugValue:gf}=Wi;function yf(e,t,n){const r=t(),[{inst:i},o]=hf({inst:{value:r,getSnapshot:t}});return mf(()=>{i.value=r,i.getSnapshot=t,_i(i)&&o({inst:i})},[e,r,t]),pf(()=>(_i(i)&&o({inst:i}),e(()=>{_i(i)&&o({inst:i})})),[e]),gf(r),r}function _i(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!ff(n,r)}catch{return!0}}function vf(e,t,n){return t()}const wf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bf=!wf,xf=bf?vf:yf,Ef="useSyncExternalStore"in Wi?(e=>e.useSyncExternalStore)(Wi):xf,tl=m.createContext(null),ri=m.createContext(null),ar=m.createContext(null),$r=m.createContext(null),ii=m.createContext(null),_n=m.createContext(null),vt=m.createContext({outlet:null,matches:[]}),nl=m.createContext(null);function Sf(e,t){let{relative:n}=t===void 0?{}:t;Lt()||ee(!1);let{basename:r,navigator:i}=m.useContext(ii),{hash:o,pathname:a,search:s}=al(e,{relative:n}),l=a;return r!=="/"&&(l=a==="/"?r:Ot([r,a])),i.createHref({pathname:l,search:s,hash:o})}function Lt(){return m.useContext(_n)!=null}function Cn(){return Lt()||ee(!1),m.useContext(_n).location}function _f(){return m.useContext(_n).navigationType}function Cf(e){Lt()||ee(!1);let{pathname:t}=Cn();return m.useMemo(()=>Xt(e,t),[t,e])}function rl(e){return e.filter((t,n)=>n===0||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase)}function zt(){Lt()||ee(!1);let{basename:e,navigator:t}=m.useContext(ii),{matches:n}=m.useContext(vt),{pathname:r}=Cn(),i=JSON.stringify(rl(n).map(s=>s.pathnameBase)),o=m.useRef(!1);return m.useEffect(()=>{o.current=!0}),m.useCallback(function(s,l){if(l===void 0&&(l={}),!o.current)return;if(typeof s=="number"){t.go(s);return}let c=qs(s,JSON.parse(i),r,l.relative==="path");e!=="/"&&(c.pathname=c.pathname==="/"?e:Ot([e,c.pathname])),(l.replace?t.replace:t.push)(c,l.state,l)},[e,t,i,r])}const il=m.createContext(null);function Mf(){return m.useContext(il)}function ol(e){let t=m.useContext(vt).outlet;return t&&m.createElement(il.Provider,{value:e},t)}function en(){let{matches:e}=m.useContext(vt),t=e[e.length-1];return t?t.params:{}}function al(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=m.useContext(vt),{pathname:i}=Cn(),o=JSON.stringify(rl(r).map(a=>a.pathnameBase));return m.useMemo(()=>qs(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function No(e,t){Lt()||ee(!1);let n=m.useContext(ar),{matches:r}=m.useContext(vt),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let s=Cn(),l;if(t){var c;let x=typeof t=="string"?yt(t):t;a==="/"||(c=x.pathname)!=null&&c.startsWith(a)||ee(!1),l=x}else l=s;let u=l.pathname||"/",f=a==="/"?u:u.slice(a.length)||"/",d=an(e,{pathname:f}),p=sl(d&&d.map(x=>Object.assign({},x,{params:Object.assign({},o,x.params),pathname:Ot([a,x.pathname]),pathnameBase:x.pathnameBase==="/"?a:Ot([a,x.pathnameBase])})),r,n||void 0);return t?m.createElement(_n.Provider,{value:{location:Ir({pathname:"/",search:"",hash:"",state:null,key:"default"},l),navigationType:ve.Pop}},p):p}function Nf(){let e=ll(),t=Mo(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unhandled Thrown Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),n?m.createElement("pre",{style:i},n):null,m.createElement("p",null,"💿 Hey developer 👋"),m.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",m.createElement("code",{style:o},"errorElement")," props on ",m.createElement("code",{style:o},"<Route>")))}class Tf extends m.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?m.createElement(nl.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function Pf(e){let{routeContext:t,match:n,children:r}=e,i=m.useContext(tl);return i&&n.route.errorElement&&(i._deepestRenderedBoundaryId=n.route.id),m.createElement(vt.Provider,{value:t},r)}function sl(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,i=n==null?void 0:n.errors;if(i!=null){let o=r.findIndex(a=>a.route.id&&(i==null?void 0:i[a.route.id]));o>=0||ee(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,a,s)=>{let l=a.route.id?i==null?void 0:i[a.route.id]:null,c=n?a.route.errorElement||m.createElement(Nf,null):null,u=()=>m.createElement(Pf,{match:a,routeContext:{outlet:o,matches:t.concat(r.slice(0,s+1))}},l?c:a.route.element!==void 0?a.route.element:o);return n&&(a.route.errorElement||s===0)?m.createElement(Tf,{location:n.location,component:c,error:l,children:u()}):u()},null)}var Ki;(function(e){e.UseRevalidator="useRevalidator"})(Ki||(Ki={}));var Ct;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Ct||(Ct={}));function Rf(e){let t=m.useContext(ri);return t||ee(!1),t}function tn(e){let t=m.useContext(ar);return t||ee(!1),t}function Af(){return tn(Ct.UseNavigation).navigation}function If(){let e=Rf(Ki.UseRevalidator),t=tn(Ct.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function $f(){let{matches:e,loaderData:t}=tn(Ct.UseMatches);return m.useMemo(()=>e.map(n=>{let{pathname:r,params:i}=n;return{id:n.route.id,pathname:r,params:i,data:t[n.route.id],handle:n.route.handle}}),[e,t])}function Of(){let e=tn(Ct.UseLoaderData),t=m.useContext(vt);t||ee(!1);let n=t.matches[t.matches.length-1];return n.route.id||ee(!1),e.loaderData[n.route.id]}function Df(e){return tn(Ct.UseRouteLoaderData).loaderData[e]}function Ff(){let e=tn(Ct.UseActionData);return m.useContext(vt)||ee(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function ll(){var e;let t=m.useContext(nl),n=tn(Ct.UseRouteError),r=m.useContext(vt),i=r.matches[r.matches.length-1];return t||(r||ee(!1),i.route.id||ee(!1),(e=n.errors)==null?void 0:e[i.route.id])}function cl(){let e=m.useContext($r);return e==null?void 0:e._data}function kf(){let e=m.useContext($r);return e==null?void 0:e._error}function Lf(e){let{fallbackElement:t,router:n}=e,r=Ef(n.subscribe,()=>n.state,()=>n.state),i=m.useMemo(()=>({createHref:n.createHref,go:a=>n.navigate(a),push:(a,s,l)=>n.navigate(a,{state:s,preventScrollReset:l==null?void 0:l.preventScrollReset}),replace:(a,s,l)=>n.navigate(a,{replace:!0,state:s,preventScrollReset:l==null?void 0:l.preventScrollReset})}),[n]),o=n.basename||"/";return m.createElement(ri.Provider,{value:{router:n,navigator:i,static:!1,basename:o}},m.createElement(ar.Provider,{value:r},m.createElement(oi,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:i},n.state.initialized?m.createElement(fl,null):t)))}function zf(e){let{basename:t,children:n,initialEntries:r,initialIndex:i}=e,o=m.useRef();o.current==null&&(o.current=Vs({initialEntries:r,initialIndex:i,v5Compat:!0}));let a=o.current,[s,l]=m.useState({action:a.action,location:a.location});return m.useLayoutEffect(()=>a.listen(l),[a]),m.createElement(oi,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a})}function Bf(e){let{to:t,replace:n,state:r,relative:i}=e;Lt()||ee(!1);let o=m.useContext(ar),a=zt();return m.useEffect(()=>{o&&o.navigation.state!=="idle"||a(t,{replace:n,state:r,relative:i})}),null}function ul(e){return ol(e.context)}function dl(e){ee(!1)}function oi(e){let{basename:t="/",children:n=null,location:r,navigationType:i=ve.Pop,navigator:o,static:a=!1}=e;Lt()&&ee(!1);let s=t.replace(/^\/*/,"/"),l=m.useMemo(()=>({basename:s,navigator:o,static:a}),[s,o,a]);typeof r=="string"&&(r=yt(r));let{pathname:c="/",search:u="",hash:f="",state:d=null,key:p="default"}=r,x=m.useMemo(()=>{let v=Xs(c,s);return v==null?null:{pathname:v,search:u,hash:f,state:d,key:p}},[s,c,u,f,d,p]);return x==null?null:m.createElement(ii.Provider,{value:l},m.createElement(_n.Provider,{children:n,value:{location:x,navigationType:i}}))}function fl(e){let{children:t,location:n}=e,r=m.useContext(ri),i=r&&!t?r.router.routes:qn(t);return No(i,n)}function Hf(e){let{children:t,errorElement:n,resolve:r}=e;return m.createElement(Uf,{resolve:r,errorElement:n},m.createElement(Wf,null,t))}var qe;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(qe||(qe={}));const Vf=new Promise(()=>{});class Uf extends m.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,n){console.error("<Await> caught the following error during render",t,n)}render(){let{children:t,errorElement:n,resolve:r}=this.props,i=null,o=qe.pending;if(!(r instanceof Promise))o=qe.success,i=Promise.resolve(),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_data",{get:()=>r});else if(this.state.error){o=qe.error;let a=this.state.error;i=Promise.reject().catch(()=>{}),Object.defineProperty(i,"_tracked",{get:()=>!0}),Object.defineProperty(i,"_error",{get:()=>a})}else r._tracked?(i=r,o=i._error!==void 0?qe.error:i._data!==void 0?qe.success:qe.pending):(o=qe.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),i=r.then(a=>Object.defineProperty(r,"_data",{get:()=>a}),a=>Object.defineProperty(r,"_error",{get:()=>a})));if(o===qe.error&&i._error instanceof Ar)throw Vf;if(o===qe.error&&!n)throw i._error;if(o===qe.error)return m.createElement($r.Provider,{value:i,children:n});if(o===qe.success)return m.createElement($r.Provider,{value:i,children:t});throw i}}function Wf(e){let{children:t}=e,n=cl();return typeof t=="function"?t(n):m.createElement(m.Fragment,null,t)}function qn(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,i)=>{if(!m.isValidElement(r))return;if(r.type===m.Fragment){n.push.apply(n,qn(r.props.children,t));return}r.type!==dl&&ee(!1),!r.props.index||!r.props.children||ee(!1);let o=[...t,i],a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(a.children=qn(r.props.children,o)),n.push(a)}),n}function jf(e){return sl(e)}function To(e){return e.map(t=>{let n=Ir({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=To(n.children)),n})}function Xf(e,t){return af({basename:t==null?void 0:t.basename,history:Vs({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:To(e)}).initialize()}const Yf=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:Ar,Await:Hf,MemoryRouter:zf,Navigate:Bf,get NavigationType(){return ve},Outlet:ul,Route:dl,Router:oi,RouterProvider:Lf,Routes:fl,UNSAFE_DataRouterContext:ri,UNSAFE_DataRouterStateContext:ar,UNSAFE_DataStaticRouterContext:tl,UNSAFE_LocationContext:_n,UNSAFE_NavigationContext:ii,UNSAFE_RouteContext:vt,UNSAFE_enhanceManualRouteObjects:To,createMemoryRouter:Xf,createPath:Kn,createRoutesFromChildren:qn,createRoutesFromElements:qn,defer:nf,generatePath:js,isRouteErrorResponse:Mo,json:Qd,matchPath:Xt,matchRoutes:an,parsePath:yt,redirect:rf,renderMatches:jf,resolvePath:Ks,useActionData:Ff,useAsyncError:kf,useAsyncValue:cl,useHref:Sf,useInRouterContext:Lt,useLoaderData:Of,useLocation:Cn,useMatch:Cf,useMatches:$f,useNavigate:zt,useNavigation:Af,useNavigationType:_f,useOutlet:ol,useOutletContext:Mf,useParams:en,useResolvedPath:al,useRevalidator:If,useRouteError:ll,useRouteLoaderData:Df,useRoutes:No},Symbol.toStringTag,{value:"Module"}));/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kf(e){let{basename:t,children:n,window:r}=e,i=m.useRef();i.current==null&&(i.current=Id({window:r,v5Compat:!0}));let o=i.current,[a,s]=m.useState({action:o.action,location:o.location});return m.useLayoutEffect(()=>o.listen(s),[o]),m.createElement(oi,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o})}var ga;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ga||(ga={}));var ya;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ya||(ya={}));function yn(e,t){return js(e,t)}var qf=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Gf(e,t){e===void 0&&(e=!1);var n=qf(m.useState(e),2),r=n[0],i=n[1],o=m.useMemo(function(){var a=t===void 0?!e:t,s=function(){return i(function(d){return d===e?a:e})},l=function(d){return i(d)},c=function(){return i(e)},u=function(){return i(a)};return{toggle:s,set:l,setLeft:c,setRight:u}},[]);return[r,o]}var Jf=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function Zf(e){e===void 0&&(e=!1);var t=Jf(Gf(e),2),n=t[0],r=t[1],i=r.toggle,o=r.set,a=m.useMemo(function(){var s=function(){return o(!0)},l=function(){return o(!1)};return{toggle:i,set:function(u){return o(!!u)},setTrue:s,setFalse:l}},[]);return[n,a]}var Qf=["fieldProps","min","proFieldProps","max"],eh=function(t,n){var r=t.fieldProps,i=t.min,o=t.proFieldProps,a=t.max,s=ei(t,Qf);return g(ti,He({valueType:"digit",fieldProps:He({min:i,max:a},r),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},s))};const Pn=Oe.forwardRef(eh);var th=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],nh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],rh=Oe.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,a=e.mode,s=e.valueEnum,l=e.request,c=e.showSearch,u=e.options,f=ei(e,th),d=m.useContext(Ts);return g(ti,He(He({valueEnum:Ps(s),request:l,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:He({options:u,mode:a,showSearch:c,getPopupContainer:d.getPopupContainer},n),ref:t,proFieldProps:o},f),{},{children:r}))}),ih=Oe.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,i=e.params,o=e.proFieldProps,a=e.mode,s=e.valueEnum,l=e.request,c=e.options,u=ei(e,nh),f=He({options:c,mode:a||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},n),d=m.useContext(Ts);return g(ti,He(He({valueEnum:Ps(s),request:l,params:i,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:He({getPopupContainer:d.getPopupContainer},f),ref:t,proFieldProps:o},u),{},{children:r}))}),oh=rh,ah=ih,Po=oh;Po.SearchSelect=ah;Po.displayName="ProFormComponent";const hl=Po;var sh=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],lh=Oe.forwardRef(function(e,t){var n=e.fieldProps,r=e.unCheckedChildren,i=e.checkedChildren,o=e.proFieldProps,a=ei(e,sh);return g(ti,He({valueType:"switch",fieldProps:He({unCheckedChildren:r,checkedChildren:i},n),ref:t,valuePropName:"checked",proFieldProps:o,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},a))});const qi=lh,Gi=Rs();class Mn{constructor({fileType:t,meta:n,parentFile:r}){Ie(this,"parentFile");Ie(this,"fileType");Ie(this,"meta");Ie(this,"disposer");this.fileType=t,this.meta=n,this.parentFile=r,Ft(this,{meta:St,fileType:St,parentFile:St,updateMeta:At});const i=na(()=>As(this.meta),a=>{Gi.emit("updateFileMeta",a)},{fireImmediately:!0,delay:300}),o=na(()=>Q.mapValues(this.subFileMap,a=>a.reduce((s,l)=>(s[l.meta.id]=l,s),{})),(a,s)=>{s&&Object.entries(s).forEach(([l,c])=>Object.entries(c).forEach(([u,f])=>{Q.get(a,[l,u])||f.disposer()}))},{fireImmediately:!0,delay:300});this.disposer=()=>{i(),o()}}updateMeta(t){Q.isFunction(t)?this.meta=t(this.meta):this.meta=t}subFileMapToJson(){return Q.mapValues(this.subFileMap,t=>t.map(n=>n.toJSON()))}static fromJSON(){throw new Error(`【${this.name}】未实现formJson方法`)}static create(t,n){throw new Error(`【${this.name}】未实现create方法`)}}var z=(e=>(e.Text="Text",e.LongText="LongText",e.Date="Date",e.DateTime="DateTime",e.Enum="Enum",e.Number="Number",e.AutoNumber="AutoNumber",e.PhoneNumber="PhoneNumber",e.Email="Email",e.URL="URL",e.Image="Image",e))(z||{}),ai=(e=>(e.MasterDetail="MasterDetail",e.Lookup="Lookup",e))(ai||{}),Ln=(e=>(e.ManyToOne="ManyToOne",e.OneToOne="OneToOne",e))(Ln||{}),Kt=(e=>(e.ManyToMany="ManyToMany",e.ManyToOne="ManyToOne",e))(Kt||{}),nn=(e=>(e.App="App",e.Page="Page",e.Widget="Widget",e.View="View",e.Entity="Entity",e.EntityRelation="EntityRelation",e.EntityField="EntityField",e.Flow="Flow",e.FlowNode="FlowNode",e.FlowEdge="FlowEdge",e))(nn||{});class Jt extends Mn{constructor(n,r){super({fileType:nn.EntityField,meta:n,parentFile:r});Ie(this,"subFileMap",{});Ft(this,{subFileMap:St})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return rt(()=>{const i=new Jt({...n,version:"0.0.1"},r);return r.entityFields.push(i),i})}static formJSON(n,r){return Jt.create(Q.omit(n,"fileType"),r)}}class Gn extends Mn{constructor(n,r){super({fileType:nn.EntityRelation,meta:n,parentFile:r});Ie(this,"subFileMap",{});Ft(this,{subFileMap:St})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return rt(()=>{const i=new Gn(n,r);return r.entityRelations.push(i),i})}static formJSON(n,r){return Gn.create(Q.omit(n,"fileType"),r)}}const Zr=class extends Mn{constructor(n,r){super({fileType:nn.Entity,meta:n,parentFile:r});Ie(this,"subFileMap",{entityFields:[],entityRelations:[]});Ft(this,{subFileMap:St,entityFields:Pe,entityRelations:Pe,deleteEntityField:At})}get entityFields(){return this.subFileMap.entityFields}deleteEntityField(n){const r=[...this.subFileMap.entityFields];this.subFileMap.entityFields.length=0,this.subFileMap.entityFields.push(...r.filter(i=>i.meta.id!==n))}get entityRelations(){return this.subFileMap.entityRelations}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return rt(()=>{const i=new Zr({...n,version:"0.0.1"},r);return r.entities.push(i),i})}static formJSON(n,r){return rt(()=>{const i=Zr.create(Q.omit(n,["fileType","entityFields","entityRelations"]),r);return n.entityFields.map(o=>Jt.formJSON(o,i)),n.entityRelations.map(o=>Gn.formJSON(o,i)),i})}};let Te=Zr;Ie(Te,"getEntityFieldTypeLabel",n=>{switch(n){case z.AutoNumber:return"自动编号";case z.Date:return"日期";case z.DateTime:return"日期时间";case z.Number:return"数字";case z.Email:return"邮箱";case z.Enum:return"枚举";case z.LongText:return"长文本";case z.Text:return"单行文本";case z.PhoneNumber:return"手机号";case z.URL:return"网址";case z.Image:return"图片";default:return"未知"}});function ch(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const Ci=()=>!1,Ro=Object.assign,pl=Array.isArray,_t=e=>typeof e=="string",uh=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},dh=/\B([A-Z])/g,fh=uh(e=>e.replace(dh,"-$1").toLowerCase());function hh(e){throw e}function ph(e){}function fn(e,t,n,r){const i=e,o=new SyntaxError(String(i));return o.code=e,o.loc=t,o}const Ji=Symbol(""),mh=Symbol(""),gh=Symbol(""),yh=Symbol(""),vh=Symbol(""),Or=Symbol(""),wh=Symbol(""),bh=Symbol(""),xh=Symbol(""),Eh=Symbol(""),ml=Symbol(""),Sh=Symbol(""),_h=Symbol(""),Ch=Symbol(""),va=Symbol(""),Mh=Symbol(""),gl=Symbol(""),Nh=Symbol(""),Th=Symbol(""),Ph=Symbol(""),ht={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function Rh(e,t=ht){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function Zi(e,t,n,r,i,o,a,s=!1,l=!1,c=!1,u=ht){return e&&(s?(e.helper(Or),e.helper(zr(e.inSSR,c))):e.helper(Lr(e.inSSR,c)),a&&e.helper(Sh)),{type:13,tag:t,props:n,children:r,patchFlag:i,dynamicProps:o,directives:a,isBlock:s,disableTracking:l,isComponent:c,loc:u}}function ln(e,t=ht){return{type:15,loc:t,properties:e}}function yl(e,t){return{type:16,loc:ht,key:_t(e)?lt(e,!0):e,value:t}}function lt(e,t=!1,n=ht,r=0){return{type:4,loc:n,content:e,isStatic:t,constType:t?3:r}}function Mi(e,t=ht){return{type:8,loc:t,children:e}}function Dr(e,t=[],n=ht){return{type:14,loc:n,callee:e,arguments:t}}function wa(e,t=void 0,n=!1,r=!1,i=ht){return{type:18,params:e,returns:t,newline:n,isSlot:r,loc:i}}function Ah(e,t,n,r=!0){return{type:19,test:e,consequent:t,alternate:n,newline:r,loc:ht}}function Ih(e){return{type:21,body:e,loc:ht}}const $h=e=>e.type===4&&e.isStatic,dr=(e,t)=>e===t||e===fh(t);function Oh(e){if(dr(e,"Teleport"))return mh;if(dr(e,"Suspense"))return gh;if(dr(e,"KeepAlive"))return yh;if(dr(e,"BaseTransition"))return vh}function Dh(e,t,n){const i={source:e.source.slice(t,t+n),start:Fr(e.start,e.source,t),end:e.end};return n!=null&&(i.end=Fr(e.start,e.source,t+n)),i}function Fr(e,t,n=t.length){return kr(Ro({},e),t,n)}function kr(e,t,n=t.length){let r=0,i=-1;for(let o=0;o<n;o++)t.charCodeAt(o)===10&&(r++,i=o);return e.offset+=n,e.line+=r,e.column=i===-1?e.column+n:n-i,e}function vl(e,t,n=!1){for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&(n||i.exp)&&(_t(t)?i.name===t:t.test(i.name)))return i}}function wl(e,t,n=!1,r=!1){for(let i=0;i<e.props.length;i++){const o=e.props[i];if(o.type===6){if(n)continue;if(o.name===t&&(o.value||r))return o}else if(o.name==="bind"&&(o.exp||r)&&bl(o.arg,t))return o}}function bl(e,t){return!!(e&&$h(e)&&e.content===t)}function Fh(e){return e.type===7&&e.name==="slot"}function xl(e){return e.type===1&&e.tagType===3}function ba(e){return e.type===1&&e.tagType===2}function Lr(e,t){return e||t?xh:Eh}function zr(e,t){return e||t?wh:bh}const kh=new Set([Mh,gl]);function El(e,t=[]){if(e&&!_t(e)&&e.type===14){const n=e.callee;if(!_t(n)&&kh.has(n))return El(e.arguments[0],t.concat(e))}return[e,t]}function Br(e,t,n){let r,i=e.type===13?e.props:e.arguments[2],o=[],a;if(i&&!_t(i)&&i.type===14){const s=El(i);i=s[0],o=s[1],a=o[o.length-1]}if(i==null||_t(i))r=ln([t]);else if(i.type===14){const s=i.arguments[0];!_t(s)&&s.type===15?xa(t,s)||s.properties.unshift(t):i.callee===Nh?r=Dr(n.helper(va),[ln([t]),i]):i.arguments.unshift(ln([t])),!r&&(r=i)}else i.type===15?(xa(t,i)||i.properties.unshift(t),r=i):(r=Dr(n.helper(va),[ln([t]),i]),a&&a.callee===gl&&(a=o[o.length-2]));e.type===13?a?a.arguments[0]=r:e.props=r:a?a.arguments[0]=r:e.arguments[2]=r}function xa(e,t){let n=!1;if(e.key.type===4){const r=e.key.content;n=t.properties.some(i=>i.key.type===4&&i.key.content===r)}return n}function Lh(e){return e.type===14&&e.callee===Th?e.arguments[1].returns:e}function zh(e,{helper:t,removeHelper:n,inSSR:r}){e.isBlock||(e.isBlock=!0,n(Lr(r,e.isComponent)),t(Or),t(zr(r,e.isComponent)))}function Ea(e,t){const n=t.options?t.options.compatConfig:t.compatConfig,r=n&&n[e];return e==="MODE"?r||3:r}function Sl(e,t){const n=Ea("MODE",t),r=Ea(e,t);return n===3?r===!0:r!==!1}function Hr(e,t,n,...r){return Sl(e,t)}const Bh=/&(gt|lt|amp|apos|quot);/g,Hh={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},Sa={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Ci,isPreTag:Ci,isCustomElement:Ci,decodeEntities:e=>e.replace(Bh,(t,n)=>Hh[n]),onError:hh,onWarn:ph,comments:!1};function Vh(e,t={}){const n=Uh(e,t),r=Ge(n);return Rh(Ao(n,0,[]),ot(n,r))}function Uh(e,t){const n=Ro({},Sa);let r;for(r in t)n[r]=t[r]===void 0?Sa[r]:t[r];return{options:n,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:n.onWarn}}function Ao(e,t,n){const r=si(n),i=r?r.ns:0,o=[];for(;!Zh(e,t,n);){const s=e.source;let l;if(t===0||t===1){if(!e.inVPre&&Le(s,e.options.delimiters[0]))l=Gh(e,t);else if(t===0&&s[0]==="<")if(s.length===1)de(e,5,1);else if(s[1]==="!")Le(s,"<!--")?l=jh(e):Le(s,"<!DOCTYPE")?l=Rn(e):Le(s,"<![CDATA[")?i!==0?l=Wh(e,n):(de(e,1),l=Rn(e)):(de(e,11),l=Rn(e));else if(s[1]==="/")if(s.length===2)de(e,5,2);else if(s[2]===">"){de(e,14,2),Re(e,3);continue}else if(/[a-z]/i.test(s[2])){de(e,23),Qi(e,1,r);continue}else de(e,12,2),l=Rn(e);else/[a-z]/i.test(s[1])?(l=Xh(e,n),Sl("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(c=>c.type===7&&_l(c.name))&&(l=l.children)):s[1]==="?"?(de(e,21,1),l=Rn(e)):de(e,12,1)}if(l||(l=Jh(e,t)),pl(l))for(let c=0;c<l.length;c++)_a(o,l[c]);else _a(o,l)}let a=!1;if(t!==2&&t!==1){const s=e.options.whitespace!=="preserve";for(let l=0;l<o.length;l++){const c=o[l];if(c.type===2)if(e.inPre)c.content=c.content.replace(/\r\n/g,`
`);else if(/[^\t\r\n\f ]/.test(c.content))s&&(c.content=c.content.replace(/[\t\r\n\f ]+/g," "));else{const u=o[l-1],f=o[l+1];!u||!f||s&&(u.type===3&&f.type===3||u.type===3&&f.type===1||u.type===1&&f.type===3||u.type===1&&f.type===1&&/[\r\n]/.test(c.content))?(a=!0,o[l]=null):c.content=" "}else c.type===3&&!e.options.comments&&(a=!0,o[l]=null)}if(e.inPre&&r&&e.options.isPreTag(r.tag)){const l=o[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return a?o.filter(Boolean):o}function _a(e,t){if(t.type===2){const n=si(e);if(n&&n.type===2&&n.loc.end.offset===t.loc.start.offset){n.content+=t.content,n.loc.end=t.loc.end,n.loc.source+=t.loc.source;return}}e.push(t)}function Wh(e,t){Re(e,9);const n=Ao(e,3,t);return e.source.length===0?de(e,6):Re(e,3),n}function jh(e){const t=Ge(e);let n;const r=/--(\!)?>/.exec(e.source);if(!r)n=e.source.slice(4),Re(e,e.source.length),de(e,7);else{r.index<=3&&de(e,0),r[1]&&de(e,10),n=e.source.slice(4,r.index);const i=e.source.slice(0,r.index);let o=1,a=0;for(;(a=i.indexOf("<!--",o))!==-1;)Re(e,a-o+1),a+4<i.length&&de(e,16),o=a+1;Re(e,r.index+r[0].length-o+1)}return{type:3,content:n,loc:ot(e,t)}}function Rn(e){const t=Ge(e),n=e.source[1]==="?"?1:2;let r;const i=e.source.indexOf(">");return i===-1?(r=e.source.slice(n),Re(e,e.source.length)):(r=e.source.slice(n,i),Re(e,i+1)),{type:3,content:r,loc:ot(e,t)}}function Xh(e,t){const n=e.inPre,r=e.inVPre,i=si(t),o=Qi(e,0,i),a=e.inPre&&!n,s=e.inVPre&&!r;if(o.isSelfClosing||e.options.isVoidTag(o.tag))return a&&(e.inPre=!1),s&&(e.inVPre=!1),o;t.push(o);const l=e.options.getTextMode(o,i),c=Ao(e,l,t);t.pop();{const u=o.props.find(f=>f.type===6&&f.name==="inline-template");if(u&&Hr("COMPILER_INLINE_TEMPLATE",e,u.loc)){const f=ot(e,o.loc.end);u.value={type:2,content:f.source,loc:f}}}if(o.children=c,eo(e.source,o.tag))Qi(e,1,i);else if(de(e,24,0,o.loc.start),e.source.length===0&&o.tag.toLowerCase()==="script"){const u=c[0];u&&Le(u.loc.source,"<!--")&&de(e,8)}return o.loc=ot(e,o.loc.start),a&&(e.inPre=!1),s&&(e.inVPre=!1),o}const _l=ch("if,else,else-if,for,slot");function Qi(e,t,n){const r=Ge(e),i=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),o=i[1],a=e.options.getNamespace(o,n);Re(e,i[0].length),Jn(e);const s=Ge(e),l=e.source;e.options.isPreTag(o)&&(e.inPre=!0);let c=Ca(e,t);t===0&&!e.inVPre&&c.some(d=>d.type===7&&d.name==="pre")&&(e.inVPre=!0,Ro(e,s),e.source=l,c=Ca(e,t).filter(d=>d.name!=="v-pre"));let u=!1;if(e.source.length===0?de(e,9):(u=Le(e.source,"/>"),t===1&&u&&de(e,4),Re(e,u?2:1)),t===1)return;let f=0;return e.inVPre||(o==="slot"?f=2:o==="template"?c.some(d=>d.type===7&&_l(d.name))&&(f=3):Yh(o,c,e)&&(f=1)),{type:1,ns:a,tag:o,tagType:f,props:c,isSelfClosing:u,children:[],loc:ot(e,r),codegenNode:void 0}}function Yh(e,t,n){const r=n.options;if(r.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||Oh(e)||r.isBuiltInComponent&&r.isBuiltInComponent(e)||r.isNativeTag&&!r.isNativeTag(e))return!0;for(let i=0;i<t.length;i++){const o=t[i];if(o.type===6){if(o.name==="is"&&o.value){if(o.value.content.startsWith("vue:"))return!0;if(Hr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}else{if(o.name==="is")return!0;if(o.name==="bind"&&bl(o.arg,"is")&&Hr("COMPILER_IS_ON_ELEMENT",n,o.loc))return!0}}}function Ca(e,t){const n=[],r=new Set;for(;e.source.length>0&&!Le(e.source,">")&&!Le(e.source,"/>");){if(Le(e.source,"/")){de(e,22),Re(e,1),Jn(e);continue}t===1&&de(e,3);const i=Kh(e,r);i.type===6&&i.value&&i.name==="class"&&(i.value.content=i.value.content.replace(/\s+/g," ").trim()),t===0&&n.push(i),/^[^\t\r\n\f />]/.test(e.source)&&de(e,15),Jn(e)}return n}function Kh(e,t){const n=Ge(e),i=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(i)&&de(e,2),t.add(i),i[0]==="="&&de(e,19);{const s=/["'<]/g;let l;for(;l=s.exec(i);)de(e,17,l.index)}Re(e,i.length);let o;/^[\t\r\n\f ]*=/.test(e.source)&&(Jn(e),Re(e,1),Jn(e),o=qh(e),o||de(e,13));const a=ot(e,n);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(i)){const s=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(i);let l=Le(i,"."),c=s[1]||(l||Le(i,":")?"bind":Le(i,"@")?"on":"slot"),u;if(s[2]){const d=c==="slot",p=i.lastIndexOf(s[2]),x=ot(e,Ma(e,n,p),Ma(e,n,p+s[2].length+(d&&s[3]||"").length));let v=s[2],S=!0;v.startsWith("[")?(S=!1,v.endsWith("]")?v=v.slice(1,v.length-1):(de(e,27),v=v.slice(1))):d&&(v+=s[3]||""),u={type:4,content:v,isStatic:S,constType:S?3:0,loc:x}}if(o&&o.isQuoted){const d=o.loc;d.start.offset++,d.start.column++,d.end=Fr(d.start,o.content),d.source=d.source.slice(1,-1)}const f=s[3]?s[3].slice(1).split("."):[];return l&&f.push("prop"),c==="bind"&&u&&f.includes("sync")&&Hr("COMPILER_V_BIND_SYNC",e,a,u.loc.source)&&(c="model",f.splice(f.indexOf("sync"),1)),{type:7,name:c,exp:o&&{type:4,content:o.content,isStatic:!1,constType:0,loc:o.loc},arg:u,modifiers:f,loc:a}}return!e.inVPre&&Le(i,"v-")&&de(e,26),{type:6,name:i,value:o&&{type:2,content:o.content,loc:o.loc},loc:a}}function qh(e){const t=Ge(e);let n;const r=e.source[0],i=r==='"'||r==="'";if(i){Re(e,1);const o=e.source.indexOf(r);o===-1?n=Un(e,e.source.length,4):(n=Un(e,o,4),Re(e,1))}else{const o=/^[^\t\r\n\f >]+/.exec(e.source);if(!o)return;const a=/["'<=`]/g;let s;for(;s=a.exec(o[0]);)de(e,18,s.index);n=Un(e,o[0].length,4)}return{content:n,isQuoted:i,loc:ot(e,t)}}function Gh(e,t){const[n,r]=e.options.delimiters,i=e.source.indexOf(r,n.length);if(i===-1){de(e,25);return}const o=Ge(e);Re(e,n.length);const a=Ge(e),s=Ge(e),l=i-n.length,c=e.source.slice(0,l),u=Un(e,l,t),f=u.trim(),d=u.indexOf(f);d>0&&kr(a,c,d);const p=l-(u.length-f.length-d);return kr(s,c,p),Re(e,r.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:f,loc:ot(e,a,s)},loc:ot(e,o)}}function Jh(e,t){const n=t===3?["]]>"]:["<",e.options.delimiters[0]];let r=e.source.length;for(let a=0;a<n.length;a++){const s=e.source.indexOf(n[a],1);s!==-1&&r>s&&(r=s)}const i=Ge(e);return{type:2,content:Un(e,r,t),loc:ot(e,i)}}function Un(e,t,n){const r=e.source.slice(0,t);return Re(e,t),n===2||n===3||!r.includes("&")?r:e.options.decodeEntities(r,n===4)}function Ge(e){const{column:t,line:n,offset:r}=e;return{column:t,line:n,offset:r}}function ot(e,t,n){return n=n||Ge(e),{start:t,end:n,source:e.originalSource.slice(t.offset,n.offset)}}function si(e){return e[e.length-1]}function Le(e,t){return e.startsWith(t)}function Re(e,t){const{source:n}=e;kr(e,n,t),e.source=n.slice(t)}function Jn(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Re(e,t[0].length)}function Ma(e,t,n){return Fr(t,e.originalSource.slice(t.offset,n),n)}function de(e,t,n,r=Ge(e)){n&&(r.offset+=n,r.column+=n),e.options.onError(fn(t,{start:r,end:r,source:""}))}function Zh(e,t,n){const r=e.source;switch(t){case 0:if(Le(r,"</")){for(let i=n.length-1;i>=0;--i)if(eo(r,n[i].tag))return!0}break;case 1:case 2:{const i=si(n);if(i&&eo(r,i.tag))return!0;break}case 3:if(Le(r,"]]>"))return!0;break}return!r}function eo(e,t){return Le(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function Qh(e,t){let n=0;const r=()=>{n--};for(;n<e.children.length;n++){const i=e.children[n];_t(i)||(t.parent=e,t.childIndex=n,t.onNodeRemoved=r,Io(i,t))}}function Io(e,t){t.currentNode=e;const{nodeTransforms:n}=t,r=[];for(let o=0;o<n.length;o++){const a=n[o](e,t);if(a&&(pl(a)?r.push(...a):r.push(a)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(ml);break;case 5:t.ssr||t.helper(Ch);break;case 9:for(let o=0;o<e.branches.length;o++)Io(e.branches[o],t);break;case 10:case 11:case 1:case 0:Qh(e,t);break}t.currentNode=e;let i=r.length;for(;i--;)r[i]()}function Cl(e,t){const n=_t(e)?r=>r===e:r=>e.test(r);return(r,i)=>{if(r.type===1){const{props:o}=r;if(r.tagType===3&&o.some(Fh))return;const a=[];for(let s=0;s<o.length;s++){const l=o[s];if(l.type===7&&n(l.name)){o.splice(s,1),s--;const c=t(r,l,i);c&&a.push(c)}}return a}}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");Cl(/^(if|else|else-if)$/,(e,t,n)=>ep(e,t,n,(r,i,o)=>{const a=n.parent.children;let s=a.indexOf(r),l=0;for(;s-->=0;){const c=a[s];c&&c.type===9&&(l+=c.branches.length)}return()=>{if(o)r.codegenNode=Ta(i,l,n);else{const c=tp(r.codegenNode);c.alternate=Ta(i,l+r.branches.length-1,n)}}}));function ep(e,t,n,r){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const i=t.exp?t.exp.loc:e.loc;n.onError(fn(28,t.loc)),t.exp=lt("true",!1,i)}if(t.name==="if"){const i=Na(e,t),o={type:9,loc:e.loc,branches:[i]};if(n.replaceNode(o),r)return r(o,i,!0)}else{const i=n.parent.children;let o=i.indexOf(e);for(;o-->=-1;){const a=i[o];if(a&&a.type===3){n.removeNode(a);continue}if(a&&a.type===2&&!a.content.trim().length){n.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&n.onError(fn(30,e.loc)),n.removeNode();const s=Na(e,t);a.branches.push(s);const l=r&&r(a,s,!1);Io(s,n),l&&l(),n.currentNode=null}else n.onError(fn(30,e.loc));break}}}function Na(e,t){const n=e.tagType===3;return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:n&&!vl(e,"for")?e.children:[e],userKey:wl(e,"key"),isTemplateIf:n}}function Ta(e,t,n){return e.condition?Ah(e.condition,Pa(e,t,n),Dr(n.helper(ml),['""',"true"])):Pa(e,t,n)}function Pa(e,t,n){const{helper:r}=n,i=yl("key",lt(`${t}`,!1,ht,2)),{children:o}=e,a=o[0];if(o.length!==1||a.type!==1)if(o.length===1&&a.type===11){const l=a.codegenNode;return Br(l,i,n),l}else{let l=64;return Zi(n,r(Ji),ln([i]),o,l+"",void 0,void 0,!0,!1,!1,e.loc)}else{const l=a.codegenNode,c=Lh(l);return c.type===13&&zh(c,n),Br(c,i,n),l}}function tp(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}Cl("for",(e,t,n)=>{const{helper:r,removeHelper:i}=n;return np(e,t,n,o=>{const a=Dr(r(_h),[o.source]),s=xl(e),l=vl(e,"memo"),c=wl(e,"key"),u=c&&(c.type===6?lt(c.value.content,!0):c.exp),f=c?yl("key",u):null,d=o.source.type===4&&o.source.constType>0,p=d?64:c?128:256;return o.codegenNode=Zi(n,r(Ji),void 0,a,p+"",void 0,void 0,!0,!d,!1,e.loc),()=>{let x;const{children:v}=o,S=v.length!==1||v[0].type!==1,h=ba(e)?e:s&&e.children.length===1&&ba(e.children[0])?e.children[0]:null;if(h?(x=h.codegenNode,s&&f&&Br(x,f,n)):S?x=Zi(n,r(Ji),f?ln([f]):void 0,e.children,64+"",void 0,void 0,!0,void 0,!1):(x=v[0].codegenNode,s&&f&&Br(x,f,n),x.isBlock!==!d&&(x.isBlock?(i(Or),i(zr(n.inSSR,x.isComponent))):i(Lr(n.inSSR,x.isComponent))),x.isBlock=!d,x.isBlock?(r(Or),r(zr(n.inSSR,x.isComponent))):r(Lr(n.inSSR,x.isComponent))),l){const b=wa(Aa(o.parseResult,[lt("_cached")]));b.body=Ih([Mi(["const _memo = (",l.exp,")"]),Mi(["if (_cached",...u?[" && _cached.key === ",u]:[],` && ${n.helperString(Ph)}(_cached, _memo)) return _cached`]),Mi(["const _item = ",x]),lt("_item.memo = _memo"),lt("return _item")]),a.arguments.push(b,lt("_cache"),lt(String(n.cached++)))}else a.arguments.push(wa(Aa(o.parseResult),x,!0))}})});function np(e,t,n,r){if(!t.exp){n.onError(fn(31,t.loc));return}const i=op(t.exp);if(!i){n.onError(fn(32,t.loc));return}const{addIdentifiers:o,removeIdentifiers:a,scopes:s}=n,{source:l,value:c,key:u,index:f}=i,d={type:11,loc:t.loc,source:l,valueAlias:c,keyAlias:u,objectIndexAlias:f,parseResult:i,children:xl(e)?e.children:[e]};n.replaceNode(d),s.vFor++;const p=r&&r(d);return()=>{s.vFor--,p&&p()}}const rp=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,Ra=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ip=/^\(|\)$/g;function op(e,t){const n=e.loc,r=e.content,i=r.match(rp);if(!i)return;const[,o,a]=i,s={source:fr(n,a.trim(),r.indexOf(a,o.length)),value:void 0,key:void 0,index:void 0};let l=o.trim().replace(ip,"").trim();const c=o.indexOf(l),u=l.match(Ra);if(u){l=l.replace(Ra,"").trim();const f=u[1].trim();let d;if(f&&(d=r.indexOf(f,c+l.length),s.key=fr(n,f,d)),u[2]){const p=u[2].trim();p&&(s.index=fr(n,p,r.indexOf(p,s.key?d+f.length:c+l.length)))}}return l&&(s.value=fr(n,l,c)),s}function fr(e,t,n){return lt(t,!1,Dh(e,n,t.length))}function Aa({value:e,key:t,index:n},r=[]){return ap([e,t,n,...r])}function ap(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((n,r)=>n||lt("_".repeat(r+1),!1))}const sp=/[\s\S]*{{[\s\S]*}}[\s\S]*/m,lp=e=>typeof e=="string"&&sp.test(e);var Vt=(e=>(e[e.ROOT=0]="ROOT",e[e.ELEMENT=1]="ELEMENT",e[e.TEXT=2]="TEXT",e[e.COMMENT=3]="COMMENT",e[e.SIMPLE_EXPRESSION=4]="SIMPLE_EXPRESSION",e[e.INTERPOLATION=5]="INTERPOLATION",e[e.ATTRIBUTE=6]="ATTRIBUTE",e[e.DIRECTIVE=7]="DIRECTIVE",e[e.COMPOUND_EXPRESSION=8]="COMPOUND_EXPRESSION",e[e.IF=9]="IF",e[e.IF_BRANCH=10]="IF_BRANCH",e[e.FOR=11]="FOR",e[e.TEXT_CALL=12]="TEXT_CALL",e[e.VNODE_CALL=13]="VNODE_CALL",e[e.JS_CALL_EXPRESSION=14]="JS_CALL_EXPRESSION",e[e.JS_OBJECT_EXPRESSION=15]="JS_OBJECT_EXPRESSION",e[e.JS_PROPERTY=16]="JS_PROPERTY",e[e.JS_ARRAY_EXPRESSION=17]="JS_ARRAY_EXPRESSION",e[e.JS_FUNCTION_EXPRESSION=18]="JS_FUNCTION_EXPRESSION",e[e.JS_CONDITIONAL_EXPRESSION=19]="JS_CONDITIONAL_EXPRESSION",e[e.JS_CACHE_EXPRESSION=20]="JS_CACHE_EXPRESSION",e[e.JS_BLOCK_STATEMENT=21]="JS_BLOCK_STATEMENT",e[e.JS_TEMPLATE_LITERAL=22]="JS_TEMPLATE_LITERAL",e[e.JS_IF_STATEMENT=23]="JS_IF_STATEMENT",e[e.JS_ASSIGNMENT_EXPRESSION=24]="JS_ASSIGNMENT_EXPRESSION",e[e.JS_SEQUENCE_EXPRESSION=25]="JS_SEQUENCE_EXPRESSION",e[e.JS_RETURN_STATEMENT=26]="JS_RETURN_STATEMENT",e))(Vt||{});class Zt extends Mn{constructor(n,r){super({fileType:nn.Widget,meta:n,parentFile:r});Ie(this,"stateTypeDefs");Ie(this,"subFileMap",{});const i=new Du({});this.stateTypeDefs=i.appFactory.widgetByType[n.type].stateTypeDefs,Ft(this,{subFileMap:St,flattenedMetaValMap:Pe.struct,slots:Pe.struct})}get flattenedMetaValMap(){return Q.mapValues(Fu.flatten(As(this.meta.props)),n=>{var r,i,o,a,s,l,c,u;if(lp(n)){const f=Vh(n);let d;return f.children.length===1&&((r=Q.head(f.children))==null?void 0:r.type)===Vt.INTERPOLATION||f.children.length===2&&((i=Q.head(f.children))==null?void 0:i.type)===Vt.INTERPOLATION&&((o=Q.last(f.children))==null?void 0:o.type)===Vt.TEXT&&((a=Q.last(f.children))==null?void 0:a.content.trim())==="}"?(d=((s=Q.head(f.children))==null?void 0:s.content).content||"",((l=Q.last(f.children))==null?void 0:l.type)===Vt.TEXT&&((c=Q.last(f.children))==null?void 0:c.content.trim())==="}"&&(d+=((u=Q.last(f.children))==null?void 0:u.content)??"")):d=`\`${f.children.map(p=>{if(p.type===Vt.TEXT)return p.content;if(p.type===Vt.INTERPOLATION){const x=p.content.content;return x?`\${${x}}`:""}return p.loc.source}).join("")}\``,{type:"Expression",raw:n,ast:f,evalString:d}}else return{type:"Normal",raw:n}})}get slots(){return{...this.meta.slots,...Q.mapValues(this.meta.dynamicSlots||{},n=>n.children)}}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return rt(()=>{const i=new Zt({...n,version:"0.0.1"},r);return r.widgets.push(i),i})}static formJSON(n,r){return Zt.create(Q.omit(n,"fileType"),r)}}class vn extends Mn{constructor(n,r){super({fileType:nn.App,meta:n,parentFile:r});Ie(this,"subFileMap",{widgets:[]});Ie(this,"getWidgetStateDefs",()=>{const n="!define",r={"!name":"DATA_TREE",[n]:{},i:{"!type":"number","!doc":"组件当前所在上下文的层级"},currentRow:{"!doc":"当前行数据"}};return this.subFileMap.widgets.forEach(i=>{Reflect.set(r,i.meta.name,Q.omit(i.stateTypeDefs,n)),r[n]={...r[n],...i.stateTypeDefs[n]}}),r});Ft(this,{subFileMap:St,widgets:Pe,widgetMap:Pe.struct,widgetRelationById:Pe.struct,addWidget:At,deleteWidget:At,updateWidgets:At,moveWidget:At})}get widgets(){return this.subFileMap.widgets}get widgetMap(){return Q.keyBy(this.subFileMap.widgets,n=>n.meta.id)}get widgetRelationById(){return this.widgets.reduce((n,r)=>{const i=r.meta.id;Reflect.has(n,i)||(n[i]={props:r.meta,file:r,slotPath:""});const o=n[i];return Q.isEmpty(r.slots)||Object.entries(r.slots).forEach(([a,s])=>{s.forEach(l=>{Reflect.has(n,l)?(n[l].parent=o,n[l].slotPath=a):n[l]={props:this.widgetMap[l].meta,file:this.widgetMap[l],parent:o,slotPath:a}})}),n},{})}addWidget({sourceWidgetMeta:n,targetPosition:r,targetSlotPath:i,targetWidgetId:o}){const a=this.widgetMap[o];if(!a)return;const s=Zt.create(n,this);a.slots[i].splice(r,0,s.meta.id)}moveWidget({sourceWidgetId:n,targetWidgetId:r,targetPosition:i,targetSlotPath:o}){let a=-1;this.subFileMap.widgets.forEach(s=>{var l,c;Q.isObject(s.slots)&&Object.keys(s.slots).forEach(u=>{a===-1&&(a=s.slots[u].findIndex(f=>f===n),a!==-1&&s.slots[u].splice(a,1))}),s.meta.id===r&&(((c=(l=this.widgetRelationById[n])==null?void 0:l.parent)==null?void 0:c.props.id)===r&&this.widgetRelationById[n].slotPath===o?s.slots[o].splice(a<i?i-1:i,0,n):s.slots[o].splice(i,0,n))})}deleteWidget(n,r=!0){this.subFileMap.widgets.forEach(a=>{Q.isObject(a.slots)&&Object.keys(a.slots).forEach(s=>{const l=a.slots[s].findIndex(c=>c===n);l!==-1&&a.slots[s].splice(l,1)})});const i=[n],o=[this.subFileMap.widgets.find(a=>a.meta.id===n)];for(;!Q.isEmpty(o);){const a=o.shift();Q.isObject(a.slots)&&Object.values(a.slots).forEach(s=>{s.forEach(l=>{i.push(l),o.push(this.subFileMap.widgets.find(c=>c.meta.id===l))})})}i.forEach(a=>{const s=this.subFileMap.widgets.findIndex(l=>l.meta.id===a);s!==-1&&this.subFileMap.widgets.splice(s,1)})}updateWidgets(n){const r=[...this.subFileMap.widgets];this.subFileMap.widgets.length=0,Q.isFunction(n)?this.subFileMap.widgets.push(...n(r)):this.subFileMap.widgets.push(...n)}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n,r){return rt(()=>{const i=new vn({...n,version:"0.0.1"},r);return r.pages.push(i),i})}static formJSON(n,r){return rt(()=>{const i=vn.create(Q.omit(n,["fileType","widgets"]),r);return n.widgets.map(o=>Zt.formJSON(o,i)),i})}}class Zn extends Mn{constructor(n){super({fileType:nn.App,meta:n,parentFile:null});Ie(this,"subFileMap",{pages:[],entities:[]});Ie(this,"persistMeta",()=>{typeof window>"u"||window.localStorage.setItem(this.meta.id,JSON.stringify(this.toJSON()))});Ie(this,"disposer",()=>{super.disposer(),Gi.off("updateFileMeta",this.persistMeta)});Ft(this,{subFileMap:St,entities:Pe.struct,pages:Pe.struct,entityMap:Pe.struct,entityRelationMap:Pe.struct,entityRelationsByTargetEntityNameMap:Pe.struct,entityRelationsBySourceEntityNameMap:Pe.struct,deleteEntity:At,deletePage:At}),Gi.on("updateFileMeta",this.persistMeta)}get pages(){return this.subFileMap.pages}set pages(n){rt(()=>{this.subFileMap.pages.length=0,this.subFileMap.pages.push(...n)})}deletePage(n){const r=[...this.subFileMap.pages];this.subFileMap.pages.length=0,this.subFileMap.pages.push(...r.filter(i=>i.meta.id!==n))}get entities(){return this.subFileMap.entities}set entities(n){rt(()=>{this.subFileMap.entities.length=0,this.subFileMap.entities.push(...n)})}get entityMap(){return Q.keyBy(this.entities,n=>n.meta.id)}deleteEntity(n){const r=[...this.subFileMap.entities];this.subFileMap.entities.length=0,this.subFileMap.entities.push(...r.filter(i=>i.meta.id!==n))}get entityRelationMap(){return this.entities.reduce((n,r)=>({...n,...Q.keyBy(r.subFileMap.entityRelations,i=>i.meta.id)}),{})}get entityRelationsByTargetEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.targetEntity;return Q.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}get entityRelationsBySourceEntityNameMap(){return Object.values(this.entityRelationMap).reduce((n,r)=>{const i=r.meta.sourceEntity;return Q.isArray(n[i])||(n[i]=[]),n[i].push(r),n},{})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(n){return new Zn(n)}static formJSON(n){return rt(()=>{const r=Zn.create({name:n.name,id:n.id,version:n.version});return n.entities.map(i=>Te.formJSON(i,r)),n.pages.map(i=>vn.formJSON(i,r)),r})}}class Ia{constructor(t){Ie(this,"root");this.root=t,Ft(this,{app:Pe,pageMap:Pe.struct,entityMap:Pe.struct,widgetMap:Pe.struct,entityFieldMap:Pe.struct,entityRelationMap:Pe.struct})}get app(){return this.root}get pageMap(){return new Map(this.app.pages.map(t=>[t.meta.id,t]))}get entityMap(){return new Map(this.app.entities.map(t=>[t.meta.id,t]))}get widgetMap(){return this.app.pages.reduce((t,n)=>({...t,...n.widgetMap}),{})}get entityFieldMap(){return new Map(Q.flatten(this.app.entities.map(t=>t.subFileMap.entityFields.map(n=>[n.meta.id,n]))))}get entityRelationMap(){return new Map(Q.flatten(this.app.entities.map(t=>t.subFileMap.entityRelations.map(n=>[n.meta.id,n]))))}}ku({useProxies:"always",enforceActions:"always",reactionRequiresObservable:!1});var ut=(e=>(e.Page="Page",e.Entity="Entity",e))(ut||{});const cp=()=>g("div",{children:"ModuleManagerEntity"}),up=({searchVal:e,itemAddRef:t})=>{const{app:n}=ft(),{appId:r,pageId:i}=en(),o=zt(),s=ft().app.pages.filter(u=>u.meta.name.includes(e)),[l]=Wt.useForm(),c=u=>g(Bu,{children:()=>g(Xi.Item,{className:Ni.listItem,onClick:()=>{o(yn(Be.PAGE,{appId:r,pageId:u.meta.id}))},children:W("div",{className:Ni.listItemContent,children:[u.meta.id===i?g(Ue.Link,{children:u.meta.name}):g(Ue.Text,{children:u.meta.name}),g(Hu,{trigger:["hover"],menu:{onClick:({key:f})=>{switch(f){case"Delete":n.deletePage(u.meta.id);break}},items:[{label:g(Ue.Text,{children:"复制"}),key:"Copy"},{label:g(Ue.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:g(Md,{className:`${Ni.moreAction} mm_p-list_item_more_action`})},u.meta.id)]})})});return W(ye,{children:[t&&Is.createPortal(g(Lu,{form:l,layout:"horizontal",title:"创建页面",modalProps:{mask:!1},onFinish:async u=>{await l.validateFields(),console.log(u);const f=$e(),d=vn.create({id:$e(),name:u.name,rootWidgetId:f},n);return Zt.create({..._r.mrSchemeToDefaultJson($s.jsonPropsSchema),id:f,slots:{children:[]}},d),l.resetFields(),!0},trigger:g(nt,{type:"text",shape:"circle",size:"small",children:g(zu,{})}),children:g(xt,{rules:[{required:!0,message:"请输入页面名称"}],name:"name",label:"页面名称",placeholder:"请输入页面名称"})}),t),g(Xi,{dataSource:s,size:"small",rowKey:u=>u.meta.id,renderItem:c})]})},dp=kt(up),Ni={listItem:re({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:re({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:re({name:"eivff4",styles:"display:none"})},fp=({visible:e,module:t,onClose:n})=>{const r=Vu(t).with(ut.Page,()=>"页面").with(ut.Entity,()=>"数据模型").otherwise(()=>"");m.useEffect(()=>{o("")},[t]);const[i,o]=m.useState(""),a=m.useRef(null),[s,l]=m.useState(!1);return m.useEffect(()=>{e&&l(!0)},[e]),g("div",{className:Ti.drawerWrapper,children:g(Uu,{zIndex:8,title:W("div",{children:[W("div",{className:Ti.drawerTitleWrapper,children:[g("span",{children:r}),g("span",{ref:a})]}),g(kn,{onChange:c=>o(c.target.value),value:i,allowClear:!0,placeholder:"搜索"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:Ti.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:n,open:e,children:s&&W(ye,{children:[t===ut.Page&&g(dp,{itemAddRef:a.current,searchVal:i}),t===ut.Entity&&g(cp,{itemAddRef:a.current,searchVal:i})]})})})},Ti={drawerWrapper:re({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:re({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:re({name:"a4hmbt",styles:"position:absolute"})},hp=()=>W(It.Header,{className:Pi.header,children:[g("div",{className:Pi.headerLogoWrapper,children:g("img",{src:"/modou.svg",alt:""})}),W("div",{className:Pi.headerRight,children:[g(nt,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"预览"}),g(Os,{src:"https://api.multiavatar.com/modou.png"})]})]}),Pi={header:re({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:re({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:re({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},pp=()=>{const e=en(),t=zt(),{app:n}=ft(),r=Q.isEmpty(n.pages);return m.useEffect(()=>{var i,o,a,s;r?Q.isEmpty(n.entities)||t(yn(Be.Entity,{...e,entityId:(s=(a=Q.head(n.entities))==null?void 0:a.meta)==null?void 0:s.id}),{replace:!0}):t(yn(Be.PAGE,{...e,pageId:(o=(i=Q.head(n.pages))==null?void 0:i.meta)==null?void 0:o.id}),{replace:!0})},[n.entities,n.pages,r,t,e]),g("div",{className:gp.wrapper,children:g(_o,{size:"large"})})},mp=kt(pp),gp={wrapper:re({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},yp="MOCK_PAGE_ID",$a="MOCK_ROOT_WIDGET_ID",vp=()=>{const e=Zn.create({id:"app_id_mock",name:"app_name_mock",version:"0.0.1"}),t=_r.mrSchemeToDefaultJson(Wu.jsonPropsSchema),n={...t,props:{...t.props,title:"按钮-{{colDSL.span}}-大漠孤烟直哈哈"},id:"buttonDSL"},r={..._r.mrSchemeToDefaultJson(ju.jsonPropsSchema),id:"colDSL",slots:{children:[n.id]}},o=[{..._r.mrSchemeToDefaultJson($s.jsonPropsSchema),id:$a,slots:{children:[r.id]}},r,n],a=vn.create({name:"大漠孤烟直",id:yp,rootWidgetId:$a},e);o.forEach(u=>Zt.create({...u,id:u.id},a));const s=[{id:$e(),type:z.AutoNumber,name:z.AutoNumber,title:z.AutoNumber,description:Te.getEntityFieldTypeLabel(z.AutoNumber),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Date,name:z.Date,title:z.Date,description:Te.getEntityFieldTypeLabel(z.Date),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.DateTime,name:z.DateTime,title:z.DateTime,description:Te.getEntityFieldTypeLabel(z.DateTime),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Email,name:z.Email,title:z.Email,description:Te.getEntityFieldTypeLabel(z.Email),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Image,name:z.Image,title:z.Image,description:Te.getEntityFieldTypeLabel(z.Image),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.LongText,name:z.LongText,title:z.LongText,description:Te.getEntityFieldTypeLabel(z.LongText),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Number,name:z.Number,title:z.Number,description:Te.getEntityFieldTypeLabel(z.Number),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.PhoneNumber,name:z.PhoneNumber,title:z.PhoneNumber,description:Te.getEntityFieldTypeLabel(z.PhoneNumber),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Text,name:z.Text,title:z.Text,description:Te.getEntityFieldTypeLabel(z.Text),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.URL,name:z.URL,title:z.URL,description:Te.getEntityFieldTypeLabel(z.URL),required:!1,config:{},version:"0.0.1"},{id:$e(),type:z.Enum,name:z.Enum,title:z.Enum,description:Te.getEntityFieldTypeLabel(z.Enum),required:!1,config:{enumCode:"",multiple:!0},version:"0.0.1"}],l=Te.create({version:"0.0.1",id:"user",name:"user",title:"人员",description:"人员",position:{x:400,y:100}},e);s.forEach(u=>{Jt.create({...u},l)});const c=Te.create({version:"0.0.1",id:"department",name:"department",title:"部门",description:"部门",position:{x:800,y:100}},e);return Gn.create({id:$e(),name:"department",title:"部门",type:ai.Lookup,relationType:Kt.ManyToOne,description:"部门",sourceEntity:"user",targetEntity:"department",targetName:"user",targetTitle:"用户",targetDescription:"用户",version:"0.0.1"},l),s.forEach(u=>{Jt.create({...u,required:!0,id:u.id+c.meta.id},c)}),e},wp=[{title:"页面",icon:g(Xu,{}),key:ut.Page},{title:"数据模型",icon:g(Sd,{}),key:ut.Entity}],bp=rt(()=>{try{const e=JSON.parse(window.localStorage.getItem("app_id_mock"));return new Ia(Zn.formJSON(e))}catch{return new Ia(vp())}}),xp=()=>{const e=en(),[t,n]=m.useState(""),r=zt(),{pathname:i}=Cn(),o=Xt(Be.PAGE,i),a=Xt(Be.Entity,i)??Xt(Be.Entities,i),s=m.useCallback(()=>{n(o?ut.Page:a?ut.Entity:"")},[a,o]);Ds(s);const[l,c]=m.useState(!1),u=({key:d})=>{switch(d){case ut.Page:d===t?c(p=>!p):(n(d),c(!0));break;case ut.Entity:c(!1),n(d),r(yn(Be.Entities,{appId:e.appId}));break}},f=Xt(Be.APP,i);return g(Yu,{value:bp,children:f?g(mp,{}):W(It,{className:hr.layout,children:[g(hp,{}),W(It,{children:[g(It.Sider,{className:hr.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!l,children:g(Ku,{className:hr.menu,style:{width:"60px"},mode:"inline",selectedKeys:[t],onClick:u,items:wp})}),W(It.Content,{className:hr.layoutContent,children:[g(fp,{onClose:()=>{c(!1),s()},module:t,visible:l}),g(ul,{})]})]})]})})},hr={layout:re({name:"13udsys",styles:"height:100%"}),menu:re({name:"13udsys",styles:"height:100%"}),layoutContent:re({name:"bjn8wh",styles:"position:relative"}),sider:re({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},Ri={header:re({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:re({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:re({name:"s0vnfv",styles:"height:32px"})},Ep=()=>g(It.Header,{className:Ri.header,children:g("div",{className:Ri.logoWrapper,children:g("img",{src:"/modou.svg",className:Ri.logo,alt:""})})}),Ai={content:re({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:re({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:re({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},Sp=()=>{const e=zt();return g(It.Content,{className:Ai.content,children:g(Qr,{gutter:[0,0],children:Array(13).fill(1).map((t,n)=>g(Xn,{className:Ai.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:g(Rr,{onClick:()=>e("/app/appId"),className:Ai.card,actions:[g(qu,{},"setting"),g(Gu,{},"edit"),g(Ju,{},"ellipsis")],children:g(Rr.Meta,{avatar:g(Os,{shape:"square",src:`https://api.multiavatar.com/modou_app_logo_${n}.png`}),title:"APP NAME",description:"我是 APP 描述"})})},n))})})},Oa=()=>W(It,{className:re({name:"1d3w5wq",styles:"width:100%"}),children:[g(Ep,{}),g(Sp,{})]});var _p=function(t){return typeof t=="function"},Cp=!1;const Mp=Cp;function Np(e){Mp&&(_p(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var t=m.useRef(e);t.current=m.useMemo(function(){return e},[e]);var n=m.useRef();return n.current||(n.current=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.current.apply(this,r)}),n.current}var Tp=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Pp=function(){var t=Tp(m.useState({}),2),n=t[1];return m.useCallback(function(){return n({})},[])};const Rp=Pp;var Cr={},Ap=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ml="%[a-f0-9]{2}",Da=new RegExp(Ml,"gi"),Fa=new RegExp("("+Ml+")+","gi");function to(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],to(n),to(r))}function Ip(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Da),n=1;n<t.length;n++)e=to(t,n).join(""),t=e.match(Da);return e}}function $p(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=Fa.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=Ip(n[0]);r!==n[0]&&(t[n[0]]=r)}n=Fa.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),o=0;o<i.length;o++){var a=i[o];e=e.replace(new RegExp(a,"g"),t[a])}return e}var Op=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return $p(e)}},Dp=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const n=e.indexOf(t);return n===-1?[e]:[e.slice(0,n),e.slice(n+t.length)]},Fp=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?t.indexOf(a)!==-1:t(a,s,e))&&(n[a]=s)}return n};(function(e){const t=Ap,n=Op,r=Dp,i=Fp,o=h=>h==null;function a(h){switch(h.arrayFormat){case"index":return b=>(E,y)=>{const _=E.length;return y===void 0||h.skipNull&&y===null||h.skipEmptyString&&y===""?E:y===null?[...E,[c(b,h),"[",_,"]"].join("")]:[...E,[c(b,h),"[",c(_,h),"]=",c(y,h)].join("")]};case"bracket":return b=>(E,y)=>y===void 0||h.skipNull&&y===null||h.skipEmptyString&&y===""?E:y===null?[...E,[c(b,h),"[]"].join("")]:[...E,[c(b,h),"[]=",c(y,h)].join("")];case"comma":case"separator":return b=>(E,y)=>y==null||y.length===0?E:E.length===0?[[c(b,h),"=",c(y,h)].join("")]:[[E,c(y,h)].join(h.arrayFormatSeparator)];default:return b=>(E,y)=>y===void 0||h.skipNull&&y===null||h.skipEmptyString&&y===""?E:y===null?[...E,c(b,h)]:[...E,[c(b,h),"=",c(y,h)].join("")]}}function s(h){let b;switch(h.arrayFormat){case"index":return(E,y,_)=>{if(b=/\[(\d*)\]$/.exec(E),E=E.replace(/\[\d*\]$/,""),!b){_[E]=y;return}_[E]===void 0&&(_[E]={}),_[E][b[1]]=y};case"bracket":return(E,y,_)=>{if(b=/(\[\])$/.exec(E),E=E.replace(/\[\]$/,""),!b){_[E]=y;return}if(_[E]===void 0){_[E]=[y];return}_[E]=[].concat(_[E],y)};case"comma":case"separator":return(E,y,_)=>{const C=typeof y=="string"&&y.includes(h.arrayFormatSeparator),N=typeof y=="string"&&!C&&u(y,h).includes(h.arrayFormatSeparator);y=N?u(y,h):y;const I=C||N?y.split(h.arrayFormatSeparator).map(D=>u(D,h)):y===null?y:u(y,h);_[E]=I};default:return(E,y,_)=>{if(_[E]===void 0){_[E]=y;return}_[E]=[].concat(_[E],y)}}}function l(h){if(typeof h!="string"||h.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(h,b){return b.encode?b.strict?t(h):encodeURIComponent(h):h}function u(h,b){return b.decode?n(h):h}function f(h){return Array.isArray(h)?h.sort():typeof h=="object"?f(Object.keys(h)).sort((b,E)=>Number(b)-Number(E)).map(b=>h[b]):h}function d(h){const b=h.indexOf("#");return b!==-1&&(h=h.slice(0,b)),h}function p(h){let b="";const E=h.indexOf("#");return E!==-1&&(b=h.slice(E)),b}function x(h){h=d(h);const b=h.indexOf("?");return b===-1?"":h.slice(b+1)}function v(h,b){return b.parseNumbers&&!Number.isNaN(Number(h))&&typeof h=="string"&&h.trim()!==""?h=Number(h):b.parseBooleans&&h!==null&&(h.toLowerCase()==="true"||h.toLowerCase()==="false")&&(h=h.toLowerCase()==="true"),h}function S(h,b){b=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},b),l(b.arrayFormatSeparator);const E=s(b),y=Object.create(null);if(typeof h!="string"||(h=h.trim().replace(/^[?#&]/,""),!h))return y;for(const _ of h.split("&")){if(_==="")continue;let[C,N]=r(b.decode?_.replace(/\+/g," "):_,"=");N=N===void 0?null:["comma","separator"].includes(b.arrayFormat)?N:u(N,b),E(u(C,b),N,y)}for(const _ of Object.keys(y)){const C=y[_];if(typeof C=="object"&&C!==null)for(const N of Object.keys(C))C[N]=v(C[N],b);else y[_]=v(C,b)}return b.sort===!1?y:(b.sort===!0?Object.keys(y).sort():Object.keys(y).sort(b.sort)).reduce((_,C)=>{const N=y[C];return Boolean(N)&&typeof N=="object"&&!Array.isArray(N)?_[C]=f(N):_[C]=N,_},Object.create(null))}e.extract=x,e.parse=S,e.stringify=(h,b)=>{if(!h)return"";b=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},b),l(b.arrayFormatSeparator);const E=N=>b.skipNull&&o(h[N])||b.skipEmptyString&&h[N]==="",y=a(b),_={};for(const N of Object.keys(h))E(N)||(_[N]=h[N]);const C=Object.keys(_);return b.sort!==!1&&C.sort(b.sort),C.map(N=>{const I=h[N];return I===void 0?"":I===null?c(N,b):Array.isArray(I)?I.reduce(y(N),[]).join("&"):c(N,b)+"="+c(I,b)}).filter(N=>N.length>0).join("&")},e.parseUrl=(h,b)=>{b=Object.assign({decode:!0},b);const[E,y]=r(h,"#");return Object.assign({url:E.split("?")[0]||"",query:S(x(h),b)},b&&b.parseFragmentIdentifier&&y?{fragmentIdentifier:u(y,b)}:{})},e.stringifyUrl=(h,b)=>{b=Object.assign({encode:!0,strict:!0},b);const E=d(h.url).split("?")[0]||"",y=e.extract(h.url),_=e.parse(y,{sort:!1}),C=Object.assign(_,h.query);let N=e.stringify(C,b);N&&(N=`?${N}`);let I=p(h.url);return h.fragmentIdentifier&&(I=`#${c(h.fragmentIdentifier,b)}`),`${E}${N}${I}`},e.pick=(h,b,E)=>{E=Object.assign({parseFragmentIdentifier:!0},E);const{url:y,query:_,fragmentIdentifier:C}=e.parseUrl(h,E);return e.stringifyUrl({url:y,query:i(_,b),fragmentIdentifier:C},E)},e.exclude=(h,b,E)=>{const y=Array.isArray(b)?_=>!b.includes(_):(_,C)=>!b(_,C);return e.pick(h,y,E)}})(Cr);var et=globalThis&&globalThis.__assign||function(){return et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},et.apply(this,arguments)},An=Yf,kp={parseNumbers:!1,parseBooleans:!1},Lp={skipNull:!1,skipEmptyString:!1},Nl=function(t,n){var r,i,o=n||{},a=o.navigateMode,s=a===void 0?"push":a,l=o.parseOptions,c=o.stringifyOptions,u=et(et({},kp),l),f=et(et({},Lp),c),d=An.useLocation(),p=(r=An.useHistory)===null||r===void 0?void 0:r.call(An),x=(i=An.useNavigate)===null||i===void 0?void 0:i.call(An),v=Rp(),S=m.useRef(typeof t=="function"?t():t||{}),h=m.useMemo(function(){return Cr.parse(d.search,u)},[d.search]),b=m.useMemo(function(){return et(et({},S.current),h)},[h]),E=function(_){var C=typeof _=="function"?_(b):_;v(),p&&p[s]({hash:d.hash,search:Cr.stringify(et(et({},h),C),f)||"?"}),x&&x({hash:d.hash,search:Cr.stringify(et(et({},h),C),f)||"?"},{replace:s==="replace"})};return[b,Np(E)]};function ze(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ze(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const ka=e=>{let t;const n=new Set,r=(l,c)=>{const u=typeof l=="function"?l(t):l;if(u!==t){const f=t;t=c??typeof u!="object"?u:Object.assign({},t,u),n.forEach(d=>d(t,f))}},i=()=>t,s={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return t=e(r,i,s),s},zp=e=>e?ka(e):ka;var no={},Bp={get exports(){return no},set exports(e){no=e}},Tl={},ro={},Hp={get exports(){return ro},set exports(e){ro=e}},Pl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wn=m;function Vp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Up=typeof Object.is=="function"?Object.is:Vp,Wp=wn.useState,jp=wn.useEffect,Xp=wn.useLayoutEffect,Yp=wn.useDebugValue;function Kp(e,t){var n=t(),r=Wp({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Xp(function(){i.value=n,i.getSnapshot=t,Ii(i)&&o({inst:i})},[e,n,t]),jp(function(){return Ii(i)&&o({inst:i}),e(function(){Ii(i)&&o({inst:i})})},[e]),Yp(n),n}function Ii(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Up(e,n)}catch{return!0}}function qp(e,t){return t()}var Gp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qp:Kp;Pl.useSyncExternalStore=wn.useSyncExternalStore!==void 0?wn.useSyncExternalStore:Gp;(function(e){e.exports=Pl})(Hp);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=m,Jp=ro;function Zp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qp=typeof Object.is=="function"?Object.is:Zp,em=Jp.useSyncExternalStore,tm=li.useRef,nm=li.useEffect,rm=li.useMemo,im=li.useDebugValue;Tl.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var o=tm(null);if(o.current===null){var a={hasValue:!1,value:null};o.current=a}else a=o.current;o=rm(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&a.hasValue){var x=a.value;if(i(x,p))return f=x}return f=p}if(x=f,Qp(u,p))return x;var v=r(p);return i!==void 0&&i(x,v)?x:(u=p,f=v)}var c=!1,u,f,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,i]);var s=em(e,o[0],o[1]);return nm(function(){a.hasValue=!0,a.value=s},[s]),im(s),s};(function(e){e.exports=Tl})(Bp);const om=Zu(no),{useSyncExternalStoreWithSelector:am}=om;function sm(e,t=e.getState,n){const r=am(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return m.useDebugValue(r),r}function je(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var lm={value:()=>{}};function ci(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mr(n)}function Mr(e){this._=e}function cm(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mr.prototype=ci.prototype={constructor:Mr,on:function(e,t){var n=this._,r=cm(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=um(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=La(n[i],e.name,t);else if(t==null)for(i in n)n[i]=La(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function um(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function La(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=lm,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var io="http://www.w3.org/1999/xhtml";const za={svg:"http://www.w3.org/2000/svg",xhtml:io,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),za.hasOwnProperty(t)?{space:za[t],local:e}:e}function dm(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===io&&t.documentElement.namespaceURI===io?t.createElement(e):t.createElementNS(n,e)}}function fm(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rl(e){var t=ui(e);return(t.local?fm:dm)(t)}function hm(){}function $o(e){return e==null?hm:function(){return this.querySelector(e)}}function pm(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=e.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new Je(r,this._parents)}function mm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function gm(){return[]}function Al(e){return e==null?gm:function(){return this.querySelectorAll(e)}}function ym(e){return function(){return mm(e.apply(this,arguments))}}function vm(e){typeof e=="function"?e=ym(e):e=Al(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(r.push(e.call(l,l.__data__,c,a)),i.push(l));return new Je(r,i)}function Il(e){return function(){return this.matches(e)}}function $l(e){return function(t){return t.matches(e)}}var wm=Array.prototype.find;function bm(e){return function(){return wm.call(this.children,e)}}function xm(){return this.firstElementChild}function Em(e){return this.select(e==null?xm:bm(typeof e=="function"?e:$l(e)))}var Sm=Array.prototype.filter;function _m(){return Array.from(this.children)}function Cm(e){return function(){return Sm.call(this.children,e)}}function Mm(e){return this.selectAll(e==null?_m:Cm(typeof e=="function"?e:$l(e)))}function Nm(e){typeof e!="function"&&(e=Il(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new Je(r,this._parents)}function Ol(e){return new Array(e.length)}function Tm(){return new Je(this._enter||this._groups.map(Ol),this._parents)}function Vr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Vr.prototype={constructor:Vr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Pm(e){return function(){return e}}function Rm(e,t,n,r,i,o){for(var a=0,s,l=t.length,c=o.length;a<c;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Vr(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Am(e,t,n,r,i,o,a){var s,l,c=new Map,u=t.length,f=o.length,d=new Array(u),p;for(s=0;s<u;++s)(l=t[s])&&(d[s]=p=a.call(l,l.__data__,s,t)+"",c.has(p)?i[s]=l:c.set(p,l));for(s=0;s<f;++s)p=a.call(e,o[s],s,o)+"",(l=c.get(p))?(r[s]=l,l.__data__=o[s],c.delete(p)):n[s]=new Vr(e,o[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(d[s])===l&&(i[s]=l)}function Im(e){return e.__data__}function $m(e,t){if(!arguments.length)return Array.from(this,Im);var n=t?Am:Rm,r=this._parents,i=this._groups;typeof e!="function"&&(e=Pm(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],f=i[c],d=f.length,p=Om(e.call(u,u&&u.__data__,c,r)),x=p.length,v=s[c]=new Array(x),S=a[c]=new Array(x),h=l[c]=new Array(d);n(u,f,v,S,h,p,t);for(var b=0,E=0,y,_;b<x;++b)if(y=v[b]){for(b>=E&&(E=b+1);!(_=S[E])&&++E<x;);y._next=_||null}}return a=new Je(a,r),a._enter=s,a._exit=l,a}function Om(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Dm(){return new Je(this._exit||this._groups.map(Ol),this._parents)}function Fm(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function km(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],f=c.length,d=s[l]=new Array(f),p,x=0;x<f;++x)(p=c[x]||u[x])&&(d[x]=p);for(;l<i;++l)s[l]=n[l];return new Je(s,this._parents)}function Lm(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function zm(e){e||(e=Bm);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new Je(i,this._parents).order()}function Bm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Hm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Vm(){return Array.from(this)}function Um(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Wm(){let e=0;for(const t of this)++e;return e}function jm(){return!this.node()}function Xm(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function Ym(e){return function(){this.removeAttribute(e)}}function Km(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qm(e,t){return function(){this.setAttribute(e,t)}}function Gm(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Jm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zm(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qm(e,t){var n=ui(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Km:Ym:typeof t=="function"?n.local?Zm:Jm:n.local?Gm:qm)(n,t))}function Dl(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function eg(e){return function(){this.style.removeProperty(e)}}function tg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ng(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function rg(e,t,n){return arguments.length>1?this.each((t==null?eg:typeof t=="function"?ng:tg)(e,t,n??"")):bn(this.node(),e)}function bn(e,t){return e.style.getPropertyValue(t)||Dl(e).getComputedStyle(e,null).getPropertyValue(t)}function ig(e){return function(){delete this[e]}}function og(e,t){return function(){this[e]=t}}function ag(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function sg(e,t){return arguments.length>1?this.each((t==null?ig:typeof t=="function"?ag:og)(e,t)):this.node()[e]}function Fl(e){return e.trim().split(/^|\s+/)}function Oo(e){return e.classList||new kl(e)}function kl(e){this._node=e,this._names=Fl(e.getAttribute("class")||"")}kl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ll(e,t){for(var n=Oo(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zl(e,t){for(var n=Oo(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function lg(e){return function(){Ll(this,e)}}function cg(e){return function(){zl(this,e)}}function ug(e,t){return function(){(t.apply(this,arguments)?Ll:zl)(this,e)}}function dg(e,t){var n=Fl(e+"");if(arguments.length<2){for(var r=Oo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?ug:t?lg:cg)(n,t))}function fg(){this.textContent=""}function hg(e){return function(){this.textContent=e}}function pg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function mg(e){return arguments.length?this.each(e==null?fg:(typeof e=="function"?pg:hg)(e)):this.node().textContent}function gg(){this.innerHTML=""}function yg(e){return function(){this.innerHTML=e}}function vg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function wg(e){return arguments.length?this.each(e==null?gg:(typeof e=="function"?vg:yg)(e)):this.node().innerHTML}function bg(){this.nextSibling&&this.parentNode.appendChild(this)}function xg(){return this.each(bg)}function Eg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sg(){return this.each(Eg)}function _g(e){var t=typeof e=="function"?e:Rl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Cg(){return null}function Mg(e,t){var n=typeof e=="function"?e:Rl(e),r=t==null?Cg:typeof t=="function"?t:$o(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ng(){var e=this.parentNode;e&&e.removeChild(this)}function Tg(){return this.each(Ng)}function Pg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ag(e){return this.select(e?Rg:Pg)}function Ig(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $g(e){return function(t){e.call(this,t,this.__data__)}}function Og(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Dg(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Fg(e,t,n){return function(){var r=this.__on,i,o=$g(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function kg(e,t,n){var r=Og(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=t?Fg:Dg,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function Bl(e,t,n){var r=Dl(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Lg(e,t){return function(){return Bl(this,e,t)}}function zg(e,t){return function(){return Bl(this,e,t.apply(this,arguments))}}function Bg(e,t){return this.each((typeof t=="function"?zg:Lg)(e,t))}function*Hg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Hl=[null];function Je(e,t){this._groups=e,this._parents=t}function sr(){return new Je([[document.documentElement]],Hl)}function Vg(){return this}Je.prototype=sr.prototype={constructor:Je,select:pm,selectAll:vm,selectChild:Em,selectChildren:Mm,filter:Nm,data:$m,enter:Tm,exit:Dm,join:Fm,merge:km,selection:Vg,order:Lm,sort:zm,call:Hm,nodes:Vm,node:Um,size:Wm,empty:jm,each:Xm,attr:Qm,style:rg,property:sg,classed:dg,text:mg,html:wg,raise:xg,lower:Sg,append:_g,insert:Mg,remove:Tg,clone:Ag,datum:Ig,on:kg,dispatch:Bg,[Symbol.iterator]:Hg};function tt(e){return typeof e=="string"?new Je([[document.querySelector(e)]],[document.documentElement]):new Je([[e]],Hl)}function Ug(e){let t;for(;t=e.sourceEvent;)e=t;return e}function st(e,t){if(e=Ug(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Wg={passive:!1},Qn={capture:!0,passive:!1};function $i(e){e.stopImmediatePropagation()}function hn(e){e.preventDefault(),e.stopImmediatePropagation()}function Vl(e){var t=e.document.documentElement,n=tt(e).on("dragstart.drag",hn,Qn);"onselectstart"in t?n.on("selectstart.drag",hn,Qn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ul(e,t){var n=e.document.documentElement,r=tt(e).on("dragstart.drag",null);t&&(r.on("click.drag",hn,Qn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const pr=e=>()=>e;function oo(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:o,x:a,y:s,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}oo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jg(e){return!e.ctrlKey&&!e.button}function Xg(){return this.parentNode}function Yg(e,t){return t??{x:e.x,y:e.y}}function Kg(){return navigator.maxTouchPoints||"ontouchstart"in this}function qg(){var e=jg,t=Xg,n=Yg,r=Kg,i={},o=ci("start","drag","end"),a=0,s,l,c,u,f=0;function d(y){y.on("mousedown.drag",p).filter(r).on("touchstart.drag",S).on("touchmove.drag",h,Wg).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,_){if(!(u||!e.call(this,y,_))){var C=E(this,t.call(this,y,_),y,_,"mouse");C&&(tt(y.view).on("mousemove.drag",x,Qn).on("mouseup.drag",v,Qn),Vl(y.view),$i(y),c=!1,s=y.clientX,l=y.clientY,C("start",y))}}function x(y){if(hn(y),!c){var _=y.clientX-s,C=y.clientY-l;c=_*_+C*C>f}i.mouse("drag",y)}function v(y){tt(y.view).on("mousemove.drag mouseup.drag",null),Ul(y.view,c),hn(y),i.mouse("end",y)}function S(y,_){if(e.call(this,y,_)){var C=y.changedTouches,N=t.call(this,y,_),I=C.length,D,$;for(D=0;D<I;++D)($=E(this,N,y,_,C[D].identifier,C[D]))&&($i(y),$("start",y,C[D]))}}function h(y){var _=y.changedTouches,C=_.length,N,I;for(N=0;N<C;++N)(I=i[_[N].identifier])&&(hn(y),I("drag",y,_[N]))}function b(y){var _=y.changedTouches,C=_.length,N,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),N=0;N<C;++N)(I=i[_[N].identifier])&&($i(y),I("end",y,_[N]))}function E(y,_,C,N,I,D){var $=o.copy(),H=st(D||C,_),Z,Y,w;if((w=n.call(y,new oo("beforestart",{sourceEvent:C,target:d,identifier:I,active:a,x:H[0],y:H[1],dx:0,dy:0,dispatch:$}),N))!=null)return Z=w.x-H[0]||0,Y=w.y-H[1]||0,function T(M,R,O){var L=H,F;switch(M){case"start":i[I]=T,F=a++;break;case"end":delete i[I],--a;case"drag":H=st(O||R,_),F=a;break}$.call(M,y,new oo(M,{sourceEvent:R,subject:w,target:d,identifier:I,active:F,x:H[0]+Z,y:H[1]+Y,dx:H[0]-L[0],dy:H[1]-L[1],dispatch:$}),N)}}return d.filter=function(y){return arguments.length?(e=typeof y=="function"?y:pr(!!y),d):e},d.container=function(y){return arguments.length?(t=typeof y=="function"?y:pr(y),d):t},d.subject=function(y){return arguments.length?(n=typeof y=="function"?y:pr(y),d):n},d.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:pr(!!y),d):r},d.on=function(){var y=o.on.apply(o,arguments);return y===o?d:y},d.clickDistance=function(y){return arguments.length?(f=(y=+y)*y,d):Math.sqrt(f)},d}function Do(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function lr(){}var er=.7,Ur=1/er,pn="\\s*([+-]?\\d+)\\s*",tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gg=/^#([0-9a-f]{3,8})$/,Jg=new RegExp(`^rgb\\(${pn},${pn},${pn}\\)$`),Zg=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),Qg=new RegExp(`^rgba\\(${pn},${pn},${pn},${tr}\\)$`),ey=new RegExp(`^rgba\\(${gt},${gt},${gt},${tr}\\)$`),ty=new RegExp(`^hsl\\(${tr},${gt},${gt}\\)$`),ny=new RegExp(`^hsla\\(${tr},${gt},${gt},${tr}\\)$`),Ba={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Do(lr,nr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ha,formatHex:Ha,formatHex8:ry,formatHsl:iy,formatRgb:Va,toString:Va});function Ha(){return this.rgb().formatHex()}function ry(){return this.rgb().formatHex8()}function iy(){return jl(this).formatHsl()}function Va(){return this.rgb().formatRgb()}function nr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Gg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ua(t):n===3?new We(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?mr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?mr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Jg.exec(e))?new We(t[1],t[2],t[3],1):(t=Zg.exec(e))?new We(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qg.exec(e))?mr(t[1],t[2],t[3],t[4]):(t=ey.exec(e))?mr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ty.exec(e))?Xa(t[1],t[2]/100,t[3]/100,1):(t=ny.exec(e))?Xa(t[1],t[2]/100,t[3]/100,t[4]):Ba.hasOwnProperty(e)?Ua(Ba[e]):e==="transparent"?new We(NaN,NaN,NaN,0):null}function Ua(e){return new We(e>>16&255,e>>8&255,e&255,1)}function mr(e,t,n,r){return r<=0&&(e=t=n=NaN),new We(e,t,n,r)}function oy(e){return e instanceof lr||(e=nr(e)),e?(e=e.rgb(),new We(e.r,e.g,e.b,e.opacity)):new We}function ao(e,t,n,r){return arguments.length===1?oy(e):new We(e,t,n,r??1)}function We(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Do(We,ao,Wl(lr,{brighter(e){return e=e==null?Ur:Math.pow(Ur,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?er:Math.pow(er,e),new We(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new We(Gt(this.r),Gt(this.g),Gt(this.b),Wr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Wa,formatHex:Wa,formatHex8:ay,formatRgb:ja,toString:ja}));function Wa(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function ay(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ja(){const e=Wr(this.opacity);return`${e===1?"rgb(":"rgba("}${Gt(this.r)}, ${Gt(this.g)}, ${Gt(this.b)}${e===1?")":`, ${e})`}`}function Wr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qt(e){return e=Gt(e),(e<16?"0":"")+e.toString(16)}function Xa(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ct(e,t,n,r)}function jl(e){if(e instanceof ct)return new ct(e.h,e.s,e.l,e.opacity);if(e instanceof lr||(e=nr(e)),!e)return new ct;if(e instanceof ct)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ct(a,s,l,e.opacity)}function sy(e,t,n,r){return arguments.length===1?jl(e):new ct(e,t,n,r??1)}function ct(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Do(ct,sy,Wl(lr,{brighter(e){return e=e==null?Ur:Math.pow(Ur,e),new ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?er:Math.pow(er,e),new ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new We(Oi(e>=240?e-240:e+120,i,r),Oi(e,i,r),Oi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ct(Ya(this.h),gr(this.s),gr(this.l),Wr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wr(this.opacity);return`${e===1?"hsl(":"hsla("}${Ya(this.h)}, ${gr(this.s)*100}%, ${gr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ya(e){return e=(e||0)%360,e<0?e+360:e}function gr(e){return Math.max(0,Math.min(1,e||0))}function Oi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Xl=e=>()=>e;function ly(e,t){return function(n){return e+n*t}}function cy(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function uy(e){return(e=+e)==1?Yl:function(t,n){return n-t?cy(t,n,e):Xl(isNaN(t)?n:t)}}function Yl(e,t){var n=t-e;return n?ly(e,n):Xl(isNaN(e)?t:e)}const Ka=function e(t){var n=uy(t);function r(i,o){var a=n((i=ao(i)).r,(o=ao(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=Yl(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=e,r}(1);function Tt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var so=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Di=new RegExp(so.source,"g");function dy(e){return function(){return e}}function fy(e){return function(t){return e(t)+""}}function hy(e,t){var n=so.lastIndex=Di.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=so.exec(e))&&(i=Di.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Tt(r,i)})),n=Di.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?fy(l[0].x):dy(t):(t=l.length,function(c){for(var u=0,f;u<t;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}var qa=180/Math.PI,lo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kl(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*qa,skewX:Math.atan(l)*qa,scaleX:a,scaleY:s}}var yr;function py(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lo:Kl(t.a,t.b,t.c,t.d,t.e,t.f)}function my(e){return e==null||(yr||(yr=document.createElementNS("http://www.w3.org/2000/svg","g")),yr.setAttribute("transform",e),!(e=yr.transform.baseVal.consolidate()))?lo:(e=e.matrix,Kl(e.a,e.b,e.c,e.d,e.e,e.f))}function ql(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,f,d,p,x){if(c!==f||u!==d){var v=p.push("translate(",null,t,null,n);x.push({i:v-4,x:Tt(c,f)},{i:v-2,x:Tt(u,d)})}else(f||d)&&p.push("translate("+f+t+d+n)}function a(c,u,f,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Tt(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(c,u,f,d){c!==u?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Tt(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,d,p,x){if(c!==f||u!==d){var v=p.push(i(p)+"scale(",null,",",null,")");x.push({i:v-4,x:Tt(c,f)},{i:v-2,x:Tt(u,d)})}else(f!==1||d!==1)&&p.push(i(p)+"scale("+f+","+d+")")}return function(c,u){var f=[],d=[];return c=e(c),u=e(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,d),a(c.rotate,u.rotate,f,d),s(c.skewX,u.skewX,f,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,d),c=u=null,function(p){for(var x=-1,v=d.length,S;++x<v;)f[(S=d[x]).i]=S.x(p);return f.join("")}}}var gy=ql(py,"px, ","px)","deg)"),yy=ql(my,", ",")",")"),vy=1e-12;function Ga(e){return((e=Math.exp(e))+1/e)/2}function wy(e){return((e=Math.exp(e))-1/e)/2}function by(e){return((e=Math.exp(2*e))-1)/(e+1)}const xy=function e(t,n,r){function i(o,a){var s=o[0],l=o[1],c=o[2],u=a[0],f=a[1],d=a[2],p=u-s,x=f-l,v=p*p+x*x,S,h;if(v<vy)h=Math.log(d/c)/t,S=function(N){return[s+N*p,l+N*x,c*Math.exp(t*N*h)]};else{var b=Math.sqrt(v),E=(d*d-c*c+r*v)/(2*c*n*b),y=(d*d-c*c-r*v)/(2*d*n*b),_=Math.log(Math.sqrt(E*E+1)-E),C=Math.log(Math.sqrt(y*y+1)-y);h=(C-_)/t,S=function(N){var I=N*h,D=Ga(_),$=c/(n*b)*(D*by(t*I+_)-wy(_));return[s+$*p,l+$*x,c*D/Ga(t*I+_)]}}return S.duration=h*1e3*t/Math.SQRT2,S}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},i}(Math.SQRT2,2,4);var xn=0,zn=0,In=0,Gl=1e3,jr,Bn,Xr=0,Qt=0,di=0,rr=typeof performance=="object"&&performance.now?performance:Date,Jl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fo(){return Qt||(Jl(Ey),Qt=rr.now()+di)}function Ey(){Qt=0}function Yr(){this._call=this._time=this._next=null}Yr.prototype=Zl.prototype={constructor:Yr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fo():+n)+(t==null?0:+t),!this._next&&Bn!==this&&(Bn?Bn._next=this:jr=this,Bn=this),this._call=e,this._time=n,co()},stop:function(){this._call&&(this._call=null,this._time=1/0,co())}};function Zl(e,t,n){var r=new Yr;return r.restart(e,t,n),r}function Sy(){Fo(),++xn;for(var e=jr,t;e;)(t=Qt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xn}function Ja(){Qt=(Xr=rr.now())+di,xn=zn=0;try{Sy()}finally{xn=0,Cy(),Qt=0}}function _y(){var e=rr.now(),t=e-Xr;t>Gl&&(di-=t,Xr=e)}function Cy(){for(var e,t=jr,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jr=n);Bn=e,co(r)}function co(e){if(!xn){zn&&(zn=clearTimeout(zn));var t=e-Qt;t>24?(e<1/0&&(zn=setTimeout(Ja,e-rr.now()-di)),In&&(In=clearInterval(In))):(In||(Xr=rr.now(),In=setInterval(_y,Gl)),xn=1,Jl(Ja))}}function Za(e,t,n){var r=new Yr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var My=ci("start","end","cancel","interrupt"),Ny=[],Ql=0,Qa=1,uo=2,Nr=3,es=4,fo=5,Tr=6;function fi(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Ty(e,n,{name:t,index:r,group:i,on:My,tween:Ny,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ql})}function ko(e,t){var n=pt(e,t);if(n.state>Ql)throw new Error("too late; already scheduled");return n}function wt(e,t){var n=pt(e,t);if(n.state>Nr)throw new Error("too late; already running");return n}function pt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ty(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Zl(o,0,n.time);function o(c){n.state=Qa,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,f,d,p;if(n.state!==Qa)return l();for(u in r)if(p=r[u],p.name===n.name){if(p.state===Nr)return Za(a);p.state===es?(p.state=Tr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=Tr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(Za(function(){n.state===Nr&&(n.state=es,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=uo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===uo){for(n.state=Nr,i=new Array(d=n.tween.length),u=0,f=-1;u<d;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=p);i.length=f+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=fo,1),f=-1,d=i.length;++f<d;)i[f].call(e,u);n.state===fo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Tr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function Pr(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>uo&&r.state<fo,r.state=Tr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function Py(e){return this.each(function(){Pr(this,e)})}function Ry(e,t){var n,r;return function(){var i=wt(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Ay(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=wt(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===t){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function Iy(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=pt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?Ry:Ay)(n,e,t))}function Lo(e,t,n){var r=e._id;return e.each(function(){var i=wt(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return pt(i,r).value[t]}}function ec(e,t){var n;return(typeof t=="number"?Tt:t instanceof nr?Ka:(n=nr(t))?(t=n,Ka):hy)(e,t)}function $y(e){return function(){this.removeAttribute(e)}}function Oy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function Fy(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function ky(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function Ly(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function zy(e,t){var n=ui(e),r=n==="transform"?yy:ec;return this.attrTween(e,typeof t=="function"?(n.local?Ly:ky)(n,r,Lo(this,"attr."+e,t)):t==null?(n.local?Oy:$y)(n):(n.local?Fy:Dy)(n,r,t))}function By(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hy(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Vy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Hy(e,o)),n}return i._value=t,i}function Uy(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&By(e,o)),n}return i._value=t,i}function Wy(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ui(e);return this.tween(n,(r.local?Vy:Uy)(r,t))}function jy(e,t){return function(){ko(this,e).delay=+t.apply(this,arguments)}}function Xy(e,t){return t=+t,function(){ko(this,e).delay=t}}function Yy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jy:Xy)(t,e)):pt(this.node(),t).delay}function Ky(e,t){return function(){wt(this,e).duration=+t.apply(this,arguments)}}function qy(e,t){return t=+t,function(){wt(this,e).duration=t}}function Gy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ky:qy)(t,e)):pt(this.node(),t).duration}function Jy(e,t){if(typeof t!="function")throw new Error;return function(){wt(this,e).ease=t}}function Zy(e){var t=this._id;return arguments.length?this.each(Jy(t,e)):pt(this.node(),t).ease}function Qy(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wt(this,e).ease=n}}function e0(e){if(typeof e!="function")throw new Error;return this.each(Qy(this._id,e))}function t0(e){typeof e!="function"&&(e=Il(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&e.call(l,l.__data__,c,o)&&s.push(l);return new Mt(r,this._parents,this._name,this._id)}function n0(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=t[s],c=n[s],u=l.length,f=a[s]=new Array(u),d,p=0;p<u;++p)(d=l[p]||c[p])&&(f[p]=d);for(;s<r;++s)a[s]=t[s];return new Mt(a,this._parents,this._name,this._id)}function r0(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function i0(e,t,n){var r,i,o=r0(t)?ko:wt;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function o0(e,t){var n=this._id;return arguments.length<2?pt(this.node(),n).on.on(e):this.each(i0(n,e,t))}function a0(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function s0(){return this.on("end.remove",a0(this._id))}function l0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$o(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,c=o[a]=new Array(l),u,f,d=0;d<l;++d)(u=s[d])&&(f=e.call(u,u.__data__,d,s))&&("__data__"in u&&(f.__data__=u.__data__),c[d]=f,fi(c[d],t,n,d,c,pt(u,n)));return new Mt(o,this._parents,t,n)}function c0(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Al(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var d=e.call(u,u.__data__,f,l),p,x=pt(u,n),v=0,S=d.length;v<S;++v)(p=d[v])&&fi(p,t,n,v,d,x);o.push(d),a.push(u)}return new Mt(o,a,t,n)}var u0=sr.prototype.constructor;function d0(){return new u0(this._groups,this._parents)}function f0(e,t){var n,r,i;return function(){var o=bn(this,e),a=(this.style.removeProperty(e),bn(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function tc(e){return function(){this.style.removeProperty(e)}}function h0(e,t,n){var r,i=n+"",o;return function(){var a=bn(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function p0(e,t,n){var r,i,o;return function(){var a=bn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),bn(this,e))),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}function m0(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var l=wt(this,e),c=l.on,u=l.value[o]==null?s||(s=tc(t)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function g0(e,t,n){var r=(e+="")=="transform"?gy:ec;return t==null?this.styleTween(e,f0(e,r)).on("end.style."+e,tc(e)):typeof t=="function"?this.styleTween(e,p0(e,r,Lo(this,"style."+e,t))).each(m0(this._id,e)):this.styleTween(e,h0(e,r,t),n).on("end.style."+e,null)}function y0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function v0(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&y0(e,a,n)),r}return o._value=t,o}function w0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,v0(e,t,n??""))}function b0(e){return function(){this.textContent=e}}function x0(e){return function(){var t=e(this);this.textContent=t??""}}function E0(e){return this.tween("text",typeof e=="function"?x0(Lo(this,"text",e)):b0(e==null?"":e+""))}function S0(e){return function(t){this.textContent=e.call(this,t)}}function _0(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&S0(i)),t}return r._value=e,r}function C0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_0(e))}function M0(){for(var e=this._name,t=this._id,n=nc(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=pt(l,t);fi(l,e,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Mt(r,this._parents,e,n)}function N0(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var c=wt(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),c.on=t}),i===0&&o()})}var T0=0;function Mt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function nc(){return++T0}var bt=sr.prototype;Mt.prototype={constructor:Mt,select:l0,selectAll:c0,selectChild:bt.selectChild,selectChildren:bt.selectChildren,filter:t0,merge:n0,selection:d0,transition:M0,call:bt.call,nodes:bt.nodes,node:bt.node,size:bt.size,empty:bt.empty,each:bt.each,on:o0,attr:zy,attrTween:Wy,style:g0,styleTween:w0,text:E0,textTween:C0,remove:s0,tween:Iy,delay:Yy,duration:Gy,ease:Zy,easeVarying:e0,end:N0,[Symbol.iterator]:bt[Symbol.iterator]};function P0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var R0={time:null,delay:0,duration:250,ease:P0};function A0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function I0(e){var t,n;e instanceof Mt?(t=e._id,e=e._name):(t=nc(),(n=R0).time=Fo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&fi(l,e,t,c,a,n||A0(l,t));return new Mt(r,this._parents,e,t)}sr.prototype.interrupt=Py;sr.prototype.transition=I0;const vr=e=>()=>e;function $0(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Et(e,t,n){this.k=e,this.x=t,this.y=n}Et.prototype={constructor:Et,scale:function(e){return e===1?this:new Et(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Et(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new Et(1,0,0);Et.prototype;function Fi(e){e.stopImmediatePropagation()}function $n(e){e.preventDefault(),e.stopImmediatePropagation()}function O0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function D0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function ts(){return this.__zoom||Dt}function F0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function k0(){return navigator.maxTouchPoints||"ontouchstart"in this}function L0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function rc(){var e=O0,t=D0,n=L0,r=F0,i=k0,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],s=250,l=xy,c=ci("start","zoom","end"),u,f,d,p=500,x=150,v=0,S=10;function h(w){w.property("__zoom",ts).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}h.transform=function(w,T,M,R){var O=w.selection?w.selection():w;O.property("__zoom",ts),w!==O?_(w,T,M,R):O.interrupt().each(function(){C(this,arguments).event(R).start().zoom(null,typeof T=="function"?T.apply(this,arguments):T).end()})},h.scaleBy=function(w,T,M,R){h.scaleTo(w,function(){var O=this.__zoom.k,L=typeof T=="function"?T.apply(this,arguments):T;return O*L},M,R)},h.scaleTo=function(w,T,M,R){h.transform(w,function(){var O=t.apply(this,arguments),L=this.__zoom,F=M==null?y(O):typeof M=="function"?M.apply(this,arguments):M,B=L.invert(F),G=typeof T=="function"?T.apply(this,arguments):T;return n(E(b(L,G),F,B),O,a)},M,R)},h.translateBy=function(w,T,M,R){h.transform(w,function(){return n(this.__zoom.translate(typeof T=="function"?T.apply(this,arguments):T,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),a)},null,R)},h.translateTo=function(w,T,M,R,O){h.transform(w,function(){var L=t.apply(this,arguments),F=this.__zoom,B=R==null?y(L):typeof R=="function"?R.apply(this,arguments):R;return n(Dt.translate(B[0],B[1]).scale(F.k).translate(typeof T=="function"?-T.apply(this,arguments):-T,typeof M=="function"?-M.apply(this,arguments):-M),L,a)},R,O)};function b(w,T){return T=Math.max(o[0],Math.min(o[1],T)),T===w.k?w:new Et(T,w.x,w.y)}function E(w,T,M){var R=T[0]-M[0]*w.k,O=T[1]-M[1]*w.k;return R===w.x&&O===w.y?w:new Et(w.k,R,O)}function y(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function _(w,T,M,R){w.on("start.zoom",function(){C(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(R).end()}).tween("zoom",function(){var O=this,L=arguments,F=C(O,L).event(R),B=t.apply(O,L),G=M==null?y(B):typeof M=="function"?M.apply(O,L):M,q=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),X=O.__zoom,te=typeof T=="function"?T.apply(O,L):T,he=l(X.invert(G).concat(q/X.k),te.invert(G).concat(q/te.k));return function(ie){if(ie===1)ie=te;else{var ae=he(ie),pe=q/ae[2];ie=new Et(pe,G[0]-ae[0]*pe,G[1]-ae[1]*pe)}F.zoom(null,ie)}})}function C(w,T,M){return!M&&w.__zooming||new N(w,T)}function N(w,T){this.that=w,this.args=T,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,T),this.taps=0}N.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,T){return this.mouse&&w!=="mouse"&&(this.mouse[1]=T.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=T.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=T.invert(this.touch1[0])),this.that.__zoom=T,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var T=tt(this.that).datum();c.call(w,this.that,new $0(w,{sourceEvent:this.sourceEvent,target:h,type:w,transform:this.that.__zoom,dispatch:c}),T)}};function I(w,...T){if(!e.apply(this,arguments))return;var M=C(this,T).event(w),R=this.__zoom,O=Math.max(o[0],Math.min(o[1],R.k*Math.pow(2,r.apply(this,arguments)))),L=st(w);if(M.wheel)(M.mouse[0][0]!==L[0]||M.mouse[0][1]!==L[1])&&(M.mouse[1]=R.invert(M.mouse[0]=L)),clearTimeout(M.wheel);else{if(R.k===O)return;M.mouse=[L,R.invert(L)],Pr(this),M.start()}$n(w),M.wheel=setTimeout(F,x),M.zoom("mouse",n(E(b(R,O),M.mouse[0],M.mouse[1]),M.extent,a));function F(){M.wheel=null,M.end()}}function D(w,...T){if(d||!e.apply(this,arguments))return;var M=w.currentTarget,R=C(this,T,!0).event(w),O=tt(w.view).on("mousemove.zoom",G,!0).on("mouseup.zoom",q,!0),L=st(w,M),F=w.clientX,B=w.clientY;Vl(w.view),Fi(w),R.mouse=[L,this.__zoom.invert(L)],Pr(this),R.start();function G(X){if($n(X),!R.moved){var te=X.clientX-F,he=X.clientY-B;R.moved=te*te+he*he>v}R.event(X).zoom("mouse",n(E(R.that.__zoom,R.mouse[0]=st(X,M),R.mouse[1]),R.extent,a))}function q(X){O.on("mousemove.zoom mouseup.zoom",null),Ul(X.view,R.moved),$n(X),R.event(X).end()}}function $(w,...T){if(e.apply(this,arguments)){var M=this.__zoom,R=st(w.changedTouches?w.changedTouches[0]:w,this),O=M.invert(R),L=M.k*(w.shiftKey?.5:2),F=n(E(b(M,L),R,O),t.apply(this,T),a);$n(w),s>0?tt(this).transition().duration(s).call(_,F,R,w):tt(this).call(h.transform,F,R,w)}}function H(w,...T){if(e.apply(this,arguments)){var M=w.touches,R=M.length,O=C(this,T,w.changedTouches.length===R).event(w),L,F,B,G;for(Fi(w),F=0;F<R;++F)B=M[F],G=st(B,this),G=[G,this.__zoom.invert(G),B.identifier],O.touch0?!O.touch1&&O.touch0[2]!==G[2]&&(O.touch1=G,O.taps=0):(O.touch0=G,L=!0,O.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(O.taps<2&&(f=G[0],u=setTimeout(function(){u=null},p)),Pr(this),O.start())}}function Z(w,...T){if(this.__zooming){var M=C(this,T).event(w),R=w.changedTouches,O=R.length,L,F,B,G;for($n(w),L=0;L<O;++L)F=R[L],B=st(F,this),M.touch0&&M.touch0[2]===F.identifier?M.touch0[0]=B:M.touch1&&M.touch1[2]===F.identifier&&(M.touch1[0]=B);if(F=M.that.__zoom,M.touch1){var q=M.touch0[0],X=M.touch0[1],te=M.touch1[0],he=M.touch1[1],ie=(ie=te[0]-q[0])*ie+(ie=te[1]-q[1])*ie,ae=(ae=he[0]-X[0])*ae+(ae=he[1]-X[1])*ae;F=b(F,Math.sqrt(ie/ae)),B=[(q[0]+te[0])/2,(q[1]+te[1])/2],G=[(X[0]+he[0])/2,(X[1]+he[1])/2]}else if(M.touch0)B=M.touch0[0],G=M.touch0[1];else return;M.zoom("touch",n(E(F,B,G),M.extent,a))}}function Y(w,...T){if(this.__zooming){var M=C(this,T).event(w),R=w.changedTouches,O=R.length,L,F;for(Fi(w),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),L=0;L<O;++L)F=R[L],M.touch0&&M.touch0[2]===F.identifier?delete M.touch0:M.touch1&&M.touch1[2]===F.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(F=st(F,this),Math.hypot(f[0]-F[0],f[1]-F[1])<S)){var B=tt(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return h.wheelDelta=function(w){return arguments.length?(r=typeof w=="function"?w:vr(+w),h):r},h.filter=function(w){return arguments.length?(e=typeof w=="function"?w:vr(!!w),h):e},h.touchable=function(w){return arguments.length?(i=typeof w=="function"?w:vr(!!w),h):i},h.extent=function(w){return arguments.length?(t=typeof w=="function"?w:vr([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),h):t},h.scaleExtent=function(w){return arguments.length?(o[0]=+w[0],o[1]=+w[1],h):[o[0],o[1]]},h.translateExtent=function(w){return arguments.length?(a[0][0]=+w[0][0],a[1][0]=+w[1][0],a[0][1]=+w[0][1],a[1][1]=+w[1][1],h):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},h.constrain=function(w){return arguments.length?(n=w,h):n},h.duration=function(w){return arguments.length?(s=+w,h):s},h.interpolate=function(w){return arguments.length?(l=w,h):l},h.on=function(){var w=c.on.apply(c,arguments);return w===c?h:w},h.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,h):Math.sqrt(v)},h.tapDistance=function(w){return arguments.length?(S=+w,h):S},h}const zo=m.createContext(null),z0=zo.Provider,ic="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100";function xe(e,t){const n=m.useContext(zo);if(n===null)throw new Error(ic);return sm(n,e,t)}const Ae=()=>{const e=m.useContext(zo);if(e===null)throw new Error(ic);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},B0=e=>e.userSelectionActive?"none":"all";function Bo({position:e,children:t,className:n,style:r,...i}){const o=xe(B0),a=`${e}`.split("-");return g("div",{className:ze(["react-flow__panel",n,...a]),style:{...r,pointerEvents:o},...i,children:t})}function H0({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:g(Bo,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:g("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const V0=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:i=!0,labelBgStyle:o={},labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:l,className:c,...u})=>{const f=m.useRef(null),[d,p]=m.useState({x:0,y:0,width:0,height:0}),x=ze(["react-flow__edge-textwrapper",c]);return m.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:W("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:x,visibility:d.width?"visible":"hidden",...u,children:[i&&g("rect",{width:d.width+2*a[0],x:-a[0],y:-a[1],height:d.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),g("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:f,style:r,children:n}),l]})};var U0=m.memo(V0);const cr=({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l,style:c,markerEnd:u,markerStart:f,interactionWidth:d=20})=>W(ye,{children:[g("path",{style:c,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:f}),d&&g("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r?g(U0,{x:t,y:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:l}):null]});cr.displayName="BaseEdge";function On(e,t,n){return n===void 0?n:r=>{const i=t().edges.find(o=>o.id===e);i&&n(r,{...i})}}function oc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,a=Math.abs(r-t)/2,s=r<t?r+a:r-a;return[o,s,i,a]}function ac({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const l=e*.125+i*.375+a*.375+n*.125,c=t*.125+o*.375+s*.375+r*.125,u=Math.abs(l-e),f=Math.abs(c-t);return[l,c,u,f]}var En;(function(e){e.Strict="strict",e.Loose="loose"})(En||(En={}));var mn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mn||(mn={}));const Ho=e=>({width:e.offsetWidth,height:e.offsetHeight}),gn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Vo=(e={x:0,y:0},t)=>({x:gn(e.x,t[0][0],t[1][0]),y:gn(e.y,t[0][1],t[1][1])}),sc=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},lc=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Kr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),cc=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ns=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),W0=(e,t)=>cc(lc(Kr(e),Kr(t))),ho=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},j0=e=>!!e.width&&!!e.height&&!!e.x&&!!e.y,uc=e=>!isNaN(e)&&isFinite(e),De=Symbol.for("internals"),dc=["Enter"," ","Escape"],X0=e=>{};var Rt;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Rt||(Rt={}));var qr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(qr||(qr={}));var U;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(U||(U={}));function rs({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===U.Left||e===U.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function fc({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top}){const[a,s]=rs({pos:n,x1:e,y1:t,x2:r,y2:i}),[l,c]=rs({pos:o,x1:r,y1:i,x2:e,y2:t}),[u,f,d,p]=ac({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:l,targetControlY:c});return[`M${e},${t} C${a},${s} ${l},${c} ${r},${i}`,u,f,d,p]}const Uo=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:o=U.Top,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:v})=>{const[S,h,b]=fc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o});return g(cr,{path:S,labelX:h,labelY:b,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:v})});Uo.displayName="SimpleBezierEdge";const is={[U.Left]:{x:-1,y:0},[U.Right]:{x:1,y:0},[U.Top]:{x:0,y:-1},[U.Bottom]:{x:0,y:1}},Y0=({source:e,sourcePosition:t=U.Bottom,target:n})=>t===U.Left||t===U.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},os=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function K0({source:e,sourcePosition:t=U.Bottom,target:n,targetPosition:r=U.Top,center:i,offset:o}){const a=is[t],s=is[r],l={x:e.x+a.x*o,y:e.y+a.y*o},c={x:n.x+s.x*o,y:n.y+s.y*o},u=Y0({source:l,sourcePosition:t,target:c}),f=u.x!==0?"x":"y",d=u[f];let p=[],x,v;const[S,h,b,E]=oc({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*s[f]===-1){x=i.x||S,v=i.y||h;const _=[{x,y:l.y},{x,y:c.y}],C=[{x:l.x,y:v},{x:c.x,y:v}];a[f]===d?p=f==="x"?_:C:p=f==="x"?C:_}else{const _=[{x:l.x,y:c.y}],C=[{x:c.x,y:l.y}];if(f==="x"?p=a.x===d?C:_:p=a.y===d?_:C,t!==r){const N=f==="x"?"y":"x",I=a[f]===s[N],D=l[N]>c[N],$=l[N]<c[N];(a[f]===1&&(!I&&D||I&&$)||a[f]!==1&&(!I&&$||I&&D))&&(p=f==="x"?_:C)}x=p[0].x,v=p[0].y}return[[e,l,...p,c,n],x,v,b,E]}function q0(e,t,n,r){const i=Math.min(os(e,t)/2,os(t,n)/2,r),{x:o,y:a}=t;if(e.x===o&&o===n.x||e.y===a&&a===n.y)return`L${o} ${a}`;if(e.y===a){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${o+i*c},${a}Q ${o},${a} ${o},${a+i*u}`}const s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${a+i*l}Q ${o},${a} ${o+i*s},${a}`}function po({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top,borderRadius:a=5,centerX:s,centerY:l,offset:c=20}){const[u,f,d,p,x]=K0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:o,center:{x:s,y:l},offset:c});return[u.reduce((S,h,b)=>{let E="";return b>0&&b<u.length-1?E=q0(u[b-1],h,u[b+1],a):E=`${b===0?"M":"L"}${h.x} ${h.y}`,S+=E,S},""),f,d,p,x]}const hi=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:f=U.Bottom,targetPosition:d=U.Top,markerEnd:p,markerStart:x,pathOptions:v,interactionWidth:S})=>{const[h,b,E]=po({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:r,targetPosition:d,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return g(cr,{path:h,labelX:b,labelY:E,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:p,markerStart:x,interactionWidth:S})});hi.displayName="SmoothStepEdge";const Wo=m.memo(e=>{var t;return g(hi,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Wo.displayName="StepEdge";function G0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,o,a,s]=oc({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,o,a,s]}const jo=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:f,markerStart:d,interactionWidth:p})=>{const[x,v,S]=G0({sourceX:e,sourceY:t,targetX:n,targetY:r});return g(cr,{path:x,labelX:v,labelY:S,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:f,markerStart:d,interactionWidth:p})});jo.displayName="StraightEdge";function wr(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function as({pos:e,x1:t,y1:n,x2:r,y2:i,c:o}){switch(e){case U.Left:return[t-wr(t-r,o),n];case U.Right:return[t+wr(r-t,o),n];case U.Top:return[t,n-wr(n-i,o)];case U.Bottom:return[t,n+wr(i-n,o)]}}function hc({sourceX:e,sourceY:t,sourcePosition:n=U.Bottom,targetX:r,targetY:i,targetPosition:o=U.Top,curvature:a=.25}){const[s,l]=as({pos:n,x1:e,y1:t,x2:r,y2:i,c:a}),[c,u]=as({pos:o,x1:r,y1:i,x2:e,y2:t,c:a}),[f,d,p,x]=ac({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:s,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${s},${l} ${c},${u} ${r},${i}`,f,d,p,x]}const Gr=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:i=U.Bottom,targetPosition:o=U.Top,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,pathOptions:v,interactionWidth:S})=>{const[h,b,E]=hc({sourceX:e,sourceY:t,sourcePosition:i,targetX:n,targetY:r,targetPosition:o,curvature:v==null?void 0:v.curvature});return g(cr,{path:h,labelX:b,labelY:E,label:a,labelStyle:s,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:f,style:d,markerEnd:p,markerStart:x,interactionWidth:S})});Gr.displayName="BezierEdge";const Xo=m.createContext(null),J0=Xo.Provider;Xo.Consumer;function mo(e,t,n,r,i,o,a){const s=a.elementFromPoint(e.clientX,e.clientY),l=(s==null?void 0:s.classList.contains("target"))||!1,c=(s==null?void 0:s.classList.contains("source"))||!1,u={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(l||c)){u.isHoveringHandle=!0;const f=s.getAttribute("data-nodeid"),d=s.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:d,target:r,targetHandle:i}:{source:r,sourceHandle:i,target:f,targetHandle:d};u.connection=p,(t===En.Strict?n&&c||!n&&l:!0)&&(u.isValid=o(p))}return u}function ki(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function pc({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:i,getState:o,setState:a,isValidConnection:s,elementEdgeUpdaterType:l,onEdgeUpdateEnd:c}){const u=e.target.closest(".react-flow"),f=sc(e.target);if(!f)return;const d=f.elementFromPoint(e.clientX,e.clientY),p=d==null?void 0:d.classList.contains("target"),x=d==null?void 0:d.classList.contains("source");if(!u||!p&&!x&&!l)return;const{onConnectStart:v,connectionMode:S}=o(),h=l||(p?"target":"source"),b=u.getBoundingClientRect();let E;a({connectionPosition:{x:e.clientX-b.left,y:e.clientY-b.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:h}),v==null||v(e,{nodeId:n,handleId:t,handleType:h});function y(C){a({connectionPosition:{x:C.clientX-b.left,y:C.clientY-b.top}});const{connection:N,elementBelow:I,isValid:D,isHoveringHandle:$}=mo(C,S,i,n,t,s,f);if(!$)return ki(E);N.source!==N.target&&I&&(ki(E),E=I,I.classList.add("react-flow__handle-connecting"),I.classList.toggle("react-flow__handle-valid",D))}function _(C){var D,$;const{connection:N,isValid:I}=mo(C,S,i,n,t,s,f);I&&(r==null||r(N)),($=(D=o()).onConnectEnd)==null||$.call(D,C),l&&c&&c(C),ki(E),a({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),f.removeEventListener("mousemove",y),f.removeEventListener("mouseup",_)}f.addEventListener("mousemove",y),f.addEventListener("mouseup",_)}const Z0=e=>"id"in e&&"source"in e&&"target"in e,Q0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,go=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,ev=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),mc=(e,t)=>{if(!e.source||!e.target)return t;let n;return Z0(e)?n={...e}:n={...e,id:Q0(e)},ev(n,t)?t:t.concat(n)},tv=({x:e,y:t},[n,r,i],o,[a,s])=>{const l={x:(e-n)/i,y:(t-r)/i};return o?{x:a*Math.round(l.x/a),y:s*Math.round(l.y/s)}:l},pi=e=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const t=e.reduce((n,{positionAbsolute:r,position:i,width:o,height:a})=>lc(n,Kr({x:r?r.x:i.x,y:r?r.y:i.y,width:o||0,height:a||0})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cc(t)},gc=(e,t,[n,r,i]=[0,0,1],o=!1,a=!1)=>{const s={x:(t.x-n)/i,y:(t.y-r)/i,width:t.width/i,height:t.height/i},l=[];return e.forEach(c=>{const{positionAbsolute:u={x:0,y:0},width:f,height:d,selectable:p=!0}=c;if(a&&!p)return!1;const x={...u,width:f||0,height:d||0},v=ho(s,x),S=typeof f>"u"||typeof d>"u"||f===null||d===null,h=o&&v>0,b=(f||0)*(d||0);(S||h||v>=b||c.dragging)&&l.push(c)}),l},yc=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},vc=(e,t,n,r,i,o=.1)=>{const a=t/(e.width*(1+o)),s=n/(e.height*(1+o)),l=Math.min(a,s),c=gn(l,r,i),u=e.x+e.width/2,f=e.y+e.height/2,d=t/2-u*c,p=n/2-f*c;return[d,p,c]},Ut=(e,t=0)=>e.transition().duration(t),nv=()=>!0,rv=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),wc=m.forwardRef(({type:e="source",position:t=U.Top,isValidConnection:n=nv,isConnectable:r=!0,id:i,onConnect:o,children:a,className:s,onMouseDown:l,...c},u)=>{const f=Ae(),d=m.useContext(Xo),{connectionStartHandle:p,connectOnClick:x,noPanClassName:v}=xe(rv,je),S=i||null,h=e==="target",b=_=>{const{defaultEdgeOptions:C,onConnect:N,hasDefaultEdges:I}=f.getState(),D={...C,..._};if(I){const{edges:$}=f.getState();f.setState({edges:mc(D,$)})}N==null||N(D),o==null||o(D)},E=_=>{_.button===0&&pc({event:_,handleId:S,nodeId:d,onConnect:b,isTarget:h,getState:f.getState,setState:f.setState,isValidConnection:n}),l==null||l(_)},y=_=>{const{onClickConnectStart:C,onClickConnectEnd:N,connectionMode:I}=f.getState();if(!p){C==null||C(_,{nodeId:d,handleId:S,handleType:e}),f.setState({connectionStartHandle:{nodeId:d,type:e,handleId:S}});return}const D=sc(_.target),{connection:$,isValid:H}=mo(_,I,p.type==="target",p.nodeId,p.handleId||null,n,D);H&&b($),N==null||N(_),f.setState({connectionStartHandle:null})};return g("div",{"data-handleid":S,"data-nodeid":d,"data-handlepos":t,className:ze(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,s,{source:!h,target:h,connectable:r,connecting:(p==null?void 0:p.nodeId)===d&&(p==null?void 0:p.handleId)===S&&(p==null?void 0:p.type)===e}]),onMouseDown:E,onClick:x?y:void 0,ref:u,...c,children:a})});wc.displayName="Handle";var ir=m.memo(wc);const bc=({data:e,isConnectable:t,targetPosition:n=U.Top,sourcePosition:r=U.Bottom})=>W(ye,{children:[g(ir,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,g(ir,{type:"source",position:r,isConnectable:t})]});bc.displayName="DefaultNode";var yo=m.memo(bc);const xc=({data:e,isConnectable:t,sourcePosition:n=U.Bottom})=>W(ye,{children:[e==null?void 0:e.label,g(ir,{type:"source",position:n,isConnectable:t})]});xc.displayName="InputNode";var Ec=m.memo(xc);const Sc=({data:e,isConnectable:t,targetPosition:n=U.Top})=>W(ye,{children:[g(ir,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});Sc.displayName="OutputNode";var _c=m.memo(Sc);const Yo=()=>null;Yo.displayName="GroupNode";const iv=e=>({selectedNodes:Array.from(e.nodeInternals.values()).filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),br=e=>e.id;function ov(e,t){return je(e.selectedNodes.map(br),t.selectedNodes.map(br))&&je(e.selectedEdges.map(br),t.selectedEdges.map(br))}const Cc=m.memo(({onSelectionChange:e})=>{const t=Ae(),{selectedNodes:n,selectedEdges:r}=xe(iv,ov);return m.useEffect(()=>{var o,a;const i={nodes:n,edges:r};e==null||e(i),(a=(o=t.getState()).onSelectionChange)==null||a.call(o,i)},[n,r,e]),null});Cc.displayName="SelectionListener";const av=e=>!!e.onSelectionChange;function sv({onSelectionChange:e}){const t=xe(av);return e||t?g(Cc,{onSelectionChange:e}):null}const lv=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rn(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ce(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const cv=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:i,onConnectStart:o,onConnectEnd:a,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:f,edgesFocusable:d,minZoom:p,maxZoom:x,nodeExtent:v,onNodesChange:S,onEdgesChange:h,elementsSelectable:b,connectionMode:E,snapGrid:y,snapToGrid:_,translateExtent:C,connectOnClick:N,defaultEdgeOptions:I,fitView:D,fitViewOptions:$,onNodesDelete:H,onEdgesDelete:Z,onNodeDrag:Y,onNodeDragStart:w,onNodeDragStop:T,onSelectionDrag:M,onSelectionDragStart:R,onSelectionDragStop:O,noPanClassName:L,nodeOrigin:F,rfId:B})=>{const{setNodes:G,setEdges:q,setDefaultNodesAndEdges:X,setMinZoom:te,setMaxZoom:he,setTranslateExtent:ie,setNodeExtent:ae,reset:pe}=xe(lv,je),j=Ae();return m.useEffect(()=>{const Me=r==null?void 0:r.map(_e=>({..._e,...I}));return X(n,Me),()=>{pe()}},[]),ce("defaultEdgeOptions",I,j.setState),ce("connectionMode",E,j.setState),ce("onConnect",i,j.setState),ce("onConnectStart",o,j.setState),ce("onConnectEnd",a,j.setState),ce("onClickConnectStart",s,j.setState),ce("onClickConnectEnd",l,j.setState),ce("nodesDraggable",c,j.setState),ce("nodesConnectable",u,j.setState),ce("nodesFocusable",f,j.setState),ce("edgesFocusable",d,j.setState),ce("elementsSelectable",b,j.setState),ce("snapToGrid",_,j.setState),ce("snapGrid",y,j.setState),ce("onNodesChange",S,j.setState),ce("onEdgesChange",h,j.setState),ce("connectOnClick",N,j.setState),ce("fitViewOnInit",D,j.setState),ce("fitViewOnInitOptions",$,j.setState),ce("onNodesDelete",H,j.setState),ce("onEdgesDelete",Z,j.setState),ce("onNodeDrag",Y,j.setState),ce("onNodeDragStart",w,j.setState),ce("onNodeDragStop",T,j.setState),ce("onSelectionDrag",M,j.setState),ce("onSelectionDragStart",R,j.setState),ce("onSelectionDragStop",O,j.setState),ce("noPanClassName",L,j.setState),ce("nodeOrigin",F,j.setState),ce("rfId",B,j.setState),rn(e,G),rn(t,q),rn(p,te),rn(x,he),rn(C,ie),rn(v,ae),null},ss={display:"none"},uv={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Mc="react-flow__node-desc",Nc="react-flow__edge-desc",dv="react-flow__aria-live",fv=e=>e.ariaLiveMessage;function hv({rfId:e}){const t=xe(fv);return g("div",{id:`${dv}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:uv,children:t})}function pv({rfId:e,disableKeyboardA11y:t}){return W(ye,{children:[W("div",{id:`${Mc}-${e}`,style:ss,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),g("div",{id:`${Nc}-${e}`,style:ss,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&g(hv,{rfId:e})]})}const mv=(e,t,n)=>n===U.Left?e-t:n===U.Right?e+t:e,gv=(e,t,n)=>n===U.Top?e-t:n===U.Bottom?e+t:e,ls="react-flow__edgeupdater",cs=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s})=>g("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:ze([ls,`${ls}-${s}`]),cx:mv(t,r,e),cy:gv(n,r,e),r,stroke:"transparent",fill:"transparent"});var on=e=>{const t=({id:n,className:r,type:i,data:o,onClick:a,onEdgeDoubleClick:s,selected:l,animated:c,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:v,style:S,source:h,target:b,sourceX:E,sourceY:y,targetX:_,targetY:C,sourcePosition:N,targetPosition:I,elementsSelectable:D,hidden:$,sourceHandleId:H,targetHandleId:Z,onContextMenu:Y,onMouseEnter:w,onMouseMove:T,onMouseLeave:M,edgeUpdaterRadius:R,onEdgeUpdate:O,onEdgeUpdateStart:L,onEdgeUpdateEnd:F,markerEnd:B,markerStart:G,rfId:q,ariaLabel:X,isFocusable:te,pathOptions:he,interactionWidth:ie})=>{const ae=m.useRef(null),[pe,j]=m.useState(!1),[Me,_e]=m.useState(!1),me=Ae(),Ve=m.useMemo(()=>`url(#${go(G,q)})`,[G,q]),J=m.useMemo(()=>`url(#${go(B,q)})`,[B,q]);if($)return null;const le=we=>{const{edges:Ne,addSelectedEdges:Ye}=me.getState();if(D&&(me.setState({nodesSelectionActive:!1}),Ye([n])),a){const Ze=Ne.find(Fe=>Fe.id===n);a(we,Ze)}},fe=On(n,me.getState,s),P=On(n,me.getState,Y),A=On(n,me.getState,w),k=On(n,me.getState,T),V=On(n,me.getState,M),K=(we,Ne)=>{const Ye=Ne?b:h,Ze=(Ne?Z:H)||null,Fe=Ne?"target":"source",Nt=()=>!0,Ee=Ne,Ce=me.getState().edges.find(mt=>mt.id===n);_e(!0),L==null||L(we,Ce,Fe);const Qe=mt=>{_e(!1),F==null||F(mt,Ce,Fe)};pc({event:we,handleId:Ze,nodeId:Ye,onConnect:mt=>O==null?void 0:O(Ce,mt),isTarget:Ee,getState:me.getState,setState:me.setState,isValidConnection:Nt,elementEdgeUpdaterType:Fe,onEdgeUpdateEnd:Qe})},ue=we=>K(we,!0),oe=we=>K(we,!1),ne=()=>j(!0),se=()=>j(!1),ge=!D&&!a,Se=typeof O<"u",Xe=we=>{var Ne;if(dc.includes(we.key)&&D){const{unselectNodesAndEdges:Ye,addSelectedEdges:Ze,edges:Fe}=me.getState();we.key==="Escape"?((Ne=ae.current)==null||Ne.blur(),Ye({edges:[Fe.find(Ee=>Ee.id===n)]})):Ze([n])}};return W("g",{className:ze(["react-flow__edge",`react-flow__edge-${i}`,r,{selected:l,animated:c,inactive:ge,updating:pe}]),onClick:le,onDoubleClick:fe,onContextMenu:P,onMouseEnter:A,onMouseMove:k,onMouseLeave:V,onKeyDown:te?Xe:void 0,tabIndex:te?0:void 0,role:te?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":X===null?void 0:X||`Edge from ${h} to ${b}`,"aria-describedby":te?`${Nc}-${q}`:void 0,ref:ae,children:[!Me&&g(e,{id:n,source:h,target:b,selected:l,animated:c,label:u,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:x,labelBgBorderRadius:v,data:o,style:S,sourceX:E,sourceY:y,targetX:_,targetY:C,sourcePosition:N,targetPosition:I,sourceHandleId:H,targetHandleId:Z,markerStart:Ve,markerEnd:J,pathOptions:he,interactionWidth:ie}),Se&&W(ye,{children:[g(cs,{position:N,centerX:E,centerY:y,radius:R,onMouseDown:ue,onMouseEnter:ne,onMouseOut:se,type:"source"}),g(cs,{position:I,centerX:_,centerY:C,radius:R,onMouseDown:oe,onMouseEnter:ne,onMouseOut:se,type:"target"})]})]})};return t.displayName="EdgeWrapper",m.memo(t)};function yv(e){const t={default:on(e.default||Gr),straight:on(e.bezier||jo),step:on(e.step||Wo),smoothstep:on(e.step||hi),simplebezier:on(e.simplebezier||Uo)},n={},r=Object.keys(e).filter(i=>!["default","bezier"].includes(i)).reduce((i,o)=>(i[o]=on(e[o]||Gr),i),n);return{...t,...r}}function us(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,i=((n==null?void 0:n.y)||0)+t.y,o=(n==null?void 0:n.width)||t.width,a=(n==null?void 0:n.height)||t.height;switch(e){case U.Top:return{x:r+o/2,y:i};case U.Right:return{x:r+o,y:i+a/2};case U.Bottom:return{x:r+o/2,y:i+a};case U.Left:return{x:r,y:i+a/2}}}function ds(e,t){if(!e)return null;let n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(r=>r.id===t)),typeof n>"u"?null:n}const vv=(e,t,n,r,i,o)=>{const a=us(n,e,t),s=us(o,r,i);return{sourceX:a.x,sourceY:a.y,targetX:s.x,targetY:s.y}};function wv({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:o,width:a,height:s,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+o)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=Kr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:a/l[2],height:s/l[2]}),f=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),d=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(f*d)>0}function fs(e){var r,i,o,a,s;const t=((r=e==null?void 0:e[De])==null?void 0:r.handleBounds)||null,n=!e||!t||!e.width||!e.height||typeof((i=e.positionAbsolute)==null?void 0:i.x)>"u"||typeof((o=e.positionAbsolute)==null?void 0:o.y)>"u";return[{x:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)||0,y:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!n]}function Tc(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Tc(n,t):!1}function hs(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function bv(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!Tc(r,e))).map(r=>{var i,o;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-(((i=r.positionAbsolute)==null?void 0:i.x)??0),y:t.y-(((o=r.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function Pc(e,t,n,r){var s,l,c,u;let i=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const f=n.get(e.parentNode);i=f!=null&&f.positionAbsolute&&(f!=null&&f.width)&&(f!=null&&f.height)?[[f.positionAbsolute.x,f.positionAbsolute.y],[f.positionAbsolute.x+f.width-e.width,f.positionAbsolute.y+f.height-e.height]]:i}else i=r;else if(e.extent&&e.parentNode){const f=n.get(e.parentNode),d=((s=f==null?void 0:f.positionAbsolute)==null?void 0:s.x)??0,p=((l=f==null?void 0:f.positionAbsolute)==null?void 0:l.y)??0;i=[[e.extent[0][0]+d,e.extent[0][1]+p],[e.extent[1][0]+d,e.extent[1][1]+p]]}let o={x:0,y:0};if(e.parentNode){const f=n.get(e.parentNode);o={x:((c=f==null?void 0:f.positionAbsolute)==null?void 0:c.x)??0,y:((u=f==null?void 0:f.positionAbsolute)==null?void 0:u.y)??0}}const a=i?Vo(t,i):t;return{position:{x:a.x-o.x,y:a.y-o.y},positionAbsolute:a}}function Li({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(i=>({...n.get(i.id),position:i.position,positionAbsolute:i.positionAbsolute}));return[e?r.find(i=>i.id===e):r[0],r]}const ps=(e,t,n,r)=>{const i=t.querySelectorAll(e);if(!i||!i.length)return null;const o=Array.from(i),a=t.getBoundingClientRect(),s={x:a.width*r[0],y:a.height*r[1]};return o.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-a.left-s.x)/n,y:(c.top-a.top-s.y)/n,...Ho(l)}})};function Dn(e,t,n){return n===void 0?n:r=>{const i=t().nodeInternals.get(e);n(r,{...i})}}function vo({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:a}=t.getState(),s=a.get(e);t.setState({nodesSelectionActive:!1}),s.selected?(n||s.selected&&o)&&i({nodes:[s]}):r([e])}function zi(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Rc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:o,selectNodesOnDrag:a}){const[s,l]=m.useState(!1),c=Ae(),u=m.useRef(),f=m.useRef({x:null,y:null}),d=m.useCallback(({sourceEvent:p})=>{const{transform:x,snapGrid:v,snapToGrid:S}=c.getState(),h=p.touches?p.touches[0].clientX:p.clientX,b=p.touches?p.touches[0].clientY:p.clientY,E={x:(h-x[0])/x[2],y:(b-x[1])/x[2]};return{xSnapped:S?v[0]*Math.round(E.x/v[0]):E.x,ySnapped:S?v[1]*Math.round(E.y/v[1]):E.y,...E}},[]);return m.useEffect(()=>{if(e!=null&&e.current){const p=tt(e.current);if(t)p.on(".drag",null);else{const x=qg().on("start",v=>{var N;const{nodeInternals:S,multiSelectionActive:h,unselectNodesAndEdges:b,onNodeDragStart:E,onSelectionDragStart:y}=c.getState(),_=i?E:zi(y);!a&&!h&&i&&((N=S.get(i))!=null&&N.selected||b()),i&&o&&a&&vo({id:i,store:c});const C=d(v);if(f.current=C,u.current=bv(S,C,i),_&&u.current){const[I,D]=Li({nodeId:i,dragItems:u.current,nodeInternals:S});_(v.sourceEvent,I,D)}}).on("drag",v=>{const{updateNodePositions:S,nodeInternals:h,nodeExtent:b,onNodeDrag:E,onSelectionDrag:y,snapGrid:_,snapToGrid:C}=c.getState(),N=d(v);if((f.current.x!==N.xSnapped||f.current.y!==N.ySnapped)&&u.current){f.current={x:N.xSnapped,y:N.ySnapped},u.current=u.current.map(D=>{const $={x:N.x-D.distance.x,y:N.y-D.distance.y};C&&($.x=_[0]*Math.round($.x/_[0]),$.y=_[1]*Math.round($.y/_[1]));const H=Pc(D,$,h,b);return D.position=H.position,D.positionAbsolute=H.positionAbsolute,D});const I=i?E:zi(y);if(S(u.current,!0,!0),l(!0),I){const[D,$]=Li({nodeId:i,dragItems:u.current,nodeInternals:h});I(v.sourceEvent,D,$)}}}).on("end",v=>{if(l(!1),u.current){const{updateNodePositions:S,nodeInternals:h,onNodeDragStop:b,onSelectionDragStop:E}=c.getState(),y=i?b:zi(E);if(S(u.current,!1,!1),y){const[_,C]=Li({nodeId:i,dragItems:u.current,nodeInternals:h});y(v.sourceEvent,_,C)}}}).filter(v=>{const S=v.target;return!v.button&&(!n||!hs(S,`.${n}`,e))&&(!r||hs(S,r,e))});return p.call(x),()=>{p.on(".drag",null)}}}},[e,t,n,r,o,c,i,a,d]),s}function Ac(){const e=Ae();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:i,updateNodePositions:o,snapToGrid:a,snapGrid:s}=e.getState(),c=Array.from(r.values()).filter(u=>u.selected).map(u=>{if(u.positionAbsolute){const f={x:u.positionAbsolute.x+n.x,y:u.positionAbsolute.y+n.y};a&&(f.x=s[0]*Math.round(f.x/s[0]),f.y=s[1]*Math.round(f.y/s[1]));const d=Pc(u,f,r,i);u.position=d.position,u.positionAbsolute=d.positionAbsolute}return u});o(c,!0,!0)},[])}const Wn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Fn=e=>{const t=({id:n,type:r,data:i,xPos:o,yPos:a,xPosOrigin:s,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:f,onMouseMove:d,onMouseLeave:p,onContextMenu:x,onDoubleClick:v,style:S,className:h,isDraggable:b,isSelectable:E,isConnectable:y,isFocusable:_,selectNodesOnDrag:C,sourcePosition:N,targetPosition:I,hidden:D,resizeObserver:$,dragHandle:H,zIndex:Z,isParent:Y,noDragClassName:w,noPanClassName:T,initialized:M,disableKeyboardA11y:R,ariaLabel:O,rfId:L})=>{const F=Ae(),B=m.useRef(null),G=m.useRef(N),q=m.useRef(I),X=m.useRef(r),te=E||b||u||f||d||p,he=Ac(),ie=Dn(n,F.getState,f),ae=Dn(n,F.getState,d),pe=Dn(n,F.getState,p),j=Dn(n,F.getState,x),Me=Dn(n,F.getState,v),_e=J=>{if(E&&(!C||!b)&&vo({id:n,store:F}),u){const le=F.getState().nodeInternals.get(n);u(J,{...le})}},me=J=>{var P;const{snapGrid:le,snapToGrid:fe}=F.getState();if(dc.includes(J.key)&&E){const A=J.key==="Escape";A&&((P=B.current)==null||P.blur()),vo({id:n,store:F,unselect:A})}else if(!R&&b&&c&&Object.prototype.hasOwnProperty.call(Wn,J.key)){F.setState({ariaLiveMessage:`Moved selected node ${J.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~a}`});const A=fe?le[0]:5,k=fe?le[1]:5,V=J.shiftKey?4:1;he({x:Wn[J.key].x*A*V,y:Wn[J.key].y*k*V})}};m.useEffect(()=>{if(B.current&&!D){const J=B.current;return $==null||$.observe(J),()=>$==null?void 0:$.unobserve(J)}},[D]),m.useEffect(()=>{const J=X.current!==r,le=G.current!==N,fe=q.current!==I;B.current&&(J||le||fe)&&(J&&(X.current=r),le&&(G.current=N),fe&&(q.current=I),F.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,N,I]);const Ve=Rc({nodeRef:B,disabled:D||!b,noDragClassName:w,handleSelector:H,nodeId:n,isSelectable:E,selectNodesOnDrag:C});return D?null:g("div",{className:ze(["react-flow__node",`react-flow__node-${r}`,{[T]:b},h,{selected:c,selectable:E,parent:Y,dragging:Ve}]),ref:B,style:{zIndex:Z,transform:`translate(${s}px,${l}px)`,pointerEvents:te?"all":"none",visibility:M?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ie,onMouseMove:ae,onMouseLeave:pe,onContextMenu:j,onClick:_e,onDoubleClick:Me,onKeyDown:_?me:void 0,tabIndex:_?0:void 0,role:_?"button":void 0,"aria-describedby":R?void 0:`${Mc}-${L}`,"aria-label":O,children:g(J0,{value:n,children:g(e,{id:n,data:i,type:r,xPos:o,yPos:a,selected:c,isConnectable:y,sourcePosition:N,targetPosition:I,dragging:Ve,dragHandle:H,zIndex:Z})})})};return t.displayName="NodeWrapper",m.memo(t)};function xv(e){const t={input:Fn(e.input||Ec),default:Fn(e.default||yo),output:Fn(e.output||_c),group:Fn(e.group||Yo)},n={},r=Object.keys(e).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,o)=>(i[o]=Fn(e[o]||yo),i),n);return{...t,...r}}const Ev=({x:e,y:t,width:n,height:r,origin:i})=>!n||!r?{x:e,y:t}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:e,y:t}:{x:e-n*i[0],y:t-r*i[1]},Sv=typeof document<"u"?document:null;var Jr=(e=null,t={target:Sv})=>{const[n,r]=m.useState(!1),i=m.useRef(new Set([])),[o,a]=m.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.split("+")),c=l.reduce((u,f)=>u.concat(...f),[]);return[l,c]}return[[],[]]},[e]);return m.useEffect(()=>{var s,l;if(e!==null){const c=d=>{if(ys(d))return!1;const p=gs(d.code,a);i.current.add(d[p]),ms(o,i.current,!1)&&(d.preventDefault(),r(!0))},u=d=>{if(ys(d))return!1;const p=gs(d.code,a);ms(o,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(d[p])},f=()=>{i.current.clear(),r(!1)};return(s=t==null?void 0:t.target)==null||s.addEventListener("keydown",c),(l=t==null?void 0:t.target)==null||l.addEventListener("keyup",u),window.addEventListener("blur",f),()=>{var d,p;(d=t==null?void 0:t.target)==null||d.removeEventListener("keydown",c),(p=t==null?void 0:t.target)==null||p.removeEventListener("keyup",u),window.removeEventListener("blur",f)}}},[e,r]),n};function ms(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function gs(e,t){return t.includes(e)?"code":"key"}function ys(e){var n;const t=((n=e.composedPath)==null?void 0:n.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}function Ic(e,t,n,r){var o,a,s,l;if(!e.parentNode)return r;const i=t.get(e.parentNode);return Ic(i,t,n,{x:(r.x??0)+(((o=i.position)==null?void 0:o.x)??0),y:(r.y??0)+(((a=i.position)==null?void 0:a.y)??0),z:(((s=i[De])==null?void 0:s.z)??0)>(r.z??0)?((l=i[De])==null?void 0:l.z)??0:r.z??0})}function Bi(e,t){const n=new Map,r={};return e.forEach(i=>{var l;const o=uc(i.zIndex)?i.zIndex:i.selected?1e3:0,a=t.get(i.id),s={width:a==null?void 0:a.width,height:a==null?void 0:a.height,...i,positionAbsolute:{x:i.position.x,y:i.position.y}};i.parentNode&&(s.parentNode=i.parentNode,r[i.parentNode]=!0),Object.defineProperty(s,De,{enumerable:!1,value:{handleBounds:(l=a==null?void 0:a[De])==null?void 0:l.handleBounds,z:o}}),n.set(i.id,s)}),n.forEach(i=>{var o;if(i.parentNode&&!n.has(i.parentNode))throw new Error(`Parent node ${i.parentNode} not found`);if(i.parentNode||r[i.id]){const{x:a,y:s,z:l}=Ic(i,n,r,{...i.position,z:((o=i[De])==null?void 0:o.z)??0});i.positionAbsolute={x:a,y:s},i[De].z=l,r[i.id]&&(i[De].isParent=!0)}}),n}function $c(e,t={}){const{nodeInternals:n,width:r,height:i,minZoom:o,maxZoom:a,d3Zoom:s,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u}=e();if((t.initial&&!c&&u||!t.initial)&&s&&l){const f=Array.from(n.values()).filter(p=>t.includeHiddenNodes?p.width&&p.height:!p.hidden),d=f.every(p=>p.width&&p.height);if(f.length>0&&d){const p=pi(f),[x,v,S]=vc(p,r,i,t.minZoom??o,t.maxZoom??a,t.padding??.1),h=Dt.translate(x,v).scale(S);return typeof t.duration=="number"&&t.duration>0?s.transform(Ut(l,t.duration),h):s.transform(l,h),!0}}return!1}function _v(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[De]:r[De],selected:n.selected})}),new Map(t)}function Cv(e,t){return t.map(n=>{const r=e.find(i=>i.id===n.id);return r&&(n.selected=r.selected),n})}function xr({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:i,edges:o,onNodesChange:a,onEdgesChange:s,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&r({nodeInternals:_v(e,i)}),a==null||a(e)),t!=null&&t.length&&(c&&r({edges:Cv(t,o)}),s==null||s(t))}const Ht=()=>{},Mv={zoomIn:Ht,zoomOut:Ht,zoomTo:Ht,getZoom:()=>1,setViewport:Ht,getViewport:()=>({x:0,y:0,zoom:1}),fitView:Ht,setCenter:Ht,fitBounds:Ht,project:e=>e,viewportInitialized:!1},Nv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Tv=()=>{const e=Ae(),{d3Zoom:t,d3Selection:n}=xe(Nv,je);return m.useMemo(()=>n&&t?{zoomIn:i=>t.scaleBy(Ut(n,i==null?void 0:i.duration),1.2),zoomOut:i=>t.scaleBy(Ut(n,i==null?void 0:i.duration),1/1.2),zoomTo:(i,o)=>t.scaleTo(Ut(n,o==null?void 0:o.duration),i),getZoom:()=>e.getState().transform[2],setViewport:(i,o)=>{const[a,s,l]=e.getState().transform,c=Dt.translate(i.x??a,i.y??s).scale(i.zoom??l);t.transform(Ut(n,o==null?void 0:o.duration),c)},getViewport:()=>{const[i,o,a]=e.getState().transform;return{x:i,y:o,zoom:a}},fitView:i=>$c(e.getState,i),setCenter:(i,o,a)=>{const{width:s,height:l,maxZoom:c}=e.getState(),u=typeof(a==null?void 0:a.zoom)<"u"?a.zoom:c,f=s/2-i*u,d=l/2-o*u,p=Dt.translate(f,d).scale(u);t.transform(Ut(n,a==null?void 0:a.duration),p)},fitBounds:(i,o)=>{const{width:a,height:s,minZoom:l,maxZoom:c}=e.getState(),[u,f,d]=vc(i,a,s,l,c,(o==null?void 0:o.padding)??.1),p=Dt.translate(u,f).scale(d);t.transform(Ut(n,o==null?void 0:o.duration),p)},project:i=>{const{transform:o,snapToGrid:a,snapGrid:s}=e.getState();return tv(i,o,a,s)},viewportInitialized:!0}:Mv,[t,n])};function mi(){const e=Tv(),t=Ae(),n=m.useCallback(()=>{const{nodeInternals:v}=t.getState();return Array.from(v.values()).map(h=>({...h}))},[]),r=m.useCallback(v=>{const{nodeInternals:S}=t.getState();return S.get(v)},[]),i=m.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(S=>({...S}))},[]),o=m.useCallback(v=>{const{edges:S=[]}=t.getState();return S.find(h=>h.id===v)},[]),a=m.useCallback(v=>{const{nodeInternals:S,setNodes:h,hasDefaultNodes:b,onNodesChange:E}=t.getState(),y=Array.from(S.values()),_=typeof v=="function"?v(y):v;if(b)h(_);else if(E){const C=_.length===0?y.map(N=>({type:"remove",id:N.id})):_.map(N=>({item:N,type:"reset"}));E(C)}},[]),s=m.useCallback(v=>{const{edges:S=[],setEdges:h,hasDefaultEdges:b,onEdgesChange:E}=t.getState(),y=typeof v=="function"?v(S):v;if(b)h(y);else if(E){const _=y.length===0?S.map(C=>({type:"remove",id:C.id})):y.map(C=>({item:C,type:"reset"}));E(_)}},[]),l=m.useCallback(v=>{const S=Array.isArray(v)?v:[v],{nodeInternals:h,setNodes:b,hasDefaultNodes:E,onNodesChange:y}=t.getState();if(E){const C=[...Array.from(h.values()),...S];b(C)}else if(y){const _=S.map(C=>({item:C,type:"add"}));y(_)}},[]),c=m.useCallback(v=>{const S=Array.isArray(v)?v:[v],{edges:h=[],setEdges:b,hasDefaultEdges:E,onEdgesChange:y}=t.getState();if(E)b([...h,...S]);else if(y){const _=S.map(C=>({item:C,type:"add"}));y(_)}},[]),u=m.useCallback(()=>{const{nodeInternals:v,edges:S=[],transform:h}=t.getState(),b=Array.from(v.values()),[E,y,_]=h;return{nodes:b.map(C=>({...C})),edges:S.map(C=>({...C})),viewport:{x:E,y,zoom:_}}},[]),f=m.useCallback(({nodes:v,edges:S})=>{const{nodeInternals:h,edges:b,hasDefaultNodes:E,hasDefaultEdges:y,onNodesDelete:_,onEdgesDelete:C,onNodesChange:N,onEdgesChange:I}=t.getState(),D=Array.from(h.values()),$=(v||[]).map(T=>T.id),H=(S||[]).map(T=>T.id),Z=D.reduce((T,M)=>{const R=!$.includes(M.id)&&M.parentNode&&T.find(L=>L.id===M.parentNode);return(typeof M.deletable=="boolean"?M.deletable:!0)&&($.includes(M.id)||R)&&T.push(M),T},[]),Y=b.filter(T=>typeof T.deletable=="boolean"?T.deletable:!0),w=Y.filter(T=>H.includes(T.id));if(Z||w){const T=yc(Z,Y),M=[...w,...T],R=M.reduce((O,L)=>(O.includes(L.id)||O.push(L.id),O),[]);if((y||E)&&(y&&t.setState({edges:b.filter(O=>!R.includes(O.id))}),E&&(Z.forEach(O=>{h.delete(O.id)}),t.setState({nodeInternals:new Map(h)}))),R.length>0&&(C==null||C(M),I&&I(R.map(O=>({id:O,type:"remove"})))),Z.length>0&&(_==null||_(Z),N)){const O=Z.map(L=>({id:L.id,type:"remove"}));N(O)}}},[]),d=m.useCallback(v=>{const S=j0(v),h=S?null:t.getState().nodeInternals.get(v.id);return[S?v:ns(h),h,S]},[]),p=m.useCallback((v,S=!0,h)=>{const[b,E,y]=d(v);return b?(h||Array.from(t.getState().nodeInternals.values())).filter(_=>{if(!y&&(_.id===E.id||!_.positionAbsolute))return!1;const C=ns(_),N=ho(C,b);return S&&N>0||N>=v.width*v.height}):[]},[]),x=m.useCallback((v,S,h=!0)=>{const[b]=d(v);if(!b)return!1;const E=ho(b,S);return h&&E>0||E>=v.width*v.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:i,getEdge:o,setNodes:a,setEdges:s,addNodes:l,addEdges:c,toObject:u,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:x}),[e,n,r,i,o,a,s,l,c,u,f,p,x])}var Pv=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ae(),{deleteElements:r}=mi(),i=Jr(e),o=Jr(t);m.useEffect(()=>{if(i){const{nodeInternals:a,edges:s}=n.getState(),c=Array.from(a.values()).filter(f=>f.selected),u=s.filter(f=>f.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[i]),m.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function Rv(e){const t=Ae();m.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const i=Ho(e.current);i.height===0||i.width,t.setState({width:i.width||500,height:i.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Ko={position:"absolute",width:"100%",height:"100%",top:0,left:0},Av=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Hi=e=>({x:e.x,y:e.y,zoom:e.k}),Er=(e,t)=>e.target.closest(`.${t}`),Iv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler}),$v=({onMove:e,onMoveStart:t,onMoveEnd:n,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:o=!1,panOnScrollSpeed:a=.5,panOnScrollMode:s=mn.Free,zoomOnDoubleClick:l=!0,selectionKeyPressed:c,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:d,translateExtent:p,minZoom:x,maxZoom:v,zoomActivationKeyCode:S,preventScrolling:h=!0,children:b,noWheelClassName:E,noPanClassName:y})=>{const _=m.useRef(),C=Ae(),N=m.useRef(!1),I=m.useRef(null),D=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:H,d3ZoomHandler:Z}=xe(Iv,je),Y=Jr(S);return Rv(I),m.useEffect(()=>{if(I.current){const w=rc().scaleExtent([x,v]).translateExtent(p),T=tt(I.current).call(w),M=gn(d.x,p[0][0],p[1][0]),R=gn(d.y,p[0][1],p[1][1]),O=gn(d.zoom,x,v),L=Dt.translate(M,R).scale(O);w.transform(T,L),C.setState({d3Zoom:w,d3Selection:T,d3ZoomHandler:T.on("wheel.zoom"),transform:[M,R,O],domNode:I.current.closest(".react-flow")})}},[]),m.useEffect(()=>{H&&$&&(o&&!Y?H.on("wheel.zoom",w=>{if(Er(w,E))return!1;w.preventDefault(),w.stopImmediatePropagation();const T=H.property("__zoom").k||1;if(w.ctrlKey&&i){const L=st(w),F=-w.deltaY*(w.deltaMode===1?.05:w.deltaMode?1:.002)*10,B=T*Math.pow(2,F);$.scaleTo(H,B,L);return}const M=w.deltaMode===1?20:1,R=s===mn.Vertical?0:w.deltaX*M,O=s===mn.Horizontal?0:w.deltaY*M;$.translateBy(H,-(R/T)*a,-(O/T)*a)}):typeof Z<"u"&&H.on("wheel.zoom",function(w,T){if(!h||Er(w,E))return null;w.preventDefault(),Z.call(this,w,T)}))},[o,s,H,$,Z,Y,i,h,E]),m.useEffect(()=>{$&&(c&&!N.current?$.on("zoom",null):c||$.on("zoom",w=>{const{onViewportChange:T}=C.getState();if(C.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),e||T){const M=Hi(w.transform);T==null||T(M),e==null||e(w.sourceEvent,M)}}))},[c,$,e]),m.useEffect(()=>{$&&$.on("start",w=>{var M;if(!w.sourceEvent)return null;const{onViewportChangeStart:T}=C.getState();if(N.current=!0,((M=w.sourceEvent)==null?void 0:M.type)==="mousedown"&&C.setState({paneDragging:!0}),t||T){const R=Hi(w.transform);D.current=R,T==null||T(R),t==null||t(w.sourceEvent,R)}})},[$,t]),m.useEffect(()=>{$&&$.on("end",w=>{if(!w.sourceEvent)return null;const{onViewportChangeEnd:T}=C.getState();if(N.current=!1,C.setState({paneDragging:!1}),(n||T)&&Av(D.current,w.transform)){const M=Hi(w.transform);D.current=M,clearTimeout(_.current),_.current=setTimeout(()=>{T==null||T(M),n==null||n(w.sourceEvent,M)},o?150:0)}})},[$,n,o]),m.useEffect(()=>{$&&$.filter(w=>{const T=Y||r,M=i&&w.ctrlKey;return w.button===1&&w.type==="mousedown"&&w.target.closest(".react-flow__node")?!0:!f&&!T&&!o&&!l&&!i||c||!l&&w.type==="dblclick"||Er(w,E)&&w.type==="wheel"||Er(w,y)&&w.type!=="wheel"||!i&&w.ctrlKey&&w.type==="wheel"||!T&&!o&&!M&&w.type==="wheel"||!f&&(w.type==="mousedown"||w.type==="touchstart")?!1:(!w.ctrlKey||w.type==="wheel")&&(!w.button||w.button<=1)})},[$,r,i,o,l,f,c,u,Y]),g("div",{className:"react-flow__renderer",ref:I,style:Ko,children:b})};function vs(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(r>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),i>0&&(n.style.height+=i),t.position.x<0){const o=Math.abs(t.position.x);n.position.x=n.position.x-o,n.style.width+=o,t.position.x=0}if(t.position.y<0){const o=Math.abs(t.position.y);n.position.y=n.position.y-o,n.style.height+=o,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Oc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,i)=>{const o=e.find(a=>a.id===i.id);if(o)switch(o.type){case"select":return r.push({...i,selected:o.selected}),r;case"position":{const a={...i};return typeof o.position<"u"&&(a.position=o.position),typeof o.positionAbsolute<"u"&&(a.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(a.dragging=o.dragging),a.expandParent&&vs(r,a),r.push(a),r}case"dimensions":{const a={...i};return typeof o.dimensions<"u"&&(a.width=o.dimensions.width,a.height=o.dimensions.height),a.expandParent&&vs(r,a),r.push(a),r}case"remove":return r}return r.push(i),r},n)}function qo(e,t){return Oc(e,t)}function Ov(e,t){return Oc(e,t)}const Pt=(e,t)=>({id:e,type:"select",selected:t});function cn(e,t){return e.reduce((n,r)=>{const i=t.includes(r.id);return!r.selected&&i?(r.selected=!0,n.push(Pt(r.id,!0))):r.selected&&!i&&(r.selected=!1,n.push(Pt(r.id,!1))),n},[])}function ws(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Dv=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable}),bs={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},Dc=m.memo(({selectionKeyPressed:e})=>{const t=Ae(),n=m.useRef(0),r=m.useRef(0),i=m.useRef(),[o,a]=m.useState(bs),{userSelectionActive:s,elementsSelectable:l}=xe(Dv,je);if(!l||!(s||e))return null;const u=()=>{a(bs),t.setState({userSelectionActive:!1}),n.current=0,r.current=0};return g("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:v=>{const S=v.target.closest(".react-flow");i.current=S.getBoundingClientRect();const h=ws(v,i.current);a({width:0,height:0,startX:h.x,startY:h.y,x:h.x,y:h.y,draw:!0}),t.setState({userSelectionActive:!0,nodesSelectionActive:!1})},onMouseMove:v=>{if(!e||!o.draw||!i.current)return;const S=ws(v,i.current),h=o.startX??0,b=o.startY??0,E={...o,x:S.x<h?S.x:h,y:S.y<b?S.y:b,width:Math.abs(S.x-h),height:Math.abs(S.y-b)},{nodeInternals:y,edges:_,transform:C,onNodesChange:N,onEdgesChange:I}=t.getState(),D=Array.from(y.values()),$=gc(y,E,C,!1,!0),H=yc($,_).map(Y=>Y.id),Z=$.map(Y=>Y.id);if(n.current!==Z.length){n.current=Z.length;const Y=cn(D,Z);Y.length&&(N==null||N(Y))}if(r.current!==H.length){r.current=H.length;const Y=cn(_,H);Y.length&&(I==null||I(Y))}a(E)},onMouseUp:()=>{t.setState({nodesSelectionActive:n.current>0}),u()},onMouseLeave:()=>{t.setState({nodesSelectionActive:!1}),u()},children:o.draw&&g("div",{className:"react-flow__selection react-flow__container",style:{width:o.width,height:o.height,transform:`translate(${o.x}px, ${o.y}px)`}})})});Dc.displayName="UserSelection";const Fv=e=>({transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive,...pi(Array.from(e.nodeInternals.values()).filter(t=>t.selected))}),kv=e=>{const t=Array.from(e.nodeInternals.values()).filter(n=>n.selected);return pi(t)};function Lv({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ae(),{transformString:i,userSelectionActive:o}=xe(Fv,je),{width:a,height:s,x:l,y:c}=xe(kv,je),u=Ac(),f=m.useRef(null);if(m.useEffect(()=>{var x;n||(x=f.current)==null||x.focus()},[n]),Rc({nodeRef:f}),o||!a||!s)return null;const d=e?x=>{const v=Array.from(r.getState().nodeInternals.values()).filter(S=>S.selected);e(x,v)}:void 0,p=x=>{Object.prototype.hasOwnProperty.call(Wn,x.key)&&u(Wn[x.key])};return g("div",{className:ze(["react-flow__nodesselection","react-flow__container",t]),style:{transform:i},children:g("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:a,height:s,top:c,left:l}})})}var zv=m.memo(Lv);const Bv=e=>e.paneDragging;function Hv({onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:i,onWheel:o}){const a=xe(Bv);return g("div",{className:ze(["react-flow__pane",{dragging:a}]),onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:i,onWheel:o,style:Ko})}const Vv=e=>e.nodesSelectionActive,Fc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,deleteKeyCode:s,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:f,multiSelectionKeyCode:d,zoomActivationKeyCode:p,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:h,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:y,panOnDrag:_,defaultViewport:C,translateExtent:N,minZoom:I,maxZoom:D,preventScrolling:$,onSelectionContextMenu:H,noWheelClassName:Z,noPanClassName:Y,disableKeyboardA11y:w})=>{const T=Ae(),M=xe(Vv),R=Jr(f);Pv({deleteKeyCode:s,multiSelectionKeyCode:d});const O=B=>{t==null||t(B),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},L=o?B=>o(B):void 0,F=a?B=>a(B):void 0;return W($v,{onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyPressed:R,elementsSelectable:x,zoomOnScroll:v,zoomOnPinch:S,panOnScroll:h,panOnScrollSpeed:b,panOnScrollMode:E,zoomOnDoubleClick:y,panOnDrag:_,defaultViewport:C,translateExtent:N,minZoom:I,maxZoom:D,zoomActivationKeyCode:p,preventScrolling:$,noWheelClassName:Z,noPanClassName:Y,children:[e,g(Dc,{selectionKeyPressed:R}),M&&g(zv,{onSelectionContextMenu:H,noPanClassName:Y,disableKeyboardA11y:w}),g(Hv,{onClick:O,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:L,onWheel:F})]})};Fc.displayName="FlowRenderer";var Uv=m.memo(Fc);function Wv(e){return xe(m.useCallback(n=>e?gc(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values()),[e]))}const jv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions}),kc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,updateNodeDimensions:o}=xe(jv,je),a=Wv(e.onlyRenderVisibleElements),s=m.useRef(),l=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(u=>{const f=u.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));o(f)});return s.current=c,c},[]);return m.useEffect(()=>()=>{var c;(c=s==null?void 0:s.current)==null||c.disconnect()},[]),g("div",{className:"react-flow__nodes",style:Ko,children:a.map(c=>{var y,_;let u=c.type||"default";e.nodeTypes[u]||(u="default");const f=e.nodeTypes[u]||e.nodeTypes.default,d=!!(c.draggable||t&&typeof c.draggable>"u"),p=!!(c.selectable||i&&typeof c.selectable>"u"),x=!!(c.connectable||n&&typeof c.connectable>"u"),v=!!(c.focusable||r&&typeof c.focusable>"u"),S=e.nodeExtent?Vo(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,h=(S==null?void 0:S.x)??0,b=(S==null?void 0:S.y)??0,E=Ev({x:h,y:b,width:c.width??0,height:c.height??0,origin:e.nodeOrigin});return g(f,{id:c.id,className:c.className,style:c.style,type:u,data:c.data,sourcePosition:c.sourcePosition||U.Bottom,targetPosition:c.targetPosition||U.Top,hidden:c.hidden,xPos:h,yPos:b,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:d,isSelectable:p,isConnectable:x,isFocusable:v,resizeObserver:l,dragHandle:c.dragHandle,zIndex:((y=c[De])==null?void 0:y.z)??0,isParent:!!((_=c[De])!=null&&_.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel},c.id)})})};kc.displayName="NodeRenderer";var Xv=m.memo(kc);const Yv=[{level:0,isMaxLevel:!0,edges:[]}];function Kv(e,t,n=!1){let r=-1;const i=e.reduce((a,s)=>{var u,f,d,p;const l=uc(s.zIndex);let c=l?s.zIndex:0;return n&&(c=l?s.zIndex:Math.max(((f=(u=t.get(s.source))==null?void 0:u[De])==null?void 0:f.z)||0,((p=(d=t.get(s.target))==null?void 0:d[De])==null?void 0:p.z)||0)),a[c]?a[c].push(s):a[c]=[s],r=c>r?c:r,a},{}),o=Object.entries(i).map(([a,s])=>{const l=+a;return{edges:s,level:l,isMaxLevel:l===r}});return o.length===0?Yv:o}function qv(e,t,n){const r=xe(m.useCallback(i=>e?i.edges.filter(o=>{const a=t.get(o.source),s=t.get(o.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&wv({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:s.width,targetHeight:s.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[e,t]));return Kv(r,t,n)}const Gv={[U.Left]:U.Right,[U.Right]:U.Left,[U.Top]:U.Bottom,[U.Bottom]:U.Top},Lc=({connectionNodeId:e,connectionHandleType:t,connectionLineStyle:n,connectionLineType:r=Rt.Bezier,isConnectable:i,CustomConnectionLineComponent:o})=>{var _,C,N;const{fromNode:a,handleId:s,toX:l,toY:c}=xe(m.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2]}),[e]),je),u=(_=a==null?void 0:a[De])==null?void 0:_.handleBounds;if(!a||!i||!(u!=null&&u[t]))return null;const f=u[t],d=s?f.find(I=>I.id===s):f[0],p=d?d.x+d.width/2:((a==null?void 0:a.width)??0)/2,x=d?d.y+d.height/2:(a==null?void 0:a.height)??0,v=(((C=a==null?void 0:a.positionAbsolute)==null?void 0:C.x)||0)+p,S=(((N=a==null?void 0:a.positionAbsolute)==null?void 0:N.y)||0)+x,h=d==null?void 0:d.position;if(!h)return null;const b=Gv[h];if(o)return g("g",{className:"react-flow__connection",children:g(o,{connectionLineType:r,connectionLineStyle:n,fromNode:a,fromHandle:d,fromX:v,fromY:S,toX:l,toY:c,fromPosition:h,toPosition:b})});let E="";const y={sourceX:v,sourceY:S,sourcePosition:h,targetX:l,targetY:c,targetPosition:b};return r===Rt.Bezier?[E]=hc(y):r===Rt.Step?[E]=po({...y,borderRadius:0}):r===Rt.SmoothStep?[E]=po(y):r===Rt.SimpleBezier?[E]=fc(y):E=`M${v},${S} ${l},${c}`,g("g",{className:"react-flow__connection",children:g("path",{d:E,fill:"none",className:"react-flow__connection-path",style:n})})};Lc.displayName="ConnectionLine";const Jv=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),Zv=({color:e="none",strokeWidth:t=1})=>g("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),xs={[qr.Arrow]:Jv,[qr.ArrowClosed]:Zv};function Qv(e){return m.useMemo(()=>Object.prototype.hasOwnProperty.call(xs,e)?xs[e]:null,[e])}const ew=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const l=Qv(t);return l?g("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0",children:g(l,{color:n,strokeWidth:a})}):null},tw=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((i,o)=>([o.markerStart,o.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const s=go(a,t);r.includes(s)||(i.push({id:s,color:a.color||e,...a}),r.push(s))}}),i),[]).sort((i,o)=>i.id.localeCompare(o.id))},zc=({defaultColor:e,rfId:t})=>{const n=xe(m.useCallback(tw({defaultColor:e,rfId:t}),[e,t]),(r,i)=>!(r.length!==i.length||r.some((o,a)=>o.id!==i[a].id)));return g("defs",{children:n.map(r=>g(ew,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};zc.displayName="MarkerDefinitions";var nw=m.memo(zc);const rw=e=>({connectionNodeId:e.connectionNodeId,connectionHandleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals}),Bc=e=>{const{connectionNodeId:t,connectionHandleType:n,nodesConnectable:r,edgesFocusable:i,elementsSelectable:o,width:a,height:s,connectionMode:l,nodeInternals:c}=xe(rw,je),u=qv(e.onlyRenderVisibleElements,c,e.elevateEdgesOnSelect);if(!a)return null;const{connectionLineType:f,defaultMarkerColor:d,connectionLineStyle:p,connectionLineComponent:x,connectionLineContainerStyle:v}=e,S=t&&n;return W(ye,{children:[u.map(({level:h,edges:b,isMaxLevel:E})=>W("svg",{style:{zIndex:h},width:a,height:s,className:"react-flow__edges react-flow__container",children:[E&&g(nw,{defaultColor:d,rfId:e.rfId}),g("g",{children:b.map(y=>{const[_,C,N]=fs(c.get(y.source)),[I,D,$]=fs(c.get(y.target));if(!N||!$)return null;let H=y.type||"default";e.edgeTypes[H]||(H="default");const Z=e.edgeTypes[H]||e.edgeTypes.default,Y=l===En.Strict?D.target:D.target||D.source,w=ds(C.source,y.sourceHandle||null),T=ds(Y,y.targetHandle||null),M=(w==null?void 0:w.position)||U.Bottom,R=(T==null?void 0:T.position)||U.Top,O=!!(y.focusable||i&&typeof y.focusable>"u");if(!w||!T)return X0(`Couldn't create edge for ${w?"target":"source"} handle id: ${w?y.targetHandle:y.sourceHandle}; edge id: ${y.id}. Help: https://reactflow.dev/error#800`),null;const{sourceX:L,sourceY:F,targetX:B,targetY:G}=vv(_,w,M,I,T,R);return g(Z,{id:y.id,className:ze([y.className,e.noPanClassName]),type:H,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:L,sourceY:F,targetX:B,targetY:G,sourcePosition:M,targetPosition:R,elementsSelectable:o,onEdgeUpdate:e.onEdgeUpdate,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,onClick:e.onEdgeClick,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick,onEdgeUpdateStart:e.onEdgeUpdateStart,onEdgeUpdateEnd:e.onEdgeUpdateEnd,rfId:e.rfId,ariaLabel:y.ariaLabel,isFocusable:O,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth},y.id)})})]},h)),S&&g("svg",{style:v,width:a,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container",children:g(Lc,{connectionNodeId:t,connectionHandleType:n,connectionLineStyle:p,connectionLineType:f,isConnectable:r,CustomConnectionLineComponent:x})})]})};Bc.displayName="EdgeRenderer";var iw=m.memo(Bc);const ow=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function aw({children:e}){const t=xe(ow);return g("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function sw(e){const t=mi(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Hc=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:i,onInit:o,onNodeClick:a,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:x,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:h,connectionLineContainerStyle:b,selectionKeyCode:E,multiSelectionKeyCode:y,zoomActivationKeyCode:_,deleteKeyCode:C,onlyRenderVisibleElements:N,elementsSelectable:I,selectNodesOnDrag:D,defaultViewport:$,translateExtent:H,minZoom:Z,maxZoom:Y,preventScrolling:w,defaultMarkerColor:T,zoomOnScroll:M,zoomOnPinch:R,panOnScroll:O,panOnScrollSpeed:L,panOnScrollMode:F,zoomOnDoubleClick:B,panOnDrag:G,onPaneClick:q,onPaneMouseEnter:X,onPaneMouseMove:te,onPaneMouseLeave:he,onPaneScroll:ie,onPaneContextMenu:ae,onEdgeUpdate:pe,onEdgeContextMenu:j,onEdgeMouseEnter:Me,onEdgeMouseMove:_e,onEdgeMouseLeave:me,edgeUpdaterRadius:Ve,onEdgeUpdateStart:J,onEdgeUpdateEnd:le,noDragClassName:fe,noWheelClassName:P,noPanClassName:A,elevateEdgesOnSelect:k,disableKeyboardA11y:V,nodeOrigin:K,nodeExtent:ue,rfId:oe})=>(sw(o),g(Uv,{onPaneClick:q,onPaneMouseEnter:X,onPaneMouseMove:te,onPaneMouseLeave:he,onPaneContextMenu:ae,onPaneScroll:ie,deleteKeyCode:C,selectionKeyCode:E,multiSelectionKeyCode:y,zoomActivationKeyCode:_,elementsSelectable:I,onMove:n,onMoveStart:r,onMoveEnd:i,zoomOnScroll:M,zoomOnPinch:R,zoomOnDoubleClick:B,panOnScroll:O,panOnScrollSpeed:L,panOnScrollMode:F,panOnDrag:G,defaultViewport:$,translateExtent:H,minZoom:Z,maxZoom:Y,onSelectionContextMenu:x,preventScrolling:w,noDragClassName:fe,noWheelClassName:P,noPanClassName:A,disableKeyboardA11y:V,children:W(aw,{children:[g(iw,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:c,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:h,connectionLineContainerStyle:b,onEdgeUpdate:pe,onlyRenderVisibleElements:N,onEdgeContextMenu:j,onEdgeMouseEnter:Me,onEdgeMouseMove:_e,onEdgeMouseLeave:me,onEdgeUpdateStart:J,onEdgeUpdateEnd:le,edgeUpdaterRadius:Ve,defaultMarkerColor:T,noPanClassName:A,elevateEdgesOnSelect:!!k,disableKeyboardA11y:V,rfId:oe}),g("div",{className:"react-flow__edgelabel-renderer",id:"edgelabel-portal"}),g(Xv,{nodeTypes:e,onNodeClick:a,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:f,onNodeMouseLeave:d,onNodeContextMenu:p,selectNodesOnDrag:D,onlyRenderVisibleElements:N,noPanClassName:A,noDragClassName:fe,disableKeyboardA11y:V,nodeOrigin:K,nodeExtent:ue,rfId:oe})]})}));Hc.displayName="GraphView";var lw=m.memo(Hc);const wo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Sr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:wo,nodeExtent:wo,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:En.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:""},cw=()=>zp((e,t)=>({...Sr,setNodes:n=>{e({nodeInternals:Bi(n,t().nodeInternals)})},setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(i=>({...r,...i}))})},setDefaultNodesAndEdges:(n,r)=>{const i=typeof n<"u",o=typeof r<"u",a=i?Bi(n,new Map):new Map;e({nodeInternals:a,edges:o?r:[],hasDefaultNodes:i,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:i,fitViewOnInit:o,fitViewOnInitDone:a,fitViewOnInitOptions:s,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const f=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(f.transform),p=n.reduce((v,S)=>{const h=i.get(S.id);if(h){const b=Ho(S.nodeElement);!!(b.width&&b.height&&(h.width!==b.width||h.height!==b.height||S.forceUpdate))&&(i.set(h.id,{...h,[De]:{...h[De],handleBounds:{source:ps(".source",S.nodeElement,d,c),target:ps(".target",S.nodeElement,d,c)}},...b}),v.push({id:h.id,type:"dimensions",dimensions:b}))}return v},[]),x=a||o&&!a&&$c(t,{initial:!0,...s});e({nodeInternals:new Map(i),fitViewOnInitDone:x}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,i=!1)=>{const{onNodesChange:o,nodeInternals:a,hasDefaultNodes:s}=t();if(s||o){const l=n.map(c=>{const u={id:c.id,type:"position",dragging:i};return r&&(u.positionAbsolute=c.positionAbsolute,u.position=c.position),u});if(l!=null&&l.length){if(s){const c=qo(l,Array.from(a.values())),u=Bi(c,a);e({nodeInternals:u})}o==null||o(l)}}},addSelectedNodes:n=>{const{multiSelectionActive:r,nodeInternals:i,edges:o}=t();let a,s=null;r?a=n.map(l=>Pt(l,!0)):(a=cn(Array.from(i.values()),n),s=cn(o,[])),xr({changedNodes:a,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:i,nodeInternals:o}=t();let a,s=null;r?a=n.map(l=>Pt(l,!0)):(a=cn(i,n),s=cn(Array.from(o.values()),[])),xr({changedNodes:s,changedEdges:a,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{nodeInternals:i,edges:o}=t(),a=n||Array.from(i.values()),s=r||o,l=a.map(u=>(u.selected=!1,Pt(u.id,!1))),c=s.map(u=>Pt(u.id,!1));xr({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:i}=t();r==null||r.scaleExtent([n,i]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:i}=t();r==null||r.scaleExtent([i,n]),e({maxZoom:n})},setTranslateExtent:n=>{const{d3Zoom:r}=t();r==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{nodeInternals:n,edges:r}=t(),o=Array.from(n.values()).filter(s=>s.selected).map(s=>Pt(s.id,!1)),a=r.filter(s=>s.selected).map(s=>Pt(s.id,!1));xr({changedNodes:o,changedEdges:a,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(i=>{i.positionAbsolute=Vo(i.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},cancelConnection:()=>e({connectionNodeId:Sr.connectionNodeId,connectionHandleId:Sr.connectionHandleId}),reset:()=>e({...Sr})})),Vc=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=cw()),g(z0,{value:t.current,children:e})};Vc.displayName="ReactFlowProvider";const Uc=({children:e})=>{let t=!0;try{Ae()}catch{t=!1}return t?g(ye,{children:e}):g(Vc,{children:e})};Uc.displayName="ReactFlowWrapper";function Es(e,t){return m.useRef(null),m.useMemo(()=>t(e),[e])}const uw={input:Ec,default:yo,output:_c,group:Yo},dw={default:Gr,straight:jo,step:Wo,smoothstep:hi,simplebezier:Uo},fw=[0,0],hw=[15,15],pw={x:0,y:0,zoom:1},mw={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Wc=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:o=uw,edgeTypes:a=dw,onNodeClick:s,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:f,onMoveEnd:d,onConnect:p,onConnectStart:x,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:h,onNodeMouseEnter:b,onNodeMouseMove:E,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:C,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:D,onNodesDelete:$,onEdgesDelete:H,onSelectionChange:Z,onSelectionDragStart:Y,onSelectionDrag:w,onSelectionDragStop:T,onSelectionContextMenu:M,connectionMode:R=En.Strict,connectionLineType:O=Rt.Bezier,connectionLineStyle:L,connectionLineComponent:F,connectionLineContainerStyle:B,deleteKeyCode:G="Backspace",selectionKeyCode:q="Shift",multiSelectionKeyCode:X="Meta",zoomActivationKeyCode:te="Meta",snapToGrid:he=!1,snapGrid:ie=hw,onlyRenderVisibleElements:ae=!1,selectNodesOnDrag:pe=!0,nodesDraggable:j,nodesConnectable:Me,nodesFocusable:_e,nodeOrigin:me=fw,edgesFocusable:Ve,elementsSelectable:J,defaultViewport:le=pw,minZoom:fe=.5,maxZoom:P=2,translateExtent:A=wo,preventScrolling:k=!0,nodeExtent:V,defaultMarkerColor:K="#b1b1b7",zoomOnScroll:ue=!0,zoomOnPinch:oe=!0,panOnScroll:ne=!1,panOnScrollSpeed:se=.5,panOnScrollMode:ge=mn.Free,zoomOnDoubleClick:Se=!0,panOnDrag:Xe=!0,onPaneClick:we,onPaneMouseEnter:Ne,onPaneMouseMove:Ye,onPaneMouseLeave:Ze,onPaneScroll:Fe,onPaneContextMenu:Nt,children:Ee,onEdgeUpdate:Ce,onEdgeContextMenu:Qe,onEdgeDoubleClick:Bt,onEdgeMouseEnter:mt,onEdgeMouseMove:gi,onEdgeMouseLeave:yi,onEdgeUpdateStart:Ke,onEdgeUpdateEnd:at,edgeUpdaterRadius:ur=10,onNodesChange:vi,onEdgesChange:iu,noDragClassName:ou="nodrag",noWheelClassName:au="nowheel",noPanClassName:Jo="nopan",fitView:su=!1,fitViewOptions:lu,connectOnClick:cu=!0,attributionPosition:uu,proOptions:du,defaultEdgeOptions:fu,elevateEdgesOnSelect:hu=!1,disableKeyboardA11y:Zo=!1,style:pu,id:Qo,...mu},gu)=>{const yu=Es(o,xv),vu=Es(a,yv),wi=Qo||"1";return g("div",{...mu,style:{...pu,...mw},ref:gu,className:ze(["react-flow",i]),"data-testid":"rf__wrapper",id:Qo,children:W(Uc,{children:[g(lw,{onInit:c,onMove:u,onMoveStart:f,onMoveEnd:d,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:b,onNodeMouseMove:E,onNodeMouseLeave:y,onNodeContextMenu:_,onNodeDoubleClick:C,nodeTypes:yu,edgeTypes:vu,connectionLineType:O,connectionLineStyle:L,connectionLineComponent:F,connectionLineContainerStyle:B,selectionKeyCode:q,deleteKeyCode:G,multiSelectionKeyCode:X,zoomActivationKeyCode:te,onlyRenderVisibleElements:ae,selectNodesOnDrag:pe,defaultViewport:le,translateExtent:A,minZoom:fe,maxZoom:P,preventScrolling:k,zoomOnScroll:ue,zoomOnPinch:oe,zoomOnDoubleClick:Se,panOnScroll:ne,panOnScrollSpeed:se,panOnScrollMode:ge,panOnDrag:Xe,onPaneClick:we,onPaneMouseEnter:Ne,onPaneMouseMove:Ye,onPaneMouseLeave:Ze,onPaneScroll:Fe,onPaneContextMenu:Nt,onSelectionContextMenu:M,onEdgeUpdate:Ce,onEdgeContextMenu:Qe,onEdgeDoubleClick:Bt,onEdgeMouseEnter:mt,onEdgeMouseMove:gi,onEdgeMouseLeave:yi,onEdgeUpdateStart:Ke,onEdgeUpdateEnd:at,edgeUpdaterRadius:ur,defaultMarkerColor:K,noDragClassName:ou,noWheelClassName:au,noPanClassName:Jo,elevateEdgesOnSelect:hu,rfId:wi,disableKeyboardA11y:Zo,nodeOrigin:me,nodeExtent:V}),g(cv,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:x,onConnectEnd:v,onClickConnectStart:S,onClickConnectEnd:h,nodesDraggable:j,nodesConnectable:Me,nodesFocusable:_e,edgesFocusable:Ve,elementsSelectable:J,minZoom:fe,maxZoom:P,nodeExtent:V,onNodesChange:vi,onEdgesChange:iu,snapToGrid:he,snapGrid:ie,connectionMode:R,translateExtent:A,connectOnClick:cu,defaultEdgeOptions:fu,fitView:su,fitViewOptions:lu,onNodesDelete:$,onEdgesDelete:H,onNodeDragStart:N,onNodeDrag:I,onNodeDragStop:D,onSelectionDrag:w,onSelectionDragStart:Y,onSelectionDragStop:T,noPanClassName:Jo,nodeOrigin:me,rfId:wi}),g(sv,{onSelectionChange:Z}),Ee,g(H0,{proOptions:du,position:uu}),g(pv,{rfId:wi,disableKeyboardA11y:Zo})]})})});Wc.displayName="ReactFlow";function gw(){const e=Ae();return m.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),i=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${t}"]`);i&&requestAnimationFrame(()=>r([{id:t,nodeElement:i,forceUpdate:!0}]))},[])}function jc(e){return t=>{const[n,r]=m.useState(t),i=m.useCallback(o=>r(a=>e(o,a)),[]);return[n,r,i]}}const yw=jc(qo),vw=jc(Ov),Xc=({id:e,x:t,y:n,width:r,height:i,style:o,color:a,strokeColor:s,strokeWidth:l,className:c,borderRadius:u,shapeRendering:f,onClick:d})=>{const{background:p,backgroundColor:x}=o||{},v=a||p||x;return g("rect",{className:ze(["react-flow__minimap-node",c]),x:t,y:n,rx:u,ry:u,width:r,height:i,fill:v,stroke:s,strokeWidth:l,shapeRendering:f,onClick:d?S=>d(S,e):void 0})};Xc.displayName="MiniMapNode";var ww=m.memo(Xc);const bw=200,xw=150,Ew=e=>{const t=Array.from(e.nodeInternals.values()),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?W0(pi(t),n):n,rfId:e.rfId}},Vi=e=>e instanceof Function?e:()=>e,Sw="react-flow__minimap-desc";function Yc({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a=2,maskColor:s="rgb(240, 240, 240, 0.6)",position:l="bottom-right",onClick:c,onNodeClick:u,pannable:f=!1,zoomable:d=!1}){const p=Ae(),x=m.useRef(null),{boundingRect:v,viewBB:S,nodes:h,rfId:b}=xe(Ew,je),E=(e==null?void 0:e.width)??bw,y=(e==null?void 0:e.height)??xw,_=Vi(r),C=Vi(n),N=Vi(i),I=v.width/E,D=v.height/y,$=Math.max(I,D),H=$*E,Z=$*y,Y=5*$,w=v.x-(H-v.width)/2-Y,T=v.y-(Z-v.height)/2-Y,M=H+Y*2,R=Z+Y*2,O=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",L=`${Sw}-${b}`,F=m.useRef(0);F.current=$,m.useEffect(()=>{if(x.current){const q=tt(x.current),X=ie=>{const{transform:ae,d3Selection:pe,d3Zoom:j}=p.getState();if(ie.sourceEvent.type!=="wheel"||!pe||!j)return;const Me=-ie.sourceEvent.deltaY*(ie.sourceEvent.deltaMode===1?.05:ie.sourceEvent.deltaMode?1:.002)*10,_e=ae[2]*Math.pow(2,Me);j.scaleTo(pe,_e)},te=ie=>{const{transform:ae,d3Selection:pe,d3Zoom:j}=p.getState();if(ie.sourceEvent.type!=="mousemove"||!pe||!j)return;const Me={x:ae[0]-ie.sourceEvent.movementX*F.current*Math.max(1,ae[2]),y:ae[1]-ie.sourceEvent.movementY*F.current*Math.max(1,ae[2])},_e=Dt.translate(Me.x,Me.y).scale(ae[2]);j.transform(pe,_e)},he=rc().on("zoom",f?te:null).on("zoom.wheel",d?X:null);return q.call(he),()=>{q.on("zoom",null)}}},[f,d]);const B=c?q=>{const X=st(q);c(q,{x:X[0],y:X[1]})}:void 0,G=u?(q,X)=>{const te=p.getState().nodeInternals.get(X);u(q,te)}:void 0;return g(Bo,{position:l,style:e,className:ze(["react-flow__minimap",t]),children:W("svg",{width:E,height:y,viewBox:`${w} ${T} ${M} ${R}`,role:"img","aria-labelledby":L,ref:x,onClick:B,children:[g("title",{id:L,children:"React Flow mini map"}),h.map(q=>{var X,te;return g(ww,{x:((X=q.positionAbsolute)==null?void 0:X.x)??0,y:((te=q.positionAbsolute)==null?void 0:te.y)??0,width:q.width,height:q.height,style:q.style,className:N(q),color:_(q),borderRadius:o,strokeColor:C(q),strokeWidth:a,shapeRendering:O,onClick:G,id:q.id},q.id)}),g("path",{className:"react-flow__minimap-mask",d:`M${w-Y},${T-Y}h${M+Y*2}v${R+Y*2}h${-M-Y*2}z
        M${S.x},${S.y}h${S.width}v${S.height}h${-S.width}z`,fill:s,fillRule:"evenodd"})]})})}Yc.displayName="MiniMap";var _w=m.memo(Yc);function Cw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:g("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Mw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:g("path",{d:"M0 0h32v4.2H0z"})})}function Nw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:g("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Tw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Pw(){return g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:g("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const Hn=({children:e,className:t,...n})=>g("button",{type:"button",className:ze(["react-flow__controls-button",t]),...n,children:e});Hn.displayName="ControlButton";const Rw=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,Kc=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:l,className:c,children:u,position:f="bottom-left"})=>{const d=Ae(),[p,x]=m.useState(!1),v=xe(Rw),{zoomIn:S,zoomOut:h,fitView:b}=mi();if(m.useEffect(()=>{x(!0)},[]),!p)return null;const E=()=>{S(),o==null||o()},y=()=>{h(),a==null||a()},_=()=>{b(i),s==null||s()},C=()=>{d.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),l==null||l(!v)};return W(Bo,{className:ze(["react-flow__controls",c]),position:f,style:e,children:[t&&W(ye,{children:[g(Hn,{onClick:E,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:g(Cw,{})}),g(Hn,{onClick:y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:g(Mw,{})})]}),n&&g(Hn,{className:"react-flow__controls-fitview",onClick:_,title:"fit view","aria-label":"fit view",children:g(Nw,{})}),r&&g(Hn,{className:"react-flow__controls-interactive",onClick:C,title:"toggle interactivity","aria-label":"toggle interactivity",children:v?g(Pw,{}):g(Tw,{})}),u]})};Kc.displayName="Controls";var Aw=m.memo(Kc),it;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(it||(it={}));function Iw({color:e,dimensions:t,lineWidth:n}){return g("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function $w({color:e,radius:t}){return g("circle",{cx:t,cy:t,r:t,fill:e})}const Ow={[it.Dots]:"#91919a",[it.Lines]:"#eee",[it.Cross]:"#e2e2e2"},Dw={[it.Dots]:1,[it.Lines]:1,[it.Cross]:6},Fw=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function qc({variant:e=it.Dots,gap:t=20,size:n,lineWidth:r=1,color:i,style:o,className:a}){const s=m.useRef(null),{transform:l,patternId:c}=xe(Fw,je),u=i||Ow[e],f=n||Dw[e],d=e===it.Dots,p=e===it.Cross,x=Array.isArray(t)?t:[t,t],v=[x[0]*l[2]||1,x[1]*l[2]||1],S=f*l[2],h=p?[S,S]:v,b=d?[S/2,S/2]:[h[0]/2,h[1]/2];return W("svg",{className:ze(["react-flow__background",a]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:s,children:[g("pattern",{id:c,x:l[0]%v[0],y:l[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${b[0]},-${b[1]})`,children:d?g($w,{color:u,radius:S/2}):g(Iw,{dimensions:h,color:u,lineWidth:r})}),g("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${c})`})]})}qc.displayName="Background";var kw=m.memo(qc);const un=Rs(),bo=e=>`${e.sourceEntity}_${e.name}`,Lw=e=>`${e.targetEntity}_${e.targetName}`,Go=e=>`entity_er_node_id_${e.id}`,xo=(e,t)=>`${Go(e)}_${t.id}`,Gc=e=>e.type===ai.Lookup&&e.relationType===Kt.ManyToOne,Jc=e=>e.type===ai.Lookup?"green":"red",zw=22,jn=18,Bw=40,Hw=({entity:e,relation:t,passive:n})=>{const r=mi(),i=gw(),[o,a]=m.useState(Number.MAX_SAFE_INTEGER);return m.useEffect(()=>{var s,l;if(n&&Gc(t))a(Bw/2-jn/2);else{const c=(s=document.getElementById(Go(e)))==null?void 0:s.getClientRects()[0],u=(l=document.getElementById(xo(e,t)))==null?void 0:l.getClientRects()[0],f=((u==null?void 0:u.top)??0)-((c==null?void 0:c.top)??0);a(f)}setTimeout(()=>i(e.name))},[e,n,r,t,i]),{top:o,left:n?-jn:"auto",right:n?"auto":-jn}},Vw=({relation:e,passive:t})=>{const[n,r]=m.useState("relation-one-many");return m.useEffect(()=>{if(t)switch(e.relationType){case Kt.ManyToMany:r("relation-one-many");break;case Kt.ManyToOne:case Ln.ManyToOne:case Ln.OneToOne:r("relation-one-one");break}else switch(e.relationType){case Kt.ManyToMany:case Kt.ManyToOne:case Ln.ManyToOne:r("relation-one-many");break;case Ln.OneToOne:r("relation-one-one");break}},[t,e.relationType]),{icon:n,color:Jc(e)}},Ss=({data:{entity:e},relation:t,passive:n})=>{const r=n?Lw(t.meta):bo(t.meta),{top:i,left:o,right:a}=Hw({entity:e.meta,relation:t.meta,passive:n}),{icon:s,color:l}=Vw({relation:t.meta,passive:n});return g(ir,{className:Uw.wrapper,id:r,type:n?"target":"source",position:n?U.Left:U.Right,style:{left:o,right:a,top:i+zw/2},onConnect:c=>console.log("handle onConnect",c),isConnectable:!1,children:g("span",{style:{color:l,transform:n?"rotateY(0deg)":"rotateY(180deg)"},children:g(Ad,{type:s})})},t.meta.id)},Uw={wrapper:re("height:",jn,"px!important;width:",jn,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},Ww=e=>{const{data:{entity:t,passiveEntityRelations:n}}=e;return W(ye,{children:[t.entityRelations.map(r=>g(Ss,{...e,passive:!1,relation:r},r.meta.id)),n.map(r=>g(Ss,{...e,passive:!0,relation:r},r.meta.id))]})},jw=({data:{entity:e}})=>W("div",{className:jt(dt.section),children:[g(Ue.Title,{className:jt(dt.sectionTitle),level:5,children:"字段"}),Q.isEmpty(e.entityFields)?g(Qu,{description:"暂无字段"}):e.entityFields.map(t=>W("div",{className:jt(dt.sectionItem),children:[W(Yn,{size:"small",children:[W(Ue.Text,{children:[t.meta.description,"(",t.meta.name,")"]}),t.meta.required&&g(Ue.Text,{type:"danger",children:"*"})]}),g(Ue.Text,{children:t.meta.type})]},t.meta.name))]}),Xw=({data:{entity:e,passiveEntityRelations:t}})=>{const n=t.filter(i=>!Gc(i.meta)),r=[...e.entityRelations,...n];return Q.isEmpty(r)?null:W("div",{className:jt(dt.section),children:[g(Ue.Title,{className:jt(dt.sectionTitle),level:5,children:"关系"}),e.entityRelations.map(i=>W("div",{className:jt(dt.sectionItem),id:xo(e.meta,i.meta),children:[g(Yn,{size:"small",children:W(Ue.Text,{children:[i.meta.description,"(",i.meta.name,")"]})}),g(Ue.Text,{children:i.meta.type})]},i.meta.name)),n.map(i=>W("div",{className:jt(dt.sectionItem),id:xo(e.meta,i.meta),children:[g(Yn,{size:"small",children:W(Ue.Text,{disabled:!0,children:[i.meta.targetDescription,"(",i.meta.targetName,")"]})}),g(Ue.Text,{disabled:!0,children:i.meta.type})]},i.meta.targetName))]})},Yw=e=>{const{data:{entity:t}}=e,n=Fs();return W(ye,{children:[g(Ww,{...e}),W("div",{id:Go(t.meta),style:{"--header-bg-color":n.colorPrimary},className:dt.wrapper,children:[g("div",{className:dt.header,children:g(Ue.Title,{level:5,children:t.meta.title})}),W("div",{className:dt.body,children:[g(jw,{...e}),g(Xw,{...e})]}),W(Qr,{className:dt.footer,children:[g(Xn,{span:12,children:g(nt,{block:!0,type:"link",onClick:()=>un.emit("onClickEditEntity",t.meta.id),children:"编辑"})}),g(Xn,{span:12,children:g(nt,{block:!0,type:"text",danger:!0,onClick:()=>un.emit("onDelete",t.meta.id),children:"删除"})})]})]})]})},dt={wrapper:re({name:"b271j2",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:1px solid rgba(0,0,0,.1)"}),header:re({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:re({name:"1jb4mpp",styles:"padding:4px 0"}),section:re("",""),sectionTitle:re({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:re({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:re({name:"3rejxs",styles:"border-top:1px solid rgba(0,0,0,.1)"})},Kw={EntityNode:m.memo(Yw)},qw=()=>{const{app:e}=ft(),t=e.entityRelationsByTargetEntityNameMap,[n,r,i]=yw(e.entities.map(a=>({id:a.meta.name,type:"EntityNode",data:{entity:a,passiveEntityRelations:t[a.meta.name]||[]},position:a.meta.position}))),o=m.useCallback(a=>{i(a);const s=qo(a,n),l=Q.keyBy(a.filter(u=>u.type==="position"),"id"),c=Q.keyBy(s,u=>u.id);rt(()=>{e.entities.forEach(u=>{var f;Reflect.has(l,u.meta.name)&&u.updateMeta({...u.meta,position:((f=c[u.meta.name])==null?void 0:f.positionAbsolute)??u.meta.position})})})},[e,n,i]);return m.useEffect(()=>{r(a=>{const s=Q.keyBy(a,l=>l.id);return e.entities.map(l=>s[l.meta.name]?{...s[l.meta.name],data:{entity:l,passiveEntityRelations:t[l.meta.name]||[]},position:l.meta.position}:{id:l.meta.name,type:"EntityNode",data:{entity:l,passiveEntityRelations:t[l.meta.name]||[]},position:l.meta.position})})},[e.entities,t,r]),{nodes:n,onNodesChange:o}},Gw=({onClickEditEntity:e})=>{const t=Fs(),{app:n,appManager:r}=ft(),i=[...r.entityRelationMap.values()],{nodes:o,onNodesChange:a}=qw(),[s,l,c]=vw(i.map(f=>({id:f.meta.id,source:f.meta.sourceEntity,target:f.meta.targetEntity,sourceHandle:bo(f.meta),targetHandle:bo(f.meta),style:{stroke:Jc(f.meta),zIndex:999999}}))),u=m.useCallback(f=>l(d=>mc({...f,animated:!0,style:{stroke:"green"}},d)),[l]);return m.useEffect(()=>(un.on("onDelete",n.deleteEntity),un.on("onClickEditEntity",e),()=>{un.off("onDelete",n.deleteEntity),un.off("onClickEditEntity",e)}),[n.deleteEntity,e]),g("div",{className:Zw.wrapper,children:W(Wc,{nodes:o,edges:s,onNodesChange:a,onEdgesChange:c,onConnect:u,style:{background:"#fff"},nodeTypes:Kw,connectionLineStyle:{stroke:t.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[g(kw,{variant:it.Cross,gap:10,size:2}),g(Aw,{}),g(_w,{pannable:!0,zoomable:!0})]})})},Jw=kt(Gw),Zw={wrapper:re({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},Qw=({onClickEditEntity:e})=>{const{app:t}=ft(),n=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(r,i)=>W(Yn,{size:"small",children:[g(nt,{size:"small",type:"link",onClick:()=>e(i.id),children:"编辑"}),g(nt,{size:"small",danger:!0,type:"text",onClick:()=>t.deleteEntity(i.id),children:"删除"})]})}];return g("div",{className:tb.wrapper,children:g(ks,{rowKey:"id",size:"small",columns:n,dataSource:t.entities.map(r=>r.meta)})})},eb=kt(Qw),tb={wrapper:re("","")},Zc=({onOk:e,onCancel:t,open:n,mode:r,form:i})=>g(ye,{children:g(ed,{title:r==="create"?"创建数据模型":"编辑数据模型",onCancel:()=>{t(),i.resetFields()},onOk:async()=>{await i.validateFields(),e(i.getFieldsValue()),i.resetFields()},open:n,destroyOnClose:!0,children:W(Wt,{form:i,labelCol:{style:{width:"50px"}},children:[g(Wt.Item,{label:"ID",name:"id",hidden:!0,children:g(kn,{})}),g(Wt.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入数据模型名称"}],children:g(kn,{})}),g(Wt.Item,{label:"标识",name:"name",rules:[{required:!0,message:"请输入数据模型标识"},{pattern:/^[a-zA-Z]\w+$/,message:"只能由英文、数字、下划线组成，且必须英文开头"}],children:g(kn,{disabled:r==="edit"})}),g(Wt.Item,{label:"描述",name:"description",children:g(kn,{})})]})})}),Qc=$e(),eu=({children:e})=>{const[t,n]=m.useState(null);return Ds(()=>{setTimeout(()=>{n(document.getElementById(Qc))})}),t?Is.createPortal(e,t):null},nb=()=>g("span",{id:Qc}),rb=({entity:e,onEditEntity:t})=>W(ye,{children:[g(eu,{children:g(nt,{type:"link",onClick:()=>t(e),children:"编辑"})}),g("div",{className:ob.wrapper,children:W(ji,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[g(xt,{label:"名称",fieldProps:{value:e.title}}),g(xt,{label:"标识",fieldProps:{value:e.name}}),g(xt,{label:"描述",fieldProps:{value:e.description}})]})})]}),ib=kt(rb),ob={wrapper:re({name:"10rtstj",styles:"padding:16px"})},ab=e=>{switch(e){case z.Text:case z.LongText:return W(ye,{children:[g(Pn,{name:["config","max"],label:"最大长度",max:255,fieldProps:{precision:0}}),g(Pn,{name:["config","min"],label:"最小长度",min:0,fieldProps:{precision:0}})]});case z.Enum:return W(ye,{children:[g(hl,{name:["config","enumCode"],label:"枚举类型",placeholder:"请选择枚举类型",options:tu,allowClear:!1,rules:[{required:!0,message:"请选择枚举类型"}]}),g(qi,{name:["config","multiple"],label:"多选"})]});case z.Number:return W(ye,{children:[g(Pn,{name:["config","max"],label:"最大值",max:255,fieldProps:{precision:0}}),g(Pn,{name:["config","min"],label:"最小值",min:0,fieldProps:{precision:0}}),g(Pn,{name:["config","precision"],label:"小数位数",min:0,fieldProps:{precision:0}})]});case z.AutoNumber:return g(ye,{children:g(xt,{name:["config","format"],label:"显示格式",placeholder:"请输入显示格式"})});case z.Image:return g(ye,{children:g(qi,{name:["config","multiple"],label:"多选"})});case z.PhoneNumber:case z.URL:case z.Email:case z.Date:case z.DateTime:default:return null}},tu=Object.values(z).map(e=>({label:Te.getEntityFieldTypeLabel(e),value:e})),sb=(e,t)=>{const{app:n,appManager:r}=ft(),[i]=ji.useForm(),o=ji.useWatch("type",i),[a,s]=m.useState(""),[l,c]=m.useState(""),[u,f]=m.useState("detail"),[d,p]=m.useState(!1);return m.useImperativeHandle(t,()=>({create:({entityId:x})=>{s(x),c(""),f("create"),p(!0)},edit:({entityId:x,fieldId:v})=>{s(x),c(v),f("edit"),i.setFieldsValue(r.entityFieldMap.get(v).meta),p(!0)},showDetail:({entityId:x,fieldId:v})=>{s(x),c(v),f("detail"),i.setFieldsValue(r.entityFieldMap.get(v).meta),p(!0)}}),[r.entityFieldMap,i]),W(td,{readonly:u==="detail",title:"新建字段",width:500,form:i,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:d,onOpenChange:p,onFinish:async x=>{switch(u){case"create":{const v=n.entityMap[a];Jt.create({...x,id:$e()},v);break}case"edit":{n.entityMap[a].entityFields.forEach(S=>{S.meta.id===l&&S.updateMeta({...S.meta,...x})});break}}return!0},children:[g(xt,{hidden:!0,name:"id",label:"字段id"}),g(hl,{name:"type",label:"字段类型",placeholder:"请选择字段类型",options:tu,allowClear:!1,rules:[{required:!0,message:"请选择字段类型"}]}),g(xt,{name:"title",label:"字段名称",placeholder:"请输入字段类型",rules:[{required:!0,message:"请输入字段名称"}]}),g(xt,{name:"name",label:"字段标识",placeholder:"请输入字段标识",rules:[{required:!0,message:"请输入字段标识"}]}),g(xt,{name:"description",label:"字段描述",placeholder:"请输入字段描述"}),o!==z.AutoNumber&&g(qi,{name:"required",label:"必填"}),ab(o)]})},lb=m.forwardRef(sb),cb=({entityId:e})=>{const t=m.useRef(null),{app:n}=ft(),r=n.entityMap[e],i=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,a)=>W(Yn,{size:"small",children:[g(nt,{size:"small",type:"link",onClick:()=>{var s;(s=t.current)==null||s.edit({entityId:r.meta.id,fieldId:a.id})},children:"编辑"}),g(nt,{size:"small",type:"link",onClick:()=>{var s;(s=t.current)==null||s.showDetail({entityId:r.meta.id,fieldId:a.id})},children:"详情"}),g(nt,{size:"small",danger:!0,type:"text",onClick:()=>{r.deleteEntityField(a.id)},children:"删除"})]})}];return W(ye,{children:[g(lb,{ref:t}),g(eu,{children:g(nt,{type:"link",onClick:()=>{var o;(o=t.current)==null||o.create({entityId:r.meta.id})},children:"添加字段"})}),g("div",{children:g(ks,{size:"small",dataSource:r.entityFields.map(o=>o.meta),rowKey:"id",columns:i,pagination:!1})})]})},Ui=kt(cb),nu=()=>{const[e,{setFalse:t,setTrue:n}]=Zf(!1),[r]=Wt.useForm(),{app:i}=ft();return{setTrue:n,setFalse:t,onSubmitEntity:a=>{if(a.id)i.entityMap[a.id].updateMeta(a);else{const s=Math.max(...i.entities.map(l=>l.meta.position.x));Te.create({...a,id:$e(),position:{x:s+400,y:100}},i)}t()},form:r,open:e}},ub=[{key:"List",tab:"列表"},{key:"ER",tab:"ER图"}],db=()=>{const[e,t]=Nl({activeTabKey:"List"}),[n,r]=m.useState("edit"),{open:i,setFalse:o,setTrue:a,onSubmitEntity:s,form:l}=nu(),c=zt(),u=en(),f=p=>{c(yn(Be.Entity,{entityId:p,appId:u.appId}))},d=()=>{r("create"),a()};return W(ye,{children:[g(Zc,{onOk:s,onCancel:o,open:i,mode:n,form:l}),g("div",{className:_s.wrapper,children:g(Rr,{size:"small",tabProps:{size:"small"},className:_s.card,title:g("span",{children:"数据模型"}),tabList:ub,tabBarExtraContent:g(nt,{type:"link",onClick:d,children:"添加模型"}),activeTabKey:e.activeTabKey,onTabChange:p=>t({activeTabKey:p}),children:e.activeTabKey==="List"?g(eb,{onClickEditEntity:f}):g(Jw,{onClickEditEntity:f})})})]})},_s={wrapper:re({name:"13udsys",styles:"height:100%"}),card:re({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},fb=[{key:"Base",tab:"基础信息"},{key:"Field",tab:"字段和关系"},{key:"Method",tab:"方法"},{key:"View",tab:"视图"}],hb=()=>{const[e,t]=Nl({activeTabKey:"Base"}),{app:n}=ft(),{entityId:r}=en(),i=n.entityMap[r],{open:o,setFalse:a,setTrue:s,onSubmitEntity:l,form:c}=nu(),u=f=>{switch(f){case"Base":return g(ib,{entity:i.meta,onEditEntity:()=>{c.setFieldsValue(i.meta),s()}});case"Field":return g(Ui,{entityId:i.meta.id});case"Method":return g(Ui,{entityId:i.meta.id});case"View":return g(Ui,{entityId:i.meta.id});default:return g("div",{children:"未知模块"})}};return W(ye,{children:[g(ye,{children:g(Zc,{onOk:l,onCancel:a,open:o,mode:"edit",form:c})}),g("div",{className:Cs.wrapper,children:g(Rr,{size:"small",tabProps:{size:"small"},title:`${i.meta.title}(${i.meta.name})`,tabList:fb,tabBarExtraContent:g(nb,{}),className:Cs.card,activeTabKey:e.activeTabKey,onTabChange:f=>t({activeTabKey:f}),children:u(e.activeTabKey)})})]})},pb=kt(hb),Cs={wrapper:re({name:"13udsys",styles:"height:100%"}),card:re({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},mb=({file:e,children:t})=>g(nd,{value:e,children:g(rd,{children:g(id,{backend:od,children:g(ad,{children:t})})})}),ru=m.forwardRef(({onLoad:e,src:t},n)=>g("iframe",{ref:n,className:gb.iframe,src:t,onLoad:e}));ru.displayName="SimulatorPC";const gb={iframe:re`
    height: 100%;
    width: 100%;
    border: none;
    display: block;
  `},yb=()=>{const{pageId:e,appId:t}=en(),{appManager:n}=ft(),r=n.pageMap.get(e),i=zt();return m.useLayoutEffect(()=>{var a;const o=Q.head(n.app.pages);!r&&o&&i(yn(Be.PAGE,{appId:t,pageId:(a=o.meta)==null?void 0:a.id}),{replace:!0})},[t,n.app.pages,i,r]),g(Qr,{justify:"center",align:"middle",className:Ms.page,children:g(Xn,{span:24,className:Ms.container,children:r&&g(sd.Provider,{value:ld,children:g(mb,{file:r,children:g(ru,{src:"/simulator/pc/index.html"})})})})})},vb=kt(yb),Ms={page:re({name:"13udsys",styles:"height:100%"}),container:re({name:"13udsys",styles:"height:100%"})},wb=()=>{const e=No([{path:Be.APPS,element:g(Oa,{})},{path:Be.APP,element:g(xp,{}),children:[{path:Be.PAGE,element:g(vb,{})},{path:Be.Entities,element:g(db,{})},{path:Be.Entity,element:g(pb,{})}]},{path:"/",element:g(Oa,{})}]);return g(ye,{children:e})},bb=()=>g(m.Suspense,{fallback:g(Nd,{}),children:g(cd,{locale:ud,children:g(dd,{children:g(Kf,{children:g(wb,{})})})})});fd.createRoot(document.getElementById("root")).render(g(Oe.StrictMode,{children:g(bb,{})}));
