var Qa=Object.defineProperty;var Za=(e,n,t)=>n in e?Qa(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var A=(e,n,t)=>(Za(e,typeof n!="symbol"?n+"":n,t),t);import{I as ei,H as ti,F as ni,C as ri,S as ai,r as u,a as Jn,c as an,R as re,b as ii,d as wt,g as oi,m as si,e as li,f as ci,P as di,_ as ar,u as ui,h as ir,i as fn,D as fi,j as Wn,A as _r,k as ce,l as s,n as R,o as pi,p as Dn,q as Vn,s as hi,t as mi,v as Gt,w as $r,x as qn,y as Dr,z as gi,B as yi,E as Ar,G as N,J as bi,K as vi,L as wi,M as Ei,N as xi,O as Kn,Q,T as pn,U as hn,V as Lr,W as kr,X as Si,Y as Se,Z as oe,$ as B,a0 as T,a1 as Mi,a2 as An,a3 as on,a4 as ye,a5 as or,a6 as zr,a7 as sn,a8 as Y,a9 as jr,aa as Ci,ab as Br,ac as Fi,ad as Ni,ae as Ri,af as Ti,ag as Hr,ah as Ur,ai as Ht,aj as Jr,ak as G,al as Te,am as At,an as Wr,ao as Oi,ap as xe,aq as Ke,ar as Vr,as as qr,at as be,au as Kr,av as De,aw as Xr,ax as te,ay as Gr,az as Yr,aA as Qr,aB as nn,aC as Zr,aD as Pi,aE as Ii,aF as Lt,aG as ea,aH as _i,aI as $i,aJ as Di,aK as ta,aL as Ai,aM as Li,aN as ki,aO as zi,aP as ji,aQ as Bi,aR as Hi,aS as Ui,aT as na,aU as st,aV as Ut,aW as Ji,aX as Wi,aY as ra,aZ as Vi,a_ as Ln,a$ as qi,b0 as Ki,b1 as Xi,b2 as Gi,b3 as Yi,b4 as Qi,b5 as Zi,b6 as eo,b7 as to,b8 as no,b9 as ro,ba as ao}from"./client-34a5e2c7.js";const Yt=ei;Yt.Header=ti;Yt.Footer=ni;Yt.Content=ri;Yt.Sider=ai;const Xe=Yt;var aa=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};const io=e=>{var{prefixCls:n,className:t,avatar:r,title:a,description:o}=e,i=aa(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:l}=u.useContext(Jn),c=l("list",n),p=an(`${c}-item-meta`,t),f=re.createElement("div",{className:`${c}-item-meta-content`},a&&re.createElement("h4",{className:`${c}-item-meta-title`},a),o&&re.createElement("div",{className:`${c}-item-meta-description`},o));return re.createElement("div",Object.assign({},i,{className:p}),r&&re.createElement("div",{className:`${c}-item-meta-avatar`},r),(a||o)&&f)},oo=(e,n)=>{var{prefixCls:t,children:r,actions:a,extra:o,className:i,colStyle:l}=e,c=aa(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:p,itemLayout:f}=u.useContext(Xn),{getPrefixCls:m}=u.useContext(Jn),d=()=>{let y;return u.Children.forEach(r,x=>{typeof x=="string"&&(y=!0)}),y&&u.Children.count(r)>1},v=()=>f==="vertical"?!!o:!d(),w=m("list",t),S=a&&a.length>0&&re.createElement("ul",{className:`${w}-item-action`,key:"actions"},a.map((y,x)=>re.createElement("li",{key:`${w}-item-action-${x}`},y,x!==a.length-1&&re.createElement("em",{className:`${w}-item-action-split`})))),I=p?"div":"li",h=re.createElement(I,Object.assign({},c,p?{}:{ref:n},{className:an(`${w}-item`,{[`${w}-item-no-flex`]:!v()},i)}),f==="vertical"&&o?[re.createElement("div",{className:`${w}-item-main`,key:"content"},r,S),re.createElement("div",{className:`${w}-item-extra`,key:"extra"},o)]:[r,S,ii(o,{key:"extra"})]);return p?re.createElement(wt,{ref:n,flex:1,style:l},h):h},ia=u.forwardRef(oo);ia.Meta=io;const so=ia,lo=e=>{const{listBorderedCls:n,componentCls:t,paddingLG:r,margin:a,padding:o,listItemPaddingSM:i,marginLG:l,borderRadiusLG:c}=e;return{[`${n}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${t}-header,${t}-footer,${t}-item`]:{paddingInline:r},[`${t}-pagination`]:{margin:`${a}px ${l}px`}},[`${n}${t}-sm`]:{[`${t}-item,${t}-header,${t}-footer`]:{padding:i}},[`${n}${t}-lg`]:{[`${t}-item,${t}-header,${t}-footer`]:{padding:`${o}px ${r}px`}}}},co=e=>{const{componentCls:n,screenSM:t,screenMD:r,marginLG:a,marginSM:o,margin:i}=e;return{[`@media screen and (max-width:${r})`]:{[`${n}`]:{[`${n}-item`]:{[`${n}-item-action`]:{marginInlineStart:a}}},[`${n}-vertical`]:{[`${n}-item`]:{[`${n}-item-extra`]:{marginInlineStart:a}}}},[`@media screen and (max-width: ${t})`]:{[`${n}`]:{[`${n}-item`]:{flexWrap:"wrap",[`${n}-action`]:{marginInlineStart:o}}},[`${n}-vertical`]:{[`${n}-item`]:{flexWrap:"wrap-reverse",[`${n}-item-main`]:{minWidth:e.contentWidth},[`${n}-item-extra`]:{margin:`auto auto ${i}px`}}}}}},uo=e=>{const{componentCls:n,antCls:t,controlHeight:r,minHeight:a,paddingSM:o,marginLG:i,padding:l,listItemPadding:c,colorPrimary:p,listItemPaddingSM:f,listItemPaddingLG:m,paddingXS:d,margin:v,colorText:w,colorTextDescription:S,motionDurationSlow:I,lineWidth:h}=e,y={};return["start","center","end"].forEach(x=>{y[`&-align-${x}`]={textAlign:x}}),{[`${n}`]:Object.assign(Object.assign({},li(e)),{position:"relative","*":{outline:"none"},[`${n}-header, ${n}-footer`]:{background:"transparent",paddingBlock:o},[`${n}-pagination`]:Object.assign(Object.assign({marginBlockStart:i},y),{[`${t}-pagination-options`]:{textAlign:"start"}}),[`${n}-spin`]:{minHeight:a,textAlign:"center"},[`${n}-items`]:{margin:0,padding:0,listStyle:"none"},[`${n}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:w,[`${n}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${n}-item-meta-avatar`]:{marginInlineEnd:l},[`${n}-item-meta-content`]:{flex:"1 0",width:0,color:w},[`${n}-item-meta-title`]:{marginBottom:e.marginXXS,color:w,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:w,transition:`all ${I}`,["&:hover"]:{color:p}}},[`${n}-item-meta-description`]:{color:S,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${n}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${d}px`,color:S,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${n}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:h,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${n}-empty`]:{padding:`${l}px 0`,color:S,fontSize:e.fontSizeSM,textAlign:"center"},[`${n}-empty-text`]:{padding:l,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${n}-item-no-flex`]:{display:"block"}}),[`${n}-grid ${t}-col > ${n}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:v,paddingBlock:0,borderBlockEnd:"none"},[`${n}-vertical ${n}-item`]:{alignItems:"initial",[`${n}-item-main`]:{display:"block",flex:1},[`${n}-item-extra`]:{marginInlineStart:i},[`${n}-item-meta`]:{marginBlockEnd:l,[`${n}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:o,color:w,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${n}-item-action`]:{marginBlockStart:l,marginInlineStart:"auto","> li":{padding:`0 ${l}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${n}-split ${n}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${n}-split ${n}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${n}-split${n}-empty ${n}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${n}-loading ${n}-spin-nested-loading`]:{minHeight:r},[`${n}-split${n}-something-after-last-item ${t}-spin-container > ${n}-items > ${n}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${n}-lg ${n}-item`]:{padding:m},[`${n}-sm ${n}-item`]:{padding:f},[`${n}:not(${n}-vertical)`]:{[`${n}-item-no-flex`]:{[`${n}-item-action`]:{float:"right"}}}}},fo=oi("List",e=>{const n=si(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px 0`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[uo(n),lo(n),co(n)]},{contentWidth:220});var po=globalThis&&globalThis.__rest||function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};const Xn=u.createContext({});Xn.Consumer;function Jt(e){var n,{pagination:t=!1,prefixCls:r,bordered:a=!1,split:o=!0,className:i,rootClassName:l,children:c,itemLayout:p,loadMore:f,grid:m,dataSource:d=[],size:v,header:w,footer:S,loading:I=!1,rowKey:h,renderItem:y,locale:x}=e,E=po(e,["pagination","prefixCls","bordered","split","className","rootClassName","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const F=t&&typeof t=="object"?t:{},[D,O]=u.useState(F.defaultCurrent||1),[V,ve]=u.useState(F.defaultPageSize||10),{getPrefixCls:Me,renderEmpty:tt,direction:Rt}=u.useContext(Jn),Tt={current:1,total:0},q=j=>(g,b)=>{O(g),ve(b),t&&t[j]&&t[j](g,b)},Oe=q("onChange"),ht=q("onShowSizeChange"),he=(j,g)=>{if(!y)return null;let b;return typeof h=="function"?b=h(j):h?b=j[h]:b=j.key,b||(b=`list-item-${g}`),u.createElement(u.Fragment,{key:b},y(j,g))},Ce=()=>!!(f||t||S),K=Me("list",r),[nt,rt]=fo(K);let Pe=I;typeof Pe=="boolean"&&(Pe={spinning:Pe});const We=Pe&&Pe.spinning;let Ie="";switch(v){case"large":Ie="lg";break;case"small":Ie="sm";break}const ze=an(K,{[`${K}-vertical`]:p==="vertical",[`${K}-${Ie}`]:Ie,[`${K}-split`]:o,[`${K}-bordered`]:a,[`${K}-loading`]:We,[`${K}-grid`]:!!m,[`${K}-something-after-last-item`]:Ce(),[`${K}-rtl`]:Rt==="rtl"},i,l,rt),Z=ci(Tt,{total:d.length,current:D,pageSize:V},t||{}),H=Math.ceil(Z.total/Z.pageSize);Z.current>H&&(Z.current=H);const se=t?u.createElement("div",{className:an(`${K}-pagination`,`${K}-pagination-align-${(n=Z==null?void 0:Z.align)!==null&&n!==void 0?n:"end"}`)},u.createElement(di,Object.assign({},Z,{onChange:Oe,onShowSizeChange:ht}))):null;let me=ar(d);t&&d.length>(Z.current-1)*Z.pageSize&&(me=ar(d).splice((Z.current-1)*Z.pageSize,Z.pageSize));const Ve=Object.keys(m||{}).some(j=>["xs","sm","md","lg","xl","xxl"].includes(j)),de=ui(Ve),ue=u.useMemo(()=>{for(let j=0;j<ir.length;j+=1){const g=ir[j];if(de[g])return g}},[de]),_e=u.useMemo(()=>{if(!m)return;const j=ue&&m[ue]?m[ue]:m.column;if(j)return{width:`${100/j}%`,maxWidth:`${100/j}%`}},[m==null?void 0:m.column,ue]);let fe=We&&u.createElement("div",{style:{minHeight:53}});if(me.length>0){const j=me.map((g,b)=>he(g,b));fe=m?u.createElement(fn,{gutter:m.gutter},u.Children.map(j,g=>u.createElement("div",{key:g==null?void 0:g.key,style:_e},g))):u.createElement("ul",{className:`${K}-items`},j)}else!c&&!We&&(fe=u.createElement("div",{className:`${K}-empty-text`},x&&x.emptyText||(tt==null?void 0:tt("List"))||u.createElement(fi,{componentName:"List"})));const $e=Z.position||"bottom",at=u.useMemo(()=>({grid:m,itemLayout:p}),[JSON.stringify(m),p]);return nt(u.createElement(Xn.Provider,{value:at},u.createElement("div",Object.assign({className:ze},E),($e==="top"||$e==="both")&&se,w&&u.createElement("div",{className:`${K}-header`},w),u.createElement(Wn,Object.assign({},Pe),fe,c),S&&u.createElement("div",{className:`${K}-footer`},S),f||($e==="bottom"||$e==="both")&&se)))}Jt.Item=so;var ho={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const mo=ho;var oa=function(n,t){return u.createElement(_r,ce(ce({},n),{},{ref:t,icon:mo}))};oa.displayName="DatabaseOutlined";const go=u.forwardRef(oa);var yo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const bo=yo;var sa=function(n,t){return u.createElement(_r,ce(ce({},n),{},{ref:t,icon:bo}))};sa.displayName="MoreOutlined";const la=u.forwardRef(sa),vo=()=>s("div",{className:wo.wrapper,children:s(Wn,{size:"large"})}),wo={wrapper:R({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},Eo="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",xo=pi({scriptUrl:Eo}),So=({type:e})=>s(xo,{type:`icon-modou-${e}`});var Mo=function(n){return typeof n=="function"},Co=!1;const Fo=Co;function No(e){Fo&&(Mo(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var n=u.useRef(e);n.current=u.useMemo(function(){return e},[e]);var t=u.useRef();return t.current||(t.current=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return n.current.apply(this,r)}),t.current}var Ro=globalThis&&globalThis.__read||function(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),a,o=[],i;try{for(;(n===void 0||n-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o},To=function(){var n=Ro(u.useState({}),2),t=n[1];return u.useCallback(function(){return t({})},[])};const Oo=To;var rn={},Po=e=>encodeURIComponent(e).replace(/[!'()*]/g,n=>`%${n.charCodeAt(0).toString(16).toUpperCase()}`),ca="%[a-f0-9]{2}",sr=new RegExp(ca,"gi"),lr=new RegExp("("+ca+")+","gi");function kn(e,n){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;n=n||1;var t=e.slice(0,n),r=e.slice(n);return Array.prototype.concat.call([],kn(t),kn(r))}function Io(e){try{return decodeURIComponent(e)}catch{for(var n=e.match(sr),t=1;t<n.length;t++)e=kn(n,t).join(""),n=e.match(sr);return e}}function _o(e){for(var n={"%FE%FF":"��","%FF%FE":"��"},t=lr.exec(e);t;){try{n[t[0]]=decodeURIComponent(t[0])}catch{var r=Io(t[0]);r!==t[0]&&(n[t[0]]=r)}t=lr.exec(e)}n["%C2"]="�";for(var a=Object.keys(n),o=0;o<a.length;o++){var i=a[o];e=e.replace(new RegExp(i,"g"),n[i])}return e}var $o=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return _o(e)}},Do=(e,n)=>{if(!(typeof e=="string"&&typeof n=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(n==="")return[e];const t=e.indexOf(n);return t===-1?[e]:[e.slice(0,t),e.slice(t+n.length)]},Ao=function(e,n){for(var t={},r=Object.keys(e),a=Array.isArray(n),o=0;o<r.length;o++){var i=r[o],l=e[i];(a?n.indexOf(i)!==-1:n(i,l,e))&&(t[i]=l)}return t};(function(e){const n=Po,t=$o,r=Do,a=Ao,o=h=>h==null;function i(h){switch(h.arrayFormat){case"index":return y=>(x,E)=>{const F=x.length;return E===void 0||h.skipNull&&E===null||h.skipEmptyString&&E===""?x:E===null?[...x,[p(y,h),"[",F,"]"].join("")]:[...x,[p(y,h),"[",p(F,h),"]=",p(E,h)].join("")]};case"bracket":return y=>(x,E)=>E===void 0||h.skipNull&&E===null||h.skipEmptyString&&E===""?x:E===null?[...x,[p(y,h),"[]"].join("")]:[...x,[p(y,h),"[]=",p(E,h)].join("")];case"comma":case"separator":return y=>(x,E)=>E==null||E.length===0?x:x.length===0?[[p(y,h),"=",p(E,h)].join("")]:[[x,p(E,h)].join(h.arrayFormatSeparator)];default:return y=>(x,E)=>E===void 0||h.skipNull&&E===null||h.skipEmptyString&&E===""?x:E===null?[...x,p(y,h)]:[...x,[p(y,h),"=",p(E,h)].join("")]}}function l(h){let y;switch(h.arrayFormat){case"index":return(x,E,F)=>{if(y=/\[(\d*)\]$/.exec(x),x=x.replace(/\[\d*\]$/,""),!y){F[x]=E;return}F[x]===void 0&&(F[x]={}),F[x][y[1]]=E};case"bracket":return(x,E,F)=>{if(y=/(\[\])$/.exec(x),x=x.replace(/\[\]$/,""),!y){F[x]=E;return}if(F[x]===void 0){F[x]=[E];return}F[x]=[].concat(F[x],E)};case"comma":case"separator":return(x,E,F)=>{const D=typeof E=="string"&&E.includes(h.arrayFormatSeparator),O=typeof E=="string"&&!D&&f(E,h).includes(h.arrayFormatSeparator);E=O?f(E,h):E;const V=D||O?E.split(h.arrayFormatSeparator).map(ve=>f(ve,h)):E===null?E:f(E,h);F[x]=V};default:return(x,E,F)=>{if(F[x]===void 0){F[x]=E;return}F[x]=[].concat(F[x],E)}}}function c(h){if(typeof h!="string"||h.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function p(h,y){return y.encode?y.strict?n(h):encodeURIComponent(h):h}function f(h,y){return y.decode?t(h):h}function m(h){return Array.isArray(h)?h.sort():typeof h=="object"?m(Object.keys(h)).sort((y,x)=>Number(y)-Number(x)).map(y=>h[y]):h}function d(h){const y=h.indexOf("#");return y!==-1&&(h=h.slice(0,y)),h}function v(h){let y="";const x=h.indexOf("#");return x!==-1&&(y=h.slice(x)),y}function w(h){h=d(h);const y=h.indexOf("?");return y===-1?"":h.slice(y+1)}function S(h,y){return y.parseNumbers&&!Number.isNaN(Number(h))&&typeof h=="string"&&h.trim()!==""?h=Number(h):y.parseBooleans&&h!==null&&(h.toLowerCase()==="true"||h.toLowerCase()==="false")&&(h=h.toLowerCase()==="true"),h}function I(h,y){y=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},y),c(y.arrayFormatSeparator);const x=l(y),E=Object.create(null);if(typeof h!="string"||(h=h.trim().replace(/^[?#&]/,""),!h))return E;for(const F of h.split("&")){if(F==="")continue;let[D,O]=r(y.decode?F.replace(/\+/g," "):F,"=");O=O===void 0?null:["comma","separator"].includes(y.arrayFormat)?O:f(O,y),x(f(D,y),O,E)}for(const F of Object.keys(E)){const D=E[F];if(typeof D=="object"&&D!==null)for(const O of Object.keys(D))D[O]=S(D[O],y);else E[F]=S(D,y)}return y.sort===!1?E:(y.sort===!0?Object.keys(E).sort():Object.keys(E).sort(y.sort)).reduce((F,D)=>{const O=E[D];return Boolean(O)&&typeof O=="object"&&!Array.isArray(O)?F[D]=m(O):F[D]=O,F},Object.create(null))}e.extract=w,e.parse=I,e.stringify=(h,y)=>{if(!h)return"";y=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},y),c(y.arrayFormatSeparator);const x=O=>y.skipNull&&o(h[O])||y.skipEmptyString&&h[O]==="",E=i(y),F={};for(const O of Object.keys(h))x(O)||(F[O]=h[O]);const D=Object.keys(F);return y.sort!==!1&&D.sort(y.sort),D.map(O=>{const V=h[O];return V===void 0?"":V===null?p(O,y):Array.isArray(V)?V.reduce(E(O),[]).join("&"):p(O,y)+"="+p(V,y)}).filter(O=>O.length>0).join("&")},e.parseUrl=(h,y)=>{y=Object.assign({decode:!0},y);const[x,E]=r(h,"#");return Object.assign({url:x.split("?")[0]||"",query:I(w(h),y)},y&&y.parseFragmentIdentifier&&E?{fragmentIdentifier:f(E,y)}:{})},e.stringifyUrl=(h,y)=>{y=Object.assign({encode:!0,strict:!0},y);const x=d(h.url).split("?")[0]||"",E=e.extract(h.url),F=e.parse(E,{sort:!1}),D=Object.assign(F,h.query);let O=e.stringify(D,y);O&&(O=`?${O}`);let V=v(h.url);return h.fragmentIdentifier&&(V=`#${p(h.fragmentIdentifier,y)}`),`${x}${O}${V}`},e.pick=(h,y,x)=>{x=Object.assign({parseFragmentIdentifier:!0},x);const{url:E,query:F,fragmentIdentifier:D}=e.parseUrl(h,x);return e.stringifyUrl({url:E,query:a(F,y),fragmentIdentifier:D},x)},e.exclude=(h,y,x)=>{const E=Array.isArray(y)?F=>!y.includes(F):(F,D)=>!y(F,D);return e.pick(h,E,x)}})(rn);/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W(){return W=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},W.apply(this,arguments)}var U;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(U||(U={}));const cr="popstate";function da(e){e===void 0&&(e={});let{initialEntries:n=["/"],initialIndex:t,v5Compat:r=!1}=e,a;a=n.map((d,v)=>f(d,typeof d=="string"?null:d.state,v===0?"default":void 0));let o=c(t??a.length-1),i=U.Pop,l=null;function c(d){return Math.min(Math.max(d,0),a.length-1)}function p(){return a[o]}function f(d,v,w){v===void 0&&(v=null);let S=Ge(a?p().pathname:"/",d,v,w);return ko(S.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(d)),S}return{get index(){return o},get action(){return i},get location(){return p()},createHref(d){return typeof d=="string"?d:Wt(d)},push(d,v){i=U.Push;let w=f(d,v);o+=1,a.splice(o,a.length,w),r&&l&&l({action:i,location:w})},replace(d,v){i=U.Replace;let w=f(d,v);a[o]=w,r&&l&&l({action:i,location:w})},go(d){i=U.Pop,o=c(o+d),l&&l({action:i,location:p()})},listen(d){return l=d,()=>{l=null}}}}function Lo(e){e===void 0&&(e={});function n(r,a){let{pathname:o,search:i,hash:l}=r.location;return Ge("",{pathname:o,search:i,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){return typeof a=="string"?a:Wt(a)}return jo(n,t,null,e)}function ko(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function zo(){return Math.random().toString(36).substr(2,8)}function dr(e){return{usr:e.state,key:e.key}}function Ge(e,n,t,r){return t===void 0&&(t=null),W({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Ae(n):n,{state:t,key:n&&n.key||r||zo()})}function Wt(e){let{pathname:n="/",search:t="",hash:r=""}=e;return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function Ae(e){let n={};if(e){let t=e.indexOf("#");t>=0&&(n.hash=e.substr(t),e=e.substr(0,t));let r=e.indexOf("?");r>=0&&(n.search=e.substr(r),e=e.substr(0,r)),e&&(n.pathname=e)}return n}function jo(e,n,t,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:o=!1}=r,i=a.history,l=U.Pop,c=null;function p(){l=U.Pop,c&&c({action:l,location:d.location})}function f(v,w){l=U.Push;let S=Ge(d.location,v,w);t&&t(S,v);let I=dr(S),h=d.createHref(S);try{i.pushState(I,"",h)}catch{a.location.assign(h)}o&&c&&c({action:l,location:S})}function m(v,w){l=U.Replace;let S=Ge(d.location,v,w);t&&t(S,v);let I=dr(S),h=d.createHref(S);i.replaceState(I,"",h),o&&c&&c({action:l,location:S})}let d={get action(){return l},get location(){return e(a,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(cr,p),c=v,()=>{a.removeEventListener(cr,p),c=null}},createHref(v){return n(a,v)},push:f,replace:m,go(v){return i.go(v)}};return d}var ie;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ie||(ie={}));function Bo(e){return e.index===!0}function ua(e,n,t){return n===void 0&&(n=[]),t===void 0&&(t=new Set),e.map((r,a)=>{let o=[...n,a],i=typeof r.id=="string"?r.id:o.join("-");return $(r.index!==!0||!r.children,"Cannot specify children on an index route"),$(!t.has(i),'Found a route id collision on id "'+i+`".  Route id's must be globally unique within Data Router usages`),t.add(i),Bo(r)?W({},r,{id:i}):W({},r,{id:i,children:r.children?ua(r.children,o,t):void 0})})}function gt(e,n,t){t===void 0&&(t="/");let r=typeof n=="string"?Ae(n):n,a=ha(r.pathname||"/",t);if(a==null)return null;let o=fa(e);Ho(o);let i=null;for(let l=0;i==null&&l<o.length;++l)i=Yo(o[l],a);return i}function fa(e,n,t,r){return n===void 0&&(n=[]),t===void 0&&(t=[]),r===void 0&&(r=""),e.forEach((a,o)=>{let i={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};i.relativePath.startsWith("/")&&($(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let l=Ye([r,i.relativePath]),c=t.concat(i);a.children&&a.children.length>0&&($(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),fa(a.children,n,c,l)),!(a.path==null&&!a.index)&&n.push({path:l,score:Xo(l,a.index),routesMeta:c})}),n}function Ho(e){e.sort((n,t)=>n.score!==t.score?t.score-n.score:Go(n.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const Uo=/^:\w+$/,Jo=3,Wo=2,Vo=1,qo=10,Ko=-2,ur=e=>e==="*";function Xo(e,n){let t=e.split("/"),r=t.length;return t.some(ur)&&(r+=Ko),n&&(r+=Wo),t.filter(a=>!ur(a)).reduce((a,o)=>a+(Uo.test(o)?Jo:o===""?Vo:qo),r)}function Go(e,n){return e.length===n.length&&e.slice(0,-1).every((r,a)=>r===n[a])?e[e.length-1]-n[n.length-1]:0}function Yo(e,n){let{routesMeta:t}=e,r={},a="/",o=[];for(let i=0;i<t.length;++i){let l=t[i],c=i===t.length-1,p=a==="/"?n:n.slice(a.length)||"/",f=lt({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},p);if(!f)return null;Object.assign(r,f.params);let m=l.route;o.push({params:r,pathname:Ye([a,f.pathname]),pathnameBase:ts(Ye([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=Ye([a,f.pathnameBase]))}return o}function pa(e,n){return n===void 0&&(n={}),e.replace(/:(\w+)/g,(t,r)=>($(n[r]!=null,'Missing ":'+r+'" param'),n[r])).replace(/(\/?)\*/,(t,r,a,o)=>{const i="*";return n[i]==null?o==="/*"?"/":"":""+r+n[i]})}function lt(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[t,r]=Qo(e.path,e.caseSensitive,e.end),a=n.match(t);if(!a)return null;let o=a[0],i=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((p,f,m)=>{if(f==="*"){let d=l[m]||"";i=o.slice(0,o.length-d.length).replace(/(.)\/+$/,"$1")}return p[f]=Zo(l[m]||"",f),p},{}),pathname:o,pathnameBase:i,pattern:e}}function Qo(e,n,t){n===void 0&&(n=!1),t===void 0&&(t=!0),ma(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(i,l)=>(r.push(l),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,n?void 0:"i"),r]}function Zo(e,n){try{return decodeURIComponent(e)}catch(t){return ma(!1,'The value for the URL param "'+n+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+t+").")),e}}function ha(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let t=n.endsWith("/")?n.length-1:n.length,r=e.charAt(t);return r&&r!=="/"?null:e.slice(t)||"/"}function $(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function ma(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function ga(e,n){n===void 0&&(n="/");let{pathname:t,search:r="",hash:a=""}=typeof e=="string"?Ae(e):e;return{pathname:t?t.startsWith("/")?t:es(t,n):n,search:ns(r),hash:rs(a)}}function es(e,n){let t=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function En(e,n,t,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ya(e,n,t,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Ae(e):(a=W({},e),$(!a.pathname||!a.pathname.includes("?"),En("?","pathname","search",a)),$(!a.pathname||!a.pathname.includes("#"),En("#","pathname","hash",a)),$(!a.search||!a.search.includes("#"),En("#","search","hash",a)));let o=e===""||a.pathname==="",i=o?"/":a.pathname,l;if(r||i==null)l=t;else{let m=n.length-1;if(i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),m-=1;a.pathname=d.join("/")}l=m>=0?n[m]:"/"}let c=ga(a,l),p=i&&i!=="/"&&i.endsWith("/"),f=(o||i===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(p||f)&&(c.pathname+="/"),c}const Ye=e=>e.join("/").replace(/\/\/+/g,"/"),ts=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ns=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,rs=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,as=function(n,t){t===void 0&&(t={});let r=typeof t=="number"?{status:t}:t,a=new Headers(r.headers);return a.has("Content-Type")||a.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(n),W({},r,{headers:a}))};class ln extends Error{}class ba{constructor(n){this.pendingKeys=new Set,this.subscriber=void 0,$(n&&typeof n=="object"&&!Array.isArray(n),"defer() only accepts plain objects");let t;this.abortPromise=new Promise((a,o)=>t=o),this.controller=new AbortController;let r=()=>t(new ln("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(n).reduce((a,o)=>{let[i,l]=o;return Object.assign(a,{[i]:this.trackPromise(i,l)})},{})}trackPromise(n,t){if(!(t instanceof Promise))return t;this.pendingKeys.add(n);let r=Promise.race([t,this.abortPromise]).then(a=>this.onSettle(r,n,null,a),a=>this.onSettle(r,n,a));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(n,t,r,a){if(this.controller.signal.aborted&&r instanceof ln)return this.unlistenAbortSignal(),Object.defineProperty(n,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(t),this.done&&this.unlistenAbortSignal();const o=this.subscriber;return r?(Object.defineProperty(n,"_error",{get:()=>r}),o&&o(!1),Promise.reject(r)):(Object.defineProperty(n,"_data",{get:()=>a}),o&&o(!1),a)}subscribe(n){this.subscriber=n}cancel(){this.controller.abort(),this.pendingKeys.forEach((t,r)=>this.pendingKeys.delete(r));let n=this.subscriber;n&&n(!0)}async resolveData(n){let t=!1;if(!this.done){let r=()=>this.cancel();n.addEventListener("abort",r),t=await new Promise(a=>{this.subscribe(o=>{n.removeEventListener("abort",r),(o||this.done)&&a(o)})})}return t}get done(){return this.pendingKeys.size===0}get unwrappedData(){return $(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((n,t)=>{let[r,a]=t;return Object.assign(n,{[r]:os(a)})},{})}}function is(e){return e instanceof Promise&&e._tracked===!0}function os(e){if(!is(e))return e;if(e._error)throw e._error;return e._data}function ss(e){return new ba(e)}const ls=function(n,t){t===void 0&&(t=302);let r=t;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let a=new Headers(r.headers);return a.set("Location",n),new Response(null,W({},r,{headers:a}))};class Ct{constructor(n,t,r){this.status=n,this.statusText=t||"",this.data=r}}function Gn(e){return e instanceof Ct}const xn={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},cs={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function ds(e){$(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=ua(e.routes),t=null,r=new Set,a=null,o=null,i=null,l=!1,c=gt(n,e.history.location,e.basename),p=null;if(c==null){let{matches:g,route:b,error:M}=gr(n);c=g,p={[b.id]:M}}let f=!c.some(g=>g.route.loader)||e.hydrationData!=null,m,d={historyAction:e.history.action,location:e.history.location,matches:c,initialized:f,navigation:xn,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||p,fetchers:new Map},v=U.Pop,w=!1,S,I=!1,h=!1,y=[],x=[],E=new Map,F=0,D=-1,O=new Map,V=new Set,ve=new Map,Me=new Map;function tt(){return t=e.history.listen(g=>{let{action:b,location:M}=g;return Ce(b,M)}),d.initialized||Ce(U.Pop,d.location),m}function Rt(){t&&t(),r.clear(),S&&S.abort(),d.fetchers.forEach((g,b)=>me(b))}function Tt(g){return r.add(g),()=>r.delete(g)}function q(g){d=W({},d,g),r.forEach(b=>b(d))}function Oe(g,b){var M;let P=d.actionData!=null&&d.navigation.formMethod!=null&&d.navigation.state==="loading"&&((M=d.navigation.formAction)==null?void 0:M.split("?")[0])===g.pathname,_=b.loaderData?{loaderData:Mn(d.loaderData,b.loaderData,b.matches||[])}:{};q(W({},P?{}:{actionData:null},b,_,{historyAction:v,location:g,initialized:!0,navigation:xn,revalidation:"idle",restoreScrollPosition:d.navigation.formData?!1:j(g,b.matches||d.matches),preventScrollReset:w})),I||v===U.Pop||(v===U.Push?e.history.push(g,g.state):v===U.Replace&&e.history.replace(g,g.state)),v=U.Pop,w=!1,I=!1,h=!1,y=[],x=[]}async function ht(g,b){if(typeof g=="number"){e.history.go(g);return}let{path:M,submission:P,error:_}=fr(g,b),J=Ge(d.location,M,b&&b.state),k=(b&&b.replace)===!0||P!=null?U.Replace:U.Push,L=b&&"preventScrollReset"in b?b.preventScrollReset===!0:void 0;return await Ce(k,J,{submission:P,pendingError:_,preventScrollReset:L,replace:b&&b.replace})}function he(){if(H(),q({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){Ce(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}Ce(v||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function Ce(g,b,M){S&&S.abort(),S=null,v=g,I=(M&&M.startUninterruptedRevalidation)===!0,at(d.location,d.matches),w=(M&&M.preventScrollReset)===!0;let P=M&&M.overrideNavigation,_=gt(n,b,e.basename);if(!_){let{matches:je,route:Be,error:it}=gr(n);fe(),Oe(b,{matches:je,loaderData:{},errors:{[Be.id]:it}});return}if(hs(d.location,b)){Oe(b,{matches:_});return}S=new AbortController;let J=It(b,S.signal,M&&M.submission),k,L;if(M&&M.pendingError)L={[yt(_).route.id]:M.pendingError};else if(M&&M.submission){let je=await K(J,b,M.submission,_,{replace:M.replace});if(je.shortCircuited)return;k=je.pendingActionData,L=je.pendingActionError,P=W({state:"loading",location:b},M.submission)}let{shortCircuited:z,loaderData:X,errors:ne}=await nt(J,b,_,P,M&&M.submission,M&&M.replace,k,L);z||(S=null,Oe(b,{matches:_,loaderData:X,errors:ne}))}async function K(g,b,M,P,_){H();let J=W({state:"submitting",location:b},M);q({navigation:J});let k,L=Er(P,b);if(!L.route.action)k=yr(b);else if(k=await Pt("action",g,L),g.signal.aborted)return{shortCircuited:!0};if(vt(k)){let z=W({state:"loading",location:Ge(d.location,k.location)},M);return await ze(k,z,_&&_.replace),{shortCircuited:!0}}if(jt(k)){let z=yt(P,L.route.id);return(_&&_.replace)!==!0&&(v=U.Push),{pendingActionError:{[z.route.id]:k.error}}}if(ct(k))throw new Error("defer() is not supported in actions");return{pendingActionData:{[L.route.id]:k.data}}}async function nt(g,b,M,P,_,J,k,L){let z=P;z||(z={state:"loading",location:b,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[X,ne]=pr(d,M,_,b,h,y,x,k,L,ve);if(fe(ae=>!(M&&M.some(pe=>pe.route.id===ae))||X&&X.some(pe=>pe.route.id===ae)),X.length===0&&ne.length===0)return Oe(b,{matches:M,loaderData:Mn(d.loaderData,{},M),errors:L||null,actionData:k||null}),{shortCircuited:!0};I||(ne.forEach(ae=>{let[pe]=ae;const qe=d.fetchers.get(pe);let en={state:"loading",data:qe&&qe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(pe,en)}),q(W({navigation:z,actionData:k||d.actionData||null},ne.length>0?{fetchers:new Map(d.fetchers)}:{}))),D=++F,ne.forEach(ae=>{let[pe]=ae;return E.set(pe,S)});let{results:je,loaderResults:Be,fetcherResults:it}=await Z(d.matches,X,ne,g);if(g.signal.aborted)return{shortCircuited:!0};ne.forEach(ae=>{let[pe]=ae;return E.delete(pe)});let Ot=br(je);if(Ot){let ae=Sn(d,Ot);return await ze(Ot,ae,J),{shortCircuited:!0}}let{loaderData:Zt,errors:mt}=mr(d,M,X,Be,L,ne,it,Me);Me.forEach((ae,pe)=>{ae.subscribe(qe=>{(qe||ae.done)&&Me.delete(pe)})}),ue();let wn=_e(D);return W({loaderData:Zt,errors:mt},wn||ne.length>0?{fetchers:new Map(d.fetchers)}:{})}function rt(g){return d.fetchers.get(g)||cs}function Pe(g,b,M,P){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");E.has(g)&&Ve(g);let _=gt(n,M,e.basename);if(!_){se(g,b,new Ct(404,"Not Found",null));return}let{path:J,submission:k}=fr(M,P,!0),L=Er(_,J);if(k){We(g,b,J,L,k);return}ve.set(g,[J,L]),Ie(g,b,J,L)}async function We(g,b,M,P,_){if(H(),ve.delete(g),!P.route.action){let{error:Fe}=yr(M);se(g,b,Fe);return}let J=d.fetchers.get(g),k=W({state:"submitting"},_,{data:J&&J.data});d.fetchers.set(g,k),q({fetchers:new Map(d.fetchers)});let L=new AbortController,z=It(M,L.signal,_);E.set(g,L);let X=await Pt("action",z,P);if(z.signal.aborted){E.get(g)===L&&E.delete(g);return}if(vt(X)){E.delete(g),V.add(g);let Fe=W({state:"loading"},_,{data:void 0});d.fetchers.set(g,Fe),q({fetchers:new Map(d.fetchers)});let He=W({state:"loading",location:Ge(d.location,X.location)},_);await ze(X,He);return}if(jt(X)){se(g,b,X.error);return}ct(X)&&$(!1,"defer() is not supported in actions");let ne=d.navigation.location||d.location,je=It(ne,L.signal),Be=d.navigation.state!=="idle"?gt(n,d.navigation.location,e.basename):d.matches;$(Be,"Didn't find any matches after fetcher action");let it=++F;O.set(g,it);let Ot=W({state:"loading",data:X.data},_);d.fetchers.set(g,Ot);let[Zt,mt]=pr(d,Be,_,ne,h,y,x,{[P.route.id]:X.data},void 0,ve);mt.filter(Fe=>{let[He]=Fe;return He!==g}).forEach(Fe=>{let[He]=Fe,rr=d.fetchers.get(He),Ya={state:"loading",data:rr&&rr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(He,Ya),E.set(He,L)}),q({fetchers:new Map(d.fetchers)});let{results:wn,loaderResults:ae,fetcherResults:pe}=await Z(d.matches,Zt,mt,je);if(L.signal.aborted)return;O.delete(g),E.delete(g),mt.forEach(Fe=>{let[He]=Fe;return E.delete(He)});let qe=br(wn);if(qe){let Fe=Sn(d,qe);await ze(qe,Fe);return}let{loaderData:en,errors:nr}=mr(d,d.matches,Zt,ae,void 0,mt,pe,Me),Xa={state:"idle",data:X.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(g,Xa);let Ga=_e(it);d.navigation.state==="loading"&&it>D?($(v,"Expected pending action"),S&&S.abort(),Oe(d.navigation.location,{matches:Be,loaderData:en,errors:nr,fetchers:new Map(d.fetchers)})):(q(W({errors:nr,loaderData:Mn(d.loaderData,en,Be)},Ga?{fetchers:new Map(d.fetchers)}:{})),h=!1)}async function Ie(g,b,M,P){let _=d.fetchers.get(g),J={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:_&&_.data};d.fetchers.set(g,J),q({fetchers:new Map(d.fetchers)});let k=new AbortController,L=It(M,k.signal);E.set(g,k);let z=await Pt("loader",L,P);if(ct(z)&&(z=await Ea(z,L.signal,!0)||z),E.get(g)===k&&E.delete(g),L.signal.aborted)return;if(vt(z)){let ne=Sn(d,z);await ze(z,ne);return}if(jt(z)){let ne=yt(d.matches,b);d.fetchers.delete(g),q({fetchers:new Map(d.fetchers),errors:{[ne.route.id]:z.error}});return}$(!ct(z),"Unhandled fetcher deferred data");let X={state:"idle",data:z.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(g,X),q({fetchers:new Map(d.fetchers)})}async function ze(g,b,M){g.revalidate&&(h=!0),$(b.location,"Expected a location on the redirect navigation"),S=null;let P=M===!0?U.Replace:U.Push;await Ce(P,b.location,{overrideNavigation:b})}async function Z(g,b,M,P){let _=await Promise.all([...b.map(L=>Pt("loader",P,L)),...M.map(L=>{let[,z,X]=L;return Pt("loader",It(z,P.signal),X)})]),J=_.slice(0,b.length),k=_.slice(b.length);return await Promise.all([vr(g,b,J,P.signal,!1,d.loaderData),vr(g,M.map(L=>{let[,,z]=L;return z}),k,P.signal,!0)]),{results:_,loaderResults:J,fetcherResults:k}}function H(){h=!0,y.push(...fe()),ve.forEach((g,b)=>{E.has(b)&&(x.push(b),Ve(b))})}function se(g,b,M){let P=yt(d.matches,b);me(g),q({errors:{[P.route.id]:M},fetchers:new Map(d.fetchers)})}function me(g){E.has(g)&&Ve(g),ve.delete(g),O.delete(g),V.delete(g),d.fetchers.delete(g)}function Ve(g){let b=E.get(g);$(b,"Expected fetch controller: "+g),b.abort(),E.delete(g)}function de(g){for(let b of g){let P={state:"idle",data:rt(b).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(b,P)}}function ue(){let g=[];for(let b of V){let M=d.fetchers.get(b);$(M,"Expected fetcher: "+b),M.state==="loading"&&(V.delete(b),g.push(b))}de(g)}function _e(g){let b=[];for(let[M,P]of O)if(P<g){let _=d.fetchers.get(M);$(_,"Expected fetcher: "+M),_.state==="loading"&&(Ve(M),O.delete(M),b.push(M))}return de(b),b.length>0}function fe(g){let b=[];return Me.forEach((M,P)=>{(!g||g(P))&&(M.cancel(),b.push(P),Me.delete(P))}),b}function $e(g,b,M){if(a=g,i=b,o=M||(P=>P.key),!l&&d.navigation===xn){l=!0;let P=j(d.location,d.matches);P!=null&&q({restoreScrollPosition:P})}return()=>{a=null,i=null,o=null}}function at(g,b){if(a&&o&&i){let M=b.map(_=>wr(_,d.loaderData)),P=o(g,M)||g.key;a[P]=i()}}function j(g,b){if(a&&o&&i){let M=b.map(J=>wr(J,d.loaderData)),P=o(g,M)||g.key,_=a[P];if(typeof _=="number")return _}return null}return m={get basename(){return e.basename},get state(){return d},get routes(){return n},initialize:tt,subscribe:Tt,enableScrollRestoration:$e,navigate:ht,fetch:Pe,revalidate:he,createHref:mn,getFetcher:rt,deleteFetcher:me,dispose:Rt,_internalFetchControllers:E,_internalActiveDeferreds:Me},m}function fr(e,n,t){t===void 0&&(t=!1);let r=typeof e=="string"?e:Wt(e);if(!n||!("formMethod"in n)&&!("formData"in n))return{path:r};if(n.formMethod!=null&&n.formMethod!=="get")return{path:r,submission:{formMethod:n.formMethod,formAction:mn(Ae(r)),formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:n.formData}};if(!n.formData)return{path:r};let a=Ae(r);try{let o=wa(n.formData);t&&a.search&&xa(a.search)&&o.append("index",""),a.search="?"+o}catch{return{path:r,error:new Ct(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Wt(a)}}function Sn(e,n){let{formMethod:t,formAction:r,formEncType:a,formData:o}=e.navigation;return{state:"loading",location:Ge(e.location,n.location),formMethod:t||void 0,formAction:r||void 0,formEncType:a||void 0,formData:o||void 0}}function us(e,n){let t=e;if(n){let r=e.findIndex(a=>a.route.id===n);r>=0&&(t=e.slice(0,r))}return t}function pr(e,n,t,r,a,o,i,l,c,p){let f=c?Object.values(c)[0]:l?Object.values(l)[0]:null,m=c?Object.keys(c)[0]:void 0,v=us(n,m).filter((S,I)=>S.route.loader!=null&&(fs(e.loaderData,e.matches[I],S)||o.some(h=>h===S.route.id)||hr(e.location,e.matches[I],t,r,S,a,f))),w=[];return p&&p.forEach((S,I)=>{let[h,y]=S;i.includes(I)?w.push([I,h,y]):a&&hr(h,y,t,h,y,a,f)&&w.push([I,h,y])}),[v,w]}function fs(e,n,t){let r=!n||t.route.id!==n.route.id,a=e[t.route.id]===void 0;return r||a}function va(e,n){let t=e.route.path;return e.pathname!==n.pathname||t&&t.endsWith("*")&&e.params["*"]!==n.params["*"]}function hr(e,n,t,r,a,o,i){let l=zn(e),c=n.params,p=zn(r),f=a.params,m=va(n,a)||l.toString()===p.toString()||l.search!==p.search||o;if(a.route.shouldRevalidate){let d=a.route.shouldRevalidate(W({currentUrl:l,currentParams:c,nextUrl:p,nextParams:f},t,{actionResult:i,defaultShouldRevalidate:m}));if(typeof d=="boolean")return d}return m}async function Pt(e,n,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=!1);let o,i,l,c=new Promise((f,m)=>l=m),p=()=>l();n.signal.addEventListener("abort",p);try{let f=t.route[e];$(f,"Could not find the "+e+' to run on the "'+t.route.id+'" route'),i=await Promise.race([f({request:n,params:t.params}),c])}catch(f){o=ie.error,i=f}finally{n.signal.removeEventListener("abort",p)}if(i instanceof Response){let f=i.status,m=i.headers.get("Location");if(a)throw i;if(f>=300&&f<=399&&m!=null){if(r)throw i;return{type:ie.redirect,status:f,location:m,revalidate:i.headers.get("X-Remix-Revalidate")!==null}}let d,v=i.headers.get("Content-Type");return v&&v.startsWith("application/json")?d=await i.json():d=await i.text(),o===ie.error?{type:o,error:new Ct(f,i.statusText,d),headers:i.headers}:{type:ie.data,data:d,statusCode:i.status,headers:i.headers}}return o===ie.error?{type:o,error:i}:i instanceof ba?{type:ie.deferred,deferredData:i}:{type:ie.data,data:i}}function It(e,n,t){let r=zn(e).toString(),a={signal:n};if(t){let{formMethod:o,formEncType:i,formData:l}=t;a.method=o.toUpperCase(),a.body=i==="application/x-www-form-urlencoded"?wa(l):l}return new Request(r,a)}function wa(e){let n=new URLSearchParams;for(let[t,r]of e.entries())$(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),n.append(t,r);return n}function ps(e,n,t,r,a){let o={},i=null,l,c=!1,p={};return t.forEach((f,m)=>{let d=n[m].route.id;if($(!vt(f),"Cannot handle redirect results in processLoaderData"),jt(f)){let v=yt(e,d),w=f.error;r&&(w=Object.values(r)[0],r=void 0),i=Object.assign(i||{},{[v.route.id]:w}),c||(c=!0,l=Gn(f.error)?f.error.status:500),f.headers&&(p[d]=f.headers)}else ct(f)?(a&&a.set(d,f.deferredData),o[d]=f.deferredData.data):(o[d]=f.data,f.statusCode!=null&&f.statusCode!==200&&!c&&(l=f.statusCode),f.headers&&(p[d]=f.headers))}),r&&(i=r),{loaderData:o,errors:i,statusCode:l||200,loaderHeaders:p}}function mr(e,n,t,r,a,o,i,l){let{loaderData:c,errors:p}=ps(n,t,r,a,l);for(let f=0;f<o.length;f++){let[m,,d]=o[f];$(i!==void 0&&i[f]!==void 0,"Did not find corresponding fetcher result");let v=i[f];if(jt(v)){let w=yt(e.matches,d.route.id);p&&p[w.route.id]||(p=W({},p,{[w.route.id]:v.error})),e.fetchers.delete(m)}else{if(vt(v))throw new Error("Unhandled fetcher revalidation redirect");if(ct(v))throw new Error("Unhandled fetcher deferred data");{let w={state:"idle",data:v.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(m,w)}}}return{loaderData:c,errors:p}}function Mn(e,n,t){let r=W({},n);return t.forEach(a=>{let o=a.route.id;n[o]===void 0&&e[o]!==void 0&&(r[o]=e[o])}),r}function yt(e,n){return(n?e.slice(0,e.findIndex(r=>r.route.id===n)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function gr(e){let n=e.find(t=>t.index||t.path===""||t.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:n}],route:n,error:new Ct(404,"Not Found",null)}}function yr(e){let n=typeof e=="string"?e:mn(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+n+"]")),{type:ie.error,error:new Ct(405,"Method Not Allowed","No action found for ["+n+"]")}}function br(e){for(let n=e.length-1;n>=0;n--){let t=e[n];if(vt(t))return t}}function mn(e){return(e.pathname||"")+(e.search||"")}function hs(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash!==n.hash}function ct(e){return e.type===ie.deferred}function jt(e){return e.type===ie.error}function vt(e){return(e&&e.type)===ie.redirect}async function vr(e,n,t,r,a,o){for(let i=0;i<t.length;i++){let l=t[i],c=n[i],p=e.find(m=>m.route.id===c.route.id),f=p!=null&&!va(p,c)&&(o&&o[c.route.id])!==void 0;ct(l)&&(a||f)&&await Ea(l,r,a).then(m=>{m&&(t[i]=m||t[i])})}}async function Ea(e,n,t){if(t===void 0&&(t=!1),!await e.deferredData.resolveData(n)){if(t)try{return{type:ie.data,data:e.deferredData.unwrappedData}}catch(a){return{type:ie.error,error:a}}return{type:ie.data,data:e.deferredData.data}}}function xa(e){return new URLSearchParams(e).getAll("index").some(n=>n==="")}function wr(e,n){let{route:t,pathname:r,params:a}=e;return{id:t.id,pathname:r,params:a,data:n[t.id],handle:t.handle}}function Er(e,n){let t=typeof n=="string"?Ae(n).search:n.search;return e[e.length-1].route.index&&!xa(t||"")?e.slice(-2)[0]:e.slice(-1)[0]}function zn(e){let n=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",t=typeof e=="string"?e:mn(e);return new URL(t,n)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cn.apply(this,arguments)}function ms(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}const gs=typeof Object.is=="function"?Object.is:ms,{useState:ys,useEffect:bs,useLayoutEffect:vs,useDebugValue:ws}=Dn;function Es(e,n,t){const r=n(),[{inst:a},o]=ys({inst:{value:r,getSnapshot:n}});return vs(()=>{a.value=r,a.getSnapshot=n,Cn(a)&&o({inst:a})},[e,r,n]),bs(()=>(Cn(a)&&o({inst:a}),e(()=>{Cn(a)&&o({inst:a})})),[e]),ws(r),r}function Cn(e){const n=e.getSnapshot,t=e.value;try{const r=n();return!gs(t,r)}catch{return!0}}function xs(e,n,t){return n()}const Ss=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ms=!Ss,Cs=Ms?xs:Es,Fs="useSyncExternalStore"in Dn?(e=>e.useSyncExternalStore)(Dn):Cs,Sa=u.createContext(null),gn=u.createContext(null),Qt=u.createContext(null),dn=u.createContext(null),yn=u.createContext(null),Ft=u.createContext(null),Le=u.createContext({outlet:null,matches:[]}),Ma=u.createContext(null);function Ns(e,n){let{relative:t}=n===void 0?{}:n;Qe()||$(!1);let{basename:r,navigator:a}=u.useContext(yn),{hash:o,pathname:i,search:l}=Ra(e,{relative:t}),c=i;return r!=="/"&&(c=i==="/"?r:Ye([r,i])),a.createHref({pathname:c,search:l,hash:o})}function Qe(){return u.useContext(Ft)!=null}function Nt(){return Qe()||$(!1),u.useContext(Ft).location}function Rs(){return u.useContext(Ft).navigationType}function Ts(e){Qe()||$(!1);let{pathname:n}=Nt();return u.useMemo(()=>lt(e,n),[n,e])}function Ca(e){return e.filter((n,t)=>t===0||!n.route.index&&n.pathnameBase!==e[t-1].pathnameBase)}function Ze(){Qe()||$(!1);let{basename:e,navigator:n}=u.useContext(yn),{matches:t}=u.useContext(Le),{pathname:r}=Nt(),a=JSON.stringify(Ca(t).map(l=>l.pathnameBase)),o=u.useRef(!1);return u.useEffect(()=>{o.current=!0}),u.useCallback(function(l,c){if(c===void 0&&(c={}),!o.current)return;if(typeof l=="number"){n.go(l);return}let p=ya(l,JSON.parse(a),r,c.relative==="path");e!=="/"&&(p.pathname=p.pathname==="/"?e:Ye([e,p.pathname])),(c.replace?n.replace:n.push)(p,c.state,c)},[e,n,a,r])}const Fa=u.createContext(null);function Os(){return u.useContext(Fa)}function Na(e){let n=u.useContext(Le).outlet;return n&&u.createElement(Fa.Provider,{value:e},n)}function et(){let{matches:e}=u.useContext(Le),n=e[e.length-1];return n?n.params:{}}function Ra(e,n){let{relative:t}=n===void 0?{}:n,{matches:r}=u.useContext(Le),{pathname:a}=Nt(),o=JSON.stringify(Ca(r).map(i=>i.pathnameBase));return u.useMemo(()=>ya(e,JSON.parse(o),a,t==="path"),[e,o,a,t])}function Yn(e,n){Qe()||$(!1);let t=u.useContext(Qt),{matches:r}=u.useContext(Le),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let i=a?a.pathnameBase:"/";a&&a.route;let l=Nt(),c;if(n){var p;let w=typeof n=="string"?Ae(n):n;i==="/"||(p=w.pathname)!=null&&p.startsWith(i)||$(!1),c=w}else c=l;let f=c.pathname||"/",m=i==="/"?f:f.slice(i.length)||"/",d=gt(e,{pathname:m}),v=Ta(d&&d.map(w=>Object.assign({},w,{params:Object.assign({},o,w.params),pathname:Ye([i,w.pathname]),pathnameBase:w.pathnameBase==="/"?i:Ye([i,w.pathnameBase])})),r,t||void 0);return n?u.createElement(Ft.Provider,{value:{location:cn({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:U.Pop}},v):v}function Ps(){let e=Oa(),n=Gn(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r};return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unhandled Thrown Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},n),t?u.createElement("pre",{style:a},t):null,u.createElement("p",null,"💿 Hey developer 👋"),u.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",u.createElement("code",{style:o},"errorElement")," props on ",u.createElement("code",{style:o},"<Route>")))}class Is extends u.Component{constructor(n){super(n),this.state={location:n.location,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location?{error:n.error,location:n.location}:{error:n.error||t.error,location:t.location}}componentDidCatch(n,t){console.error("React Router caught the following error during render",n,t)}render(){return this.state.error?u.createElement(Ma.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function _s(e){let{routeContext:n,match:t,children:r}=e,a=u.useContext(Sa);return a&&t.route.errorElement&&(a._deepestRenderedBoundaryId=t.route.id),u.createElement(Le.Provider,{value:n},r)}function Ta(e,n,t){if(n===void 0&&(n=[]),e==null)if(t!=null&&t.errors)e=t.matches;else return null;let r=e,a=t==null?void 0:t.errors;if(a!=null){let o=r.findIndex(i=>i.route.id&&(a==null?void 0:a[i.route.id]));o>=0||$(!1),r=r.slice(0,Math.min(r.length,o+1))}return r.reduceRight((o,i,l)=>{let c=i.route.id?a==null?void 0:a[i.route.id]:null,p=t?i.route.errorElement||u.createElement(Ps,null):null,f=()=>u.createElement(_s,{match:i,routeContext:{outlet:o,matches:n.concat(r.slice(0,l+1))}},c?p:i.route.element!==void 0?i.route.element:o);return t&&(i.route.errorElement||l===0)?u.createElement(Is,{location:t.location,component:p,error:c,children:f()}):f()},null)}var jn;(function(e){e.UseRevalidator="useRevalidator"})(jn||(jn={}));var Ue;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(Ue||(Ue={}));function $s(e){let n=u.useContext(gn);return n||$(!1),n}function pt(e){let n=u.useContext(Qt);return n||$(!1),n}function Ds(){return pt(Ue.UseNavigation).navigation}function As(){let e=$s(jn.UseRevalidator),n=pt(Ue.UseRevalidator);return{revalidate:e.router.revalidate,state:n.revalidation}}function Ls(){let{matches:e,loaderData:n}=pt(Ue.UseMatches);return u.useMemo(()=>e.map(t=>{let{pathname:r,params:a}=t;return{id:t.route.id,pathname:r,params:a,data:n[t.route.id],handle:t.route.handle}}),[e,n])}function ks(){let e=pt(Ue.UseLoaderData),n=u.useContext(Le);n||$(!1);let t=n.matches[n.matches.length-1];return t.route.id||$(!1),e.loaderData[t.route.id]}function zs(e){return pt(Ue.UseRouteLoaderData).loaderData[e]}function js(){let e=pt(Ue.UseActionData);return u.useContext(Le)||$(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function Oa(){var e;let n=u.useContext(Ma),t=pt(Ue.UseRouteError),r=u.useContext(Le),a=r.matches[r.matches.length-1];return n||(r||$(!1),a.route.id||$(!1),(e=t.errors)==null?void 0:e[a.route.id])}function Pa(){let e=u.useContext(dn);return e==null?void 0:e._data}function Bs(){let e=u.useContext(dn);return e==null?void 0:e._error}function Hs(e){let{fallbackElement:n,router:t}=e,r=Fs(t.subscribe,()=>t.state,()=>t.state),a=u.useMemo(()=>({createHref:t.createHref,go:i=>t.navigate(i),push:(i,l,c)=>t.navigate(i,{state:l,preventScrollReset:c==null?void 0:c.preventScrollReset}),replace:(i,l,c)=>t.navigate(i,{replace:!0,state:l,preventScrollReset:c==null?void 0:c.preventScrollReset})}),[t]),o=t.basename||"/";return u.createElement(gn.Provider,{value:{router:t,navigator:a,static:!1,basename:o}},u.createElement(Qt.Provider,{value:r},u.createElement(bn,{basename:t.basename,location:t.state.location,navigationType:t.state.historyAction,navigator:a},t.state.initialized?u.createElement($a,null):n)))}function Us(e){let{basename:n,children:t,initialEntries:r,initialIndex:a}=e,o=u.useRef();o.current==null&&(o.current=da({initialEntries:r,initialIndex:a,v5Compat:!0}));let i=o.current,[l,c]=u.useState({action:i.action,location:i.location});return u.useLayoutEffect(()=>i.listen(c),[i]),u.createElement(bn,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:i})}function Js(e){let{to:n,replace:t,state:r,relative:a}=e;Qe()||$(!1);let o=u.useContext(Qt),i=Ze();return u.useEffect(()=>{o&&o.navigation.state!=="idle"||i(n,{replace:t,state:r,relative:a})}),null}function Ia(e){return Na(e.context)}function _a(e){$(!1)}function bn(e){let{basename:n="/",children:t=null,location:r,navigationType:a=U.Pop,navigator:o,static:i=!1}=e;Qe()&&$(!1);let l=n.replace(/^\/*/,"/"),c=u.useMemo(()=>({basename:l,navigator:o,static:i}),[l,o,i]);typeof r=="string"&&(r=Ae(r));let{pathname:p="/",search:f="",hash:m="",state:d=null,key:v="default"}=r,w=u.useMemo(()=>{let S=ha(p,l);return S==null?null:{pathname:S,search:f,hash:m,state:d,key:v}},[l,p,f,m,d,v]);return w==null?null:u.createElement(yn.Provider,{value:c},u.createElement(Ft.Provider,{children:t,value:{location:w,navigationType:a}}))}function $a(e){let{children:n,location:t}=e,r=u.useContext(gn),a=r&&!n?r.router.routes:Vt(n);return Yn(a,t)}function Ws(e){let{children:n,errorElement:t,resolve:r}=e;return u.createElement(qs,{resolve:r,errorElement:t},u.createElement(Ks,null,n))}var ge;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(ge||(ge={}));const Vs=new Promise(()=>{});class qs extends u.Component{constructor(n){super(n),this.state={error:null}}static getDerivedStateFromError(n){return{error:n}}componentDidCatch(n,t){console.error("<Await> caught the following error during render",n,t)}render(){let{children:n,errorElement:t,resolve:r}=this.props,a=null,o=ge.pending;if(!(r instanceof Promise))o=ge.success,a=Promise.resolve(),Object.defineProperty(a,"_tracked",{get:()=>!0}),Object.defineProperty(a,"_data",{get:()=>r});else if(this.state.error){o=ge.error;let i=this.state.error;a=Promise.reject().catch(()=>{}),Object.defineProperty(a,"_tracked",{get:()=>!0}),Object.defineProperty(a,"_error",{get:()=>i})}else r._tracked?(a=r,o=a._error!==void 0?ge.error:a._data!==void 0?ge.success:ge.pending):(o=ge.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),a=r.then(i=>Object.defineProperty(r,"_data",{get:()=>i}),i=>Object.defineProperty(r,"_error",{get:()=>i})));if(o===ge.error&&a._error instanceof ln)throw Vs;if(o===ge.error&&!t)throw a._error;if(o===ge.error)return u.createElement(dn.Provider,{value:a,children:t});if(o===ge.success)return u.createElement(dn.Provider,{value:a,children:n});throw a}}function Ks(e){let{children:n}=e,t=Pa();return typeof n=="function"?n(t):u.createElement(u.Fragment,null,n)}function Vt(e,n){n===void 0&&(n=[]);let t=[];return u.Children.forEach(e,(r,a)=>{if(!u.isValidElement(r))return;if(r.type===u.Fragment){t.push.apply(t,Vt(r.props.children,n));return}r.type!==_a&&$(!1),!r.props.index||!r.props.children||$(!1);let o=[...n,a],i={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(i.children=Vt(r.props.children,o)),t.push(i)}),t}function Xs(e){return Ta(e)}function Qn(e){return e.map(n=>{let t=cn({},n);return t.hasErrorBoundary==null&&(t.hasErrorBoundary=t.errorElement!=null),t.children&&(t.children=Qn(t.children)),t})}function Gs(e,n){return ds({basename:n==null?void 0:n.basename,history:da({initialEntries:n==null?void 0:n.initialEntries,initialIndex:n==null?void 0:n.initialIndex}),hydrationData:n==null?void 0:n.hydrationData,routes:Qn(e)}).initialize()}const Ys=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:ln,Await:Ws,MemoryRouter:Us,Navigate:Js,get NavigationType(){return U},Outlet:Ia,Route:_a,Router:bn,RouterProvider:Hs,Routes:$a,UNSAFE_DataRouterContext:gn,UNSAFE_DataRouterStateContext:Qt,UNSAFE_DataStaticRouterContext:Sa,UNSAFE_LocationContext:Ft,UNSAFE_NavigationContext:yn,UNSAFE_RouteContext:Le,UNSAFE_enhanceManualRouteObjects:Qn,createMemoryRouter:Gs,createPath:Wt,createRoutesFromChildren:Vt,createRoutesFromElements:Vt,defer:ss,generatePath:pa,isRouteErrorResponse:Gn,json:as,matchPath:lt,matchRoutes:gt,parsePath:Ae,redirect:ls,renderMatches:Xs,resolvePath:ga,useActionData:js,useAsyncError:Bs,useAsyncValue:Pa,useHref:Ns,useInRouterContext:Qe,useLoaderData:ks,useLocation:Nt,useMatch:Ts,useMatches:Ls,useNavigate:Ze,useNavigation:Ds,useNavigationType:Rs,useOutlet:Na,useOutletContext:Os,useParams:et,useResolvedPath:Ra,useRevalidator:As,useRouteError:Oa,useRouteLoaderData:zs,useRoutes:Yn},Symbol.toStringTag,{value:"Module"}));var we=globalThis&&globalThis.__assign||function(){return we=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++){n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},we.apply(this,arguments)},_t=Ys,Qs={parseNumbers:!1,parseBooleans:!1},Zs={skipNull:!1,skipEmptyString:!1},Zn=function(n,t){var r,a,o=t||{},i=o.navigateMode,l=i===void 0?"push":i,c=o.parseOptions,p=o.stringifyOptions,f=we(we({},Qs),c),m=we(we({},Zs),p),d=_t.useLocation(),v=(r=_t.useHistory)===null||r===void 0?void 0:r.call(_t),w=(a=_t.useNavigate)===null||a===void 0?void 0:a.call(_t),S=Oo(),I=u.useRef(typeof n=="function"?n():n||{}),h=u.useMemo(function(){return rn.parse(d.search,f)},[d.search]),y=u.useMemo(function(){return we(we({},I.current),h)},[h]),x=function(F){var D=typeof F=="function"?F(y):F;S(),v&&v[l]({hash:d.hash,search:rn.stringify(we(we({},h),D),m)||"?"}),w&&w({hash:d.hash,search:rn.stringify(we(we({},h),D),m)||"?"},{replace:l==="replace"})};return[y,No(x)]},el=globalThis&&globalThis.__read||function(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),a,o=[],i;try{for(;(n===void 0||n-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o};function tl(e,n){e===void 0&&(e=!1);var t=el(u.useState(e),2),r=t[0],a=t[1],o=u.useMemo(function(){var i=n===void 0?!e:n,l=function(){return a(function(d){return d===e?i:e})},c=function(d){return a(d)},p=function(){return a(e)},f=function(){return a(i)};return{toggle:l,set:c,setLeft:p,setRight:f}},[]);return[r,o]}var nl=globalThis&&globalThis.__read||function(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r=t.call(e),a,o=[],i;try{for(;(n===void 0||n-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(i)throw i.error}}return o};function rl(e){e===void 0&&(e=!1);var n=nl(tl(e),2),t=n[0],r=n[1],a=r.toggle,o=r.set,i=u.useMemo(function(){var l=function(){return o(!0)},c=function(){return o(!1)};return{toggle:a,set:function(f){return o(!!f)},setTrue:l,setFalse:c}},[]);return[t,i]}var al=function(n){return n.every(function(t){var r=Vn(t);if(!r)return!1;if(r.getRootNode()instanceof ShadowRoot)return!0})},il=function(n){return n?n.getRootNode():document},ol=function(n){if(!n||!document.getRootNode)return document;var t=Array.isArray(n)?n:[n];return al(t)?il(Vn(t[0])):document};const sl=ol;function ll(e,n,t){t===void 0&&(t="click");var r=hi(e);mi(function(){var a=function(c){var p=Array.isArray(n)?n:[n];p.some(function(f){var m=Vn(f);return!m||m.contains(c.target)})||r.current(c)},o=sl(n),i=Array.isArray(t)?t:[t];return i.forEach(function(l){return o.addEventListener(l,a)}),function(){i.forEach(function(l){return o.removeEventListener(l,a)})}},Array.isArray(t)?t:[t],n)}const Da=({id:e,x:n,y:t,width:r,height:a,style:o,color:i,strokeColor:l,strokeWidth:c,className:p,borderRadius:f,shapeRendering:m,onClick:d})=>{const{background:v,backgroundColor:w}=o||{},S=i||v||w;return s("rect",{className:Gt(["react-flow__minimap-node",p]),x:n,y:t,rx:f,ry:f,width:r,height:a,fill:S,stroke:l,strokeWidth:c,shapeRendering:m,onClick:d?I=>d(I,e):void 0})};Da.displayName="MiniMapNode";var cl=u.memo(Da);const dl=200,ul=150,fl=e=>{const n=e.getNodes(),t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:n.filter(r=>!r.hidden&&r.width&&r.height),viewBB:t,boundingRect:n.length>0?vi(wi(n,e.nodeOrigin),t):t,rfId:e.rfId,nodeOrigin:e.nodeOrigin}},Fn=e=>e instanceof Function?e:()=>e,pl="react-flow__minimap-desc";function Aa({style:e,className:n,nodeStrokeColor:t="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:o=5,nodeStrokeWidth:i=2,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:p=1,position:f="bottom-right",onClick:m,onNodeClick:d,pannable:v=!1,zoomable:w=!1,ariaLabel:S="React Flow mini map"}){const I=$r(),h=u.useRef(null),{boundingRect:y,viewBB:x,nodes:E,rfId:F,nodeOrigin:D}=qn(fl,Dr),O=(e==null?void 0:e.width)??dl,V=(e==null?void 0:e.height)??ul,ve=Fn(r),Me=Fn(t),tt=Fn(a),Rt=y.width/O,Tt=y.height/V,q=Math.max(Rt,Tt),Oe=q*O,ht=q*V,he=5*q,Ce=y.x-(Oe-y.width)/2-he,K=y.y-(ht-y.height)/2-he,nt=Oe+he*2,rt=ht+he*2,Pe=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",We=`${pl}-${F}`,Ie=u.useRef(0);Ie.current=q,u.useEffect(()=>{if(h.current){const H=gi(h.current),se=de=>{const{transform:ue,d3Selection:_e,d3Zoom:fe}=I.getState();if(de.sourceEvent.type!=="wheel"||!_e||!fe)return;const $e=-de.sourceEvent.deltaY*(de.sourceEvent.deltaMode===1?.05:de.sourceEvent.deltaMode?1:.002)*10,at=ue[2]*Math.pow(2,$e);fe.scaleTo(_e,at)},me=de=>{const{transform:ue,d3Selection:_e,d3Zoom:fe,translateExtent:$e,width:at,height:j}=I.getState();if(de.sourceEvent.type!=="mousemove"||!_e||!fe)return;const g={x:ue[0]-de.sourceEvent.movementX*Ie.current*Math.max(1,ue[2]),y:ue[1]-de.sourceEvent.movementY*Ie.current*Math.max(1,ue[2])},b=[[0,0],[at,j]],M=Ei.translate(g.x,g.y).scale(ue[2]),P=fe.constrain()(M,b,$e);fe.transform(_e,P)},Ve=yi().on("zoom",v?me:null).on("zoom.wheel",w?se:null);return H.call(Ve),()=>{H.on("zoom",null)}}},[v,w]);const ze=m?H=>{const se=xi(H);m(H,{x:se[0],y:se[1]})}:void 0,Z=d?(H,se)=>{const me=I.getState().nodeInternals.get(se);d(H,me)}:void 0;return s(Ar,{position:f,style:e,className:Gt(["react-flow__minimap",n]),children:N("svg",{width:O,height:V,viewBox:`${Ce} ${K} ${nt} ${rt}`,role:"img","aria-labelledby":We,ref:h,onClick:ze,children:[S&&s("title",{id:We,children:S}),E.map(H=>{const{x:se,y:me}=bi(H,D).positionAbsolute;return s(cl,{x:se,y:me,width:H.width,height:H.height,style:H.style,className:tt(H),color:ve(H),borderRadius:o,strokeColor:Me(H),strokeWidth:i,shapeRendering:Pe,onClick:Z,id:H.id},H.id)}),s("path",{className:"react-flow__minimap-mask",d:`M${Ce-he},${K-he}h${nt+he*2}v${rt+he*2}h${-nt-he*2}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:l,fillRule:"evenodd",stroke:c,strokeWidth:p,pointerEvents:"none"})]})})}Aa.displayName="MiniMap";var hl=u.memo(Aa);function ml(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function gl(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s("path",{d:"M0 0h32v4.2H0z"})})}function yl(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function bl(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function vl(){return s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const kt=({children:e,className:n,...t})=>s("button",{type:"button",className:Gt(["react-flow__controls-button",n]),...t,children:e});kt.displayName="ControlButton";const wl=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,La=({style:e,showZoom:n=!0,showFitView:t=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:o,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:p,children:f,position:m="bottom-left"})=>{const d=$r(),[v,w]=u.useState(!1),S=qn(wl),{zoomIn:I,zoomOut:h,fitView:y}=Kn();if(u.useEffect(()=>{w(!0)},[]),!v)return null;const x=()=>{I(),o==null||o()},E=()=>{h(),i==null||i()},F=()=>{y(a),l==null||l()},D=()=>{d.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),c==null||c(!S)};return N(Ar,{className:Gt(["react-flow__controls",p]),position:m,style:e,children:[n&&N(Q,{children:[s(kt,{onClick:x,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:s(ml,{})}),s(kt,{onClick:E,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:s(gl,{})})]}),t&&s(kt,{className:"react-flow__controls-fitview",onClick:F,title:"fit view","aria-label":"fit view",children:s(yl,{})}),r&&s(kt,{className:"react-flow__controls-interactive",onClick:D,title:"toggle interactivity","aria-label":"toggle interactivity",children:S?s(vl,{}):s(bl,{})}),f]})};La.displayName="Controls";var ka=u.memo(La),Ee;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Ee||(Ee={}));function El({color:e,dimensions:n,lineWidth:t}){return s("path",{stroke:e,strokeWidth:t,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function xl({color:e,radius:n}){return s("circle",{cx:n,cy:n,r:n,fill:e})}const Sl={[Ee.Dots]:"#91919a",[Ee.Lines]:"#eee",[Ee.Cross]:"#e2e2e2"},Ml={[Ee.Dots]:1,[Ee.Lines]:1,[Ee.Cross]:6},Cl=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function za({variant:e=Ee.Dots,gap:n=20,size:t,lineWidth:r=1,color:a,style:o,className:i}){const l=u.useRef(null),{transform:c,patternId:p}=qn(Cl,Dr),f=a||Sl[e],m=t||Ml[e],d=e===Ee.Dots,v=e===Ee.Cross,w=Array.isArray(n)?n:[n,n],S=[w[0]*c[2]||1,w[1]*c[2]||1],I=m*c[2],h=v?[I,I]:S,y=d?[I/2,I/2]:[h[0]/2,h[1]/2];return N("svg",{className:Gt(["react-flow__background",i]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:l,children:[s("pattern",{id:p,x:c[0]%S[0],y:c[1]%S[1],width:S[0],height:S[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${y[0]},-${y[1]})`,children:d?s(xl,{color:f,radius:I/2}):s(El,{dimensions:h,color:f,lineWidth:r})}),s("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p})`})]})}za.displayName="Background";var Fl=u.memo(za);const Nl=e=>{let n=e,t=n.offsetLeft,r=n.offsetTop;for(;n.offsetParent!==null;)n=n.offsetParent,t+=n.offsetLeft,r+=n.offsetTop;return{left:t,top:r}};var Rl=["fieldProps","min","proFieldProps","max"],Tl=function(n,t){var r=n.fieldProps,a=n.min,o=n.proFieldProps,i=n.max,l=pn(n,Rl);return s(hn,ce({valueType:"digit",fieldProps:ce({min:a,max:i},r),ref:t,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:o},l))},Ol=re.forwardRef(Tl);const $t=Ol;var Pl=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Il=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],_l=re.forwardRef(function(e,n){var t=e.fieldProps,r=e.children,a=e.params,o=e.proFieldProps,i=e.mode,l=e.valueEnum,c=e.request,p=e.showSearch,f=e.options,m=pn(e,Pl),d=u.useContext(Lr);return s(hn,ce(ce({valueEnum:kr(l),request:c,params:a,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:ce({options:f,mode:i,showSearch:p,getPopupContainer:d.getPopupContainer},t),ref:n,proFieldProps:o},m),{},{children:r}))}),$l=re.forwardRef(function(e,n){var t=e.fieldProps,r=e.children,a=e.params,o=e.proFieldProps,i=e.mode,l=e.valueEnum,c=e.request,p=e.options,f=pn(e,Il),m=ce({options:p,mode:i||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},t),d=u.useContext(Lr);return s(hn,ce(ce({valueEnum:kr(l),request:c,params:a,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:ce({getPopupContainer:d.getPopupContainer},m),ref:n,proFieldProps:o},f),{},{children:r}))}),Dl=_l,Al=$l,er=Dl;er.SearchSelect=Al;er.displayName="ProFormComponent";const ja=er;var Ll=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],kl=re.forwardRef(function(e,n){var t=e.fieldProps,r=e.unCheckedChildren,a=e.checkedChildren,o=e.proFieldProps,i=pn(e,Ll);return s(hn,ce({valueType:"switch",fieldProps:ce({unCheckedChildren:r,checkedChildren:a},t),ref:n,valuePropName:"checked",proFieldProps:o,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},i))});const Bn=kl;class zl{constructor(n){A(this,"file");A(this,"state");A(this,"subState",{page:{}});this.file=n,this.state={id:n.meta.id,name:n.meta.name,user:{name:"张三",email:"zhangsan@gmail.com",id:"zhangsan"}},Si(this)}}class jl{constructor(n){A(this,"file");A(this,"state");A(this,"subState",{widget:{}});this.file=n,this.state={id:n.meta.id,name:n.meta.name},Se(this,{file:oe,state:oe,subState:oe,subWidgetNameState:B.struct})}get subWidgetNameState(){return Object.values(this.subState.widget).reduce((n,t)=>(T.isArray(t)?n[t[0].file.meta.name]=t:n[t.file.meta.name]=t,n),{})}}const Bl=({id:e,sourceX:n,sourceY:t,targetX:r,targetY:a,sourcePosition:o,targetPosition:i,style:l={},markerEnd:c})=>{const p=n===r,f=t===a,[m]=Mi({sourceX:p?n+1e-4:n,sourceY:f?t+1e-4:t,sourcePosition:o,targetX:r,targetY:a,targetPosition:i});return s(Q,{children:s("path",{id:e,style:l,className:"react-flow__edge-path",d:m,markerEnd:c})})},Hl=({data:e})=>s(Q,{children:s("div",{className:"wrapper gradient",children:N("div",{className:"inner",children:[N("div",{className:"body",children:[e.icon&&s("div",{className:"icon",children:e.icon}),N("div",{children:[s("div",{className:"title",children:e.title}),e.subline&&s("div",{className:"subline",children:e.subline})]})]}),s(An,{type:"target",position:on.Left}),s(An,{type:"source",position:on.Right})]})})}),Ul=u.memo(Hl);class Je{constructor({fileType:n,meta:t,parentFile:r}){A(this,"parentFile");A(this,"fileType");A(this,"meta");A(this,"disposer");this.fileType=n,this.meta=t,this.parentFile=r,Se(this,{meta:oe,fileType:oe,parentFile:oe,updateMeta:ye});const a=or(()=>zr(this.meta),i=>{sn.emit("updateFileMeta",i)},{fireImmediately:!0,delay:300}),o=or(()=>T.mapValues(this.subFileMap,i=>i.reduce((l,c)=>(l[c.meta.id]=c,l),{})),(i,l)=>{l&&Object.entries(l).forEach(([c,p])=>Object.entries(p).forEach(([f,m])=>{T.get(i,[c,f])||m.disposer()}))},{fireImmediately:!0,delay:300});this.disposer=()=>{sn.emit("updateFileMeta",null),a(),o()}}updateMeta(n){T.isFunction(n)?this.meta=n(this.meta):this.meta=n}subFileMapToJson(){return T.mapValues(this.subFileMap,n=>n.map(t=>t.toJSON()))}static fromJSON(){throw new Error(`【${this.name}】未实现formJson方法`)}static create(n,t){throw new Error(`【${this.name}】未实现create方法`)}}var C=(e=>(e.Text="Text",e.LongText="LongText",e.Date="Date",e.DateTime="DateTime",e.Enum="Enum",e.Number="Number",e.AutoNumber="AutoNumber",e.PhoneNumber="PhoneNumber",e.Email="Email",e.URL="URL",e.Image="Image",e))(C||{}),vn=(e=>(e.MasterDetail="MasterDetail",e.Lookup="Lookup",e))(vn||{}),zt=(e=>(e.ManyToOne="ManyToOne",e.OneToOne="OneToOne",e))(zt||{}),dt=(e=>(e.ManyToMany="ManyToMany",e.ManyToOne="ManyToOne",e))(dt||{}),ke=(e=>(e.App="App",e.Page="Page",e.Widget="Widget",e.View="View",e.Entity="Entity",e.EntityRelation="EntityRelation",e.EntityField="EntityField",e.Flow="Flow",e.FlowNode="FlowNode",e.FlowEdge="FlowEdge",e))(ke||{});class ut extends Je{constructor(t,r){super({fileType:ke.EntityField,meta:t,parentFile:r});A(this,"subFileMap",{});Se(this,{subFileMap:oe})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new ut({...t,version:"0.0.1"},r);return r.entityFields.push(a),a})}static formJSON(t,r){return ut.create(T.omit(t,"fileType"),r)}}class qt extends Je{constructor(t,r){super({fileType:ke.EntityRelation,meta:t,parentFile:r});A(this,"subFileMap",{});Se(this,{subFileMap:oe})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new qt(t,r);return r.entityRelations.push(a),a})}static formJSON(t,r){return qt.create(T.omit(t,"fileType"),r)}}const un=class extends Je{constructor(t,r){super({fileType:ke.Entity,meta:t,parentFile:r});A(this,"subFileMap",{entityFields:[],entityRelations:[]});Se(this,{subFileMap:oe,entityFields:B,entityRelations:B,deleteEntityField:ye})}get entityFields(){return this.subFileMap.entityFields}deleteEntityField(t){const r=[...this.subFileMap.entityFields];this.subFileMap.entityFields.length=0,this.subFileMap.entityFields.push(...r.filter(a=>a.meta.id!==t))}get entityRelations(){return this.subFileMap.entityRelations}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new un({...t,version:"0.0.1"},r);return r.entities.push(a),a})}static formJSON(t,r){return Y(()=>{const a=un.create(T.omit(t,["fileType","entityFields","entityRelations"]),r);return t.entityFields.map(o=>ut.formJSON(o,a)),t.entityRelations.map(o=>qt.formJSON(o,a)),a})}};let ee=un;A(ee,"getEntityFieldTypeLabel",t=>{switch(t){case C.AutoNumber:return"自动编号";case C.Date:return"日期";case C.DateTime:return"日期时间";case C.Number:return"数字";case C.Email:return"邮箱";case C.Enum:return"枚举";case C.LongText:return"长文本";case C.Text:return"单行文本";case C.PhoneNumber:return"手机号";case C.URL:return"网址";case C.Image:return"图片";default:return"未知"}});class Et extends Je{constructor(t,r){super({fileType:ke.FlowNode,meta:t,parentFile:r});A(this,"tempMeta",{});A(this,"subFileMap",{});Se(this,{subFileMap:oe,tempMeta:oe,reactFlowMeta:B.struct})}get reactFlowMeta(){return{...this.tempMeta,id:this.meta.id,type:this.meta.type,position:this.meta.position,data:this}}set reactFlowMeta(t){Y(()=>{this.meta.position=t.position,this.tempMeta=t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new Et({...t,version:"0.0.1"},r);return r.flowNodes.push(a),a})}static formJSON(t,r){return Et.create(T.omit(t,"fileType"),r)}}class Kt extends Je{constructor(t,r){super({fileType:ke.Flow,meta:t,parentFile:r});A(this,"subFileMap",{flowNodes:[],flowEdges:[]});A(this,"onReactFlowNodesChange",t=>{Y(()=>{const r=jr(t,this.reactFlowNodes);this.subFileMap.flowNodes.length=0,r.forEach(a=>{a.data.reactFlowMeta=a,this.subFileMap.flowNodes.push(a.data)})})});A(this,"updateReactFlowEdges",t=>{Y(()=>{this.subFileMap.flowEdges.length=0,t.forEach(r=>{r.data?(r.data.reactFlowMeta={...r.data.meta,...r},this.subFileMap.flowEdges.push(r.data)):r.data=St.create({name:"",id:r.id,source:r.source,sourceHandle:r.sourceHandle,target:r.target,targetHandle:r.targetHandle},this)})})});A(this,"onReactFlowEdgesChange",t=>{const r=Ci(t,this.reactFlowEdges);this.updateReactFlowEdges(r)});A(this,"onReactFlowConnect",t=>{const r=Br(t,this.reactFlowEdges);this.updateReactFlowEdges(r)});Se(this,{subFileMap:oe,flowNodes:B,flowEdges:B,reactFlowNodes:B.struct,deleteNode:ye,deleteEdge:ye,onReactFlowEdgesChange:ye,onReactFlowNodesChange:ye,onReactFlowConnect:ye})}get flowNodes(){return this.subFileMap.flowNodes}get flowEdges(){return this.subFileMap.flowEdges}get reactFlowNodes(){return this.flowNodes.map(t=>t.reactFlowMeta)}get reactFlowEdges(){return this.flowEdges.map(t=>t.reactFlowMeta)}deleteNode(t){const r=this.subFileMap.flowEdges.filter(o=>o.meta.target!==t&&o.meta.source!==t);this.subFileMap.flowEdges.length=0,this.subFileMap.flowEdges.push(...r);const a=this.subFileMap.flowNodes.filter(o=>o.meta.id!==t);this.subFileMap.flowNodes.length=0,this.subFileMap.flowNodes.push(...a)}deleteEdge(t){const r=this.subFileMap.flowEdges.filter(a=>a.meta.id!==t);this.subFileMap.flowEdges.length=0,this.subFileMap.flowEdges.push(...r)}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new Kt({...t,version:"0.0.1"},r);return r.flows.push(a),a})}static formJSON(t,r){return Y(()=>{const a=Kt.create(T.omit(t,["fileType","flowNodes"]),r);return t.flowNodes.map(o=>Et.formJSON(o,a)),t.flowEdges.map(o=>St.formJSON(o,a)),a})}}var ot=(e=>(e[e.ROOT=0]="ROOT",e[e.ELEMENT=1]="ELEMENT",e[e.TEXT=2]="TEXT",e[e.COMMENT=3]="COMMENT",e[e.SIMPLE_EXPRESSION=4]="SIMPLE_EXPRESSION",e[e.INTERPOLATION=5]="INTERPOLATION",e[e.ATTRIBUTE=6]="ATTRIBUTE",e[e.DIRECTIVE=7]="DIRECTIVE",e[e.COMPOUND_EXPRESSION=8]="COMPOUND_EXPRESSION",e[e.IF=9]="IF",e[e.IF_BRANCH=10]="IF_BRANCH",e[e.FOR=11]="FOR",e[e.TEXT_CALL=12]="TEXT_CALL",e[e.VNODE_CALL=13]="VNODE_CALL",e[e.JS_CALL_EXPRESSION=14]="JS_CALL_EXPRESSION",e[e.JS_OBJECT_EXPRESSION=15]="JS_OBJECT_EXPRESSION",e[e.JS_PROPERTY=16]="JS_PROPERTY",e[e.JS_ARRAY_EXPRESSION=17]="JS_ARRAY_EXPRESSION",e[e.JS_FUNCTION_EXPRESSION=18]="JS_FUNCTION_EXPRESSION",e[e.JS_CONDITIONAL_EXPRESSION=19]="JS_CONDITIONAL_EXPRESSION",e[e.JS_CACHE_EXPRESSION=20]="JS_CACHE_EXPRESSION",e[e.JS_BLOCK_STATEMENT=21]="JS_BLOCK_STATEMENT",e[e.JS_TEMPLATE_LITERAL=22]="JS_TEMPLATE_LITERAL",e[e.JS_IF_STATEMENT=23]="JS_IF_STATEMENT",e[e.JS_ASSIGNMENT_EXPRESSION=24]="JS_ASSIGNMENT_EXPRESSION",e[e.JS_SEQUENCE_EXPRESSION=25]="JS_SEQUENCE_EXPRESSION",e[e.JS_RETURN_STATEMENT=26]="JS_RETURN_STATEMENT",e))(ot||{});class ft extends Je{constructor(t,r){super({fileType:ke.Widget,meta:t,parentFile:r});A(this,"stateTypeDefs");A(this,"subFileMap",{});const a=new Fi({});this.stateTypeDefs=a.appFactory.widgetByType[t.type].stateTypeDefs,Se(this,{subFileMap:oe,flattenedMetaValMap:B.struct,slots:B.struct})}get flattenedMetaValMap(){return T.mapValues(Ni.flatten(zr(this.meta.props)),t=>{var r,a,o,i,l,c,p,f;if(Ri(t)){const m=Ti(t);let d;return m.children.length===1&&((r=T.head(m.children))==null?void 0:r.type)===ot.INTERPOLATION||m.children.length===2&&((a=T.head(m.children))==null?void 0:a.type)===ot.INTERPOLATION&&((o=T.last(m.children))==null?void 0:o.type)===ot.TEXT&&((i=T.last(m.children))==null?void 0:i.content.trim())==="}"?(d=((l=T.head(m.children))==null?void 0:l.content).content||"",((c=T.last(m.children))==null?void 0:c.type)===ot.TEXT&&((p=T.last(m.children))==null?void 0:p.content.trim())==="}"&&(d+=((f=T.last(m.children))==null?void 0:f.content)??"")):d=`\`${m.children.map(v=>{if(v.type===ot.TEXT)return v.content;if(v.type===ot.INTERPOLATION){const w=v.content.content;return w?`\${${w}}`:""}return v.loc.source}).join("")}\``,{type:"Expression",raw:t,ast:m,evalString:d}}else return{type:"Normal",raw:t}})}get slots(){return{...this.meta.slots,...T.mapValues(this.meta.dynamicSlots||{},t=>t.children)}}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new ft({...t,version:"0.0.1"},r);return r.widgets.push(a),a})}static formJSON(t,r){return ft.create(T.omit(t,"fileType"),r)}}class xt extends Je{constructor(t,r){super({fileType:ke.App,meta:t,parentFile:r});A(this,"subFileMap",{widgets:[],flows:[]});A(this,"deleteFlow",t=>{const r=[...this.subFileMap.flows];this.subFileMap.flows.length=0,this.subFileMap.flows.push(...r.filter(a=>a.meta.id!==t))});A(this,"getWidgetStateDefs",()=>{const t="!define",r={"!name":"DATA_TREE",[t]:{},i:{"!type":"number","!doc":"组件当前所在上下文的层级"},currentRow:{"!doc":"当前行数据"}};return this.subFileMap.widgets.forEach(a=>{Reflect.set(r,a.meta.name,T.omit(a.stateTypeDefs,t)),r[t]={...r[t],...a.stateTypeDefs[t]}}),r});Se(this,{subFileMap:oe,widgets:B,widgetMap:B.struct,widgetRelationById:B.struct,addWidget:ye,deleteWidget:ye,updateWidgets:ye,moveWidget:ye,flows:B})}get widgets(){return this.subFileMap.widgets}get flows(){return this.subFileMap.flows}get flowMap(){return T.keyBy(this.subFileMap.flows,t=>t.meta.id)}get widgetMap(){return T.keyBy(this.subFileMap.widgets,t=>t.meta.id)}get widgetRelationById(){return this.widgets.reduce((t,r)=>{const a=r.meta.id;Reflect.has(t,a)||(t[a]={props:r.meta,file:r,slotPath:""});const o=t[a];return T.isEmpty(r.slots)||Object.entries(r.slots).forEach(([i,l])=>{l.forEach(c=>{Reflect.has(t,c)?(t[c].parent=o,t[c].slotPath=i):t[c]={props:this.widgetMap[c].meta,file:this.widgetMap[c],parent:o,slotPath:i}})}),t},{})}addWidget({sourceWidgetMeta:t,targetPosition:r,targetSlotPath:a,targetWidgetId:o}){const i=this.widgetMap[o];if(!i)return;const l=ft.create(t,this);i.slots[a].splice(r,0,l.meta.id)}moveWidget({sourceWidgetId:t,targetWidgetId:r,targetPosition:a,targetSlotPath:o}){let i=-1;this.subFileMap.widgets.forEach(l=>{var c,p;T.isObject(l.slots)&&Object.keys(l.slots).forEach(f=>{i===-1&&(i=l.slots[f].findIndex(m=>m===t),i!==-1&&l.slots[f].splice(i,1))}),l.meta.id===r&&(((p=(c=this.widgetRelationById[t])==null?void 0:c.parent)==null?void 0:p.props.id)===r&&this.widgetRelationById[t].slotPath===o?l.slots[o].splice(i<a?a-1:a,0,t):l.slots[o].splice(a,0,t))})}deleteWidget(t,r=!0){this.subFileMap.widgets.forEach(i=>{T.isObject(i.slots)&&Object.keys(i.slots).forEach(l=>{const c=i.slots[l].findIndex(p=>p===t);c!==-1&&i.slots[l].splice(c,1)})});const a=[t],o=[this.subFileMap.widgets.find(i=>i.meta.id===t)];for(;!T.isEmpty(o);){const i=o.shift();T.isObject(i.slots)&&Object.values(i.slots).forEach(l=>{l.forEach(c=>{a.push(c),o.push(this.subFileMap.widgets.find(p=>p.meta.id===c))})})}a.forEach(i=>{const l=this.subFileMap.widgets.findIndex(c=>c.meta.id===i);l!==-1&&this.subFileMap.widgets.splice(l,1)})}updateWidgets(t){const r=[...this.subFileMap.widgets];this.subFileMap.widgets.length=0,T.isFunction(t)?this.subFileMap.widgets.push(...t(r)):this.subFileMap.widgets.push(...t)}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new xt({...t,version:"0.0.1"},r);return r.pages.push(a),a})}static formJSON(t,r){return Y(()=>{const a=xt.create(T.omit(t,["fileType","widgets"]),r);return t.widgets.map(o=>ft.formJSON(o,a)),t.flows.map(o=>Kt.formJSON(o,a)),a})}}class Xt extends Je{constructor(t){super({fileType:ke.App,meta:t,parentFile:null});A(this,"subFileMap",{pages:[],entities:[],flows:[]});A(this,"persistMeta",()=>{typeof window>"u"||window.localStorage.setItem(this.meta.id,JSON.stringify(this.toJSON()))});A(this,"disposer",()=>{super.disposer(),sn.off("updateFileMeta",this.persistMeta)});A(this,"deletePage",t=>{const r=[...this.subFileMap.pages];this.subFileMap.pages.length=0,this.subFileMap.pages.push(...r.filter(a=>a.meta.id!==t))});A(this,"deleteFlow",t=>{const r=[...this.subFileMap.flows];this.subFileMap.flows.length=0,this.subFileMap.flows.push(...r.filter(a=>a.meta.id!==t))});A(this,"deleteEntity",t=>{const r=[...this.subFileMap.entities];this.subFileMap.entities.length=0,this.subFileMap.entities.push(...r.filter(a=>a.meta.id!==t))});Se(this,{subFileMap:oe,entities:B.struct,pages:B.struct,entityMap:B.struct,entityRelationMap:B.struct,entityRelationsByTargetEntityNameMap:B.struct,entityRelationsBySourceEntityNameMap:B.struct,deleteEntity:ye,deletePage:ye}),sn.on("updateFileMeta",this.persistMeta)}get pages(){return this.subFileMap.pages}set pages(t){Y(()=>{this.subFileMap.pages.length=0,this.subFileMap.pages.push(...t)})}get flows(){return this.subFileMap.flows}set flows(t){Y(()=>{this.subFileMap.flows.length=0,this.subFileMap.flows.push(...t)})}get entities(){return this.subFileMap.entities}set entities(t){Y(()=>{this.subFileMap.entities.length=0,this.subFileMap.entities.push(...t)})}get entityMap(){return T.keyBy(this.entities,t=>t.meta.id)}get entityRelationMap(){return this.entities.reduce((t,r)=>({...t,...T.keyBy(r.subFileMap.entityRelations,a=>a.meta.id)}),{})}get entityRelationsByTargetEntityNameMap(){return Object.values(this.entityRelationMap).reduce((t,r)=>{const a=r.meta.targetEntity;return T.isArray(t[a])||(t[a]=[]),t[a].push(r),t},{})}get entityRelationsBySourceEntityNameMap(){return Object.values(this.entityRelationMap).reduce((t,r)=>{const a=r.meta.sourceEntity;return T.isArray(t[a])||(t[a]=[]),t[a].push(r),t},{})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t){return new Xt(t)}static formJSON(t){return Y(()=>{const r=Xt.create({name:t.name,id:t.id,version:t.version});return t.entities.map(a=>ee.formJSON(a,r)),t.pages.map(a=>xt.formJSON(a,r)),r})}}class xr{constructor(n){A(this,"root");this.root=n,Se(this,{app:B,pageMap:B.struct,entityMap:B.struct,widgetMap:B.struct,entityFieldMap:B.struct,entityRelationMap:B.struct})}get app(){return this.root}get pageMap(){return new Map(this.app.pages.map(n=>[n.meta.id,n]))}get entityMap(){return new Map(this.app.entities.map(n=>[n.meta.id,n]))}get widgetMap(){return this.app.pages.reduce((n,t)=>({...n,...t.widgetMap}),{})}get entityFieldMap(){return new Map(T.flatten(this.app.entities.map(n=>n.subFileMap.entityFields.map(t=>[t.meta.id,t]))))}get entityRelationMap(){return new Map(T.flatten(this.app.entities.map(n=>n.subFileMap.entityRelations.map(t=>[t.meta.id,t]))))}}class St extends Je{constructor(t,r){super({fileType:ke.FlowEdge,meta:t,parentFile:r});A(this,"tempMeta",{});A(this,"subFileMap",{});Se(this,{subFileMap:oe})}get reactFlowMeta(){return{...this.tempMeta,...this.meta,data:this}}set reactFlowMeta(t){Y(()=>{this.meta.source=t.source,this.meta.target=t.target,this.meta.sourceHandle=t.sourceHandle,this.meta.targetHandle=t.targetHandle,this.tempMeta=t})}toJSON(){return{...this.meta,...this.subFileMapToJson(),fileType:this.fileType}}static create(t,r){return Y(()=>{const a=new St({...t,version:"0.0.1"},r);return r.flowEdges.push(a),a})}static formJSON(t,r){return St.create(T.omit(t,"fileType"),r)}}const Jl=({position:e,open:n,file:t,setOpen:r,connectionSourceRef:a})=>{const{appFactory:o}=Hr(),{project:i}=Kn(),l=Object.values(o.flowNodeByType).filter(p=>![Ur.START_NODE].includes(p.metadata.type)),c=u.useRef(null);return ll(p=>{r(!1)},c),n?s(Ht,{ref:c,size:"small",className:Sr.wrapper,style:{left:e.x,top:e.y},children:l.map(p=>s("div",{className:Sr.node,onClick:()=>{var m,d,v,w;const f=Et.create({...Jr.mrSchemeToDefaultJson(o.flowNodeByType[p.metadata.type].metadata.jsonPropsSchema),id:G(),position:i({x:e.x,y:e.y})},t);a&&((m=a.current)==null?void 0:m.handleType)==="source"&&St.create({name:"",id:G(),source:(d=a.current)==null?void 0:d.nodeId,target:f.meta.id,sourceHandle:(v=a.current)==null?void 0:v.handleId,targetHandle:(w=f.meta.targets[0])==null?void 0:w.name},t),a.current=null,r(!1)},children:p.metadata.name},p.metadata.type))}):null},Sr={wrapper:R`
    position: absolute;
    left: 0;
    top: 0;
    z-index: 999999;
    .ant-card-body{
      padding: 0;
    }
  `,node:R`
    font-size: 12px;
    padding: 4px 16px;
    cursor: default;
    &+&{
      border-top: 1px solid rgba(0,0,0,.1);
    }
  `},Wl={turbo:Ul},Vl={turbo:Bl},ql={type:"turbo"},Kl=({file:e})=>{const{appFactory:n}=Hr(),[t,r]=u.useState(!1),[a,o]=u.useState({x:0,y:0}),i=u.useMemo(()=>({...Wl,...T.mapValues(n.flowNodeByType,v=>v.component)}),[]),l=At(v=>{const w=v.target;if(!w.classList.contains("react-flow__pane"))return;const{left:S,top:I}=Nl(w);o({x:v.clientX-S,y:v.clientY-I}),setTimeout(()=>{r(!0)}),v.preventDefault()}),c=u.useRef(!1),p=u.useRef(null),f=At(v=>{c.current=!0,p.current=null,e.onReactFlowConnect(v)}),m=At((v,w)=>{p.current=w}),d=At(v=>{c.current||(c.current=!1,l(v))});return s("div",{className:Mr.wrapper,children:N(Q,{children:[s(Jl,{connectionSourceRef:p,position:a,open:t,file:e,setOpen:r}),N(Wr,{className:Mr.reactFlow,nodes:e.reactFlowNodes,edges:e.reactFlowEdges,onNodesChange:e.onReactFlowNodesChange,onEdgesChange:e.onReactFlowEdgesChange,onConnect:f,onConnectEnd:d,onConnectStart:m,fitView:!0,maxZoom:1,minZoom:1,nodeTypes:i,edgeTypes:Vl,defaultEdgeOptions:ql,onContextMenu:l,children:[s(ka,{showInteractive:!1}),s("svg",{children:N("defs",{children:[N("linearGradient",{id:"edge-gradient",children:[s("stop",{offset:"0%",stopColor:"#ae53ba"}),s("stop",{offset:"100%",stopColor:"#2a8af6"})]}),s("marker",{id:"edge-circle",viewBox:"-5 -5 10 10",refX:"0",refY:"0",markerUnits:"strokeWidth",markerWidth:"10",markerHeight:"10",orient:"auto",children:s("circle",{stroke:"#2a8af6",strokeOpacity:"0.75",r:"2",cx:"0",cy:"0"})})]})})]})]})})},Xl=Te(Kl),Gl=e=>s(Oi,{children:s(Xl,{...e})}),Mr={wrapper:R`
    position: relative;
    height: 100%;
  `,reactFlow:R`
    //--bg-color: rgb(17, 17, 17);
    --bg-color: rgb(255,255,255);
    //--text-color: rgb(243, 244, 246);
    --text-color: rgb(0, 0, 0);
    --node-border-radius: 10px;
    --node-box-shadow: 10px 0 15px rgba(42, 138, 246, 0.3), -10px 0 15px rgba(233, 42, 103, 0.3);
    background-color: var(--bg-color);
    color: var(--text-color);

    .react-flow__node-turbo {
      border-radius: var(--node-border-radius);
      display: flex;
      height: 70px;
      min-width: 150px;
      font-weight: 500;
      letter-spacing: -0.2px;
      box-shadow: var(--node-box-shadow);
    }

    .react-flow__node-turbo .wrapper {
      overflow: hidden;
      display: flex;
      padding: 2px;
      position: relative;
      border-radius: var(--node-border-radius);
      flex-grow: 1;
    }

    .gradient:before {
      content: '';
      position: absolute;
      padding-bottom: calc(100% * 1.41421356237);
      width: calc(100% * 1.41421356237);
      background: conic-gradient(
                from -160deg at 50% 50%,
              #e92a67 0deg,
              #a853ba 120deg,
              #2a8af6 240deg,
              #e92a67 360deg
      );
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      border-radius: 100%;
    }

    .react-flow__node-turbo.selected .wrapper.gradient:before {
      content: '';
      background: conic-gradient(
                from -160deg at 50% 50%,
              #e92a67 0deg,
              #a853ba 120deg,
              #2a8af6 240deg,
              rgba(42, 138, 246, 0) 360deg
      );
      animation: spinner 4s linear infinite;
      transform: translate(-50%, -50%) rotate(0deg);
      z-index: -1;
    }

    @keyframes spinner {
      100% {
        transform: translate(-50%, -50%) rotate(-360deg);
      }
    }

    .react-flow__node-turbo .inner {
      background: var(--bg-color);
      padding: 16px 20px;
      border-radius: var(--node-border-radius);
      display: flex;
      flex-direction: column;
      justify-content: center;
      flex-grow: 1;
      position: relative;
    }

    .react-flow__node-turbo .icon {
      margin-right: 8px;
    }

    .react-flow__node-turbo .body {
      display: flex;
    }

    .react-flow__node-turbo .title {
      font-size: 16px;
      margin-bottom: 2px;
      line-height: 1;
    }

    .react-flow__node-turbo .subline {
      font-size: 12px;
      color: #777;
    }

    .react-flow__node-turbo .cloud {
      border-radius: 100%;
      width: 30px;
      height: 30px;
      right: 0;
      position: absolute;
      top: 0;
      transform: translate(50%, -50%);
      display: flex;
      transform-origin: center center;
      padding: 2px;
      overflow: hidden;
      box-shadow: var(--node-box-shadow);
      z-index: 1;
    }

    .react-flow__node-turbo .cloud div {
      background-color: var(--bg-color);
      flex-grow: 1;
      border-radius: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    
    .react-flow__node:focus {
      outline: none;
    }

    .react-flow__edge .react-flow__edge-path {
      stroke: url(#edge-gradient);
      stroke-width: 2;
      stroke-opacity: 0.75;
    }

    .react-flow__controls button {
      background-color: var(--bg-color);
      color: var(--text-color);
      border: 1px solid #95679e;
      border-bottom: none;
    }

    .react-flow__controls button:hover {
      background-color: rgb(37, 37, 37);
    }

    .react-flow__controls button:first-child {
      border-radius: 5px 5px 0 0;
    }

    .react-flow__controls button:last-child {
      border-bottom: 1px solid #95679e;
      border-radius: 0 0 5px 5px;
    }

    .react-flow__controls button path {
      fill: var(--text-color);
    }

    .react-flow__attribution {
      background: rgba(200, 200, 200, 0.2);
    }

    .react-flow__attribution a {
      color: #95679e;
    }
  `},Yl=({file:e})=>s("div",{className:Ql.wrapper,children:s(Gl,{file:e})}),Ql={wrapper:R({name:"dsuszh",styles:"height:100%;flex:1;border:1px solid red"})};/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zl(e){let{basename:n,children:t,window:r}=e,a=u.useRef();a.current==null&&(a.current=Lo({window:r,v5Compat:!0}));let o=a.current,[i,l]=u.useState({action:o.action,location:o.location});return u.useLayoutEffect(()=>o.listen(l),[o]),u.createElement(bn,{basename:n,children:t,location:i.location,navigationType:i.action,navigator:o})}var Cr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Cr||(Cr={}));var Fr;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Fr||(Fr={}));const ec=({activeFlowId:e,setActiveFlowId:n})=>{const{appManager:t}=xe(),{pageId:r}=et(),a=t.pageMap.get(r),[o]=Ke.useForm(),i=c=>s(Xr,{children:()=>s(Jt.Item,{className:Dt.listItem,onClick:()=>{n(c.meta.id)},children:N("div",{className:Dt.listItemContent,children:[c.meta.id===e?s(te.Link,{children:c.meta.name}):s(te.Text,{children:c.meta.name}),s(Gr,{trigger:["hover"],menu:{onClick:({key:p})=>{switch(p){case"Delete":a.deleteFlow(c.meta.id);break}},items:[{label:s(te.Text,{children:"复制"}),key:"Copy"},{label:s(te.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:s(la,{className:`${Dt.moreAction} mm_p-list_item_more_action`})},c.meta.id)]})})}),l=u.useContext(Vr);return N("div",{className:Dt.wrapper,children:[s("div",{className:Dt.createWrapper,children:s(qr,{form:o,layout:"horizontal",title:"创建流",modalProps:{mask:!1},onFinish:async c=>{await o.validateFields();const p=Kt.create({id:G(),name:c.name},a);return Et.create({...Jr.mrSchemeToDefaultJson(l.flowNodeByType[Ur.START_NODE].metadata.jsonPropsSchema),id:G(),position:{x:100,y:100}},p),o.resetFields(),!0},trigger:N(be,{type:"link",shape:"circle",size:"small",children:[s(Kr,{}),s("span",{children:"创建流"})]}),children:s(De,{rules:[{required:!0,message:"请输入流名称"}],name:"name",label:"流名称",placeholder:"请输入流名称"})})}),s("div",{children:s(Jt,{dataSource:[...a.flows],size:"small",rowKey:c=>c.meta.id,renderItem:i})})]})},tc=Te(ec),Dt={wrapper:R({name:"16cnhe2",styles:"width:220px;border:1px solid green;background-color:white;padding:0 16px 16px"}),createWrapper:R({name:"2qga7i",styles:"text-align:right"}),listItem:R({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:R({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:R({name:"eivff4",styles:"display:none"})},nc=({parentFile:e})=>{const[n,t]=Zn({flowId:""}),r=e.flowMap[n.flowId],a=At(o=>{t({flowId:o})});return N("div",{className:Nr.wrapper,children:[s(tc,{activeFlowId:n.flowId,setActiveFlowId:a}),r?s(Yl,{file:r}):s(Yr,{description:"暂未选中流",className:Nr.empty})]})},rc=Te(nc),Nr={wrapper:R({name:"avtkh9",styles:"height:100%;width:100%;display:flex;flex-direction:row"}),empty:R({name:"cjtway",styles:"height:100%;flex:1;display:flex;align-items:center;justify-content:center"})},le={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};function Mt(e,n){return pa(e,n)}var Ne=(e=>(e.Page="Page",e.Entity="Entity",e))(Ne||{});const ac=()=>s("div",{children:"ModuleManagerEntity"}),ic=({searchVal:e,itemAddRef:n})=>{const{app:t}=xe(),{appId:r,pageId:a}=et(),o=Ze(),l=xe().app.pages.filter(f=>f.meta.name.includes(e)),[c]=Ke.useForm(),p=f=>s(Xr,{children:()=>s(Jt.Item,{className:Nn.listItem,onClick:()=>{o(Mt(le.PAGE,{appId:r,pageId:f.meta.id}))},children:N("div",{className:Nn.listItemContent,children:[f.meta.id===a?s(te.Link,{children:f.meta.name}):s(te.Text,{children:f.meta.name}),s(Gr,{trigger:["hover"],menu:{onClick:({key:m})=>{switch(m){case"Delete":t.deletePage(f.meta.id);break}},items:[{label:s(te.Text,{children:"复制"}),key:"Copy"},{label:s(te.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:s(la,{className:`${Nn.moreAction} mm_p-list_item_more_action`})},f.meta.id)]})})});return N(Q,{children:[n&&Qr.createPortal(s(qr,{form:c,layout:"horizontal",title:"创建页面",modalProps:{mask:!1},onFinish:async f=>{await c.validateFields(),console.log(f);const m=G(),d=xt.create({id:G(),name:f.name,rootWidgetId:m},t);return ft.create({...nn.mrSchemeToDefaultJson(Zr.jsonPropsSchema),id:m,slots:{children:[]}},d),c.resetFields(),!0},trigger:s(be,{type:"text",shape:"circle",size:"small",children:s(Kr,{})}),children:s(De,{rules:[{required:!0,message:"请输入页面名称"}],name:"name",label:"页面名称",placeholder:"请输入页面名称"})}),n),s(Jt,{dataSource:l,size:"small",rowKey:f=>f.meta.id,renderItem:p})]})},oc=Te(ic),Nn={listItem:R({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:R({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:R({name:"eivff4",styles:"display:none"})},sc=({visible:e,module:n,onClose:t})=>{const r=Pi(n).with(Ne.Page,()=>"页面").with(Ne.Entity,()=>"数据模型").otherwise(()=>"");u.useEffect(()=>{o("")},[n]);const[a,o]=u.useState(""),i=u.useRef(null),[l,c]=u.useState(!1);return u.useEffect(()=>{e&&c(!0)},[e]),s("div",{className:Rn.drawerWrapper,children:s(Ii,{zIndex:8,title:N("div",{children:[N("div",{className:Rn.drawerTitleWrapper,children:[s("span",{children:r}),s("span",{ref:i})]}),s(Lt,{onChange:p=>o(p.target.value),value:a,allowClear:!0,placeholder:"搜索"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:Rn.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:t,open:e,children:l&&N(Q,{children:[n===Ne.Page&&s(oc,{itemAddRef:i.current,searchVal:a}),n===Ne.Entity&&s(ac,{itemAddRef:i.current,searchVal:a})]})})})},Rn={drawerWrapper:R({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:R({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:R({name:"a4hmbt",styles:"position:absolute"})},lc=()=>N(Xe.Header,{className:Tn.header,children:[s("div",{className:Tn.headerLogoWrapper,children:s("img",{src:"/modou.svg",alt:""})}),N("div",{className:Tn.headerRight,children:[s(be,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"预览"}),s(ea,{src:"https://api.multiavatar.com/modou.png"})]})]}),Tn={header:R({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:R({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:R({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},cc=()=>{const e=et(),n=Ze(),{app:t}=xe(),r=T.isEmpty(t.pages);return u.useEffect(()=>{var a,o,i,l;r?T.isEmpty(t.entities)||n(Mt(le.Entity,{...e,entityId:(l=(i=T.head(t.entities))==null?void 0:i.meta)==null?void 0:l.id}),{replace:!0}):n(Mt(le.PAGE,{...e,pageId:(o=(a=T.head(t.pages))==null?void 0:a.meta)==null?void 0:o.id}),{replace:!0})},[t.entities,t.pages,r,n,e]),s("div",{className:uc.wrapper,children:s(Wn,{size:"large"})})},dc=Te(cc),uc={wrapper:R({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},fc="MOCK_PAGE_ID",Rr="MOCK_ROOT_WIDGET_ID",pc=()=>{const e=Xt.create({id:"app_id_mock",name:"app_name_mock",version:"0.0.1"}),n=nn.mrSchemeToDefaultJson(_i.jsonPropsSchema),t={...n,props:{...n.props,title:"按钮-{{colDSL.span}}-大漠孤烟直哈哈"},id:"buttonDSL"},r={...nn.mrSchemeToDefaultJson($i.jsonPropsSchema),id:"colDSL",slots:{children:[t.id]}},o=[{...nn.mrSchemeToDefaultJson(Zr.jsonPropsSchema),id:Rr,slots:{children:[r.id]}},r,t],i=xt.create({name:"大漠孤烟直",id:fc,rootWidgetId:Rr},e);o.forEach(f=>ft.create({...f,id:f.id},i));const l=[{id:G(),type:C.AutoNumber,name:C.AutoNumber,title:C.AutoNumber,description:ee.getEntityFieldTypeLabel(C.AutoNumber),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Date,name:C.Date,title:C.Date,description:ee.getEntityFieldTypeLabel(C.Date),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.DateTime,name:C.DateTime,title:C.DateTime,description:ee.getEntityFieldTypeLabel(C.DateTime),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Email,name:C.Email,title:C.Email,description:ee.getEntityFieldTypeLabel(C.Email),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Image,name:C.Image,title:C.Image,description:ee.getEntityFieldTypeLabel(C.Image),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.LongText,name:C.LongText,title:C.LongText,description:ee.getEntityFieldTypeLabel(C.LongText),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Number,name:C.Number,title:C.Number,description:ee.getEntityFieldTypeLabel(C.Number),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.PhoneNumber,name:C.PhoneNumber,title:C.PhoneNumber,description:ee.getEntityFieldTypeLabel(C.PhoneNumber),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Text,name:C.Text,title:C.Text,description:ee.getEntityFieldTypeLabel(C.Text),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.URL,name:C.URL,title:C.URL,description:ee.getEntityFieldTypeLabel(C.URL),required:!1,config:{},version:"0.0.1"},{id:G(),type:C.Enum,name:C.Enum,title:C.Enum,description:ee.getEntityFieldTypeLabel(C.Enum),required:!1,config:{enumCode:"",multiple:!0},version:"0.0.1"}],c=ee.create({version:"0.0.1",id:"user",name:"user",title:"人员",description:"人员",position:{x:400,y:100}},e);l.forEach(f=>{ut.create({...f},c)});const p=ee.create({version:"0.0.1",id:"department",name:"department",title:"部门",description:"部门",position:{x:800,y:100}},e);return qt.create({id:G(),name:"department",title:"部门",type:vn.Lookup,relationType:dt.ManyToOne,description:"部门",sourceEntity:"user",targetEntity:"department",targetName:"user",targetTitle:"用户",targetDescription:"用户",version:"0.0.1"},c),l.forEach(f=>{ut.create({...f,required:!0,id:f.id+p.meta.id},p)}),e},hc=[{title:"页面",icon:s(Di,{}),key:Ne.Page},{title:"数据模型",icon:s(go,{}),key:Ne.Entity}],On=Y(()=>{try{const e=JSON.parse(window.localStorage.getItem("app_id_mock"));return new xr(Xt.formJSON(e))}catch{return new xr(pc())}}),mc=()=>{const e=et(),[n,t]=u.useState(""),r=Ze(),{pathname:a}=Nt(),o=lt(le.PAGE,a),i=lt(le.Entity,a)??lt(le.Entities,a),l=u.useCallback(()=>{t(o?Ne.Page:i?Ne.Entity:"")},[i,o]);ta(l);const[c,p]=u.useState(!1),f=({key:w})=>{switch(w){case Ne.Page:w===n?p(S=>!S):(t(w),p(!0));break;case Ne.Entity:p(!1),t(w),r(Mt(le.Entities,{appId:e.appId}));break}},m=lt(le.APP,a),[d,v]=u.useState();return u.useEffect(()=>{(d==null?void 0:d.file)!==On.app&&v(new zl(On.app))},[d==null?void 0:d.file]),d?s(Ai,{value:d,children:s(Li,{value:On,children:m?s(dc,{}):N(Xe,{className:tn.layout,children:[s(lc,{}),N(Xe,{children:[s(Xe.Sider,{className:tn.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!c,children:s(ki,{className:tn.menu,style:{width:"60px"},mode:"inline",selectedKeys:[n],onClick:f,items:hc})}),N(Xe.Content,{className:tn.layoutContent,children:[s(sc,{onClose:()=>{p(!1),l()},module:n,visible:c}),s(Ia,{})]})]})]})})}):null},tn={layout:R({name:"13udsys",styles:"height:100%"}),menu:R({name:"13udsys",styles:"height:100%"}),layoutContent:R({name:"bjn8wh",styles:"position:relative"}),sider:R({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},Pn={header:R({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:R({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:R({name:"s0vnfv",styles:"height:32px"})},gc=()=>s(Xe.Header,{className:Pn.header,children:s("div",{className:Pn.logoWrapper,children:s("img",{src:"/modou.svg",className:Pn.logo,alt:""})})}),In={content:R({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:R({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:R({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},yc=()=>{const e=Ze();return s(Xe.Content,{className:In.content,children:s(fn,{gutter:[0,0],children:Array(13).fill(1).map((n,t)=>s(wt,{className:In.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:s(Ht,{onClick:()=>e("/app/appId"),className:In.card,actions:[s(zi,{},"setting"),s(ji,{},"edit"),s(Bi,{},"ellipsis")],children:s(Ht.Meta,{avatar:s(ea,{shape:"square",src:`https://api.multiavatar.com/modou_app_logo_${t}.png`}),title:"APP NAME",description:"我是 APP 描述"})})},t))})})},Tr=()=>N(Xe,{className:R({name:"1d3w5wq",styles:"width:100%"}),children:[s(gc,{}),s(yc,{})]}),bt=Hi(),Hn=e=>`${e.sourceEntity}_${e.name}`,bc=e=>`${e.targetEntity}_${e.targetName}`,tr=e=>`entity_er_node_id_${e.id}`,Un=(e,n)=>`${tr(e)}_${n.id}`,Ba=e=>e.type===vn.Lookup&&e.relationType===dt.ManyToOne,Ha=e=>e.type===vn.Lookup?"green":"red",vc=22,Bt=18,wc=40,Ec=({entity:e,relation:n,passive:t})=>{const r=Kn(),a=Ui(),[o,i]=u.useState(Number.MAX_SAFE_INTEGER);return u.useEffect(()=>{var l,c;if(t&&Ba(n))i(wc/2-Bt/2);else{const p=(l=document.getElementById(tr(e)))==null?void 0:l.getClientRects()[0],f=(c=document.getElementById(Un(e,n)))==null?void 0:c.getClientRects()[0],m=((f==null?void 0:f.top)??0)-((p==null?void 0:p.top)??0);i(m)}setTimeout(()=>a(e.name))},[e,t,r,n,a]),{top:o,left:t?-Bt:"auto",right:t?"auto":-Bt}},xc=({relation:e,passive:n})=>{const[t,r]=u.useState("relation-one-many");return u.useEffect(()=>{if(n)switch(e.relationType){case dt.ManyToMany:r("relation-one-many");break;case dt.ManyToOne:case zt.ManyToOne:case zt.OneToOne:r("relation-one-one");break}else switch(e.relationType){case dt.ManyToMany:case dt.ManyToOne:case zt.ManyToOne:r("relation-one-many");break;case zt.OneToOne:r("relation-one-one");break}},[n,e.relationType]),{icon:t,color:Ha(e)}},Or=({data:{entity:e},relation:n,passive:t})=>{const r=t?bc(n.meta):Hn(n.meta),{top:a,left:o,right:i}=Ec({entity:e.meta,relation:n.meta,passive:t}),{icon:l,color:c}=xc({relation:n.meta,passive:t});return s(An,{className:Sc.wrapper,id:r,type:t?"target":"source",position:t?on.Left:on.Right,style:{left:o,right:i,top:a+vc/2},onConnect:p=>console.log("handle onConnect",p),isConnectable:!1,children:s("span",{style:{color:c,transform:t?"rotateY(0deg)":"rotateY(180deg)"},children:s(So,{type:l})})},n.meta.id)},Sc={wrapper:R("height:",Bt,"px!important;width:",Bt,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},Mc=e=>{const{data:{entity:n,passiveEntityRelations:t}}=e;return N(Q,{children:[n.entityRelations.map(r=>s(Or,{...e,passive:!1,relation:r},r.meta.id)),t.map(r=>s(Or,{...e,passive:!0,relation:r},r.meta.id))]})},Cc=({data:{entity:e}})=>N("div",{className:st(Re.section),children:[s(te.Title,{className:st(Re.sectionTitle),level:5,children:"字段"}),T.isEmpty(e.entityFields)?s(Yr,{description:"暂无字段"}):e.entityFields.map(n=>N("div",{className:st(Re.sectionItem),children:[N(Ut,{size:"small",children:[N(te.Text,{children:[n.meta.description,"(",n.meta.name,")"]}),n.meta.required&&s(te.Text,{type:"danger",children:"*"})]}),s(te.Text,{children:n.meta.type})]},n.meta.name))]}),Fc=({data:{entity:e,passiveEntityRelations:n}})=>{const t=n.filter(a=>!Ba(a.meta)),r=[...e.entityRelations,...t];return T.isEmpty(r)?null:N("div",{className:st(Re.section),children:[s(te.Title,{className:st(Re.sectionTitle),level:5,children:"关系"}),e.entityRelations.map(a=>N("div",{className:st(Re.sectionItem),id:Un(e.meta,a.meta),children:[s(Ut,{size:"small",children:N(te.Text,{children:[a.meta.description,"(",a.meta.name,")"]})}),s(te.Text,{children:a.meta.type})]},a.meta.name)),t.map(a=>N("div",{className:st(Re.sectionItem),id:Un(e.meta,a.meta),children:[s(Ut,{size:"small",children:N(te.Text,{disabled:!0,children:[a.meta.targetDescription,"(",a.meta.targetName,")"]})}),s(te.Text,{disabled:!0,children:a.meta.type})]},a.meta.targetName))]})},Nc=e=>{const{data:{entity:n}}=e,t=na();return N(Q,{children:[s(Mc,{...e}),N("div",{id:tr(n.meta),style:{"--header-bg-color":t.colorPrimary},className:Re.wrapper,children:[s("div",{className:Re.header,children:s(te.Title,{level:5,children:n.meta.title})}),N("div",{className:Re.body,children:[s(Cc,{...e}),s(Fc,{...e})]}),N(fn,{className:Re.footer,children:[s(wt,{span:12,children:s(be,{block:!0,type:"link",onClick:()=>bt.emit("onClickEditEntity",n.meta.id),children:"编辑"})}),s(wt,{span:12,children:s(be,{block:!0,type:"text",danger:!0,onClick:()=>bt.emit("onDelete",n.meta.id),children:"删除"})})]})]})]})},Re={wrapper:R({name:"b271j2",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:1px solid rgba(0,0,0,.1)"}),header:R({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:R({name:"1jb4mpp",styles:"padding:4px 0"}),section:R("",""),sectionTitle:R({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:R({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:R({name:"3rejxs",styles:"border-top:1px solid rgba(0,0,0,.1)"})},Rc={EntityNode:u.memo(Nc)},Tc=()=>{const{app:e}=xe(),n=e.entityRelationsByTargetEntityNameMap,[t,r,a]=Wi(e.entities.map(i=>({id:i.meta.name,type:"EntityNode",data:{entity:i,passiveEntityRelations:n[i.meta.name]||[]},position:i.meta.position}))),o=u.useCallback(i=>{a(i);const l=jr(i,t),c=T.keyBy(i.filter(f=>f.type==="position"),"id"),p=T.keyBy(l,f=>f.id);Y(()=>{e.entities.forEach(f=>{var m;Reflect.has(c,f.meta.name)&&f.updateMeta({...f.meta,position:((m=p[f.meta.name])==null?void 0:m.positionAbsolute)??f.meta.position})})})},[e,t,a]);return u.useEffect(()=>{r(i=>{const l=T.keyBy(i,c=>c.id);return e.entities.map(c=>l[c.meta.name]?{...l[c.meta.name],data:{entity:c,passiveEntityRelations:n[c.meta.name]||[]},position:c.meta.position}:{id:c.meta.name,type:"EntityNode",data:{entity:c,passiveEntityRelations:n[c.meta.name]||[]},position:c.meta.position})})},[e.entities,n,r]),{nodes:t,onNodesChange:o}},Oc=({onClickEditEntity:e})=>{const n=na(),{app:t,appManager:r}=xe(),a=[...r.entityRelationMap.values()],{nodes:o,onNodesChange:i}=Tc(),[l,c,p]=Ji(a.map(m=>({id:m.meta.id,source:m.meta.sourceEntity,target:m.meta.targetEntity,sourceHandle:Hn(m.meta),targetHandle:Hn(m.meta),style:{stroke:Ha(m.meta),zIndex:999999}}))),f=u.useCallback(m=>c(d=>Br({...m,animated:!0,style:{stroke:"green"}},d)),[c]);return u.useEffect(()=>(bt.on("onDelete",t.deleteEntity),bt.on("onClickEditEntity",e),()=>{bt.off("onDelete",t.deleteEntity),bt.off("onClickEditEntity",e)}),[t.deleteEntity,e]),s("div",{className:Ic.wrapper,children:N(Wr,{nodes:o,edges:l,onNodesChange:i,onEdgesChange:p,onConnect:f,style:{background:"#fff"},nodeTypes:Rc,connectionLineStyle:{stroke:n.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[s(Fl,{variant:Ee.Cross,gap:10,size:2}),s(ka,{}),s(hl,{pannable:!0,zoomable:!0})]})})},Pc=Te(Oc),Ic={wrapper:R({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},_c=({onClickEditEntity:e})=>{const{app:n}=xe(),t=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(r,a)=>N(Ut,{size:"small",children:[s(be,{size:"small",type:"link",onClick:()=>e(a.id),children:"编辑"}),s(be,{size:"small",danger:!0,type:"text",onClick:()=>n.deleteEntity(a.id),children:"删除"})]})}];return s("div",{className:Dc.wrapper,children:s(ra,{rowKey:"id",size:"small",columns:t,dataSource:n.entities.map(r=>r.meta)})})},$c=Te(_c),Dc={wrapper:R("","")},Ua=({onOk:e,onCancel:n,open:t,mode:r,form:a})=>s(Q,{children:s(Vi,{title:r==="create"?"创建数据模型":"编辑数据模型",onCancel:()=>{n(),a.resetFields()},onOk:async()=>{await a.validateFields(),e(a.getFieldsValue()),a.resetFields()},open:t,destroyOnClose:!0,children:N(Ke,{form:a,labelCol:{style:{width:"50px"}},children:[s(Ke.Item,{label:"ID",name:"id",hidden:!0,children:s(Lt,{})}),s(Ke.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入数据模型名称"}],children:s(Lt,{})}),s(Ke.Item,{label:"标识",name:"name",rules:[{required:!0,message:"请输入数据模型标识"},{pattern:/^[a-zA-Z]\w+$/,message:"只能由英文、数字、下划线组成，且必须英文开头"}],children:s(Lt,{disabled:r==="edit"})}),s(Ke.Item,{label:"描述",name:"description",children:s(Lt,{})})]})})}),Ja=G(),Wa=({children:e})=>{const[n,t]=u.useState(null);return ta(()=>{setTimeout(()=>{t(document.getElementById(Ja))})}),n?Qr.createPortal(e,n):null},Ac=()=>s("span",{id:Ja}),Lc=({entity:e,onEditEntity:n})=>N(Q,{children:[s(Wa,{children:s(be,{type:"link",onClick:()=>n(e),children:"编辑"})}),s("div",{className:zc.wrapper,children:N(Ln,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[s(De,{label:"名称",fieldProps:{value:e.title}}),s(De,{label:"标识",fieldProps:{value:e.name}}),s(De,{label:"描述",fieldProps:{value:e.description}})]})})]}),kc=Te(Lc),zc={wrapper:R({name:"10rtstj",styles:"padding:16px"})},jc=e=>{switch(e){case C.Text:case C.LongText:return N(Q,{children:[s($t,{name:["config","max"],label:"最大长度",max:255,fieldProps:{precision:0}}),s($t,{name:["config","min"],label:"最小长度",min:0,fieldProps:{precision:0}})]});case C.Enum:return N(Q,{children:[s(ja,{name:["config","enumCode"],label:"枚举类型",placeholder:"请选择枚举类型",options:Va,allowClear:!1,rules:[{required:!0,message:"请选择枚举类型"}]}),s(Bn,{name:["config","multiple"],label:"多选"})]});case C.Number:return N(Q,{children:[s($t,{name:["config","max"],label:"最大值",max:255,fieldProps:{precision:0}}),s($t,{name:["config","min"],label:"最小值",min:0,fieldProps:{precision:0}}),s($t,{name:["config","precision"],label:"小数位数",min:0,fieldProps:{precision:0}})]});case C.AutoNumber:return s(Q,{children:s(De,{name:["config","format"],label:"显示格式",placeholder:"请输入显示格式"})});case C.Image:return s(Q,{children:s(Bn,{name:["config","multiple"],label:"多选"})});case C.PhoneNumber:case C.URL:case C.Email:case C.Date:case C.DateTime:default:return null}},Va=Object.values(C).map(e=>({label:ee.getEntityFieldTypeLabel(e),value:e})),Bc=(e,n)=>{const{app:t,appManager:r}=xe(),[a]=Ln.useForm(),o=Ln.useWatch("type",a),[i,l]=u.useState(""),[c,p]=u.useState(""),[f,m]=u.useState("detail"),[d,v]=u.useState(!1);return u.useImperativeHandle(n,()=>({create:({entityId:w})=>{l(w),p(""),m("create"),v(!0)},edit:({entityId:w,fieldId:S})=>{l(w),p(S),m("edit"),a.setFieldsValue(r.entityFieldMap.get(S).meta),v(!0)},showDetail:({entityId:w,fieldId:S})=>{l(w),p(S),m("detail"),a.setFieldsValue(r.entityFieldMap.get(S).meta),v(!0)}}),[r.entityFieldMap,a]),N(qi,{readonly:f==="detail",title:"新建字段",width:500,form:a,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:d,onOpenChange:v,onFinish:async w=>{switch(f){case"create":{const S=t.entityMap[i];ut.create({...w,id:G()},S);break}case"edit":{t.entityMap[i].entityFields.forEach(I=>{I.meta.id===c&&I.updateMeta({...I.meta,...w})});break}}return!0},children:[s(De,{hidden:!0,name:"id",label:"字段id"}),s(ja,{name:"type",label:"字段类型",placeholder:"请选择字段类型",options:Va,allowClear:!1,rules:[{required:!0,message:"请选择字段类型"}]}),s(De,{name:"title",label:"字段名称",placeholder:"请输入字段类型",rules:[{required:!0,message:"请输入字段名称"}]}),s(De,{name:"name",label:"字段标识",placeholder:"请输入字段标识",rules:[{required:!0,message:"请输入字段标识"}]}),s(De,{name:"description",label:"字段描述",placeholder:"请输入字段描述"}),o!==C.AutoNumber&&s(Bn,{name:"required",label:"必填"}),jc(o)]})},Hc=u.forwardRef(Bc),Uc=({entityId:e})=>{const n=u.useRef(null),{app:t}=xe(),r=t.entityMap[e],a=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,i)=>N(Ut,{size:"small",children:[s(be,{size:"small",type:"link",onClick:()=>{var l;(l=n.current)==null||l.edit({entityId:r.meta.id,fieldId:i.id})},children:"编辑"}),s(be,{size:"small",type:"link",onClick:()=>{var l;(l=n.current)==null||l.showDetail({entityId:r.meta.id,fieldId:i.id})},children:"详情"}),s(be,{size:"small",danger:!0,type:"text",onClick:()=>{r.deleteEntityField(i.id)},children:"删除"})]})}];return N(Q,{children:[s(Hc,{ref:n}),s(Wa,{children:s(be,{type:"link",onClick:()=>{var o;(o=n.current)==null||o.create({entityId:r.meta.id})},children:"添加字段"})}),s("div",{children:s(ra,{size:"small",dataSource:r.entityFields.map(o=>o.meta),rowKey:"id",columns:a,pagination:!1})})]})},_n=Te(Uc),qa=()=>{const[e,{setFalse:n,setTrue:t}]=rl(!1),[r]=Ke.useForm(),{app:a}=xe();return{setTrue:t,setFalse:n,onSubmitEntity:i=>{if(i.id)a.entityMap[i.id].updateMeta(i);else{const l=Math.max(...a.entities.map(c=>c.meta.position.x));ee.create({...i,id:G(),position:{x:l+400,y:100}},a)}n()},form:r,open:e}},Jc=[{key:"List",tab:"列表"},{key:"ER",tab:"ER图"}],Wc=()=>{const[e,n]=Zn({activeTabKey:"List"}),[t,r]=u.useState("edit"),{open:a,setFalse:o,setTrue:i,onSubmitEntity:l,form:c}=qa(),p=Ze(),f=et(),m=v=>{p(Mt(le.Entity,{entityId:v,appId:f.appId}))},d=()=>{r("create"),i()};return N(Q,{children:[s(Ua,{onOk:l,onCancel:o,open:a,mode:t,form:c}),s("div",{className:Pr.wrapper,children:s(Ht,{size:"small",tabProps:{size:"small"},className:Pr.card,title:s("span",{children:"数据模型"}),tabList:Jc,tabBarExtraContent:s(be,{type:"link",onClick:d,children:"添加模型"}),activeTabKey:e.activeTabKey,onTabChange:v=>n({activeTabKey:v}),children:e.activeTabKey==="List"?s($c,{onClickEditEntity:m}):s(Pc,{onClickEditEntity:m})})})]})},Pr={wrapper:R({name:"13udsys",styles:"height:100%"}),card:R({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Vc=[{key:"Base",tab:"基础信息"},{key:"Field",tab:"字段和关系"},{key:"Method",tab:"方法"},{key:"View",tab:"视图"}],qc=()=>{const[e,n]=Zn({activeTabKey:"Base"}),{app:t}=xe(),{entityId:r}=et(),a=t.entityMap[r],{open:o,setFalse:i,setTrue:l,onSubmitEntity:c,form:p}=qa(),f=m=>{switch(m){case"Base":return s(kc,{entity:a.meta,onEditEntity:()=>{p.setFieldsValue(a.meta),l()}});case"Field":return s(_n,{entityId:a.meta.id});case"Method":return s(_n,{entityId:a.meta.id});case"View":return s(_n,{entityId:a.meta.id});default:return s("div",{children:"未知模块"})}};return N(Q,{children:[s(Q,{children:s(Ua,{onOk:c,onCancel:i,open:o,mode:"edit",form:p})}),s("div",{className:Ir.wrapper,children:s(Ht,{size:"small",tabProps:{size:"small"},title:`${a.meta.title}(${a.meta.name})`,tabList:Vc,tabBarExtraContent:s(Ac,{}),className:Ir.card,activeTabKey:e.activeTabKey,onTabChange:m=>n({activeTabKey:m}),children:f(e.activeTabKey)})})]})},Kc=Te(qc),Ir={wrapper:R({name:"13udsys",styles:"height:100%"}),card:R({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Xc=({file:e,children:n})=>{const[t,r]=u.useState();return u.useEffect(()=>{(t==null?void 0:t.file)!==e&&r(new jl(e))},[t==null?void 0:t.file,e]),t?s(Ki,{value:e,children:s(Xi,{value:t,children:s(Gi,{children:s(Yi,{backend:Qi,children:s(Zi,{children:n})})})})}):null},Ka=u.forwardRef(({onLoad:e,src:n},t)=>s("iframe",{ref:t,className:Gc.iframe,src:n,onLoad:e}));Ka.displayName="SimulatorPC";const Gc={iframe:R`
    height: 100%;
    width: 100%;
    border: none;
    display: block;
  `},Yc=()=>{const{pageId:e,appId:n}=et(),{appManager:t}=xe(),r=t.pageMap.get(e),a=Ze();return u.useLayoutEffect(()=>{var i;const o=T.head(t.app.pages);!r&&o&&a(Mt(le.PAGE,{appId:n,pageId:(i=o.meta)==null?void 0:i.id}),{replace:!0})},[n,t.app.pages,a,r]),r?s(Vr.Provider,{value:eo,children:N(fn,{justify:"center",align:"middle",className:$n.page,children:[s(wt,{span:24,className:$n.container,children:s(Xc,{file:r,children:s(Ka,{src:"/simulator/pc/index.html"})})}),s(wt,{span:24,className:$n.flowWrapper,children:s(rc,{parentFile:r})})]})}):null},Qc=Te(Yc),$n={page:R({name:"13udsys",styles:"height:100%"}),container:R({name:"hy36jo",styles:"height:50%"}),flowWrapper:R({name:"y8uvr9",styles:"height:50%;display:flex"})},Zc=()=>{const e=Yn([{path:le.APPS,element:s(Tr,{})},{path:le.APP,element:s(mc,{}),children:[{path:le.PAGE,element:s(Qc,{})},{path:le.Entities,element:s(Wc,{})},{path:le.Entity,element:s(Kc,{})}]},{path:"/",element:s(Tr,{})}]);return s(Q,{children:e})},ed=()=>s(u.Suspense,{fallback:s(vo,{}),children:s(to,{locale:no,children:s(ro,{children:s(Zl,{children:s(Zc,{})})})})});ao.createRoot(document.getElementById("root")).render(s(re.StrictMode,{children:s(ed,{})}));
