import{r as N,aI as ps,j as _,a as X,F as he,m as me,u as xo,b3 as Ye,o as tr,b2 as gs,n as ms}from"./client.35724ad0.js";import{t as ys,I as xs}from"./main.961bd946.js";import{E as wo,z as mt,G as Pt,T as _e,B as Et,l as bt,H as ws,J as Nt,K as vs,L as bs,F as yt,I as Nn,p as Er,a as _s}from"./AppFactoryContext.edf9c98e.js";import{M as Mt}from"./index.052dfeac.js";import{R as Ss,C as Nr,au as Es}from"./SettingOutlined.e1c14717.js";import{C as Ns}from"./index.6d54bdec.js";import{L as Mr}from"./index.85f1f51a.js";var Ms=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function Cs(e,t){e===void 0&&(e=!1);var n=Ms(N.exports.useState(e),2),r=n[0],o=n[1],s=N.exports.useMemo(function(){var i=t===void 0?!e:t,a=function(){return o(function(d){return d===e?i:e})},l=function(d){return o(d)},c=function(){return o(e)},u=function(){return o(i)};return{toggle:a,set:l,setLeft:c,setRight:u}},[]);return[r,s]}var As=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function $s(e){e===void 0&&(e=!1);var t=As(Cs(e),2),n=t[0],r=t[1],o=r.toggle,s=r.set,i=N.exports.useMemo(function(){var a=function(){return s(!0)},l=function(){return s(!1)};return{toggle:o,set:function(u){return s(!!u)},setTrue:a,setFalse:l}},[]);return[n,i]}var ks=function(t){return typeof t=="function"},Ts=!1;const Is=Ts;function zs(e){Is&&(ks(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var t=N.exports.useRef(e);t.current=N.exports.useMemo(function(){return e},[e]);var n=N.exports.useRef();return n.current||(n.current=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.current.apply(this,r)}),n.current}var Ds=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},Rs=function(){var t=Ds(N.exports.useState({}),2),n=t[1];return N.exports.useCallback(function(){return n({})},[])};const Fs=Rs;var Kt={},Bs=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),vo="%[a-f0-9]{2}",Cr=new RegExp(vo,"gi"),Ar=new RegExp("("+vo+")+","gi");function Bn(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Bn(n),Bn(r))}function Os(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Cr),n=1;n<t.length;n++)e=Bn(t,n).join(""),t=e.match(Cr);return e}}function Ps(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},n=Ar.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=Os(n[0]);r!==n[0]&&(t[n[0]]=r)}n=Ar.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),s=0;s<o.length;s++){var i=o[s];e=e.replace(new RegExp(i,"g"),t[i])}return e}var Hs=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Ps(e)}},Ls=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const n=e.indexOf(t);return n===-1?[e]:[e.slice(0,n),e.slice(n+t.length)]},Vs=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),s=0;s<r.length;s++){var i=r[s],a=e[i];(o?t.indexOf(i)!==-1:t(i,a,e))&&(n[i]=a)}return n};(function(e){const t=Bs,n=Hs,r=Ls,o=Vs,s=f=>f==null;function i(f){switch(f.arrayFormat){case"index":return x=>(w,p)=>{const b=w.length;return p===void 0||f.skipNull&&p===null||f.skipEmptyString&&p===""?w:p===null?[...w,[c(x,f),"[",b,"]"].join("")]:[...w,[c(x,f),"[",c(b,f),"]=",c(p,f)].join("")]};case"bracket":return x=>(w,p)=>p===void 0||f.skipNull&&p===null||f.skipEmptyString&&p===""?w:p===null?[...w,[c(x,f),"[]"].join("")]:[...w,[c(x,f),"[]=",c(p,f)].join("")];case"comma":case"separator":return x=>(w,p)=>p==null||p.length===0?w:w.length===0?[[c(x,f),"=",c(p,f)].join("")]:[[w,c(p,f)].join(f.arrayFormatSeparator)];default:return x=>(w,p)=>p===void 0||f.skipNull&&p===null||f.skipEmptyString&&p===""?w:p===null?[...w,c(x,f)]:[...w,[c(x,f),"=",c(p,f)].join("")]}}function a(f){let x;switch(f.arrayFormat){case"index":return(w,p,b)=>{if(x=/\[(\d*)\]$/.exec(w),w=w.replace(/\[\d*\]$/,""),!x){b[w]=p;return}b[w]===void 0&&(b[w]={}),b[w][x[1]]=p};case"bracket":return(w,p,b)=>{if(x=/(\[\])$/.exec(w),w=w.replace(/\[\]$/,""),!x){b[w]=p;return}if(b[w]===void 0){b[w]=[p];return}b[w]=[].concat(b[w],p)};case"comma":case"separator":return(w,p,b)=>{const E=typeof p=="string"&&p.includes(f.arrayFormatSeparator),C=typeof p=="string"&&!E&&u(p,f).includes(f.arrayFormatSeparator);p=C?u(p,f):p;const T=E||C?p.split(f.arrayFormatSeparator).map(z=>u(z,f)):p===null?p:u(p,f);b[w]=T};default:return(w,p,b)=>{if(b[w]===void 0){b[w]=p;return}b[w]=[].concat(b[w],p)}}}function l(f){if(typeof f!="string"||f.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function c(f,x){return x.encode?x.strict?t(f):encodeURIComponent(f):f}function u(f,x){return x.decode?n(f):f}function h(f){return Array.isArray(f)?f.sort():typeof f=="object"?h(Object.keys(f)).sort((x,w)=>Number(x)-Number(w)).map(x=>f[x]):f}function d(f){const x=f.indexOf("#");return x!==-1&&(f=f.slice(0,x)),f}function g(f){let x="";const w=f.indexOf("#");return w!==-1&&(x=f.slice(w)),x}function S(f){f=d(f);const x=f.indexOf("?");return x===-1?"":f.slice(x+1)}function m(f,x){return x.parseNumbers&&!Number.isNaN(Number(f))&&typeof f=="string"&&f.trim()!==""?f=Number(f):x.parseBooleans&&f!==null&&(f.toLowerCase()==="true"||f.toLowerCase()==="false")&&(f=f.toLowerCase()==="true"),f}function v(f,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),l(x.arrayFormatSeparator);const w=a(x),p=Object.create(null);if(typeof f!="string"||(f=f.trim().replace(/^[?#&]/,""),!f))return p;for(const b of f.split("&")){if(b==="")continue;let[E,C]=r(x.decode?b.replace(/\+/g," "):b,"=");C=C===void 0?null:["comma","separator"].includes(x.arrayFormat)?C:u(C,x),w(u(E,x),C,p)}for(const b of Object.keys(p)){const E=p[b];if(typeof E=="object"&&E!==null)for(const C of Object.keys(E))E[C]=m(E[C],x);else p[b]=m(E,x)}return x.sort===!1?p:(x.sort===!0?Object.keys(p).sort():Object.keys(p).sort(x.sort)).reduce((b,E)=>{const C=p[E];return Boolean(C)&&typeof C=="object"&&!Array.isArray(C)?b[E]=h(C):b[E]=C,b},Object.create(null))}e.extract=S,e.parse=v,e.stringify=(f,x)=>{if(!f)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),l(x.arrayFormatSeparator);const w=C=>x.skipNull&&s(f[C])||x.skipEmptyString&&f[C]==="",p=i(x),b={};for(const C of Object.keys(f))w(C)||(b[C]=f[C]);const E=Object.keys(b);return x.sort!==!1&&E.sort(x.sort),E.map(C=>{const T=f[C];return T===void 0?"":T===null?c(C,x):Array.isArray(T)?T.reduce(p(C),[]).join("&"):c(C,x)+"="+c(T,x)}).filter(C=>C.length>0).join("&")},e.parseUrl=(f,x)=>{x=Object.assign({decode:!0},x);const[w,p]=r(f,"#");return Object.assign({url:w.split("?")[0]||"",query:v(S(f),x)},x&&x.parseFragmentIdentifier&&p?{fragmentIdentifier:u(p,x)}:{})},e.stringifyUrl=(f,x)=>{x=Object.assign({encode:!0,strict:!0},x);const w=d(f.url).split("?")[0]||"",p=e.extract(f.url),b=e.parse(p,{sort:!1}),E=Object.assign(b,f.query);let C=e.stringify(E,x);C&&(C=`?${C}`);let T=g(f.url);return f.fragmentIdentifier&&(T=`#${c(f.fragmentIdentifier,x)}`),`${w}${C}${T}`},e.pick=(f,x,w)=>{w=Object.assign({parseFragmentIdentifier:!0},w);const{url:p,query:b,fragmentIdentifier:E}=e.parseUrl(f,w);return e.stringifyUrl({url:p,query:o(b,x),fragmentIdentifier:E},w)},e.exclude=(f,x,w)=>{const p=Array.isArray(x)?b=>!x.includes(b):(b,E)=>!x(b,E);return e.pick(f,p,w)}})(Kt);var ge=globalThis&&globalThis.__assign||function(){return ge=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ge.apply(this,arguments)},ut=ys,Ys={parseNumbers:!1,parseBooleans:!1},Xs={skipNull:!1,skipEmptyString:!1},Us=function(t,n){var r,o,s=n||{},i=s.navigateMode,a=i===void 0?"push":i,l=s.parseOptions,c=s.stringifyOptions,u=ge(ge({},Ys),l),h=ge(ge({},Xs),c),d=ut.useLocation(),g=(r=ut.useHistory)===null||r===void 0?void 0:r.call(ut),S=(o=ut.useNavigate)===null||o===void 0?void 0:o.call(ut),m=Fs(),v=N.exports.useRef(typeof t=="function"?t():t||{}),f=N.exports.useMemo(function(){return Kt.parse(d.search,u)},[d.search]),x=N.exports.useMemo(function(){return ge(ge({},v.current),f)},[f]),w=function(b){var E=typeof b=="function"?b(x):b;m(),g&&g[a]({hash:d.hash,search:Kt.stringify(ge(ge({},f),E),h)||"?"}),S&&S({hash:d.hash,search:Kt.stringify(ge(ge({},f),E),h)||"?"},{replace:a==="replace"})};return[x,zs(w)]};function Ws(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}const je=Ws();function oe(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=oe(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const $r=e=>{let t;const n=new Set,r=(l,c)=>{const u=typeof l=="function"?l(t):l;if(u!==t){const h=t;t=(c!=null?c:typeof u!="object")?u:Object.assign({},t,u),n.forEach(d=>d(t,h))}},o=()=>t,a={setState:r,getState:o,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>n.clear()};return t=e(r,o,a),a},qs=e=>e?$r(e):$r;var bo={exports:{}},_o={},So={exports:{}},Eo={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rt=N.exports;function Zs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gs=typeof Object.is=="function"?Object.is:Zs,Ks=rt.useState,js=rt.useEffect,Qs=rt.useLayoutEffect,Js=rt.useDebugValue;function ea(e,t){var n=t(),r=Ks({inst:{value:n,getSnapshot:t}}),o=r[0].inst,s=r[1];return Qs(function(){o.value=n,o.getSnapshot=t,Mn(o)&&s({inst:o})},[e,n,t]),js(function(){return Mn(o)&&s({inst:o}),e(function(){Mn(o)&&s({inst:o})})},[e]),Js(n),n}function Mn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gs(e,n)}catch{return!0}}function ta(e,t){return t()}var na=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ta:ea;Eo.useSyncExternalStore=rt.useSyncExternalStore!==void 0?rt.useSyncExternalStore:na;(function(e){e.exports=Eo})(So);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=N.exports,ra=So.exports;function oa(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ia=typeof Object.is=="function"?Object.is:oa,sa=ra.useSyncExternalStore,aa=dn.useRef,ca=dn.useEffect,la=dn.useMemo,ua=dn.useDebugValue;_o.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var s=aa(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=la(function(){function l(g){if(!c){if(c=!0,u=g,g=r(g),o!==void 0&&i.hasValue){var S=i.value;if(o(S,g))return h=S}return h=g}if(S=h,ia(u,g))return S;var m=r(g);return o!==void 0&&o(S,m)?S:(u=g,h=m)}var c=!1,u,h,d=n===void 0?null:n;return[function(){return l(t())},d===null?void 0:function(){return l(d())}]},[t,n,r,o]);var a=sa(e,s[0],s[1]);return ca(function(){i.hasValue=!0,i.value=a},[a]),ua(a),a};(function(e){e.exports=_o})(bo);const fa=ps(bo.exports),{useSyncExternalStoreWithSelector:da}=fa;function ha(e,t=e.getState,n){const r=da(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return N.exports.useDebugValue(r),r}function ae(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var pa={value:()=>{}};function hn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new jt(n)}function jt(e){this._=e}function ga(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}jt.prototype=hn.prototype={constructor:jt,on:function(e,t){var n=this._,r=ga(e+"",n),o,s=-1,i=r.length;if(arguments.length<2){for(;++s<i;)if((o=(e=r[s]).type)&&(o=ma(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(o=(e=r[s]).type)n[o]=kr(n[o],e.name,t);else if(t==null)for(o in n)n[o]=kr(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new jt(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,s;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,o=s.length;r<o;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,s=r.length;o<s;++o)r[o].value.apply(t,n)}};function ma(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function kr(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=pa,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var On="http://www.w3.org/1999/xhtml";const Tr={svg:"http://www.w3.org/2000/svg",xhtml:On,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function pn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Tr.hasOwnProperty(t)?{space:Tr[t],local:e}:e}function ya(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===On&&t.documentElement.namespaceURI===On?t.createElement(e):t.createElementNS(n,e)}}function xa(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function No(e){var t=pn(e);return(t.local?xa:ya)(t)}function wa(){}function nr(e){return e==null?wa:function(){return this.querySelector(e)}}function va(e){typeof e!="function"&&(e=nr(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=new Array(i),l,c,u=0;u<i;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new de(r,this._parents)}function ba(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _a(){return[]}function Mo(e){return e==null?_a:function(){return this.querySelectorAll(e)}}function Sa(e){return function(){return ba(e.apply(this,arguments))}}function Ea(e){typeof e=="function"?e=Sa(e):e=Mo(e);for(var t=this._groups,n=t.length,r=[],o=[],s=0;s<n;++s)for(var i=t[s],a=i.length,l,c=0;c<a;++c)(l=i[c])&&(r.push(e.call(l,l.__data__,c,i)),o.push(l));return new de(r,o)}function Co(e){return function(){return this.matches(e)}}function Ao(e){return function(t){return t.matches(e)}}var Na=Array.prototype.find;function Ma(e){return function(){return Na.call(this.children,e)}}function Ca(){return this.firstElementChild}function Aa(e){return this.select(e==null?Ca:Ma(typeof e=="function"?e:Ao(e)))}var $a=Array.prototype.filter;function ka(){return Array.from(this.children)}function Ta(e){return function(){return $a.call(this.children,e)}}function Ia(e){return this.selectAll(e==null?ka:Ta(typeof e=="function"?e:Ao(e)))}function za(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,c=0;c<i;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new de(r,this._parents)}function $o(e){return new Array(e.length)}function Da(){return new de(this._enter||this._groups.map($o),this._parents)}function tn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tn.prototype={constructor:tn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ra(e){return function(){return e}}function Fa(e,t,n,r,o,s){for(var i=0,a,l=t.length,c=s.length;i<c;++i)(a=t[i])?(a.__data__=s[i],r[i]=a):n[i]=new tn(e,s[i]);for(;i<l;++i)(a=t[i])&&(o[i]=a)}function Ba(e,t,n,r,o,s,i){var a,l,c=new Map,u=t.length,h=s.length,d=new Array(u),g;for(a=0;a<u;++a)(l=t[a])&&(d[a]=g=i.call(l,l.__data__,a,t)+"",c.has(g)?o[a]=l:c.set(g,l));for(a=0;a<h;++a)g=i.call(e,s[a],a,s)+"",(l=c.get(g))?(r[a]=l,l.__data__=s[a],c.delete(g)):n[a]=new tn(e,s[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(d[a])===l&&(o[a]=l)}function Oa(e){return e.__data__}function Pa(e,t){if(!arguments.length)return Array.from(this,Oa);var n=t?Ba:Fa,r=this._parents,o=this._groups;typeof e!="function"&&(e=Ra(e));for(var s=o.length,i=new Array(s),a=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],h=o[c],d=h.length,g=Ha(e.call(u,u&&u.__data__,c,r)),S=g.length,m=a[c]=new Array(S),v=i[c]=new Array(S),f=l[c]=new Array(d);n(u,h,m,v,f,g,t);for(var x=0,w=0,p,b;x<S;++x)if(p=m[x]){for(x>=w&&(w=x+1);!(b=v[w])&&++w<S;);p._next=b||null}}return i=new de(i,r),i._enter=a,i._exit=l,i}function Ha(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function La(){return new de(this._exit||this._groups.map($o),this._parents)}function Va(e,t,n){var r=this.enter(),o=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?s.remove():n(s),r&&o?r.merge(o).order():o}function Ya(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,s=r.length,i=Math.min(o,s),a=new Array(o),l=0;l<i;++l)for(var c=n[l],u=r[l],h=c.length,d=a[l]=new Array(h),g,S=0;S<h;++S)(g=c[S]||u[S])&&(d[S]=g);for(;l<o;++l)a[l]=n[l];return new de(a,this._parents)}function Xa(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,s=r[o],i;--o>=0;)(i=r[o])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Ua(e){e||(e=Wa);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var i=n[s],a=i.length,l=o[s]=new Array(a),c,u=0;u<a;++u)(c=i[u])&&(l[u]=c);l.sort(t)}return new de(o,this._parents).order()}function Wa(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qa(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Za(){return Array.from(this)}function Ga(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length;o<s;++o){var i=r[o];if(i)return i}return null}function Ka(){let e=0;for(const t of this)++e;return e}function ja(){return!this.node()}function Qa(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],s=0,i=o.length,a;s<i;++s)(a=o[s])&&e.call(a,a.__data__,s,o);return this}function Ja(e){return function(){this.removeAttribute(e)}}function ec(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tc(e,t){return function(){this.setAttribute(e,t)}}function nc(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function oc(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function ic(e,t){var n=pn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ec:Ja:typeof t=="function"?n.local?oc:rc:n.local?nc:tc)(n,t))}function ko(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sc(e){return function(){this.style.removeProperty(e)}}function ac(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function lc(e,t,n){return arguments.length>1?this.each((t==null?sc:typeof t=="function"?cc:ac)(e,t,n==null?"":n)):ot(this.node(),e)}function ot(e,t){return e.style.getPropertyValue(t)||ko(e).getComputedStyle(e,null).getPropertyValue(t)}function uc(e){return function(){delete this[e]}}function fc(e,t){return function(){this[e]=t}}function dc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function hc(e,t){return arguments.length>1?this.each((t==null?uc:typeof t=="function"?dc:fc)(e,t)):this.node()[e]}function To(e){return e.trim().split(/^|\s+/)}function rr(e){return e.classList||new Io(e)}function Io(e){this._node=e,this._names=To(e.getAttribute("class")||"")}Io.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zo(e,t){for(var n=rr(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Do(e,t){for(var n=rr(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function pc(e){return function(){zo(this,e)}}function gc(e){return function(){Do(this,e)}}function mc(e,t){return function(){(t.apply(this,arguments)?zo:Do)(this,e)}}function yc(e,t){var n=To(e+"");if(arguments.length<2){for(var r=rr(this.node()),o=-1,s=n.length;++o<s;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?mc:t?pc:gc)(n,t))}function xc(){this.textContent=""}function wc(e){return function(){this.textContent=e}}function vc(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function bc(e){return arguments.length?this.each(e==null?xc:(typeof e=="function"?vc:wc)(e)):this.node().textContent}function _c(){this.innerHTML=""}function Sc(e){return function(){this.innerHTML=e}}function Ec(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Nc(e){return arguments.length?this.each(e==null?_c:(typeof e=="function"?Ec:Sc)(e)):this.node().innerHTML}function Mc(){this.nextSibling&&this.parentNode.appendChild(this)}function Cc(){return this.each(Mc)}function Ac(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $c(){return this.each(Ac)}function kc(e){var t=typeof e=="function"?e:No(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Tc(){return null}function Ic(e,t){var n=typeof e=="function"?e:No(e),r=t==null?Tc:typeof t=="function"?t:nr(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function zc(){var e=this.parentNode;e&&e.removeChild(this)}function Dc(){return this.each(zc)}function Rc(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bc(e){return this.select(e?Fc:Rc)}function Oc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Pc(e){return function(t){e.call(this,t,this.__data__)}}function Hc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Lc(e){return function(){var t=this.__on;if(!!t){for(var n=0,r=-1,o=t.length,s;n<o;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Vc(e,t,n){return function(){var r=this.__on,o,s=Pc(t);if(r){for(var i=0,a=r.length;i<a;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=s,o.options=n),o.value=t;return}}this.addEventListener(e.type,s,n),o={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(o):this.__on=[o]}}function Yc(e,t,n){var r=Hc(e+""),o,s=r.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(o=0,u=a[l];o<s;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(a=t?Vc:Lc,o=0;o<s;++o)this.each(a(r[o],t,n));return this}function Ro(e,t,n){var r=ko(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Xc(e,t){return function(){return Ro(this,e,t)}}function Uc(e,t){return function(){return Ro(this,e,t.apply(this,arguments))}}function Wc(e,t){return this.each((typeof t=="function"?Uc:Xc)(e,t))}function*qc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,s=r.length,i;o<s;++o)(i=r[o])&&(yield i)}var Fo=[null];function de(e,t){this._groups=e,this._parents=t}function zt(){return new de([[document.documentElement]],Fo)}function Zc(){return this}de.prototype=zt.prototype={constructor:de,select:va,selectAll:Ea,selectChild:Aa,selectChildren:Ia,filter:za,data:Pa,enter:Da,exit:La,join:Va,merge:Ya,selection:Zc,order:Xa,sort:Ua,call:qa,nodes:Za,node:Ga,size:Ka,empty:ja,each:Qa,attr:ic,style:lc,property:hc,classed:yc,text:bc,html:Nc,raise:Cc,lower:$c,append:kc,insert:Ic,remove:Dc,clone:Bc,datum:Oc,on:Yc,dispatch:Wc,[Symbol.iterator]:qc};function ye(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],Fo)}function Gc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function be(e,t){if(e=Gc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Kc={passive:!1},Ct={capture:!0,passive:!1};function Cn(e){e.stopImmediatePropagation()}function Je(e){e.preventDefault(),e.stopImmediatePropagation()}function Bo(e){var t=e.document.documentElement,n=ye(e).on("dragstart.drag",Je,Ct);"onselectstart"in t?n.on("selectstart.drag",Je,Ct):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Oo(e,t){var n=e.document.documentElement,r=ye(e).on("dragstart.drag",null);t&&(r.on("click.drag",Je,Ct),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Ht=e=>()=>e;function Pn(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:s,x:i,y:a,dx:l,dy:c,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:u}})}Pn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function jc(e){return!e.ctrlKey&&!e.button}function Qc(){return this.parentNode}function Jc(e,t){return t==null?{x:e.x,y:e.y}:t}function el(){return navigator.maxTouchPoints||"ontouchstart"in this}function tl(){var e=jc,t=Qc,n=Jc,r=el,o={},s=hn("start","drag","end"),i=0,a,l,c,u,h=0;function d(p){p.on("mousedown.drag",g).filter(r).on("touchstart.drag",v).on("touchmove.drag",f,Kc).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(p,b){if(!(u||!e.call(this,p,b))){var E=w(this,t.call(this,p,b),p,b,"mouse");!E||(ye(p.view).on("mousemove.drag",S,Ct).on("mouseup.drag",m,Ct),Bo(p.view),Cn(p),c=!1,a=p.clientX,l=p.clientY,E("start",p))}}function S(p){if(Je(p),!c){var b=p.clientX-a,E=p.clientY-l;c=b*b+E*E>h}o.mouse("drag",p)}function m(p){ye(p.view).on("mousemove.drag mouseup.drag",null),Oo(p.view,c),Je(p),o.mouse("end",p)}function v(p,b){if(!!e.call(this,p,b)){var E=p.changedTouches,C=t.call(this,p,b),T=E.length,z,$;for(z=0;z<T;++z)($=w(this,C,p,b,E[z].identifier,E[z]))&&(Cn(p),$("start",p,E[z]))}}function f(p){var b=p.changedTouches,E=b.length,C,T;for(C=0;C<E;++C)(T=o[b[C].identifier])&&(Je(p),T("drag",p,b[C]))}function x(p){var b=p.changedTouches,E=b.length,C,T;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),C=0;C<E;++C)(T=o[b[C].identifier])&&(Cn(p),T("end",p,b[C]))}function w(p,b,E,C,T,z){var $=s.copy(),O=be(z||E,b),V,L,y;if((y=n.call(p,new Pn("beforestart",{sourceEvent:E,target:d,identifier:T,active:i,x:O[0],y:O[1],dx:0,dy:0,dispatch:$}),C))!=null)return V=y.x-O[0]||0,L=y.y-O[1]||0,function A(M,k,I){var R=O,D;switch(M){case"start":o[T]=A,D=i++;break;case"end":delete o[T],--i;case"drag":O=be(I||k,b),D=i;break}$.call(M,p,new Pn(M,{sourceEvent:k,subject:y,target:d,identifier:T,active:D,x:O[0]+V,y:O[1]+L,dx:O[0]-R[0],dy:O[1]-R[1],dispatch:$}),C)}}return d.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Ht(!!p),d):e},d.container=function(p){return arguments.length?(t=typeof p=="function"?p:Ht(p),d):t},d.subject=function(p){return arguments.length?(n=typeof p=="function"?p:Ht(p),d):n},d.touchable=function(p){return arguments.length?(r=typeof p=="function"?p:Ht(!!p),d):r},d.on=function(){var p=s.on.apply(s,arguments);return p===s?d:p},d.clickDistance=function(p){return arguments.length?(h=(p=+p)*p,d):Math.sqrt(h)},d}function or(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Po(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Dt(){}var At=.7,nn=1/At,et="\\s*([+-]?\\d+)\\s*",$t="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Me="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nl=/^#([0-9a-f]{3,8})$/,rl=new RegExp(`^rgb\\(${et},${et},${et}\\)$`),ol=new RegExp(`^rgb\\(${Me},${Me},${Me}\\)$`),il=new RegExp(`^rgba\\(${et},${et},${et},${$t}\\)$`),sl=new RegExp(`^rgba\\(${Me},${Me},${Me},${$t}\\)$`),al=new RegExp(`^hsl\\(${$t},${Me},${Me}\\)$`),cl=new RegExp(`^hsla\\(${$t},${Me},${Me},${$t}\\)$`),Ir={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};or(Dt,kt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:zr,formatHex:zr,formatHex8:ll,formatHsl:ul,formatRgb:Dr,toString:Dr});function zr(){return this.rgb().formatHex()}function ll(){return this.rgb().formatHex8()}function ul(){return Ho(this).formatHsl()}function Dr(){return this.rgb().formatRgb()}function kt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=nl.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Rr(t):n===3?new se(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=rl.exec(e))?new se(t[1],t[2],t[3],1):(t=ol.exec(e))?new se(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=il.exec(e))?Lt(t[1],t[2],t[3],t[4]):(t=sl.exec(e))?Lt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=al.exec(e))?Or(t[1],t[2]/100,t[3]/100,1):(t=cl.exec(e))?Or(t[1],t[2]/100,t[3]/100,t[4]):Ir.hasOwnProperty(e)?Rr(Ir[e]):e==="transparent"?new se(NaN,NaN,NaN,0):null}function Rr(e){return new se(e>>16&255,e>>8&255,e&255,1)}function Lt(e,t,n,r){return r<=0&&(e=t=n=NaN),new se(e,t,n,r)}function fl(e){return e instanceof Dt||(e=kt(e)),e?(e=e.rgb(),new se(e.r,e.g,e.b,e.opacity)):new se}function Hn(e,t,n,r){return arguments.length===1?fl(e):new se(e,t,n,r==null?1:r)}function se(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}or(se,Hn,Po(Dt,{brighter(e){return e=e==null?nn:Math.pow(nn,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new se(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new se(Ue(this.r),Ue(this.g),Ue(this.b),rn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Fr,formatHex:Fr,formatHex8:dl,formatRgb:Br,toString:Br}));function Fr(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}`}function dl(){return`#${Xe(this.r)}${Xe(this.g)}${Xe(this.b)}${Xe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Br(){const e=rn(this.opacity);return`${e===1?"rgb(":"rgba("}${Ue(this.r)}, ${Ue(this.g)}, ${Ue(this.b)}${e===1?")":`, ${e})`}`}function rn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ue(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xe(e){return e=Ue(e),(e<16?"0":"")+e.toString(16)}function Or(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Se(e,t,n,r)}function Ho(e){if(e instanceof Se)return new Se(e.h,e.s,e.l,e.opacity);if(e instanceof Dt||(e=kt(e)),!e)return new Se;if(e instanceof Se)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),s=Math.max(t,n,r),i=NaN,a=s-o,l=(s+o)/2;return a?(t===s?i=(n-r)/a+(n<r)*6:n===s?i=(r-t)/a+2:i=(t-n)/a+4,a/=l<.5?s+o:2-s-o,i*=60):a=l>0&&l<1?0:i,new Se(i,a,l,e.opacity)}function hl(e,t,n,r){return arguments.length===1?Ho(e):new Se(e,t,n,r==null?1:r)}function Se(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}or(Se,hl,Po(Dt,{brighter(e){return e=e==null?nn:Math.pow(nn,e),new Se(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Se(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new se(An(e>=240?e-240:e+120,o,r),An(e,o,r),An(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new Se(Pr(this.h),Vt(this.s),Vt(this.l),rn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=rn(this.opacity);return`${e===1?"hsl(":"hsla("}${Pr(this.h)}, ${Vt(this.s)*100}%, ${Vt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Pr(e){return e=(e||0)%360,e<0?e+360:e}function Vt(e){return Math.max(0,Math.min(1,e||0))}function An(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lo=e=>()=>e;function pl(e,t){return function(n){return e+n*t}}function gl(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ml(e){return(e=+e)==1?Vo:function(t,n){return n-t?gl(t,n,e):Lo(isNaN(t)?n:t)}}function Vo(e,t){var n=t-e;return n?pl(e,n):Lo(isNaN(e)?t:e)}const Hr=function e(t){var n=ml(t);function r(o,s){var i=n((o=Hn(o)).r,(s=Hn(s)).r),a=n(o.g,s.g),l=n(o.b,s.b),c=Vo(o.opacity,s.opacity);return function(u){return o.r=i(u),o.g=a(u),o.b=l(u),o.opacity=c(u),o+""}}return r.gamma=e,r}(1);function ze(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ln=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$n=new RegExp(Ln.source,"g");function yl(e){return function(){return e}}function xl(e){return function(t){return e(t)+""}}function wl(e,t){var n=Ln.lastIndex=$n.lastIndex=0,r,o,s,i=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Ln.exec(e))&&(o=$n.exec(t));)(s=o.index)>n&&(s=t.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(r=r[0])===(o=o[0])?a[i]?a[i]+=o:a[++i]=o:(a[++i]=null,l.push({i,x:ze(r,o)})),n=$n.lastIndex;return n<t.length&&(s=t.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?l[0]?xl(l[0].x):yl(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var Lr=180/Math.PI,Vn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(e,t,n,r,o,s){var i,a,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:o,translateY:s,rotate:Math.atan2(t,e)*Lr,skewX:Math.atan(l)*Lr,scaleX:i,scaleY:a}}var Yt;function vl(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Vn:Yo(t.a,t.b,t.c,t.d,t.e,t.f)}function bl(e){return e==null||(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","g")),Yt.setAttribute("transform",e),!(e=Yt.transform.baseVal.consolidate()))?Vn:(e=e.matrix,Yo(e.a,e.b,e.c,e.d,e.e,e.f))}function Xo(e,t,n,r){function o(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,g,S){if(c!==h||u!==d){var m=g.push("translate(",null,t,null,n);S.push({i:m-4,x:ze(c,h)},{i:m-2,x:ze(u,d)})}else(h||d)&&g.push("translate("+h+t+d+n)}function i(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(o(h)+"rotate(",null,r)-2,x:ze(c,u)})):u&&h.push(o(h)+"rotate("+u+r)}function a(c,u,h,d){c!==u?d.push({i:h.push(o(h)+"skewX(",null,r)-2,x:ze(c,u)}):u&&h.push(o(h)+"skewX("+u+r)}function l(c,u,h,d,g,S){if(c!==h||u!==d){var m=g.push(o(g)+"scale(",null,",",null,")");S.push({i:m-4,x:ze(c,h)},{i:m-2,x:ze(u,d)})}else(h!==1||d!==1)&&g.push(o(g)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),i(c.rotate,u.rotate,h,d),a(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(g){for(var S=-1,m=d.length,v;++S<m;)h[(v=d[S]).i]=v.x(g);return h.join("")}}}var _l=Xo(vl,"px, ","px)","deg)"),Sl=Xo(bl,", ",")",")"),El=1e-12;function Vr(e){return((e=Math.exp(e))+1/e)/2}function Nl(e){return((e=Math.exp(e))-1/e)/2}function Ml(e){return((e=Math.exp(2*e))-1)/(e+1)}const Cl=function e(t,n,r){function o(s,i){var a=s[0],l=s[1],c=s[2],u=i[0],h=i[1],d=i[2],g=u-a,S=h-l,m=g*g+S*S,v,f;if(m<El)f=Math.log(d/c)/t,v=function(C){return[a+C*g,l+C*S,c*Math.exp(t*C*f)]};else{var x=Math.sqrt(m),w=(d*d-c*c+r*m)/(2*c*n*x),p=(d*d-c*c-r*m)/(2*d*n*x),b=Math.log(Math.sqrt(w*w+1)-w),E=Math.log(Math.sqrt(p*p+1)-p);f=(E-b)/t,v=function(C){var T=C*f,z=Vr(b),$=c/(n*x)*(z*Ml(t*T+b)-Nl(b));return[a+$*g,l+$*S,c*z/Vr(t*T+b)]}}return v.duration=f*1e3*t/Math.SQRT2,v}return o.rho=function(s){var i=Math.max(.001,+s),a=i*i,l=a*a;return e(i,a,l)},o}(Math.SQRT2,2,4);var it=0,xt=0,ft=0,Uo=1e3,on,wt,sn=0,We=0,gn=0,Tt=typeof performance=="object"&&performance.now?performance:Date,Wo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ir(){return We||(Wo(Al),We=Tt.now()+gn)}function Al(){We=0}function an(){this._call=this._time=this._next=null}an.prototype=qo.prototype={constructor:an,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ir():+n)+(t==null?0:+t),!this._next&&wt!==this&&(wt?wt._next=this:on=this,wt=this),this._call=e,this._time=n,Yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yn())}};function qo(e,t,n){var r=new an;return r.restart(e,t,n),r}function $l(){ir(),++it;for(var e=on,t;e;)(t=We-e._time)>=0&&e._call.call(void 0,t),e=e._next;--it}function Yr(){We=(sn=Tt.now())+gn,it=xt=0;try{$l()}finally{it=0,Tl(),We=0}}function kl(){var e=Tt.now(),t=e-sn;t>Uo&&(gn-=t,sn=e)}function Tl(){for(var e,t=on,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:on=n);wt=e,Yn(r)}function Yn(e){if(!it){xt&&(xt=clearTimeout(xt));var t=e-We;t>24?(e<1/0&&(xt=setTimeout(Yr,e-Tt.now()-gn)),ft&&(ft=clearInterval(ft))):(ft||(sn=Tt.now(),ft=setInterval(kl,Uo)),it=1,Wo(Yr))}}function Xr(e,t,n){var r=new an;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var Il=hn("start","end","cancel","interrupt"),zl=[],Zo=0,Ur=1,Xn=2,Qt=3,Wr=4,Un=5,Jt=6;function mn(e,t,n,r,o,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;Dl(e,n,{name:t,index:r,group:o,on:Il,tween:zl,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zo})}function sr(e,t){var n=Ne(e,t);if(n.state>Zo)throw new Error("too late; already scheduled");return n}function Ce(e,t){var n=Ne(e,t);if(n.state>Qt)throw new Error("too late; already running");return n}function Ne(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dl(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=qo(s,0,n.time);function s(c){n.state=Ur,n.timer.restart(i,n.delay,n.time),n.delay<=c&&i(c-n.delay)}function i(c){var u,h,d,g;if(n.state!==Ur)return l();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Qt)return Xr(i);g.state===Wr?(g.state=Jt,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[u]):+u<t&&(g.state=Jt,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[u])}if(Xr(function(){n.state===Qt&&(n.state=Wr,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Xn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xn){for(n.state=Qt,o=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(g=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++h]=g);o.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Un,1),h=-1,d=o.length;++h<d;)o[h].call(e,u);n.state===Un&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Jt,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function en(e,t){var n=e.__transition,r,o,s=!0,i;if(!!n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){s=!1;continue}o=r.state>Xn&&r.state<Un,r.state=Jt,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}s&&delete e.__transition}}function Rl(e){return this.each(function(){en(this,e)})}function Fl(e,t){var n,r;return function(){var o=Ce(this,e),s=o.tween;if(s!==n){r=n=s;for(var i=0,a=r.length;i<a;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function Bl(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var s=Ce(this,e),i=s.tween;if(i!==r){o=(r=i).slice();for(var a={name:t,value:n},l=0,c=o.length;l<c;++l)if(o[l].name===t){o[l]=a;break}l===c&&o.push(a)}s.tween=o}}function Ol(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ne(this.node(),n).tween,o=0,s=r.length,i;o<s;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?Fl:Bl)(n,e,t))}function ar(e,t,n){var r=e._id;return e.each(function(){var o=Ce(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Ne(o,r).value[t]}}function Go(e,t){var n;return(typeof t=="number"?ze:t instanceof kt?Hr:(n=kt(t))?(t=n,Hr):wl)(e,t)}function Pl(e){return function(){this.removeAttribute(e)}}function Hl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ll(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttribute(e);return i===o?null:i===r?s:s=t(r=i,n)}}function Vl(e,t,n){var r,o=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?s:s=t(r=i,n)}}function Yl(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function Xl(e,t,n){var r,o,s;return function(){var i,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),l=a+"",i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a)))}}function Ul(e,t){var n=pn(e),r=n==="transform"?Sl:Go;return this.attrTween(e,typeof t=="function"?(n.local?Xl:Yl)(n,r,ar(this,"attr."+e,t)):t==null?(n.local?Hl:Pl)(n):(n.local?Vl:Ll)(n,r,t))}function Wl(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ql(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Zl(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ql(e,s)),n}return o._value=t,o}function Gl(e,t){var n,r;function o(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Wl(e,s)),n}return o._value=t,o}function Kl(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=pn(e);return this.tween(n,(r.local?Zl:Gl)(r,t))}function jl(e,t){return function(){sr(this,e).delay=+t.apply(this,arguments)}}function Ql(e,t){return t=+t,function(){sr(this,e).delay=t}}function Jl(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jl:Ql)(t,e)):Ne(this.node(),t).delay}function eu(e,t){return function(){Ce(this,e).duration=+t.apply(this,arguments)}}function tu(e,t){return t=+t,function(){Ce(this,e).duration=t}}function nu(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eu:tu)(t,e)):Ne(this.node(),t).duration}function ru(e,t){if(typeof t!="function")throw new Error;return function(){Ce(this,e).ease=t}}function ou(e){var t=this._id;return arguments.length?this.each(ru(t,e)):Ne(this.node(),t).ease}function iu(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ce(this,e).ease=n}}function su(e){if(typeof e!="function")throw new Error;return this.each(iu(this._id,e))}function au(e){typeof e!="function"&&(e=Co(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var s=t[o],i=s.length,a=r[o]=[],l,c=0;c<i;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&a.push(l);return new Ie(r,this._parents,this._name,this._id)}function cu(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,s=Math.min(r,o),i=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],u=l.length,h=i[a]=new Array(u),d,g=0;g<u;++g)(d=l[g]||c[g])&&(h[g]=d);for(;a<r;++a)i[a]=t[a];return new Ie(i,this._parents,this._name,this._id)}function lu(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function uu(e,t,n){var r,o,s=lu(t)?sr:Ce;return function(){var i=s(this,e),a=i.on;a!==r&&(o=(r=a).copy()).on(t,n),i.on=o}}function fu(e,t){var n=this._id;return arguments.length<2?Ne(this.node(),n).on.on(e):this.each(uu(n,e,t))}function du(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hu(){return this.on("end.remove",du(this._id))}function pu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=nr(e));for(var r=this._groups,o=r.length,s=new Array(o),i=0;i<o;++i)for(var a=r[i],l=a.length,c=s[i]=new Array(l),u,h,d=0;d<l;++d)(u=a[d])&&(h=e.call(u,u.__data__,d,a))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,mn(c[d],t,n,d,c,Ne(u,n)));return new Ie(s,this._parents,t,n)}function gu(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mo(e));for(var r=this._groups,o=r.length,s=[],i=[],a=0;a<o;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=e.call(u,u.__data__,h,l),g,S=Ne(u,n),m=0,v=d.length;m<v;++m)(g=d[m])&&mn(g,t,n,m,d,S);s.push(d),i.push(u)}return new Ie(s,i,t,n)}var mu=zt.prototype.constructor;function yu(){return new mu(this._groups,this._parents)}function xu(e,t){var n,r,o;return function(){var s=ot(this,e),i=(this.style.removeProperty(e),ot(this,e));return s===i?null:s===n&&i===r?o:o=t(n=s,r=i)}}function Ko(e){return function(){this.style.removeProperty(e)}}function wu(e,t,n){var r,o=n+"",s;return function(){var i=ot(this,e);return i===o?null:i===r?s:s=t(r=i,n)}}function vu(e,t,n){var r,o,s;return function(){var i=ot(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),ot(this,e))),i===l?null:i===r&&l===o?s:(o=l,s=t(r=i,a))}}function bu(e,t){var n,r,o,s="style."+t,i="end."+s,a;return function(){var l=Ce(this,e),c=l.on,u=l.value[s]==null?a||(a=Ko(t)):void 0;(c!==n||o!==u)&&(r=(n=c).copy()).on(i,o=u),l.on=r}}function _u(e,t,n){var r=(e+="")=="transform"?_l:Go;return t==null?this.styleTween(e,xu(e,r)).on("end.style."+e,Ko(e)):typeof t=="function"?this.styleTween(e,vu(e,r,ar(this,"style."+e,t))).each(bu(this._id,e)):this.styleTween(e,wu(e,r,t),n).on("end.style."+e,null)}function Su(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Eu(e,t,n){var r,o;function s(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&Su(e,i,n)),r}return s._value=t,s}function Nu(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Eu(e,t,n==null?"":n))}function Mu(e){return function(){this.textContent=e}}function Cu(e){return function(){var t=e(this);this.textContent=t==null?"":t}}function Au(e){return this.tween("text",typeof e=="function"?Cu(ar(this,"text",e)):Mu(e==null?"":e+""))}function $u(e){return function(t){this.textContent=e.call(this,t)}}function ku(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&$u(o)),t}return r._value=e,r}function Tu(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ku(e))}function Iu(){for(var e=this._name,t=this._id,n=jo(),r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,c=0;c<a;++c)if(l=i[c]){var u=Ne(l,t);mn(l,e,n,c,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ie(r,this._parents,e,n)}function zu(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(s,i){var a={value:i},l={value:function(){--o===0&&s()}};n.each(function(){var c=Ce(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),o===0&&s()})}var Du=0;function Ie(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function jo(){return++Du}var ke=zt.prototype;Ie.prototype={constructor:Ie,select:pu,selectAll:gu,selectChild:ke.selectChild,selectChildren:ke.selectChildren,filter:au,merge:cu,selection:yu,transition:Iu,call:ke.call,nodes:ke.nodes,node:ke.node,size:ke.size,empty:ke.empty,each:ke.each,on:fu,attr:Ul,attrTween:Kl,style:_u,styleTween:Nu,text:Au,textTween:Tu,remove:hu,tween:Ol,delay:Jl,duration:nu,ease:ou,easeVarying:su,end:zu,[Symbol.iterator]:ke[Symbol.iterator]};function Ru(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Fu={time:null,delay:0,duration:250,ease:Ru};function Bu(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ou(e){var t,n;e instanceof Ie?(t=e._id,e=e._name):(t=jo(),(n=Fu).time=ir(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,s=0;s<o;++s)for(var i=r[s],a=i.length,l,c=0;c<a;++c)(l=i[c])&&mn(l,e,t,c,i,n||Bu(l,t));return new Ie(r,this._parents,e,t)}zt.prototype.interrupt=Rl;zt.prototype.transition=Ou;const Xt=e=>()=>e;function Pu(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Te(e,t,n){this.k=e,this.x=t,this.y=n}Te.prototype={constructor:Te,scale:function(e){return e===1?this:new Te(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Te(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fe=new Te(1,0,0);Te.prototype;function kn(e){e.stopImmediatePropagation()}function dt(e){e.preventDefault(),e.stopImmediatePropagation()}function Hu(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lu(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function qr(){return this.__zoom||Fe}function Vu(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Yu(){return navigator.maxTouchPoints||"ontouchstart"in this}function Xu(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Qo(){var e=Hu,t=Lu,n=Xu,r=Vu,o=Yu,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Cl,c=hn("start","zoom","end"),u,h,d,g=500,S=150,m=0,v=10;function f(y){y.property("__zoom",qr).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",$).filter(o).on("touchstart.zoom",O).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.transform=function(y,A,M,k){var I=y.selection?y.selection():y;I.property("__zoom",qr),y!==I?b(y,A,M,k):I.interrupt().each(function(){E(this,arguments).event(k).start().zoom(null,typeof A=="function"?A.apply(this,arguments):A).end()})},f.scaleBy=function(y,A,M,k){f.scaleTo(y,function(){var I=this.__zoom.k,R=typeof A=="function"?A.apply(this,arguments):A;return I*R},M,k)},f.scaleTo=function(y,A,M,k){f.transform(y,function(){var I=t.apply(this,arguments),R=this.__zoom,D=M==null?p(I):typeof M=="function"?M.apply(this,arguments):M,B=R.invert(D),Y=typeof A=="function"?A.apply(this,arguments):A;return n(w(x(R,Y),D,B),I,i)},M,k)},f.translateBy=function(y,A,M,k){f.transform(y,function(){return n(this.__zoom.translate(typeof A=="function"?A.apply(this,arguments):A,typeof M=="function"?M.apply(this,arguments):M),t.apply(this,arguments),i)},null,k)},f.translateTo=function(y,A,M,k,I){f.transform(y,function(){var R=t.apply(this,arguments),D=this.__zoom,B=k==null?p(R):typeof k=="function"?k.apply(this,arguments):k;return n(Fe.translate(B[0],B[1]).scale(D.k).translate(typeof A=="function"?-A.apply(this,arguments):-A,typeof M=="function"?-M.apply(this,arguments):-M),R,i)},k,I)};function x(y,A){return A=Math.max(s[0],Math.min(s[1],A)),A===y.k?y:new Te(A,y.x,y.y)}function w(y,A,M){var k=A[0]-M[0]*y.k,I=A[1]-M[1]*y.k;return k===y.x&&I===y.y?y:new Te(y.k,k,I)}function p(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function b(y,A,M,k){y.on("start.zoom",function(){E(this,arguments).event(k).start()}).on("interrupt.zoom end.zoom",function(){E(this,arguments).event(k).end()}).tween("zoom",function(){var I=this,R=arguments,D=E(I,R).event(k),B=t.apply(I,R),Y=M==null?p(B):typeof M=="function"?M.apply(I,R):M,Z=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),U=I.__zoom,H=typeof A=="function"?A.apply(I,R):A,q=l(U.invert(Y).concat(Z/U.k),H.invert(Y).concat(Z/H.k));return function(G){if(G===1)G=H;else{var K=q(G),j=Z/K[2];G=new Te(j,Y[0]-K[0]*j,Y[1]-K[1]*j)}D.zoom(null,G)}})}function E(y,A,M){return!M&&y.__zooming||new C(y,A)}function C(y,A){this.that=y,this.args=A,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,A),this.taps=0}C.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,A){return this.mouse&&y!=="mouse"&&(this.mouse[1]=A.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=A.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=A.invert(this.touch1[0])),this.that.__zoom=A,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var A=ye(this.that).datum();c.call(y,this.that,new Pu(y,{sourceEvent:this.sourceEvent,target:f,type:y,transform:this.that.__zoom,dispatch:c}),A)}};function T(y,...A){if(!e.apply(this,arguments))return;var M=E(this,A).event(y),k=this.__zoom,I=Math.max(s[0],Math.min(s[1],k.k*Math.pow(2,r.apply(this,arguments)))),R=be(y);if(M.wheel)(M.mouse[0][0]!==R[0]||M.mouse[0][1]!==R[1])&&(M.mouse[1]=k.invert(M.mouse[0]=R)),clearTimeout(M.wheel);else{if(k.k===I)return;M.mouse=[R,k.invert(R)],en(this),M.start()}dt(y),M.wheel=setTimeout(D,S),M.zoom("mouse",n(w(x(k,I),M.mouse[0],M.mouse[1]),M.extent,i));function D(){M.wheel=null,M.end()}}function z(y,...A){if(d||!e.apply(this,arguments))return;var M=y.currentTarget,k=E(this,A,!0).event(y),I=ye(y.view).on("mousemove.zoom",Y,!0).on("mouseup.zoom",Z,!0),R=be(y,M),D=y.clientX,B=y.clientY;Bo(y.view),kn(y),k.mouse=[R,this.__zoom.invert(R)],en(this),k.start();function Y(U){if(dt(U),!k.moved){var H=U.clientX-D,q=U.clientY-B;k.moved=H*H+q*q>m}k.event(U).zoom("mouse",n(w(k.that.__zoom,k.mouse[0]=be(U,M),k.mouse[1]),k.extent,i))}function Z(U){I.on("mousemove.zoom mouseup.zoom",null),Oo(U.view,k.moved),dt(U),k.event(U).end()}}function $(y,...A){if(!!e.apply(this,arguments)){var M=this.__zoom,k=be(y.changedTouches?y.changedTouches[0]:y,this),I=M.invert(k),R=M.k*(y.shiftKey?.5:2),D=n(w(x(M,R),k,I),t.apply(this,A),i);dt(y),a>0?ye(this).transition().duration(a).call(b,D,k,y):ye(this).call(f.transform,D,k,y)}}function O(y,...A){if(!!e.apply(this,arguments)){var M=y.touches,k=M.length,I=E(this,A,y.changedTouches.length===k).event(y),R,D,B,Y;for(kn(y),D=0;D<k;++D)B=M[D],Y=be(B,this),Y=[Y,this.__zoom.invert(Y),B.identifier],I.touch0?!I.touch1&&I.touch0[2]!==Y[2]&&(I.touch1=Y,I.taps=0):(I.touch0=Y,R=!0,I.taps=1+!!u);u&&(u=clearTimeout(u)),R&&(I.taps<2&&(h=Y[0],u=setTimeout(function(){u=null},g)),en(this),I.start())}}function V(y,...A){if(!!this.__zooming){var M=E(this,A).event(y),k=y.changedTouches,I=k.length,R,D,B,Y;for(dt(y),R=0;R<I;++R)D=k[R],B=be(D,this),M.touch0&&M.touch0[2]===D.identifier?M.touch0[0]=B:M.touch1&&M.touch1[2]===D.identifier&&(M.touch1[0]=B);if(D=M.that.__zoom,M.touch1){var Z=M.touch0[0],U=M.touch0[1],H=M.touch1[0],q=M.touch1[1],G=(G=H[0]-Z[0])*G+(G=H[1]-Z[1])*G,K=(K=q[0]-U[0])*K+(K=q[1]-U[1])*K;D=x(D,Math.sqrt(G/K)),B=[(Z[0]+H[0])/2,(Z[1]+H[1])/2],Y=[(U[0]+q[0])/2,(U[1]+q[1])/2]}else if(M.touch0)B=M.touch0[0],Y=M.touch0[1];else return;M.zoom("touch",n(w(D,B,Y),M.extent,i))}}function L(y,...A){if(!!this.__zooming){var M=E(this,A).event(y),k=y.changedTouches,I=k.length,R,D;for(kn(y),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),R=0;R<I;++R)D=k[R],M.touch0&&M.touch0[2]===D.identifier?delete M.touch0:M.touch1&&M.touch1[2]===D.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(D=be(D,this),Math.hypot(h[0]-D[0],h[1]-D[1])<v)){var B=ye(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return f.wheelDelta=function(y){return arguments.length?(r=typeof y=="function"?y:Xt(+y),f):r},f.filter=function(y){return arguments.length?(e=typeof y=="function"?y:Xt(!!y),f):e},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:Xt(!!y),f):o},f.extent=function(y){return arguments.length?(t=typeof y=="function"?y:Xt([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),f):t},f.scaleExtent=function(y){return arguments.length?(s[0]=+y[0],s[1]=+y[1],f):[s[0],s[1]]},f.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],f):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},f.constrain=function(y){return arguments.length?(n=y,f):n},f.duration=function(y){return arguments.length?(a=+y,f):a},f.interpolate=function(y){return arguments.length?(l=y,f):l},f.on=function(){var y=c.on.apply(c,arguments);return y===c?f:y},f.clickDistance=function(y){return arguments.length?(m=(y=+y)*y,f):Math.sqrt(m)},f.tapDistance=function(y){return arguments.length?(v=+y,f):v},f}const cr=N.exports.createContext(null),Uu=cr.Provider,Jo="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100";function J(e,t){const n=N.exports.useContext(cr);if(n===null)throw new Error(Jo);return ha(n,e,t)}const te=()=>{const e=N.exports.useContext(cr);if(e===null)throw new Error(Jo);return N.exports.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Wu=e=>e.userSelectionActive?"none":"all";function lr({position:e,children:t,className:n,style:r,...o}){const s=J(Wu),i=`${e}`.split("-");return _("div",{className:oe(["react-flow__panel",n,...i]),style:{...r,pointerEvents:s},...o,children:t})}function qu({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:_(lr,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:_("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Zu=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:l,className:c,...u})=>{const h=N.exports.useRef(null),[d,g]=N.exports.useState({x:0,y:0,width:0,height:0}),S=oe(["react-flow__edge-textwrapper",c]);return N.exports.useEffect(()=>{if(h.current){const m=h.current.getBBox();g({x:m.x,y:m.y,width:m.width,height:m.height})}},[n]),typeof n>"u"||!n?null:X("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:S,visibility:d.width?"visible":"hidden",...u,children:[o&&_("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),_("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:h,style:r,children:n}),l]})};var Gu=N.exports.memo(Zu);const Rt=({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:l,style:c,markerEnd:u,markerStart:h,interactionWidth:d=20})=>X(he,{children:[_("path",{style:c,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:h}),d&&_("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r?_(Gu,{x:t,y:n,label:r,labelStyle:o,labelShowBg:s,labelBgStyle:i,labelBgPadding:a,labelBgBorderRadius:l}):null]});Rt.displayName="BaseEdge";function ht(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(s=>s.id===e);o&&n(r,{...o})}}function ei({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,s=n<e?n+o:n-o,i=Math.abs(r-t)/2,a=r<t?r+i:r-i;return[s,a,o,i]}function ti({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:s,targetControlX:i,targetControlY:a}){const l=e*.125+o*.375+i*.375+n*.125,c=t*.125+s*.375+a*.375+r*.125,u=Math.abs(l-e),h=Math.abs(c-t);return[l,c,u,h]}var st;(function(e){e.Strict="strict",e.Loose="loose"})(st||(st={}));var tt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(tt||(tt={}));const ur=e=>({width:e.offsetWidth,height:e.offsetHeight}),nt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),fr=(e={x:0,y:0},t)=>({x:nt(e.x,t[0][0],t[1][0]),y:nt(e.y,t[0][1],t[1][1])}),ni=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},ri=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),cn=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),oi=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Zr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Ku=(e,t)=>oi(ri(cn(e),cn(t))),Wn=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},ju=e=>!!e.width&&!!e.height&&!!e.x&&!!e.y,ii=e=>!isNaN(e)&&isFinite(e),ne=Symbol.for("internals"),si=["Enter"," ","Escape"],Qu=e=>{};var Re;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Re||(Re={}));var ln;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ln||(ln={}));var F;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(F||(F={}));function Gr({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===F.Left||e===F.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function ai({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top}){const[i,a]=Gr({pos:n,x1:e,y1:t,x2:r,y2:o}),[l,c]=Gr({pos:s,x1:r,y1:o,x2:e,y2:t}),[u,h,d,g]=ti({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:a,targetControlX:l,targetControlY:c});return[`M${e},${t} C${i},${a} ${l},${c} ${r},${o}`,u,h,d,g]}const dr=N.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=F.Bottom,targetPosition:s=F.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:g,markerStart:S,interactionWidth:m})=>{const[v,f,x]=ai({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s});return _(Rt,{path:v,labelX:f,labelY:x,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:g,markerStart:S,interactionWidth:m})});dr.displayName="SimpleBezierEdge";const Kr={[F.Left]:{x:-1,y:0},[F.Right]:{x:1,y:0},[F.Top]:{x:0,y:-1},[F.Bottom]:{x:0,y:1}},Ju=({source:e,sourcePosition:t=F.Bottom,target:n})=>t===F.Left||t===F.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},jr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function ef({source:e,sourcePosition:t=F.Bottom,target:n,targetPosition:r=F.Top,center:o,offset:s}){const i=Kr[t],a=Kr[r],l={x:e.x+i.x*s,y:e.y+i.y*s},c={x:n.x+a.x*s,y:n.y+a.y*s},u=Ju({source:l,sourcePosition:t,target:c}),h=u.x!==0?"x":"y",d=u[h];let g=[],S,m;const[v,f,x,w]=ei({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[h]*a[h]===-1){S=o.x||v,m=o.y||f;const b=[{x:S,y:l.y},{x:S,y:c.y}],E=[{x:l.x,y:m},{x:c.x,y:m}];i[h]===d?g=h==="x"?b:E:g=h==="x"?E:b}else{const b=[{x:l.x,y:c.y}],E=[{x:c.x,y:l.y}];if(h==="x"?g=i.x===d?E:b:g=i.y===d?b:E,t!==r){const C=h==="x"?"y":"x",T=i[h]===a[C],z=l[C]>c[C],$=l[C]<c[C];(i[h]===1&&(!T&&z||T&&$)||i[h]!==1&&(!T&&$||T&&z))&&(g=h==="x"?b:E)}S=g[0].x,m=g[0].y}return[[e,l,...g,c,n],S,m,x,w]}function tf(e,t,n,r){const o=Math.min(jr(e,t)/2,jr(t,n)/2,r),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const c=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${s+o*c},${i}Q ${s},${i} ${s},${i+o*u}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${s},${i+o*l}Q ${s},${i} ${s+o*a},${i}`}function qn({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top,borderRadius:i=5,centerX:a,centerY:l,offset:c=20}){const[u,h,d,g,S]=ef({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:s,center:{x:a,y:l},offset:c});return[u.reduce((v,f,x)=>{let w="";return x>0&&x<u.length-1?w=tf(u[x-1],f,u[x+1],i):w=`${x===0?"M":"L"}${f.x} ${f.y}`,v+=w,v},""),h,d,g,S]}const yn=N.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,sourcePosition:h=F.Bottom,targetPosition:d=F.Top,markerEnd:g,markerStart:S,pathOptions:m,interactionWidth:v})=>{const[f,x,w]=qn({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:d,borderRadius:m==null?void 0:m.borderRadius,offset:m==null?void 0:m.offset});return _(Rt,{path:f,labelX:x,labelY:w,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:g,markerStart:S,interactionWidth:v})});yn.displayName="SmoothStepEdge";const hr=N.exports.memo(e=>{var t;return _(yn,{...e,pathOptions:N.exports.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});hr.displayName="StepEdge";function nf({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,s,i,a]=ei({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,s,i,a]}const pr=N.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:h,markerStart:d,interactionWidth:g})=>{const[S,m,v]=nf({sourceX:e,sourceY:t,targetX:n,targetY:r});return _(Rt,{path:S,labelX:m,labelY:v,label:o,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:l,labelBgBorderRadius:c,style:u,markerEnd:h,markerStart:d,interactionWidth:g})});pr.displayName="StraightEdge";function Ut(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Qr({pos:e,x1:t,y1:n,x2:r,y2:o,c:s}){switch(e){case F.Left:return[t-Ut(t-r,s),n];case F.Right:return[t+Ut(r-t,s),n];case F.Top:return[t,n-Ut(n-o,s)];case F.Bottom:return[t,n+Ut(o-n,s)]}}function ci({sourceX:e,sourceY:t,sourcePosition:n=F.Bottom,targetX:r,targetY:o,targetPosition:s=F.Top,curvature:i=.25}){const[a,l]=Qr({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[c,u]=Qr({pos:s,x1:r,y1:o,x2:e,y2:t,c:i}),[h,d,g,S]=ti({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:l,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${l} ${c},${u} ${r},${o}`,h,d,g,S]}const un=N.exports.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=F.Bottom,targetPosition:s=F.Top,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:g,markerStart:S,pathOptions:m,interactionWidth:v})=>{const[f,x,w]=ci({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:s,curvature:m==null?void 0:m.curvature});return _(Rt,{path:f,labelX:x,labelY:w,label:i,labelStyle:a,labelShowBg:l,labelBgStyle:c,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:g,markerStart:S,interactionWidth:v})});un.displayName="BezierEdge";const gr=N.exports.createContext(null),rf=gr.Provider;gr.Consumer;function Zn(e,t,n,r,o,s,i){const a=i.elementFromPoint(e.clientX,e.clientY),l=(a==null?void 0:a.classList.contains("target"))||!1,c=(a==null?void 0:a.classList.contains("source"))||!1,u={elementBelow:a,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(a&&(l||c)){u.isHoveringHandle=!0;const h=a.getAttribute("data-nodeid"),d=a.getAttribute("data-handleid"),g=n?{source:h,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:h,targetHandle:d};u.connection=g,(t===st.Strict?n&&c||!n&&l:!0)&&(u.isValid=s(g))}return u}function Tn(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function li({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:s,setState:i,isValidConnection:a,elementEdgeUpdaterType:l,onEdgeUpdateEnd:c}){const u=e.target.closest(".react-flow"),h=ni(e.target);if(!h)return;const d=h.elementFromPoint(e.clientX,e.clientY),g=d==null?void 0:d.classList.contains("target"),S=d==null?void 0:d.classList.contains("source");if(!u||!g&&!S&&!l)return;const{onConnectStart:m,connectionMode:v}=s(),f=l||(g?"target":"source"),x=u.getBoundingClientRect();let w;i({connectionPosition:{x:e.clientX-x.left,y:e.clientY-x.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:f}),m==null||m(e,{nodeId:n,handleId:t,handleType:f});function p(E){i({connectionPosition:{x:E.clientX-x.left,y:E.clientY-x.top}});const{connection:C,elementBelow:T,isValid:z,isHoveringHandle:$}=Zn(E,v,o,n,t,a,h);if(!$)return Tn(w);C.source!==C.target&&T&&(Tn(w),w=T,T.classList.add("react-flow__handle-connecting"),T.classList.toggle("react-flow__handle-valid",z))}function b(E){var z,$;const{connection:C,isValid:T}=Zn(E,v,o,n,t,a,h);T&&(r==null||r(C)),($=(z=s()).onConnectEnd)==null||$.call(z,E),l&&c&&c(E),Tn(w),i({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),h.removeEventListener("mousemove",p),h.removeEventListener("mouseup",b)}h.addEventListener("mousemove",p),h.addEventListener("mouseup",b)}const of=e=>"id"in e&&"source"in e&&"target"in e,sf=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,Gn=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,af=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),ui=(e,t)=>{if(!e.source||!e.target)return t;let n;return of(e)?n={...e}:n={...e,id:sf(e)},af(n,t)?t:t.concat(n)},cf=({x:e,y:t},[n,r,o],s,[i,a])=>{const l={x:(e-n)/o,y:(t-r)/o};return s?{x:i*Math.round(l.x/i),y:a*Math.round(l.y/a)}:l},xn=e=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const t=e.reduce((n,{positionAbsolute:r,position:o,width:s,height:i})=>ri(n,cn({x:r?r.x:o.x,y:r?r.y:o.y,width:s||0,height:i||0})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return oi(t)},fi=(e,t,[n,r,o]=[0,0,1],s=!1,i=!1)=>{const a={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},l=[];return e.forEach(c=>{const{positionAbsolute:u={x:0,y:0},width:h,height:d,selectable:g=!0}=c;if(i&&!g)return!1;const S={...u,width:h||0,height:d||0},m=Wn(a,S),v=typeof h>"u"||typeof d>"u"||h===null||d===null,f=s&&m>0,x=(h||0)*(d||0);(v||f||m>=x||c.dragging)&&l.push(c)}),l},di=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},hi=(e,t,n,r,o,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),l=Math.min(i,a),c=nt(l,r,o),u=e.x+e.width/2,h=e.y+e.height/2,d=t/2-u*c,g=n/2-h*c;return[d,g,c]},Ve=(e,t=0)=>e.transition().duration(t),lf=()=>!0,uf=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),pi=N.exports.forwardRef(({type:e="source",position:t=F.Top,isValidConnection:n=lf,isConnectable:r=!0,id:o,onConnect:s,children:i,className:a,onMouseDown:l,...c},u)=>{const h=te(),d=N.exports.useContext(gr),{connectionStartHandle:g,connectOnClick:S,noPanClassName:m}=J(uf,ae),v=o||null,f=e==="target",x=b=>{const{defaultEdgeOptions:E,onConnect:C,hasDefaultEdges:T}=h.getState(),z={...E,...b};if(T){const{edges:$}=h.getState();h.setState({edges:ui(z,$)})}C==null||C(z),s==null||s(z)},w=b=>{b.button===0&&li({event:b,handleId:v,nodeId:d,onConnect:x,isTarget:f,getState:h.getState,setState:h.setState,isValidConnection:n}),l==null||l(b)},p=b=>{const{onClickConnectStart:E,onClickConnectEnd:C,connectionMode:T}=h.getState();if(!g){E==null||E(b,{nodeId:d,handleId:v,handleType:e}),h.setState({connectionStartHandle:{nodeId:d,type:e,handleId:v}});return}const z=ni(b.target),{connection:$,isValid:O}=Zn(b,T,g.type==="target",g.nodeId,g.handleId||null,n,z);O&&x($),C==null||C(b),h.setState({connectionStartHandle:null})};return _("div",{"data-handleid":v,"data-nodeid":d,"data-handlepos":t,className:oe(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",m,a,{source:!f,target:f,connectable:r,connecting:(g==null?void 0:g.nodeId)===d&&(g==null?void 0:g.handleId)===v&&(g==null?void 0:g.type)===e}]),onMouseDown:w,onClick:S?p:void 0,ref:u,...c,children:i})});pi.displayName="Handle";var It=N.exports.memo(pi);const gi=({data:e,isConnectable:t,targetPosition:n=F.Top,sourcePosition:r=F.Bottom})=>X(he,{children:[_(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,_(It,{type:"source",position:r,isConnectable:t})]});gi.displayName="DefaultNode";var Kn=N.exports.memo(gi);const mi=({data:e,isConnectable:t,sourcePosition:n=F.Bottom})=>X(he,{children:[e==null?void 0:e.label,_(It,{type:"source",position:n,isConnectable:t})]});mi.displayName="InputNode";var yi=N.exports.memo(mi);const xi=({data:e,isConnectable:t,targetPosition:n=F.Top})=>X(he,{children:[_(It,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});xi.displayName="OutputNode";var wi=N.exports.memo(xi);const mr=()=>null;mr.displayName="GroupNode";const ff=e=>({selectedNodes:Array.from(e.nodeInternals.values()).filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),Wt=e=>e.id;function df(e,t){return ae(e.selectedNodes.map(Wt),t.selectedNodes.map(Wt))&&ae(e.selectedEdges.map(Wt),t.selectedEdges.map(Wt))}const vi=N.exports.memo(({onSelectionChange:e})=>{const t=te(),{selectedNodes:n,selectedEdges:r}=J(ff,df);return N.exports.useEffect(()=>{var s,i;const o={nodes:n,edges:r};e==null||e(o),(i=(s=t.getState()).onSelectionChange)==null||i.call(s,o)},[n,r,e]),null});vi.displayName="SelectionListener";const hf=e=>!!e.onSelectionChange;function pf({onSelectionChange:e}){const t=J(hf);return e||t?_(vi,{onSelectionChange:e}):null}const gf=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Ge(e,t){N.exports.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function W(e,t,n){N.exports.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const mf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:l,nodesDraggable:c,nodesConnectable:u,nodesFocusable:h,edgesFocusable:d,minZoom:g,maxZoom:S,nodeExtent:m,onNodesChange:v,onEdgesChange:f,elementsSelectable:x,connectionMode:w,snapGrid:p,snapToGrid:b,translateExtent:E,connectOnClick:C,defaultEdgeOptions:T,fitView:z,fitViewOptions:$,onNodesDelete:O,onEdgesDelete:V,onNodeDrag:L,onNodeDragStart:y,onNodeDragStop:A,onSelectionDrag:M,onSelectionDragStart:k,onSelectionDragStop:I,noPanClassName:R,nodeOrigin:D,rfId:B})=>{const{setNodes:Y,setEdges:Z,setDefaultNodesAndEdges:U,setMinZoom:H,setMaxZoom:q,setTranslateExtent:G,setNodeExtent:K,reset:j}=J(gf,ae),P=te();return N.exports.useEffect(()=>{const ie=r==null?void 0:r.map(re=>({...re,...T}));return U(n,ie),()=>{j()}},[]),W("defaultEdgeOptions",T,P.setState),W("connectionMode",w,P.setState),W("onConnect",o,P.setState),W("onConnectStart",s,P.setState),W("onConnectEnd",i,P.setState),W("onClickConnectStart",a,P.setState),W("onClickConnectEnd",l,P.setState),W("nodesDraggable",c,P.setState),W("nodesConnectable",u,P.setState),W("nodesFocusable",h,P.setState),W("edgesFocusable",d,P.setState),W("elementsSelectable",x,P.setState),W("snapToGrid",b,P.setState),W("snapGrid",p,P.setState),W("onNodesChange",v,P.setState),W("onEdgesChange",f,P.setState),W("connectOnClick",C,P.setState),W("fitViewOnInit",z,P.setState),W("fitViewOnInitOptions",$,P.setState),W("onNodesDelete",O,P.setState),W("onEdgesDelete",V,P.setState),W("onNodeDrag",L,P.setState),W("onNodeDragStart",y,P.setState),W("onNodeDragStop",A,P.setState),W("onSelectionDrag",M,P.setState),W("onSelectionDragStart",k,P.setState),W("onSelectionDragStop",I,P.setState),W("noPanClassName",R,P.setState),W("nodeOrigin",D,P.setState),W("rfId",B,P.setState),Ge(e,Y),Ge(t,Z),Ge(g,H),Ge(S,q),Ge(E,G),Ge(m,K),null},Jr={display:"none"},yf={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bi="react-flow__node-desc",_i="react-flow__edge-desc",xf="react-flow__aria-live",wf=e=>e.ariaLiveMessage;function vf({rfId:e}){const t=J(wf);return _("div",{id:`${xf}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:yf,children:t})}function bf({rfId:e,disableKeyboardA11y:t}){return X(he,{children:[X("div",{id:`${bi}-${e}`,style:Jr,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),_("div",{id:`${_i}-${e}`,style:Jr,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&_(vf,{rfId:e})]})}const _f=(e,t,n)=>n===F.Left?e-t:n===F.Right?e+t:e,Sf=(e,t,n)=>n===F.Top?e-t:n===F.Bottom?e+t:e,eo="react-flow__edgeupdater",to=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:s,onMouseOut:i,type:a})=>_("circle",{onMouseDown:o,onMouseEnter:s,onMouseOut:i,className:oe([eo,`${eo}-${a}`]),cx:_f(t,r,e),cy:Sf(n,r,e),r,stroke:"transparent",fill:"transparent"});var Ke=e=>{const t=({id:n,className:r,type:o,data:s,onClick:i,onEdgeDoubleClick:a,selected:l,animated:c,label:u,labelStyle:h,labelShowBg:d,labelBgStyle:g,labelBgPadding:S,labelBgBorderRadius:m,style:v,source:f,target:x,sourceX:w,sourceY:p,targetX:b,targetY:E,sourcePosition:C,targetPosition:T,elementsSelectable:z,hidden:$,sourceHandleId:O,targetHandleId:V,onContextMenu:L,onMouseEnter:y,onMouseMove:A,onMouseLeave:M,edgeUpdaterRadius:k,onEdgeUpdate:I,onEdgeUpdateStart:R,onEdgeUpdateEnd:D,markerEnd:B,markerStart:Y,rfId:Z,ariaLabel:U,isFocusable:H,pathOptions:q,interactionWidth:G})=>{const K=N.exports.useRef(null),[j,P]=N.exports.useState(!1),[ie,re]=N.exports.useState(!1),Q=te(),pe=N.exports.useMemo(()=>`url(#${Gn(Y,Z)})`,[Y,Z]),ee=N.exports.useMemo(()=>`url(#${Gn(B,Z)})`,[B,Z]);if($)return null;const ce=fe=>{const{edges:ve,addSelectedEdges:Oe}=Q.getState();if(z&&(Q.setState({nodesSelectionActive:!1}),Oe([n])),i){const Pe=ve.find($e=>$e.id===n);i(fe,Pe)}},le=ht(n,Q.getState,a),Ae=ht(n,Q.getState,L),ue=ht(n,Q.getState,y),Be=ht(n,Q.getState,A),we=ht(n,Q.getState,M),qe=(fe,ve)=>{const Oe=ve?x:f,Pe=(ve?V:O)||null,$e=ve?"target":"source",Ot=()=>!0,ct=ve,lt=Q.getState().edges.find(He=>He.id===n);re(!0),R==null||R(fe,lt,$e);const Sn=He=>{re(!1),D==null||D(He,lt,$e)};li({event:fe,handleId:Pe,nodeId:Oe,onConnect:He=>I==null?void 0:I(lt,He),isTarget:ct,getState:Q.getState,setState:Q.setState,isValidConnection:Ot,elementEdgeUpdaterType:$e,onEdgeUpdateEnd:Sn})},at=fe=>qe(fe,!0),Ze=fe=>qe(fe,!1),Ft=()=>P(!0),Bt=()=>P(!1),vn=!z&&!i,bn=typeof I<"u",_n=fe=>{var ve;if(si.includes(fe.key)&&z){const{unselectNodesAndEdges:Oe,addSelectedEdges:Pe,edges:$e}=Q.getState();fe.key==="Escape"?((ve=K.current)==null||ve.blur(),Oe({edges:[$e.find(ct=>ct.id===n)]})):Pe([n])}};return X("g",{className:oe(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:l,animated:c,inactive:vn,updating:j}]),onClick:ce,onDoubleClick:le,onContextMenu:Ae,onMouseEnter:ue,onMouseMove:Be,onMouseLeave:we,onKeyDown:H?_n:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${f} to ${x}`,"aria-describedby":H?`${_i}-${Z}`:void 0,ref:K,children:[!ie&&_(e,{id:n,source:f,target:x,selected:l,animated:c,label:u,labelStyle:h,labelShowBg:d,labelBgStyle:g,labelBgPadding:S,labelBgBorderRadius:m,data:s,style:v,sourceX:w,sourceY:p,targetX:b,targetY:E,sourcePosition:C,targetPosition:T,sourceHandleId:O,targetHandleId:V,markerStart:pe,markerEnd:ee,pathOptions:q,interactionWidth:G}),bn&&X(he,{children:[_(to,{position:C,centerX:w,centerY:p,radius:k,onMouseDown:at,onMouseEnter:Ft,onMouseOut:Bt,type:"source"}),_(to,{position:T,centerX:b,centerY:E,radius:k,onMouseDown:Ze,onMouseEnter:Ft,onMouseOut:Bt,type:"target"})]})]})};return t.displayName="EdgeWrapper",N.exports.memo(t)};function Ef(e){const t={default:Ke(e.default||un),straight:Ke(e.bezier||pr),step:Ke(e.step||hr),smoothstep:Ke(e.step||yn),simplebezier:Ke(e.simplebezier||dr)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,s)=>(o[s]=Ke(e[s]||un),o),n);return{...t,...r}}function no(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case F.Top:return{x:r+s/2,y:o};case F.Right:return{x:r+s,y:o+i/2};case F.Bottom:return{x:r+s/2,y:o+i};case F.Left:return{x:r,y:o+i/2}}}function ro(e,t){if(!e)return null;let n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(r=>r.id===t)),typeof n>"u"?null:n}const Nf=(e,t,n,r,o,s)=>{const i=no(n,e,t),a=no(s,r,o);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function Mf({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:s,width:i,height:a,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+s)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const u=cn({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:a/l[2]}),h=Math.max(0,Math.min(u.x2,c.x2)-Math.max(u.x,c.x)),d=Math.max(0,Math.min(u.y2,c.y2)-Math.max(u.y,c.y));return Math.ceil(h*d)>0}function oo(e){var r,o,s,i,a;const t=((r=e==null?void 0:e[ne])==null?void 0:r.handleBounds)||null,n=!e||!t||!e.width||!e.height||typeof((o=e.positionAbsolute)==null?void 0:o.x)>"u"||typeof((s=e.positionAbsolute)==null?void 0:s.y)>"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!n]}function Si(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Si(n,t):!1}function io(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function Cf(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!Si(r,e))).map(r=>{var o,s,i,a;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-((s=(o=r.positionAbsolute)==null?void 0:o.x)!=null?s:0),y:t.y-((a=(i=r.positionAbsolute)==null?void 0:i.y)!=null?a:0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function Ei(e,t,n,r){var a,l,c,u,h,d,g,S;let o=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const m=n.get(e.parentNode);o=(m==null?void 0:m.positionAbsolute)&&(m==null?void 0:m.width)&&(m==null?void 0:m.height)?[[m.positionAbsolute.x,m.positionAbsolute.y],[m.positionAbsolute.x+m.width-e.width,m.positionAbsolute.y+m.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){const m=n.get(e.parentNode),v=(l=(a=m==null?void 0:m.positionAbsolute)==null?void 0:a.x)!=null?l:0,f=(u=(c=m==null?void 0:m.positionAbsolute)==null?void 0:c.y)!=null?u:0;o=[[e.extent[0][0]+v,e.extent[0][1]+f],[e.extent[1][0]+v,e.extent[1][1]+f]]}let s={x:0,y:0};if(e.parentNode){const m=n.get(e.parentNode);s={x:(d=(h=m==null?void 0:m.positionAbsolute)==null?void 0:h.x)!=null?d:0,y:(S=(g=m==null?void 0:m.positionAbsolute)==null?void 0:g.y)!=null?S:0}}const i=o?fr(t,o):t;return{position:{x:i.x-s.x,y:i.y-s.y},positionAbsolute:i}}function In({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const so=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const s=Array.from(o),i=t.getBoundingClientRect(),a={x:i.width*r[0],y:i.height*r[1]};return s.map(l=>{const c=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(c.left-i.left-a.x)/n,y:(c.top-i.top-a.y)/n,...ur(l)}})};function pt(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);n(r,{...o})}}function jn({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:o,multiSelectionActive:s,nodeInternals:i}=t.getState(),a=i.get(e);t.setState({nodesSelectionActive:!1}),a.selected?(n||a.selected&&s)&&o({nodes:[a]}):r([e])}function zn(e){return(t,n,r)=>e==null?void 0:e(t,r)}function Ni({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:s,selectNodesOnDrag:i}){const[a,l]=N.exports.useState(!1),c=te(),u=N.exports.useRef(),h=N.exports.useRef({x:null,y:null}),d=N.exports.useCallback(({sourceEvent:g})=>{const{transform:S,snapGrid:m,snapToGrid:v}=c.getState(),f=g.touches?g.touches[0].clientX:g.clientX,x=g.touches?g.touches[0].clientY:g.clientY,w={x:(f-S[0])/S[2],y:(x-S[1])/S[2]};return{xSnapped:v?m[0]*Math.round(w.x/m[0]):w.x,ySnapped:v?m[1]*Math.round(w.y/m[1]):w.y,...w}},[]);return N.exports.useEffect(()=>{if(e!=null&&e.current){const g=ye(e.current);if(t)g.on(".drag",null);else{const S=tl().on("start",m=>{var C;const{nodeInternals:v,multiSelectionActive:f,unselectNodesAndEdges:x,onNodeDragStart:w,onSelectionDragStart:p}=c.getState(),b=o?w:zn(p);!i&&!f&&o&&((C=v.get(o))!=null&&C.selected||x()),o&&s&&i&&jn({id:o,store:c});const E=d(m);if(h.current=E,u.current=Cf(v,E,o),b&&u.current){const[T,z]=In({nodeId:o,dragItems:u.current,nodeInternals:v});b(m.sourceEvent,T,z)}}).on("drag",m=>{const{updateNodePositions:v,nodeInternals:f,nodeExtent:x,onNodeDrag:w,onSelectionDrag:p,snapGrid:b,snapToGrid:E}=c.getState(),C=d(m);if((h.current.x!==C.xSnapped||h.current.y!==C.ySnapped)&&u.current){h.current={x:C.xSnapped,y:C.ySnapped},u.current=u.current.map(z=>{const $={x:C.x-z.distance.x,y:C.y-z.distance.y};E&&($.x=b[0]*Math.round($.x/b[0]),$.y=b[1]*Math.round($.y/b[1]));const O=Ei(z,$,f,x);return z.position=O.position,z.positionAbsolute=O.positionAbsolute,z});const T=o?w:zn(p);if(v(u.current,!0,!0),l(!0),T){const[z,$]=In({nodeId:o,dragItems:u.current,nodeInternals:f});T(m.sourceEvent,z,$)}}}).on("end",m=>{if(l(!1),u.current){const{updateNodePositions:v,nodeInternals:f,onNodeDragStop:x,onSelectionDragStop:w}=c.getState(),p=o?x:zn(w);if(v(u.current,!1,!1),p){const[b,E]=In({nodeId:o,dragItems:u.current,nodeInternals:f});p(m.sourceEvent,b,E)}}}).filter(m=>{const v=m.target;return!m.button&&(!n||!io(v,`.${n}`,e))&&(!r||io(v,r,e))});return g.call(S),()=>{g.on(".drag",null)}}}},[e,t,n,r,s,c,o,i,d]),a}function Mi(){const e=te();return N.exports.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:s,snapToGrid:i,snapGrid:a}=e.getState(),c=Array.from(r.values()).filter(u=>u.selected).map(u=>{if(u.positionAbsolute){const h={x:u.positionAbsolute.x+n.x,y:u.positionAbsolute.y+n.y};i&&(h.x=a[0]*Math.round(h.x/a[0]),h.y=a[1]*Math.round(h.y/a[1]));const d=Ei(u,h,r,o);u.position=d.position,u.positionAbsolute=d.positionAbsolute}return u});s(c,!0,!0)},[])}const _t={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var gt=e=>{const t=({id:n,type:r,data:o,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:l,selected:c,onClick:u,onMouseEnter:h,onMouseMove:d,onMouseLeave:g,onContextMenu:S,onDoubleClick:m,style:v,className:f,isDraggable:x,isSelectable:w,isConnectable:p,isFocusable:b,selectNodesOnDrag:E,sourcePosition:C,targetPosition:T,hidden:z,resizeObserver:$,dragHandle:O,zIndex:V,isParent:L,noDragClassName:y,noPanClassName:A,initialized:M,disableKeyboardA11y:k,ariaLabel:I,rfId:R})=>{const D=te(),B=N.exports.useRef(null),Y=N.exports.useRef(C),Z=N.exports.useRef(T),U=N.exports.useRef(r),H=w||x||u||h||d||g,q=Mi(),G=pt(n,D.getState,h),K=pt(n,D.getState,d),j=pt(n,D.getState,g),P=pt(n,D.getState,S),ie=pt(n,D.getState,m),re=ee=>{if(w&&(!E||!x)&&jn({id:n,store:D}),u){const ce=D.getState().nodeInternals.get(n);u(ee,{...ce})}},Q=ee=>{var Ae;const{snapGrid:ce,snapToGrid:le}=D.getState();if(si.includes(ee.key)&&w){const ue=ee.key==="Escape";ue&&((Ae=B.current)==null||Ae.blur()),jn({id:n,store:D,unselect:ue})}else if(!k&&x&&c&&Object.prototype.hasOwnProperty.call(_t,ee.key)){D.setState({ariaLiveMessage:`Moved selected node ${ee.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`});const ue=le?ce[0]:5,Be=le?ce[1]:5,we=ee.shiftKey?4:1;q({x:_t[ee.key].x*ue*we,y:_t[ee.key].y*Be*we})}};N.exports.useEffect(()=>{if(B.current&&!z){const ee=B.current;return $==null||$.observe(ee),()=>$==null?void 0:$.unobserve(ee)}},[z]),N.exports.useEffect(()=>{const ee=U.current!==r,ce=Y.current!==C,le=Z.current!==T;B.current&&(ee||ce||le)&&(ee&&(U.current=r),ce&&(Y.current=C),le&&(Z.current=T),D.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,r,C,T]);const pe=Ni({nodeRef:B,disabled:z||!x,noDragClassName:y,handleSelector:O,nodeId:n,isSelectable:w,selectNodesOnDrag:E});return z?null:_("div",{className:oe(["react-flow__node",`react-flow__node-${r}`,{[A]:x},f,{selected:c,selectable:w,parent:L,dragging:pe}]),ref:B,style:{zIndex:V,transform:`translate(${a}px,${l}px)`,pointerEvents:H?"all":"none",visibility:M?"visible":"hidden",...v},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:G,onMouseMove:K,onMouseLeave:j,onContextMenu:P,onClick:re,onDoubleClick:ie,onKeyDown:b?Q:void 0,tabIndex:b?0:void 0,role:b?"button":void 0,"aria-describedby":k?void 0:`${bi}-${R}`,"aria-label":I,children:_(rf,{value:n,children:_(e,{id:n,data:o,type:r,xPos:s,yPos:i,selected:c,isConnectable:p,sourcePosition:C,targetPosition:T,dragging:pe,dragHandle:O,zIndex:V})})})};return t.displayName="NodeWrapper",N.exports.memo(t)};function Af(e){const t={input:gt(e.input||yi),default:gt(e.default||Kn),output:gt(e.output||wi),group:gt(e.group||mr)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,s)=>(o[s]=gt(e[s]||Kn),o),n);return{...t,...r}}const $f=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},kf=typeof document<"u"?document:null;var fn=(e=null,t={target:kf})=>{const[n,r]=N.exports.useState(!1),o=N.exports.useRef(new Set([])),[s,i]=N.exports.useMemo(()=>{if(e!==null){const l=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.split("+")),c=l.reduce((u,h)=>u.concat(...h),[]);return[l,c]}return[[],[]]},[e]);return N.exports.useEffect(()=>{var a,l;if(e!==null){const c=d=>{if(lo(d))return!1;const g=co(d.code,i);o.current.add(d[g]),ao(s,o.current,!1)&&(d.preventDefault(),r(!0))},u=d=>{if(lo(d))return!1;const g=co(d.code,i);ao(s,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(d[g])},h=()=>{o.current.clear(),r(!1)};return(a=t==null?void 0:t.target)==null||a.addEventListener("keydown",c),(l=t==null?void 0:t.target)==null||l.addEventListener("keyup",u),window.addEventListener("blur",h),()=>{var d,g;(d=t==null?void 0:t.target)==null||d.removeEventListener("keydown",c),(g=t==null?void 0:t.target)==null||g.removeEventListener("keyup",u),window.removeEventListener("blur",h)}}},[e,r]),n};function ao(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function co(e,t){return t.includes(e)?"code":"key"}function lo(e){var n;const t=((n=e.composedPath)==null?void 0:n.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}function Ci(e,t,n,r){var s,i,a,l,c,u,h,d,g,S,m,v;if(!e.parentNode)return r;const o=t.get(e.parentNode);return Ci(o,t,n,{x:((s=r.x)!=null?s:0)+((a=(i=o.position)==null?void 0:i.x)!=null?a:0),y:((l=r.y)!=null?l:0)+((u=(c=o.position)==null?void 0:c.y)!=null?u:0),z:((d=(h=o[ne])==null?void 0:h.z)!=null?d:0)>((g=r.z)!=null?g:0)?(m=(S=o[ne])==null?void 0:S.z)!=null?m:0:(v=r.z)!=null?v:0})}function Dn(e,t){const n=new Map,r={};return e.forEach(o=>{var l;const s=ii(o.zIndex)?o.zIndex:o.selected?1e3:0,i=t.get(o.id),a={width:i==null?void 0:i.width,height:i==null?void 0:i.height,...o,positionAbsolute:{x:o.position.x,y:o.position.y}};o.parentNode&&(a.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(a,ne,{enumerable:!1,value:{handleBounds:(l=i==null?void 0:i[ne])==null?void 0:l.handleBounds,z:s}}),n.set(o.id,a)}),n.forEach(o=>{var s,i;if(o.parentNode&&!n.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||r[o.id]){const{x:a,y:l,z:c}=Ci(o,n,r,{...o.position,z:(i=(s=o[ne])==null?void 0:s.z)!=null?i:0});o.positionAbsolute={x:a,y:l},o[ne].z=c,r[o.id]&&(o[ne].isParent=!0)}}),n}function Ai(e,t={}){var h,d,g;const{nodeInternals:n,width:r,height:o,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:u}=e();if((t.initial&&!c&&u||!t.initial)&&a&&l){const S=Array.from(n.values()).filter(v=>t.includeHiddenNodes?v.width&&v.height:!v.hidden),m=S.every(v=>v.width&&v.height);if(S.length>0&&m){const v=xn(S),[f,x,w]=hi(v,r,o,(h=t.minZoom)!=null?h:s,(d=t.maxZoom)!=null?d:i,(g=t.padding)!=null?g:.1),p=Fe.translate(f,x).scale(w);return typeof t.duration=="number"&&t.duration>0?a.transform(Ve(l,t.duration),p):a.transform(l,p),!0}}return!1}function Tf(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[ne]:r[ne],selected:n.selected})}),new Map(t)}function If(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function qt({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:l,hasDefaultEdges:c}=n();e!=null&&e.length&&(l&&r({nodeInternals:Tf(e,o)}),i==null||i(e)),t!=null&&t.length&&(c&&r({edges:If(t,s)}),a==null||a(t))}const Le=()=>{},zf={zoomIn:Le,zoomOut:Le,zoomTo:Le,getZoom:()=>1,setViewport:Le,getViewport:()=>({x:0,y:0,zoom:1}),fitView:Le,setCenter:Le,fitBounds:Le,project:e=>e,viewportInitialized:!1},Df=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Rf=()=>{const e=te(),{d3Zoom:t,d3Selection:n}=J(Df,ae);return N.exports.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(Ve(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(Ve(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,s)=>t.scaleTo(Ve(n,s==null?void 0:s.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,s)=>{var u,h,d;const[i,a,l]=e.getState().transform,c=Fe.translate((u=o.x)!=null?u:i,(h=o.y)!=null?h:a).scale((d=o.zoom)!=null?d:l);t.transform(Ve(n,s==null?void 0:s.duration),c)},getViewport:()=>{const[o,s,i]=e.getState().transform;return{x:o,y:s,zoom:i}},fitView:o=>Ai(e.getState,o),setCenter:(o,s,i)=>{const{width:a,height:l,maxZoom:c}=e.getState(),u=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:c,h=a/2-o*u,d=l/2-s*u,g=Fe.translate(h,d).scale(u);t.transform(Ve(n,i==null?void 0:i.duration),g)},fitBounds:(o,s)=>{var S;const{width:i,height:a,minZoom:l,maxZoom:c}=e.getState(),[u,h,d]=hi(o,i,a,l,c,(S=s==null?void 0:s.padding)!=null?S:.1),g=Fe.translate(u,h).scale(d);t.transform(Ve(n,s==null?void 0:s.duration),g)},project:o=>{const{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return cf(o,s,i,a)},viewportInitialized:!0}:zf,[t,n])};function wn(){const e=Rf(),t=te(),n=N.exports.useCallback(()=>{const{nodeInternals:m}=t.getState();return Array.from(m.values()).map(f=>({...f}))},[]),r=N.exports.useCallback(m=>{const{nodeInternals:v}=t.getState();return v.get(m)},[]),o=N.exports.useCallback(()=>{const{edges:m=[]}=t.getState();return m.map(v=>({...v}))},[]),s=N.exports.useCallback(m=>{const{edges:v=[]}=t.getState();return v.find(f=>f.id===m)},[]),i=N.exports.useCallback(m=>{const{nodeInternals:v,setNodes:f,hasDefaultNodes:x,onNodesChange:w}=t.getState(),p=Array.from(v.values()),b=typeof m=="function"?m(p):m;if(x)f(b);else if(w){const E=b.length===0?p.map(C=>({type:"remove",id:C.id})):b.map(C=>({item:C,type:"reset"}));w(E)}},[]),a=N.exports.useCallback(m=>{const{edges:v=[],setEdges:f,hasDefaultEdges:x,onEdgesChange:w}=t.getState(),p=typeof m=="function"?m(v):m;if(x)f(p);else if(w){const b=p.length===0?v.map(E=>({type:"remove",id:E.id})):p.map(E=>({item:E,type:"reset"}));w(b)}},[]),l=N.exports.useCallback(m=>{const v=Array.isArray(m)?m:[m],{nodeInternals:f,setNodes:x,hasDefaultNodes:w,onNodesChange:p}=t.getState();if(w){const E=[...Array.from(f.values()),...v];x(E)}else if(p){const b=v.map(E=>({item:E,type:"add"}));p(b)}},[]),c=N.exports.useCallback(m=>{const v=Array.isArray(m)?m:[m],{edges:f=[],setEdges:x,hasDefaultEdges:w,onEdgesChange:p}=t.getState();if(w)x([...f,...v]);else if(p){const b=v.map(E=>({item:E,type:"add"}));p(b)}},[]),u=N.exports.useCallback(()=>{const{nodeInternals:m,edges:v=[],transform:f}=t.getState(),x=Array.from(m.values()),[w,p,b]=f;return{nodes:x.map(E=>({...E})),edges:v.map(E=>({...E})),viewport:{x:w,y:p,zoom:b}}},[]),h=N.exports.useCallback(({nodes:m,edges:v})=>{const{nodeInternals:f,edges:x,hasDefaultNodes:w,hasDefaultEdges:p,onNodesDelete:b,onEdgesDelete:E,onNodesChange:C,onEdgesChange:T}=t.getState(),z=Array.from(f.values()),$=(m||[]).map(A=>A.id),O=(v||[]).map(A=>A.id),V=z.reduce((A,M)=>{const k=!$.includes(M.id)&&M.parentNode&&A.find(R=>R.id===M.parentNode);return(typeof M.deletable=="boolean"?M.deletable:!0)&&($.includes(M.id)||k)&&A.push(M),A},[]),L=x.filter(A=>typeof A.deletable=="boolean"?A.deletable:!0),y=L.filter(A=>O.includes(A.id));if(V||y){const A=di(V,L),M=[...y,...A],k=M.reduce((I,R)=>(I.includes(R.id)||I.push(R.id),I),[]);if((p||w)&&(p&&t.setState({edges:x.filter(I=>!k.includes(I.id))}),w&&(V.forEach(I=>{f.delete(I.id)}),t.setState({nodeInternals:new Map(f)}))),k.length>0&&(E==null||E(M),T&&T(k.map(I=>({id:I,type:"remove"})))),V.length>0&&(b==null||b(V),C)){const I=V.map(R=>({id:R.id,type:"remove"}));C(I)}}},[]),d=N.exports.useCallback(m=>{const v=ju(m),f=v?null:t.getState().nodeInternals.get(m.id);return[v?m:Zr(f),f,v]},[]),g=N.exports.useCallback((m,v=!0,f)=>{const[x,w,p]=d(m);return x?(f||Array.from(t.getState().nodeInternals.values())).filter(b=>{if(!p&&(b.id===w.id||!b.positionAbsolute))return!1;const E=Zr(b),C=Wn(E,x);return v&&C>0||C>=m.width*m.height}):[]},[]),S=N.exports.useCallback((m,v,f=!0)=>{const[x]=d(m);if(!x)return!1;const w=Wn(x,v);return f&&w>0||w>=m.width*m.height},[]);return N.exports.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:s,setNodes:i,setEdges:a,addNodes:l,addEdges:c,toObject:u,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:S}),[e,n,r,o,s,i,a,l,c,u,h,g,S])}var Ff=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=te(),{deleteElements:r}=wn(),o=fn(e),s=fn(t);N.exports.useEffect(()=>{if(o){const{nodeInternals:i,edges:a}=n.getState(),c=Array.from(i.values()).filter(h=>h.selected),u=a.filter(h=>h.selected);r({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),N.exports.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Bf(e){const t=te();N.exports.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const o=ur(e.current);o.height===0||o.width,t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const yr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Of=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Rn=e=>({x:e.x,y:e.y,zoom:e.k}),Zt=(e,t)=>e.target.closest(`.${t}`),Pf=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler}),Hf=({onMove:e,onMoveStart:t,onMoveEnd:n,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:s=!1,panOnScrollSpeed:i=.5,panOnScrollMode:a=tt.Free,zoomOnDoubleClick:l=!0,selectionKeyPressed:c,elementsSelectable:u,panOnDrag:h=!0,defaultViewport:d,translateExtent:g,minZoom:S,maxZoom:m,zoomActivationKeyCode:v,preventScrolling:f=!0,children:x,noWheelClassName:w,noPanClassName:p})=>{const b=N.exports.useRef(),E=te(),C=N.exports.useRef(!1),T=N.exports.useRef(null),z=N.exports.useRef({x:0,y:0,zoom:0}),{d3Zoom:$,d3Selection:O,d3ZoomHandler:V}=J(Pf,ae),L=fn(v);return Bf(T),N.exports.useEffect(()=>{if(T.current){const y=Qo().scaleExtent([S,m]).translateExtent(g),A=ye(T.current).call(y),M=nt(d.x,g[0][0],g[1][0]),k=nt(d.y,g[0][1],g[1][1]),I=nt(d.zoom,S,m),R=Fe.translate(M,k).scale(I);y.transform(A,R),E.setState({d3Zoom:y,d3Selection:A,d3ZoomHandler:A.on("wheel.zoom"),transform:[M,k,I],domNode:T.current.closest(".react-flow")})}},[]),N.exports.useEffect(()=>{O&&$&&(s&&!L?O.on("wheel.zoom",y=>{if(Zt(y,w))return!1;y.preventDefault(),y.stopImmediatePropagation();const A=O.property("__zoom").k||1;if(y.ctrlKey&&o){const R=be(y),D=-y.deltaY*(y.deltaMode===1?.05:y.deltaMode?1:.002)*10,B=A*Math.pow(2,D);$.scaleTo(O,B,R);return}const M=y.deltaMode===1?20:1,k=a===tt.Vertical?0:y.deltaX*M,I=a===tt.Horizontal?0:y.deltaY*M;$.translateBy(O,-(k/A)*i,-(I/A)*i)}):typeof V<"u"&&O.on("wheel.zoom",function(y,A){if(!f||Zt(y,w))return null;y.preventDefault(),V.call(this,y,A)}))},[s,a,O,$,V,L,o,f,w]),N.exports.useEffect(()=>{$&&(c&&!C.current?$.on("zoom",null):c||$.on("zoom",y=>{const{onViewportChange:A}=E.getState();if(E.setState({transform:[y.transform.x,y.transform.y,y.transform.k]}),e||A){const M=Rn(y.transform);A==null||A(M),e==null||e(y.sourceEvent,M)}}))},[c,$,e]),N.exports.useEffect(()=>{$&&$.on("start",y=>{var M;if(!y.sourceEvent)return null;const{onViewportChangeStart:A}=E.getState();if(C.current=!0,((M=y.sourceEvent)==null?void 0:M.type)==="mousedown"&&E.setState({paneDragging:!0}),t||A){const k=Rn(y.transform);z.current=k,A==null||A(k),t==null||t(y.sourceEvent,k)}})},[$,t]),N.exports.useEffect(()=>{$&&$.on("end",y=>{if(!y.sourceEvent)return null;const{onViewportChangeEnd:A}=E.getState();if(C.current=!1,E.setState({paneDragging:!1}),(n||A)&&Of(z.current,y.transform)){const M=Rn(y.transform);z.current=M,clearTimeout(b.current),b.current=setTimeout(()=>{A==null||A(M),n==null||n(y.sourceEvent,M)},s?150:0)}})},[$,n,s]),N.exports.useEffect(()=>{$&&$.filter(y=>{const A=L||r,M=o&&y.ctrlKey;return y.button===1&&y.type==="mousedown"&&y.target.closest(".react-flow__node")?!0:!h&&!A&&!s&&!l&&!o||c||!l&&y.type==="dblclick"||Zt(y,w)&&y.type==="wheel"||Zt(y,p)&&y.type!=="wheel"||!o&&y.ctrlKey&&y.type==="wheel"||!A&&!s&&!M&&y.type==="wheel"||!h&&(y.type==="mousedown"||y.type==="touchstart")?!1:(!y.ctrlKey||y.type==="wheel")&&(!y.button||y.button<=1)})},[$,r,o,s,l,h,c,u,L]),_("div",{className:"react-flow__renderer",ref:T,style:yr,children:x})};function uo(e,t){var r,o;const n=e.find(s=>s.id===t.parentNode);if(n){const s=t.position.x+t.width-n.width,i=t.position.y+t.height-n.height;if(s>0||i>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=(r=n.style.width)!=null?r:n.width,n.style.height=(o=n.style.height)!=null?o:n.height,s>0&&(n.style.width+=s),i>0&&(n.style.height+=i),t.position.x<0){const a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);n.position.y=n.position.y-a,n.style.height+=a,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function $i(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const s=e.find(i=>i.id===o.id);if(s)switch(s.type){case"select":return r.push({...o,selected:s.selected}),r;case"position":{const i={...o};return typeof s.position<"u"&&(i.position=s.position),typeof s.positionAbsolute<"u"&&(i.positionAbsolute=s.positionAbsolute),typeof s.dragging<"u"&&(i.dragging=s.dragging),i.expandParent&&uo(r,i),r.push(i),r}case"dimensions":{const i={...o};return typeof s.dimensions<"u"&&(i.width=s.dimensions.width,i.height=s.dimensions.height),i.expandParent&&uo(r,i),r.push(i),r}case"remove":return r}return r.push(o),r},n)}function xr(e,t){return $i(e,t)}function Lf(e,t){return $i(e,t)}const De=(e,t)=>({id:e,type:"select",selected:t});function Qe(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(De(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(De(r.id,!1))),n},[])}function fo(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const Vf=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable}),ho={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},ki=N.exports.memo(({selectionKeyPressed:e})=>{const t=te(),n=N.exports.useRef(0),r=N.exports.useRef(0),o=N.exports.useRef(),[s,i]=N.exports.useState(ho),{userSelectionActive:a,elementsSelectable:l}=J(Vf,ae);if(!l||!(a||e))return null;const u=()=>{i(ho),t.setState({userSelectionActive:!1}),n.current=0,r.current=0};return _("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:m=>{const v=m.target.closest(".react-flow");o.current=v.getBoundingClientRect();const f=fo(m,o.current);i({width:0,height:0,startX:f.x,startY:f.y,x:f.x,y:f.y,draw:!0}),t.setState({userSelectionActive:!0,nodesSelectionActive:!1})},onMouseMove:m=>{var L,y;if(!e||!s.draw||!o.current)return;const v=fo(m,o.current),f=(L=s.startX)!=null?L:0,x=(y=s.startY)!=null?y:0,w={...s,x:v.x<f?v.x:f,y:v.y<x?v.y:x,width:Math.abs(v.x-f),height:Math.abs(v.y-x)},{nodeInternals:p,edges:b,transform:E,onNodesChange:C,onEdgesChange:T}=t.getState(),z=Array.from(p.values()),$=fi(p,w,E,!1,!0),O=di($,b).map(A=>A.id),V=$.map(A=>A.id);if(n.current!==V.length){n.current=V.length;const A=Qe(z,V);A.length&&(C==null||C(A))}if(r.current!==O.length){r.current=O.length;const A=Qe(b,O);A.length&&(T==null||T(A))}i(w)},onMouseUp:()=>{t.setState({nodesSelectionActive:n.current>0}),u()},onMouseLeave:()=>{t.setState({nodesSelectionActive:!1}),u()},children:s.draw&&_("div",{className:"react-flow__selection react-flow__container",style:{width:s.width,height:s.height,transform:`translate(${s.x}px, ${s.y}px)`}})})});ki.displayName="UserSelection";const Yf=e=>({transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive,...xn(Array.from(e.nodeInternals.values()).filter(t=>t.selected))}),Xf=e=>{const t=Array.from(e.nodeInternals.values()).filter(n=>n.selected);return xn(t)};function Uf({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=te(),{transformString:o,userSelectionActive:s}=J(Yf,ae),{width:i,height:a,x:l,y:c}=J(Xf,ae),u=Mi(),h=N.exports.useRef(null);if(N.exports.useEffect(()=>{var S;n||(S=h.current)==null||S.focus()},[n]),Ni({nodeRef:h}),s||!i||!a)return null;const d=e?S=>{const m=Array.from(r.getState().nodeInternals.values()).filter(v=>v.selected);e(S,m)}:void 0,g=S=>{Object.prototype.hasOwnProperty.call(_t,S.key)&&u(_t[S.key])};return _("div",{className:oe(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:_("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:g,style:{width:i,height:a,top:c,left:l}})})}var Wf=N.exports.memo(Uf);const qf=e=>e.paneDragging;function Zf({onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:o,onWheel:s}){const i=J(qf);return _("div",{className:oe(["react-flow__pane",{dragging:i}]),onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:o,onWheel:s,style:yr})}const Gf=e=>e.nodesSelectionActive,Ti=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyCode:h,multiSelectionKeyCode:d,zoomActivationKeyCode:g,elementsSelectable:S,zoomOnScroll:m,zoomOnPinch:v,panOnScroll:f,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:p,panOnDrag:b,defaultViewport:E,translateExtent:C,minZoom:T,maxZoom:z,preventScrolling:$,onSelectionContextMenu:O,noWheelClassName:V,noPanClassName:L,disableKeyboardA11y:y})=>{const A=te(),M=J(Gf),k=fn(h);Ff({deleteKeyCode:a,multiSelectionKeyCode:d});const I=B=>{t==null||t(B),A.getState().resetSelectedElements(),A.setState({nodesSelectionActive:!1})},R=s?B=>s(B):void 0,D=i?B=>i(B):void 0;return X(Hf,{onMove:l,onMoveStart:c,onMoveEnd:u,selectionKeyPressed:k,elementsSelectable:S,zoomOnScroll:m,zoomOnPinch:v,panOnScroll:f,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:p,panOnDrag:b,defaultViewport:E,translateExtent:C,minZoom:T,maxZoom:z,zoomActivationKeyCode:g,preventScrolling:$,noWheelClassName:V,noPanClassName:L,children:[e,_(ki,{selectionKeyPressed:k}),M&&_(Wf,{onSelectionContextMenu:O,noPanClassName:L,disableKeyboardA11y:y}),_(Zf,{onClick:I,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:R,onWheel:D})]})};Ti.displayName="FlowRenderer";var Kf=N.exports.memo(Ti);function jf(e){return J(N.exports.useCallback(n=>e?fi(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values()),[e]))}const Qf=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions}),Ii=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:s}=J(Qf,ae),i=jf(e.onlyRenderVisibleElements),a=N.exports.useRef(),l=N.exports.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const c=new ResizeObserver(u=>{const h=u.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));s(h)});return a.current=c,c},[]);return N.exports.useEffect(()=>()=>{var c;(c=a==null?void 0:a.current)==null||c.disconnect()},[]),_("div",{className:"react-flow__nodes",style:yr,children:i.map(c=>{var p,b,E,C,T,z,$;let u=c.type||"default";e.nodeTypes[u]||(u="default");const h=e.nodeTypes[u]||e.nodeTypes.default,d=!!(c.draggable||t&&typeof c.draggable>"u"),g=!!(c.selectable||o&&typeof c.selectable>"u"),S=!!(c.connectable||n&&typeof c.connectable>"u"),m=!!(c.focusable||r&&typeof c.focusable>"u"),v=e.nodeExtent?fr(c.positionAbsolute,e.nodeExtent):c.positionAbsolute,f=(p=v==null?void 0:v.x)!=null?p:0,x=(b=v==null?void 0:v.y)!=null?b:0,w=$f({x:f,y:x,width:(E=c.width)!=null?E:0,height:(C=c.height)!=null?C:0,origin:e.nodeOrigin});return _(h,{id:c.id,className:c.className,style:c.style,type:u,data:c.data,sourcePosition:c.sourcePosition||F.Bottom,targetPosition:c.targetPosition||F.Top,hidden:c.hidden,xPos:f,yPos:x,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!c.selected,isDraggable:d,isSelectable:g,isConnectable:S,isFocusable:m,resizeObserver:l,dragHandle:c.dragHandle,zIndex:(z=(T=c[ne])==null?void 0:T.z)!=null?z:0,isParent:!!(($=c[ne])!=null&&$.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!c.width&&!!c.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:c.ariaLabel},c.id)})})};Ii.displayName="NodeRenderer";var Jf=N.exports.memo(Ii);const ed=[{level:0,isMaxLevel:!0,edges:[]}];function td(e,t,n=!1){let r=-1;const o=e.reduce((i,a)=>{var u,h,d,g;const l=ii(a.zIndex);let c=l?a.zIndex:0;return n&&(c=l?a.zIndex:Math.max(((h=(u=t.get(a.source))==null?void 0:u[ne])==null?void 0:h.z)||0,((g=(d=t.get(a.target))==null?void 0:d[ne])==null?void 0:g.z)||0)),i[c]?i[c].push(a):i[c]=[a],r=c>r?c:r,i},{}),s=Object.entries(o).map(([i,a])=>{const l=+i;return{edges:a,level:l,isMaxLevel:l===r}});return s.length===0?ed:s}function nd(e,t,n){const r=J(N.exports.useCallback(o=>e?o.edges.filter(s=>{const i=t.get(s.source),a=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&Mf({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return td(r,t,n)}const rd={[F.Left]:F.Right,[F.Right]:F.Left,[F.Top]:F.Bottom,[F.Bottom]:F.Top},zi=({connectionNodeId:e,connectionHandleType:t,connectionLineStyle:n,connectionLineType:r=Re.Bezier,isConnectable:o,CustomConnectionLineComponent:s})=>{var b,E,C,T,z;const{fromNode:i,handleId:a,toX:l,toY:c}=J(N.exports.useCallback($=>({fromNode:$.nodeInternals.get(e),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2]}),[e]),ae),u=(b=i==null?void 0:i[ne])==null?void 0:b.handleBounds;if(!i||!o||!(u!=null&&u[t]))return null;const h=u[t],d=a?h.find($=>$.id===a):h[0],g=d?d.x+d.width/2:((E=i==null?void 0:i.width)!=null?E:0)/2,S=d?d.y+d.height/2:(C=i==null?void 0:i.height)!=null?C:0,m=(((T=i==null?void 0:i.positionAbsolute)==null?void 0:T.x)||0)+g,v=(((z=i==null?void 0:i.positionAbsolute)==null?void 0:z.y)||0)+S,f=d==null?void 0:d.position;if(!f)return null;const x=rd[f];if(s)return _("g",{className:"react-flow__connection",children:_(s,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:d,fromX:m,fromY:v,toX:l,toY:c,fromPosition:f,toPosition:x})});let w="";const p={sourceX:m,sourceY:v,sourcePosition:f,targetX:l,targetY:c,targetPosition:x};return r===Re.Bezier?[w]=ci(p):r===Re.Step?[w]=qn({...p,borderRadius:0}):r===Re.SmoothStep?[w]=qn(p):r===Re.SimpleBezier?[w]=ai(p):w=`M${m},${v} ${l},${c}`,_("g",{className:"react-flow__connection",children:_("path",{d:w,fill:"none",className:"react-flow__connection-path",style:n})})};zi.displayName="ConnectionLine";const od=({color:e="none",strokeWidth:t=1})=>_("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),id=({color:e="none",strokeWidth:t=1})=>_("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),po={[ln.Arrow]:od,[ln.ArrowClosed]:id};function sd(e){return N.exports.useMemo(()=>Object.prototype.hasOwnProperty.call(po,e)?po[e]:null,[e])}const ad=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const l=sd(t);return l?_("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0",children:_(l,{color:n,strokeWidth:i})}):null},cd=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=Gn(i,t);r.includes(a)||(o.push({id:a,color:i.color||e,...i}),r.push(a))}}),o),[]).sort((o,s)=>o.id.localeCompare(s.id))},Di=({defaultColor:e,rfId:t})=>{const n=J(N.exports.useCallback(cd({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((s,i)=>s.id!==o[i].id)));return _("defs",{children:n.map(r=>_(ad,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};Di.displayName="MarkerDefinitions";var ld=N.exports.memo(Di);const ud=e=>({connectionNodeId:e.connectionNodeId,connectionHandleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals}),Ri=e=>{const{connectionNodeId:t,connectionHandleType:n,nodesConnectable:r,edgesFocusable:o,elementsSelectable:s,width:i,height:a,connectionMode:l,nodeInternals:c}=J(ud,ae),u=nd(e.onlyRenderVisibleElements,c,e.elevateEdgesOnSelect);if(!i)return null;const{connectionLineType:h,defaultMarkerColor:d,connectionLineStyle:g,connectionLineComponent:S,connectionLineContainerStyle:m}=e,v=t&&n;return X(he,{children:[u.map(({level:f,edges:x,isMaxLevel:w})=>X("svg",{style:{zIndex:f},width:i,height:a,className:"react-flow__edges react-flow__container",children:[w&&_(ld,{defaultColor:d,rfId:e.rfId}),_("g",{children:x.map(p=>{const[b,E,C]=oo(c.get(p.source)),[T,z,$]=oo(c.get(p.target));if(!C||!$)return null;let O=p.type||"default";e.edgeTypes[O]||(O="default");const V=e.edgeTypes[O]||e.edgeTypes.default,L=l===st.Strict?z.target:z.target||z.source,y=ro(E.source,p.sourceHandle||null),A=ro(L,p.targetHandle||null),M=(y==null?void 0:y.position)||F.Bottom,k=(A==null?void 0:A.position)||F.Top,I=!!(p.focusable||o&&typeof p.focusable>"u");if(!y||!A)return Qu(`Couldn't create edge for ${y?"target":"source"} handle id: ${y?p.targetHandle:p.sourceHandle}; edge id: ${p.id}. Help: https://reactflow.dev/error#800`),null;const{sourceX:R,sourceY:D,targetX:B,targetY:Y}=Nf(b,y,M,T,A,k);return _(V,{id:p.id,className:oe([p.className,e.noPanClassName]),type:O,data:p.data,selected:!!p.selected,animated:!!p.animated,hidden:!!p.hidden,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,style:p.style,source:p.source,target:p.target,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerEnd:p.markerEnd,markerStart:p.markerStart,sourceX:R,sourceY:D,targetX:B,targetY:Y,sourcePosition:M,targetPosition:k,elementsSelectable:s,onEdgeUpdate:e.onEdgeUpdate,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,onClick:e.onEdgeClick,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick,onEdgeUpdateStart:e.onEdgeUpdateStart,onEdgeUpdateEnd:e.onEdgeUpdateEnd,rfId:e.rfId,ariaLabel:p.ariaLabel,isFocusable:I,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth},p.id)})})]},f)),v&&_("svg",{style:m,width:i,height:a,className:"react-flow__edges react-flow__connectionline react-flow__container",children:_(zi,{connectionNodeId:t,connectionHandleType:n,connectionLineStyle:g,connectionLineType:h,isConnectable:r,CustomConnectionLineComponent:S})})]})};Ri.displayName="EdgeRenderer";var fd=N.exports.memo(Ri);const dd=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function hd({children:e}){const t=J(dd);return _("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function pd(e){const t=wn(),n=N.exports.useRef(!1);N.exports.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Fi=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:l,onEdgeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:g,onSelectionContextMenu:S,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:f,connectionLineContainerStyle:x,selectionKeyCode:w,multiSelectionKeyCode:p,zoomActivationKeyCode:b,deleteKeyCode:E,onlyRenderVisibleElements:C,elementsSelectable:T,selectNodesOnDrag:z,defaultViewport:$,translateExtent:O,minZoom:V,maxZoom:L,preventScrolling:y,defaultMarkerColor:A,zoomOnScroll:M,zoomOnPinch:k,panOnScroll:I,panOnScrollSpeed:R,panOnScrollMode:D,zoomOnDoubleClick:B,panOnDrag:Y,onPaneClick:Z,onPaneMouseEnter:U,onPaneMouseMove:H,onPaneMouseLeave:q,onPaneScroll:G,onPaneContextMenu:K,onEdgeUpdate:j,onEdgeContextMenu:P,onEdgeMouseEnter:ie,onEdgeMouseMove:re,onEdgeMouseLeave:Q,edgeUpdaterRadius:pe,onEdgeUpdateStart:ee,onEdgeUpdateEnd:ce,noDragClassName:le,noWheelClassName:Ae,noPanClassName:ue,elevateEdgesOnSelect:Be,disableKeyboardA11y:we,nodeOrigin:qe,nodeExtent:at,rfId:Ze})=>(pd(s),_(Kf,{onPaneClick:Z,onPaneMouseEnter:U,onPaneMouseMove:H,onPaneMouseLeave:q,onPaneContextMenu:K,onPaneScroll:G,deleteKeyCode:E,selectionKeyCode:w,multiSelectionKeyCode:p,zoomActivationKeyCode:b,elementsSelectable:T,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:M,zoomOnPinch:k,zoomOnDoubleClick:B,panOnScroll:I,panOnScrollSpeed:R,panOnScrollMode:D,panOnDrag:Y,defaultViewport:$,translateExtent:O,minZoom:V,maxZoom:L,onSelectionContextMenu:S,preventScrolling:y,noDragClassName:le,noWheelClassName:Ae,noPanClassName:ue,disableKeyboardA11y:we,children:X(hd,{children:[_(fd,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:c,connectionLineType:m,connectionLineStyle:v,connectionLineComponent:f,connectionLineContainerStyle:x,onEdgeUpdate:j,onlyRenderVisibleElements:C,onEdgeContextMenu:P,onEdgeMouseEnter:ie,onEdgeMouseMove:re,onEdgeMouseLeave:Q,onEdgeUpdateStart:ee,onEdgeUpdateEnd:ce,edgeUpdaterRadius:pe,defaultMarkerColor:A,noPanClassName:ue,elevateEdgesOnSelect:!!Be,disableKeyboardA11y:we,rfId:Ze}),_("div",{className:"react-flow__edgelabel-renderer",id:"edgelabel-portal"}),_(Jf,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:g,selectNodesOnDrag:z,onlyRenderVisibleElements:C,noPanClassName:ue,noDragClassName:le,disableKeyboardA11y:we,nodeOrigin:qe,nodeExtent:at,rfId:Ze})]})}));Fi.displayName="GraphView";var gd=N.exports.memo(Fi);const Qn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Qn,nodeExtent:Qn,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:st.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:""},md=()=>qs((e,t)=>({...Gt,setNodes:n=>{e({nodeInternals:Dn(n,t().nodeInternals)})},setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",s=typeof r<"u",i=o?Dn(n,new Map):new Map;e({nodeInternals:i,edges:s?r:[],hasDefaultNodes:o,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:l,nodeOrigin:c}=t(),u=l==null?void 0:l.querySelector(".react-flow__viewport");if(!u)return;const h=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(h.transform),g=n.reduce((m,v)=>{const f=o.get(v.id);if(f){const x=ur(v.nodeElement);!!(x.width&&x.height&&(f.width!==x.width||f.height!==x.height||v.forceUpdate))&&(o.set(f.id,{...f,[ne]:{...f[ne],handleBounds:{source:so(".source",v.nodeElement,d,c),target:so(".target",v.nodeElement,d,c)}},...x}),m.push({id:f.id,type:"dimensions",dimensions:x}))}return m},[]),S=i||s&&!i&&Ai(t,{initial:!0,...a});e({nodeInternals:new Map(o),fitViewOnInitDone:S}),(g==null?void 0:g.length)>0&&(r==null||r(g))},updateNodePositions:(n,r=!0,o=!1)=>{const{onNodesChange:s,nodeInternals:i,hasDefaultNodes:a}=t();if(a||s){const l=n.map(c=>{const u={id:c.id,type:"position",dragging:o};return r&&(u.positionAbsolute=c.positionAbsolute,u.position=c.position),u});if(l!=null&&l.length){if(a){const c=xr(l,Array.from(i.values())),u=Dn(c,i);e({nodeInternals:u})}s==null||s(l)}}},addSelectedNodes:n=>{const{multiSelectionActive:r,nodeInternals:o,edges:s}=t();let i,a=null;r?i=n.map(l=>De(l,!0)):(i=Qe(Array.from(o.values()),n),a=Qe(s,[])),qt({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,nodeInternals:s}=t();let i,a=null;r?i=n.map(l=>De(l,!0)):(i=Qe(o,n),a=Qe(Array.from(s.values()),[])),qt({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{nodeInternals:o,edges:s}=t(),i=n||Array.from(o.values()),a=r||s,l=i.map(u=>(u.selected=!1,De(u.id,!1))),c=a.map(u=>De(u.id,!1));qt({changedNodes:l,changedEdges:c,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{const{d3Zoom:r}=t();r==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{nodeInternals:n,edges:r}=t(),s=Array.from(n.values()).filter(a=>a.selected).map(a=>De(a.id,!1)),i=r.filter(a=>a.selected).map(a=>De(a.id,!1));qt({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=fr(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},cancelConnection:()=>e({connectionNodeId:Gt.connectionNodeId,connectionHandleId:Gt.connectionHandleId}),reset:()=>e({...Gt})})),Bi=({children:e})=>{const t=N.exports.useRef(null);return t.current||(t.current=md()),_(Uu,{value:t.current,children:e})};Bi.displayName="ReactFlowProvider";const Oi=({children:e})=>{let t=!0;try{te()}catch{t=!1}return t?_(he,{children:e}):_(Bi,{children:e})};Oi.displayName="ReactFlowWrapper";function go(e,t){return N.exports.useRef(null),N.exports.useMemo(()=>t(e),[e])}const yd={input:yi,default:Kn,output:wi,group:mr},xd={default:un,straight:pr,step:hr,smoothstep:yn,simplebezier:dr},wd=[0,0],vd=[15,15],bd={x:0,y:0,zoom:1},_d={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Pi=N.exports.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:s=yd,edgeTypes:i=xd,onNodeClick:a,onEdgeClick:l,onInit:c,onMove:u,onMoveStart:h,onMoveEnd:d,onConnect:g,onConnectStart:S,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:f,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:p,onNodeContextMenu:b,onNodeDoubleClick:E,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:z,onNodesDelete:$,onEdgesDelete:O,onSelectionChange:V,onSelectionDragStart:L,onSelectionDrag:y,onSelectionDragStop:A,onSelectionContextMenu:M,connectionMode:k=st.Strict,connectionLineType:I=Re.Bezier,connectionLineStyle:R,connectionLineComponent:D,connectionLineContainerStyle:B,deleteKeyCode:Y="Backspace",selectionKeyCode:Z="Shift",multiSelectionKeyCode:U="Meta",zoomActivationKeyCode:H="Meta",snapToGrid:q=!1,snapGrid:G=vd,onlyRenderVisibleElements:K=!1,selectNodesOnDrag:j=!0,nodesDraggable:P,nodesConnectable:ie,nodesFocusable:re,nodeOrigin:Q=wd,edgesFocusable:pe,elementsSelectable:ee,defaultViewport:ce=bd,minZoom:le=.5,maxZoom:Ae=2,translateExtent:ue=Qn,preventScrolling:Be=!0,nodeExtent:we,defaultMarkerColor:qe="#b1b1b7",zoomOnScroll:at=!0,zoomOnPinch:Ze=!0,panOnScroll:Ft=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:vn=tt.Free,zoomOnDoubleClick:bn=!0,panOnDrag:_n=!0,onPaneClick:fe,onPaneMouseEnter:ve,onPaneMouseMove:Oe,onPaneMouseLeave:Pe,onPaneScroll:$e,onPaneContextMenu:Ot,children:ct,onEdgeUpdate:lt,onEdgeContextMenu:Sn,onEdgeDoubleClick:vr,onEdgeMouseEnter:He,onEdgeMouseMove:qi,onEdgeMouseLeave:Zi,onEdgeUpdateStart:Gi,onEdgeUpdateEnd:Ki,edgeUpdaterRadius:ji=10,onNodesChange:Qi,onEdgesChange:Ji,noDragClassName:es="nodrag",noWheelClassName:ts="nowheel",noPanClassName:br="nopan",fitView:ns=!1,fitViewOptions:rs,connectOnClick:os=!0,attributionPosition:is,proOptions:ss,defaultEdgeOptions:as,elevateEdgesOnSelect:cs=!1,disableKeyboardA11y:_r=!1,style:ls,id:Sr,...us},fs)=>{const ds=go(s,Af),hs=go(i,Ef),En=Sr||"1";return _("div",{...us,style:{...ls,..._d},ref:fs,className:oe(["react-flow",o]),"data-testid":"rf__wrapper",id:Sr,children:X(Oi,{children:[_(gd,{onInit:c,onMove:u,onMoveStart:h,onMoveEnd:d,onNodeClick:a,onEdgeClick:l,onNodeMouseEnter:x,onNodeMouseMove:w,onNodeMouseLeave:p,onNodeContextMenu:b,onNodeDoubleClick:E,nodeTypes:ds,edgeTypes:hs,connectionLineType:I,connectionLineStyle:R,connectionLineComponent:D,connectionLineContainerStyle:B,selectionKeyCode:Z,deleteKeyCode:Y,multiSelectionKeyCode:U,zoomActivationKeyCode:H,onlyRenderVisibleElements:K,selectNodesOnDrag:j,defaultViewport:ce,translateExtent:ue,minZoom:le,maxZoom:Ae,preventScrolling:Be,zoomOnScroll:at,zoomOnPinch:Ze,zoomOnDoubleClick:bn,panOnScroll:Ft,panOnScrollSpeed:Bt,panOnScrollMode:vn,panOnDrag:_n,onPaneClick:fe,onPaneMouseEnter:ve,onPaneMouseMove:Oe,onPaneMouseLeave:Pe,onPaneScroll:$e,onPaneContextMenu:Ot,onSelectionContextMenu:M,onEdgeUpdate:lt,onEdgeContextMenu:Sn,onEdgeDoubleClick:vr,onEdgeMouseEnter:He,onEdgeMouseMove:qi,onEdgeMouseLeave:Zi,onEdgeUpdateStart:Gi,onEdgeUpdateEnd:Ki,edgeUpdaterRadius:ji,defaultMarkerColor:qe,noDragClassName:es,noWheelClassName:ts,noPanClassName:br,elevateEdgesOnSelect:cs,rfId:En,disableKeyboardA11y:_r,nodeOrigin:Q,nodeExtent:we}),_(mf,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:g,onConnectStart:S,onConnectEnd:m,onClickConnectStart:v,onClickConnectEnd:f,nodesDraggable:P,nodesConnectable:ie,nodesFocusable:re,edgesFocusable:pe,elementsSelectable:ee,minZoom:le,maxZoom:Ae,nodeExtent:we,onNodesChange:Qi,onEdgesChange:Ji,snapToGrid:q,snapGrid:G,connectionMode:k,translateExtent:ue,connectOnClick:os,defaultEdgeOptions:as,fitView:ns,fitViewOptions:rs,onNodesDelete:$,onEdgesDelete:O,onNodeDragStart:C,onNodeDrag:T,onNodeDragStop:z,onSelectionDrag:y,onSelectionDragStart:L,onSelectionDragStop:A,noPanClassName:br,nodeOrigin:Q,rfId:En}),_(pf,{onSelectionChange:V}),ct,_(qu,{proOptions:ss,position:is}),_(bf,{rfId:En,disableKeyboardA11y:_r})]})})});Pi.displayName="ReactFlow";function Sd(){const e=te();return N.exports.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),o=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${t}"]`);o&&requestAnimationFrame(()=>r([{id:t,nodeElement:o,forceUpdate:!0}]))},[])}function Hi(e){return t=>{const[n,r]=N.exports.useState(t),o=N.exports.useCallback(s=>r(i=>e(s,i)),[]);return[n,r,o]}}const Ed=Hi(xr),Nd=Hi(Lf),Li=({id:e,x:t,y:n,width:r,height:o,style:s,color:i,strokeColor:a,strokeWidth:l,className:c,borderRadius:u,shapeRendering:h,onClick:d})=>{const{background:g,backgroundColor:S}=s||{},m=i||g||S;return _("rect",{className:oe(["react-flow__minimap-node",c]),x:t,y:n,rx:u,ry:u,width:r,height:o,fill:m,stroke:a,strokeWidth:l,shapeRendering:h,onClick:d?v=>d(v,e):void 0})};Li.displayName="MiniMapNode";var Md=N.exports.memo(Li);const Cd=200,Ad=150,$d=e=>{const t=Array.from(e.nodeInternals.values()),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?Ku(xn(t),n):n,rfId:e.rfId}},Fn=e=>e instanceof Function?e:()=>e,kd="react-flow__minimap-desc";function Vi({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:s=5,nodeStrokeWidth:i=2,maskColor:a="rgb(240, 240, 240, 0.6)",position:l="bottom-right",onClick:c,onNodeClick:u,pannable:h=!1,zoomable:d=!1}){var Z,U;const g=te(),S=N.exports.useRef(null),{boundingRect:m,viewBB:v,nodes:f,rfId:x}=J($d,ae),w=(Z=e==null?void 0:e.width)!=null?Z:Cd,p=(U=e==null?void 0:e.height)!=null?U:Ad,b=Fn(r),E=Fn(n),C=Fn(o),T=m.width/w,z=m.height/p,$=Math.max(T,z),O=$*w,V=$*p,L=5*$,y=m.x-(O-m.width)/2-L,A=m.y-(V-m.height)/2-L,M=O+L*2,k=V+L*2,I=typeof window>"u"||!!window.chrome?"crispEdges":"geometricPrecision",R=`${kd}-${x}`,D=N.exports.useRef(0);D.current=$,N.exports.useEffect(()=>{if(S.current){const H=ye(S.current),q=j=>{const{transform:P,d3Selection:ie,d3Zoom:re}=g.getState();if(j.sourceEvent.type!=="wheel"||!ie||!re)return;const Q=-j.sourceEvent.deltaY*(j.sourceEvent.deltaMode===1?.05:j.sourceEvent.deltaMode?1:.002)*10,pe=P[2]*Math.pow(2,Q);re.scaleTo(ie,pe)},G=j=>{const{transform:P,d3Selection:ie,d3Zoom:re}=g.getState();if(j.sourceEvent.type!=="mousemove"||!ie||!re)return;const Q={x:P[0]-j.sourceEvent.movementX*D.current*Math.max(1,P[2]),y:P[1]-j.sourceEvent.movementY*D.current*Math.max(1,P[2])},pe=Fe.translate(Q.x,Q.y).scale(P[2]);re.transform(ie,pe)},K=Qo().on("zoom",h?G:null).on("zoom.wheel",d?q:null);return H.call(K),()=>{H.on("zoom",null)}}},[h,d]);const B=c?H=>{const q=be(H);c(H,{x:q[0],y:q[1]})}:void 0,Y=u?(H,q)=>{const G=g.getState().nodeInternals.get(q);u(H,G)}:void 0;return _(lr,{position:l,style:e,className:oe(["react-flow__minimap",t]),children:X("svg",{width:w,height:p,viewBox:`${y} ${A} ${M} ${k}`,role:"img","aria-labelledby":R,ref:S,onClick:B,children:[_("title",{id:R,children:"React Flow mini map"}),f.map(H=>{var q,G,K,j;return _(Md,{x:(G=(q=H.positionAbsolute)==null?void 0:q.x)!=null?G:0,y:(j=(K=H.positionAbsolute)==null?void 0:K.y)!=null?j:0,width:H.width,height:H.height,style:H.style,className:C(H),color:b(H),borderRadius:s,strokeColor:E(H),strokeWidth:i,shapeRendering:I,onClick:Y,id:H.id},H.id)}),_("path",{className:"react-flow__minimap-mask",d:`M${y-L},${A-L}h${M+L*2}v${k+L*2}h${-M-L*2}z
        M${v.x},${v.y}h${v.width}v${v.height}h${-v.width}z`,fill:a,fillRule:"evenodd"})]})})}Vi.displayName="MiniMap";var Td=N.exports.memo(Vi);function Id(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:_("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function zd(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:_("path",{d:"M0 0h32v4.2H0z"})})}function Dd(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:_("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Rd(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Fd(){return _("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:_("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const vt=({children:e,className:t,...n})=>_("button",{type:"button",className:oe(["react-flow__controls-button",t]),...n,children:e});vt.displayName="ControlButton";const Bd=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,Yi=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:l,className:c,children:u,position:h="bottom-left"})=>{const d=te(),[g,S]=N.exports.useState(!1),m=J(Bd),{zoomIn:v,zoomOut:f,fitView:x}=wn();if(N.exports.useEffect(()=>{S(!0)},[]),!g)return null;const w=()=>{v(),s==null||s()},p=()=>{f(),i==null||i()},b=()=>{x(o),a==null||a()},E=()=>{d.setState({nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m}),l==null||l(!m)};return X(lr,{className:oe(["react-flow__controls",c]),position:h,style:e,children:[t&&X(he,{children:[_(vt,{onClick:w,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:_(Id,{})}),_(vt,{onClick:p,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:_(zd,{})})]}),n&&_(vt,{className:"react-flow__controls-fitview",onClick:b,title:"fit view","aria-label":"fit view",children:_(Dd,{})}),r&&_(vt,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity",children:m?_(Fd,{}):_(Rd,{})}),u]})};Yi.displayName="Controls";var Od=N.exports.memo(Yi),xe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xe||(xe={}));function Pd({color:e,dimensions:t,lineWidth:n}){return _("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Hd({color:e,radius:t}){return _("circle",{cx:t,cy:t,r:t,fill:e})}const Ld={[xe.Dots]:"#91919a",[xe.Lines]:"#eee",[xe.Cross]:"#e2e2e2"},Vd={[xe.Dots]:1,[xe.Lines]:1,[xe.Cross]:6},Yd=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Xi({variant:e=xe.Dots,gap:t=20,size:n,lineWidth:r=1,color:o,style:s,className:i}){const a=N.exports.useRef(null),{transform:l,patternId:c}=J(Yd,ae),u=o||Ld[e],h=n||Vd[e],d=e===xe.Dots,g=e===xe.Cross,S=Array.isArray(t)?t:[t,t],m=[S[0]*l[2]||1,S[1]*l[2]||1],v=h*l[2],f=g?[v,v]:m,x=d?[v/2,v/2]:[f[0]/2,f[1]/2];return X("svg",{className:oe(["react-flow__background",i]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:a,children:[_("pattern",{id:c,x:l[0]%m[0],y:l[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:d?_(Hd,{color:u,radius:v/2}):_(Pd,{dimensions:f,color:u,lineWidth:r})}),_("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${c})`})]})}Xi.displayName="Background";var Xd=N.exports.memo(Xi);const Jn=e=>`${e.sourceEntity}_${e.name}`,Ud=e=>`${e.targetEntity}_${e.targetName}`,wr=e=>`entity_er_node_id_${e.id}`,er=(e,t)=>`${wr(e)}_${t.id}`,Ui=e=>e.type===wo.Lookup&&e.relationType===mt.ManyToOne,Wi=e=>e.type===wo.Lookup?"green":"red",Wd=22,St=18,qd=40,Zd=({entity:e,relation:t,passive:n})=>{const r=wn(),o=Sd(),[s,i]=N.exports.useState(Number.MAX_SAFE_INTEGER);return N.exports.useEffect(()=>{var a,l,c,u;if(n&&Ui(t))i(qd/2-St/2);else{const h=(a=document.getElementById(wr(e)))==null?void 0:a.getClientRects()[0],d=(l=document.getElementById(er(e,t)))==null?void 0:l.getClientRects()[0],g=((c=d==null?void 0:d.top)!=null?c:0)-((u=h==null?void 0:h.top)!=null?u:0);i(g)}setTimeout(()=>o(e.name))},[e,n,r,t,o]),{top:s,left:n?-St:"auto",right:n?"auto":-St}},Gd=({relation:e,passive:t})=>{const[n,r]=N.exports.useState("relation-one-many");return N.exports.useEffect(()=>{if(t)switch(e.relationType){case mt.ManyToMany:r("relation-one-many");break;case mt.ManyToOne:case Pt.ManyToOne:case Pt.OneToOne:r("relation-one-one");break}else switch(e.relationType){case mt.ManyToMany:case mt.ManyToOne:case Pt.ManyToOne:r("relation-one-many");break;case Pt.OneToOne:r("relation-one-one");break}},[t,e.relationType]),{icon:n,color:Wi(e)}},mo=({data:{entity:e,entity:{relations:t}},relation:n,passive:r})=>{const o=r?Ud(n):Jn(n),{top:s,left:i,right:a}=Zd({entity:e,relation:n,passive:r}),{icon:l,color:c}=Gd({relation:n,passive:r});return _(It,{className:Kd.wrapper,id:o,type:r?"target":"source",position:r?F.Left:F.Right,style:{left:i,right:a,top:s+Wd/2},onConnect:u=>console.log("handle onConnect",u),isConnectable:!1,children:_("span",{style:{color:c,transform:r?"rotateY(0deg)":"rotateY(180deg)"},children:_(xs,{type:l})})},n.id)},Kd={wrapper:me("height:",St,"px!important;width:",St,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},jd=e=>{const{data:{entity:{relations:t},passiveEntityRelations:n}}=e;return X(he,{children:[t.map(r=>_(mo,{...e,passive:!1,relation:r},r.id)),n.map(r=>_(mo,{...e,passive:!0,relation:r},r.id))]})},Qd=({data:{entity:e}})=>X("div",{className:Ye(Ee.section),children:[_(_e.Title,{className:Ye(Ee.sectionTitle),level:5,children:"\u5B57\u6BB5"}),bt.exports.isEmpty(e.fields)?_(ws,{description:"\u6682\u65E0\u5B57\u6BB5"}):e.fields.map(t=>X("div",{className:Ye(Ee.sectionItem),children:[X(Nt,{size:"small",children:[X(_e.Text,{children:[t.description,"(",t.name,")"]}),t.required&&_(_e.Text,{type:"danger",children:"*"})]}),_(_e.Text,{children:t.type})]},t.name))]}),Jd=({data:{entity:e,entity:{relations:t},passiveEntityRelations:n}})=>{const r=n.filter(s=>!Ui(s)),o=[...t,...r];return bt.exports.isEmpty(o)?null:X("div",{className:Ye(Ee.section),children:[_(_e.Title,{className:Ye(Ee.sectionTitle),level:5,children:"\u5173\u7CFB"}),t.map(s=>X("div",{className:Ye(Ee.sectionItem),id:er(e,s),children:[_(Nt,{size:"small",children:X(_e.Text,{children:[s.description,"(",s.name,")"]})}),_(_e.Text,{children:s.type})]},s.name)),r.map(s=>X("div",{className:Ye(Ee.sectionItem),id:er(e,s),children:[_(Nt,{size:"small",children:X(_e.Text,{disabled:!0,children:[s.targetDescription,"(",s.targetName,")"]})}),_(_e.Text,{disabled:!0,children:s.type})]},s.targetName))]})},eh=e=>{const{data:{entity:t}}=e,n=xo();return X(he,{children:[_(jd,{...e}),X("div",{id:wr(t),style:{"--header-bg-color":n.colorPrimary},className:Ee.wrapper,children:[_("div",{className:Ee.header,children:_(_e.Title,{level:5,children:t.title})}),X("div",{className:Ee.body,children:[_(Qd,{...e}),_(Jd,{...e})]}),X(Ss,{className:Ee.footer,children:[_(Nr,{span:12,children:_(Et,{block:!0,type:"link",onClick:()=>je.emit("onChange",t),children:"\u7F16\u8F91"})}),_(Nr,{span:12,children:_(Et,{block:!0,type:"text",danger:!0,onClick:()=>je.emit("onDelete",t.id),children:"\u5220\u9664"})})]})]})]})},Ee={wrapper:me({name:"zo47d5",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:solid rgba(0,0,0,.1)"}),header:me({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:me({name:"1jb4mpp",styles:"padding:4px 0"}),section:me("",""),sectionTitle:me({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:me({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:me({name:"covnv5",styles:"border-top:solid rgba(0,0,0,.1)"})},th={EntityNode:N.exports.memo(eh)},nh=()=>{const[e,t]=gs(Mt.entitiesSelector),n=tr(Mt.entityRelationsByTargetEntityNameMapSelector),[r,o,s]=Ed(e.map(a=>({id:a.name,type:"EntityNode",data:{entity:a,passiveEntityRelations:n[a.name]||[]},position:a.position}))),i=N.exports.useCallback(a=>{s(a);const l=xr(a,r),c=bt.exports.keyBy(a.filter(h=>h.type==="position"),"id"),u=bt.exports.keyBy(l,h=>h.id);t(h=>h.map(d=>{var g,S;return Reflect.has(c,d.name)?{...d,position:(S=(g=u[d.name])==null?void 0:g.positionAbsolute)!=null?S:d.position}:d}))},[r,s,t]);return N.exports.useEffect(()=>{o(a=>{const l=bt.exports.keyBy(a,c=>c.id);return e.map(c=>l[c.name]?{...l[c.name],data:{entity:c,passiveEntityRelations:n[c.name]||[]},position:c.position}:{id:c.name,type:"EntityNode",data:{entity:c,passiveEntityRelations:n[c.name]||[]},position:c.position})})},[e,n,o]),{nodes:r,onNodesChange:i}},rh=({onChangeEntity:e,onDeleteEntity:t})=>{const n=xo(),r=tr(Mt.entityRelationsSelector),{nodes:o,onNodesChange:s}=nh(),[i,a,l]=Nd(r.map(u=>({id:u.id,source:u.sourceEntity,target:u.targetEntity,sourceHandle:Jn(u),targetHandle:Jn(u),style:{stroke:Wi(u),zIndex:999999}}))),c=N.exports.useCallback(u=>a(h=>ui({...u,animated:!0,style:{stroke:"green"}},h)),[a]);return N.exports.useEffect(()=>(je.on("onDelete",t),je.on("onChange",e),()=>{je.off("onDelete",t),je.off("onChange",e)}),[e,t]),_("div",{className:oh.wrapper,children:X(Pi,{nodes:o,edges:i,onNodesChange:s,onEdgesChange:l,onConnect:c,style:{background:"#fff"},nodeTypes:th,connectionLineStyle:{stroke:n.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[_(Xd,{variant:xe.Cross,gap:10,size:2}),_(Od,{}),_(Td,{pannable:!0,zoomable:!0})]})})},oh={wrapper:me({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},ih=({onChangeEntity:e,onDeleteEntity:t})=>{const n=tr(Mt.entitiesSelector),r=[{title:"\u540D\u79F0",dataIndex:"title",key:"title"},{title:"\u6807\u8BC6",dataIndex:"name",key:"name"},{title:"\u64CD\u4F5C",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,s)=>X(Nt,{size:"small",children:[_(Et,{size:"small",type:"link",onClick:()=>e(s),children:"\u7F16\u8F91"}),_(Et,{size:"small",danger:!0,type:"text",onClick:()=>t(s.id),children:"\u5220\u9664"})]})}];return _("div",{className:sh.wrapper,children:_(vs,{rowKey:"id",size:"small",columns:r,dataSource:n})})},sh={wrapper:me({name:"vxuddk",styles:"padding:24px"})},ah=({onOk:e,onCancel:t,open:n,mode:r,form:o})=>_(he,{children:_(bs,{title:r==="create"?"\u521B\u5EFA\u6570\u636E\u6A21\u578B":"\u7F16\u8F91\u6570\u636E\u6A21\u578B",onCancel:()=>{t(),o.resetFields()},onOk:async()=>{await o.validateFields(),e(o.getFieldsValue()),o.resetFields()},open:n,destroyOnClose:!0,children:X(yt,{form:o,children:[_(yt.Item,{label:"ID",name:"id",hidden:!0,children:_(Nn,{})}),_(yt.Item,{label:"\u540D\u79F0",name:"title",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u6A21\u578B\u540D\u79F0"}],children:_(Nn,{})}),_(yt.Item,{label:"\u6807\u8BC6",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u6A21\u578B\u6807\u8BC6"},{pattern:/^[a-zA-Z]\w+$/,message:"\u53EA\u80FD\u7531\u82F1\u6587\u3001\u6570\u5B57\u3001\u4E0B\u5212\u7EBF\u7EC4\u6210\uFF0C\u4E14\u5FC5\u987B\u82F1\u6587\u5F00\u5934"}],children:_(Nn,{disabled:r==="edit"})})]})})}),ch=[{key:"List",tab:"\u5217\u8868"},{key:"ER",tab:"ER\u56FE"}],mh=()=>{const[e,t]=Us({activeTabKey:"List"}),n=ms(Mt.entityByIdSelector),[r,{setFalse:o,setTrue:s}]=$s(!1),[i,a]=N.exports.useState("edit"),[l]=yt.useForm(),c=g=>{n(Er(S=>{if(Reflect.has(S,g.id))S[g.id]={...S[g.id],...g};else{const m=_s.generateDefaultEntity(g),v=Math.max(...Object.values(S).map(f=>f.position.x));S[m.id]={...m,position:{x:v+400,y:100}}}})),o()},u=g=>{n(Er(S=>{Reflect.deleteProperty(S,g)}))},h=g=>{a("edit"),l.setFieldsValue(g),s()},d=()=>{a("create"),s()};return X(he,{children:[_(ah,{onOk:c,onCancel:o,open:r,mode:i,form:l}),_("div",{className:yo.wrapper,children:_(Ns,{tabProps:{size:"small"},className:yo.card,title:X(Nt,{children:[_("span",{children:"\u6570\u636E\u6A21\u578B"}),_(Et,{type:"link",icon:_(Es,{}),onClick:d})]}),tabList:ch,activeTabKey:e.activeTabKey,onTabChange:g=>t({activeTabKey:g}),children:e.activeTabKey==="List"?_(ih,{onDeleteEntity:u,onChangeEntity:h}):_(rh,{onDeleteEntity:u,onChangeEntity:h})})})]})},yo={wrapper:me({name:"1sc6paq",styles:"padding:16px;height:100%"}),card:me({name:"2xrp5b",styles:"height:100%;display:flex;flex-direction:column;.ant-card-head{position:relative;display:flex;align-items:center;padding:8px 24px;&-title{padding-top:0;min-height:auto!important;display:inline;}}.ant-card-body{flex:1;padding:0;}.ant-card-head-tabs{display:inline-block;position:absolute;right:24px;top:0;height:100%;.ant-tabs-nav{margin-bottom:0;height:100%;}}"})},yh=()=>_(Mr,{children:_(Mr.Content,{children:_(_e.Title,{children:"\u6570\u636E\u6A21\u578B"})})});export{mh as Entities,yh as Entity};
