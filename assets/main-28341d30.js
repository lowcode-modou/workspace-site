import{c as _e,r as m,j as f,g as ai,m as si,K as Xc,C as et,o as Ir,A as li,_ as Te,a as No,b as z,d as ns,e as Tr,t as rs,S as Yc,T as Mo,I as Kc,H as qc,F as Zc,f as Jc,h as Qc,i as eu,k as on,l as tu,P as nu,u as ru,n as ji,R as jn,p as Rr,q as ue,s as ou,v as j,w as iu,x as Po,y as Io,z as au,B as os,D as su,E as lu,G as cu,J as is,L as Wn,M as Ar,N as Dr,O as as,Q as ss,U as uu,V as du,W as fu,X as hu,Y as pu,Z as gu,$ as mu,a0 as yu,a1 as vu,a2 as xu,a3 as xt,a4 as Qe,a5 as Ce,a6 as ke,a7 as ls,a8 as bu,a9 as cs,aa as Re,ab as wu,ac as gt,ad as Be,ae as Su,af as us,ag as Eu,ah as Ct,ai as ds,aj as Ee,ak as Cu,al as fs,am as $u,an as _u,ao as Nu,ap as Mu,aq as Pu,ar as hs,as as _n,at as Jn,au as Un,av as $t,aw as Iu,ax as An,ay as It,az as ps,aA as Tu,aB as mr,aC as To,aD as Ve,aE as Ru,aF as gs,aG as Au,aH as Du,aI as ms,aJ as ut,aK as Ou,aL as zu,aM as ci,aN as ys,aO as ui,aP as di,aQ as fi,aR as Ro,aS as ku,aT as Bu,aU as hi,aV as vs,aW as Vn,aX as Lu,aY as Fu,aZ as Hu,a_ as ju,a$ as Wu,b0 as Wi,b1 as Qn,b2 as Vt,b3 as Uu,b4 as Vu,b5 as Gu,b6 as Ui,b7 as Qr,b8 as xs,b9 as Xu,ba as Yu,bb as Ku,bc as qu,bd as Zu,be as Ju,bf as Qu}from"./client-604fc65d.js";const ed=e=>{const{prefixCls:t,className:n,style:r,size:o,shape:a}=e,i=_e({[`${t}-lg`]:o==="large",[`${t}-sm`]:o==="small"}),s=_e({[`${t}-circle`]:a==="circle",[`${t}-square`]:a==="square",[`${t}-round`]:a==="round"}),c=m.useMemo(()=>typeof o=="number"?{width:o,height:o,lineHeight:`${o}px`}:{},[o]);return f("span",{className:_e(t,i,s,n),style:Object.assign(Object.assign({},c),r)})},Or=ed,td=new Xc("ant-skeleton-loading",{"0%":{transform:"translateX(-37.5%)"},"100%":{transform:"translateX(37.5%)"}}),zr=e=>({height:e,lineHeight:`${e}px`}),Jt=e=>Object.assign({width:e},zr(e)),nd=e=>({position:"relative",zIndex:0,overflow:"hidden",background:"transparent","&::after":{position:"absolute",top:0,insetInlineEnd:"-150%",bottom:0,insetInlineStart:"-150%",background:e.skeletonLoadingBackground,animationName:td,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite",content:'""'}}),eo=e=>Object.assign({width:e*5,minWidth:e*5},zr(e)),rd=e=>{const{skeletonAvatarCls:t,color:n,controlHeight:r,controlHeightLG:o,controlHeightSM:a}=e;return{[`${t}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},Jt(r)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},Jt(o)),[`${t}${t}-sm`]:Object.assign({},Jt(a))}},od=e=>{const{controlHeight:t,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:o,controlHeightSM:a,color:i}=e;return{[`${r}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:i,borderRadius:n},eo(t)),[`${r}-lg`]:Object.assign({},eo(o)),[`${r}-sm`]:Object.assign({},eo(a))}},Vi=e=>Object.assign({width:e},zr(e)),id=e=>{const{skeletonImageCls:t,imageSizeBase:n,color:r,borderRadiusSM:o}=e;return{[`${t}`]:Object.assign(Object.assign({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:r,borderRadius:o},Vi(n*2)),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},Vi(n)),{maxWidth:n*4,maxHeight:n*4}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},to=(e,t,n)=>{const{skeletonButtonCls:r}=e;return{[`${n}${r}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:t}}},no=e=>Object.assign({width:e*2,minWidth:e*2},zr(e)),ad=e=>{const{borderRadiusSM:t,skeletonButtonCls:n,controlHeight:r,controlHeightLG:o,controlHeightSM:a,color:i}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[`${n}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:i,borderRadius:t,width:r*2,minWidth:r*2},no(r))},to(e,r,n)),{[`${n}-lg`]:Object.assign({},no(o))}),to(e,o,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},no(a))}),to(e,a,`${n}-sm`))},sd=e=>{const{componentCls:t,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:o,skeletonButtonCls:a,skeletonInputCls:i,skeletonImageCls:s,controlHeight:c,controlHeightLG:l,controlHeightSM:u,color:h,padding:d,marginSM:p,borderRadius:w,skeletonTitleHeight:v,skeletonBlockRadius:E,skeletonParagraphLineHeight:g,controlHeightXS:x,skeletonParagraphMarginTop:S}=e;return{[`${t}`]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:d,verticalAlign:"top",[`${n}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:h},Jt(c)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},Jt(l)),[`${n}-sm`]:Object.assign({},Jt(u))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[`${r}`]:{width:"100%",height:v,background:h,borderRadius:E,[`+ ${o}`]:{marginBlockStart:u}},[`${o}`]:{padding:0,"> li":{width:"100%",height:g,listStyle:"none",background:h,borderRadius:E,"+ li":{marginBlockStart:x}}},[`${o}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${r}, ${o} > li`]:{borderRadius:w}}},[`${t}-with-avatar ${t}-content`]:{[`${r}`]:{marginBlockStart:p,[`+ ${o}`]:{marginBlockStart:S}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},ad(e)),rd(e)),od(e)),id(e)),[`${t}${t}-block`]:{width:"100%",[`${a}`]:{width:"100%"},[`${i}`]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${r},
        ${o} > li,
        ${n},
        ${a},
        ${i},
        ${s}
      `]:Object.assign({},nd(e))}}},fn=ai("Skeleton",e=>{const{componentCls:t}=e,n=si(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:e.controlHeight*1.5,skeletonTitleHeight:e.controlHeight/2,skeletonBlockRadius:e.borderRadiusSM,skeletonParagraphLineHeight:e.controlHeight/2,skeletonParagraphMarginTop:e.marginLG+e.marginXXS,borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.color} 25%, ${e.colorGradientEnd} 37%, ${e.color} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[sd(n)]},e=>{const{colorFillContent:t,colorFill:n}=e;return{color:t,colorGradientEnd:n}}),ld=e=>{const{prefixCls:t,className:n,active:r,shape:o="circle",size:a="default"}=e,{getPrefixCls:i}=m.useContext(et),s=i("skeleton",t),[c,l]=fn(s),u=Ir(e,["prefixCls","className"]),h=_e(s,`${s}-element`,{[`${s}-active`]:r},n,l);return c(f("div",{className:h,children:f(Or,{...Object.assign({prefixCls:`${s}-avatar`,shape:o,size:a},u)})}))},cd=ld,ud=e=>{const{prefixCls:t,className:n,active:r,block:o=!1,size:a="default"}=e,{getPrefixCls:i}=m.useContext(et),s=i("skeleton",t),[c,l]=fn(s),u=Ir(e,["prefixCls"]),h=_e(s,`${s}-element`,{[`${s}-active`]:r,[`${s}-block`]:o},n,l);return c(f("div",{className:h,children:f(Or,{...Object.assign({prefixCls:`${s}-button`,size:a},u)})}))},dd=ud;var fd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const hd=fd;var bs=function(t,n){return f(li,{...Te(Te({},t),{},{ref:n,icon:hd})})};bs.displayName="DotChartOutlined";const pd=m.forwardRef(bs),gd=e=>{const{prefixCls:t,className:n,style:r,active:o,children:a}=e,{getPrefixCls:i}=m.useContext(et),s=i("skeleton",t),[c,l]=fn(s),u=_e(s,`${s}-element`,{[`${s}-active`]:o},l,n),h=a??f(pd,{});return c(f("div",{className:u,children:f("div",{className:_e(`${s}-image`,n),style:r,children:h})}))},md=gd,yd="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",vd=e=>{const{prefixCls:t,className:n,style:r,active:o}=e,{getPrefixCls:a}=m.useContext(et),i=a("skeleton",t),[s,c]=fn(i),l=_e(i,`${i}-element`,{[`${i}-active`]:o},n,c);return s(f("div",{className:l,children:f("div",{className:_e(`${i}-image`,n),style:r,children:f("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${i}-image-svg`,children:f("path",{d:yd,className:`${i}-image-path`})})})}))},xd=vd,bd=e=>{const{prefixCls:t,className:n,active:r,block:o,size:a="default"}=e,{getPrefixCls:i}=m.useContext(et),s=i("skeleton",t),[c,l]=fn(s),u=Ir(e,["prefixCls"]),h=_e(s,`${s}-element`,{[`${s}-active`]:r,[`${s}-block`]:o},n,l);return c(f("div",{className:h,children:f(Or,{...Object.assign({prefixCls:`${s}-input`,size:a},u)})}))},wd=bd,Sd=e=>{const t=s=>{const{width:c,rows:l=2}=e;if(Array.isArray(c))return c[s];if(l-1===s)return c},{prefixCls:n,className:r,style:o,rows:a}=e,i=No(Array(a)).map((s,c)=>f("li",{style:{width:t(c)}},c));return f("ul",{className:_e(n,r),style:o,children:i})},Ed=Sd,Cd=e=>{let{prefixCls:t,className:n,width:r,style:o}=e;return f("h3",{className:_e(t,n),style:Object.assign({width:r},o)})},$d=Cd;function ro(e){return e&&typeof e=="object"?e:{}}function _d(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Nd(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function Md(e,t){const n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}const hn=e=>{const{prefixCls:t,loading:n,className:r,style:o,children:a,avatar:i=!1,title:s=!0,paragraph:c=!0,active:l,round:u}=e,{getPrefixCls:h,direction:d}=m.useContext(et),p=h("skeleton",t),[w,v]=fn(p);if(n||!("loading"in e)){const E=!!i,g=!!s,x=!!c;let S;if(E){const $=Object.assign(Object.assign({prefixCls:`${p}-avatar`},_d(g,x)),ro(i));S=f("div",{className:`${p}-header`,children:f(Or,{...Object.assign({},$)})})}let y;if(g||x){let $;if(g){const I=Object.assign(Object.assign({prefixCls:`${p}-title`},Nd(E,x)),ro(s));$=f($d,{...Object.assign({},I)})}let _;if(x){const I=Object.assign(Object.assign({prefixCls:`${p}-paragraph`},Md(E,g)),ro(c));_=f(Ed,{...Object.assign({},I)})}y=z("div",{className:`${p}-content`,children:[$,_]})}const C=_e(p,{[`${p}-with-avatar`]:E,[`${p}-active`]:l,[`${p}-rtl`]:d==="rtl",[`${p}-round`]:u},r,v);return w(z("div",{className:C,style:o,children:[S,y]}))}return typeof a<"u"?a:null};hn.Button=dd;hn.Avatar=cd;hn.Input=wd;hn.Image=xd;hn.Node=md;const Pd=hn;var Id=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Td=e=>{var{prefixCls:t,className:n,hoverable:r=!0}=e,o=Id(e,["prefixCls","className","hoverable"]);const{getPrefixCls:a}=m.useContext(et),i=a("card",t),s=_e(`${i}-grid`,n,{[`${i}-grid-hoverable`]:r});return f("div",{...Object.assign({},o,{className:s})})},ws=Td,Rd=e=>{const{antCls:t,componentCls:n,cardHeadHeight:r,cardPaddingBase:o,cardHeadTabsMarginBottom:a}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${o}px`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG,background:"transparent",borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`},Tr()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},rs),{[`
          > ${n}-typography,
          > ${n}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:a,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${e.lineWidth}px ${e.lineType} ${e.colorBorderSecondary}`}}})},Ad=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:o}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${o}px 0 0 0 ${n},
      0 ${o}px 0 0 ${n},
      ${o}px ${o}px 0 0 ${n},
      ${o}px 0 0 0 ${n} inset,
      0 ${o}px 0 0 ${n} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},Dd=e=>{const{componentCls:t,iconCls:n,cardActionsLiMargin:r,cardActionsIconSize:o,colorBorderSecondary:a}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:e.colorBgContainer,borderTop:`${e.lineWidth}px ${e.lineType} ${a}`,display:"flex",borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px `},Tr()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.cardActionsIconSize*2,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:`${e.fontSize*e.lineHeight}px`,transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:o,lineHeight:`${o*e.lineHeight}px`}},"&:not(:last-child)":{borderInlineEnd:`${e.lineWidth}px ${e.lineType} ${a}`}}})},Od=e=>Object.assign(Object.assign({margin:`-${e.marginXXS}px 0`,display:"flex"},Tr()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},rs),"&-description":{color:e.colorTextDescription}}),zd=e=>{const{componentCls:t,cardPaddingBase:n,colorFillAlter:r}=e;return{[`${t}-head`]:{padding:`0 ${n}px`,background:r,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${e.padding}px ${n}px`}}},kd=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},Bd=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:o,boxShadow:a,cardPaddingBase:i}=e;return{[t]:Object.assign(Object.assign({},ns(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:a},[`${t}-head`]:Rd(e),[`${t}-extra`]:{marginInlineStart:"auto",color:"",fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:i,borderRadius:` 0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`},Tr()),[`${t}-grid`]:Ad(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%"},img:{borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`}},[`${t}-actions`]:Dd(e),[`${t}-meta`]:Od(e)}),[`${t}-bordered`]:{border:`${e.lineWidth}px ${e.lineType} ${o}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:-e.lineWidth,marginInlineStart:-e.lineWidth,padding:0}},[`${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:zd(e),[`${t}-loading`]:kd(e),[`${t}-rtl`]:{direction:"rtl"}}},Ld=e=>{const{componentCls:t,cardPaddingSM:n,cardHeadHeightSM:r}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:r,padding:`0 ${n}px`,fontSize:e.fontSize,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{minHeight:r,paddingTop:0,display:"flex",alignItems:"center"}}}}},Fd=ai("Card",e=>{const t=si(e,{cardShadow:e.boxShadowCard,cardHeadHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,cardHeadHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardHeadTabsMarginBottom:-e.padding-e.lineWidth,cardActionsLiMargin:`${e.paddingSM}px 0`,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[Bd(t),Ld(t)]});var Hd=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function jd(e){return e.map((n,r)=>f("li",{style:{width:`${100/e.length}%`},children:f("span",{children:n})},`action-${r}`))}const Wd=m.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=m.useContext(et),o=m.useContext(Yc),a=W=>{var te;(te=e.onTabChange)===null||te===void 0||te.call(e,W)},i=()=>{let W;return m.Children.forEach(e.children,te=>{te&&te.type&&te.type===ws&&(W=!0)}),W},{prefixCls:s,className:c,extra:l,headStyle:u={},bodyStyle:h={},title:d,loading:p,bordered:w=!0,size:v,type:E,cover:g,actions:x,tabList:S,children:y,activeTabKey:C,defaultActiveTabKey:$,tabBarExtraContent:_,hoverable:I,tabProps:O={}}=e,D=Hd(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),B=n("card",s),[Z,X]=Fd(B),b=f(Pd,{loading:!0,active:!0,paragraph:{rows:4},title:!1,children:y}),M=C!==void 0,N=Object.assign(Object.assign({},O),{[M?"activeKey":"defaultActiveKey"]:M?C:$,tabBarExtraContent:_});let A;const T=S&&S.length?f(Mo,{...Object.assign({size:"large"},N,{className:`${B}-head-tabs`,onChange:a,items:S.map(W=>{var te;return{label:W.tab,key:W.key,disabled:(te=W.disabled)!==null&&te!==void 0?te:!1}})})}):null;(d||l||T)&&(A=z("div",{className:`${B}-head`,style:u,children:[z("div",{className:`${B}-head-wrapper`,children:[d&&f("div",{className:`${B}-head-title`,children:d}),l&&f("div",{className:`${B}-extra`,children:l})]}),T]}));const F=g?f("div",{className:`${B}-cover`,children:g}):null,L=f("div",{className:`${B}-body`,style:h,children:p?b:y}),H=x&&x.length?f("ul",{className:`${B}-actions`,children:jd(x)}):null,J=Ir(D,["onTabChange"]),G=v||o,q=_e(B,{[`${B}-loading`]:p,[`${B}-bordered`]:w,[`${B}-hoverable`]:I,[`${B}-contain-grid`]:i(),[`${B}-contain-tabs`]:S&&S.length,[`${B}-${G}`]:G,[`${B}-type-${E}`]:!!E,[`${B}-rtl`]:r==="rtl"},c,X);return Z(z("div",{...Object.assign({ref:t},J,{className:q}),children:[A,F,L,H]}))}),Ud=Wd;var Vd=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Gd=e=>{const{prefixCls:t,className:n,avatar:r,title:o,description:a}=e,i=Vd(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:s}=m.useContext(et),c=s("card",t),l=_e(`${c}-meta`,n),u=r?f("div",{className:`${c}-meta-avatar`,children:r}):null,h=o?f("div",{className:`${c}-meta-title`,children:o}):null,d=a?f("div",{className:`${c}-meta-description`,children:a}):null,p=h||d?z("div",{className:`${c}-meta-detail`,children:[h,d]}):null;return z("div",{...Object.assign({},i,{className:l}),children:[u,p]})},Xd=Gd,pi=Ud;pi.Grid=ws;pi.Meta=Xd;const an=pi,Gn=Kc;Gn.Header=qc;Gn.Footer=Zc;Gn.Content=Jc;Gn.Sider=Qc;const _t=Gn;var Ss=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Yd=e=>{var{prefixCls:t,className:n,avatar:r,title:o,description:a}=e,i=Ss(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:s}=m.useContext(et),c=s("list",t),l=_e(`${c}-item-meta`,n),u=z("div",{className:`${c}-item-meta-content`,children:[o&&f("h4",{className:`${c}-item-meta-title`,children:o}),a&&f("div",{className:`${c}-item-meta-description`,children:a})]});return z("div",{...Object.assign({},i,{className:l}),children:[r&&f("div",{className:`${c}-item-meta-avatar`,children:r}),(o||a)&&u]})},Kd=(e,t)=>{var{prefixCls:n,children:r,actions:o,extra:a,className:i,colStyle:s}=e,c=Ss(e,["prefixCls","children","actions","extra","className","colStyle"]);const{grid:l,itemLayout:u}=m.useContext(gi),{getPrefixCls:h}=m.useContext(et),d=()=>{let x;return m.Children.forEach(r,S=>{typeof S=="string"&&(x=!0)}),x&&m.Children.count(r)>1},p=()=>u==="vertical"?!!a:!d(),w=h("list",n),v=o&&o.length>0&&f("ul",{className:`${w}-item-action`,children:o.map((x,S)=>z("li",{children:[x,S!==o.length-1&&f("em",{className:`${w}-item-action-split`})]},`${w}-item-action-${S}`))},"actions"),g=f(l?"div":"li",{...Object.assign({},c,l?{}:{ref:t},{className:_e(`${w}-item`,{[`${w}-item-no-flex`]:!p()},i)}),children:u==="vertical"&&a?[z("div",{className:`${w}-item-main`,children:[r,v]},"content"),f("div",{className:`${w}-item-extra`,children:a},"extra")]:[r,v,eu(a,{key:"extra"})]});return l?f(on,{ref:t,flex:1,style:s,children:g}):g},Es=m.forwardRef(Kd);Es.Meta=Yd;const qd=Es,Zd=e=>{const{listBorderedCls:t,componentCls:n,paddingLG:r,margin:o,padding:a,listItemPaddingSM:i,marginLG:s,borderRadiusLG:c}=e;return{[`${t}`]:{border:`${e.lineWidth}px ${e.lineType} ${e.colorBorder}`,borderRadius:c,[`${n}-header,${n}-footer,${n}-item`]:{paddingInline:r},[`${n}-pagination`]:{margin:`${o}px ${s}px`}},[`${t}${n}-sm`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:i}},[`${t}${n}-lg`]:{[`${n}-item,${n}-header,${n}-footer`]:{padding:`${a}px ${r}px`}}}},Jd=e=>{const{componentCls:t,screenSM:n,screenMD:r,marginLG:o,marginSM:a,margin:i}=e;return{[`@media screen and (max-width:${r})`]:{[`${t}`]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:o}}}},[`@media screen and (max-width: ${n})`]:{[`${t}`]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:a}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${i}px`}}}}}},Qd=e=>{const{componentCls:t,antCls:n,controlHeight:r,minHeight:o,paddingSM:a,marginLG:i,padding:s,listItemPadding:c,colorPrimary:l,listItemPaddingSM:u,listItemPaddingLG:h,paddingXS:d,margin:p,colorText:w,colorTextDescription:v,motionDurationSlow:E,lineWidth:g}=e;return{[`${t}`]:Object.assign(Object.assign({},ns(e)),{position:"relative","*":{outline:"none"},[`${t}-header, ${t}-footer`]:{background:"transparent",paddingBlock:a},[`${t}-pagination`]:{marginBlockStart:i,textAlign:"end",[`${n}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:o,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:c,color:w,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:s},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:w},[`${t}-item-meta-title`]:{marginBottom:e.marginXXS,color:w,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:w,transition:`all ${E}`,["&:hover"]:{color:l}}},[`${t}-item-meta-description`]:{color:v,fontSize:e.fontSize,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none",["& > li"]:{position:"relative",display:"inline-block",padding:`0 ${d}px`,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center",["&:first-child"]:{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:g,height:Math.ceil(e.fontSize*e.lineHeight)-e.marginXXS*2,transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${s}px 0`,color:v,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:s,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${n}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:p,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:i},[`${t}-item-meta`]:{marginBlockEnd:s,[`${t}-item-meta-title`]:{marginBlockEnd:a,color:w,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:s,marginInlineStart:"auto","> li":{padding:`0 ${s}px`,["&:first-child"]:{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`,["&:last-child"]:{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:r},[`${t}-split${t}-something-after-last-item ${n}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${e.lineWidth}px ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:h},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},ef=ai("List",e=>{const t=si(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG,listItemPadding:`${e.paddingContentVertical}px ${e.paddingContentHorizontalLG}px`,listItemPaddingSM:`${e.paddingContentVerticalSM}px ${e.paddingContentHorizontal}px`,listItemPaddingLG:`${e.paddingContentVerticalLG}px ${e.paddingContentHorizontalLG}px`});return[Qd(t),Zd(t),Jd(t)]},{contentWidth:220});var tf=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const gi=m.createContext({});gi.Consumer;function Ao(e){var{pagination:t=!1,prefixCls:n,bordered:r=!1,split:o=!0,className:a,children:i,itemLayout:s,loadMore:c,grid:l,dataSource:u=[],size:h,header:d,footer:p,loading:w=!1,rowKey:v,renderItem:E,locale:g}=e,x=tf(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]);const S=t&&typeof t=="object"?t:{},[y,C]=m.useState(S.defaultCurrent||1),[$,_]=m.useState(S.defaultPageSize||10),{getPrefixCls:I,renderEmpty:O,direction:D}=m.useContext(et),B={current:1,total:0},Z=ne=>(ae,P)=>{C(ae),_(P),t&&t[ne]&&t[ne](ae,P)},X=Z("onChange"),b=Z("onShowSizeChange"),M=(ne,ae)=>E?(typeof v=="function"?v(ne):v?ne[v]:ne.key,f(ue,{children:E(ne,ae)})):null,N=()=>!!(c||t||p),A=(ne,ae)=>f("div",{className:`${ne}-empty-text`,children:g&&g.emptyText||ae("List")}),T=I("list",n),[F,L]=ef(T);let H=w;typeof H=="boolean"&&(H={spinning:H});const J=H&&H.spinning;let G="";switch(h){case"large":G="lg";break;case"small":G="sm";break}const q=_e(T,{[`${T}-vertical`]:s==="vertical",[`${T}-${G}`]:G,[`${T}-split`]:o,[`${T}-bordered`]:r,[`${T}-loading`]:J,[`${T}-grid`]:!!l,[`${T}-something-after-last-item`]:N(),[`${T}-rtl`]:D==="rtl"},a,L),W=tu(B,{total:u.length,current:y,pageSize:$},t||{}),te=Math.ceil(W.total/W.pageSize);W.current>te&&(W.current=te);const re=t?f("div",{className:`${T}-pagination`,children:f(nu,{...Object.assign({},W,{onChange:X,onShowSizeChange:b})})}):null;let ie=No(u);t&&u.length>(W.current-1)*W.pageSize&&(ie=No(u).splice((W.current-1)*W.pageSize,W.pageSize));const de=Object.keys(l||{}).some(ne=>["xs","sm","md","lg","xl","xxl"].includes(ne)),Y=ru(de),xe=m.useMemo(()=>{for(let ne=0;ne<ji.length;ne+=1){const ae=ji[ne];if(Y[ae])return ae}},[Y]),Me=m.useMemo(()=>{if(!l)return;const ne=xe&&l[xe]?l[xe]:l.column;if(ne)return{width:`${100/ne}%`,maxWidth:`${100/ne}%`}},[l==null?void 0:l.column,xe]);let fe=J&&f("div",{style:{minHeight:53}});if(ie.length>0){const ne=ie.map((ae,P)=>M(ae,P));fe=l?f(jn,{gutter:l.gutter,children:m.Children.map(ne,ae=>f("div",{style:Me,children:ae},ae==null?void 0:ae.key))}):f("ul",{className:`${T}-items`,children:ne})}else!i&&!J&&(fe=A(T,O||ou));const Pe=W.position||"bottom",he=m.useMemo(()=>({grid:l,itemLayout:s}),[JSON.stringify(l),s]);return F(f(gi.Provider,{value:he,children:z("div",{...Object.assign({className:q},x),children:[(Pe==="top"||Pe==="both")&&re,d&&f("div",{className:`${T}-header`,children:d}),z(Rr,{...Object.assign({},H),children:[fe,i]}),p&&f("div",{className:`${T}-footer`,children:p}),c||(Pe==="bottom"||Pe==="both")&&re]})}))}Ao.Item=qd;var nf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"};const rf=nf;var Cs=function(t,n){return f(li,{...Te(Te({},t),{},{ref:n,icon:rf})})};Cs.displayName="DatabaseOutlined";const of=m.forwardRef(Cs);var af={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};const sf=af;var $s=function(t,n){return f(li,{...Te(Te({},t),{},{ref:n,icon:sf})})};$s.displayName="MoreOutlined";const lf=m.forwardRef($s),cf=()=>f("div",{className:uf.wrapper,children:f(Rr,{size:"large"})}),uf={wrapper:j({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},df="//at.alicdn.com/t/c/font_3642824_ry39fh7p15b.js",ff=iu({scriptUrl:df}),hf=({type:e})=>f(ff,{type:`icon-modou-${e}`}),Le={APPS:"/apps",APP:"/app/:appId",PAGE:"/app/:appId/page/:pageId",Entities:"/app/:appId/entities",Entity:"/app/:appId/entity/:entityId"};/**
 * @remix-run/router v1.0.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}var ge;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ge||(ge={}));const Gi="popstate";function _s(e){e===void 0&&(e={});let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,o;o=t.map((d,p)=>u(d,typeof d=="string"?null:d.state,p===0?"default":void 0));let a=c(n??o.length-1),i=ge.Pop,s=null;function c(d){return Math.min(Math.max(d,0),o.length-1)}function l(){return o[a]}function u(d,p,w){p===void 0&&(p=null);let v=Nt(o?l().pathname:"/",d,p,w);return gf(v.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(d)),v}return{get index(){return a},get action(){return i},get location(){return l()},createHref(d){return typeof d=="string"?d:Dn(d)},push(d,p){i=ge.Push;let w=u(d,p);a+=1,o.splice(a,o.length,w),r&&s&&s({action:i,location:w})},replace(d,p){i=ge.Replace;let w=u(d,p);o[a]=w,r&&s&&s({action:i,location:w})},go(d){i=ge.Pop,a=c(a+d),s&&s({action:i,location:l()})},listen(d){return s=d,()=>{s=null}}}}function pf(e){e===void 0&&(e={});function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return Nt("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Dn(o)}return yf(t,n,null,e)}function gf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mf(){return Math.random().toString(36).substr(2,8)}function Xi(e){return{usr:e.state,key:e.key}}function Nt(e,t,n,r){return n===void 0&&(n=null),ye({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ct(t):t,{state:n,key:t&&t.key||r||mf()})}function Dn(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ct(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yf(e,t,n,r){r===void 0&&(r={});let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s=ge.Pop,c=null;function l(){s=ge.Pop,c&&c({action:s,location:d.location})}function u(p,w){s=ge.Push;let v=Nt(d.location,p,w);n&&n(v,p);let E=Xi(v),g=d.createHref(v);try{i.pushState(E,"",g)}catch{o.location.assign(g)}a&&c&&c({action:s,location:v})}function h(p,w){s=ge.Replace;let v=Nt(d.location,p,w);n&&n(v,p);let E=Xi(v),g=d.createHref(v);i.replaceState(E,"",g),a&&c&&c({action:s,location:v})}let d={get action(){return s},get location(){return e(o,i)},listen(p){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(Gi,l),c=p,()=>{o.removeEventListener(Gi,l),c=null}},createHref(p){return t(o,p)},push:u,replace:h,go(p){return i.go(p)}};return d}var De;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(De||(De={}));function vf(e){return e.index===!0}function Ns(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=new Set),e.map((r,o)=>{let a=[...t,o],i=typeof r.id=="string"?r.id:a.join("-");return Q(r.index!==!0||!r.children,"Cannot specify children on an index route"),Q(!n.has(i),'Found a route id collision on id "'+i+`".  Route id's must be globally unique within Data Router usages`),n.add(i),vf(r)?ye({},r,{id:i}):ye({},r,{id:i,children:r.children?Ns(r.children,a,n):void 0})})}function Yt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?ct(t):t,o=Is(r.pathname||"/",n);if(o==null)return null;let a=Ms(e);xf(a);let i=null;for(let s=0;i==null&&s<a.length;++s)i=Mf(a[s],o);return i}function Ms(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((o,a)=>{let i={relativePath:o.path||"",caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};i.relativePath.startsWith("/")&&(Q(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),i.relativePath=i.relativePath.slice(r.length));let s=Mt([r,i.relativePath]),c=n.concat(i);o.children&&o.children.length>0&&(Q(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+s+'".')),Ms(o.children,t,c,s)),!(o.path==null&&!o.index)&&t.push({path:s,score:_f(s,o.index),routesMeta:c})}),t}function xf(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Nf(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bf=/^:\w+$/,wf=3,Sf=2,Ef=1,Cf=10,$f=-2,Yi=e=>e==="*";function _f(e,t){let n=e.split("/"),r=n.length;return n.some(Yi)&&(r+=$f),t&&(r+=Sf),n.filter(o=>!Yi(o)).reduce((o,a)=>o+(bf.test(a)?wf:a===""?Ef:Cf),r)}function Nf(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function Mf(e,t){let{routesMeta:n}=e,r={},o="/",a=[];for(let i=0;i<n.length;++i){let s=n[i],c=i===n.length-1,l=o==="/"?t:t.slice(o.length)||"/",u=Bt({path:s.relativePath,caseSensitive:s.caseSensitive,end:c},l);if(!u)return null;Object.assign(r,u.params);let h=s.route;a.push({params:r,pathname:Mt([o,u.pathname]),pathnameBase:Rf(Mt([o,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(o=Mt([o,u.pathnameBase]))}return a}function Ps(e,t){return t===void 0&&(t={}),e.replace(/:(\w+)/g,(n,r)=>(Q(t[r]!=null,'Missing ":'+r+'" param'),t[r])).replace(/(\/?)\*/,(n,r,o,a)=>{const i="*";return t[i]==null?a==="/*"?"/":"":""+r+t[i]})}function Bt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Pf(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((l,u,h)=>{if(u==="*"){let d=s[h]||"";i=a.slice(0,a.length-d.length).replace(/(.)\/+$/,"$1")}return l[u]=If(s[h]||"",u),l},{}),pathname:a,pathnameBase:i,pattern:e}}function Pf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ts(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(i,s)=>(r.push(s),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function If(e,t){try{return decodeURIComponent(e)}catch(n){return Ts(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function Is(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Q(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ts(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Rs(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?ct(e):e;return{pathname:n?n.startsWith("/")?n:Tf(n,t):t,search:Af(r),hash:Df(o)}}function Tf(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function oo(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function As(e,t,n,r){r===void 0&&(r=!1);let o;typeof e=="string"?o=ct(e):(o=ye({},e),Q(!o.pathname||!o.pathname.includes("?"),oo("?","pathname","search",o)),Q(!o.pathname||!o.pathname.includes("#"),oo("#","pathname","hash",o)),Q(!o.search||!o.search.includes("#"),oo("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(r||i==null)s=n;else{let h=t.length-1;if(i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),h-=1;o.pathname=d.join("/")}s=h>=0?t[h]:"/"}let c=Rs(o,s),l=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Mt=e=>e.join("/").replace(/\/\/+/g,"/"),Rf=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Af=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Df=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Of=function(t,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,o=new Headers(r.headers);return o.has("Content-Type")||o.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),ye({},r,{headers:o}))};class yr extends Error{}class Ds{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,Q(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((o,a)=>n=a),this.controller=new AbortController;let r=()=>n(new yr("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",r),this.controller.signal.addEventListener("abort",r),this.data=Object.entries(t).reduce((o,a)=>{let[i,s]=a;return Object.assign(o,{[i]:this.trackPromise(i,s)})},{})}trackPromise(t,n){if(!(n instanceof Promise))return n;this.pendingKeys.add(t);let r=Promise.race([n,this.abortPromise]).then(o=>this.onSettle(r,t,null,o),o=>this.onSettle(r,t,o));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(t,n,r,o){if(this.controller.signal.aborted&&r instanceof yr)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>r}),Promise.reject(r);this.pendingKeys.delete(n),this.done&&this.unlistenAbortSignal();const a=this.subscriber;return r?(Object.defineProperty(t,"_error",{get:()=>r}),a&&a(!1),Promise.reject(r)):(Object.defineProperty(t,"_data",{get:()=>o}),a&&a(!1),o)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((n,r)=>this.pendingKeys.delete(r));let t=this.subscriber;t&&t(!0)}async resolveData(t){let n=!1;if(!this.done){let r=()=>this.cancel();t.addEventListener("abort",r),n=await new Promise(o=>{this.subscribe(a=>{t.removeEventListener("abort",r),(a||this.done)&&o(a)})})}return n}get done(){return this.pendingKeys.size===0}get unwrappedData(){return Q(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,n)=>{let[r,o]=n;return Object.assign(t,{[r]:kf(o)})},{})}}function zf(e){return e instanceof Promise&&e._tracked===!0}function kf(e){if(!zf(e))return e;if(e._error)throw e._error;return e._data}function Bf(e){return new Ds(e)}const Lf=function(t,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let o=new Headers(r.headers);return o.set("Location",t),new Response(null,ye({},r,{headers:o}))};class pn{constructor(t,n,r){this.status=t,this.statusText=n||"",this.data=r}}function mi(e){return e instanceof pn}const io={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},Ff={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};function Hf(e){Q(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Ns(e.routes),n=null,r=new Set,o=null,a=null,i=null,s=!1,c=Yt(t,e.history.location,e.basename),l=null;if(c==null){let{matches:P,route:R,error:k}=Qi(t);c=P,l={[R.id]:k}}let u=!c.some(P=>P.route.loader)||e.hydrationData!=null,h,d={historyAction:e.history.action,location:e.history.location,matches:c,initialized:u,navigation:io,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||l,fetchers:new Map},p=ge.Pop,w=!1,v,E=!1,g=!1,x=[],S=[],y=new Map,C=0,$=-1,_=new Map,I=new Set,O=new Map,D=new Map;function B(){return n=e.history.listen(P=>{let{action:R,location:k}=P;return T(R,k)}),d.initialized||T(ge.Pop,d.location),h}function Z(){n&&n(),r.clear(),v&&v.abort(),d.fetchers.forEach((P,R)=>de(R))}function X(P){return r.add(P),()=>r.delete(P)}function b(P){d=ye({},d,P),r.forEach(R=>R(d))}function M(P,R){var k;let U=d.actionData!=null&&d.navigation.formMethod!=null&&d.navigation.state==="loading"&&((k=d.navigation.formAction)==null?void 0:k.split("?")[0])===P.pathname,K=R.loaderData?{loaderData:so(d.loaderData,R.loaderData,R.matches||[])}:{};b(ye({},U?{}:{actionData:null},R,K,{historyAction:p,location:P,initialized:!0,navigation:io,revalidation:"idle",restoreScrollPosition:d.navigation.formData?!1:ae(P,R.matches||d.matches),preventScrollReset:w})),E||p===ge.Pop||(p===ge.Push?e.history.push(P,P.state):p===ge.Replace&&e.history.replace(P,P.state)),p=ge.Pop,w=!1,E=!1,g=!1,x=[],S=[]}async function N(P,R){if(typeof P=="number"){e.history.go(P);return}let{path:k,submission:U,error:K}=Ki(P,R),ce=Nt(d.location,k,R&&R.state),oe=(R&&R.replace)===!0||U!=null?ge.Replace:ge.Push,ee=R&&"preventScrollReset"in R?R.preventScrollReset===!0:void 0;return await T(oe,ce,{submission:U,pendingError:K,preventScrollReset:ee,replace:R&&R.replace})}function A(){if(re(),b({revalidation:"loading"}),d.navigation.state!=="submitting"){if(d.navigation.state==="idle"){T(d.historyAction,d.location,{startUninterruptedRevalidation:!0});return}T(p||d.historyAction,d.navigation.location,{overrideNavigation:d.navigation})}}async function T(P,R,k){v&&v.abort(),v=null,p=P,E=(k&&k.startUninterruptedRevalidation)===!0,ne(d.location,d.matches),w=(k&&k.preventScrollReset)===!0;let U=k&&k.overrideNavigation,K=Yt(t,R,e.basename);if(!K){let{matches:je,route:me,error:$e}=Qi(t);Pe(),M(R,{matches:je,loaderData:{},errors:{[me.id]:$e}});return}if(Vf(d.location,R)){M(R,{matches:K});return}v=new AbortController;let ce=vn(R,v.signal,k&&k.submission),oe,ee;if(k&&k.pendingError)ee={[Kt(K).route.id]:k.pendingError};else if(k&&k.submission){let je=await F(ce,R,k.submission,K,{replace:k.replace});if(je.shortCircuited)return;oe=je.pendingActionData,ee=je.pendingActionError,U=ye({state:"loading",location:R},k.submission)}let{shortCircuited:se,loaderData:pe,errors:we}=await L(ce,R,K,U,k&&k.submission,k&&k.replace,oe,ee);se||(v=null,M(R,{matches:K,loaderData:pe,errors:we}))}async function F(P,R,k,U,K){re();let ce=ye({state:"submitting",location:R},k);b({navigation:ce});let oe,ee=oa(U,R);if(!ee.route.action)oe=ea(R);else if(oe=await yn("action",P,ee),P.signal.aborted)return{shortCircuited:!0};if(Qt(oe)){let se=ye({state:"loading",location:Nt(d.location,oe.location)},k);return await W(oe,se,K&&K.replace),{shortCircuited:!0}}if(In(oe)){let se=Kt(U,ee.route.id);return(K&&K.replace)!==!0&&(p=ge.Push),{pendingActionError:{[se.route.id]:oe.error}}}if(Lt(oe))throw new Error("defer() is not supported in actions");return{pendingActionData:{[ee.route.id]:oe.data}}}async function L(P,R,k,U,K,ce,oe,ee){let se=U;se||(se={state:"loading",location:R,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[pe,we]=qi(d,k,K,R,g,x,S,oe,ee,O);if(Pe(be=>!(k&&k.some(Se=>Se.route.id===be))||pe&&pe.some(Se=>Se.route.id===be)),pe.length===0&&we.length===0)return M(R,{matches:k,loaderData:so(d.loaderData,{},k),errors:ee||null,actionData:oe||null}),{shortCircuited:!0};E||(we.forEach(be=>{let[Se]=be;const Ke=d.fetchers.get(Se);let At={state:"loading",data:Ke&&Ke.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(Se,At)}),b(ye({navigation:se,actionData:oe||d.actionData||null},we.length>0?{fetchers:new Map(d.fetchers)}:{}))),$=++C,we.forEach(be=>{let[Se]=be;return y.set(Se,v)});let{results:je,loaderResults:me,fetcherResults:$e}=await te(d.matches,pe,we,P);if(P.signal.aborted)return{shortCircuited:!0};we.forEach(be=>{let[Se]=be;return y.delete(Se)});let We=ta(je);if(We){let be=ao(d,We);return await W(We,be,ce),{shortCircuited:!0}}let{loaderData:Ye,errors:Ae}=Ji(d,k,pe,me,ee,we,$e,D);D.forEach((be,Se)=>{be.subscribe(Ke=>{(Ke||be.done)&&D.delete(Se)})}),Me();let bt=fe($);return ye({loaderData:Ye,errors:Ae},bt||we.length>0?{fetchers:new Map(d.fetchers)}:{})}function H(P){return d.fetchers.get(P)||Ff}function J(P,R,k,U){if(typeof AbortController>"u")throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");y.has(P)&&Y(P);let K=Yt(t,k,e.basename);if(!K){ie(P,R,new pn(404,"Not Found",null));return}let{path:ce,submission:oe}=Ki(k,U,!0),ee=oa(K,ce);if(oe){G(P,R,ce,ee,oe);return}O.set(P,[ce,ee]),q(P,R,ce,ee)}async function G(P,R,k,U,K){if(re(),O.delete(P),!U.route.action){let{error:Ue}=ea(k);ie(P,R,Ue);return}let ce=d.fetchers.get(P),oe=ye({state:"submitting"},K,{data:ce&&ce.data});d.fetchers.set(P,oe),b({fetchers:new Map(d.fetchers)});let ee=new AbortController,se=vn(k,ee.signal,K);y.set(P,ee);let pe=await yn("action",se,U);if(se.signal.aborted){y.get(P)===ee&&y.delete(P);return}if(Qt(pe)){y.delete(P),I.add(P);let Ue=ye({state:"loading"},K,{data:void 0});d.fetchers.set(P,Ue),b({fetchers:new Map(d.fetchers)});let tt=ye({state:"loading",location:Nt(d.location,pe.location)},K);await W(pe,tt);return}if(In(pe)){ie(P,R,pe.error);return}Lt(pe)&&Q(!1,"defer() is not supported in actions");let we=d.navigation.location||d.location,je=vn(we,ee.signal),me=d.navigation.state!=="idle"?Yt(t,d.navigation.location,e.basename):d.matches;Q(me,"Didn't find any matches after fetcher action");let $e=++C;_.set(P,$e);let We=ye({state:"loading",data:pe.data},K);d.fetchers.set(P,We);let[Ye,Ae]=qi(d,me,K,we,g,x,S,{[U.route.id]:pe.data},void 0,O);Ae.filter(Ue=>{let[tt]=Ue;return tt!==P}).forEach(Ue=>{let[tt]=Ue,Zn=d.fetchers.get(tt),Zr={state:"loading",data:Zn&&Zn.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(tt,Zr),y.set(tt,ee)}),b({fetchers:new Map(d.fetchers)});let{results:bt,loaderResults:be,fetcherResults:Se}=await te(d.matches,Ye,Ae,je);if(ee.signal.aborted)return;_.delete(P),y.delete(P),Ae.forEach(Ue=>{let[tt]=Ue;return y.delete(tt)});let Ke=ta(bt);if(Ke){let Ue=ao(d,Ke);await W(Ke,Ue);return}let{loaderData:At,errors:st}=Ji(d,d.matches,Ye,be,void 0,Ae,Se,D),Kr={state:"idle",data:pe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(P,Kr);let qr=fe($e);d.navigation.state==="loading"&&$e>$?(Q(p,"Expected pending action"),v&&v.abort(),M(d.navigation.location,{matches:me,loaderData:At,errors:st,fetchers:new Map(d.fetchers)})):(b(ye({errors:st,loaderData:so(d.loaderData,At,me)},qr?{fetchers:new Map(d.fetchers)}:{})),g=!1)}async function q(P,R,k,U){let K=d.fetchers.get(P),ce={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:K&&K.data};d.fetchers.set(P,ce),b({fetchers:new Map(d.fetchers)});let oe=new AbortController,ee=vn(k,oe.signal);y.set(P,oe);let se=await yn("loader",ee,U);if(Lt(se)&&(se=await ks(se,ee.signal,!0)||se),y.get(P)===oe&&y.delete(P),ee.signal.aborted)return;if(Qt(se)){let we=ao(d,se);await W(se,we);return}if(In(se)){let we=Kt(d.matches,R);d.fetchers.delete(P),b({fetchers:new Map(d.fetchers),errors:{[we.route.id]:se.error}});return}Q(!Lt(se),"Unhandled fetcher deferred data");let pe={state:"idle",data:se.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(P,pe),b({fetchers:new Map(d.fetchers)})}async function W(P,R,k){P.revalidate&&(g=!0),Q(R.location,"Expected a location on the redirect navigation"),v=null;let U=k===!0?ge.Replace:ge.Push;await T(U,R.location,{overrideNavigation:R})}async function te(P,R,k,U){let K=await Promise.all([...R.map(ee=>yn("loader",U,ee)),...k.map(ee=>{let[,se,pe]=ee;return yn("loader",vn(se,U.signal),pe)})]),ce=K.slice(0,R.length),oe=K.slice(R.length);return await Promise.all([na(P,R,ce,U.signal,!1,d.loaderData),na(P,k.map(ee=>{let[,,se]=ee;return se}),oe,U.signal,!0)]),{results:K,loaderResults:ce,fetcherResults:oe}}function re(){g=!0,x.push(...Pe()),O.forEach((P,R)=>{y.has(R)&&(S.push(R),Y(R))})}function ie(P,R,k){let U=Kt(d.matches,R);de(P),b({errors:{[U.route.id]:k},fetchers:new Map(d.fetchers)})}function de(P){y.has(P)&&Y(P),O.delete(P),_.delete(P),I.delete(P),d.fetchers.delete(P)}function Y(P){let R=y.get(P);Q(R,"Expected fetch controller: "+P),R.abort(),y.delete(P)}function xe(P){for(let R of P){let U={state:"idle",data:H(R).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};d.fetchers.set(R,U)}}function Me(){let P=[];for(let R of I){let k=d.fetchers.get(R);Q(k,"Expected fetcher: "+R),k.state==="loading"&&(I.delete(R),P.push(R))}xe(P)}function fe(P){let R=[];for(let[k,U]of _)if(U<P){let K=d.fetchers.get(k);Q(K,"Expected fetcher: "+k),K.state==="loading"&&(Y(k),_.delete(k),R.push(k))}return xe(R),R.length>0}function Pe(P){let R=[];return D.forEach((k,U)=>{(!P||P(U))&&(k.cancel(),R.push(U),D.delete(U))}),R}function he(P,R,k){if(o=P,i=R,a=k||(U=>U.key),!s&&d.navigation===io){s=!0;let U=ae(d.location,d.matches);U!=null&&b({restoreScrollPosition:U})}return()=>{o=null,i=null,a=null}}function ne(P,R){if(o&&a&&i){let k=R.map(K=>ra(K,d.loaderData)),U=a(P,k)||P.key;o[U]=i()}}function ae(P,R){if(o&&a&&i){let k=R.map(ce=>ra(ce,d.loaderData)),U=a(P,k)||P.key,K=o[U];if(typeof K=="number")return K}return null}return h={get basename(){return e.basename},get state(){return d},get routes(){return t},initialize:B,subscribe:X,enableScrollRestoration:he,navigate:N,fetch:J,revalidate:A,createHref:kr,getFetcher:H,deleteFetcher:de,dispose:Z,_internalFetchControllers:y,_internalActiveDeferreds:D},h}function Ki(e,t,n){n===void 0&&(n=!1);let r=typeof e=="string"?e:Dn(e);if(!t||!("formMethod"in t)&&!("formData"in t))return{path:r};if(t.formMethod!=null&&t.formMethod!=="get")return{path:r,submission:{formMethod:t.formMethod,formAction:kr(ct(r)),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};if(!t.formData)return{path:r};let o=ct(r);try{let a=zs(t.formData);n&&o.search&&Bs(o.search)&&a.append("index",""),o.search="?"+a}catch{return{path:r,error:new pn(400,"Bad Request","Cannot submit binary form data using GET")}}return{path:Dn(o)}}function ao(e,t){let{formMethod:n,formAction:r,formEncType:o,formData:a}=e.navigation;return{state:"loading",location:Nt(e.location,t.location),formMethod:n||void 0,formAction:r||void 0,formEncType:o||void 0,formData:a||void 0}}function jf(e,t){let n=e;if(t){let r=e.findIndex(o=>o.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function qi(e,t,n,r,o,a,i,s,c,l){let u=c?Object.values(c)[0]:s?Object.values(s)[0]:null,h=c?Object.keys(c)[0]:void 0,p=jf(t,h).filter((v,E)=>v.route.loader!=null&&(Wf(e.loaderData,e.matches[E],v)||a.some(g=>g===v.route.id)||Zi(e.location,e.matches[E],n,r,v,o,u))),w=[];return l&&l.forEach((v,E)=>{let[g,x]=v;i.includes(E)?w.push([E,g,x]):o&&Zi(g,x,n,g,x,o,u)&&w.push([E,g,x])}),[p,w]}function Wf(e,t,n){let r=!t||n.route.id!==t.route.id,o=e[n.route.id]===void 0;return r||o}function Os(e,t){let n=e.route.path;return e.pathname!==t.pathname||n&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Zi(e,t,n,r,o,a,i){let s=Do(e),c=t.params,l=Do(r),u=o.params,h=Os(t,o)||s.toString()===l.toString()||s.search!==l.search||a;if(o.route.shouldRevalidate){let d=o.route.shouldRevalidate(ye({currentUrl:s,currentParams:c,nextUrl:l,nextParams:u},n,{actionResult:i,defaultShouldRevalidate:h}));if(typeof d=="boolean")return d}return h}async function yn(e,t,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=!1);let a,i,s,c=new Promise((u,h)=>s=h),l=()=>s();t.signal.addEventListener("abort",l);try{let u=n.route[e];Q(u,"Could not find the "+e+' to run on the "'+n.route.id+'" route'),i=await Promise.race([u({request:t,params:n.params}),c])}catch(u){a=De.error,i=u}finally{t.signal.removeEventListener("abort",l)}if(i instanceof Response){let u=i.status,h=i.headers.get("Location");if(o)throw i;if(u>=300&&u<=399&&h!=null){if(r)throw i;return{type:De.redirect,status:u,location:h,revalidate:i.headers.get("X-Remix-Revalidate")!==null}}let d,p=i.headers.get("Content-Type");return p&&p.startsWith("application/json")?d=await i.json():d=await i.text(),a===De.error?{type:a,error:new pn(u,i.statusText,d),headers:i.headers}:{type:De.data,data:d,statusCode:i.status,headers:i.headers}}return a===De.error?{type:a,error:i}:i instanceof Ds?{type:De.deferred,deferredData:i}:{type:De.data,data:i}}function vn(e,t,n){let r=Do(e).toString(),o={signal:t};if(n){let{formMethod:a,formEncType:i,formData:s}=n;o.method=a.toUpperCase(),o.body=i==="application/x-www-form-urlencoded"?zs(s):s}return new Request(r,o)}function zs(e){let t=new URLSearchParams;for(let[n,r]of e.entries())Q(typeof r=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(n,r);return t}function Uf(e,t,n,r,o){let a={},i=null,s,c=!1,l={};return n.forEach((u,h)=>{let d=t[h].route.id;if(Q(!Qt(u),"Cannot handle redirect results in processLoaderData"),In(u)){let p=Kt(e,d),w=u.error;r&&(w=Object.values(r)[0],r=void 0),i=Object.assign(i||{},{[p.route.id]:w}),c||(c=!0,s=mi(u.error)?u.error.status:500),u.headers&&(l[d]=u.headers)}else Lt(u)?(o&&o.set(d,u.deferredData),a[d]=u.deferredData.data):(a[d]=u.data,u.statusCode!=null&&u.statusCode!==200&&!c&&(s=u.statusCode),u.headers&&(l[d]=u.headers))}),r&&(i=r),{loaderData:a,errors:i,statusCode:s||200,loaderHeaders:l}}function Ji(e,t,n,r,o,a,i,s){let{loaderData:c,errors:l}=Uf(t,n,r,o,s);for(let u=0;u<a.length;u++){let[h,,d]=a[u];Q(i!==void 0&&i[u]!==void 0,"Did not find corresponding fetcher result");let p=i[u];if(In(p)){let w=Kt(e.matches,d.route.id);l&&l[w.route.id]||(l=ye({},l,{[w.route.id]:p.error})),e.fetchers.delete(h)}else{if(Qt(p))throw new Error("Unhandled fetcher revalidation redirect");if(Lt(p))throw new Error("Unhandled fetcher deferred data");{let w={state:"idle",data:p.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(h,w)}}}return{loaderData:c,errors:l}}function so(e,t,n){let r=ye({},t);return n.forEach(o=>{let a=o.route.id;t[a]===void 0&&e[a]!==void 0&&(r[a]=e[a])}),r}function Kt(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function Qi(e){let t=e.find(n=>n.index||n.path===""||n.path==="/")||{id:"__shim-404-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t,error:new pn(404,"Not Found",null)}}function ea(e){let t=typeof e=="string"?e:kr(e);return console.warn("You're trying to submit to a route that does not have an action.  To fix this, please add an `action` function to the route for "+("["+t+"]")),{type:De.error,error:new pn(405,"Method Not Allowed","No action found for ["+t+"]")}}function ta(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Qt(n))return n}}function kr(e){return(e.pathname||"")+(e.search||"")}function Vf(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function Lt(e){return e.type===De.deferred}function In(e){return e.type===De.error}function Qt(e){return(e&&e.type)===De.redirect}async function na(e,t,n,r,o,a){for(let i=0;i<n.length;i++){let s=n[i],c=t[i],l=e.find(h=>h.route.id===c.route.id),u=l!=null&&!Os(l,c)&&(a&&a[c.route.id])!==void 0;Lt(s)&&(o||u)&&await ks(s,r,o).then(h=>{h&&(n[i]=h||n[i])})}}async function ks(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:De.data,data:e.deferredData.unwrappedData}}catch(o){return{type:De.error,error:o}}return{type:De.data,data:e.deferredData.data}}}function Bs(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function ra(e,t){let{route:n,pathname:r,params:o}=e;return{id:n.id,pathname:r,params:o,data:t[n.id],handle:n.handle}}function oa(e,t){let n=typeof t=="string"?ct(t).search:t.search;return e[e.length-1].route.index&&!Bs(n||"")?e.slice(-2)[0]:e.slice(-1)[0]}function Do(e){let t=typeof window<"u"&&typeof window.location<"u"?window.location.origin:"unknown://unknown",n=typeof e=="string"?e:kr(e);return new URL(n,t)}/**
 * React Router v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vr(){return vr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vr.apply(this,arguments)}function Gf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const Xf=typeof Object.is=="function"?Object.is:Gf,{useState:Yf,useEffect:Kf,useLayoutEffect:qf,useDebugValue:Zf}=Po;function Jf(e,t,n){const r=t(),[{inst:o},a]=Yf({inst:{value:r,getSnapshot:t}});return qf(()=>{o.value=r,o.getSnapshot=t,lo(o)&&a({inst:o})},[e,r,t]),Kf(()=>(lo(o)&&a({inst:o}),e(()=>{lo(o)&&a({inst:o})})),[e]),Zf(r),r}function lo(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!Xf(n,r)}catch{return!0}}function Qf(e,t,n){return t()}const eh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",th=!eh,nh=th?Qf:Jf,rh="useSyncExternalStore"in Po?(e=>e.useSyncExternalStore)(Po):nh,Ls=m.createContext(null),Br=m.createContext(null),Xn=m.createContext(null),xr=m.createContext(null),Lr=m.createContext(null),gn=m.createContext(null),dt=m.createContext({outlet:null,matches:[]}),Fs=m.createContext(null);function oh(e,t){let{relative:n}=t===void 0?{}:t;Tt()||Q(!1);let{basename:r,navigator:o}=m.useContext(Lr),{hash:a,pathname:i,search:s}=Us(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:Mt([r,i])),o.createHref({pathname:c,search:s,hash:a})}function Tt(){return m.useContext(gn)!=null}function mn(){return Tt()||Q(!1),m.useContext(gn).location}function ih(){return m.useContext(gn).navigationType}function ah(e){Tt()||Q(!1);let{pathname:t}=mn();return m.useMemo(()=>Bt(e,t),[t,e])}function Hs(e){return e.filter((t,n)=>n===0||!t.route.index&&t.pathnameBase!==e[n-1].pathnameBase)}function Rt(){Tt()||Q(!1);let{basename:e,navigator:t}=m.useContext(Lr),{matches:n}=m.useContext(dt),{pathname:r}=mn(),o=JSON.stringify(Hs(n).map(s=>s.pathnameBase)),a=m.useRef(!1);return m.useEffect(()=>{a.current=!0}),m.useCallback(function(s,c){if(c===void 0&&(c={}),!a.current)return;if(typeof s=="number"){t.go(s);return}let l=As(s,JSON.parse(o),r,c.relative==="path");e!=="/"&&(l.pathname=l.pathname==="/"?e:Mt([e,l.pathname])),(c.replace?t.replace:t.push)(l,c.state,c)},[e,t,o,r])}const js=m.createContext(null);function sh(){return m.useContext(js)}function Ws(e){let t=m.useContext(dt).outlet;return t&&f(js.Provider,{value:e,children:t})}function Wt(){let{matches:e}=m.useContext(dt),t=e[e.length-1];return t?t.params:{}}function Us(e,t){let{relative:n}=t===void 0?{}:t,{matches:r}=m.useContext(dt),{pathname:o}=mn(),a=JSON.stringify(Hs(r).map(i=>i.pathnameBase));return m.useMemo(()=>As(e,JSON.parse(a),o,n==="path"),[e,a,o,n])}function yi(e,t){Tt()||Q(!1);let n=m.useContext(Xn),{matches:r}=m.useContext(dt),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let i=o?o.pathnameBase:"/";o&&o.route;let s=mn(),c;if(t){var l;let w=typeof t=="string"?ct(t):t;i==="/"||(l=w.pathname)!=null&&l.startsWith(i)||Q(!1),c=w}else c=s;let u=c.pathname||"/",h=i==="/"?u:u.slice(i.length)||"/",d=Yt(e,{pathname:h}),p=Vs(d&&d.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Mt([i,w.pathname]),pathnameBase:w.pathnameBase==="/"?i:Mt([i,w.pathnameBase])})),r,n||void 0);return t?f(gn.Provider,{value:{location:vr({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ge.Pop},children:p}):p}function lh(){let e=Gs(),t=mi(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r};return z(ue,{children:[f("h2",{children:"Unhandled Thrown Error!"}),f("h3",{style:{fontStyle:"italic"},children:t}),n?f("pre",{style:o,children:n}):null,f("p",{children:"💿 Hey developer 👋"}),z("p",{children:["You can provide a way better UX than this when your app throws errors by providing your own ",f("code",{style:a,children:"errorElement"})," props on ",f("code",{style:a,children:"<Route>"})]})]})}class ch extends m.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location?{error:t.error,location:t.location}:{error:t.error||n.error,location:n.location}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error?f(Fs.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function uh(e){let{routeContext:t,match:n,children:r}=e,o=m.useContext(Ls);return o&&n.route.errorElement&&(o._deepestRenderedBoundaryId=n.route.id),f(dt.Provider,{value:t,children:r})}function Vs(e,t,n){if(t===void 0&&(t=[]),e==null)if(n!=null&&n.errors)e=n.matches;else return null;let r=e,o=n==null?void 0:n.errors;if(o!=null){let a=r.findIndex(i=>i.route.id&&(o==null?void 0:o[i.route.id]));a>=0||Q(!1),r=r.slice(0,Math.min(r.length,a+1))}return r.reduceRight((a,i,s)=>{let c=i.route.id?o==null?void 0:o[i.route.id]:null,l=n?i.route.errorElement||f(lh,{}):null,u=()=>f(uh,{match:i,routeContext:{outlet:a,matches:t.concat(r.slice(0,s+1))},children:c?l:i.route.element!==void 0?i.route.element:a});return n&&(i.route.errorElement||s===0)?f(ch,{location:n.location,component:l,error:c,children:u()}):u()},null)}var Oo;(function(e){e.UseRevalidator="useRevalidator"})(Oo||(Oo={}));var yt;(function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(yt||(yt={}));function dh(e){let t=m.useContext(Br);return t||Q(!1),t}function Ut(e){let t=m.useContext(Xn);return t||Q(!1),t}function fh(){return Ut(yt.UseNavigation).navigation}function hh(){let e=dh(Oo.UseRevalidator),t=Ut(yt.UseRevalidator);return{revalidate:e.router.revalidate,state:t.revalidation}}function ph(){let{matches:e,loaderData:t}=Ut(yt.UseMatches);return m.useMemo(()=>e.map(n=>{let{pathname:r,params:o}=n;return{id:n.route.id,pathname:r,params:o,data:t[n.route.id],handle:n.route.handle}}),[e,t])}function gh(){let e=Ut(yt.UseLoaderData),t=m.useContext(dt);t||Q(!1);let n=t.matches[t.matches.length-1];return n.route.id||Q(!1),e.loaderData[n.route.id]}function mh(e){return Ut(yt.UseRouteLoaderData).loaderData[e]}function yh(){let e=Ut(yt.UseActionData);return m.useContext(dt)||Q(!1),Object.values((e==null?void 0:e.actionData)||{})[0]}function Gs(){var e;let t=m.useContext(Fs),n=Ut(yt.UseRouteError),r=m.useContext(dt),o=r.matches[r.matches.length-1];return t||(r||Q(!1),o.route.id||Q(!1),(e=n.errors)==null?void 0:e[o.route.id])}function Xs(){let e=m.useContext(xr);return e==null?void 0:e._data}function vh(){let e=m.useContext(xr);return e==null?void 0:e._error}function xh(e){let{fallbackElement:t,router:n}=e,r=rh(n.subscribe,()=>n.state,()=>n.state),o=m.useMemo(()=>({createHref:n.createHref,go:i=>n.navigate(i),push:(i,s,c)=>n.navigate(i,{state:s,preventScrollReset:c==null?void 0:c.preventScrollReset}),replace:(i,s,c)=>n.navigate(i,{replace:!0,state:s,preventScrollReset:c==null?void 0:c.preventScrollReset})}),[n]),a=n.basename||"/";return f(Br.Provider,{value:{router:n,navigator:o,static:!1,basename:a},children:f(Xn.Provider,{value:r,children:f(Fr,{basename:n.basename,location:n.state.location,navigationType:n.state.historyAction,navigator:o,children:n.state.initialized?f(qs,{}):t})})})}function bh(e){let{basename:t,children:n,initialEntries:r,initialIndex:o}=e,a=m.useRef();a.current==null&&(a.current=_s({initialEntries:r,initialIndex:o,v5Compat:!0}));let i=a.current,[s,c]=m.useState({action:i.action,location:i.location});return m.useLayoutEffect(()=>i.listen(c),[i]),f(Fr,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:i})}function wh(e){let{to:t,replace:n,state:r,relative:o}=e;Tt()||Q(!1);let a=m.useContext(Xn),i=Rt();return m.useEffect(()=>{a&&a.navigation.state!=="idle"||i(t,{replace:n,state:r,relative:o})}),null}function Ys(e){return Ws(e.context)}function Ks(e){Q(!1)}function Fr(e){let{basename:t="/",children:n=null,location:r,navigationType:o=ge.Pop,navigator:a,static:i=!1}=e;Tt()&&Q(!1);let s=t.replace(/^\/*/,"/"),c=m.useMemo(()=>({basename:s,navigator:a,static:i}),[s,a,i]);typeof r=="string"&&(r=ct(r));let{pathname:l="/",search:u="",hash:h="",state:d=null,key:p="default"}=r,w=m.useMemo(()=>{let v=Is(l,s);return v==null?null:{pathname:v,search:u,hash:h,state:d,key:p}},[s,l,u,h,d,p]);return w==null?null:f(Lr.Provider,{value:c,children:f(gn.Provider,{children:n,value:{location:w,navigationType:o}})})}function qs(e){let{children:t,location:n}=e,r=m.useContext(Br),o=r&&!t?r.router.routes:On(t);return yi(o,n)}function Sh(e){let{children:t,errorElement:n,resolve:r}=e;return f(Ch,{resolve:r,errorElement:n,children:f($h,{children:t})})}var Ge;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Ge||(Ge={}));const Eh=new Promise(()=>{});class Ch extends m.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,n){console.error("<Await> caught the following error during render",t,n)}render(){let{children:t,errorElement:n,resolve:r}=this.props,o=null,a=Ge.pending;if(!(r instanceof Promise))a=Ge.success,o=Promise.resolve(),Object.defineProperty(o,"_tracked",{get:()=>!0}),Object.defineProperty(o,"_data",{get:()=>r});else if(this.state.error){a=Ge.error;let i=this.state.error;o=Promise.reject().catch(()=>{}),Object.defineProperty(o,"_tracked",{get:()=>!0}),Object.defineProperty(o,"_error",{get:()=>i})}else r._tracked?(o=r,a=o._error!==void 0?Ge.error:o._data!==void 0?Ge.success:Ge.pending):(a=Ge.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),o=r.then(i=>Object.defineProperty(r,"_data",{get:()=>i}),i=>Object.defineProperty(r,"_error",{get:()=>i})));if(a===Ge.error&&o._error instanceof yr)throw Eh;if(a===Ge.error&&!n)throw o._error;if(a===Ge.error)return f(xr.Provider,{value:o,children:n});if(a===Ge.success)return f(xr.Provider,{value:o,children:t});throw o}}function $h(e){let{children:t}=e,n=Xs();return typeof t=="function"?t(n):f(ue,{children:t})}function On(e,t){t===void 0&&(t=[]);let n=[];return m.Children.forEach(e,(r,o)=>{if(!m.isValidElement(r))return;if(r.type===m.Fragment){n.push.apply(n,On(r.props.children,t));return}r.type!==Ks&&Q(!1),!r.props.index||!r.props.children||Q(!1);let a=[...t,o],i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(i.children=On(r.props.children,a)),n.push(i)}),n}function _h(e){return Vs(e)}function vi(e){return e.map(t=>{let n=vr({},t);return n.hasErrorBoundary==null&&(n.hasErrorBoundary=n.errorElement!=null),n.children&&(n.children=vi(n.children)),n})}function Nh(e,t){return Hf({basename:t==null?void 0:t.basename,history:_s({initialEntries:t==null?void 0:t.initialEntries,initialIndex:t==null?void 0:t.initialIndex}),hydrationData:t==null?void 0:t.hydrationData,routes:vi(e)}).initialize()}const Mh=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:yr,Await:Sh,MemoryRouter:bh,Navigate:wh,get NavigationType(){return ge},Outlet:Ys,Route:Ks,Router:Fr,RouterProvider:xh,Routes:qs,UNSAFE_DataRouterContext:Br,UNSAFE_DataRouterStateContext:Xn,UNSAFE_DataStaticRouterContext:Ls,UNSAFE_LocationContext:gn,UNSAFE_NavigationContext:Lr,UNSAFE_RouteContext:dt,UNSAFE_enhanceManualRouteObjects:vi,createMemoryRouter:Nh,createPath:Dn,createRoutesFromChildren:On,createRoutesFromElements:On,defer:Bf,generatePath:Ps,isRouteErrorResponse:mi,json:Of,matchPath:Bt,matchRoutes:Yt,parsePath:ct,redirect:Lf,renderMatches:_h,resolvePath:Rs,useActionData:yh,useAsyncError:vh,useAsyncValue:Xs,useHref:oh,useInRouterContext:Tt,useLoaderData:gh,useLocation:mn,useMatch:ah,useMatches:ph,useNavigate:Rt,useNavigation:fh,useNavigationType:ih,useOutlet:Ws,useOutletContext:sh,useParams:Wt,useResolvedPath:Us,useRevalidator:hh,useRouteError:Gs,useRouteLoaderData:mh,useRoutes:yi},Symbol.toStringTag,{value:"Module"}));/**
 * React Router DOM v6.4.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ph(e){let{basename:t,children:n,window:r}=e,o=m.useRef();o.current==null&&(o.current=pf({window:r,v5Compat:!0}));let a=o.current,[i,s]=m.useState({action:a.action,location:a.location});return m.useLayoutEffect(()=>a.listen(s),[a]),f(Fr,{basename:t,children:n,location:i.location,navigationType:i.action,navigator:a})}var ia;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ia||(ia={}));var aa;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(aa||(aa={}));function sn(e,t){return Ps(e,t)}var Ih=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};function Th(e,t){e===void 0&&(e=!1);var n=Ih(m.useState(e),2),r=n[0],o=n[1],a=m.useMemo(function(){var i=t===void 0?!e:t,s=function(){return o(function(d){return d===e?i:e})},c=function(d){return o(d)},l=function(){return o(e)},u=function(){return o(i)};return{toggle:s,set:c,setLeft:l,setRight:u}},[]);return[r,a]}var Rh=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a};function Ah(e){e===void 0&&(e=!1);var t=Rh(Th(e),2),n=t[0],r=t[1],o=r.toggle,a=r.set,i=m.useMemo(function(){var s=function(){return a(!0)},c=function(){return a(!1)};return{toggle:o,set:function(u){return a(!!u)},setTrue:s,setFalse:c}},[]);return[n,i]}function zo(e,t,n){n===void 0&&(n={});var r=Io(t);au(function(){var o=os(n.target,window);if(o!=null&&o.addEventListener){var a=function(s){return r.current(s)};return o.addEventListener(e,a,{capture:n.capture,once:n.once,passive:n.passive}),function(){o.removeEventListener(e,a,{capture:n.capture})}}},[e,n.capture,n.once,n.passive],n.target)}var ko=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Dh={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftwindowkey:91,rightwindowkey:92,selectkey:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,numpad9:105,multiply:106,add:107,subtract:109,decimalpoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,semicolon:186,equalsign:187,comma:188,dash:189,period:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Bo={ctrl:function(t){return t.ctrlKey},shift:function(t){return t.shiftKey},alt:function(t){return t.altKey},meta:function(t){return t.metaKey}};function Oh(e){var t=Object.keys(Bo).reduce(function(n,r){return Bo[r](e)?n+1:n},0);return[16,17,18,91,92].includes(e.keyCode)?t:t+1}function sa(e,t,n){var r,o;if(!e.key)return!1;if(is(t))return e.keyCode===t;var a=t.split("."),i=0;try{for(var s=ko(a),c=s.next();!c.done;c=s.next()){var l=c.value,u=Bo[l],h=Dh[l.toLowerCase()];(u&&u(e)||h&&h===e.keyCode)&&i++}}catch(d){r={error:d}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return n?i===a.length&&Oh(e)===a.length:i===a.length}function zh(e,t){return lu(e)?e:cu(e)||is(e)?function(n){return sa(n,e,t)}:Array.isArray(e)?function(n){return e.some(function(r){return sa(n,r,t)})}:e?function(){return!0}:function(){return!1}}var kh=["keydown"];function Bh(e,t,n){var r=n||{},o=r.events,a=o===void 0?kh:o,i=r.target,s=r.exactMatch,c=s===void 0?!1:s,l=Io(t),u=Io(e);su(function(){var h,d,p,w=os(i,window);if(w){var v=function(y){var C,$=zh(u.current,c);if($(y))return(C=l.current)===null||C===void 0?void 0:C.call(l,y)};try{for(var E=ko(a),g=E.next();!g.done;g=E.next()){var x=g.value;(p=w==null?void 0:w.addEventListener)===null||p===void 0||p.call(w,x,v)}}catch(S){h={error:S}}finally{try{g&&!g.done&&(d=E.return)&&d.call(E)}finally{if(h)throw h.error}}return function(){var S,y,C;try{for(var $=ko(a),_=$.next();!_.done;_=$.next()){var I=_.value;(C=w==null?void 0:w.removeEventListener)===null||C===void 0||C.call(w,I,v)}}catch(O){S={error:O}}finally{try{_&&!_.done&&(y=$.return)&&y.call($)}finally{if(S)throw S.error}}}}},[a],i)}var ot=(e=>(e.Page="Page",e.Entity="Entity",e))(ot||{});const Lh=()=>f("div",{children:"ModuleManagerEntity"});var Fh=["fieldProps","min","proFieldProps","max"],Hh=function(t,n){var r=t.fieldProps,o=t.min,a=t.proFieldProps,i=t.max,s=Ar(t,Fh);return f(Dr,Te({valueType:"digit",fieldProps:Te({min:o,max:i},r),ref:n,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:a},s))};const xn=Wn.forwardRef(Hh);var jh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],Wh=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],Uh=Wn.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,o=e.params,a=e.proFieldProps,i=e.mode,s=e.valueEnum,c=e.request,l=e.showSearch,u=e.options,h=Ar(e,jh),d=m.useContext(as);return f(Dr,Te(Te({valueEnum:ss(s),request:c,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Te({options:u,mode:i,showSearch:l,getPopupContainer:d.getPopupContainer},n),ref:t,proFieldProps:a},h),{},{children:r}))}),Vh=Wn.forwardRef(function(e,t){var n=e.fieldProps,r=e.children,o=e.params,a=e.proFieldProps,i=e.mode,s=e.valueEnum,c=e.request,l=e.options,u=Ar(e,Wh),h=Te({options:l,mode:i||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},n),d=m.useContext(as);return f(Dr,Te(Te({valueEnum:ss(s),request:c,params:o,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:Te({getPopupContainer:d.getPopupContainer},h),ref:t,proFieldProps:a},u),{},{children:r}))}),Gh=Uh,Xh=Vh,xi=Gh;xi.SearchSelect=Xh;xi.displayName="ProFormComponent";const Zs=xi;var Yh=["fieldProps","unCheckedChildren","checkedChildren","proFieldProps"],Kh=Wn.forwardRef(function(e,t){var n=e.fieldProps,r=e.unCheckedChildren,o=e.checkedChildren,a=e.proFieldProps,i=Ar(e,Yh);return f(Dr,Te({valueType:"switch",fieldProps:Te({unCheckedChildren:r,checkedChildren:o},n),ref:t,valuePropName:"checked",proFieldProps:a,filedConfig:{valuePropName:"checked",ignoreWidth:!0}},i))});const Lo=Kh,Oe={appAtom:uu,pagesSelector:du,pageByIdSelector:fu,pageSelector:hu,entitySelector:pu,entityByIdSelector:gu,entitiesSelector:mu,entityRelationsSelector:yu,entityRelationsBySourceEntityNameMapSelector:vu,entityRelationsByTargetEntityNameMapSelector:xu},qh=()=>{const e=xt(Oe.pagesSelector);return{addPage:m.useCallback(n=>{e(Qe(r=>{r.push(n)}))},[e])}},Zh=()=>{const e=xt(Oe.pageByIdSelector);return{removePage:m.useCallback(n=>{e(Qe(r=>{Reflect.deleteProperty(r,n)}))},[e])}},Jh=({searchVal:e,itemAddRef:t})=>{const{appId:n,pageId:r}=Wt(),o=Rt(),i=Ce(Oe.pagesSelector).filter(h=>h.name.includes(e)),[s]=ke.useForm(),{addPage:c}=qh(),{removePage:l}=Zh(),u=h=>f(Ao.Item,{className:co.listItem,onClick:()=>{o(sn(Le.PAGE,{appId:n,pageId:h.id}))},children:z("div",{className:co.listItemContent,children:[h.id===r?f(Be.Link,{children:h.name}):f(Be.Text,{children:h.name}),f(Su,{trigger:["hover"],menu:{onClick:({key:d})=>{switch(d){case"Delete":l(h.id);break}},items:[{label:f(Be.Text,{children:"复制"}),key:"Copy"},{label:f(Be.Text,{type:"danger",children:"删除"}),key:"Delete"}]},children:f(lf,{className:`${co.moreAction} mm_p-list_item_more_action`})},h.id)]})});return z(ue,{children:[t&&ls.createPortal(f(bu,{form:s,layout:"horizontal",title:"创建页面",modalProps:{mask:!1},onFinish:async h=>(await s.validateFields(),console.log(h),c(cs.generateDefaultPage(h.name)),s.resetFields(),!0),trigger:f(Re,{type:"text",shape:"circle",size:"small",children:f(wu,{})}),children:f(gt,{rules:[{required:!0,message:"请输入页面名称"}],name:"name",label:"页面名称",placeholder:"请输入页面名称"})}),t),f(Ao,{dataSource:i,size:"small",rowKey:"id",renderItem:u})]})},co={listItem:j({name:"19u7x2f",styles:"margin-left:-16px;margin-right:-16px;padding-left:16px;padding-right:16px;border:none!important;cursor:default;&:hover{background-color:rgba(0, 0, 0, 0.1);.mm_p-list_item_more_action{display:block!important;}}"}),listItemContent:j({name:"14rdf5a",styles:"display:flex;justify-content:space-between;align-items:center;width:100%;a{cursor:default!important;}"}),moreAction:j({name:"eivff4",styles:"display:none"})},Qh=({visible:e,module:t,onClose:n})=>{const r=us(t).with(ot.Page,()=>"页面").with(ot.Entity,()=>"数据模型").otherwise(()=>"");m.useEffect(()=>{a("")},[t]);const[o,a]=m.useState(""),i=m.useRef(null),[s,c]=m.useState(!1);return m.useEffect(()=>{e&&c(!0)},[e]),f("div",{className:uo.drawerWrapper,children:f(Eu,{zIndex:8,title:z("div",{children:[z("div",{className:uo.drawerTitleWrapper,children:[f("span",{children:r}),f("span",{ref:i})]}),f(Ct,{onChange:l=>a(l.target.value),value:o,allowClear:!0,placeholder:"搜索"})]}),headerStyle:{padding:"16px"},bodyStyle:{padding:"16px"},className:uo.drawer,placement:"left",width:220,maskClosable:!0,closable:!1,getContainer:!1,onClose:n,open:e,children:s&&z(ue,{children:[t===ot.Page&&f(Jh,{itemAddRef:i.current,searchVal:o}),t===ot.Entity&&f(Lh,{itemAddRef:i.current,searchVal:o})]})})})},uo={drawerWrapper:j({name:"1i3648n",styles:"position:absolute;top:0;right:0;bottom:0;left:0"}),drawerTitleWrapper:j({name:"1rfcp9j",styles:"display:flex;justify-content:space-between;align-items:center;padding-bottom:16px"}),drawer:j({name:"a4hmbt",styles:"position:absolute"})},ep=()=>z(_t.Header,{className:fo.header,children:[f("div",{className:fo.headerLogoWrapper,children:f("img",{src:"/modou.svg",alt:""})}),z("div",{className:fo.headerRight,children:[f(Re,{type:"link",href:"https://runtime.modou.ink",target:"_blank",children:"预览"}),f(ds,{src:"https://api.multiavatar.com/modou.png"})]})]}),fo={header:j({name:"wqgz8v",styles:"height:48px!important;line-height:48px!important;padding:0!important;z-index:10!important;background-color:white!important;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;display:flex;justify-content:space-between;align-items:center"}),headerLogoWrapper:j({name:"fbvhi9",styles:"width:60px;display:flex;align-items:center;justify-content:center;img{height:32px;}"}),headerRight:j({name:"1syo44g",styles:"padding-right:16px;display:flex;justify-content:flex-end;align-items:center"})},tp=()=>{const e=Wt(),t=Rt(),n=Ce(Oe.appAtom),r=Ee.isEmpty(n),o=Ee.isEmpty(n.pages);return m.useEffect(()=>{var a,i;r||(o?Ee.isEmpty(n.entities)||t(sn(Le.Entity,{...e,entityId:(i=Ee.head(n.entities))==null?void 0:i.id}),{replace:!0}):t(sn(Le.PAGE,{...e,pageId:(a=Ee.head(n.pages))==null?void 0:a.id}),{replace:!0}))},[n.entities,n.pages,r,o,t,e]),f("div",{className:np.wrapper,children:f(Rr,{size:"large"})})},np={wrapper:j({name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"})},rp=[{title:"页面",icon:f(Cu,{}),key:ot.Page},{title:"数据模型",icon:f(of,{}),key:ot.Entity}],op=()=>{const e=Wt(),[t,n]=m.useState(""),r=Rt(),{pathname:o}=mn(),a=Bt(Le.PAGE,o),i=Bt(Le.Entity,o)??Bt(Le.Entities,o),s=m.useCallback(()=>{n(a?ot.Page:i?ot.Entity:"")},[i,a]);fs(s);const[c,l]=m.useState(!1),u=({key:d})=>{switch(d){case ot.Page:d===t?l(p=>!p):(n(d),l(!0));break;case ot.Entity:l(!1),n(d),r(sn(Le.Entities,{appId:e.appId}));break}};return Bt(Le.APP,o)?f(tp,{}):z(_t,{className:er.layout,children:[f(ep,{}),z(_t,{children:[f(_t.Sider,{className:er.sider,theme:"light",collapsedWidth:60,width:60,collapsible:!0,collapsed:!c,children:f($u,{className:er.menu,style:{width:"60px"},mode:"inline",selectedKeys:[t],onClick:u,items:rp})}),z(_t.Content,{className:er.layoutContent,children:[f(Qh,{onClose:()=>{l(!1),s()},module:t,visible:c}),f(Ys,{})]})]})]})},er={layout:j({name:"13udsys",styles:"height:100%"}),menu:j({name:"13udsys",styles:"height:100%"}),layoutContent:j({name:"bjn8wh",styles:"position:relative"}),sider:j({name:"1fa3ne3",styles:"z-index:9!important;position:relative!important;padding:0!important;font-size:16px!important;.ant-layout-sider-trigger{display:none;}.ant-menu-item{padding-left:16px!important;padding-inline:16px;border:1px solid transparent!important;&::after{display:none!important;}}.ant-menu-item-icon{font-size:16px!important;}"})},ho={header:j({name:"104h8a1",styles:"background-color:white!important;z-index:50;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.1) 0 4px 6px -1px,rgba(0, 0, 0, 0.1) 0px 2px 4px -2px;padding:0!important;height:48px!important"}),logoWrapper:j({name:"1unpx99",styles:"height:100%;width:60px;display:flex;justify-content:center;align-items:center"}),logo:j({name:"s0vnfv",styles:"height:32px"})},ip=()=>f(_t.Header,{className:ho.header,children:f("div",{className:ho.logoWrapper,children:f("img",{src:"/modou.svg",className:ho.logo,alt:""})})}),po={content:j({name:"miqc5w",styles:"background-color:white;width:100%"}),cardWrapper:j({name:"xxnt60",styles:"display:flex;justify-content:center;padding:8px"}),card:j({name:"16185oo",styles:"width:100%;margin:4px;box-shadow:rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0) 0 0 0 0,rgba(0, 0, 0, 0.25) 0 25px 50px -12px"})},ap=()=>{const e=Rt();return f(_t.Content,{className:po.content,children:f(jn,{gutter:[0,0],children:Array(13).fill(1).map((t,n)=>f(on,{className:po.cardWrapper,xs:{span:24},sm:{span:12},md:{span:8},lg:{span:6},xl:{span:4},xxl:{span:4},span:4,children:f(an,{onClick:()=>e("/app/appId"),className:po.card,actions:[f(_u,{},"setting"),f(Nu,{},"edit"),f(Mu,{},"ellipsis")],children:f(an.Meta,{avatar:f(ds,{shape:"square",src:`https://api.multiavatar.com/modou_app_logo_${n}.png`}),title:"APP NAME",description:"我是 APP 描述"})})},n))})})},la=()=>z(_t,{className:j({name:"1d3w5wq",styles:"width:100%"}),children:[f(ip,{}),f(ap,{})]}),Js=()=>{const e=xt(Oe.entityByIdSelector),[t,{setFalse:n,setTrue:r}]=Ah(!1),[o]=ke.useForm();return{setTrue:r,setFalse:n,onSubmitEntity:i=>{e(Qe(s=>{if(Reflect.has(s,i.id))s[i.id]={...s[i.id],...i};else{const c=cs.generateDefaultEntity(i),l=Math.max(...Object.values(s).map(u=>u.position.x));s[c.id]={...c,position:{x:l+400,y:100}}}})),n()},form:o,open:t}};var sp=function(t){return typeof t=="function"},lp=!1;const cp=lp;function up(e){cp&&(sp(e)||console.error("useMemoizedFn expected parameter is a function, got "+typeof e));var t=m.useRef(e);t.current=m.useMemo(function(){return e},[e]);var n=m.useRef();return n.current||(n.current=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return t.current.apply(this,r)}),n.current}var dp=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,a=[],i;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(s){i={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a},fp=function(){var t=dp(m.useState({}),2),n=t[1];return m.useCallback(function(){return n({})},[])};const hp=fp;var dr={},pp=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Qs="%[a-f0-9]{2}",ca=new RegExp(Qs,"gi"),ua=new RegExp("("+Qs+")+","gi");function Fo(e,t){try{return decodeURIComponent(e.join(""))}catch{}if(e.length===1)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],Fo(n),Fo(r))}function gp(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(ca),n=1;n<t.length;n++)e=Fo(t,n).join(""),t=e.match(ca);return e}}function mp(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=ua.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch{var r=gp(n[0]);r!==n[0]&&(t[n[0]]=r)}n=ua.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var i=o[a];e=e.replace(new RegExp(i,"g"),t[i])}return e}var yp=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return mp(e)}},vp=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const n=e.indexOf(t);return n===-1?[e]:[e.slice(0,n),e.slice(n+t.length)]},xp=function(e,t){for(var n={},r=Object.keys(e),o=Array.isArray(t),a=0;a<r.length;a++){var i=r[a],s=e[i];(o?t.indexOf(i)!==-1:t(i,s,e))&&(n[i]=s)}return n};(function(e){const t=pp,n=yp,r=vp,o=xp,a=g=>g==null;function i(g){switch(g.arrayFormat){case"index":return x=>(S,y)=>{const C=S.length;return y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?S:y===null?[...S,[l(x,g),"[",C,"]"].join("")]:[...S,[l(x,g),"[",l(C,g),"]=",l(y,g)].join("")]};case"bracket":return x=>(S,y)=>y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?S:y===null?[...S,[l(x,g),"[]"].join("")]:[...S,[l(x,g),"[]=",l(y,g)].join("")];case"comma":case"separator":return x=>(S,y)=>y==null||y.length===0?S:S.length===0?[[l(x,g),"=",l(y,g)].join("")]:[[S,l(y,g)].join(g.arrayFormatSeparator)];default:return x=>(S,y)=>y===void 0||g.skipNull&&y===null||g.skipEmptyString&&y===""?S:y===null?[...S,l(x,g)]:[...S,[l(x,g),"=",l(y,g)].join("")]}}function s(g){let x;switch(g.arrayFormat){case"index":return(S,y,C)=>{if(x=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!x){C[S]=y;return}C[S]===void 0&&(C[S]={}),C[S][x[1]]=y};case"bracket":return(S,y,C)=>{if(x=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!x){C[S]=y;return}if(C[S]===void 0){C[S]=[y];return}C[S]=[].concat(C[S],y)};case"comma":case"separator":return(S,y,C)=>{const $=typeof y=="string"&&y.includes(g.arrayFormatSeparator),_=typeof y=="string"&&!$&&u(y,g).includes(g.arrayFormatSeparator);y=_?u(y,g):y;const I=$||_?y.split(g.arrayFormatSeparator).map(O=>u(O,g)):y===null?y:u(y,g);C[S]=I};default:return(S,y,C)=>{if(C[S]===void 0){C[S]=y;return}C[S]=[].concat(C[S],y)}}}function c(g){if(typeof g!="string"||g.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function l(g,x){return x.encode?x.strict?t(g):encodeURIComponent(g):g}function u(g,x){return x.decode?n(g):g}function h(g){return Array.isArray(g)?g.sort():typeof g=="object"?h(Object.keys(g)).sort((x,S)=>Number(x)-Number(S)).map(x=>g[x]):g}function d(g){const x=g.indexOf("#");return x!==-1&&(g=g.slice(0,x)),g}function p(g){let x="";const S=g.indexOf("#");return S!==-1&&(x=g.slice(S)),x}function w(g){g=d(g);const x=g.indexOf("?");return x===-1?"":g.slice(x+1)}function v(g,x){return x.parseNumbers&&!Number.isNaN(Number(g))&&typeof g=="string"&&g.trim()!==""?g=Number(g):x.parseBooleans&&g!==null&&(g.toLowerCase()==="true"||g.toLowerCase()==="false")&&(g=g.toLowerCase()==="true"),g}function E(g,x){x=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},x),c(x.arrayFormatSeparator);const S=s(x),y=Object.create(null);if(typeof g!="string"||(g=g.trim().replace(/^[?#&]/,""),!g))return y;for(const C of g.split("&")){if(C==="")continue;let[$,_]=r(x.decode?C.replace(/\+/g," "):C,"=");_=_===void 0?null:["comma","separator"].includes(x.arrayFormat)?_:u(_,x),S(u($,x),_,y)}for(const C of Object.keys(y)){const $=y[C];if(typeof $=="object"&&$!==null)for(const _ of Object.keys($))$[_]=v($[_],x);else y[C]=v($,x)}return x.sort===!1?y:(x.sort===!0?Object.keys(y).sort():Object.keys(y).sort(x.sort)).reduce((C,$)=>{const _=y[$];return Boolean(_)&&typeof _=="object"&&!Array.isArray(_)?C[$]=h(_):C[$]=_,C},Object.create(null))}e.extract=w,e.parse=E,e.stringify=(g,x)=>{if(!g)return"";x=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},x),c(x.arrayFormatSeparator);const S=_=>x.skipNull&&a(g[_])||x.skipEmptyString&&g[_]==="",y=i(x),C={};for(const _ of Object.keys(g))S(_)||(C[_]=g[_]);const $=Object.keys(C);return x.sort!==!1&&$.sort(x.sort),$.map(_=>{const I=g[_];return I===void 0?"":I===null?l(_,x):Array.isArray(I)?I.reduce(y(_),[]).join("&"):l(_,x)+"="+l(I,x)}).filter(_=>_.length>0).join("&")},e.parseUrl=(g,x)=>{x=Object.assign({decode:!0},x);const[S,y]=r(g,"#");return Object.assign({url:S.split("?")[0]||"",query:E(w(g),x)},x&&x.parseFragmentIdentifier&&y?{fragmentIdentifier:u(y,x)}:{})},e.stringifyUrl=(g,x)=>{x=Object.assign({encode:!0,strict:!0},x);const S=d(g.url).split("?")[0]||"",y=e.extract(g.url),C=e.parse(y,{sort:!1}),$=Object.assign(C,g.query);let _=e.stringify($,x);_&&(_=`?${_}`);let I=p(g.url);return g.fragmentIdentifier&&(I=`#${l(g.fragmentIdentifier,x)}`),`${S}${_}${I}`},e.pick=(g,x,S)=>{S=Object.assign({parseFragmentIdentifier:!0},S);const{url:y,query:C,fragmentIdentifier:$}=e.parseUrl(g,S);return e.stringifyUrl({url:y,query:o(C,x),fragmentIdentifier:$},S)},e.exclude=(g,x,S)=>{const y=Array.isArray(x)?C=>!x.includes(C):(C,$)=>!x(C,$);return e.pick(g,y,S)}})(dr);var qe=globalThis&&globalThis.__assign||function(){return qe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qe.apply(this,arguments)},bn=Mh,bp={parseNumbers:!1,parseBooleans:!1},wp={skipNull:!1,skipEmptyString:!1},el=function(t,n){var r,o,a=n||{},i=a.navigateMode,s=i===void 0?"push":i,c=a.parseOptions,l=a.stringifyOptions,u=qe(qe({},bp),c),h=qe(qe({},wp),l),d=bn.useLocation(),p=(r=bn.useHistory)===null||r===void 0?void 0:r.call(bn),w=(o=bn.useNavigate)===null||o===void 0?void 0:o.call(bn),v=hp(),E=m.useRef(typeof t=="function"?t():t||{}),g=m.useMemo(function(){return dr.parse(d.search,u)},[d.search]),x=m.useMemo(function(){return qe(qe({},E.current),g)},[g]),S=function(C){var $=typeof C=="function"?C(x):C;v(),p&&p[s]({hash:d.hash,search:dr.stringify(qe(qe({},g),$),h)||"?"}),w&&w({hash:d.hash,search:dr.stringify(qe(qe({},g),$),h)||"?"},{replace:s==="replace"})};return[x,up(S)]};function Sp(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}const qt=Sp();function ze(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=ze(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const da=e=>{let t;const n=new Set,r=(c,l)=>{const u=typeof c=="function"?c(t):c;if(u!==t){const h=t;t=l??typeof u!="object"?u:Object.assign({},t,u),n.forEach(d=>d(t,h))}},o=()=>t,s={setState:r,getState:o,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>n.clear()};return t=e(r,o,s),s},Ep=e=>e?da(e):da;var Ho={},Cp={get exports(){return Ho},set exports(e){Ho=e}},tl={},jo={},$p={get exports(){return jo},set exports(e){jo=e}},nl={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ln=m;function _p(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Np=typeof Object.is=="function"?Object.is:_p,Mp=ln.useState,Pp=ln.useEffect,Ip=ln.useLayoutEffect,Tp=ln.useDebugValue;function Rp(e,t){var n=t(),r=Mp({inst:{value:n,getSnapshot:t}}),o=r[0].inst,a=r[1];return Ip(function(){o.value=n,o.getSnapshot=t,go(o)&&a({inst:o})},[e,n,t]),Pp(function(){return go(o)&&a({inst:o}),e(function(){go(o)&&a({inst:o})})},[e]),Tp(n),n}function go(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Np(e,n)}catch{return!0}}function Ap(e,t){return t()}var Dp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ap:Rp;nl.useSyncExternalStore=ln.useSyncExternalStore!==void 0?ln.useSyncExternalStore:Dp;(function(e){e.exports=nl})($p);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hr=m,Op=jo;function zp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kp=typeof Object.is=="function"?Object.is:zp,Bp=Op.useSyncExternalStore,Lp=Hr.useRef,Fp=Hr.useEffect,Hp=Hr.useMemo,jp=Hr.useDebugValue;tl.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var a=Lp(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=Hp(function(){function c(p){if(!l){if(l=!0,u=p,p=r(p),o!==void 0&&i.hasValue){var w=i.value;if(o(w,p))return h=w}return h=p}if(w=h,kp(u,p))return w;var v=r(p);return o!==void 0&&o(w,v)?w:(u=p,h=v)}var l=!1,u,h,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,o]);var s=Bp(e,a[0],a[1]);return Fp(function(){i.hasValue=!0,i.value=s},[s]),jp(s),s};(function(e){e.exports=tl})(Cp);const Wp=Pu(Ho),{useSyncExternalStoreWithSelector:Up}=Wp;function Vp(e,t=e.getState,n){const r=Up(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return m.useDebugValue(r),r}function He(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}var Gp={value:()=>{}};function jr(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new fr(n)}function fr(e){this._=e}function Xp(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}fr.prototype=jr.prototype={constructor:fr,on:function(e,t){var n=this._,r=Xp(e+"",n),o,a=-1,i=r.length;if(arguments.length<2){for(;++a<i;)if((o=(e=r[a]).type)&&(o=Yp(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=r[a]).type)n[o]=fa(n[o],e.name,t);else if(t==null)for(o in n)n[o]=fa(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fr(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,a;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,o=a.length;r<o;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};function Yp(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function fa(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=Gp,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Wo="http://www.w3.org/1999/xhtml";const ha={svg:"http://www.w3.org/2000/svg",xhtml:Wo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Wr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ha.hasOwnProperty(t)?{space:ha[t],local:e}:e}function Kp(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Wo&&t.documentElement.namespaceURI===Wo?t.createElement(e):t.createElementNS(n,e)}}function qp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rl(e){var t=Wr(e);return(t.local?qp:Kp)(t)}function Zp(){}function bi(e){return e==null?Zp:function(){return this.querySelector(e)}}function Jp(e){typeof e!="function"&&(e=bi(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=new Array(i),c,l,u=0;u<i;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new Xe(r,this._parents)}function Qp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function eg(){return[]}function ol(e){return e==null?eg:function(){return this.querySelectorAll(e)}}function tg(e){return function(){return Qp(e.apply(this,arguments))}}function ng(e){typeof e=="function"?e=tg(e):e=ol(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i=t[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&(r.push(e.call(c,c.__data__,l,i)),o.push(c));return new Xe(r,o)}function il(e){return function(){return this.matches(e)}}function al(e){return function(t){return t.matches(e)}}var rg=Array.prototype.find;function og(e){return function(){return rg.call(this.children,e)}}function ig(){return this.firstElementChild}function ag(e){return this.select(e==null?ig:og(typeof e=="function"?e:al(e)))}var sg=Array.prototype.filter;function lg(){return Array.from(this.children)}function cg(e){return function(){return sg.call(this.children,e)}}function ug(e){return this.selectAll(e==null?lg:cg(typeof e=="function"?e:al(e)))}function dg(e){typeof e!="function"&&(e=il(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new Xe(r,this._parents)}function sl(e){return new Array(e.length)}function fg(){return new Xe(this._enter||this._groups.map(sl),this._parents)}function br(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}br.prototype={constructor:br,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function hg(e){return function(){return e}}function pg(e,t,n,r,o,a){for(var i=0,s,c=t.length,l=a.length;i<l;++i)(s=t[i])?(s.__data__=a[i],r[i]=s):n[i]=new br(e,a[i]);for(;i<c;++i)(s=t[i])&&(o[i]=s)}function gg(e,t,n,r,o,a,i){var s,c,l=new Map,u=t.length,h=a.length,d=new Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(d[s]=p=i.call(c,c.__data__,s,t)+"",l.has(p)?o[s]=c:l.set(p,c));for(s=0;s<h;++s)p=i.call(e,a[s],s,a)+"",(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new br(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(d[s])===c&&(o[s]=c)}function mg(e){return e.__data__}function yg(e,t){if(!arguments.length)return Array.from(this,mg);var n=t?gg:pg,r=this._parents,o=this._groups;typeof e!="function"&&(e=hg(e));for(var a=o.length,i=new Array(a),s=new Array(a),c=new Array(a),l=0;l<a;++l){var u=r[l],h=o[l],d=h.length,p=vg(e.call(u,u&&u.__data__,l,r)),w=p.length,v=s[l]=new Array(w),E=i[l]=new Array(w),g=c[l]=new Array(d);n(u,h,v,E,g,p,t);for(var x=0,S=0,y,C;x<w;++x)if(y=v[x]){for(x>=S&&(S=x+1);!(C=E[S])&&++S<w;);y._next=C||null}}return i=new Xe(i,r),i._enter=s,i._exit=c,i}function vg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xg(){return new Xe(this._exit||this._groups.map(sl),this._parents)}function bg(e,t,n){var r=this.enter(),o=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),r&&o?r.merge(o).order():o}function wg(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),s=new Array(o),c=0;c<i;++c)for(var l=n[c],u=r[c],h=l.length,d=s[c]=new Array(h),p,w=0;w<h;++w)(p=l[w]||u[w])&&(d[w]=p);for(;c<o;++c)s[c]=n[c];return new Xe(s,this._parents)}function Sg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,a=r[o],i;--o>=0;)(i=r[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Eg(e){e||(e=Cg);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i=n[a],s=i.length,c=o[a]=new Array(s),l,u=0;u<s;++u)(l=i[u])&&(c[u]=l);c.sort(t)}return new Xe(o,this._parents).order()}function Cg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $g(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function _g(){return Array.from(this)}function Ng(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null}function Mg(){let e=0;for(const t of this)++e;return e}function Pg(){return!this.node()}function Ig(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],a=0,i=o.length,s;a<i;++a)(s=o[a])&&e.call(s,s.__data__,a,o);return this}function Tg(e){return function(){this.removeAttribute(e)}}function Rg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ag(e,t){return function(){this.setAttribute(e,t)}}function Dg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Og(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function zg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function kg(e,t){var n=Wr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Rg:Tg:typeof t=="function"?n.local?zg:Og:n.local?Dg:Ag)(n,t))}function ll(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Bg(e){return function(){this.style.removeProperty(e)}}function Lg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fg(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Hg(e,t,n){return arguments.length>1?this.each((t==null?Bg:typeof t=="function"?Fg:Lg)(e,t,n??"")):cn(this.node(),e)}function cn(e,t){return e.style.getPropertyValue(t)||ll(e).getComputedStyle(e,null).getPropertyValue(t)}function jg(e){return function(){delete this[e]}}function Wg(e,t){return function(){this[e]=t}}function Ug(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Vg(e,t){return arguments.length>1?this.each((t==null?jg:typeof t=="function"?Ug:Wg)(e,t)):this.node()[e]}function cl(e){return e.trim().split(/^|\s+/)}function wi(e){return e.classList||new ul(e)}function ul(e){this._node=e,this._names=cl(e.getAttribute("class")||"")}ul.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function dl(e,t){for(var n=wi(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function fl(e,t){for(var n=wi(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function Gg(e){return function(){dl(this,e)}}function Xg(e){return function(){fl(this,e)}}function Yg(e,t){return function(){(t.apply(this,arguments)?dl:fl)(this,e)}}function Kg(e,t){var n=cl(e+"");if(arguments.length<2){for(var r=wi(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?Yg:t?Gg:Xg)(n,t))}function qg(){this.textContent=""}function Zg(e){return function(){this.textContent=e}}function Jg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Qg(e){return arguments.length?this.each(e==null?qg:(typeof e=="function"?Jg:Zg)(e)):this.node().textContent}function em(){this.innerHTML=""}function tm(e){return function(){this.innerHTML=e}}function nm(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function rm(e){return arguments.length?this.each(e==null?em:(typeof e=="function"?nm:tm)(e)):this.node().innerHTML}function om(){this.nextSibling&&this.parentNode.appendChild(this)}function im(){return this.each(om)}function am(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sm(){return this.each(am)}function lm(e){var t=typeof e=="function"?e:rl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cm(){return null}function um(e,t){var n=typeof e=="function"?e:rl(e),r=t==null?cm:typeof t=="function"?t:bi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dm(){var e=this.parentNode;e&&e.removeChild(this)}function fm(){return this.each(dm)}function hm(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pm(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gm(e){return this.select(e?pm:hm)}function mm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ym(e){return function(t){e.call(this,t,this.__data__)}}function vm(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function xm(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function bm(e,t,n){return function(){var r=this.__on,o,a=ym(t);if(r){for(var i=0,s=r.length;i<s;++i)if((o=r[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(o):this.__on=[o]}}function wm(e,t,n){var r=vm(e+""),o,a=r.length,i;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(o=0,u=s[c];o<a;++o)if((i=r[o]).type===u.type&&i.name===u.name)return u.value}return}for(s=t?bm:xm,o=0;o<a;++o)this.each(s(r[o],t,n));return this}function hl(e,t,n){var r=ll(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Sm(e,t){return function(){return hl(this,e,t)}}function Em(e,t){return function(){return hl(this,e,t.apply(this,arguments))}}function Cm(e,t){return this.each((typeof t=="function"?Em:Sm)(e,t))}function*$m(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length,i;o<a;++o)(i=r[o])&&(yield i)}var pl=[null];function Xe(e,t){this._groups=e,this._parents=t}function Yn(){return new Xe([[document.documentElement]],pl)}function _m(){return this}Xe.prototype=Yn.prototype={constructor:Xe,select:Jp,selectAll:ng,selectChild:ag,selectChildren:ug,filter:dg,data:yg,enter:fg,exit:xg,join:bg,merge:wg,selection:_m,order:Sg,sort:Eg,call:$g,nodes:_g,node:Ng,size:Mg,empty:Pg,each:Ig,attr:kg,style:Hg,property:Vg,classed:Kg,text:Qg,html:rm,raise:im,lower:sm,append:lm,insert:um,remove:fm,clone:gm,datum:mm,on:wm,dispatch:Cm,[Symbol.iterator]:$m};function Ze(e){return typeof e=="string"?new Xe([[document.querySelector(e)]],[document.documentElement]):new Xe([[e]],pl)}function Nm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function nt(e,t){if(e=Nm(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Mm={passive:!1},zn={capture:!0,passive:!1};function mo(e){e.stopImmediatePropagation()}function en(e){e.preventDefault(),e.stopImmediatePropagation()}function gl(e){var t=e.document.documentElement,n=Ze(e).on("dragstart.drag",en,zn);"onselectstart"in t?n.on("selectstart.drag",en,zn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ml(e,t){var n=e.document.documentElement,r=Ze(e).on("dragstart.drag",null);t&&(r.on("click.drag",en,zn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const tr=e=>()=>e;function Uo(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:a,x:i,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}Uo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Pm(e){return!e.ctrlKey&&!e.button}function Im(){return this.parentNode}function Tm(e,t){return t??{x:e.x,y:e.y}}function Rm(){return navigator.maxTouchPoints||"ontouchstart"in this}function Am(){var e=Pm,t=Im,n=Tm,r=Rm,o={},a=jr("start","drag","end"),i=0,s,c,l,u,h=0;function d(y){y.on("mousedown.drag",p).filter(r).on("touchstart.drag",E).on("touchmove.drag",g,Mm).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(y,C){if(!(u||!e.call(this,y,C))){var $=S(this,t.call(this,y,C),y,C,"mouse");$&&(Ze(y.view).on("mousemove.drag",w,zn).on("mouseup.drag",v,zn),gl(y.view),mo(y),l=!1,s=y.clientX,c=y.clientY,$("start",y))}}function w(y){if(en(y),!l){var C=y.clientX-s,$=y.clientY-c;l=C*C+$*$>h}o.mouse("drag",y)}function v(y){Ze(y.view).on("mousemove.drag mouseup.drag",null),ml(y.view,l),en(y),o.mouse("end",y)}function E(y,C){if(e.call(this,y,C)){var $=y.changedTouches,_=t.call(this,y,C),I=$.length,O,D;for(O=0;O<I;++O)(D=S(this,_,y,C,$[O].identifier,$[O]))&&(mo(y),D("start",y,$[O]))}}function g(y){var C=y.changedTouches,$=C.length,_,I;for(_=0;_<$;++_)(I=o[C[_].identifier])&&(en(y),I("drag",y,C[_]))}function x(y){var C=y.changedTouches,$=C.length,_,I;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),_=0;_<$;++_)(I=o[C[_].identifier])&&(mo(y),I("end",y,C[_]))}function S(y,C,$,_,I,O){var D=a.copy(),B=nt(O||$,C),Z,X,b;if((b=n.call(y,new Uo("beforestart",{sourceEvent:$,target:d,identifier:I,active:i,x:B[0],y:B[1],dx:0,dy:0,dispatch:D}),_))!=null)return Z=b.x-B[0]||0,X=b.y-B[1]||0,function M(N,A,T){var F=B,L;switch(N){case"start":o[I]=M,L=i++;break;case"end":delete o[I],--i;case"drag":B=nt(T||A,C),L=i;break}D.call(N,y,new Uo(N,{sourceEvent:A,subject:b,target:d,identifier:I,active:L,x:B[0]+Z,y:B[1]+X,dx:B[0]-F[0],dy:B[1]-F[1],dispatch:D}),_)}}return d.filter=function(y){return arguments.length?(e=typeof y=="function"?y:tr(!!y),d):e},d.container=function(y){return arguments.length?(t=typeof y=="function"?y:tr(y),d):t},d.subject=function(y){return arguments.length?(n=typeof y=="function"?y:tr(y),d):n},d.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:tr(!!y),d):r},d.on=function(){var y=a.on.apply(a,arguments);return y===a?d:y},d.clickDistance=function(y){return arguments.length?(h=(y=+y)*y,d):Math.sqrt(h)},d}function Si(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Kn(){}var kn=.7,wr=1/kn,tn="\\s*([+-]?\\d+)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dm=/^#([0-9a-f]{3,8})$/,Om=new RegExp(`^rgb\\(${tn},${tn},${tn}\\)$`),zm=new RegExp(`^rgb\\(${lt},${lt},${lt}\\)$`),km=new RegExp(`^rgba\\(${tn},${tn},${tn},${Bn}\\)$`),Bm=new RegExp(`^rgba\\(${lt},${lt},${lt},${Bn}\\)$`),Lm=new RegExp(`^hsl\\(${Bn},${lt},${lt}\\)$`),Fm=new RegExp(`^hsla\\(${Bn},${lt},${lt},${Bn}\\)$`),pa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Si(Kn,Ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ga,formatHex:ga,formatHex8:Hm,formatHsl:jm,formatRgb:ma,toString:ma});function ga(){return this.rgb().formatHex()}function Hm(){return this.rgb().formatHex8()}function jm(){return vl(this).formatHsl()}function ma(){return this.rgb().formatRgb()}function Ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Dm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ya(t):n===3?new Fe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Om.exec(e))?new Fe(t[1],t[2],t[3],1):(t=zm.exec(e))?new Fe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=km.exec(e))?nr(t[1],t[2],t[3],t[4]):(t=Bm.exec(e))?nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lm.exec(e))?ba(t[1],t[2]/100,t[3]/100,1):(t=Fm.exec(e))?ba(t[1],t[2]/100,t[3]/100,t[4]):pa.hasOwnProperty(e)?ya(pa[e]):e==="transparent"?new Fe(NaN,NaN,NaN,0):null}function ya(e){return new Fe(e>>16&255,e>>8&255,e&255,1)}function nr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fe(e,t,n,r)}function Wm(e){return e instanceof Kn||(e=Ln(e)),e?(e=e.rgb(),new Fe(e.r,e.g,e.b,e.opacity)):new Fe}function Vo(e,t,n,r){return arguments.length===1?Wm(e):new Fe(e,t,n,r??1)}function Fe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Si(Fe,Vo,yl(Kn,{brighter(e){return e=e==null?wr:Math.pow(wr,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kn:Math.pow(kn,e),new Fe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fe(Ht(this.r),Ht(this.g),Ht(this.b),Sr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:va,formatHex:va,formatHex8:Um,formatRgb:xa,toString:xa}));function va(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}`}function Um(){return`#${Ft(this.r)}${Ft(this.g)}${Ft(this.b)}${Ft((isNaN(this.opacity)?1:this.opacity)*255)}`}function xa(){const e=Sr(this.opacity);return`${e===1?"rgb(":"rgba("}${Ht(this.r)}, ${Ht(this.g)}, ${Ht(this.b)}${e===1?")":`, ${e})`}`}function Sr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ht(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ft(e){return e=Ht(e),(e<16?"0":"")+e.toString(16)}function ba(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new rt(e,t,n,r)}function vl(e){if(e instanceof rt)return new rt(e.h,e.s,e.l,e.opacity);if(e instanceof Kn||(e=Ln(e)),!e)return new rt;if(e instanceof rt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,s=a-o,c=(a+o)/2;return s?(t===a?i=(n-r)/s+(n<r)*6:n===a?i=(r-t)/s+2:i=(t-n)/s+4,s/=c<.5?a+o:2-a-o,i*=60):s=c>0&&c<1?0:i,new rt(i,s,c,e.opacity)}function Vm(e,t,n,r){return arguments.length===1?vl(e):new rt(e,t,n,r??1)}function rt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Si(rt,Vm,yl(Kn,{brighter(e){return e=e==null?wr:Math.pow(wr,e),new rt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kn:Math.pow(kn,e),new rt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Fe(yo(e>=240?e-240:e+120,o,r),yo(e,o,r),yo(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new rt(wa(this.h),rr(this.s),rr(this.l),Sr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sr(this.opacity);return`${e===1?"hsl(":"hsla("}${wa(this.h)}, ${rr(this.s)*100}%, ${rr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wa(e){return e=(e||0)%360,e<0?e+360:e}function rr(e){return Math.max(0,Math.min(1,e||0))}function yo(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const xl=e=>()=>e;function Gm(e,t){return function(n){return e+n*t}}function Xm(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ym(e){return(e=+e)==1?bl:function(t,n){return n-t?Xm(t,n,e):xl(isNaN(t)?n:t)}}function bl(e,t){var n=t-e;return n?Gm(e,n):xl(isNaN(e)?t:e)}const Sa=function e(t){var n=Ym(t);function r(o,a){var i=n((o=Vo(o)).r,(a=Vo(a)).r),s=n(o.g,a.g),c=n(o.b,a.b),l=bl(o.opacity,a.opacity);return function(u){return o.r=i(u),o.g=s(u),o.b=c(u),o.opacity=l(u),o+""}}return r.gamma=e,r}(1);function wt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Go=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vo=new RegExp(Go.source,"g");function Km(e){return function(){return e}}function qm(e){return function(t){return e(t)+""}}function Zm(e,t){var n=Go.lastIndex=vo.lastIndex=0,r,o,a,i=-1,s=[],c=[];for(e=e+"",t=t+"";(r=Go.exec(e))&&(o=vo.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),s[i]?s[i]+=a:s[++i]=a),(r=r[0])===(o=o[0])?s[i]?s[i]+=o:s[++i]=o:(s[++i]=null,c.push({i,x:wt(r,o)})),n=vo.lastIndex;return n<t.length&&(a=t.slice(n),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?qm(c[0].x):Km(t):(t=c.length,function(l){for(var u=0,h;u<t;++u)s[(h=c[u]).i]=h.x(l);return s.join("")})}var Ea=180/Math.PI,Xo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wl(e,t,n,r,o,a){var i,s,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Ea,skewX:Math.atan(c)*Ea,scaleX:i,scaleY:s}}var or;function Jm(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Xo:wl(t.a,t.b,t.c,t.d,t.e,t.f)}function Qm(e){return e==null||(or||(or=document.createElementNS("http://www.w3.org/2000/svg","g")),or.setAttribute("transform",e),!(e=or.transform.baseVal.consolidate()))?Xo:(e=e.matrix,wl(e.a,e.b,e.c,e.d,e.e,e.f))}function Sl(e,t,n,r){function o(l){return l.length?l.pop()+" ":""}function a(l,u,h,d,p,w){if(l!==h||u!==d){var v=p.push("translate(",null,t,null,n);w.push({i:v-4,x:wt(l,h)},{i:v-2,x:wt(u,d)})}else(h||d)&&p.push("translate("+h+t+d+n)}function i(l,u,h,d){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),d.push({i:h.push(o(h)+"rotate(",null,r)-2,x:wt(l,u)})):u&&h.push(o(h)+"rotate("+u+r)}function s(l,u,h,d){l!==u?d.push({i:h.push(o(h)+"skewX(",null,r)-2,x:wt(l,u)}):u&&h.push(o(h)+"skewX("+u+r)}function c(l,u,h,d,p,w){if(l!==h||u!==d){var v=p.push(o(p)+"scale(",null,",",null,")");w.push({i:v-4,x:wt(l,h)},{i:v-2,x:wt(u,d)})}else(h!==1||d!==1)&&p.push(o(p)+"scale("+h+","+d+")")}return function(l,u){var h=[],d=[];return l=e(l),u=e(u),a(l.translateX,l.translateY,u.translateX,u.translateY,h,d),i(l.rotate,u.rotate,h,d),s(l.skewX,u.skewX,h,d),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,h,d),l=u=null,function(p){for(var w=-1,v=d.length,E;++w<v;)h[(E=d[w]).i]=E.x(p);return h.join("")}}}var ey=Sl(Jm,"px, ","px)","deg)"),ty=Sl(Qm,", ",")",")"),ny=1e-12;function Ca(e){return((e=Math.exp(e))+1/e)/2}function ry(e){return((e=Math.exp(e))-1/e)/2}function oy(e){return((e=Math.exp(2*e))-1)/(e+1)}const iy=function e(t,n,r){function o(a,i){var s=a[0],c=a[1],l=a[2],u=i[0],h=i[1],d=i[2],p=u-s,w=h-c,v=p*p+w*w,E,g;if(v<ny)g=Math.log(d/l)/t,E=function(_){return[s+_*p,c+_*w,l*Math.exp(t*_*g)]};else{var x=Math.sqrt(v),S=(d*d-l*l+r*v)/(2*l*n*x),y=(d*d-l*l-r*v)/(2*d*n*x),C=Math.log(Math.sqrt(S*S+1)-S),$=Math.log(Math.sqrt(y*y+1)-y);g=($-C)/t,E=function(_){var I=_*g,O=Ca(C),D=l/(n*x)*(O*oy(t*I+C)-ry(C));return[s+D*p,c+D*w,l*O/Ca(t*I+C)]}}return E.duration=g*1e3*t/Math.SQRT2,E}return o.rho=function(a){var i=Math.max(.001,+a),s=i*i,c=s*s;return e(i,s,c)},o}(Math.SQRT2,2,4);var un=0,Nn=0,wn=0,El=1e3,Er,Mn,Cr=0,jt=0,Ur=0,Fn=typeof performance=="object"&&performance.now?performance:Date,Cl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ei(){return jt||(Cl(ay),jt=Fn.now()+Ur)}function ay(){jt=0}function $r(){this._call=this._time=this._next=null}$r.prototype=$l.prototype={constructor:$r,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ei():+n)+(t==null?0:+t),!this._next&&Mn!==this&&(Mn?Mn._next=this:Er=this,Mn=this),this._call=e,this._time=n,Yo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yo())}};function $l(e,t,n){var r=new $r;return r.restart(e,t,n),r}function sy(){Ei(),++un;for(var e=Er,t;e;)(t=jt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--un}function $a(){jt=(Cr=Fn.now())+Ur,un=Nn=0;try{sy()}finally{un=0,cy(),jt=0}}function ly(){var e=Fn.now(),t=e-Cr;t>El&&(Ur-=t,Cr=e)}function cy(){for(var e,t=Er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Er=n);Mn=e,Yo(r)}function Yo(e){if(!un){Nn&&(Nn=clearTimeout(Nn));var t=e-jt;t>24?(e<1/0&&(Nn=setTimeout($a,e-Fn.now()-Ur)),wn&&(wn=clearInterval(wn))):(wn||(Cr=Fn.now(),wn=setInterval(ly,El)),un=1,Cl($a))}}function _a(e,t,n){var r=new $r;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var uy=jr("start","end","cancel","interrupt"),dy=[],_l=0,Na=1,Ko=2,hr=3,Ma=4,qo=5,pr=6;function Vr(e,t,n,r,o,a){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;fy(e,n,{name:t,index:r,group:o,on:uy,tween:dy,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:_l})}function Ci(e,t){var n=at(e,t);if(n.state>_l)throw new Error("too late; already scheduled");return n}function ft(e,t){var n=at(e,t);if(n.state>hr)throw new Error("too late; already running");return n}function at(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fy(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=$l(a,0,n.time);function a(l){n.state=Na,n.timer.restart(i,n.delay,n.time),n.delay<=l&&i(l-n.delay)}function i(l){var u,h,d,p;if(n.state!==Na)return c();for(u in r)if(p=r[u],p.name===n.name){if(p.state===hr)return _a(i);p.state===Ma?(p.state=pr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[u]):+u<t&&(p.state=pr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[u])}if(_a(function(){n.state===hr&&(n.state=Ma,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Ko,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ko){for(n.state=hr,o=new Array(d=n.tween.length),u=0,h=-1;u<d;++u)(p=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(o[++h]=p);o.length=h+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=qo,1),h=-1,d=o.length;++h<d;)o[h].call(e,u);n.state===qo&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=pr,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function gr(e,t){var n=e.__transition,r,o,a=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((r=n[i]).name!==t){a=!1;continue}o=r.state>Ko&&r.state<qo,r.state=pr,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[i]}a&&delete e.__transition}}function hy(e){return this.each(function(){gr(this,e)})}function py(e,t){var n,r;return function(){var o=ft(this,e),a=o.tween;if(a!==n){r=n=a;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){r=r.slice(),r.splice(i,1);break}}o.tween=r}}function gy(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var a=ft(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var s={name:t,value:n},c=0,l=o.length;c<l;++c)if(o[c].name===t){o[c]=s;break}c===l&&o.push(s)}a.tween=o}}function my(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=at(this.node(),n).tween,o=0,a=r.length,i;o<a;++o)if((i=r[o]).name===e)return i.value;return null}return this.each((t==null?py:gy)(n,e,t))}function $i(e,t,n){var r=e._id;return e.each(function(){var o=ft(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return at(o,r).value[t]}}function Nl(e,t){var n;return(typeof t=="number"?wt:t instanceof Ln?Sa:(n=Ln(t))?(t=n,Sa):Zm)(e,t)}function yy(e){return function(){this.removeAttribute(e)}}function vy(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xy(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}}function by(e,t,n){var r,o=n+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}function wy(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function Sy(e,t,n){var r,o,a;return function(){var i,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=s+"",i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s)))}}function Ey(e,t){var n=Wr(e),r=n==="transform"?ty:Nl;return this.attrTween(e,typeof t=="function"?(n.local?Sy:wy)(n,r,$i(this,"attr."+e,t)):t==null?(n.local?vy:yy)(n):(n.local?by:xy)(n,r,t))}function Cy(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $y(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function _y(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&$y(e,a)),n}return o._value=t,o}function Ny(e,t){var n,r;function o(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&Cy(e,a)),n}return o._value=t,o}function My(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Wr(e);return this.tween(n,(r.local?_y:Ny)(r,t))}function Py(e,t){return function(){Ci(this,e).delay=+t.apply(this,arguments)}}function Iy(e,t){return t=+t,function(){Ci(this,e).delay=t}}function Ty(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Py:Iy)(t,e)):at(this.node(),t).delay}function Ry(e,t){return function(){ft(this,e).duration=+t.apply(this,arguments)}}function Ay(e,t){return t=+t,function(){ft(this,e).duration=t}}function Dy(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ry:Ay)(t,e)):at(this.node(),t).duration}function Oy(e,t){if(typeof t!="function")throw new Error;return function(){ft(this,e).ease=t}}function zy(e){var t=this._id;return arguments.length?this.each(Oy(t,e)):at(this.node(),t).ease}function ky(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ft(this,e).ease=n}}function By(e){if(typeof e!="function")throw new Error;return this.each(ky(this._id,e))}function Ly(e){typeof e!="function"&&(e=il(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a=t[o],i=a.length,s=r[o]=[],c,l=0;l<i;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new vt(r,this._parents,this._name,this._id)}function Fy(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,h=i[s]=new Array(u),d,p=0;p<u;++p)(d=c[p]||l[p])&&(h[p]=d);for(;s<r;++s)i[s]=t[s];return new vt(i,this._parents,this._name,this._id)}function Hy(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function jy(e,t,n){var r,o,a=Hy(t)?Ci:ft;return function(){var i=a(this,e),s=i.on;s!==r&&(o=(r=s).copy()).on(t,n),i.on=o}}function Wy(e,t){var n=this._id;return arguments.length<2?at(this.node(),n).on.on(e):this.each(jy(n,e,t))}function Uy(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Vy(){return this.on("end.remove",Uy(this._id))}function Gy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=bi(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var s=r[i],c=s.length,l=a[i]=new Array(c),u,h,d=0;d<c;++d)(u=s[d])&&(h=e.call(u,u.__data__,d,s))&&("__data__"in u&&(h.__data__=u.__data__),l[d]=h,Vr(l[d],t,n,d,l,at(u,n)));return new vt(a,this._parents,t,n)}function Xy(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ol(e));for(var r=this._groups,o=r.length,a=[],i=[],s=0;s<o;++s)for(var c=r[s],l=c.length,u,h=0;h<l;++h)if(u=c[h]){for(var d=e.call(u,u.__data__,h,c),p,w=at(u,n),v=0,E=d.length;v<E;++v)(p=d[v])&&Vr(p,t,n,v,d,w);a.push(d),i.push(u)}return new vt(a,i,t,n)}var Yy=Yn.prototype.constructor;function Ky(){return new Yy(this._groups,this._parents)}function qy(e,t){var n,r,o;return function(){var a=cn(this,e),i=(this.style.removeProperty(e),cn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}function Ml(e){return function(){this.style.removeProperty(e)}}function Zy(e,t,n){var r,o=n+"",a;return function(){var i=cn(this,e);return i===o?null:i===r?a:a=t(r=i,n)}}function Jy(e,t,n){var r,o,a;return function(){var i=cn(this,e),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(e),cn(this,e))),i===c?null:i===r&&c===o?a:(o=c,a=t(r=i,s))}}function Qy(e,t){var n,r,o,a="style."+t,i="end."+a,s;return function(){var c=ft(this,e),l=c.on,u=c.value[a]==null?s||(s=Ml(t)):void 0;(l!==n||o!==u)&&(r=(n=l).copy()).on(i,o=u),c.on=r}}function e0(e,t,n){var r=(e+="")=="transform"?ey:Nl;return t==null?this.styleTween(e,qy(e,r)).on("end.style."+e,Ml(e)):typeof t=="function"?this.styleTween(e,Jy(e,r,$i(this,"style."+e,t))).each(Qy(this._id,e)):this.styleTween(e,Zy(e,r,t),n).on("end.style."+e,null)}function t0(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function n0(e,t,n){var r,o;function a(){var i=t.apply(this,arguments);return i!==o&&(r=(o=i)&&t0(e,i,n)),r}return a._value=t,a}function r0(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,n0(e,t,n??""))}function o0(e){return function(){this.textContent=e}}function i0(e){return function(){var t=e(this);this.textContent=t??""}}function a0(e){return this.tween("text",typeof e=="function"?i0($i(this,"text",e)):o0(e==null?"":e+""))}function s0(e){return function(t){this.textContent=e.call(this,t)}}function l0(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&s0(o)),t}return r._value=e,r}function c0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,l0(e))}function u0(){for(var e=this._name,t=this._id,n=Pl(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)if(c=i[l]){var u=at(c,t);Vr(c,e,n,l,i,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vt(r,this._parents,e,n)}function d0(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(a,i){var s={value:i},c={value:function(){--o===0&&a()}};n.each(function(){var l=ft(this,r),u=l.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),l.on=t}),o===0&&a()})}var f0=0;function vt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Pl(){return++f0}var ht=Yn.prototype;vt.prototype={constructor:vt,select:Gy,selectAll:Xy,selectChild:ht.selectChild,selectChildren:ht.selectChildren,filter:Ly,merge:Fy,selection:Ky,transition:u0,call:ht.call,nodes:ht.nodes,node:ht.node,size:ht.size,empty:ht.empty,each:ht.each,on:Wy,attr:Ey,attrTween:My,style:e0,styleTween:r0,text:a0,textTween:c0,remove:Vy,tween:my,delay:Ty,duration:Dy,ease:zy,easeVarying:By,end:d0,[Symbol.iterator]:ht[Symbol.iterator]};function h0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var p0={time:null,delay:0,duration:250,ease:h0};function g0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function m0(e){var t,n;e instanceof vt?(t=e._id,e=e._name):(t=Pl(),(n=p0).time=Ei(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i=r[a],s=i.length,c,l=0;l<s;++l)(c=i[l])&&Vr(c,e,t,l,i,n||g0(c,t));return new vt(r,this._parents,e,t)}Yn.prototype.interrupt=hy;Yn.prototype.transition=m0;const ir=e=>()=>e;function y0(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function mt(e,t,n){this.k=e,this.x=t,this.y=n}mt.prototype={constructor:mt,scale:function(e){return e===1?this:new mt(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new mt(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pt=new mt(1,0,0);mt.prototype;function xo(e){e.stopImmediatePropagation()}function Sn(e){e.preventDefault(),e.stopImmediatePropagation()}function v0(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function x0(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Pa(){return this.__zoom||Pt}function b0(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function w0(){return navigator.maxTouchPoints||"ontouchstart"in this}function S0(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function Il(){var e=v0,t=x0,n=S0,r=b0,o=w0,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],s=250,c=iy,l=jr("start","zoom","end"),u,h,d,p=500,w=150,v=0,E=10;function g(b){b.property("__zoom",Pa).on("wheel.zoom",I,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",D).filter(o).on("touchstart.zoom",B).on("touchmove.zoom",Z).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(b,M,N,A){var T=b.selection?b.selection():b;T.property("__zoom",Pa),b!==T?C(b,M,N,A):T.interrupt().each(function(){$(this,arguments).event(A).start().zoom(null,typeof M=="function"?M.apply(this,arguments):M).end()})},g.scaleBy=function(b,M,N,A){g.scaleTo(b,function(){var T=this.__zoom.k,F=typeof M=="function"?M.apply(this,arguments):M;return T*F},N,A)},g.scaleTo=function(b,M,N,A){g.transform(b,function(){var T=t.apply(this,arguments),F=this.__zoom,L=N==null?y(T):typeof N=="function"?N.apply(this,arguments):N,H=F.invert(L),J=typeof M=="function"?M.apply(this,arguments):M;return n(S(x(F,J),L,H),T,i)},N,A)},g.translateBy=function(b,M,N,A){g.transform(b,function(){return n(this.__zoom.translate(typeof M=="function"?M.apply(this,arguments):M,typeof N=="function"?N.apply(this,arguments):N),t.apply(this,arguments),i)},null,A)},g.translateTo=function(b,M,N,A,T){g.transform(b,function(){var F=t.apply(this,arguments),L=this.__zoom,H=A==null?y(F):typeof A=="function"?A.apply(this,arguments):A;return n(Pt.translate(H[0],H[1]).scale(L.k).translate(typeof M=="function"?-M.apply(this,arguments):-M,typeof N=="function"?-N.apply(this,arguments):-N),F,i)},A,T)};function x(b,M){return M=Math.max(a[0],Math.min(a[1],M)),M===b.k?b:new mt(M,b.x,b.y)}function S(b,M,N){var A=M[0]-N[0]*b.k,T=M[1]-N[1]*b.k;return A===b.x&&T===b.y?b:new mt(b.k,A,T)}function y(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function C(b,M,N,A){b.on("start.zoom",function(){$(this,arguments).event(A).start()}).on("interrupt.zoom end.zoom",function(){$(this,arguments).event(A).end()}).tween("zoom",function(){var T=this,F=arguments,L=$(T,F).event(A),H=t.apply(T,F),J=N==null?y(H):typeof N=="function"?N.apply(T,F):N,G=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),q=T.__zoom,W=typeof M=="function"?M.apply(T,F):M,te=c(q.invert(J).concat(G/q.k),W.invert(J).concat(G/W.k));return function(re){if(re===1)re=W;else{var ie=te(re),de=G/ie[2];re=new mt(de,J[0]-ie[0]*de,J[1]-ie[1]*de)}L.zoom(null,re)}})}function $(b,M,N){return!N&&b.__zooming||new _(b,M)}function _(b,M){this.that=b,this.args=M,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,M),this.taps=0}_.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,M){return this.mouse&&b!=="mouse"&&(this.mouse[1]=M.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=M.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=M.invert(this.touch1[0])),this.that.__zoom=M,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var M=Ze(this.that).datum();l.call(b,this.that,new y0(b,{sourceEvent:this.sourceEvent,target:g,type:b,transform:this.that.__zoom,dispatch:l}),M)}};function I(b,...M){if(!e.apply(this,arguments))return;var N=$(this,M).event(b),A=this.__zoom,T=Math.max(a[0],Math.min(a[1],A.k*Math.pow(2,r.apply(this,arguments)))),F=nt(b);if(N.wheel)(N.mouse[0][0]!==F[0]||N.mouse[0][1]!==F[1])&&(N.mouse[1]=A.invert(N.mouse[0]=F)),clearTimeout(N.wheel);else{if(A.k===T)return;N.mouse=[F,A.invert(F)],gr(this),N.start()}Sn(b),N.wheel=setTimeout(L,w),N.zoom("mouse",n(S(x(A,T),N.mouse[0],N.mouse[1]),N.extent,i));function L(){N.wheel=null,N.end()}}function O(b,...M){if(d||!e.apply(this,arguments))return;var N=b.currentTarget,A=$(this,M,!0).event(b),T=Ze(b.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",G,!0),F=nt(b,N),L=b.clientX,H=b.clientY;gl(b.view),xo(b),A.mouse=[F,this.__zoom.invert(F)],gr(this),A.start();function J(q){if(Sn(q),!A.moved){var W=q.clientX-L,te=q.clientY-H;A.moved=W*W+te*te>v}A.event(q).zoom("mouse",n(S(A.that.__zoom,A.mouse[0]=nt(q,N),A.mouse[1]),A.extent,i))}function G(q){T.on("mousemove.zoom mouseup.zoom",null),ml(q.view,A.moved),Sn(q),A.event(q).end()}}function D(b,...M){if(e.apply(this,arguments)){var N=this.__zoom,A=nt(b.changedTouches?b.changedTouches[0]:b,this),T=N.invert(A),F=N.k*(b.shiftKey?.5:2),L=n(S(x(N,F),A,T),t.apply(this,M),i);Sn(b),s>0?Ze(this).transition().duration(s).call(C,L,A,b):Ze(this).call(g.transform,L,A,b)}}function B(b,...M){if(e.apply(this,arguments)){var N=b.touches,A=N.length,T=$(this,M,b.changedTouches.length===A).event(b),F,L,H,J;for(xo(b),L=0;L<A;++L)H=N[L],J=nt(H,this),J=[J,this.__zoom.invert(J),H.identifier],T.touch0?!T.touch1&&T.touch0[2]!==J[2]&&(T.touch1=J,T.taps=0):(T.touch0=J,F=!0,T.taps=1+!!u);u&&(u=clearTimeout(u)),F&&(T.taps<2&&(h=J[0],u=setTimeout(function(){u=null},p)),gr(this),T.start())}}function Z(b,...M){if(this.__zooming){var N=$(this,M).event(b),A=b.changedTouches,T=A.length,F,L,H,J;for(Sn(b),F=0;F<T;++F)L=A[F],H=nt(L,this),N.touch0&&N.touch0[2]===L.identifier?N.touch0[0]=H:N.touch1&&N.touch1[2]===L.identifier&&(N.touch1[0]=H);if(L=N.that.__zoom,N.touch1){var G=N.touch0[0],q=N.touch0[1],W=N.touch1[0],te=N.touch1[1],re=(re=W[0]-G[0])*re+(re=W[1]-G[1])*re,ie=(ie=te[0]-q[0])*ie+(ie=te[1]-q[1])*ie;L=x(L,Math.sqrt(re/ie)),H=[(G[0]+W[0])/2,(G[1]+W[1])/2],J=[(q[0]+te[0])/2,(q[1]+te[1])/2]}else if(N.touch0)H=N.touch0[0],J=N.touch0[1];else return;N.zoom("touch",n(S(L,H,J),N.extent,i))}}function X(b,...M){if(this.__zooming){var N=$(this,M).event(b),A=b.changedTouches,T=A.length,F,L;for(xo(b),d&&clearTimeout(d),d=setTimeout(function(){d=null},p),F=0;F<T;++F)L=A[F],N.touch0&&N.touch0[2]===L.identifier?delete N.touch0:N.touch1&&N.touch1[2]===L.identifier&&delete N.touch1;if(N.touch1&&!N.touch0&&(N.touch0=N.touch1,delete N.touch1),N.touch0)N.touch0[1]=this.__zoom.invert(N.touch0[0]);else if(N.end(),N.taps===2&&(L=nt(L,this),Math.hypot(h[0]-L[0],h[1]-L[1])<E)){var H=Ze(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return g.wheelDelta=function(b){return arguments.length?(r=typeof b=="function"?b:ir(+b),g):r},g.filter=function(b){return arguments.length?(e=typeof b=="function"?b:ir(!!b),g):e},g.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:ir(!!b),g):o},g.extent=function(b){return arguments.length?(t=typeof b=="function"?b:ir([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),g):t},g.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],g):[a[0],a[1]]},g.translateExtent=function(b){return arguments.length?(i[0][0]=+b[0][0],i[1][0]=+b[1][0],i[0][1]=+b[0][1],i[1][1]=+b[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(b){return arguments.length?(n=b,g):n},g.duration=function(b){return arguments.length?(s=+b,g):s},g.interpolate=function(b){return arguments.length?(c=b,g):c},g.on=function(){var b=l.on.apply(l,arguments);return b===l?g:b},g.clickDistance=function(b){return arguments.length?(v=(b=+b)*b,g):Math.sqrt(v)},g.tapDistance=function(b){return arguments.length?(E=+b,g):E},g}const _i=m.createContext(null),E0=_i.Provider,Tl="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100";function ve(e,t){const n=m.useContext(_i);if(n===null)throw new Error(Tl);return Vp(n,e,t)}const Ne=()=>{const e=m.useContext(_i);if(e===null)throw new Error(Tl);return m.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},C0=e=>e.userSelectionActive?"none":"all";function Ni({position:e,children:t,className:n,style:r,...o}){const a=ve(C0),i=`${e}`.split("-");return f("div",{className:ze(["react-flow__panel",n,...i]),style:{...r,pointerEvents:a},...o,children:t})}function $0({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:f(Ni,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:f("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const _0=({x:e,y:t,label:n,labelStyle:r={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:c,className:l,...u})=>{const h=m.useRef(null),[d,p]=m.useState({x:0,y:0,width:0,height:0}),w=ze(["react-flow__edge-textwrapper",l]);return m.useEffect(()=>{if(h.current){const v=h.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:z("g",{transform:`translate(${e-d.width/2} ${t-d.height/2})`,className:w,visibility:d.width?"visible":"hidden",...u,children:[o&&f("rect",{width:d.width+2*i[0],x:-i[0],y:-i[1],height:d.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:s,ry:s}),f("text",{className:"react-flow__edge-text",y:d.height/2,dy:"0.3em",ref:h,style:r,children:n}),c]})};var N0=m.memo(_0);const qn=({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:c,style:l,markerEnd:u,markerStart:h,interactionWidth:d=20})=>z(ue,{children:[f("path",{style:l,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:h}),d&&f("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}),r?f(N0,{x:t,y:n,label:r,labelStyle:o,labelShowBg:a,labelBgStyle:i,labelBgPadding:s,labelBgBorderRadius:c}):null]});qn.displayName="BaseEdge";function En(e,t,n){return n===void 0?n:r=>{const o=t().edges.find(a=>a.id===e);o&&n(r,{...o})}}function Rl({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,i=Math.abs(r-t)/2,s=r<t?r+i:r-i;return[a,s,o,i]}function Al({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:a,targetControlX:i,targetControlY:s}){const c=e*.125+o*.375+i*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125,u=Math.abs(c-e),h=Math.abs(l-t);return[c,l,u,h]}var dn;(function(e){e.Strict="strict",e.Loose="loose"})(dn||(dn={}));var nn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(nn||(nn={}));const Mi=e=>({width:e.offsetWidth,height:e.offsetHeight}),rn=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Pi=(e={x:0,y:0},t)=>({x:rn(e.x,t[0][0],t[1][0]),y:rn(e.y,t[0][1],t[1][1])}),Dl=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ol=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),_r=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),zl=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Ia=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),M0=(e,t)=>zl(Ol(_r(e),_r(t))),Zo=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},P0=e=>!!e.width&&!!e.height&&!!e.x&&!!e.y,kl=e=>!isNaN(e)&&isFinite(e),Ie=Symbol.for("internals"),Bl=["Enter"," ","Escape"],I0=e=>{};var Et;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Et||(Et={}));var Nr;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nr||(Nr={}));var V;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(V||(V={}));function Ta({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===V.Left||e===V.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function Ll({sourceX:e,sourceY:t,sourcePosition:n=V.Bottom,targetX:r,targetY:o,targetPosition:a=V.Top}){const[i,s]=Ta({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,l]=Ta({pos:a,x1:r,y1:o,x2:e,y2:t}),[u,h,d,p]=Al({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:i,sourceControlY:s,targetControlX:c,targetControlY:l});return[`M${e},${t} C${i},${s} ${c},${l} ${r},${o}`,u,h,d,p]}const Ii=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=V.Bottom,targetPosition:a=V.Top,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:p,markerStart:w,interactionWidth:v})=>{const[E,g,x]=Ll({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a});return f(qn,{path:E,labelX:g,labelY:x,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:p,markerStart:w,interactionWidth:v})});Ii.displayName="SimpleBezierEdge";const Ra={[V.Left]:{x:-1,y:0},[V.Right]:{x:1,y:0},[V.Top]:{x:0,y:-1},[V.Bottom]:{x:0,y:1}},T0=({source:e,sourcePosition:t=V.Bottom,target:n})=>t===V.Left||t===V.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Aa=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function R0({source:e,sourcePosition:t=V.Bottom,target:n,targetPosition:r=V.Top,center:o,offset:a}){const i=Ra[t],s=Ra[r],c={x:e.x+i.x*a,y:e.y+i.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=T0({source:c,sourcePosition:t,target:l}),h=u.x!==0?"x":"y",d=u[h];let p=[],w,v;const[E,g,x,S]=Rl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[h]*s[h]===-1){w=o.x||E,v=o.y||g;const C=[{x:w,y:c.y},{x:w,y:l.y}],$=[{x:c.x,y:v},{x:l.x,y:v}];i[h]===d?p=h==="x"?C:$:p=h==="x"?$:C}else{const C=[{x:c.x,y:l.y}],$=[{x:l.x,y:c.y}];if(h==="x"?p=i.x===d?$:C:p=i.y===d?C:$,t!==r){const _=h==="x"?"y":"x",I=i[h]===s[_],O=c[_]>l[_],D=c[_]<l[_];(i[h]===1&&(!I&&O||I&&D)||i[h]!==1&&(!I&&D||I&&O))&&(p=h==="x"?C:$)}w=p[0].x,v=p[0].y}return[[e,c,...p,l,n],w,v,x,S]}function A0(e,t,n,r){const o=Math.min(Aa(e,t)/2,Aa(t,n)/2,r),{x:a,y:i}=t;if(e.x===a&&a===n.x||e.y===i&&i===n.y)return`L${a} ${i}`;if(e.y===i){const l=e.x<n.x?-1:1,u=e.y<n.y?1:-1;return`L ${a+o*l},${i}Q ${a},${i} ${a},${i+o*u}`}const s=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${a},${i+o*c}Q ${a},${i} ${a+o*s},${i}`}function Jo({sourceX:e,sourceY:t,sourcePosition:n=V.Bottom,targetX:r,targetY:o,targetPosition:a=V.Top,borderRadius:i=5,centerX:s,centerY:c,offset:l=20}){const[u,h,d,p,w]=R0({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:a,center:{x:s,y:c},offset:l});return[u.reduce((E,g,x)=>{let S="";return x>0&&x<u.length-1?S=A0(u[x-1],g,u[x+1],i):S=`${x===0?"M":"L"}${g.x} ${g.y}`,E+=S,E},""),h,d,p,w]}const Gr=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,sourcePosition:h=V.Bottom,targetPosition:d=V.Top,markerEnd:p,markerStart:w,pathOptions:v,interactionWidth:E})=>{const[g,x,S]=Jo({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:r,targetPosition:d,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return f(qn,{path:g,labelX:x,labelY:S,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:p,markerStart:w,interactionWidth:E})});Gr.displayName="SmoothStepEdge";const Ti=m.memo(e=>{var t;return f(Gr,{...e,pathOptions:m.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});Ti.displayName="StepEdge";function D0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,a,i,s]=Rl({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,a,i,s]}const Ri=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:d,interactionWidth:p})=>{const[w,v,E]=D0({sourceX:e,sourceY:t,targetX:n,targetY:r});return f(qn,{path:w,labelX:v,labelY:E,label:o,labelStyle:a,labelShowBg:i,labelBgStyle:s,labelBgPadding:c,labelBgBorderRadius:l,style:u,markerEnd:h,markerStart:d,interactionWidth:p})});Ri.displayName="StraightEdge";function ar(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Da({pos:e,x1:t,y1:n,x2:r,y2:o,c:a}){switch(e){case V.Left:return[t-ar(t-r,a),n];case V.Right:return[t+ar(r-t,a),n];case V.Top:return[t,n-ar(n-o,a)];case V.Bottom:return[t,n+ar(o-n,a)]}}function Fl({sourceX:e,sourceY:t,sourcePosition:n=V.Bottom,targetX:r,targetY:o,targetPosition:a=V.Top,curvature:i=.25}){const[s,c]=Da({pos:n,x1:e,y1:t,x2:r,y2:o,c:i}),[l,u]=Da({pos:a,x1:r,y1:o,x2:e,y2:t,c:i}),[h,d,p,w]=Al({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${e},${t} C${s},${c} ${l},${u} ${r},${o}`,h,d,p,w]}const Mr=m.memo(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:o=V.Bottom,targetPosition:a=V.Top,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:p,markerStart:w,pathOptions:v,interactionWidth:E})=>{const[g,x,S]=Fl({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:r,targetPosition:a,curvature:v==null?void 0:v.curvature});return f(qn,{path:g,labelX:x,labelY:S,label:i,labelStyle:s,labelShowBg:c,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:h,style:d,markerEnd:p,markerStart:w,interactionWidth:E})});Mr.displayName="BezierEdge";const Ai=m.createContext(null),O0=Ai.Provider;Ai.Consumer;function Qo(e,t,n,r,o,a,i){const s=i.elementFromPoint(e.clientX,e.clientY),c=(s==null?void 0:s.classList.contains("target"))||!1,l=(s==null?void 0:s.classList.contains("source"))||!1,u={elementBelow:s,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(s&&(c||l)){u.isHoveringHandle=!0;const h=s.getAttribute("data-nodeid"),d=s.getAttribute("data-handleid"),p=n?{source:h,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:h,targetHandle:d};u.connection=p,(t===dn.Strict?n&&l||!n&&c:!0)&&(u.isValid=a(p))}return u}function bo(e){e==null||e.classList.remove("react-flow__handle-valid"),e==null||e.classList.remove("react-flow__handle-connecting")}function Hl({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:o,getState:a,setState:i,isValidConnection:s,elementEdgeUpdaterType:c,onEdgeUpdateEnd:l}){const u=e.target.closest(".react-flow"),h=Dl(e.target);if(!h)return;const d=h.elementFromPoint(e.clientX,e.clientY),p=d==null?void 0:d.classList.contains("target"),w=d==null?void 0:d.classList.contains("source");if(!u||!p&&!w&&!c)return;const{onConnectStart:v,connectionMode:E}=a(),g=c||(p?"target":"source"),x=u.getBoundingClientRect();let S;i({connectionPosition:{x:e.clientX-x.left,y:e.clientY-x.top},connectionNodeId:n,connectionHandleId:t,connectionHandleType:g}),v==null||v(e,{nodeId:n,handleId:t,handleType:g});function y($){i({connectionPosition:{x:$.clientX-x.left,y:$.clientY-x.top}});const{connection:_,elementBelow:I,isValid:O,isHoveringHandle:D}=Qo($,E,o,n,t,s,h);if(!D)return bo(S);_.source!==_.target&&I&&(bo(S),S=I,I.classList.add("react-flow__handle-connecting"),I.classList.toggle("react-flow__handle-valid",O))}function C($){var O,D;const{connection:_,isValid:I}=Qo($,E,o,n,t,s,h);I&&(r==null||r(_)),(D=(O=a()).onConnectEnd)==null||D.call(O,$),c&&l&&l($),bo(S),i({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),h.removeEventListener("mousemove",y),h.removeEventListener("mouseup",C)}h.addEventListener("mousemove",y),h.addEventListener("mouseup",C)}const z0=e=>"id"in e&&"source"in e&&"target"in e,k0=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`,ei=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`,B0=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),jl=(e,t)=>{if(!e.source||!e.target)return t;let n;return z0(e)?n={...e}:n={...e,id:k0(e)},B0(n,t)?t:t.concat(n)},L0=({x:e,y:t},[n,r,o],a,[i,s])=>{const c={x:(e-n)/o,y:(t-r)/o};return a?{x:i*Math.round(c.x/i),y:s*Math.round(c.y/s)}:c},Xr=e=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const t=e.reduce((n,{positionAbsolute:r,position:o,width:a,height:i})=>Ol(n,_r({x:r?r.x:o.x,y:r?r.y:o.y,width:a||0,height:i||0})),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return zl(t)},Wl=(e,t,[n,r,o]=[0,0,1],a=!1,i=!1)=>{const s={x:(t.x-n)/o,y:(t.y-r)/o,width:t.width/o,height:t.height/o},c=[];return e.forEach(l=>{const{positionAbsolute:u={x:0,y:0},width:h,height:d,selectable:p=!0}=l;if(i&&!p)return!1;const w={...u,width:h||0,height:d||0},v=Zo(s,w),E=typeof h>"u"||typeof d>"u"||h===null||d===null,g=a&&v>0,x=(h||0)*(d||0);(E||g||v>=x||l.dragging)&&c.push(l)}),c},Ul=(e,t)=>{const n=e.map(r=>r.id);return t.filter(r=>n.includes(r.source)||n.includes(r.target))},Vl=(e,t,n,r,o,a=.1)=>{const i=t/(e.width*(1+a)),s=n/(e.height*(1+a)),c=Math.min(i,s),l=rn(c,r,o),u=e.x+e.width/2,h=e.y+e.height/2,d=t/2-u*l,p=n/2-h*l;return[d,p,l]},zt=(e,t=0)=>e.transition().duration(t),F0=()=>!0,H0=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Gl=m.forwardRef(({type:e="source",position:t=V.Top,isValidConnection:n=F0,isConnectable:r=!0,id:o,onConnect:a,children:i,className:s,onMouseDown:c,...l},u)=>{const h=Ne(),d=m.useContext(Ai),{connectionStartHandle:p,connectOnClick:w,noPanClassName:v}=ve(H0,He),E=o||null,g=e==="target",x=C=>{const{defaultEdgeOptions:$,onConnect:_,hasDefaultEdges:I}=h.getState(),O={...$,...C};if(I){const{edges:D}=h.getState();h.setState({edges:jl(O,D)})}_==null||_(O),a==null||a(O)},S=C=>{C.button===0&&Hl({event:C,handleId:E,nodeId:d,onConnect:x,isTarget:g,getState:h.getState,setState:h.setState,isValidConnection:n}),c==null||c(C)},y=C=>{const{onClickConnectStart:$,onClickConnectEnd:_,connectionMode:I}=h.getState();if(!p){$==null||$(C,{nodeId:d,handleId:E,handleType:e}),h.setState({connectionStartHandle:{nodeId:d,type:e,handleId:E}});return}const O=Dl(C.target),{connection:D,isValid:B}=Qo(C,I,p.type==="target",p.nodeId,p.handleId||null,n,O);B&&x(D),_==null||_(C),h.setState({connectionStartHandle:null})};return f("div",{"data-handleid":E,"data-nodeid":d,"data-handlepos":t,className:ze(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",v,s,{source:!g,target:g,connectable:r,connecting:(p==null?void 0:p.nodeId)===d&&(p==null?void 0:p.handleId)===E&&(p==null?void 0:p.type)===e}]),onMouseDown:S,onClick:w?y:void 0,ref:u,...l,children:i})});Gl.displayName="Handle";var Hn=m.memo(Gl);const Xl=({data:e,isConnectable:t,targetPosition:n=V.Top,sourcePosition:r=V.Bottom})=>z(ue,{children:[f(Hn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,f(Hn,{type:"source",position:r,isConnectable:t})]});Xl.displayName="DefaultNode";var ti=m.memo(Xl);const Yl=({data:e,isConnectable:t,sourcePosition:n=V.Bottom})=>z(ue,{children:[e==null?void 0:e.label,f(Hn,{type:"source",position:n,isConnectable:t})]});Yl.displayName="InputNode";var Kl=m.memo(Yl);const ql=({data:e,isConnectable:t,targetPosition:n=V.Top})=>z(ue,{children:[f(Hn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]});ql.displayName="OutputNode";var Zl=m.memo(ql);const Di=()=>null;Di.displayName="GroupNode";const j0=e=>({selectedNodes:Array.from(e.nodeInternals.values()).filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected)}),sr=e=>e.id;function W0(e,t){return He(e.selectedNodes.map(sr),t.selectedNodes.map(sr))&&He(e.selectedEdges.map(sr),t.selectedEdges.map(sr))}const Jl=m.memo(({onSelectionChange:e})=>{const t=Ne(),{selectedNodes:n,selectedEdges:r}=ve(j0,W0);return m.useEffect(()=>{var a,i;const o={nodes:n,edges:r};e==null||e(o),(i=(a=t.getState()).onSelectionChange)==null||i.call(a,o)},[n,r,e]),null});Jl.displayName="SelectionListener";const U0=e=>!!e.onSelectionChange;function V0({onSelectionChange:e}){const t=ve(U0);return e||t?f(Jl,{onSelectionChange:e}):null}const G0=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Gt(e,t){m.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function le(e,t,n){m.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const X0=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:o,onConnectStart:a,onConnectEnd:i,onClickConnectStart:s,onClickConnectEnd:c,nodesDraggable:l,nodesConnectable:u,nodesFocusable:h,edgesFocusable:d,minZoom:p,maxZoom:w,nodeExtent:v,onNodesChange:E,onEdgesChange:g,elementsSelectable:x,connectionMode:S,snapGrid:y,snapToGrid:C,translateExtent:$,connectOnClick:_,defaultEdgeOptions:I,fitView:O,fitViewOptions:D,onNodesDelete:B,onEdgesDelete:Z,onNodeDrag:X,onNodeDragStart:b,onNodeDragStop:M,onSelectionDrag:N,onSelectionDragStart:A,onSelectionDragStop:T,noPanClassName:F,nodeOrigin:L,rfId:H})=>{const{setNodes:J,setEdges:G,setDefaultNodesAndEdges:q,setMinZoom:W,setMaxZoom:te,setTranslateExtent:re,setNodeExtent:ie,reset:de}=ve(G0,He),Y=Ne();return m.useEffect(()=>{const xe=r==null?void 0:r.map(Me=>({...Me,...I}));return q(n,xe),()=>{de()}},[]),le("defaultEdgeOptions",I,Y.setState),le("connectionMode",S,Y.setState),le("onConnect",o,Y.setState),le("onConnectStart",a,Y.setState),le("onConnectEnd",i,Y.setState),le("onClickConnectStart",s,Y.setState),le("onClickConnectEnd",c,Y.setState),le("nodesDraggable",l,Y.setState),le("nodesConnectable",u,Y.setState),le("nodesFocusable",h,Y.setState),le("edgesFocusable",d,Y.setState),le("elementsSelectable",x,Y.setState),le("snapToGrid",C,Y.setState),le("snapGrid",y,Y.setState),le("onNodesChange",E,Y.setState),le("onEdgesChange",g,Y.setState),le("connectOnClick",_,Y.setState),le("fitViewOnInit",O,Y.setState),le("fitViewOnInitOptions",D,Y.setState),le("onNodesDelete",B,Y.setState),le("onEdgesDelete",Z,Y.setState),le("onNodeDrag",X,Y.setState),le("onNodeDragStart",b,Y.setState),le("onNodeDragStop",M,Y.setState),le("onSelectionDrag",N,Y.setState),le("onSelectionDragStart",A,Y.setState),le("onSelectionDragStop",T,Y.setState),le("noPanClassName",F,Y.setState),le("nodeOrigin",L,Y.setState),le("rfId",H,Y.setState),Gt(e,J),Gt(t,G),Gt(p,W),Gt(w,te),Gt($,re),Gt(v,ie),null},Oa={display:"none"},Y0={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ql="react-flow__node-desc",ec="react-flow__edge-desc",K0="react-flow__aria-live",q0=e=>e.ariaLiveMessage;function Z0({rfId:e}){const t=ve(q0);return f("div",{id:`${K0}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Y0,children:t})}function J0({rfId:e,disableKeyboardA11y:t}){return z(ue,{children:[z("div",{id:`${Ql}-${e}`,style:Oa,children:["Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),f("div",{id:`${ec}-${e}`,style:Oa,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!t&&f(Z0,{rfId:e})]})}const Q0=(e,t,n)=>n===V.Left?e-t:n===V.Right?e+t:e,ev=(e,t,n)=>n===V.Top?e-t:n===V.Bottom?e+t:e,za="react-flow__edgeupdater",ka=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:a,onMouseOut:i,type:s})=>f("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:i,className:ze([za,`${za}-${s}`]),cx:Q0(t,r,e),cy:ev(n,r,e),r,stroke:"transparent",fill:"transparent"});var Xt=e=>{const t=({id:n,className:r,type:o,data:a,onClick:i,onEdgeDoubleClick:s,selected:c,animated:l,label:u,labelStyle:h,labelShowBg:d,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:v,style:E,source:g,target:x,sourceX:S,sourceY:y,targetX:C,targetY:$,sourcePosition:_,targetPosition:I,elementsSelectable:O,hidden:D,sourceHandleId:B,targetHandleId:Z,onContextMenu:X,onMouseEnter:b,onMouseMove:M,onMouseLeave:N,edgeUpdaterRadius:A,onEdgeUpdate:T,onEdgeUpdateStart:F,onEdgeUpdateEnd:L,markerEnd:H,markerStart:J,rfId:G,ariaLabel:q,isFocusable:W,pathOptions:te,interactionWidth:re})=>{const ie=m.useRef(null),[de,Y]=m.useState(!1),[xe,Me]=m.useState(!1),fe=Ne(),Pe=m.useMemo(()=>`url(#${ei(J,G)})`,[J,G]),he=m.useMemo(()=>`url(#${ei(H,G)})`,[H,G]);if(D)return null;const ne=me=>{const{edges:$e,addSelectedEdges:We}=fe.getState();if(O&&(fe.setState({nodesSelectionActive:!1}),We([n])),i){const Ye=$e.find(Ae=>Ae.id===n);i(me,Ye)}},ae=En(n,fe.getState,s),P=En(n,fe.getState,X),R=En(n,fe.getState,b),k=En(n,fe.getState,M),U=En(n,fe.getState,N),K=(me,$e)=>{const We=$e?x:g,Ye=($e?Z:B)||null,Ae=$e?"target":"source",bt=()=>!0,be=$e,Se=fe.getState().edges.find(st=>st.id===n);Me(!0),F==null||F(me,Se,Ae);const Ke=st=>{Me(!1),L==null||L(st,Se,Ae)};Hl({event:me,handleId:Ye,nodeId:We,onConnect:st=>T==null?void 0:T(Se,st),isTarget:be,getState:fe.getState,setState:fe.setState,isValidConnection:bt,elementEdgeUpdaterType:Ae,onEdgeUpdateEnd:Ke})},ce=me=>K(me,!0),oe=me=>K(me,!1),ee=()=>Y(!0),se=()=>Y(!1),pe=!O&&!i,we=typeof T<"u",je=me=>{var $e;if(Bl.includes(me.key)&&O){const{unselectNodesAndEdges:We,addSelectedEdges:Ye,edges:Ae}=fe.getState();me.key==="Escape"?(($e=ie.current)==null||$e.blur(),We({edges:[Ae.find(be=>be.id===n)]})):Ye([n])}};return z("g",{className:ze(["react-flow__edge",`react-flow__edge-${o}`,r,{selected:c,animated:l,inactive:pe,updating:de}]),onClick:ne,onDoubleClick:ae,onContextMenu:P,onMouseEnter:R,onMouseMove:k,onMouseLeave:U,onKeyDown:W?je:void 0,tabIndex:W?0:void 0,role:W?"button":void 0,"data-testid":`rf__edge-${n}`,"aria-label":q===null?void 0:q||`Edge from ${g} to ${x}`,"aria-describedby":W?`${ec}-${G}`:void 0,ref:ie,children:[!xe&&f(e,{id:n,source:g,target:x,selected:c,animated:l,label:u,labelStyle:h,labelShowBg:d,labelBgStyle:p,labelBgPadding:w,labelBgBorderRadius:v,data:a,style:E,sourceX:S,sourceY:y,targetX:C,targetY:$,sourcePosition:_,targetPosition:I,sourceHandleId:B,targetHandleId:Z,markerStart:Pe,markerEnd:he,pathOptions:te,interactionWidth:re}),we&&z(ue,{children:[f(ka,{position:_,centerX:S,centerY:y,radius:A,onMouseDown:ce,onMouseEnter:ee,onMouseOut:se,type:"source"}),f(ka,{position:I,centerX:C,centerY:$,radius:A,onMouseDown:oe,onMouseEnter:ee,onMouseOut:se,type:"target"})]})]})};return t.displayName="EdgeWrapper",m.memo(t)};function tv(e){const t={default:Xt(e.default||Mr),straight:Xt(e.bezier||Ri),step:Xt(e.step||Ti),smoothstep:Xt(e.step||Gr),simplebezier:Xt(e.simplebezier||Ii)},n={},r=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,a)=>(o[a]=Xt(e[a]||Mr),o),n);return{...t,...r}}function Ba(e,t,n=null){const r=((n==null?void 0:n.x)||0)+t.x,o=((n==null?void 0:n.y)||0)+t.y,a=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case V.Top:return{x:r+a/2,y:o};case V.Right:return{x:r+a,y:o+i/2};case V.Bottom:return{x:r+a/2,y:o+i};case V.Left:return{x:r,y:o+i/2}}}function La(e,t){if(!e)return null;let n=null;return e.length===1||!t?n=e[0]:t&&(n=e.find(r=>r.id===t)),typeof n>"u"?null:n}const nv=(e,t,n,r,o,a)=>{const i=Ba(n,e,t),s=Ba(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:s.x,targetY:s.y}};function rv({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:o,targetHeight:a,width:i,height:s,transform:c}){const l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+r,t.y+a)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);const u=_r({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:s/c[2]}),h=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),d=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(h*d)>0}function Fa(e){var r,o,a,i,s;const t=((r=e==null?void 0:e[Ie])==null?void 0:r.handleBounds)||null,n=!e||!t||!e.width||!e.height||typeof((o=e.positionAbsolute)==null?void 0:o.x)>"u"||typeof((a=e.positionAbsolute)==null?void 0:a.y)>"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!n]}function tc(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:tc(n,t):!1}function Ha(e,t,n){let r=e;do{if(r!=null&&r.matches(t))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function ov(e,t,n){return Array.from(e.values()).filter(r=>(r.selected||r.id===n)&&(!r.parentNode||!tc(r,e))).map(r=>{var o,a;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:t.x-(((o=r.positionAbsolute)==null?void 0:o.x)??0),y:t.y-(((a=r.positionAbsolute)==null?void 0:a.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height}})}function nc(e,t,n,r){var s,c,l,u;let o=e.extent||r;if(e.extent==="parent")if(e.parentNode&&e.width&&e.height){const h=n.get(e.parentNode);o=h!=null&&h.positionAbsolute&&(h!=null&&h.width)&&(h!=null&&h.height)?[[h.positionAbsolute.x,h.positionAbsolute.y],[h.positionAbsolute.x+h.width-e.width,h.positionAbsolute.y+h.height-e.height]]:o}else o=r;else if(e.extent&&e.parentNode){const h=n.get(e.parentNode),d=((s=h==null?void 0:h.positionAbsolute)==null?void 0:s.x)??0,p=((c=h==null?void 0:h.positionAbsolute)==null?void 0:c.y)??0;o=[[e.extent[0][0]+d,e.extent[0][1]+p],[e.extent[1][0]+d,e.extent[1][1]+p]]}let a={x:0,y:0};if(e.parentNode){const h=n.get(e.parentNode);a={x:((l=h==null?void 0:h.positionAbsolute)==null?void 0:l.x)??0,y:((u=h==null?void 0:h.positionAbsolute)==null?void 0:u.y)??0}}const i=o?Pi(t,o):t;return{position:{x:i.x-a.x,y:i.y-a.y},positionAbsolute:i}}function wo({nodeId:e,dragItems:t,nodeInternals:n}){const r=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?r.find(o=>o.id===e):r[0],r]}const ja=(e,t,n,r)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const a=Array.from(o),i=t.getBoundingClientRect(),s={x:i.width*r[0],y:i.height*r[1]};return a.map(c=>{const l=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(l.left-i.left-s.x)/n,y:(l.top-i.top-s.y)/n,...Mi(c)}})};function Cn(e,t,n){return n===void 0?n:r=>{const o=t().nodeInternals.get(e);n(r,{...o})}}function ni({id:e,store:t,unselect:n=!1}){const{addSelectedNodes:r,unselectNodesAndEdges:o,multiSelectionActive:a,nodeInternals:i}=t.getState(),s=i.get(e);t.setState({nodesSelectionActive:!1}),s.selected?(n||s.selected&&a)&&o({nodes:[s]}):r([e])}function So(e){return(t,n,r)=>e==null?void 0:e(t,r)}function rc({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:a,selectNodesOnDrag:i}){const[s,c]=m.useState(!1),l=Ne(),u=m.useRef(),h=m.useRef({x:null,y:null}),d=m.useCallback(({sourceEvent:p})=>{const{transform:w,snapGrid:v,snapToGrid:E}=l.getState(),g=p.touches?p.touches[0].clientX:p.clientX,x=p.touches?p.touches[0].clientY:p.clientY,S={x:(g-w[0])/w[2],y:(x-w[1])/w[2]};return{xSnapped:E?v[0]*Math.round(S.x/v[0]):S.x,ySnapped:E?v[1]*Math.round(S.y/v[1]):S.y,...S}},[]);return m.useEffect(()=>{if(e!=null&&e.current){const p=Ze(e.current);if(t)p.on(".drag",null);else{const w=Am().on("start",v=>{var _;const{nodeInternals:E,multiSelectionActive:g,unselectNodesAndEdges:x,onNodeDragStart:S,onSelectionDragStart:y}=l.getState(),C=o?S:So(y);!i&&!g&&o&&((_=E.get(o))!=null&&_.selected||x()),o&&a&&i&&ni({id:o,store:l});const $=d(v);if(h.current=$,u.current=ov(E,$,o),C&&u.current){const[I,O]=wo({nodeId:o,dragItems:u.current,nodeInternals:E});C(v.sourceEvent,I,O)}}).on("drag",v=>{const{updateNodePositions:E,nodeInternals:g,nodeExtent:x,onNodeDrag:S,onSelectionDrag:y,snapGrid:C,snapToGrid:$}=l.getState(),_=d(v);if((h.current.x!==_.xSnapped||h.current.y!==_.ySnapped)&&u.current){h.current={x:_.xSnapped,y:_.ySnapped},u.current=u.current.map(O=>{const D={x:_.x-O.distance.x,y:_.y-O.distance.y};$&&(D.x=C[0]*Math.round(D.x/C[0]),D.y=C[1]*Math.round(D.y/C[1]));const B=nc(O,D,g,x);return O.position=B.position,O.positionAbsolute=B.positionAbsolute,O});const I=o?S:So(y);if(E(u.current,!0,!0),c(!0),I){const[O,D]=wo({nodeId:o,dragItems:u.current,nodeInternals:g});I(v.sourceEvent,O,D)}}}).on("end",v=>{if(c(!1),u.current){const{updateNodePositions:E,nodeInternals:g,onNodeDragStop:x,onSelectionDragStop:S}=l.getState(),y=o?x:So(S);if(E(u.current,!1,!1),y){const[C,$]=wo({nodeId:o,dragItems:u.current,nodeInternals:g});y(v.sourceEvent,C,$)}}}).filter(v=>{const E=v.target;return!v.button&&(!n||!Ha(E,`.${n}`,e))&&(!r||Ha(E,r,e))});return p.call(w),()=>{p.on(".drag",null)}}}},[e,t,n,r,a,l,o,i,d]),s}function oc(){const e=Ne();return m.useCallback(n=>{const{nodeInternals:r,nodeExtent:o,updateNodePositions:a,snapToGrid:i,snapGrid:s}=e.getState(),l=Array.from(r.values()).filter(u=>u.selected).map(u=>{if(u.positionAbsolute){const h={x:u.positionAbsolute.x+n.x,y:u.positionAbsolute.y+n.y};i&&(h.x=s[0]*Math.round(h.x/s[0]),h.y=s[1]*Math.round(h.y/s[1]));const d=nc(u,h,r,o);u.position=d.position,u.positionAbsolute=d.positionAbsolute}return u});a(l,!0,!0)},[])}const Tn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var $n=e=>{const t=({id:n,type:r,data:o,xPos:a,yPos:i,xPosOrigin:s,yPosOrigin:c,selected:l,onClick:u,onMouseEnter:h,onMouseMove:d,onMouseLeave:p,onContextMenu:w,onDoubleClick:v,style:E,className:g,isDraggable:x,isSelectable:S,isConnectable:y,isFocusable:C,selectNodesOnDrag:$,sourcePosition:_,targetPosition:I,hidden:O,resizeObserver:D,dragHandle:B,zIndex:Z,isParent:X,noDragClassName:b,noPanClassName:M,initialized:N,disableKeyboardA11y:A,ariaLabel:T,rfId:F})=>{const L=Ne(),H=m.useRef(null),J=m.useRef(_),G=m.useRef(I),q=m.useRef(r),W=S||x||u||h||d||p,te=oc(),re=Cn(n,L.getState,h),ie=Cn(n,L.getState,d),de=Cn(n,L.getState,p),Y=Cn(n,L.getState,w),xe=Cn(n,L.getState,v),Me=he=>{if(S&&(!$||!x)&&ni({id:n,store:L}),u){const ne=L.getState().nodeInternals.get(n);u(he,{...ne})}},fe=he=>{var P;const{snapGrid:ne,snapToGrid:ae}=L.getState();if(Bl.includes(he.key)&&S){const R=he.key==="Escape";R&&((P=H.current)==null||P.blur()),ni({id:n,store:L,unselect:R})}else if(!A&&x&&l&&Object.prototype.hasOwnProperty.call(Tn,he.key)){L.setState({ariaLiveMessage:`Moved selected node ${he.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`});const R=ae?ne[0]:5,k=ae?ne[1]:5,U=he.shiftKey?4:1;te({x:Tn[he.key].x*R*U,y:Tn[he.key].y*k*U})}};m.useEffect(()=>{if(H.current&&!O){const he=H.current;return D==null||D.observe(he),()=>D==null?void 0:D.unobserve(he)}},[O]),m.useEffect(()=>{const he=q.current!==r,ne=J.current!==_,ae=G.current!==I;H.current&&(he||ne||ae)&&(he&&(q.current=r),ne&&(J.current=_),ae&&(G.current=I),L.getState().updateNodeDimensions([{id:n,nodeElement:H.current,forceUpdate:!0}]))},[n,r,_,I]);const Pe=rc({nodeRef:H,disabled:O||!x,noDragClassName:b,handleSelector:B,nodeId:n,isSelectable:S,selectNodesOnDrag:$});return O?null:f("div",{className:ze(["react-flow__node",`react-flow__node-${r}`,{[M]:x},g,{selected:l,selectable:S,parent:X,dragging:Pe}]),ref:H,style:{zIndex:Z,transform:`translate(${s}px,${c}px)`,pointerEvents:W?"all":"none",visibility:N?"visible":"hidden",...E},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:re,onMouseMove:ie,onMouseLeave:de,onContextMenu:Y,onClick:Me,onDoubleClick:xe,onKeyDown:C?fe:void 0,tabIndex:C?0:void 0,role:C?"button":void 0,"aria-describedby":A?void 0:`${Ql}-${F}`,"aria-label":T,children:f(O0,{value:n,children:f(e,{id:n,data:o,type:r,xPos:a,yPos:i,selected:l,isConnectable:y,sourcePosition:_,targetPosition:I,dragging:Pe,dragHandle:B,zIndex:Z})})})};return t.displayName="NodeWrapper",m.memo(t)};function iv(e){const t={input:$n(e.input||Kl),default:$n(e.default||ti),output:$n(e.output||Zl),group:$n(e.group||Di)},n={},r=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,a)=>(o[a]=$n(e[a]||ti),o),n);return{...t,...r}}const av=({x:e,y:t,width:n,height:r,origin:o})=>!n||!r?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-r*o[1]},sv=typeof document<"u"?document:null;var Pr=(e=null,t={target:sv})=>{const[n,r]=m.useState(!1),o=m.useRef(new Set([])),[a,i]=m.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(u=>typeof u=="string").map(u=>u.split("+")),l=c.reduce((u,h)=>u.concat(...h),[]);return[c,l]}return[[],[]]},[e]);return m.useEffect(()=>{var s,c;if(e!==null){const l=d=>{if(Va(d))return!1;const p=Ua(d.code,i);o.current.add(d[p]),Wa(a,o.current,!1)&&(d.preventDefault(),r(!0))},u=d=>{if(Va(d))return!1;const p=Ua(d.code,i);Wa(a,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(d[p])},h=()=>{o.current.clear(),r(!1)};return(s=t==null?void 0:t.target)==null||s.addEventListener("keydown",l),(c=t==null?void 0:t.target)==null||c.addEventListener("keyup",u),window.addEventListener("blur",h),()=>{var d,p;(d=t==null?void 0:t.target)==null||d.removeEventListener("keydown",l),(p=t==null?void 0:t.target)==null||p.removeEventListener("keyup",u),window.removeEventListener("blur",h)}}},[e,r]),n};function Wa(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function Ua(e,t){return t.includes(e)?"code":"key"}function Va(e){var n;const t=((n=e.composedPath)==null?void 0:n.call(e)[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(t==null?void 0:t.nodeName)||(t==null?void 0:t.hasAttribute("contenteditable"))||!!(t!=null&&t.closest(".nokey"))}function ic(e,t,n,r){var a,i,s,c;if(!e.parentNode)return r;const o=t.get(e.parentNode);return ic(o,t,n,{x:(r.x??0)+(((a=o.position)==null?void 0:a.x)??0),y:(r.y??0)+(((i=o.position)==null?void 0:i.y)??0),z:(((s=o[Ie])==null?void 0:s.z)??0)>(r.z??0)?((c=o[Ie])==null?void 0:c.z)??0:r.z??0})}function Eo(e,t){const n=new Map,r={};return e.forEach(o=>{var c;const a=kl(o.zIndex)?o.zIndex:o.selected?1e3:0,i=t.get(o.id),s={width:i==null?void 0:i.width,height:i==null?void 0:i.height,...o,positionAbsolute:{x:o.position.x,y:o.position.y}};o.parentNode&&(s.parentNode=o.parentNode,r[o.parentNode]=!0),Object.defineProperty(s,Ie,{enumerable:!1,value:{handleBounds:(c=i==null?void 0:i[Ie])==null?void 0:c.handleBounds,z:a}}),n.set(o.id,s)}),n.forEach(o=>{var a;if(o.parentNode&&!n.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||r[o.id]){const{x:i,y:s,z:c}=ic(o,n,r,{...o.position,z:((a=o[Ie])==null?void 0:a.z)??0});o.positionAbsolute={x:i,y:s},o[Ie].z=c,r[o.id]&&(o[Ie].isParent=!0)}}),n}function ac(e,t={}){const{nodeInternals:n,width:r,height:o,minZoom:a,maxZoom:i,d3Zoom:s,d3Selection:c,fitViewOnInitDone:l,fitViewOnInit:u}=e();if((t.initial&&!l&&u||!t.initial)&&s&&c){const h=Array.from(n.values()).filter(p=>t.includeHiddenNodes?p.width&&p.height:!p.hidden),d=h.every(p=>p.width&&p.height);if(h.length>0&&d){const p=Xr(h),[w,v,E]=Vl(p,r,o,t.minZoom??a,t.maxZoom??i,t.padding??.1),g=Pt.translate(w,v).scale(E);return typeof t.duration=="number"&&t.duration>0?s.transform(zt(c,t.duration),g):s.transform(c,g),!0}}return!1}function lv(e,t){return e.forEach(n=>{const r=t.get(n.id);r&&t.set(r.id,{...r,[Ie]:r[Ie],selected:n.selected})}),new Map(t)}function cv(e,t){return t.map(n=>{const r=e.find(o=>o.id===n.id);return r&&(n.selected=r.selected),n})}function lr({changedNodes:e,changedEdges:t,get:n,set:r}){const{nodeInternals:o,edges:a,onNodesChange:i,onEdgesChange:s,hasDefaultNodes:c,hasDefaultEdges:l}=n();e!=null&&e.length&&(c&&r({nodeInternals:lv(e,o)}),i==null||i(e)),t!=null&&t.length&&(l&&r({edges:cv(t,a)}),s==null||s(t))}const Dt=()=>{},uv={zoomIn:Dt,zoomOut:Dt,zoomTo:Dt,getZoom:()=>1,setViewport:Dt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:Dt,setCenter:Dt,fitBounds:Dt,project:e=>e,viewportInitialized:!1},dv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),fv=()=>{const e=Ne(),{d3Zoom:t,d3Selection:n}=ve(dv,He);return m.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(zt(n,o==null?void 0:o.duration),1.2),zoomOut:o=>t.scaleBy(zt(n,o==null?void 0:o.duration),1/1.2),zoomTo:(o,a)=>t.scaleTo(zt(n,a==null?void 0:a.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,a)=>{const[i,s,c]=e.getState().transform,l=Pt.translate(o.x??i,o.y??s).scale(o.zoom??c);t.transform(zt(n,a==null?void 0:a.duration),l)},getViewport:()=>{const[o,a,i]=e.getState().transform;return{x:o,y:a,zoom:i}},fitView:o=>ac(e.getState,o),setCenter:(o,a,i)=>{const{width:s,height:c,maxZoom:l}=e.getState(),u=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:l,h=s/2-o*u,d=c/2-a*u,p=Pt.translate(h,d).scale(u);t.transform(zt(n,i==null?void 0:i.duration),p)},fitBounds:(o,a)=>{const{width:i,height:s,minZoom:c,maxZoom:l}=e.getState(),[u,h,d]=Vl(o,i,s,c,l,(a==null?void 0:a.padding)??.1),p=Pt.translate(u,h).scale(d);t.transform(zt(n,a==null?void 0:a.duration),p)},project:o=>{const{transform:a,snapToGrid:i,snapGrid:s}=e.getState();return L0(o,a,i,s)},viewportInitialized:!0}:uv,[t,n])};function Yr(){const e=fv(),t=Ne(),n=m.useCallback(()=>{const{nodeInternals:v}=t.getState();return Array.from(v.values()).map(g=>({...g}))},[]),r=m.useCallback(v=>{const{nodeInternals:E}=t.getState();return E.get(v)},[]),o=m.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(E=>({...E}))},[]),a=m.useCallback(v=>{const{edges:E=[]}=t.getState();return E.find(g=>g.id===v)},[]),i=m.useCallback(v=>{const{nodeInternals:E,setNodes:g,hasDefaultNodes:x,onNodesChange:S}=t.getState(),y=Array.from(E.values()),C=typeof v=="function"?v(y):v;if(x)g(C);else if(S){const $=C.length===0?y.map(_=>({type:"remove",id:_.id})):C.map(_=>({item:_,type:"reset"}));S($)}},[]),s=m.useCallback(v=>{const{edges:E=[],setEdges:g,hasDefaultEdges:x,onEdgesChange:S}=t.getState(),y=typeof v=="function"?v(E):v;if(x)g(y);else if(S){const C=y.length===0?E.map($=>({type:"remove",id:$.id})):y.map($=>({item:$,type:"reset"}));S(C)}},[]),c=m.useCallback(v=>{const E=Array.isArray(v)?v:[v],{nodeInternals:g,setNodes:x,hasDefaultNodes:S,onNodesChange:y}=t.getState();if(S){const $=[...Array.from(g.values()),...E];x($)}else if(y){const C=E.map($=>({item:$,type:"add"}));y(C)}},[]),l=m.useCallback(v=>{const E=Array.isArray(v)?v:[v],{edges:g=[],setEdges:x,hasDefaultEdges:S,onEdgesChange:y}=t.getState();if(S)x([...g,...E]);else if(y){const C=E.map($=>({item:$,type:"add"}));y(C)}},[]),u=m.useCallback(()=>{const{nodeInternals:v,edges:E=[],transform:g}=t.getState(),x=Array.from(v.values()),[S,y,C]=g;return{nodes:x.map($=>({...$})),edges:E.map($=>({...$})),viewport:{x:S,y,zoom:C}}},[]),h=m.useCallback(({nodes:v,edges:E})=>{const{nodeInternals:g,edges:x,hasDefaultNodes:S,hasDefaultEdges:y,onNodesDelete:C,onEdgesDelete:$,onNodesChange:_,onEdgesChange:I}=t.getState(),O=Array.from(g.values()),D=(v||[]).map(M=>M.id),B=(E||[]).map(M=>M.id),Z=O.reduce((M,N)=>{const A=!D.includes(N.id)&&N.parentNode&&M.find(F=>F.id===N.parentNode);return(typeof N.deletable=="boolean"?N.deletable:!0)&&(D.includes(N.id)||A)&&M.push(N),M},[]),X=x.filter(M=>typeof M.deletable=="boolean"?M.deletable:!0),b=X.filter(M=>B.includes(M.id));if(Z||b){const M=Ul(Z,X),N=[...b,...M],A=N.reduce((T,F)=>(T.includes(F.id)||T.push(F.id),T),[]);if((y||S)&&(y&&t.setState({edges:x.filter(T=>!A.includes(T.id))}),S&&(Z.forEach(T=>{g.delete(T.id)}),t.setState({nodeInternals:new Map(g)}))),A.length>0&&($==null||$(N),I&&I(A.map(T=>({id:T,type:"remove"})))),Z.length>0&&(C==null||C(Z),_)){const T=Z.map(F=>({id:F.id,type:"remove"}));_(T)}}},[]),d=m.useCallback(v=>{const E=P0(v),g=E?null:t.getState().nodeInternals.get(v.id);return[E?v:Ia(g),g,E]},[]),p=m.useCallback((v,E=!0,g)=>{const[x,S,y]=d(v);return x?(g||Array.from(t.getState().nodeInternals.values())).filter(C=>{if(!y&&(C.id===S.id||!C.positionAbsolute))return!1;const $=Ia(C),_=Zo($,x);return E&&_>0||_>=v.width*v.height}):[]},[]),w=m.useCallback((v,E,g=!0)=>{const[x]=d(v);if(!x)return!1;const S=Zo(x,E);return g&&S>0||S>=v.width*v.height},[]);return m.useMemo(()=>({...e,getNodes:n,getNode:r,getEdges:o,getEdge:a,setNodes:i,setEdges:s,addNodes:c,addEdges:l,toObject:u,deleteElements:h,getIntersectingNodes:p,isNodeIntersecting:w}),[e,n,r,o,a,i,s,c,l,u,h,p,w])}var hv=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=Ne(),{deleteElements:r}=Yr(),o=Pr(e),a=Pr(t);m.useEffect(()=>{if(o){const{nodeInternals:i,edges:s}=n.getState(),l=Array.from(i.values()).filter(h=>h.selected),u=s.filter(h=>h.selected);r({nodes:l,edges:u}),n.setState({nodesSelectionActive:!1})}},[o]),m.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function pv(e){const t=Ne();m.useEffect(()=>{let n;const r=()=>{if(!e.current)return;const o=Mi(e.current);o.height===0||o.width,t.setState({width:o.width||500,height:o.height||500})};return r(),window.addEventListener("resize",r),e.current&&(n=new ResizeObserver(()=>r()),n.observe(e.current)),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}},[])}const Oi={position:"absolute",width:"100%",height:"100%",top:0,left:0},gv=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Co=e=>({x:e.x,y:e.y,zoom:e.k}),cr=(e,t)=>e.target.closest(`.${t}`),mv=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler}),yv=({onMove:e,onMoveStart:t,onMoveEnd:n,zoomOnScroll:r=!0,zoomOnPinch:o=!0,panOnScroll:a=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=nn.Free,zoomOnDoubleClick:c=!0,selectionKeyPressed:l,elementsSelectable:u,panOnDrag:h=!0,defaultViewport:d,translateExtent:p,minZoom:w,maxZoom:v,zoomActivationKeyCode:E,preventScrolling:g=!0,children:x,noWheelClassName:S,noPanClassName:y})=>{const C=m.useRef(),$=Ne(),_=m.useRef(!1),I=m.useRef(null),O=m.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:B,d3ZoomHandler:Z}=ve(mv,He),X=Pr(E);return pv(I),m.useEffect(()=>{if(I.current){const b=Il().scaleExtent([w,v]).translateExtent(p),M=Ze(I.current).call(b),N=rn(d.x,p[0][0],p[1][0]),A=rn(d.y,p[0][1],p[1][1]),T=rn(d.zoom,w,v),F=Pt.translate(N,A).scale(T);b.transform(M,F),$.setState({d3Zoom:b,d3Selection:M,d3ZoomHandler:M.on("wheel.zoom"),transform:[N,A,T],domNode:I.current.closest(".react-flow")})}},[]),m.useEffect(()=>{B&&D&&(a&&!X?B.on("wheel.zoom",b=>{if(cr(b,S))return!1;b.preventDefault(),b.stopImmediatePropagation();const M=B.property("__zoom").k||1;if(b.ctrlKey&&o){const F=nt(b),L=-b.deltaY*(b.deltaMode===1?.05:b.deltaMode?1:.002)*10,H=M*Math.pow(2,L);D.scaleTo(B,H,F);return}const N=b.deltaMode===1?20:1,A=s===nn.Vertical?0:b.deltaX*N,T=s===nn.Horizontal?0:b.deltaY*N;D.translateBy(B,-(A/M)*i,-(T/M)*i)}):typeof Z<"u"&&B.on("wheel.zoom",function(b,M){if(!g||cr(b,S))return null;b.preventDefault(),Z.call(this,b,M)}))},[a,s,B,D,Z,X,o,g,S]),m.useEffect(()=>{D&&(l&&!_.current?D.on("zoom",null):l||D.on("zoom",b=>{const{onViewportChange:M}=$.getState();if($.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),e||M){const N=Co(b.transform);M==null||M(N),e==null||e(b.sourceEvent,N)}}))},[l,D,e]),m.useEffect(()=>{D&&D.on("start",b=>{var N;if(!b.sourceEvent)return null;const{onViewportChangeStart:M}=$.getState();if(_.current=!0,((N=b.sourceEvent)==null?void 0:N.type)==="mousedown"&&$.setState({paneDragging:!0}),t||M){const A=Co(b.transform);O.current=A,M==null||M(A),t==null||t(b.sourceEvent,A)}})},[D,t]),m.useEffect(()=>{D&&D.on("end",b=>{if(!b.sourceEvent)return null;const{onViewportChangeEnd:M}=$.getState();if(_.current=!1,$.setState({paneDragging:!1}),(n||M)&&gv(O.current,b.transform)){const N=Co(b.transform);O.current=N,clearTimeout(C.current),C.current=setTimeout(()=>{M==null||M(N),n==null||n(b.sourceEvent,N)},a?150:0)}})},[D,n,a]),m.useEffect(()=>{D&&D.filter(b=>{const M=X||r,N=o&&b.ctrlKey;return b.button===1&&b.type==="mousedown"&&b.target.closest(".react-flow__node")?!0:!h&&!M&&!a&&!c&&!o||l||!c&&b.type==="dblclick"||cr(b,S)&&b.type==="wheel"||cr(b,y)&&b.type!=="wheel"||!o&&b.ctrlKey&&b.type==="wheel"||!M&&!a&&!N&&b.type==="wheel"||!h&&(b.type==="mousedown"||b.type==="touchstart")?!1:(!b.ctrlKey||b.type==="wheel")&&(!b.button||b.button<=1)})},[D,r,o,a,c,h,l,u,X]),f("div",{className:"react-flow__renderer",ref:I,style:Oi,children:x})};function Ga(e,t){const n=e.find(r=>r.id===t.parentNode);if(n){const r=t.position.x+t.width-n.width,o=t.position.y+t.height-n.height;if(r>0||o>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,r>0&&(n.style.width+=r),o>0&&(n.style.height+=o),t.position.x<0){const a=Math.abs(t.position.x);n.position.x=n.position.x-a,n.style.width+=a,t.position.x=0}if(t.position.y<0){const a=Math.abs(t.position.y);n.position.y=n.position.y-a,n.style.height+=a,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function sc(e,t){if(e.some(r=>r.type==="reset"))return e.filter(r=>r.type==="reset").map(r=>r.item);const n=e.filter(r=>r.type==="add").map(r=>r.item);return t.reduce((r,o)=>{const a=e.find(i=>i.id===o.id);if(a)switch(a.type){case"select":return r.push({...o,selected:a.selected}),r;case"position":{const i={...o};return typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Ga(r,i),r.push(i),r}case"dimensions":{const i={...o};return typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),i.expandParent&&Ga(r,i),r.push(i),r}case"remove":return r}return r.push(o),r},n)}function zi(e,t){return sc(e,t)}function vv(e,t){return sc(e,t)}const St=(e,t)=>({id:e,type:"select",selected:t});function Zt(e,t){return e.reduce((n,r)=>{const o=t.includes(r.id);return!r.selected&&o?(r.selected=!0,n.push(St(r.id,!0))):r.selected&&!o&&(r.selected=!1,n.push(St(r.id,!1))),n},[])}function Xa(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const xv=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable}),Ya={startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},lc=m.memo(({selectionKeyPressed:e})=>{const t=Ne(),n=m.useRef(0),r=m.useRef(0),o=m.useRef(),[a,i]=m.useState(Ya),{userSelectionActive:s,elementsSelectable:c}=ve(xv,He);if(!c||!(s||e))return null;const u=()=>{i(Ya),t.setState({userSelectionActive:!1}),n.current=0,r.current=0};return f("div",{className:"react-flow__selectionpane react-flow__container",onMouseDown:v=>{const E=v.target.closest(".react-flow");o.current=E.getBoundingClientRect();const g=Xa(v,o.current);i({width:0,height:0,startX:g.x,startY:g.y,x:g.x,y:g.y,draw:!0}),t.setState({userSelectionActive:!0,nodesSelectionActive:!1})},onMouseMove:v=>{if(!e||!a.draw||!o.current)return;const E=Xa(v,o.current),g=a.startX??0,x=a.startY??0,S={...a,x:E.x<g?E.x:g,y:E.y<x?E.y:x,width:Math.abs(E.x-g),height:Math.abs(E.y-x)},{nodeInternals:y,edges:C,transform:$,onNodesChange:_,onEdgesChange:I}=t.getState(),O=Array.from(y.values()),D=Wl(y,S,$,!1,!0),B=Ul(D,C).map(X=>X.id),Z=D.map(X=>X.id);if(n.current!==Z.length){n.current=Z.length;const X=Zt(O,Z);X.length&&(_==null||_(X))}if(r.current!==B.length){r.current=B.length;const X=Zt(C,B);X.length&&(I==null||I(X))}i(S)},onMouseUp:()=>{t.setState({nodesSelectionActive:n.current>0}),u()},onMouseLeave:()=>{t.setState({nodesSelectionActive:!1}),u()},children:a.draw&&f("div",{className:"react-flow__selection react-flow__container",style:{width:a.width,height:a.height,transform:`translate(${a.x}px, ${a.y}px)`}})})});lc.displayName="UserSelection";const bv=e=>({transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive,...Xr(Array.from(e.nodeInternals.values()).filter(t=>t.selected))}),wv=e=>{const t=Array.from(e.nodeInternals.values()).filter(n=>n.selected);return Xr(t)};function Sv({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ne(),{transformString:o,userSelectionActive:a}=ve(bv,He),{width:i,height:s,x:c,y:l}=ve(wv,He),u=oc(),h=m.useRef(null);if(m.useEffect(()=>{var w;n||(w=h.current)==null||w.focus()},[n]),rc({nodeRef:h}),a||!i||!s)return null;const d=e?w=>{const v=Array.from(r.getState().nodeInternals.values()).filter(E=>E.selected);e(w,v)}:void 0,p=w=>{Object.prototype.hasOwnProperty.call(Tn,w.key)&&u(Tn[w.key])};return f("div",{className:ze(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:f("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s,top:l,left:c}})})}var Ev=m.memo(Sv);const Cv=e=>e.paneDragging;function $v({onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:o,onWheel:a}){const i=ve(Cv);return f("div",{className:ze(["react-flow__pane",{dragging:i}]),onClick:e,onMouseEnter:t,onMouseMove:n,onMouseLeave:r,onContextMenu:o,onWheel:a,style:Oi})}const _v=e=>e.nodesSelectionActive,cc=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:s,onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyCode:h,multiSelectionKeyCode:d,zoomActivationKeyCode:p,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:g,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:y,panOnDrag:C,defaultViewport:$,translateExtent:_,minZoom:I,maxZoom:O,preventScrolling:D,onSelectionContextMenu:B,noWheelClassName:Z,noPanClassName:X,disableKeyboardA11y:b})=>{const M=Ne(),N=ve(_v),A=Pr(h);hv({deleteKeyCode:s,multiSelectionKeyCode:d});const T=H=>{t==null||t(H),M.getState().resetSelectedElements(),M.setState({nodesSelectionActive:!1})},F=a?H=>a(H):void 0,L=i?H=>i(H):void 0;return z(yv,{onMove:c,onMoveStart:l,onMoveEnd:u,selectionKeyPressed:A,elementsSelectable:w,zoomOnScroll:v,zoomOnPinch:E,panOnScroll:g,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:y,panOnDrag:C,defaultViewport:$,translateExtent:_,minZoom:I,maxZoom:O,zoomActivationKeyCode:p,preventScrolling:D,noWheelClassName:Z,noPanClassName:X,children:[e,f(lc,{selectionKeyPressed:A}),N&&f(Ev,{onSelectionContextMenu:B,noPanClassName:X,disableKeyboardA11y:b}),f($v,{onClick:T,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:F,onWheel:L})]})};cc.displayName="FlowRenderer";var Nv=m.memo(cc);function Mv(e){return ve(m.useCallback(n=>e?Wl(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):Array.from(n.nodeInternals.values()),[e]))}const Pv=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions}),uc=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,updateNodeDimensions:a}=ve(Pv,He),i=Mv(e.onlyRenderVisibleElements),s=m.useRef(),c=m.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(u=>{const h=u.map(d=>({id:d.target.getAttribute("data-id"),nodeElement:d.target,forceUpdate:!0}));a(h)});return s.current=l,l},[]);return m.useEffect(()=>()=>{var l;(l=s==null?void 0:s.current)==null||l.disconnect()},[]),f("div",{className:"react-flow__nodes",style:Oi,children:i.map(l=>{var y,C;let u=l.type||"default";e.nodeTypes[u]||(u="default");const h=e.nodeTypes[u]||e.nodeTypes.default,d=!!(l.draggable||t&&typeof l.draggable>"u"),p=!!(l.selectable||o&&typeof l.selectable>"u"),w=!!(l.connectable||n&&typeof l.connectable>"u"),v=!!(l.focusable||r&&typeof l.focusable>"u"),E=e.nodeExtent?Pi(l.positionAbsolute,e.nodeExtent):l.positionAbsolute,g=(E==null?void 0:E.x)??0,x=(E==null?void 0:E.y)??0,S=av({x:g,y:x,width:l.width??0,height:l.height??0,origin:e.nodeOrigin});return f(h,{id:l.id,className:l.className,style:l.style,type:u,data:l.data,sourcePosition:l.sourcePosition||V.Bottom,targetPosition:l.targetPosition||V.Top,hidden:l.hidden,xPos:g,yPos:x,xPosOrigin:S.x,yPosOrigin:S.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!l.selected,isDraggable:d,isSelectable:p,isConnectable:w,isFocusable:v,resizeObserver:c,dragHandle:l.dragHandle,zIndex:((y=l[Ie])==null?void 0:y.z)??0,isParent:!!((C=l[Ie])!=null&&C.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!l.width&&!!l.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:l.ariaLabel},l.id)})})};uc.displayName="NodeRenderer";var Iv=m.memo(uc);const Tv=[{level:0,isMaxLevel:!0,edges:[]}];function Rv(e,t,n=!1){let r=-1;const o=e.reduce((i,s)=>{var u,h,d,p;const c=kl(s.zIndex);let l=c?s.zIndex:0;return n&&(l=c?s.zIndex:Math.max(((h=(u=t.get(s.source))==null?void 0:u[Ie])==null?void 0:h.z)||0,((p=(d=t.get(s.target))==null?void 0:d[Ie])==null?void 0:p.z)||0)),i[l]?i[l].push(s):i[l]=[s],r=l>r?l:r,i},{}),a=Object.entries(o).map(([i,s])=>{const c=+i;return{edges:s,level:c,isMaxLevel:c===r}});return a.length===0?Tv:a}function Av(e,t,n){const r=ve(m.useCallback(o=>e?o.edges.filter(a=>{const i=t.get(a.source),s=t.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(s==null?void 0:s.width)&&(s==null?void 0:s.height)&&rv({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:s.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:s.width,targetHeight:s.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return Rv(r,t,n)}const Dv={[V.Left]:V.Right,[V.Right]:V.Left,[V.Top]:V.Bottom,[V.Bottom]:V.Top},dc=({connectionNodeId:e,connectionHandleType:t,connectionLineStyle:n,connectionLineType:r=Et.Bezier,isConnectable:o,CustomConnectionLineComponent:a})=>{var C,$,_;const{fromNode:i,handleId:s,toX:c,toY:l}=ve(m.useCallback(I=>({fromNode:I.nodeInternals.get(e),handleId:I.connectionHandleId,toX:(I.connectionPosition.x-I.transform[0])/I.transform[2],toY:(I.connectionPosition.y-I.transform[1])/I.transform[2]}),[e]),He),u=(C=i==null?void 0:i[Ie])==null?void 0:C.handleBounds;if(!i||!o||!(u!=null&&u[t]))return null;const h=u[t],d=s?h.find(I=>I.id===s):h[0],p=d?d.x+d.width/2:((i==null?void 0:i.width)??0)/2,w=d?d.y+d.height/2:(i==null?void 0:i.height)??0,v=((($=i==null?void 0:i.positionAbsolute)==null?void 0:$.x)||0)+p,E=(((_=i==null?void 0:i.positionAbsolute)==null?void 0:_.y)||0)+w,g=d==null?void 0:d.position;if(!g)return null;const x=Dv[g];if(a)return f("g",{className:"react-flow__connection",children:f(a,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:d,fromX:v,fromY:E,toX:c,toY:l,fromPosition:g,toPosition:x})});let S="";const y={sourceX:v,sourceY:E,sourcePosition:g,targetX:c,targetY:l,targetPosition:x};return r===Et.Bezier?[S]=Fl(y):r===Et.Step?[S]=Jo({...y,borderRadius:0}):r===Et.SmoothStep?[S]=Jo(y):r===Et.SimpleBezier?[S]=Ll(y):S=`M${v},${E} ${c},${l}`,f("g",{className:"react-flow__connection",children:f("path",{d:S,fill:"none",className:"react-flow__connection-path",style:n})})};dc.displayName="ConnectionLine";const Ov=({color:e="none",strokeWidth:t=1})=>f("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:"none",points:"-5,-4 0,0 -5,4"}),zv=({color:e="none",strokeWidth:t=1})=>f("polyline",{stroke:e,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:t,fill:e,points:"-5,-4 0,0 -5,4 -5,-4"}),Ka={[Nr.Arrow]:Ov,[Nr.ArrowClosed]:zv};function kv(e){return m.useMemo(()=>Object.prototype.hasOwnProperty.call(Ka,e)?Ka[e]:null,[e])}const Bv=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{const c=kv(t);return c?f("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:s,refX:"0",refY:"0",children:f(c,{color:n,strokeWidth:i})}):null},Lv=({defaultColor:e,rfId:t})=>n=>{const r=[];return n.edges.reduce((o,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const s=ei(i,t);r.includes(s)||(o.push({id:s,color:i.color||e,...i}),r.push(s))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))},fc=({defaultColor:e,rfId:t})=>{const n=ve(m.useCallback(Lv({defaultColor:e,rfId:t}),[e,t]),(r,o)=>!(r.length!==o.length||r.some((a,i)=>a.id!==o[i].id)));return f("defs",{children:n.map(r=>f(Bv,{id:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient},r.id))})};fc.displayName="MarkerDefinitions";var Fv=m.memo(fc);const Hv=e=>({connectionNodeId:e.connectionNodeId,connectionHandleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals}),hc=e=>{const{connectionNodeId:t,connectionHandleType:n,nodesConnectable:r,edgesFocusable:o,elementsSelectable:a,width:i,height:s,connectionMode:c,nodeInternals:l}=ve(Hv,He),u=Av(e.onlyRenderVisibleElements,l,e.elevateEdgesOnSelect);if(!i)return null;const{connectionLineType:h,defaultMarkerColor:d,connectionLineStyle:p,connectionLineComponent:w,connectionLineContainerStyle:v}=e,E=t&&n;return z(ue,{children:[u.map(({level:g,edges:x,isMaxLevel:S})=>z("svg",{style:{zIndex:g},width:i,height:s,className:"react-flow__edges react-flow__container",children:[S&&f(Fv,{defaultColor:d,rfId:e.rfId}),f("g",{children:x.map(y=>{const[C,$,_]=Fa(l.get(y.source)),[I,O,D]=Fa(l.get(y.target));if(!_||!D)return null;let B=y.type||"default";e.edgeTypes[B]||(B="default");const Z=e.edgeTypes[B]||e.edgeTypes.default,X=c===dn.Strict?O.target:O.target||O.source,b=La($.source,y.sourceHandle||null),M=La(X,y.targetHandle||null),N=(b==null?void 0:b.position)||V.Bottom,A=(M==null?void 0:M.position)||V.Top,T=!!(y.focusable||o&&typeof y.focusable>"u");if(!b||!M)return I0(`Couldn't create edge for ${b?"target":"source"} handle id: ${b?y.targetHandle:y.sourceHandle}; edge id: ${y.id}. Help: https://reactflow.dev/error#800`),null;const{sourceX:F,sourceY:L,targetX:H,targetY:J}=nv(C,b,N,I,M,A);return f(Z,{id:y.id,className:ze([y.className,e.noPanClassName]),type:B,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:F,sourceY:L,targetX:H,targetY:J,sourcePosition:N,targetPosition:A,elementsSelectable:a,onEdgeUpdate:e.onEdgeUpdate,onContextMenu:e.onEdgeContextMenu,onMouseEnter:e.onEdgeMouseEnter,onMouseMove:e.onEdgeMouseMove,onMouseLeave:e.onEdgeMouseLeave,onClick:e.onEdgeClick,edgeUpdaterRadius:e.edgeUpdaterRadius,onEdgeDoubleClick:e.onEdgeDoubleClick,onEdgeUpdateStart:e.onEdgeUpdateStart,onEdgeUpdateEnd:e.onEdgeUpdateEnd,rfId:e.rfId,ariaLabel:y.ariaLabel,isFocusable:T,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth},y.id)})})]},g)),E&&f("svg",{style:v,width:i,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container",children:f(dc,{connectionNodeId:t,connectionHandleType:n,connectionLineStyle:p,connectionLineType:h,isConnectable:r,CustomConnectionLineComponent:w})})]})};hc.displayName="EdgeRenderer";var jv=m.memo(hc);const Wv=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Uv({children:e}){const t=ve(Wv);return f("div",{className:"react-flow__viewport react-flow__container",style:{transform:t},children:e})}function Vv(e){const t=Yr(),n=m.useRef(!1);m.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const pc=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:o,onInit:a,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:c,onEdgeDoubleClick:l,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:p,onSelectionContextMenu:w,connectionLineType:v,connectionLineStyle:E,connectionLineComponent:g,connectionLineContainerStyle:x,selectionKeyCode:S,multiSelectionKeyCode:y,zoomActivationKeyCode:C,deleteKeyCode:$,onlyRenderVisibleElements:_,elementsSelectable:I,selectNodesOnDrag:O,defaultViewport:D,translateExtent:B,minZoom:Z,maxZoom:X,preventScrolling:b,defaultMarkerColor:M,zoomOnScroll:N,zoomOnPinch:A,panOnScroll:T,panOnScrollSpeed:F,panOnScrollMode:L,zoomOnDoubleClick:H,panOnDrag:J,onPaneClick:G,onPaneMouseEnter:q,onPaneMouseMove:W,onPaneMouseLeave:te,onPaneScroll:re,onPaneContextMenu:ie,onEdgeUpdate:de,onEdgeContextMenu:Y,onEdgeMouseEnter:xe,onEdgeMouseMove:Me,onEdgeMouseLeave:fe,edgeUpdaterRadius:Pe,onEdgeUpdateStart:he,onEdgeUpdateEnd:ne,noDragClassName:ae,noWheelClassName:P,noPanClassName:R,elevateEdgesOnSelect:k,disableKeyboardA11y:U,nodeOrigin:K,nodeExtent:ce,rfId:oe})=>(Vv(a),f(Nv,{onPaneClick:G,onPaneMouseEnter:q,onPaneMouseMove:W,onPaneMouseLeave:te,onPaneContextMenu:ie,onPaneScroll:re,deleteKeyCode:$,selectionKeyCode:S,multiSelectionKeyCode:y,zoomActivationKeyCode:C,elementsSelectable:I,onMove:n,onMoveStart:r,onMoveEnd:o,zoomOnScroll:N,zoomOnPinch:A,zoomOnDoubleClick:H,panOnScroll:T,panOnScrollSpeed:F,panOnScrollMode:L,panOnDrag:J,defaultViewport:D,translateExtent:B,minZoom:Z,maxZoom:X,onSelectionContextMenu:w,preventScrolling:b,noDragClassName:ae,noWheelClassName:P,noPanClassName:R,disableKeyboardA11y:U,children:z(Uv,{children:[f(jv,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:l,connectionLineType:v,connectionLineStyle:E,connectionLineComponent:g,connectionLineContainerStyle:x,onEdgeUpdate:de,onlyRenderVisibleElements:_,onEdgeContextMenu:Y,onEdgeMouseEnter:xe,onEdgeMouseMove:Me,onEdgeMouseLeave:fe,onEdgeUpdateStart:he,onEdgeUpdateEnd:ne,edgeUpdaterRadius:Pe,defaultMarkerColor:M,noPanClassName:R,elevateEdgesOnSelect:!!k,disableKeyboardA11y:U,rfId:oe}),f("div",{className:"react-flow__edgelabel-renderer",id:"edgelabel-portal"}),f(Iv,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:u,onNodeMouseMove:h,onNodeMouseLeave:d,onNodeContextMenu:p,selectNodesOnDrag:O,onlyRenderVisibleElements:_,noPanClassName:R,noDragClassName:ae,disableKeyboardA11y:U,nodeOrigin:K,nodeExtent:ce,rfId:oe})]})}));pc.displayName="GraphView";var Gv=m.memo(pc);const ri=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ur={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ri,nodeExtent:ri,nodesSelectionActive:!1,userSelectionActive:!1,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:dn.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,elementsSelectable:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectOnClick:!0,ariaLiveMessage:""},Xv=()=>Ep((e,t)=>({...ur,setNodes:n=>{e({nodeInternals:Eo(n,t().nodeInternals)})},setEdges:n=>{const{defaultEdgeOptions:r={}}=t();e({edges:n.map(o=>({...r,...o}))})},setDefaultNodesAndEdges:(n,r)=>{const o=typeof n<"u",a=typeof r<"u",i=o?Eo(n,new Map):new Map;e({nodeInternals:i,edges:a?r:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:s,domNode:c,nodeOrigin:l}=t(),u=c==null?void 0:c.querySelector(".react-flow__viewport");if(!u)return;const h=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(h.transform),p=n.reduce((v,E)=>{const g=o.get(E.id);if(g){const x=Mi(E.nodeElement);!!(x.width&&x.height&&(g.width!==x.width||g.height!==x.height||E.forceUpdate))&&(o.set(g.id,{...g,[Ie]:{...g[Ie],handleBounds:{source:ja(".source",E.nodeElement,d,l),target:ja(".target",E.nodeElement,d,l)}},...x}),v.push({id:g.id,type:"dimensions",dimensions:x}))}return v},[]),w=i||a&&!i&&ac(t,{initial:!0,...s});e({nodeInternals:new Map(o),fitViewOnInitDone:w}),(p==null?void 0:p.length)>0&&(r==null||r(p))},updateNodePositions:(n,r=!0,o=!1)=>{const{onNodesChange:a,nodeInternals:i,hasDefaultNodes:s}=t();if(s||a){const c=n.map(l=>{const u={id:l.id,type:"position",dragging:o};return r&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});if(c!=null&&c.length){if(s){const l=zi(c,Array.from(i.values())),u=Eo(l,i);e({nodeInternals:u})}a==null||a(c)}}},addSelectedNodes:n=>{const{multiSelectionActive:r,nodeInternals:o,edges:a}=t();let i,s=null;r?i=n.map(c=>St(c,!0)):(i=Zt(Array.from(o.values()),n),s=Zt(a,[])),lr({changedNodes:i,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:o,nodeInternals:a}=t();let i,s=null;r?i=n.map(c=>St(c,!0)):(i=Zt(o,n),s=Zt(Array.from(a.values()),[])),lr({changedNodes:s,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{nodeInternals:o,edges:a}=t(),i=n||Array.from(o.values()),s=r||a,c=i.map(u=>(u.selected=!1,St(u.id,!1))),l=s.map(u=>St(u.id,!1));lr({changedNodes:c,changedEdges:l,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:o}=t();r==null||r.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:o}=t();r==null||r.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{const{d3Zoom:r}=t();r==null||r.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{nodeInternals:n,edges:r}=t(),a=Array.from(n.values()).filter(s=>s.selected).map(s=>St(s.id,!1)),i=r.filter(s=>s.selected).map(s=>St(s.id,!1));lr({changedNodes:a,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:r}=t();r.forEach(o=>{o.positionAbsolute=Pi(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},cancelConnection:()=>e({connectionNodeId:ur.connectionNodeId,connectionHandleId:ur.connectionHandleId}),reset:()=>e({...ur})})),gc=({children:e})=>{const t=m.useRef(null);return t.current||(t.current=Xv()),f(E0,{value:t.current,children:e})};gc.displayName="ReactFlowProvider";const mc=({children:e})=>{let t=!0;try{Ne()}catch{t=!1}return t?f(ue,{children:e}):f(gc,{children:e})};mc.displayName="ReactFlowWrapper";function qa(e,t){return m.useRef(null),m.useMemo(()=>t(e),[e])}const Yv={input:Kl,default:ti,output:Zl,group:Di},Kv={default:Mr,straight:Ri,step:Ti,smoothstep:Gr,simplebezier:Ii},qv=[0,0],Zv=[15,15],Jv={x:0,y:0,zoom:1},Qv={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yc=m.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:a=Yv,edgeTypes:i=Kv,onNodeClick:s,onEdgeClick:c,onInit:l,onMove:u,onMoveStart:h,onMoveEnd:d,onConnect:p,onConnectStart:w,onConnectEnd:v,onClickConnectStart:E,onClickConnectEnd:g,onNodeMouseEnter:x,onNodeMouseMove:S,onNodeMouseLeave:y,onNodeContextMenu:C,onNodeDoubleClick:$,onNodeDragStart:_,onNodeDrag:I,onNodeDragStop:O,onNodesDelete:D,onEdgesDelete:B,onSelectionChange:Z,onSelectionDragStart:X,onSelectionDrag:b,onSelectionDragStop:M,onSelectionContextMenu:N,connectionMode:A=dn.Strict,connectionLineType:T=Et.Bezier,connectionLineStyle:F,connectionLineComponent:L,connectionLineContainerStyle:H,deleteKeyCode:J="Backspace",selectionKeyCode:G="Shift",multiSelectionKeyCode:q="Meta",zoomActivationKeyCode:W="Meta",snapToGrid:te=!1,snapGrid:re=Zv,onlyRenderVisibleElements:ie=!1,selectNodesOnDrag:de=!0,nodesDraggable:Y,nodesConnectable:xe,nodesFocusable:Me,nodeOrigin:fe=qv,edgesFocusable:Pe,elementsSelectable:he,defaultViewport:ne=Jv,minZoom:ae=.5,maxZoom:P=2,translateExtent:R=ri,preventScrolling:k=!0,nodeExtent:U,defaultMarkerColor:K="#b1b1b7",zoomOnScroll:ce=!0,zoomOnPinch:oe=!0,panOnScroll:ee=!1,panOnScrollSpeed:se=.5,panOnScrollMode:pe=nn.Free,zoomOnDoubleClick:we=!0,panOnDrag:je=!0,onPaneClick:me,onPaneMouseEnter:$e,onPaneMouseMove:We,onPaneMouseLeave:Ye,onPaneScroll:Ae,onPaneContextMenu:bt,children:be,onEdgeUpdate:Se,onEdgeContextMenu:Ke,onEdgeDoubleClick:At,onEdgeMouseEnter:st,onEdgeMouseMove:Kr,onEdgeMouseLeave:qr,onEdgeUpdateStart:Ue,onEdgeUpdateEnd:tt,edgeUpdaterRadius:Zn=10,onNodesChange:Zr,onEdgesChange:Rc,noDragClassName:Ac="nodrag",noWheelClassName:Dc="nowheel",noPanClassName:Li="nopan",fitView:Oc=!1,fitViewOptions:zc,connectOnClick:kc=!0,attributionPosition:Bc,proOptions:Lc,defaultEdgeOptions:Fc,elevateEdgesOnSelect:Hc=!1,disableKeyboardA11y:Fi=!1,style:jc,id:Hi,...Wc},Uc)=>{const Vc=qa(a,iv),Gc=qa(i,tv),Jr=Hi||"1";return f("div",{...Wc,style:{...jc,...Qv},ref:Uc,className:ze(["react-flow",o]),"data-testid":"rf__wrapper",id:Hi,children:z(mc,{children:[f(Gv,{onInit:l,onMove:u,onMoveStart:h,onMoveEnd:d,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:x,onNodeMouseMove:S,onNodeMouseLeave:y,onNodeContextMenu:C,onNodeDoubleClick:$,nodeTypes:Vc,edgeTypes:Gc,connectionLineType:T,connectionLineStyle:F,connectionLineComponent:L,connectionLineContainerStyle:H,selectionKeyCode:G,deleteKeyCode:J,multiSelectionKeyCode:q,zoomActivationKeyCode:W,onlyRenderVisibleElements:ie,selectNodesOnDrag:de,defaultViewport:ne,translateExtent:R,minZoom:ae,maxZoom:P,preventScrolling:k,zoomOnScroll:ce,zoomOnPinch:oe,zoomOnDoubleClick:we,panOnScroll:ee,panOnScrollSpeed:se,panOnScrollMode:pe,panOnDrag:je,onPaneClick:me,onPaneMouseEnter:$e,onPaneMouseMove:We,onPaneMouseLeave:Ye,onPaneScroll:Ae,onPaneContextMenu:bt,onSelectionContextMenu:N,onEdgeUpdate:Se,onEdgeContextMenu:Ke,onEdgeDoubleClick:At,onEdgeMouseEnter:st,onEdgeMouseMove:Kr,onEdgeMouseLeave:qr,onEdgeUpdateStart:Ue,onEdgeUpdateEnd:tt,edgeUpdaterRadius:Zn,defaultMarkerColor:K,noDragClassName:Ac,noWheelClassName:Dc,noPanClassName:Li,elevateEdgesOnSelect:Hc,rfId:Jr,disableKeyboardA11y:Fi,nodeOrigin:fe,nodeExtent:U}),f(X0,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:p,onConnectStart:w,onConnectEnd:v,onClickConnectStart:E,onClickConnectEnd:g,nodesDraggable:Y,nodesConnectable:xe,nodesFocusable:Me,edgesFocusable:Pe,elementsSelectable:he,minZoom:ae,maxZoom:P,nodeExtent:U,onNodesChange:Zr,onEdgesChange:Rc,snapToGrid:te,snapGrid:re,connectionMode:A,translateExtent:R,connectOnClick:kc,defaultEdgeOptions:Fc,fitView:Oc,fitViewOptions:zc,onNodesDelete:D,onEdgesDelete:B,onNodeDragStart:_,onNodeDrag:I,onNodeDragStop:O,onSelectionDrag:b,onSelectionDragStart:X,onSelectionDragStop:M,noPanClassName:Li,nodeOrigin:fe,rfId:Jr}),f(V0,{onSelectionChange:Z}),be,f($0,{proOptions:Lc,position:Bc}),f(J0,{rfId:Jr,disableKeyboardA11y:Fi})]})})});yc.displayName="ReactFlow";function ex(){const e=Ne();return m.useCallback(t=>{const{domNode:n,updateNodeDimensions:r}=e.getState(),o=n==null?void 0:n.querySelector(`.react-flow__node[data-id="${t}"]`);o&&requestAnimationFrame(()=>r([{id:t,nodeElement:o,forceUpdate:!0}]))},[])}function vc(e){return t=>{const[n,r]=m.useState(t),o=m.useCallback(a=>r(i=>e(a,i)),[]);return[n,r,o]}}const tx=vc(zi),nx=vc(vv),xc=({id:e,x:t,y:n,width:r,height:o,style:a,color:i,strokeColor:s,strokeWidth:c,className:l,borderRadius:u,shapeRendering:h,onClick:d})=>{const{background:p,backgroundColor:w}=a||{},v=i||p||w;return f("rect",{className:ze(["react-flow__minimap-node",l]),x:t,y:n,rx:u,ry:u,width:r,height:o,fill:v,stroke:s,strokeWidth:c,shapeRendering:h,onClick:d?E=>d(E,e):void 0})};xc.displayName="MiniMapNode";var rx=m.memo(xc);const ox=200,ix=150,ax=e=>{const t=Array.from(e.nodeInternals.values()),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{nodes:t.filter(r=>!r.hidden&&r.width&&r.height),viewBB:n,boundingRect:t.length>0?M0(Xr(t),n):n,rfId:e.rfId}},$o=e=>e instanceof Function?e:()=>e,sx="react-flow__minimap-desc";function bc({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:i=2,maskColor:s="rgb(240, 240, 240, 0.6)",position:c="bottom-right",onClick:l,onNodeClick:u,pannable:h=!1,zoomable:d=!1}){const p=Ne(),w=m.useRef(null),{boundingRect:v,viewBB:E,nodes:g,rfId:x}=ve(ax,He),S=(e==null?void 0:e.width)??ox,y=(e==null?void 0:e.height)??ix,C=$o(r),$=$o(n),_=$o(o),I=v.width/S,O=v.height/y,D=Math.max(I,O),B=D*S,Z=D*y,X=5*D,b=v.x-(B-v.width)/2-X,M=v.y-(Z-v.height)/2-X,N=B+X*2,A=Z+X*2,T=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",F=`${sx}-${x}`,L=m.useRef(0);L.current=D,m.useEffect(()=>{if(w.current){const G=Ze(w.current),q=re=>{const{transform:ie,d3Selection:de,d3Zoom:Y}=p.getState();if(re.sourceEvent.type!=="wheel"||!de||!Y)return;const xe=-re.sourceEvent.deltaY*(re.sourceEvent.deltaMode===1?.05:re.sourceEvent.deltaMode?1:.002)*10,Me=ie[2]*Math.pow(2,xe);Y.scaleTo(de,Me)},W=re=>{const{transform:ie,d3Selection:de,d3Zoom:Y}=p.getState();if(re.sourceEvent.type!=="mousemove"||!de||!Y)return;const xe={x:ie[0]-re.sourceEvent.movementX*L.current*Math.max(1,ie[2]),y:ie[1]-re.sourceEvent.movementY*L.current*Math.max(1,ie[2])},Me=Pt.translate(xe.x,xe.y).scale(ie[2]);Y.transform(de,Me)},te=Il().on("zoom",h?W:null).on("zoom.wheel",d?q:null);return G.call(te),()=>{G.on("zoom",null)}}},[h,d]);const H=l?G=>{const q=nt(G);l(G,{x:q[0],y:q[1]})}:void 0,J=u?(G,q)=>{const W=p.getState().nodeInternals.get(q);u(G,W)}:void 0;return f(Ni,{position:c,style:e,className:ze(["react-flow__minimap",t]),children:z("svg",{width:S,height:y,viewBox:`${b} ${M} ${N} ${A}`,role:"img","aria-labelledby":F,ref:w,onClick:H,children:[f("title",{id:F,children:"React Flow mini map"}),g.map(G=>{var q,W;return f(rx,{x:((q=G.positionAbsolute)==null?void 0:q.x)??0,y:((W=G.positionAbsolute)==null?void 0:W.y)??0,width:G.width,height:G.height,style:G.style,className:_(G),color:C(G),borderRadius:a,strokeColor:$(G),strokeWidth:i,shapeRendering:T,onClick:J,id:G.id},G.id)}),f("path",{className:"react-flow__minimap-mask",d:`M${b-X},${M-X}h${N+X*2}v${A+X*2}h${-N-X*2}z
        M${E.x},${E.y}h${E.width}v${E.height}h${-E.width}z`,fill:s,fillRule:"evenodd"})]})})}bc.displayName="MiniMap";var lx=m.memo(bc);function cx(){return f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:f("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function ux(){return f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:f("path",{d:"M0 0h32v4.2H0z"})})}function dx(){return f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:f("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function fx(){return f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function hx(){return f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:f("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}const Pn=({children:e,className:t,...n})=>f("button",{type:"button",className:ze(["react-flow__controls-button",t]),...n,children:e});Pn.displayName="ControlButton";const px=e=>e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable,wc=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:i,onFitView:s,onInteractiveChange:c,className:l,children:u,position:h="bottom-left"})=>{const d=Ne(),[p,w]=m.useState(!1),v=ve(px),{zoomIn:E,zoomOut:g,fitView:x}=Yr();if(m.useEffect(()=>{w(!0)},[]),!p)return null;const S=()=>{E(),a==null||a()},y=()=>{g(),i==null||i()},C=()=>{x(o),s==null||s()},$=()=>{d.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return z(Ni,{className:ze(["react-flow__controls",l]),position:h,style:e,children:[t&&z(ue,{children:[f(Pn,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",children:f(cx,{})}),f(Pn,{onClick:y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",children:f(ux,{})})]}),n&&f(Pn,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view",children:f(dx,{})}),r&&f(Pn,{className:"react-flow__controls-interactive",onClick:$,title:"toggle interactivity","aria-label":"toggle interactivity",children:v?f(hx,{}):f(fx,{})}),u]})};wc.displayName="Controls";var gx=m.memo(wc),Je;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Je||(Je={}));function mx({color:e,dimensions:t,lineWidth:n}){return f("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function yx({color:e,radius:t}){return f("circle",{cx:t,cy:t,r:t,fill:e})}const vx={[Je.Dots]:"#91919a",[Je.Lines]:"#eee",[Je.Cross]:"#e2e2e2"},xx={[Je.Dots]:1,[Je.Lines]:1,[Je.Cross]:6},bx=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Sc({variant:e=Je.Dots,gap:t=20,size:n,lineWidth:r=1,color:o,style:a,className:i}){const s=m.useRef(null),{transform:c,patternId:l}=ve(bx,He),u=o||vx[e],h=n||xx[e],d=e===Je.Dots,p=e===Je.Cross,w=Array.isArray(t)?t:[t,t],v=[w[0]*c[2]||1,w[1]*c[2]||1],E=h*c[2],g=p?[E,E]:v,x=d?[E/2,E/2]:[g[0]/2,g[1]/2];return z("svg",{className:ze(["react-flow__background",i]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:s,children:[f("pattern",{id:l,x:c[0]%v[0],y:c[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`,children:d?f(yx,{color:u,radius:E/2}):f(mx,{dimensions:g,color:u,lineWidth:r})}),f("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${l})`})]})}Sc.displayName="Background";var wx=m.memo(Sc);const oi=e=>`${e.sourceEntity}_${e.name}`,Sx=e=>`${e.targetEntity}_${e.targetName}`,ki=e=>`entity_er_node_id_${e.id}`,ii=(e,t)=>`${ki(e)}_${t.id}`,Ec=e=>e.type===hs.Lookup&&e.relationType===_n.ManyToOne,Cc=e=>e.type===hs.Lookup?"green":"red",Ex=22,Rn=18,Cx=40,$x=({entity:e,relation:t,passive:n})=>{const r=Yr(),o=ex(),[a,i]=m.useState(Number.MAX_SAFE_INTEGER);return m.useEffect(()=>{var s,c;if(n&&Ec(t))i(Cx/2-Rn/2);else{const l=(s=document.getElementById(ki(e)))==null?void 0:s.getClientRects()[0],u=(c=document.getElementById(ii(e,t)))==null?void 0:c.getClientRects()[0],h=((u==null?void 0:u.top)??0)-((l==null?void 0:l.top)??0);i(h)}setTimeout(()=>o(e.name))},[e,n,r,t,o]),{top:a,left:n?-Rn:"auto",right:n?"auto":-Rn}},_x=({relation:e,passive:t})=>{const[n,r]=m.useState("relation-one-many");return m.useEffect(()=>{if(t)switch(e.relationType){case _n.ManyToMany:r("relation-one-many");break;case _n.ManyToOne:case Jn.ManyToOne:case Jn.OneToOne:r("relation-one-one");break}else switch(e.relationType){case _n.ManyToMany:case _n.ManyToOne:case Jn.ManyToOne:r("relation-one-many");break;case Jn.OneToOne:r("relation-one-one");break}},[t,e.relationType]),{icon:n,color:Cc(e)}},Za=({data:{entity:e,entity:{relations:t}},relation:n,passive:r})=>{const o=r?Sx(n):oi(n),{top:a,left:i,right:s}=$x({entity:e,relation:n,passive:r}),{icon:c,color:l}=_x({relation:n,passive:r});return f(Hn,{className:Nx.wrapper,id:o,type:r?"target":"source",position:r?V.Left:V.Right,style:{left:i,right:s,top:a+Ex/2},onConnect:u=>console.log("handle onConnect",u),isConnectable:!1,children:f("span",{style:{color:l,transform:r?"rotateY(0deg)":"rotateY(180deg)"},children:f(hf,{type:c})})},n.id)},Nx={wrapper:j("height:",Rn,"px!important;width:",Rn,"px!important;display:flex;justify-content:center;align-items:center;border-radius:0;background-color:transparent!important;","")},Mx=e=>{const{data:{entity:{relations:t},passiveEntityRelations:n}}=e;return z(ue,{children:[t.map(r=>f(Za,{...e,passive:!1,relation:r},r.id)),n.map(r=>f(Za,{...e,passive:!0,relation:r},r.id))]})},Px=({data:{entity:e}})=>z("div",{className:$t(it.section),children:[f(Be.Title,{className:$t(it.sectionTitle),level:5,children:"字段"}),Ee.isEmpty(e.fields)?f(Iu,{description:"暂无字段"}):e.fields.map(t=>z("div",{className:$t(it.sectionItem),children:[z(An,{size:"small",children:[z(Be.Text,{children:[t.description,"(",t.name,")"]}),t.required&&f(Be.Text,{type:"danger",children:"*"})]}),f(Be.Text,{children:t.type})]},t.name))]}),Ix=({data:{entity:e,entity:{relations:t},passiveEntityRelations:n}})=>{const r=n.filter(a=>!Ec(a)),o=[...t,...r];return Ee.isEmpty(o)?null:z("div",{className:$t(it.section),children:[f(Be.Title,{className:$t(it.sectionTitle),level:5,children:"关系"}),t.map(a=>z("div",{className:$t(it.sectionItem),id:ii(e,a),children:[f(An,{size:"small",children:z(Be.Text,{children:[a.description,"(",a.name,")"]})}),f(Be.Text,{children:a.type})]},a.name)),r.map(a=>z("div",{className:$t(it.sectionItem),id:ii(e,a),children:[f(An,{size:"small",children:z(Be.Text,{disabled:!0,children:[a.targetDescription,"(",a.targetName,")"]})}),f(Be.Text,{disabled:!0,children:a.type})]},a.targetName))]})},Tx=e=>{const{data:{entity:t}}=e,n=Un();return z(ue,{children:[f(Mx,{...e}),z("div",{id:ki(t),style:{"--header-bg-color":n.colorPrimary},className:it.wrapper,children:[f("div",{className:it.header,children:f(Be.Title,{level:5,children:t.title})}),z("div",{className:it.body,children:[f(Px,{...e}),f(Ix,{...e})]}),z(jn,{className:it.footer,children:[f(on,{span:12,children:f(Re,{block:!0,type:"link",onClick:()=>qt.emit("onChange",t),children:"编辑"})}),f(on,{span:12,children:f(Re,{block:!0,type:"text",danger:!0,onClick:()=>qt.emit("onDelete",t.id),children:"删除"})})]})]})]})},it={wrapper:j({name:"zo47d5",styles:"width:300px;border-radius:10px;background-color:white;overflow:hidden;border:solid rgba(0,0,0,.1)"}),header:j({name:"szrp7z",styles:"background-color:var(--header-bg-color);padding:8px 16px;.ant-typography{color:white;margin:0;}"}),body:j({name:"1jb4mpp",styles:"padding:4px 0"}),section:j("",""),sectionTitle:j({name:"1dhy8e2",styles:"color:var(--header-bg-color)!important;padding:0 16px;font-size:14px!important;font-weight:normal!important;margin-bottom:0!important"}),sectionItem:j({name:"1r7zpal",styles:"padding:0 16px;display:flex;justify-content:space-between;align-items:center;.ant-typography{font-size:12px;}"}),footer:j({name:"covnv5",styles:"border-top:solid rgba(0,0,0,.1)"})},Rx={EntityNode:m.memo(Tx)},Ax=()=>{const[e,t]=It(Oe.entitiesSelector),n=Ce(Oe.entityRelationsByTargetEntityNameMapSelector),[r,o,a]=tx(e.map(s=>({id:s.name,type:"EntityNode",data:{entity:s,passiveEntityRelations:n[s.name]||[]},position:s.position}))),i=m.useCallback(s=>{a(s);const c=zi(s,r),l=Ee.keyBy(s.filter(h=>h.type==="position"),"id"),u=Ee.keyBy(c,h=>h.id);t(h=>h.map(d=>{var p;return Reflect.has(l,d.name)?{...d,position:((p=u[d.name])==null?void 0:p.positionAbsolute)??d.position}:d}))},[r,a,t]);return m.useEffect(()=>{o(s=>{const c=Ee.keyBy(s,l=>l.id);return e.map(l=>c[l.name]?{...c[l.name],data:{entity:l,passiveEntityRelations:n[l.name]||[]},position:l.position}:{id:l.name,type:"EntityNode",data:{entity:l,passiveEntityRelations:n[l.name]||[]},position:l.position})})},[e,n,o]),{nodes:r,onNodesChange:i}},Dx=({onChangeEntity:e,onDeleteEntity:t})=>{const n=Un(),r=Ce(Oe.entityRelationsSelector),{nodes:o,onNodesChange:a}=Ax(),[i,s,c]=nx(r.map(u=>({id:u.id,source:u.sourceEntity,target:u.targetEntity,sourceHandle:oi(u),targetHandle:oi(u),style:{stroke:Cc(u),zIndex:999999}}))),l=m.useCallback(u=>s(h=>jl({...u,animated:!0,style:{stroke:"green"}},h)),[s]);return m.useEffect(()=>(qt.on("onDelete",t),qt.on("onChange",e),()=>{qt.off("onDelete",t),qt.off("onChange",e)}),[e,t]),f("div",{className:Ox.wrapper,children:z(yc,{nodes:o,edges:i,onNodesChange:a,onEdgesChange:c,onConnect:l,style:{background:"#fff"},nodeTypes:Rx,connectionLineStyle:{stroke:n.colorPrimary,zIndex:999999},snapToGrid:!0,snapGrid:[20,20],attributionPosition:"bottom-left",children:[f(wx,{variant:Je.Cross,gap:10,size:2}),f(gx,{}),f(lx,{pannable:!0,zoomable:!0})]})})},Ox={wrapper:j({name:"mfs71j",styles:"height:100%;.react-flow__attribution{display:none;}.react-flow__node{border:none;}.react-flow__handle{z-index:9;}.react-flow__edges{z-index:999999!important;}"})},zx=({onChangeEntity:e,onDeleteEntity:t})=>{const n=Ce(Oe.entitiesSelector),r=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(o,a)=>z(An,{size:"small",children:[f(Re,{size:"small",type:"link",onClick:()=>e(a),children:"编辑"}),f(Re,{size:"small",danger:!0,type:"text",onClick:()=>t(a.id),children:"删除"})]})}];return f("div",{className:kx.wrapper,children:f(ps,{rowKey:"id",size:"small",columns:r,dataSource:n})})},kx={wrapper:j("","")},$c=({onOk:e,onCancel:t,open:n,mode:r,form:o})=>f(ue,{children:f(Tu,{title:r==="create"?"创建数据模型":"编辑数据模型",onCancel:()=>{t(),o.resetFields()},onOk:async()=>{await o.validateFields(),e(o.getFieldsValue()),o.resetFields()},open:n,destroyOnClose:!0,children:z(ke,{form:o,labelCol:{style:{width:"50px"}},children:[f(ke.Item,{label:"ID",name:"id",hidden:!0,children:f(Ct,{})}),f(ke.Item,{label:"名称",name:"title",rules:[{required:!0,message:"请输入数据模型名称"}],children:f(Ct,{})}),f(ke.Item,{label:"标识",name:"name",rules:[{required:!0,message:"请输入数据模型标识"},{pattern:/^[a-zA-Z]\w+$/,message:"只能由英文、数字、下划线组成，且必须英文开头"}],children:f(Ct,{disabled:r==="edit"})}),f(ke.Item,{label:"描述",name:"description",children:f(Ct,{})})]})})}),_c=mr(),Nc=({children:e})=>{const[t,n]=m.useState(null);return fs(()=>{setTimeout(()=>{n(document.getElementById(_c))})}),t?ls.createPortal(e,t):null},Bx=()=>f("span",{id:_c}),Lx=({entity:e,onEditEntity:t})=>z(ue,{children:[f(Nc,{children:f(Re,{type:"link",onClick:()=>t(e),children:"编辑"})}),f("div",{className:Fx.wrapper,children:z(To,{readonly:!0,layout:"horizontal",grid:!0,colProps:{span:12},submitter:!1,children:[f(gt,{label:"名称",fieldProps:{value:e.title}}),f(gt,{label:"标识",fieldProps:{value:e.name}}),f(gt,{label:"描述",fieldProps:{value:e.description}})]})})]}),Fx={wrapper:j({name:"10rtstj",styles:"padding:16px"})},Hx=e=>{switch(e){case Ve.Text:case Ve.LongText:return z(ue,{children:[f(xn,{name:["config","max"],label:"最大长度",max:255,fieldProps:{precision:0}}),f(xn,{name:["config","min"],label:"最小长度",min:0,fieldProps:{precision:0}})]});case Ve.Enum:return z(ue,{children:[f(Zs,{name:["config","enumCode"],label:"枚举类型",placeholder:"请选择枚举类型",options:Mc,allowClear:!1,rules:[{required:!0,message:"请选择枚举类型"}]}),f(Lo,{name:["config","multiple"],label:"多选"})]});case Ve.Number:return z(ue,{children:[f(xn,{name:["config","max"],label:"最大值",max:255,fieldProps:{precision:0}}),f(xn,{name:["config","min"],label:"最小值",min:0,fieldProps:{precision:0}}),f(xn,{name:["config","precision"],label:"小数位数",min:0,fieldProps:{precision:0}})]});case Ve.AutoNumber:return f(ue,{children:f(gt,{name:["config","format"],label:"显示格式",placeholder:"请输入显示格式"})});case Ve.Image:return f(ue,{children:f(Lo,{name:["config","multiple"],label:"多选"})});case Ve.PhoneNumber:case Ve.URL:case Ve.Email:case Ve.Date:case Ve.DateTime:default:return null}},Mc=Object.values(Ve).map(e=>({label:Ru(e),value:e})),jx=(e,t)=>{const[n]=To.useForm(),r=To.useWatch("type",n),[o,a]=m.useState(""),[i,s]=m.useState(""),[c,l]=m.useState("detail"),u=xt(Oe.entitySelector(o)),[h,d]=m.useState(!1),p=gs(({snapshot:w})=>({entityId:v,fieldId:E})=>w.getLoadable(Oe.entitySelector(v)).getValue().fields.find(g=>g.id===E),[]);return m.useImperativeHandle(t,()=>({create:({entityId:w})=>{a(w),s(""),l("create"),d(!0)},edit:({entityId:w,fieldId:v})=>{a(w),s(v),l("edit"),n.setFieldsValue(p({entityId:w,fieldId:v})),d(!0)},showDetail:({entityId:w,fieldId:v})=>{a(w),s(v),l("detail"),n.setFieldsValue(p({entityId:w,fieldId:v})),d(!0)}}),[n,p]),z(Au,{readonly:c==="detail",title:"新建字段",width:500,form:n,size:"small",layout:"horizontal",labelCol:{style:{width:"80px"}},drawerProps:{destroyOnClose:!0},open:h,onOpenChange:d,onFinish:async w=>{switch(c){case"create":u(Qe(v=>{v.fields.push({...w,id:mr()})}));break;case"edit":u(Qe(v=>{v.fields=v.fields.map(E=>E.id===i?{...w}:E)}));break}return!0},children:[f(gt,{hidden:!0,name:"id",label:"字段id"}),f(Zs,{name:"type",label:"字段类型",placeholder:"请选择字段类型",options:Mc,allowClear:!1,rules:[{required:!0,message:"请选择字段类型"}]}),f(gt,{name:"title",label:"字段名称",placeholder:"请输入字段类型",rules:[{required:!0,message:"请输入字段名称"}]}),f(gt,{name:"name",label:"字段标识",placeholder:"请输入字段标识",rules:[{required:!0,message:"请输入字段标识"}]}),f(gt,{name:"description",label:"字段描述",placeholder:"请输入字段描述"}),r!==Ve.AutoNumber&&f(Lo,{name:"required",label:"必填"}),Hx(r)]})},Wx=m.forwardRef(jx),_o=({entityId:e})=>{const t=m.useRef(null),[n,r]=It(Oe.entitySelector(e)),o=[{title:"名称",dataIndex:"title",key:"title"},{title:"标识",dataIndex:"name",key:"name"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",key:"operation",width:100,align:"center",fixed:"right",render:(a,i)=>z(An,{size:"small",children:[f(Re,{size:"small",type:"link",onClick:()=>{var s;(s=t.current)==null||s.edit({entityId:n.id,fieldId:i.id})},children:"编辑"}),f(Re,{size:"small",type:"link",onClick:()=>{var s;(s=t.current)==null||s.showDetail({entityId:n.id,fieldId:i.id})},children:"详情"}),f(Re,{size:"small",danger:!0,type:"text",onClick:()=>{r(Qe(s=>{s.fields=s.fields.filter(c=>c.id!==i.id)}))},children:"删除"})]})}];return z(ue,{children:[f(Wx,{ref:t}),f(Nc,{children:f(Re,{type:"link",onClick:()=>{var a;(a=t.current)==null||a.create({entityId:n.id})},children:"添加字段"})}),f("div",{children:f(ps,{size:"small",dataSource:n.fields,rowKey:"id",columns:o,pagination:!1})})]})},Ux=[{key:"List",tab:"列表"},{key:"ER",tab:"ER图"}],Vx=()=>{const[e,t]=el({activeTabKey:"List"}),n=xt(Oe.entityByIdSelector),[r,o]=m.useState("edit"),a=v=>{n(Qe(E=>{Reflect.deleteProperty(E,v)}))},{open:i,setFalse:s,setTrue:c,onSubmitEntity:l,form:u}=Js(),h=Rt(),d=Wt(),p=v=>{h(sn(Le.Entity,{entityId:v.id,appId:d.appId}))},w=()=>{o("create"),c()};return z(ue,{children:[f($c,{onOk:l,onCancel:s,open:i,mode:r,form:u}),f("div",{className:Ja.wrapper,children:f(an,{size:"small",tabProps:{size:"small"},className:Ja.card,title:f("span",{children:"数据模型"}),tabList:Ux,tabBarExtraContent:f(Re,{type:"link",onClick:w,children:"添加模型"}),activeTabKey:e.activeTabKey,onTabChange:v=>t({activeTabKey:v}),children:e.activeTabKey==="List"?f(zx,{onDeleteEntity:a,onChangeEntity:p}):f(Dx,{onDeleteEntity:a,onChangeEntity:p})})})]})},Ja={wrapper:j({name:"13udsys",styles:"height:100%"}),card:j({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Gx=[{key:"Base",tab:"基础信息"},{key:"Field",tab:"字段和关系"},{key:"Method",tab:"方法"},{key:"View",tab:"视图"}],Xx=()=>{const[e,t]=el({activeTabKey:"Base"}),{entityId:n}=Wt(),r=Ce(Oe.entitySelector(n)),{open:o,setFalse:a,setTrue:i,onSubmitEntity:s,form:c}=Js(),l=u=>{switch(u){case"Base":return f(Lx,{entity:r,onEditEntity:()=>{c.setFieldsValue(r),i()}});case"Field":return f(_o,{entityId:r.id});case"Method":return f(_o,{entityId:r.id});case"View":return f(_o,{entityId:r.id});default:return f("div",{children:"未知模块"})}};return z(ue,{children:[f(ue,{children:f($c,{onOk:s,onCancel:a,open:o,mode:"edit",form:c})}),f("div",{className:Qa.wrapper,children:f(an,{size:"small",tabProps:{size:"small"},title:`${r.title}(${r.name})`,tabList:Gx,tabBarExtraContent:f(Bx,{}),className:Qa.card,activeTabKey:e.activeTabKey,onTabChange:u=>t({activeTabKey:u}),children:l(e.activeTabKey)})})]})},Qa={wrapper:j({name:"13udsys",styles:"height:100%"}),card:j({name:"tpenv9",styles:"height:100%;display:flex;flex-direction:column;.ant-card-body{flex:1;padding:0;}"})},Yx=e=>{const[t,n]=m.useState({x:0,y:0,width:0,height:0}),[r,o]=m.useState(!1);return zo("mousemove",()=>{o(!1)},{target:document.body,capture:!0,passive:!0}),zo("mousemove",i=>{const s=Du(i.target,e.current);if(s){const c=s.getClientRects()[0];n({x:c.x,y:c.y,width:c.width,height:c.height}),o(!0)}else n({x:0,y:0,width:0,height:0}),o(!1)},{target:e,passive:!0}),{style:{width:`${t.width??0}px`,height:`${t.height??0}px`,left:`${t.x??0}px`,top:`${t.y??0}px`,display:r?"block":"none"}}},Pc=()=>{const e=xt(ms);return{removeWidget:m.useCallback((n,r=!0)=>{e(Qe(o=>{o.forEach(s=>{Ee.isObject(s.slots)&&Object.keys(s.slots).forEach(c=>{const l=s.slots[c].findIndex(u=>u===n);l!==-1&&s.slots[c].splice(l,1)})});const a=[n],i=[o.find(s=>s.id===n)];for(;!Ee.isEmpty(i);){const s=i.shift();Ee.isObject(s.slots)&&Object.values(s.slots).forEach(c=>{c.forEach(l=>{a.push(l),i.push(o.find(u=>u.id===l))})})}a.forEach(s=>{const c=o.findIndex(l=>l.id===s);c!==-1&&o.splice(c,1)})}))},[e])}},Kx=()=>{const[e,t]=It(ut),{removeWidget:n}=Pc();return Bh("delete",()=>{e&&(n(e),t(""))}),null},qx=({canvasRef:e})=>{const t=Un(),{style:n}=Yx(e);return f("div",{className:Zx.wrapper,style:{...n,"--border-color":t.colorPrimary}})},Zx={wrapper:j({name:"1vyoufo",styles:"border:1px dashed var(--border-color);position:absolute;z-index:999999"})},Jx=e=>{const t=xt(ut);zo("click",n=>{const r=Ou(n.target,e.current),o=zu(r);t(o)},{target:e})},Qx=()=>{const e=Ce(ut),t=m.useRef(null),n=Ce(ci(e)),r=Ce(ys),[{isDragging:o},a,i]=ui(()=>({type:n.widgetType,item:()=>({type:di.Move,widget:n}),collect:u=>({isDragging:u.isDragging()}),options:{dropEffect:"copy"}}),[n]);m.useEffect(()=>{},[o]);const s=o?"0.4":"1",c=m.useContext(fi);m.useEffect(()=>{const u=Ro(e,c.document);u&&i(u)},[s,i,e,c.document,o]);const l=Un();return o||!r[e].parent?null:f("div",{ref:t,style:{"--border-color":l.colorPrimary},className:Ot.box,children:z(Re.Group,{className:Ot.button,size:"small",children:[f(Re,{ref:a,className:`${Ot.button} ${Ot.dragButton}`,type:"primary",icon:f(ku,{className:Ot.button})}),f(Re,{className:Ot.button,type:"primary",children:"2"}),f(Re,{className:Ot.button,type:"primary",children:"3"})]})})},Ot={button:j({name:"k1v6xs",styles:"height:16px!important;line-height:16px!important;font-size:12px!important;display:flex!important;justify-content:center!important;align-items:center!important"}),dragButton:j({name:"wa1o5r",styles:"cursor:move!important"}),box:j({name:"172hvwc",styles:"transform:translateY(-100%);margin-top:-2px;border-radius:3px;height:16px;display:flex;align-items:center;left:0;pointer-events:auto"})},eb=()=>{const e=Ce(ut),[t,n]=m.useState({x:0,y:0,width:0,height:0}),r=Ce(ms),[o,a]=m.useState(!1),[i,s]=m.useState(0);m.useEffect(()=>{setTimeout(()=>{s(E=>E+1)})},[r]);const c=m.useContext(fi);m.useEffect(()=>{if(!e){a(!1);return}const E=Ro(e,c.document);if(E){const g=E.getClientRects()[0];n({x:g.x,y:g.y,width:g.width,height:g.height}),a(!0)}else n({x:0,y:0,width:0,height:0}),a(!1)},[e,c.document,i]);const l={width:`${t.width??0}px`,height:`${t.height??0}px`,left:`${t.x??0}px`,top:`${t.y??0}px`,display:o?"block":"none"},u=Ce(ci(e)),[{isDragging:h},d,p]=ui(()=>({type:u.widgetType,item:()=>({type:di.Move,widget:u}),collect:E=>({isDragging:E.isDragging()}),options:{dropEffect:"copy"}}),[u]),w=h?"0.4":"1";m.useEffect(()=>{const E=Ro(e,c.document);E&&(E.style.opacity=w,p(E))},[w,p,e,c.document]);const v=Un();return f("div",{ref:d,className:nb.wrapper,style:{...l,"--border-color":v.colorPrimary},children:f(Qx,{})})},tb=({canvasRef:e})=>(Jx(e),Ce(ut)?f(eb,{}):null),nb={wrapper:j({name:"1h9weiq",styles:"border:1px dashed var(--border-color);position:absolute;z-index:50"})},rb=({canvasRef:e,style:t})=>z("div",{className:ob.wrapper,style:t,children:[f(qx,{canvasRef:e}),f(tb,{canvasRef:e}),f(Bu,{})]}),ob={wrapper:j({name:"1nt356n",styles:"position:fixed;left:0;right:0;bottom:0;top:0;pointer-events:none;z-index:999"})},ib=({children:e})=>{var u,h;const{widgets:t,rootWidgetId:n}=Ce(hi),r=m.useRef(null),[o,a]=m.useState(!1);m.useEffect(()=>{var d,p,w,v;o&&((p=(d=r.current)==null?void 0:d.contentWindow)==null||p.reactRenderHost.updateWidgets(t),(v=(w=r.current)==null?void 0:w.contentWindow)==null||v.reactRenderHost.updateRootWidgetId(n))},[t,n,o]);const i=m.useRef(null),[s,c]=m.useState({top:0,right:0,bottom:0,left:0}),l=m.useCallback(()=>{setTimeout(()=>{var w;const d=r.current;i.current=(w=d.contentWindow)==null?void 0:w.document;const p=d.getClientRects()[0];c({top:p.top,right:p.right,bottom:p.bottom,left:p.left}),a(!0)})},[]);return z("div",{className:es.wrapper,children:[m.cloneElement(e,{ref:r,onLoad:l}),o&&f(ue,{children:z(fi.Provider,{value:{document:(h=(u=r.current)==null?void 0:u.contentWindow)==null?void 0:h.document},children:[f(rb,{canvasRef:i,style:s}),f(Kx,{})]})}),!o&&f("div",{className:es.spinWrapper,children:f(Rr,{size:"large"})})]})},es={wrapper:j({name:"122qsqq",styles:"position:relative;padding:16px;height:100%"}),spinWrapper:j({name:"1yfx3f8",styles:"height:100%;width:100%;display:flex;justify-content:center;align-items:center"})},ab=()=>{var s,c;const e=Ce(hi),t=Ce(vs),n=t[e.rootWidgetId],r=m.useContext(Vn),o=[{key:e.id,title:e.name,page:e,nodeType:"page",children:[]}],a=Ee.head(o),i=[{_type:"widget",...n}];for(;i.length!==0;){const l=i.pop();if(l._type==="widget"){const u={nodeType:"widget",key:(l==null?void 0:l.id)??"",title:(l==null?void 0:l.widgetName)??"",widget:l,children:[]},h=o.pop();h==null||h.children.unshift(u);const d=r.widgetByType[l.widgetType];Ee.isEmpty(d.metadata.slots)||Object.entries(d.metadata.slots).forEach(([p,w])=>{i.push({_type:"slot",path:p,widgetId:l.id,...w}),o.push(u)})}else if(l._type==="slot"){const u={nodeType:"slot",key:`${l.widgetId}_${l==null?void 0:l.path}`??"",title:(l==null?void 0:l.name)??"",slot:l,children:[],selectable:!1,className:"outline-node-slot"},h=o.pop();h==null||h.children.unshift(u);const d=(c=(s=t[l.widgetId])==null?void 0:s.slots)==null?void 0:c[l.path];Ee.isEmpty(d)||d.forEach(p=>{i.push({_type:"widget",...t[p]}),o.push(u)})}}return{treeData:a}},sb=()=>{const{treeData:e}=ab(),[t,n]=It(ut),r=[t||e.key],o=Ce(ys),a=Ce(vs),{moveWidget:i}=Lu(),s=([h])=>{const d=h===e.key?"":h;n(d)},c=({dropNode:h,dropPosition:d,dragNode:p})=>p.nodeType==="slot"||p.nodeType==="page"||h.nodeType==="page"?!1:h.nodeType==="slot"?d===0:h.nodeType==="widget"?d!==0:!1,l=({dragNode:h,node:d,node:{pos:p},dropPosition:w})=>{const v=p.split("-"),E=w-Number(v[v.length-1]),g=h.widget;if(d.nodeType!=="slot"&&d.nodeType!=="widget")return;const[x,S]=us(d.nodeType).with("slot",()=>[a[d.slot.widgetId],d.slot.path]).with("widget",()=>[o[d.widget.id].parent.props,o[d.widget.id].slotPath]).exhaustive();switch(E){case-1:x&&S&&i({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:S,targetPosition:x.slots[S].findIndex(y=>d.widget.id===y)});break;case 1:x&&S&&i({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:S,targetPosition:x.slots[S].findIndex(y=>d.widget.id===y)+1});break;case 0:i({sourceWidgetId:g.id,targetWidgetId:x.id,targetSlotPath:S,targetPosition:0});break}},u=m.useRef();return f("div",{className:lb.treeWrapper,children:f(Fu,{ref:u,multiple:!1,icon:!1,allowDrop:c,switcherIcon:f(Hu,{}),selectedKeys:r,onSelect:s,defaultExpandAll:!0,draggable:{icon:!1,nodeDraggable:h=>{var d,p;return h.nodeType==="widget"&&h.widget.id!==((p=(d=Ee.head(e.children||[]))==null?void 0:d.widget)==null?void 0:p.id)}},blockNode:!0,onDrop:l,treeData:[e]})})},lb={treeWrapper:j({name:"1nppv72",styles:"padding:8px 4px;.ant-tree{line-height:20px!important;&-indent-unit{width:5px;}&-node-content-wrapper{line-height:20px!important;min-height:20px!important;}&-title{cursor:not-allowed;font-size:12px!important;}&-switcher{height:20px;width:20px;}}.outline-node-slot{color:rgba(22,119,255,.7);.ant-tree-title{cursor:not-allowed;}}"})},cb=({widgetId:e})=>{const[t,n]=It(ci(e)),r=m.useContext(Vn),o=m.useMemo(()=>r.widgetByType[t.widgetType].metadata,[r.widgetByType,t.widgetType]),a=o.jsonPropsSchema.properties.props.properties;return{formRender:Object.entries(a).filter(([,s])=>Reflect.has(s,Wi)).map(([s,c])=>{var d;const l=Reflect.get(c,Wi),u=r.setterByType[l.type],h=(d=o.setters)==null?void 0:d[l.native??""];return f(ke.Item,{tooltip:l.description,label:l.label,children:h?f(h,{value:t.props[s],onChange:p=>{n(Qe(w=>{w.props[s]=p}))}}):f(u,{options:l,value:t.props[s],onChange:p=>{n(Qe(w=>{w.props[s]=p}))}})},s)}),setWidget:n,widgetMetadata:o,widget:t}},ub=()=>{const[e,t]=It(ut),n=Ce(ju(e)),{setWidget:r,widgetMetadata:o,formRender:a,widget:i}=cb({widgetId:e}),{removeWidget:s}=Pc();return z(ke,{className:Bi.form,labelWrap:!0,size:"small",layout:"vertical",children:[f(ke.Item,{label:"组件ID",children:f(Ct,{readOnly:!0,value:e})}),f(ke.Item,{label:"组件类型",children:f(Ct,{readOnly:!0,value:o.widgetName})}),f(ke.Item,{label:"组件名称",children:f(Ic,{value:i.widgetName,onChange:c=>{r(Qe(l=>{l.widgetName=c}))},placeholder:"请输入组件名称"})}),f(Wu,{style:{margin:"8px 0"}}),a,!n&&f(ke.Item,{wrapperCol:{span:24},children:f(Re,{type:"primary",block:!0,danger:!0,onClick:()=>{s(e),t("")},children:"删除"})})]})},db=()=>{const[e,t]=It(hi);return f(ke,{className:Bi.form,labelWrap:!0,size:"small",children:f(ke.Item,{label:"页面名称",children:f(Ic,{onChange:n=>{t(Qe(r=>{r.name=n}))},value:e.name})})})},fb=()=>{const e=Ce(ut);return f("div",{className:Bi.wrapper,children:e?f(ub,{}):f(db,{})})},Bi={wrapper:j({name:"10rtstj",styles:"padding:16px"}),form:j({name:"nz83bz",styles:"& .ant-form-item{margin-bottom:12px!important;&-control-input-content{justify-content:flex-end!important;.ant-input-number{flex:1!important;}}}.ant-row{&.ant-form-item-row{.ant-form-item-label{display:flex;justify-content:space-between;}}}*[readonly]{border:none;}"})},Ic=e=>{const[t,n]=m.useState(e.value),[r,o]=m.useState(!1),a=r?t:e.value;return m.useEffect(()=>{n(e.value)},[e.value]),f(Ct,{...Ee.omit(e,"onChange"),className:$t(hb,e.className),readOnly:!r,value:a,onBlur:()=>{o(!1),e.onChange(t)},onClick:()=>o(!0),onChange:i=>{n(i.target.value)}})},hb=j({name:"t5n9jw",styles:"&[readonly]{cursor:pointer;border:none;}"}),pb=({metadata:e})=>{const t=m.useContext(Vn),[{isDragging:n},r,o]=ui(()=>({type:e.widgetType,item:()=>{const s=Uu.mrSchemeToDefaultJson(t.widgetByType[e.widgetType].metadata.jsonPropsSchema),c={...s,id:mr(),widgetName:`${s.widgetName}-${mr(4)}`};return{type:di.Add,widget:c}},end:(s,c)=>{const l=c.getDropResult();console.log("drag_end",s,l)},collect:s=>({isDragging:s.isDragging(),handlerId:s.getHandlerId()}),options:{dropEffect:"copy"}})),a=m.useRef(null);m.useEffect(()=>{o(a,{offsetX:0,offsetY:0})},[o]);const i=n?.3:1;return z(on,{className:kt.widgetWrapper,style:{opacity:i},span:12,children:[z(an,{ref:a,size:"small",className:`${kt.widget} ${kt.previewWidget}`,style:{fontSize:"12px"},bodyStyle:{padding:"4px",width:"80px",backgroundColor:"rgba(0,0,0,.04)"},children:[f("div",{className:kt.previewWidgetIcon,children:e.icon}),f("div",{children:e.widgetName})]}),z(an,{ref:r,size:"small",className:kt.widget,bodyStyle:{padding:"8px 0",backgroundColor:"rgba(0,0,0,.04)"},children:[f("div",{className:kt.widgetIcon,children:e.icon}),f("div",{children:e.widgetName})]})]})},gb=()=>{const e=m.useContext(Vn),t=m.useMemo(()=>Object.values(e.widgetByType).reduce((n,r)=>(Ee.isEmpty(n[r.group])?n[r.group]={name:Qn(r.group),widgets:[r]}:n[r.group].widgets.push(r),n),{[Vt.Container]:{name:Qn(Vt.Container),widgets:[]},[Vt.Input]:{name:Qn(Vt.Input),widgets:[]},[Vt.Button]:{name:Qn(Vt.Button),widgets:[]}}),[e.widgetByType]);return f("div",{children:Object.entries(t).map(([n,{name:r,widgets:o}])=>z("div",{className:kt.widgetsPanel,children:[f(Be.Title,{level:5,children:r}),f(jn,{gutter:[8,8],children:o.map(({metadata:a})=>f(pb,{metadata:a},a.widgetType))})]},n))})},kt={widgetWrapper:j({name:"1qesdsb",styles:"background-color:white"}),widget:j({name:"w77w2u",styles:"text-align:center;cursor:move;user-select:none;overflow:hidden"}),previewWidget:j({name:"1ms3iv6",styles:"position:absolute;z-index:0"}),previewWidgetIcon:j({name:"ytult0",styles:"font-size:14px;line-height:14px"}),widgetIcon:j({name:"h9twb6",styles:"font-size:24px;line-height:24px"}),widgetsPanel:j({name:"10rtstj",styles:"padding:16px"}),widgetGroup:j({name:"10rtstj",styles:"padding:16px"})},mb=({children:e,page:t,onPageChange:n})=>{const r=xt(ut),[o,a]=m.useState("");return f(Vu,{storeKey:Gu,listen:({updateItem:i})=>{t.id!==o&&(r(""),a(t.id)),Ui.canUpdate&&i(Qr,t),Ui.canUpdate=!0},read:i=>{if(i===Qr)return t},write:({diff:i})=>{for(const[s,c]of i)s===Qr&&n(c)},children:e})},yb=({page:e,onPageChange:t,children:n})=>{const r=xt(ut);return f(xs,{children:f(mb,{page:e,onPageChange:t,children:f(Xu,{backend:Yu,children:z("div",{className:pt.wrapper,children:[f("div",{className:`${pt.section} ${pt.sectionLeft}`,children:f(Mo,{className:pt.designerPanelTabs,type:"card",tabBarGutter:0,items:[{key:"CanvasDesignerOutlineTree",label:"大纲树",children:f(sb,{})}]})}),f("div",{className:`${pt.section} ${pt.canvasWrapper}`,onClick:()=>r(""),children:f(ib,{children:n})}),f("div",{className:`${pt.section} ${pt.sectionRight}`,children:f(Mo,{className:pt.designerPanelTabs,type:"card",tabBarGutter:0,items:[{key:"CanvasDesignerPropsPanel",label:"属性",children:f(fb,{})},{key:"CanvasDesignerWidgetStencil",label:"组件列表",children:f(gb,{})}]})})]})})})})},pt={wrapper:j({name:"1l991oj",styles:"height:100%;display:flex;justify-content:space-between"}),section:j({name:"1t18v70",styles:"height:100%;background-color:white"}),sectionLeft:j({name:"1v1nmsf",styles:"width:220px"}),sectionRight:j({name:"16s5rj8",styles:"width:280px"}),canvasWrapper:j({name:"jtiazy",styles:"position:relative;flex:1;border:1px solid rgba(0,0,0,.05);border-top:none;border-bottom:0"}),designerPanelTabs:j({name:"saa40",styles:"height:100%;&>.ant-tabs-nav{margin-bottom:0;}& .ant-tabs-nav-list{display:flex;width:100%;& .ant-tabs-tab{flex:1;border-radius:0!important;display:flex;justify-content:center;align-items:center;&.ant-tabs-tab-active{border-bottom-color:rgba(5, 5, 5, 0.13)!important;}}}& .ant-tabs-content-holder{height:100%;overflow-y:auto;}"})},Tc=m.forwardRef(({onLoad:e,src:t},n)=>f("iframe",{ref:n,className:vb.iframe,src:t,onLoad:e}));Tc.displayName="SimulatorPC";const vb={iframe:j({name:"17yvxh6",styles:"height:100%;width:100%;border:none;display:block"})},xb=()=>{const{pageId:e,appId:t}=Wt(),[n,r]=It(Oe.pageSelector(e)),o=gs(({snapshot:i})=>()=>Ee.head(i.getLoadable(Oe.pagesSelector).contents),[]),a=Rt();return m.useLayoutEffect(()=>{const i=o();!n&&i&&a(sn(Le.PAGE,{appId:t,pageId:i.id}),{replace:!0})},[t,o,a,n]),f(jn,{justify:"center",align:"middle",className:ts.page,children:f(on,{span:24,className:ts.container,children:n&&f(Vn.Provider,{value:Ku,children:f(yb,{page:n,onPageChange:r,children:f(Tc,{src:"/simulator/pc.html"})})})})})},ts={page:j({name:"13udsys",styles:"height:100%"}),container:j({name:"13udsys",styles:"height:100%"})},bb=()=>{const e=yi([{path:Le.APPS,element:f(la,{})},{path:Le.APP,element:f(op,{}),children:[{path:Le.PAGE,element:f(xb,{})},{path:Le.Entities,element:f(Vx,{})},{path:Le.Entity,element:f(Xx,{})}]},{path:"/",element:f(la,{})}]);return f(ue,{children:e})},wb=()=>f(m.Suspense,{fallback:f(cf,{}),children:f(xs,{children:f(qu,{locale:Zu,children:f(Ju,{children:f(Ph,{children:f(bb,{})})})})})});Qu.createRoot(document.getElementById("root")).render(f(Wn.StrictMode,{children:f(wb,{})}));
